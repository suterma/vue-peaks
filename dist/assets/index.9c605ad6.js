(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();function qr(t,e){const i=Object.create(null),n=t.split(",");for(let r=0;r<n.length;r++)i[n[r]]=!0;return e?r=>!!i[r.toLowerCase()]:r=>!!i[r]}const yl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wl=qr(yl);function Ga(t){return!!t||t===""}function Jr(t){if(N(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],r=Ae(n)?Sl(n):Jr(n);if(r)for(const s in r)e[s]=r[s]}return e}else{if(Ae(t))return t;if(ce(t))return t}}const bl=/;(?![^(]*\))/g,Cl=/:(.+)/;function Sl(t){const e={};return t.split(bl).forEach(i=>{if(i){const n=i.split(Cl);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Qr(t){let e="";if(Ae(t))e=t;else if(N(t))for(let i=0;i<t.length;i++){const n=Qr(t[i]);n&&(e+=n+" ")}else if(ce(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}function Tl(t,e){if(t.length!==e.length)return!1;let i=!0;for(let n=0;i&&n<t.length;n++)i=Xn(t[n],e[n]);return i}function Xn(t,e){if(t===e)return!0;let i=Ms(t),n=Ms(e);if(i||n)return i&&n?t.getTime()===e.getTime():!1;if(i=Ki(t),n=Ki(e),i||n)return t===e;if(i=N(t),n=N(e),i||n)return i&&n?Tl(t,e):!1;if(i=ce(t),n=ce(e),i||n){if(!i||!n)return!1;const r=Object.keys(t).length,s=Object.keys(e).length;if(r!==s)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!Xn(t[a],e[a]))return!1}}return String(t)===String(e)}function xl(t,e){return t.findIndex(i=>Xn(i,e))}const Dn=t=>Ae(t)?t:t==null?"":N(t)||ce(t)&&(t.toString===Ba||!Y(t.toString))?JSON.stringify(t,Ha,2):String(t),Ha=(t,e)=>e&&e.__v_isRef?Ha(t,e.value):fi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,r])=>(i[`${n} =>`]=r,i),{})}:Kn(e)?{[`Set(${e.size})`]:[...e.values()]}:ce(e)&&!N(e)&&!Va(e)?String(e):e,ae={},ui=[],et=()=>{},kl=()=>!1,Al=/^on[^a-z]/,Yn=t=>Al.test(t),es=t=>t.startsWith("onUpdate:"),Oe=Object.assign,ts=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},Pl=Object.prototype.hasOwnProperty,$=(t,e)=>Pl.call(t,e),N=Array.isArray,fi=t=>tn(t)==="[object Map]",Kn=t=>tn(t)==="[object Set]",Ms=t=>tn(t)==="[object Date]",Y=t=>typeof t=="function",Ae=t=>typeof t=="string",Ki=t=>typeof t=="symbol",ce=t=>t!==null&&typeof t=="object",za=t=>ce(t)&&Y(t.then)&&Y(t.catch),Ba=Object.prototype.toString,tn=t=>Ba.call(t),El=t=>tn(t).slice(8,-1),Va=t=>tn(t)==="[object Object]",is=t=>Ae(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,xn=qr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),jn=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},Il=/-(\w)/g,mi=jn(t=>t.replace(Il,(e,i)=>i?i.toUpperCase():"")),Ll=/\B([A-Z])/g,bi=jn(t=>t.replace(Ll,"-$1").toLowerCase()),Na=jn(t=>t.charAt(0).toUpperCase()+t.slice(1)),vr=jn(t=>t?`on${Na(t)}`:""),ji=(t,e)=>!Object.is(t,e),kn=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},On=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},Rn=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ds;const Ml=()=>Ds||(Ds=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ot;class Dl{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&ot&&(this.parent=ot,this.index=(ot.scopes||(ot.scopes=[])).push(this)-1)}run(e){if(this.active){const i=ot;try{return ot=this,e()}finally{ot=i}}}on(){ot=this}off(){ot=this.parent}stop(e){if(this.active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function Ol(t,e=ot){e&&e.active&&e.effects.push(t)}const ns=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Ua=t=>(t.w&Et)>0,Xa=t=>(t.n&Et)>0,Rl=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Et},Wl=t=>{const{deps:e}=t;if(e.length){let i=0;for(let n=0;n<e.length;n++){const r=e[n];Ua(r)&&!Xa(r)?r.delete(t):e[i++]=r,r.w&=~Et,r.n&=~Et}e.length=i}},Mr=new WeakMap;let Ri=0,Et=1;const Dr=30;let Je;const jt=Symbol(""),Or=Symbol("");class rs{constructor(e,i=null,n){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Ol(this,n)}run(){if(!this.active)return this.fn();let e=Je,i=kt;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Je,Je=this,kt=!0,Et=1<<++Ri,Ri<=Dr?Rl(this):Os(this),this.fn()}finally{Ri<=Dr&&Wl(this),Et=1<<--Ri,Je=this.parent,kt=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Je===this?this.deferStop=!0:this.active&&(Os(this),this.onStop&&this.onStop(),this.active=!1)}}function Os(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let kt=!0;const Ya=[];function Ci(){Ya.push(kt),kt=!1}function Si(){const t=Ya.pop();kt=t===void 0?!0:t}function Ve(t,e,i){if(kt&&Je){let n=Mr.get(t);n||Mr.set(t,n=new Map);let r=n.get(i);r||n.set(i,r=ns()),Ka(r)}}function Ka(t,e){let i=!1;Ri<=Dr?Xa(t)||(t.n|=Et,i=!Ua(t)):i=!t.has(Je),i&&(t.add(Je),Je.deps.push(t))}function mt(t,e,i,n,r,s){const a=Mr.get(t);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(i==="length"&&N(t))a.forEach((l,h)=>{(h==="length"||h>=n)&&o.push(l)});else switch(i!==void 0&&o.push(a.get(i)),e){case"add":N(t)?is(i)&&o.push(a.get("length")):(o.push(a.get(jt)),fi(t)&&o.push(a.get(Or)));break;case"delete":N(t)||(o.push(a.get(jt)),fi(t)&&o.push(a.get(Or)));break;case"set":fi(t)&&o.push(a.get(jt));break}if(o.length===1)o[0]&&Rr(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);Rr(ns(l))}}function Rr(t,e){const i=N(t)?t:[...t];for(const n of i)n.computed&&Rs(n);for(const n of i)n.computed||Rs(n)}function Rs(t,e){(t!==Je||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Fl=qr("__proto__,__v_isRef,__isVue"),ja=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ki)),Gl=ss(),Hl=ss(!1,!0),zl=ss(!0),Ws=Bl();function Bl(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const n=ie(this);for(let s=0,a=this.length;s<a;s++)Ve(n,"get",s+"");const r=n[e](...i);return r===-1||r===!1?n[e](...i.map(ie)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){Ci();const n=ie(this)[e].apply(this,i);return Si(),n}}),t}function ss(t=!1,e=!1){return function(n,r,s){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&s===(t?e?nh:Qa:e?Ja:qa).get(n))return n;const a=N(n);if(!t&&a&&$(Ws,r))return Reflect.get(Ws,r,s);const o=Reflect.get(n,r,s);return(Ki(r)?ja.has(r):Fl(r))||(t||Ve(n,"get",r),e)?o:De(o)?a&&is(r)?o:o.value:ce(o)?t?eo(o):Ti(o):o}}const Vl=Za(),Nl=Za(!0);function Za(t=!1){return function(i,n,r,s){let a=i[n];if(vi(a)&&De(a)&&!De(r))return!1;if(!t&&(!Wn(r)&&!vi(r)&&(a=ie(a),r=ie(r)),!N(i)&&De(a)&&!De(r)))return a.value=r,!0;const o=N(i)&&is(n)?Number(n)<i.length:$(i,n),l=Reflect.set(i,n,r,s);return i===ie(s)&&(o?ji(r,a)&&mt(i,"set",n,r):mt(i,"add",n,r)),l}}function Ul(t,e){const i=$(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&i&&mt(t,"delete",e,void 0),n}function Xl(t,e){const i=Reflect.has(t,e);return(!Ki(e)||!ja.has(e))&&Ve(t,"has",e),i}function Yl(t){return Ve(t,"iterate",N(t)?"length":jt),Reflect.ownKeys(t)}const $a={get:Gl,set:Vl,deleteProperty:Ul,has:Xl,ownKeys:Yl},Kl={get:zl,set(t,e){return!0},deleteProperty(t,e){return!0}},jl=Oe({},$a,{get:Hl,set:Nl}),as=t=>t,Zn=t=>Reflect.getPrototypeOf(t);function ln(t,e,i=!1,n=!1){t=t.__v_raw;const r=ie(t),s=ie(e);i||(e!==s&&Ve(r,"get",e),Ve(r,"get",s));const{has:a}=Zn(r),o=n?as:i?hs:Zi;if(a.call(r,e))return o(t.get(e));if(a.call(r,s))return o(t.get(s));t!==r&&t.get(e)}function hn(t,e=!1){const i=this.__v_raw,n=ie(i),r=ie(t);return e||(t!==r&&Ve(n,"has",t),Ve(n,"has",r)),t===r?i.has(t):i.has(t)||i.has(r)}function dn(t,e=!1){return t=t.__v_raw,!e&&Ve(ie(t),"iterate",jt),Reflect.get(t,"size",t)}function Fs(t){t=ie(t);const e=ie(this);return Zn(e).has.call(e,t)||(e.add(t),mt(e,"add",t,t)),this}function Gs(t,e){e=ie(e);const i=ie(this),{has:n,get:r}=Zn(i);let s=n.call(i,t);s||(t=ie(t),s=n.call(i,t));const a=r.call(i,t);return i.set(t,e),s?ji(e,a)&&mt(i,"set",t,e):mt(i,"add",t,e),this}function Hs(t){const e=ie(this),{has:i,get:n}=Zn(e);let r=i.call(e,t);r||(t=ie(t),r=i.call(e,t)),n&&n.call(e,t);const s=e.delete(t);return r&&mt(e,"delete",t,void 0),s}function zs(){const t=ie(this),e=t.size!==0,i=t.clear();return e&&mt(t,"clear",void 0,void 0),i}function un(t,e){return function(n,r){const s=this,a=s.__v_raw,o=ie(a),l=e?as:t?hs:Zi;return!t&&Ve(o,"iterate",jt),a.forEach((h,d)=>n.call(r,l(h),l(d),s))}}function fn(t,e,i){return function(...n){const r=this.__v_raw,s=ie(r),a=fi(s),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,h=r[t](...n),d=i?as:e?hs:Zi;return!e&&Ve(s,"iterate",l?Or:jt),{next(){const{value:f,done:c}=h.next();return c?{value:f,done:c}:{value:o?[d(f[0]),d(f[1])]:d(f),done:c}},[Symbol.iterator](){return this}}}}function Ct(t){return function(...e){return t==="delete"?!1:this}}function Zl(){const t={get(s){return ln(this,s)},get size(){return dn(this)},has:hn,add:Fs,set:Gs,delete:Hs,clear:zs,forEach:un(!1,!1)},e={get(s){return ln(this,s,!1,!0)},get size(){return dn(this)},has:hn,add:Fs,set:Gs,delete:Hs,clear:zs,forEach:un(!1,!0)},i={get(s){return ln(this,s,!0)},get size(){return dn(this,!0)},has(s){return hn.call(this,s,!0)},add:Ct("add"),set:Ct("set"),delete:Ct("delete"),clear:Ct("clear"),forEach:un(!0,!1)},n={get(s){return ln(this,s,!0,!0)},get size(){return dn(this,!0)},has(s){return hn.call(this,s,!0)},add:Ct("add"),set:Ct("set"),delete:Ct("delete"),clear:Ct("clear"),forEach:un(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=fn(s,!1,!1),i[s]=fn(s,!0,!1),e[s]=fn(s,!1,!0),n[s]=fn(s,!0,!0)}),[t,i,e,n]}const[$l,ql,Jl,Ql]=Zl();function os(t,e){const i=e?t?Ql:Jl:t?ql:$l;return(n,r,s)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get($(i,r)&&r in n?i:n,r,s)}const eh={get:os(!1,!1)},th={get:os(!1,!0)},ih={get:os(!0,!1)},qa=new WeakMap,Ja=new WeakMap,Qa=new WeakMap,nh=new WeakMap;function rh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function sh(t){return t.__v_skip||!Object.isExtensible(t)?0:rh(El(t))}function Ti(t){return vi(t)?t:ls(t,!1,$a,eh,qa)}function ah(t){return ls(t,!1,jl,th,Ja)}function eo(t){return ls(t,!0,Kl,ih,Qa)}function ls(t,e,i,n,r){if(!ce(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=r.get(t);if(s)return s;const a=sh(t);if(a===0)return t;const o=new Proxy(t,a===2?n:i);return r.set(t,o),o}function ci(t){return vi(t)?ci(t.__v_raw):!!(t&&t.__v_isReactive)}function vi(t){return!!(t&&t.__v_isReadonly)}function Wn(t){return!!(t&&t.__v_isShallow)}function to(t){return ci(t)||vi(t)}function ie(t){const e=t&&t.__v_raw;return e?ie(e):t}function io(t){return On(t,"__v_skip",!0),t}const Zi=t=>ce(t)?Ti(t):t,hs=t=>ce(t)?eo(t):t;function no(t){kt&&Je&&(t=ie(t),Ka(t.dep||(t.dep=ns())))}function ro(t,e){t=ie(t),t.dep&&Rr(t.dep)}function De(t){return!!(t&&t.__v_isRef===!0)}function pt(t){return oh(t,!0)}function oh(t,e){return De(t)?t:new lh(t,e)}class lh{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:ie(e),this._value=i?e:Zi(e)}get value(){return no(this),this._value}set value(e){const i=this.__v_isShallow||Wn(e)||vi(e);e=i?e:ie(e),ji(e,this._rawValue)&&(this._rawValue=e,this._value=i?e:Zi(e),ro(this))}}function so(t){return De(t)?t.value:t}const hh={get:(t,e,i)=>so(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const r=t[e];return De(r)&&!De(i)?(r.value=i,!0):Reflect.set(t,e,i,n)}};function ao(t){return ci(t)?t:new Proxy(t,hh)}var oo;class dh{constructor(e,i,n,r){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[oo]=!1,this._dirty=!0,this.effect=new rs(e,()=>{this._dirty||(this._dirty=!0,ro(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=ie(this);return no(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}oo="__v_isReadonly";function uh(t,e,i=!1){let n,r;const s=Y(t);return s?(n=t,r=et):(n=t.get,r=t.set),new dh(n,r,s||!r,i)}function At(t,e,i,n){let r;try{r=n?t(...n):t()}catch(s){$n(s,e,i)}return r}function Ke(t,e,i,n){if(Y(t)){const s=At(t,e,i,n);return s&&za(s)&&s.catch(a=>{$n(a,e,i)}),s}const r=[];for(let s=0;s<t.length;s++)r.push(Ke(t[s],e,i,n));return r}function $n(t,e,i,n=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,o=i;for(;s;){const h=s.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,a,o)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){At(l,null,10,[t,a,o]);return}}fh(t,i,r,n)}function fh(t,e,i,n=!0){console.error(t)}let $i=!1,Wr=!1;const Me=[];let ht=0;const pi=[];let gt=null,Vt=0;const lo=Promise.resolve();let ds=null;function ch(t){const e=ds||lo;return t?e.then(this?t.bind(this):t):e}function ph(t){let e=ht+1,i=Me.length;for(;e<i;){const n=e+i>>>1;qi(Me[n])<t?e=n+1:i=n}return e}function us(t){(!Me.length||!Me.includes(t,$i&&t.allowRecurse?ht+1:ht))&&(t.id==null?Me.push(t):Me.splice(ph(t.id),0,t),ho())}function ho(){!$i&&!Wr&&(Wr=!0,ds=lo.then(fo))}function _h(t){const e=Me.indexOf(t);e>ht&&Me.splice(e,1)}function gh(t){N(t)?pi.push(...t):(!gt||!gt.includes(t,t.allowRecurse?Vt+1:Vt))&&pi.push(t),ho()}function Bs(t,e=$i?ht+1:0){for(;e<Me.length;e++){const i=Me[e];i&&i.pre&&(Me.splice(e,1),e--,i())}}function uo(t){if(pi.length){const e=[...new Set(pi)];if(pi.length=0,gt){gt.push(...e);return}for(gt=e,gt.sort((i,n)=>qi(i)-qi(n)),Vt=0;Vt<gt.length;Vt++)gt[Vt]();gt=null,Vt=0}}const qi=t=>t.id==null?1/0:t.id,mh=(t,e)=>{const i=qi(t)-qi(e);if(i===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function fo(t){Wr=!1,$i=!0,Me.sort(mh);const e=et;try{for(ht=0;ht<Me.length;ht++){const i=Me[ht];i&&i.active!==!1&&At(i,null,14)}}finally{ht=0,Me.length=0,uo(),$i=!1,ds=null,(Me.length||pi.length)&&fo()}}function vh(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||ae;let r=i;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in n){const d=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:c}=n[d]||ae;c&&(r=i.map(v=>v.trim())),f&&(r=i.map(Rn))}let o,l=n[o=vr(e)]||n[o=vr(mi(e))];!l&&s&&(l=n[o=vr(bi(e))]),l&&Ke(l,t,6,r);const h=n[o+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Ke(h,t,6,r)}}function co(t,e,i=!1){const n=e.emitsCache,r=n.get(t);if(r!==void 0)return r;const s=t.emits;let a={},o=!1;if(!Y(t)){const l=h=>{const d=co(h,e,!0);d&&(o=!0,Oe(a,d))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!o?(ce(t)&&n.set(t,null),null):(N(s)?s.forEach(l=>a[l]=null):Oe(a,s),ce(t)&&n.set(t,a),a)}function qn(t,e){return!t||!Yn(e)?!1:(e=e.slice(2).replace(/Once$/,""),$(t,e[0].toLowerCase()+e.slice(1))||$(t,bi(e))||$(t,e))}let Fe=null,Jn=null;function Fn(t){const e=Fe;return Fe=t,Jn=t&&t.type.__scopeId||null,e}function Qn(t){Jn=t}function er(){Jn=null}function Le(t,e=Fe,i){if(!e||t._n)return t;const n=(...r)=>{n._d&&qs(-1);const s=Fn(e),a=t(...r);return Fn(s),n._d&&qs(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function yr(t){const{type:e,vnode:i,proxy:n,withProxy:r,props:s,propsOptions:[a],slots:o,attrs:l,emit:h,render:d,renderCache:f,data:c,setupState:v,ctx:w,inheritAttrs:T}=t;let _,A;const x=Fn(t);try{if(i.shapeFlag&4){const O=r||n;_=lt(d.call(O,O,f,s,v,c,w)),A=l}else{const O=e;_=lt(O.length>1?O(s,{attrs:l,slots:o,emit:h}):O(s,null)),A=e.props?l:yh(l)}}catch(O){Bi.length=0,$n(O,t,1),_=ee(je)}let M=_;if(A&&T!==!1){const O=Object.keys(A),{shapeFlag:V}=M;O.length&&V&7&&(a&&O.some(es)&&(A=wh(A,a)),M=It(M,A))}return i.dirs&&(M=It(M),M.dirs=M.dirs?M.dirs.concat(i.dirs):i.dirs),i.transition&&(M.transition=i.transition),_=M,Fn(x),_}const yh=t=>{let e;for(const i in t)(i==="class"||i==="style"||Yn(i))&&((e||(e={}))[i]=t[i]);return e},wh=(t,e)=>{const i={};for(const n in t)(!es(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function bh(t,e,i){const{props:n,children:r,component:s}=t,{props:a,children:o,patchFlag:l}=e,h=s.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?Vs(n,a,h):!!a;if(l&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const c=d[f];if(a[c]!==n[c]&&!qn(h,c))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?Vs(n,a,h):!0:!!a;return!1}function Vs(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const s=n[r];if(e[s]!==t[s]&&!qn(i,s))return!0}return!1}function Ch({vnode:t,parent:e},i){for(;e&&e.subTree===t;)(t=e.vnode).el=i,e=e.parent}const Sh=t=>t.__isSuspense;function Th(t,e){e&&e.pendingBranch?N(t)?e.effects.push(...t):e.effects.push(t):gh(t)}function xh(t,e){if(xe){let i=xe.provides;const n=xe.parent&&xe.parent.provides;n===i&&(i=xe.provides=Object.create(n)),i[t]=e}}function wr(t,e,i=!1){const n=xe||Fe;if(n){const r=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return i&&Y(e)?e.call(n.proxy):e}}const Ns={};function br(t,e,i){return po(t,e,i)}function po(t,e,{immediate:i,deep:n,flush:r,onTrack:s,onTrigger:a}=ae){const o=xe;let l,h=!1,d=!1;if(De(t)?(l=()=>t.value,h=Wn(t)):ci(t)?(l=()=>t,n=!0):N(t)?(d=!0,h=t.some(A=>ci(A)||Wn(A)),l=()=>t.map(A=>{if(De(A))return A.value;if(ci(A))return Yt(A);if(Y(A))return At(A,o,2)})):Y(t)?e?l=()=>At(t,o,2):l=()=>{if(!(o&&o.isUnmounted))return f&&f(),Ke(t,o,3,[c])}:l=et,e&&n){const A=l;l=()=>Yt(A())}let f,c=A=>{f=_.onStop=()=>{At(A,o,4)}};if(Qi)return c=et,e?i&&Ke(e,o,3,[l(),d?[]:void 0,c]):l(),et;let v=d?[]:Ns;const w=()=>{if(!!_.active)if(e){const A=_.run();(n||h||(d?A.some((x,M)=>ji(x,v[M])):ji(A,v)))&&(f&&f(),Ke(e,o,3,[A,v===Ns?void 0:v,c]),v=A)}else _.run()};w.allowRecurse=!!e;let T;r==="sync"?T=w:r==="post"?T=()=>He(w,o&&o.suspense):(w.pre=!0,o&&(w.id=o.uid),T=()=>us(w));const _=new rs(l,T);return e?i?w():v=_.run():r==="post"?He(_.run.bind(_),o&&o.suspense):_.run(),()=>{_.stop(),o&&o.scope&&ts(o.scope.effects,_)}}function kh(t,e,i){const n=this.proxy,r=Ae(t)?t.includes(".")?_o(n,t):()=>n[t]:t.bind(n,n);let s;Y(e)?s=e:(s=e.handler,i=e);const a=xe;yi(this);const o=po(r,s.bind(n),i);return a?yi(a):Zt(),o}function _o(t,e){const i=e.split(".");return()=>{let n=t;for(let r=0;r<i.length&&n;r++)n=n[i[r]];return n}}function Yt(t,e){if(!ce(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),De(t))Yt(t.value,e);else if(N(t))for(let i=0;i<t.length;i++)Yt(t[i],e);else if(Kn(t)||fi(t))t.forEach(i=>{Yt(i,e)});else if(Va(t))for(const i in t)Yt(t[i],e);return t}function Ah(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fs(()=>{t.isMounted=!0}),cs(()=>{t.isUnmounting=!0}),t}const Xe=[Function,Array],Ph={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Xe,onEnter:Xe,onAfterEnter:Xe,onEnterCancelled:Xe,onBeforeLeave:Xe,onLeave:Xe,onAfterLeave:Xe,onLeaveCancelled:Xe,onBeforeAppear:Xe,onAppear:Xe,onAfterAppear:Xe,onAppearCancelled:Xe},setup(t,{slots:e}){const i=fd(),n=Ah();let r;return()=>{const s=e.default&&mo(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const T of s)if(T.type!==je){a=T;break}}const o=ie(t),{mode:l}=o;if(n.isLeaving)return Cr(a);const h=Us(a);if(!h)return Cr(a);const d=Fr(h,o,n,i);Gr(h,d);const f=i.subTree,c=f&&Us(f);let v=!1;const{getTransitionKey:w}=h.type;if(w){const T=w();r===void 0?r=T:T!==r&&(r=T,v=!0)}if(c&&c.type!==je&&(!Nt(h,c)||v)){const T=Fr(c,o,n,i);if(Gr(c,T),l==="out-in")return n.isLeaving=!0,T.afterLeave=()=>{n.isLeaving=!1,i.update()},Cr(a);l==="in-out"&&h.type!==je&&(T.delayLeave=(_,A,x)=>{const M=go(n,c);M[String(c.key)]=c,_._leaveCb=()=>{A(),_._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=x})}return a}}},Eh=Ph;function go(t,e){const{leavingVNodes:i}=t;let n=i.get(e.type);return n||(n=Object.create(null),i.set(e.type,n)),n}function Fr(t,e,i,n){const{appear:r,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:c,onAfterLeave:v,onLeaveCancelled:w,onBeforeAppear:T,onAppear:_,onAfterAppear:A,onAppearCancelled:x}=e,M=String(t.key),O=go(i,t),V=(R,K)=>{R&&Ke(R,n,9,K)},le=(R,K)=>{const Z=K[1];V(R,K),N(R)?R.every(_e=>_e.length<=1)&&Z():R.length<=1&&Z()},fe={mode:s,persisted:a,beforeEnter(R){let K=o;if(!i.isMounted)if(r)K=T||o;else return;R._leaveCb&&R._leaveCb(!0);const Z=O[M];Z&&Nt(t,Z)&&Z.el._leaveCb&&Z.el._leaveCb(),V(K,[R])},enter(R){let K=l,Z=h,_e=d;if(!i.isMounted)if(r)K=_||l,Z=A||h,_e=x||d;else return;let be=!1;const Ce=R._enterCb=Gt=>{be||(be=!0,Gt?V(_e,[R]):V(Z,[R]),fe.delayedLeave&&fe.delayedLeave(),R._enterCb=void 0)};K?le(K,[R,Ce]):Ce()},leave(R,K){const Z=String(t.key);if(R._enterCb&&R._enterCb(!0),i.isUnmounting)return K();V(f,[R]);let _e=!1;const be=R._leaveCb=Ce=>{_e||(_e=!0,K(),Ce?V(w,[R]):V(v,[R]),R._leaveCb=void 0,O[Z]===t&&delete O[Z])};O[Z]=t,c?le(c,[R,be]):be()},clone(R){return Fr(R,e,i,n)}};return fe}function Cr(t){if(tr(t))return t=It(t),t.children=null,t}function Us(t){return tr(t)?t.children?t.children[0]:void 0:t}function Gr(t,e){t.shapeFlag&6&&t.component?Gr(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function mo(t,e=!1,i){let n=[],r=0;for(let s=0;s<t.length;s++){let a=t[s];const o=i==null?a.key:String(i)+String(a.key!=null?a.key:s);a.type===ye?(a.patchFlag&128&&r++,n=n.concat(mo(a.children,e,o))):(e||a.type!==je)&&n.push(o!=null?It(a,{key:o}):a)}if(r>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function it(t){return Y(t)?{setup:t,name:t.name}:t}const zi=t=>!!t.type.__asyncLoader,tr=t=>t.type.__isKeepAlive;function Ih(t,e){vo(t,"a",e)}function Lh(t,e){vo(t,"da",e)}function vo(t,e,i=xe){const n=t.__wdc||(t.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(ir(e,n,i),i){let r=i.parent;for(;r&&r.parent;)tr(r.parent.vnode)&&Mh(n,e,i,r),r=r.parent}}function Mh(t,e,i,n){const r=ir(e,t,n,!0);yo(()=>{ts(n[e],r)},i)}function ir(t,e,i=xe,n=!1){if(i){const r=i[t]||(i[t]=[]),s=e.__weh||(e.__weh=(...a)=>{if(i.isUnmounted)return;Ci(),yi(i);const o=Ke(e,i,t,a);return Zt(),Si(),o});return n?r.unshift(s):r.push(s),s}}const vt=t=>(e,i=xe)=>(!Qi||t==="sp")&&ir(t,e,i),Dh=vt("bm"),fs=vt("m"),Oh=vt("bu"),Rh=vt("u"),cs=vt("bum"),yo=vt("um"),Wh=vt("sp"),Fh=vt("rtg"),Gh=vt("rtc");function Hh(t,e=xe){ir("ec",t,e)}function wo(t,e){const i=Fe;if(i===null)return t;const n=sr(i)||i.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[a,o,l,h=ae]=e[s];Y(a)&&(a={mounted:a,updated:a}),a.deep&&Yt(o),r.push({dir:a,instance:n,value:o,oldValue:void 0,arg:l,modifiers:h})}return t}function Ht(t,e,i,n){const r=t.dirs,s=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];s&&(o.oldValue=s[a].value);let l=o.dir[n];l&&(Ci(),Ke(l,i,8,[t.el,o,t,e]),Si())}}const zh=Symbol();function Kt(t,e,i={},n,r){if(Fe.isCE||Fe.parent&&zi(Fe.parent)&&Fe.parent.isCE)return ee("slot",e==="default"?null:{name:e},n&&n());let s=t[e];s&&s._c&&(s._d=!1),me();const a=s&&bo(s(i)),o=nr(ye,{key:i.key||a&&a.key||`_${e}`},a||(n?n():[]),a&&t._===1?64:-2);return!r&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function bo(t){return t.some(e=>Lo(e)?!(e.type===je||e.type===ye&&!bo(e.children)):!0)?t:null}const Hr=t=>t?Do(t)?sr(t)||t.proxy:Hr(t.parent):null,Gn=Oe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Hr(t.parent),$root:t=>Hr(t.root),$emit:t=>t.emit,$options:t=>ps(t),$forceUpdate:t=>t.f||(t.f=()=>us(t.update)),$nextTick:t=>t.n||(t.n=ch.bind(t.proxy)),$watch:t=>kh.bind(t)}),Bh={get({_:t},e){const{ctx:i,setupState:n,data:r,props:s,accessCache:a,type:o,appContext:l}=t;let h;if(e[0]!=="$"){const v=a[e];if(v!==void 0)switch(v){case 1:return n[e];case 2:return r[e];case 4:return i[e];case 3:return s[e]}else{if(n!==ae&&$(n,e))return a[e]=1,n[e];if(r!==ae&&$(r,e))return a[e]=2,r[e];if((h=t.propsOptions[0])&&$(h,e))return a[e]=3,s[e];if(i!==ae&&$(i,e))return a[e]=4,i[e];zr&&(a[e]=0)}}const d=Gn[e];let f,c;if(d)return e==="$attrs"&&Ve(t,"get",e),d(t);if((f=o.__cssModules)&&(f=f[e]))return f;if(i!==ae&&$(i,e))return a[e]=4,i[e];if(c=l.config.globalProperties,$(c,e))return c[e]},set({_:t},e,i){const{data:n,setupState:r,ctx:s}=t;return r!==ae&&$(r,e)?(r[e]=i,!0):n!==ae&&$(n,e)?(n[e]=i,!0):$(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:r,propsOptions:s}},a){let o;return!!i[a]||t!==ae&&$(t,a)||e!==ae&&$(e,a)||(o=s[0])&&$(o,a)||$(n,a)||$(Gn,a)||$(r.config.globalProperties,a)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:$(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};let zr=!0;function Vh(t){const e=ps(t),i=t.proxy,n=t.ctx;zr=!1,e.beforeCreate&&Xs(e.beforeCreate,t,"bc");const{data:r,computed:s,methods:a,watch:o,provide:l,inject:h,created:d,beforeMount:f,mounted:c,beforeUpdate:v,updated:w,activated:T,deactivated:_,beforeDestroy:A,beforeUnmount:x,destroyed:M,unmounted:O,render:V,renderTracked:le,renderTriggered:fe,errorCaptured:R,serverPrefetch:K,expose:Z,inheritAttrs:_e,components:be,directives:Ce,filters:Gt}=e;if(h&&Nh(h,n,null,t.appContext.config.unwrapInjectedRef),a)for(const ge in a){const he=a[ge];Y(he)&&(n[ge]=he.bind(i))}if(r){const ge=r.call(i,i);ce(ge)&&(t.data=Ti(ge))}if(zr=!0,s)for(const ge in s){const he=s[ge],ft=Y(he)?he.bind(i,i):Y(he.get)?he.get.bind(i,i):et,_r=!Y(he)&&Y(he.set)?he.set.bind(i):et,Ei=vd({get:ft,set:_r});Object.defineProperty(n,ge,{enumerable:!0,configurable:!0,get:()=>Ei.value,set:ri=>Ei.value=ri})}if(o)for(const ge in o)Co(o[ge],n,i,ge);if(l){const ge=Y(l)?l.call(i):l;Reflect.ownKeys(ge).forEach(he=>{xh(he,ge[he])})}d&&Xs(d,t,"c");function Ie(ge,he){N(he)?he.forEach(ft=>ge(ft.bind(i))):he&&ge(he.bind(i))}if(Ie(Dh,f),Ie(fs,c),Ie(Oh,v),Ie(Rh,w),Ie(Ih,T),Ie(Lh,_),Ie(Hh,R),Ie(Gh,le),Ie(Fh,fe),Ie(cs,x),Ie(yo,O),Ie(Wh,K),N(Z))if(Z.length){const ge=t.exposed||(t.exposed={});Z.forEach(he=>{Object.defineProperty(ge,he,{get:()=>i[he],set:ft=>i[he]=ft})})}else t.exposed||(t.exposed={});V&&t.render===et&&(t.render=V),_e!=null&&(t.inheritAttrs=_e),be&&(t.components=be),Ce&&(t.directives=Ce)}function Nh(t,e,i=et,n=!1){N(t)&&(t=Br(t));for(const r in t){const s=t[r];let a;ce(s)?"default"in s?a=wr(s.from||r,s.default,!0):a=wr(s.from||r):a=wr(s),De(a)&&n?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[r]=a}}function Xs(t,e,i){Ke(N(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function Co(t,e,i,n){const r=n.includes(".")?_o(i,n):()=>i[n];if(Ae(t)){const s=e[t];Y(s)&&br(r,s)}else if(Y(t))br(r,t.bind(i));else if(ce(t))if(N(t))t.forEach(s=>Co(s,e,i,n));else{const s=Y(t.handler)?t.handler.bind(i):e[t.handler];Y(s)&&br(r,s,t)}}function ps(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let l;return o?l=o:!r.length&&!i&&!n?l=e:(l={},r.length&&r.forEach(h=>Hn(l,h,a,!0)),Hn(l,e,a)),ce(e)&&s.set(e,l),l}function Hn(t,e,i,n=!1){const{mixins:r,extends:s}=e;s&&Hn(t,s,i,!0),r&&r.forEach(a=>Hn(t,a,i,!0));for(const a in e)if(!(n&&a==="expose")){const o=Uh[a]||i&&i[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Uh={data:Ys,props:Bt,emits:Bt,methods:Bt,computed:Bt,beforeCreate:We,created:We,beforeMount:We,mounted:We,beforeUpdate:We,updated:We,beforeDestroy:We,beforeUnmount:We,destroyed:We,unmounted:We,activated:We,deactivated:We,errorCaptured:We,serverPrefetch:We,components:Bt,directives:Bt,watch:Yh,provide:Ys,inject:Xh};function Ys(t,e){return e?t?function(){return Oe(Y(t)?t.call(this,this):t,Y(e)?e.call(this,this):e)}:e:t}function Xh(t,e){return Bt(Br(t),Br(e))}function Br(t){if(N(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function We(t,e){return t?[...new Set([].concat(t,e))]:e}function Bt(t,e){return t?Oe(Oe(Object.create(null),t),e):e}function Yh(t,e){if(!t)return e;if(!e)return t;const i=Oe(Object.create(null),t);for(const n in e)i[n]=We(t[n],e[n]);return i}function Kh(t,e,i,n=!1){const r={},s={};On(s,rr,1),t.propsDefaults=Object.create(null),So(t,e,r,s);for(const a in t.propsOptions[0])a in r||(r[a]=void 0);i?t.props=n?r:ah(r):t.type.props?t.props=r:t.props=s,t.attrs=s}function jh(t,e,i,n){const{props:r,attrs:s,vnode:{patchFlag:a}}=t,o=ie(r),[l]=t.propsOptions;let h=!1;if((n||a>0)&&!(a&16)){if(a&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let c=d[f];if(qn(t.emitsOptions,c))continue;const v=e[c];if(l)if($(s,c))v!==s[c]&&(s[c]=v,h=!0);else{const w=mi(c);r[w]=Vr(l,o,w,v,t,!1)}else v!==s[c]&&(s[c]=v,h=!0)}}}else{So(t,e,r,s)&&(h=!0);let d;for(const f in o)(!e||!$(e,f)&&((d=bi(f))===f||!$(e,d)))&&(l?i&&(i[f]!==void 0||i[d]!==void 0)&&(r[f]=Vr(l,o,f,void 0,t,!0)):delete r[f]);if(s!==o)for(const f in s)(!e||!$(e,f)&&!0)&&(delete s[f],h=!0)}h&&mt(t,"set","$attrs")}function So(t,e,i,n){const[r,s]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(xn(l))continue;const h=e[l];let d;r&&$(r,d=mi(l))?!s||!s.includes(d)?i[d]=h:(o||(o={}))[d]=h:qn(t.emitsOptions,l)||(!(l in n)||h!==n[l])&&(n[l]=h,a=!0)}if(s){const l=ie(i),h=o||ae;for(let d=0;d<s.length;d++){const f=s[d];i[f]=Vr(r,l,f,h[f],t,!$(h,f))}}return a}function Vr(t,e,i,n,r,s){const a=t[i];if(a!=null){const o=$(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&Y(l)){const{propsDefaults:h}=r;i in h?n=h[i]:(yi(r),n=h[i]=l.call(null,e),Zt())}else n=l}a[0]&&(s&&!o?n=!1:a[1]&&(n===""||n===bi(i))&&(n=!0))}return n}function To(t,e,i=!1){const n=e.propsCache,r=n.get(t);if(r)return r;const s=t.props,a={},o=[];let l=!1;if(!Y(t)){const d=f=>{l=!0;const[c,v]=To(f,e,!0);Oe(a,c),v&&o.push(...v)};!i&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return ce(t)&&n.set(t,ui),ui;if(N(s))for(let d=0;d<s.length;d++){const f=mi(s[d]);Ks(f)&&(a[f]=ae)}else if(s)for(const d in s){const f=mi(d);if(Ks(f)){const c=s[d],v=a[f]=N(c)||Y(c)?{type:c}:c;if(v){const w=$s(Boolean,v.type),T=$s(String,v.type);v[0]=w>-1,v[1]=T<0||w<T,(w>-1||$(v,"default"))&&o.push(f)}}}const h=[a,o];return ce(t)&&n.set(t,h),h}function Ks(t){return t[0]!=="$"}function js(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Zs(t,e){return js(t)===js(e)}function $s(t,e){return N(e)?e.findIndex(i=>Zs(i,t)):Y(e)&&Zs(e,t)?0:-1}const xo=t=>t[0]==="_"||t==="$stable",_s=t=>N(t)?t.map(lt):[lt(t)],Zh=(t,e,i)=>{if(e._n)return e;const n=Le((...r)=>_s(e(...r)),i);return n._c=!1,n},ko=(t,e,i)=>{const n=t._ctx;for(const r in t){if(xo(r))continue;const s=t[r];if(Y(s))e[r]=Zh(r,s,n);else if(s!=null){const a=_s(s);e[r]=()=>a}}},Ao=(t,e)=>{const i=_s(e);t.slots.default=()=>i},$h=(t,e)=>{if(t.vnode.shapeFlag&32){const i=e._;i?(t.slots=ie(e),On(e,"_",i)):ko(e,t.slots={})}else t.slots={},e&&Ao(t,e);On(t.slots,rr,1)},qh=(t,e,i)=>{const{vnode:n,slots:r}=t;let s=!0,a=ae;if(n.shapeFlag&32){const o=e._;o?i&&o===1?s=!1:(Oe(r,e),!i&&o===1&&delete r._):(s=!e.$stable,ko(e,r)),a=e}else e&&(Ao(t,e),a={default:1});if(s)for(const o in r)!xo(o)&&!(o in a)&&delete r[o]};function Po(){return{app:null,config:{isNativeTag:kl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jh=0;function Qh(t,e){return function(n,r=null){Y(n)||(n=Object.assign({},n)),r!=null&&!ce(r)&&(r=null);const s=Po(),a=new Set;let o=!1;const l=s.app={_uid:Jh++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:yd,get config(){return s.config},set config(h){},use(h,...d){return a.has(h)||(h&&Y(h.install)?(a.add(h),h.install(l,...d)):Y(h)&&(a.add(h),h(l,...d))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,d){return d?(s.components[h]=d,l):s.components[h]},directive(h,d){return d?(s.directives[h]=d,l):s.directives[h]},mount(h,d,f){if(!o){const c=ee(n,r);return c.appContext=s,d&&e?e(c,h):t(c,h,f),o=!0,l._container=h,h.__vue_app__=l,sr(c.component)||c.component.proxy}},unmount(){o&&(t(null,l._container),delete l._container.__vue_app__)},provide(h,d){return s.provides[h]=d,l}};return l}}function Nr(t,e,i,n,r=!1){if(N(t)){t.forEach((c,v)=>Nr(c,e&&(N(e)?e[v]:e),i,n,r));return}if(zi(n)&&!r)return;const s=n.shapeFlag&4?sr(n.component)||n.component.proxy:n.el,a=r?null:s,{i:o,r:l}=t,h=e&&e.r,d=o.refs===ae?o.refs={}:o.refs,f=o.setupState;if(h!=null&&h!==l&&(Ae(h)?(d[h]=null,$(f,h)&&(f[h]=null)):De(h)&&(h.value=null)),Y(l))At(l,o,12,[a,d]);else{const c=Ae(l),v=De(l);if(c||v){const w=()=>{if(t.f){const T=c?d[l]:l.value;r?N(T)&&ts(T,s):N(T)?T.includes(s)||T.push(s):c?(d[l]=[s],$(f,l)&&(f[l]=d[l])):(l.value=[s],t.k&&(d[t.k]=l.value))}else c?(d[l]=a,$(f,l)&&(f[l]=a)):v&&(l.value=a,t.k&&(d[t.k]=a))};a?(w.id=-1,He(w,i)):w()}}}const He=Th;function ed(t){return td(t)}function td(t,e){const i=Ml();i.__VUE__=!0;const{insert:n,remove:r,patchProp:s,createElement:a,createText:o,createComment:l,setText:h,setElementText:d,parentNode:f,nextSibling:c,setScopeId:v=et,cloneNode:w,insertStaticContent:T}=t,_=(u,p,y,S=null,C=null,I=null,D=!1,P=null,L=!!p.dynamicChildren)=>{if(u===p)return;u&&!Nt(u,p)&&(S=on(u),bt(u,C,I,!0),u=null),p.patchFlag===-2&&(L=!1,p.dynamicChildren=null);const{type:k,ref:H,shapeFlag:W}=p;switch(k){case gs:A(u,p,y,S);break;case je:x(u,p,y,S);break;case An:u==null&&M(p,y,S,D);break;case ye:Ce(u,p,y,S,C,I,D,P,L);break;default:W&1?le(u,p,y,S,C,I,D,P,L):W&6?Gt(u,p,y,S,C,I,D,P,L):(W&64||W&128)&&k.process(u,p,y,S,C,I,D,P,L,si)}H!=null&&C&&Nr(H,u&&u.ref,I,p||u,!p)},A=(u,p,y,S)=>{if(u==null)n(p.el=o(p.children),y,S);else{const C=p.el=u.el;p.children!==u.children&&h(C,p.children)}},x=(u,p,y,S)=>{u==null?n(p.el=l(p.children||""),y,S):p.el=u.el},M=(u,p,y,S)=>{[u.el,u.anchor]=T(u.children,p,y,S,u.el,u.anchor)},O=({el:u,anchor:p},y,S)=>{let C;for(;u&&u!==p;)C=c(u),n(u,y,S),u=C;n(p,y,S)},V=({el:u,anchor:p})=>{let y;for(;u&&u!==p;)y=c(u),r(u),u=y;r(p)},le=(u,p,y,S,C,I,D,P,L)=>{D=D||p.type==="svg",u==null?fe(p,y,S,C,I,D,P,L):Z(u,p,C,I,D,P,L)},fe=(u,p,y,S,C,I,D,P)=>{let L,k;const{type:H,props:W,shapeFlag:z,transition:U,patchFlag:q,dirs:re}=u;if(u.el&&w!==void 0&&q===-1)L=u.el=w(u.el);else{if(L=u.el=a(u.type,I,W&&W.is,W),z&8?d(L,u.children):z&16&&K(u.children,L,null,S,C,I&&H!=="foreignObject",D,P),re&&Ht(u,null,S,"created"),W){for(const de in W)de!=="value"&&!xn(de)&&s(L,de,null,W[de],I,u.children,S,C,ct);"value"in W&&s(L,"value",null,W.value),(k=W.onVnodeBeforeMount)&&at(k,S,u)}R(L,u,u.scopeId,D,S)}re&&Ht(u,null,S,"beforeMount");const se=(!C||C&&!C.pendingBranch)&&U&&!U.persisted;se&&U.beforeEnter(L),n(L,p,y),((k=W&&W.onVnodeMounted)||se||re)&&He(()=>{k&&at(k,S,u),se&&U.enter(L),re&&Ht(u,null,S,"mounted")},C)},R=(u,p,y,S,C)=>{if(y&&v(u,y),S)for(let I=0;I<S.length;I++)v(u,S[I]);if(C){let I=C.subTree;if(p===I){const D=C.vnode;R(u,D,D.scopeId,D.slotScopeIds,C.parent)}}},K=(u,p,y,S,C,I,D,P,L=0)=>{for(let k=L;k<u.length;k++){const H=u[k]=P?Tt(u[k]):lt(u[k]);_(null,H,p,y,S,C,I,D,P)}},Z=(u,p,y,S,C,I,D)=>{const P=p.el=u.el;let{patchFlag:L,dynamicChildren:k,dirs:H}=p;L|=u.patchFlag&16;const W=u.props||ae,z=p.props||ae;let U;y&&zt(y,!1),(U=z.onVnodeBeforeUpdate)&&at(U,y,p,u),H&&Ht(p,u,y,"beforeUpdate"),y&&zt(y,!0);const q=C&&p.type!=="foreignObject";if(k?_e(u.dynamicChildren,k,P,y,S,q,I):D||ft(u,p,P,null,y,S,q,I,!1),L>0){if(L&16)be(P,p,W,z,y,S,C);else if(L&2&&W.class!==z.class&&s(P,"class",null,z.class,C),L&4&&s(P,"style",W.style,z.style,C),L&8){const re=p.dynamicProps;for(let se=0;se<re.length;se++){const de=re[se],qe=W[de],ai=z[de];(ai!==qe||de==="value")&&s(P,de,qe,ai,C,u.children,y,S,ct)}}L&1&&u.children!==p.children&&d(P,p.children)}else!D&&k==null&&be(P,p,W,z,y,S,C);((U=z.onVnodeUpdated)||H)&&He(()=>{U&&at(U,y,p,u),H&&Ht(p,u,y,"updated")},S)},_e=(u,p,y,S,C,I,D)=>{for(let P=0;P<p.length;P++){const L=u[P],k=p[P],H=L.el&&(L.type===ye||!Nt(L,k)||L.shapeFlag&70)?f(L.el):y;_(L,k,H,null,S,C,I,D,!0)}},be=(u,p,y,S,C,I,D)=>{if(y!==S){for(const P in S){if(xn(P))continue;const L=S[P],k=y[P];L!==k&&P!=="value"&&s(u,P,k,L,D,p.children,C,I,ct)}if(y!==ae)for(const P in y)!xn(P)&&!(P in S)&&s(u,P,y[P],null,D,p.children,C,I,ct);"value"in S&&s(u,"value",y.value,S.value)}},Ce=(u,p,y,S,C,I,D,P,L)=>{const k=p.el=u?u.el:o(""),H=p.anchor=u?u.anchor:o("");let{patchFlag:W,dynamicChildren:z,slotScopeIds:U}=p;U&&(P=P?P.concat(U):U),u==null?(n(k,y,S),n(H,y,S),K(p.children,y,H,C,I,D,P,L)):W>0&&W&64&&z&&u.dynamicChildren?(_e(u.dynamicChildren,z,y,C,I,D,P),(p.key!=null||C&&p===C.subTree)&&Eo(u,p,!0)):ft(u,p,y,H,C,I,D,P,L)},Gt=(u,p,y,S,C,I,D,P,L)=>{p.slotScopeIds=P,u==null?p.shapeFlag&512?C.ctx.activate(p,y,S,D,L):Pi(p,y,S,C,I,D,L):Ie(u,p,L)},Pi=(u,p,y,S,C,I,D)=>{const P=u.component=ud(u,S,C);if(tr(u)&&(P.ctx.renderer=si),cd(P),P.asyncDep){if(C&&C.registerDep(P,ge),!u.el){const L=P.subTree=ee(je);x(null,L,p,y)}return}ge(P,u,p,y,C,I,D)},Ie=(u,p,y)=>{const S=p.component=u.component;if(bh(u,p,y))if(S.asyncDep&&!S.asyncResolved){he(S,p,y);return}else S.next=p,_h(S.update),S.update();else p.el=u.el,S.vnode=p},ge=(u,p,y,S,C,I,D)=>{const P=()=>{if(u.isMounted){let{next:H,bu:W,u:z,parent:U,vnode:q}=u,re=H,se;zt(u,!1),H?(H.el=q.el,he(u,H,D)):H=q,W&&kn(W),(se=H.props&&H.props.onVnodeBeforeUpdate)&&at(se,U,H,q),zt(u,!0);const de=yr(u),qe=u.subTree;u.subTree=de,_(qe,de,f(qe.el),on(qe),u,C,I),H.el=de.el,re===null&&Ch(u,de.el),z&&He(z,C),(se=H.props&&H.props.onVnodeUpdated)&&He(()=>at(se,U,H,q),C)}else{let H;const{el:W,props:z}=p,{bm:U,m:q,parent:re}=u,se=zi(p);if(zt(u,!1),U&&kn(U),!se&&(H=z&&z.onVnodeBeforeMount)&&at(H,re,p),zt(u,!0),W&&mr){const de=()=>{u.subTree=yr(u),mr(W,u.subTree,u,C,null)};se?p.type.__asyncLoader().then(()=>!u.isUnmounted&&de()):de()}else{const de=u.subTree=yr(u);_(null,de,y,S,u,C,I),p.el=de.el}if(q&&He(q,C),!se&&(H=z&&z.onVnodeMounted)){const de=p;He(()=>at(H,re,de),C)}(p.shapeFlag&256||re&&zi(re.vnode)&&re.vnode.shapeFlag&256)&&u.a&&He(u.a,C),u.isMounted=!0,p=y=S=null}},L=u.effect=new rs(P,()=>us(k),u.scope),k=u.update=()=>L.run();k.id=u.uid,zt(u,!0),k()},he=(u,p,y)=>{p.component=u;const S=u.vnode.props;u.vnode=p,u.next=null,jh(u,p.props,S,y),qh(u,p.children,y),Ci(),Bs(),Si()},ft=(u,p,y,S,C,I,D,P,L=!1)=>{const k=u&&u.children,H=u?u.shapeFlag:0,W=p.children,{patchFlag:z,shapeFlag:U}=p;if(z>0){if(z&128){Ei(k,W,y,S,C,I,D,P,L);return}else if(z&256){_r(k,W,y,S,C,I,D,P,L);return}}U&8?(H&16&&ct(k,C,I),W!==k&&d(y,W)):H&16?U&16?Ei(k,W,y,S,C,I,D,P,L):ct(k,C,I,!0):(H&8&&d(y,""),U&16&&K(W,y,S,C,I,D,P,L))},_r=(u,p,y,S,C,I,D,P,L)=>{u=u||ui,p=p||ui;const k=u.length,H=p.length,W=Math.min(k,H);let z;for(z=0;z<W;z++){const U=p[z]=L?Tt(p[z]):lt(p[z]);_(u[z],U,y,null,C,I,D,P,L)}k>H?ct(u,C,I,!0,!1,W):K(p,y,S,C,I,D,P,L,W)},Ei=(u,p,y,S,C,I,D,P,L)=>{let k=0;const H=p.length;let W=u.length-1,z=H-1;for(;k<=W&&k<=z;){const U=u[k],q=p[k]=L?Tt(p[k]):lt(p[k]);if(Nt(U,q))_(U,q,y,null,C,I,D,P,L);else break;k++}for(;k<=W&&k<=z;){const U=u[W],q=p[z]=L?Tt(p[z]):lt(p[z]);if(Nt(U,q))_(U,q,y,null,C,I,D,P,L);else break;W--,z--}if(k>W){if(k<=z){const U=z+1,q=U<H?p[U].el:S;for(;k<=z;)_(null,p[k]=L?Tt(p[k]):lt(p[k]),y,q,C,I,D,P,L),k++}}else if(k>z)for(;k<=W;)bt(u[k],C,I,!0),k++;else{const U=k,q=k,re=new Map;for(k=q;k<=z;k++){const ze=p[k]=L?Tt(p[k]):lt(p[k]);ze.key!=null&&re.set(ze.key,k)}let se,de=0;const qe=z-q+1;let ai=!1,Es=0;const Ii=new Array(qe);for(k=0;k<qe;k++)Ii[k]=0;for(k=U;k<=W;k++){const ze=u[k];if(de>=qe){bt(ze,C,I,!0);continue}let st;if(ze.key!=null)st=re.get(ze.key);else for(se=q;se<=z;se++)if(Ii[se-q]===0&&Nt(ze,p[se])){st=se;break}st===void 0?bt(ze,C,I,!0):(Ii[st-q]=k+1,st>=Es?Es=st:ai=!0,_(ze,p[st],y,null,C,I,D,P,L),de++)}const Is=ai?id(Ii):ui;for(se=Is.length-1,k=qe-1;k>=0;k--){const ze=q+k,st=p[ze],Ls=ze+1<H?p[ze+1].el:S;Ii[k]===0?_(null,st,y,Ls,C,I,D,P,L):ai&&(se<0||k!==Is[se]?ri(st,y,Ls,2):se--)}}},ri=(u,p,y,S,C=null)=>{const{el:I,type:D,transition:P,children:L,shapeFlag:k}=u;if(k&6){ri(u.component.subTree,p,y,S);return}if(k&128){u.suspense.move(p,y,S);return}if(k&64){D.move(u,p,y,si);return}if(D===ye){n(I,p,y);for(let W=0;W<L.length;W++)ri(L[W],p,y,S);n(u.anchor,p,y);return}if(D===An){O(u,p,y);return}if(S!==2&&k&1&&P)if(S===0)P.beforeEnter(I),n(I,p,y),He(()=>P.enter(I),C);else{const{leave:W,delayLeave:z,afterLeave:U}=P,q=()=>n(I,p,y),re=()=>{W(I,()=>{q(),U&&U()})};z?z(I,q,re):re()}else n(I,p,y)},bt=(u,p,y,S=!1,C=!1)=>{const{type:I,props:D,ref:P,children:L,dynamicChildren:k,shapeFlag:H,patchFlag:W,dirs:z}=u;if(P!=null&&Nr(P,null,y,u,!0),H&256){p.ctx.deactivate(u);return}const U=H&1&&z,q=!zi(u);let re;if(q&&(re=D&&D.onVnodeBeforeUnmount)&&at(re,p,u),H&6)vl(u.component,y,S);else{if(H&128){u.suspense.unmount(y,S);return}U&&Ht(u,null,p,"beforeUnmount"),H&64?u.type.remove(u,p,y,C,si,S):k&&(I!==ye||W>0&&W&64)?ct(k,p,y,!1,!0):(I===ye&&W&384||!C&&H&16)&&ct(L,p,y),S&&As(u)}(q&&(re=D&&D.onVnodeUnmounted)||U)&&He(()=>{re&&at(re,p,u),U&&Ht(u,null,p,"unmounted")},y)},As=u=>{const{type:p,el:y,anchor:S,transition:C}=u;if(p===ye){ml(y,S);return}if(p===An){V(u);return}const I=()=>{r(y),C&&!C.persisted&&C.afterLeave&&C.afterLeave()};if(u.shapeFlag&1&&C&&!C.persisted){const{leave:D,delayLeave:P}=C,L=()=>D(y,I);P?P(u.el,I,L):L()}else I()},ml=(u,p)=>{let y;for(;u!==p;)y=c(u),r(u),u=y;r(p)},vl=(u,p,y)=>{const{bum:S,scope:C,update:I,subTree:D,um:P}=u;S&&kn(S),C.stop(),I&&(I.active=!1,bt(D,u,p,y)),P&&He(P,p),He(()=>{u.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&u.asyncDep&&!u.asyncResolved&&u.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},ct=(u,p,y,S=!1,C=!1,I=0)=>{for(let D=I;D<u.length;D++)bt(u[D],p,y,S,C)},on=u=>u.shapeFlag&6?on(u.component.subTree):u.shapeFlag&128?u.suspense.next():c(u.anchor||u.el),Ps=(u,p,y)=>{u==null?p._vnode&&bt(p._vnode,null,null,!0):_(p._vnode||null,u,p,null,null,null,y),Bs(),uo(),p._vnode=u},si={p:_,um:bt,m:ri,r:As,mt:Pi,mc:K,pc:ft,pbc:_e,n:on,o:t};let gr,mr;return e&&([gr,mr]=e(si)),{render:Ps,hydrate:gr,createApp:Qh(Ps,gr)}}function zt({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function Eo(t,e,i=!1){const n=t.children,r=e.children;if(N(n)&&N(r))for(let s=0;s<n.length;s++){const a=n[s];let o=r[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[s]=Tt(r[s]),o.el=a.el),i||Eo(a,o))}}function id(t){const e=t.slice(),i=[0];let n,r,s,a,o;const l=t.length;for(n=0;n<l;n++){const h=t[n];if(h!==0){if(r=i[i.length-1],t[r]<h){e[n]=r,i.push(n);continue}for(s=0,a=i.length-1;s<a;)o=s+a>>1,t[i[o]]<h?s=o+1:a=o;h<t[i[s]]&&(s>0&&(e[n]=i[s-1]),i[s]=n)}}for(s=i.length,a=i[s-1];s-- >0;)i[s]=a,a=e[a];return i}const nd=t=>t.__isTeleport,ye=Symbol(void 0),gs=Symbol(void 0),je=Symbol(void 0),An=Symbol(void 0),Bi=[];let Qe=null;function me(t=!1){Bi.push(Qe=t?null:[])}function rd(){Bi.pop(),Qe=Bi[Bi.length-1]||null}let Ji=1;function qs(t){Ji+=t}function Io(t){return t.dynamicChildren=Ji>0?Qe||ui:null,rd(),Ji>0&&Qe&&Qe.push(t),t}function Se(t,e,i,n,r,s){return Io(g(t,e,i,n,r,s,!0))}function nr(t,e,i,n,r){return Io(ee(t,e,i,n,r,!0))}function Lo(t){return t?t.__v_isVNode===!0:!1}function Nt(t,e){return t.type===e.type&&t.key===e.key}const rr="__vInternal",Mo=({key:t})=>t!=null?t:null,Pn=({ref:t,ref_key:e,ref_for:i})=>t!=null?Ae(t)||De(t)||Y(t)?{i:Fe,r:t,k:e,f:!!i}:t:null;function g(t,e=null,i=null,n=0,r=null,s=t===ye?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Mo(e),ref:e&&Pn(e),scopeId:Jn,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null};return o?(ms(l,i),s&128&&t.normalize(l)):i&&(l.shapeFlag|=Ae(i)?8:16),Ji>0&&!a&&Qe&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Qe.push(l),l}const ee=sd;function sd(t,e=null,i=null,n=0,r=null,s=!1){if((!t||t===zh)&&(t=je),Lo(t)){const o=It(t,e,!0);return i&&ms(o,i),Ji>0&&!s&&Qe&&(o.shapeFlag&6?Qe[Qe.indexOf(t)]=o:Qe.push(o)),o.patchFlag|=-2,o}if(md(t)&&(t=t.__vccOpts),e){e=ad(e);let{class:o,style:l}=e;o&&!Ae(o)&&(e.class=Qr(o)),ce(l)&&(to(l)&&!N(l)&&(l=Oe({},l)),e.style=Jr(l))}const a=Ae(t)?1:Sh(t)?128:nd(t)?64:ce(t)?4:Y(t)?2:0;return g(t,e,i,n,r,a,s,!0)}function ad(t){return t?to(t)||rr in t?Oe({},t):t:null}function It(t,e,i=!1){const{props:n,ref:r,patchFlag:s,children:a}=t,o=e?ld(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&Mo(o),ref:e&&e.ref?i&&r?N(r)?r.concat(Pn(e)):[r,Pn(e)]:Pn(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ye?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&It(t.ssContent),ssFallback:t.ssFallback&&It(t.ssFallback),el:t.el,anchor:t.anchor}}function J(t=" ",e=0){return ee(gs,null,t,e)}function od(t,e){const i=ee(An,null,t);return i.staticCount=e,i}function En(t="",e=!1){return e?(me(),nr(je,null,t)):ee(je,null,t)}function lt(t){return t==null||typeof t=="boolean"?ee(je):N(t)?ee(ye,null,t.slice()):typeof t=="object"?Tt(t):ee(gs,null,String(t))}function Tt(t){return t.el===null||t.memo?t:It(t)}function ms(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(N(e))i=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),ms(t,r()),r._c&&(r._d=!0));return}else{i=32;const r=e._;!r&&!(rr in e)?e._ctx=Fe:r===3&&Fe&&(Fe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Y(e)?(e={default:e,_ctx:Fe},i=32):(e=String(e),n&64?(i=16,e=[J(e)]):i=8);t.children=e,t.shapeFlag|=i}function ld(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=Qr([e.class,n.class]));else if(r==="style")e.style=Jr([e.style,n.style]);else if(Yn(r)){const s=e[r],a=n[r];a&&s!==a&&!(N(s)&&s.includes(a))&&(e[r]=s?[].concat(s,a):a)}else r!==""&&(e[r]=n[r])}return e}function at(t,e,i,n=null){Ke(t,e,7,[i,n])}const hd=Po();let dd=0;function ud(t,e,i){const n=t.type,r=(e?e.appContext:t.appContext)||hd,s={uid:dd++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Dl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:To(n,r),emitsOptions:co(n,r),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:n.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=vh.bind(null,s),t.ce&&t.ce(s),s}let xe=null;const fd=()=>xe||Fe,yi=t=>{xe=t,t.scope.on()},Zt=()=>{xe&&xe.scope.off(),xe=null};function Do(t){return t.vnode.shapeFlag&4}let Qi=!1;function cd(t,e=!1){Qi=e;const{props:i,children:n}=t.vnode,r=Do(t);Kh(t,i,r,e),$h(t,n);const s=r?pd(t,e):void 0;return Qi=!1,s}function pd(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=io(new Proxy(t.ctx,Bh));const{setup:n}=i;if(n){const r=t.setupContext=n.length>1?gd(t):null;yi(t),Ci();const s=At(n,t,0,[t.props,r]);if(Si(),Zt(),za(s)){if(s.then(Zt,Zt),e)return s.then(a=>{Js(t,a,e)}).catch(a=>{$n(a,t,0)});t.asyncDep=s}else Js(t,s,e)}else Oo(t,e)}function Js(t,e,i){Y(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ce(e)&&(t.setupState=ao(e)),Oo(t,i)}let Qs;function Oo(t,e,i){const n=t.type;if(!t.render){if(!e&&Qs&&!n.render){const r=n.template||ps(t).template;if(r){const{isCustomElement:s,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,h=Oe(Oe({isCustomElement:s,delimiters:o},a),l);n.render=Qs(r,h)}}t.render=n.render||et}yi(t),Ci(),Vh(t),Si(),Zt()}function _d(t){return new Proxy(t.attrs,{get(e,i){return Ve(t,"get","$attrs"),e[i]}})}function gd(t){const e=n=>{t.exposed=n||{}};let i;return{get attrs(){return i||(i=_d(t))},slots:t.slots,emit:t.emit,expose:e}}function sr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ao(io(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Gn)return Gn[i](t)}}))}function md(t){return Y(t)&&"__vccOpts"in t}const vd=(t,e)=>uh(t,e,Qi),yd="3.2.39",wd="http://www.w3.org/2000/svg",Ut=typeof document<"u"?document:null,ea=Ut&&Ut.createElement("template"),bd={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const r=e?Ut.createElementNS(wd,t):Ut.createElement(t,i?{is:i}:void 0);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>Ut.createTextNode(t),createComment:t=>Ut.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ut.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,i,n,r,s){const a=i?i.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),i),!(r===s||!(r=r.nextSibling)););else{ea.innerHTML=n?`<svg>${t}</svg>`:t;const o=ea.content;if(n){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,i)}return[a?a.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function Cd(t,e,i){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}function Sd(t,e,i){const n=t.style,r=Ae(i);if(i&&!r){for(const s in i)Ur(n,s,i[s]);if(e&&!Ae(e))for(const s in e)i[s]==null&&Ur(n,s,"")}else{const s=n.display;r?e!==i&&(n.cssText=i):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=s)}}const ta=/\s*!important$/;function Ur(t,e,i){if(N(i))i.forEach(n=>Ur(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=Td(t,e);ta.test(i)?t.setProperty(bi(n),i.replace(ta,""),"important"):t[n]=i}}const ia=["Webkit","Moz","ms"],Sr={};function Td(t,e){const i=Sr[e];if(i)return i;let n=mi(e);if(n!=="filter"&&n in t)return Sr[e]=n;n=Na(n);for(let r=0;r<ia.length;r++){const s=ia[r]+n;if(s in t)return Sr[e]=s}return e}const na="http://www.w3.org/1999/xlink";function xd(t,e,i,n,r){if(n&&e.startsWith("xlink:"))i==null?t.removeAttributeNS(na,e.slice(6,e.length)):t.setAttributeNS(na,e,i);else{const s=wl(e);i==null||s&&!Ga(i)?t.removeAttribute(e):t.setAttribute(e,s?"":i)}}function kd(t,e,i,n,r,s,a){if(e==="innerHTML"||e==="textContent"){n&&a(n,r,s),t[e]=i==null?"":i;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=i;const l=i==null?"":i;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),i==null&&t.removeAttribute(e);return}let o=!1;if(i===""||i==null){const l=typeof t[e];l==="boolean"?i=Ga(i):i==null&&l==="string"?(i="",o=!0):l==="number"&&(i=0,o=!0)}try{t[e]=i}catch{}o&&t.removeAttribute(e)}const[Ro,Ad]=(()=>{let t=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const i=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(i&&Number(i[1])<=53)}return[t,e]})();let Xr=0;const Pd=Promise.resolve(),Ed=()=>{Xr=0},Id=()=>Xr||(Pd.then(Ed),Xr=Ro());function Xt(t,e,i,n){t.addEventListener(e,i,n)}function Ld(t,e,i,n){t.removeEventListener(e,i,n)}function Md(t,e,i,n,r=null){const s=t._vei||(t._vei={}),a=s[e];if(n&&a)a.value=n;else{const[o,l]=Dd(e);if(n){const h=s[e]=Od(n,r);Xt(t,o,h,l)}else a&&(Ld(t,o,a,l),s[e]=void 0)}}const ra=/(?:Once|Passive|Capture)$/;function Dd(t){let e;if(ra.test(t)){e={};let n;for(;n=t.match(ra);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):bi(t.slice(2)),e]}function Od(t,e){const i=n=>{const r=n.timeStamp||Ro();(Ad||r>=i.attached-1)&&Ke(Rd(n,i.value),e,5,[n])};return i.value=t,i.attached=Id(),i}function Rd(t,e){if(N(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const sa=/^on[a-z]/,Wd=(t,e,i,n,r=!1,s,a,o,l)=>{e==="class"?Cd(t,n,r):e==="style"?Sd(t,i,n):Yn(e)?es(e)||Md(t,e,i,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Fd(t,e,n,r))?kd(t,e,n,s,a,o,l):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),xd(t,e,n,r))};function Fd(t,e,i,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&sa.test(e)&&Y(i)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||sa.test(e)&&Ae(i)?!1:e in t}const Gd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Eh.props;const zn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return N(e)?i=>kn(e,i):e};function Hd(t){t.target.composing=!0}function aa(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const zd={created(t,{modifiers:{lazy:e,trim:i,number:n}},r){t._assign=zn(r);const s=n||r.props&&r.props.type==="number";Xt(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;i&&(o=o.trim()),s&&(o=Rn(o)),t._assign(o)}),i&&Xt(t,"change",()=>{t.value=t.value.trim()}),e||(Xt(t,"compositionstart",Hd),Xt(t,"compositionend",aa),Xt(t,"change",aa))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:i,trim:n,number:r}},s){if(t._assign=zn(s),t.composing||document.activeElement===t&&t.type!=="range"&&(i||n&&t.value.trim()===e||(r||t.type==="number")&&Rn(t.value)===e))return;const a=e==null?"":e;t.value!==a&&(t.value=a)}},Bd={deep:!0,created(t,{value:e,modifiers:{number:i}},n){const r=Kn(e);Xt(t,"change",()=>{const s=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>i?Rn(Bn(a)):Bn(a));t._assign(t.multiple?r?new Set(s):s:s[0])}),t._assign=zn(n)},mounted(t,{value:e}){oa(t,e)},beforeUpdate(t,e,i){t._assign=zn(i)},updated(t,{value:e}){oa(t,e)}};function oa(t,e){const i=t.multiple;if(!(i&&!N(e)&&!Kn(e))){for(let n=0,r=t.options.length;n<r;n++){const s=t.options[n],a=Bn(s);if(i)N(e)?s.selected=xl(e,a)>-1:s.selected=e.has(a);else if(Xn(Bn(s),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Bn(t){return"_value"in t?t._value:t.value}const Vd=Oe({patchProp:Wd},bd);let la;function Nd(){return la||(la=ed(Vd))}const Ud=(...t)=>{const e=Nd().createApp(...t),{mount:i}=e;return e.mount=n=>{const r=Xd(n);if(!r)return;const s=e._component;!Y(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const a=i(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e};function Xd(t){return Ae(t)?document.querySelector(t):t}const Yd="/vue-peaks/assets/peaks-logo.72e98b64.svg",Kd=t=>(Qn("data-v-4ae0d805"),t=t(),er(),t),jd={class:"greetings"},Zd={class:"green"},$d=Kd(()=>g("h3",null,"A Vue wrapper around the bbc/peaks.js audio waveform UI component.",-1)),qd=it({__name:"HelloWorld",props:{msg:null},setup(t){return(e,i)=>(me(),Se("div",jd,[g("h1",Zd,Dn(t.msg),1),$d]))}});const Dt=(t,e)=>{const i=t.__vccOpts||t;for(const[n,r]of e)i[n]=r;return i},Jd=Dt(qd,[["__scopeId","data-v-4ae0d805"]]);const Qd={},eu={class:"item"},tu={class:"details"};function iu(t,e){return me(),Se("div",eu,[g("i",null,[Kt(t.$slots,"icon",{},void 0,!0)]),g("div",tu,[g("h3",null,[Kt(t.$slots,"heading",{},void 0,!0)]),Kt(t.$slots,"default",{},void 0,!0)])])}const ha=Dt(Qd,[["render",iu],["__scopeId","data-v-f1b0f727"]]),nu={},ru={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"17",fill:"currentColor"},su=g("path",{d:"M11 2.253a1 1 0 1 0-2 0h2zm-2 13a1 1 0 1 0 2 0H9zm.447-12.167a1 1 0 1 0 1.107-1.666L9.447 3.086zM1 2.253L.447 1.42A1 1 0 0 0 0 2.253h1zm0 13H0a1 1 0 0 0 1.553.833L1 15.253zm8.447.833a1 1 0 1 0 1.107-1.666l-1.107 1.666zm0-14.666a1 1 0 1 0 1.107 1.666L9.447 1.42zM19 2.253h1a1 1 0 0 0-.447-.833L19 2.253zm0 13l-.553.833A1 1 0 0 0 20 15.253h-1zm-9.553-.833a1 1 0 1 0 1.107 1.666L9.447 14.42zM9 2.253v13h2v-13H9zm1.553-.833C9.203.523 7.42 0 5.5 0v2c1.572 0 2.961.431 3.947 1.086l1.107-1.666zM5.5 0C3.58 0 1.797.523.447 1.42l1.107 1.666C2.539 2.431 3.928 2 5.5 2V0zM0 2.253v13h2v-13H0zm1.553 13.833C2.539 15.431 3.928 15 5.5 15v-2c-1.92 0-3.703.523-5.053 1.42l1.107 1.666zM5.5 15c1.572 0 2.961.431 3.947 1.086l1.107-1.666C9.203 13.523 7.42 13 5.5 13v2zm5.053-11.914C11.539 2.431 12.928 2 14.5 2V0c-1.92 0-3.703.523-5.053 1.42l1.107 1.666zM14.5 2c1.573 0 2.961.431 3.947 1.086l1.107-1.666C18.203.523 16.421 0 14.5 0v2zm3.5.253v13h2v-13h-2zm1.553 12.167C18.203 13.523 16.421 13 14.5 13v2c1.573 0 2.961.431 3.947 1.086l1.107-1.666zM14.5 13c-1.92 0-3.703.523-5.053 1.42l1.107 1.666C11.539 15.431 12.928 15 14.5 15v-2z"},null,-1),au=[su];function ou(t,e){return me(),Se("svg",ru,au)}const lu=Dt(nu,[["render",ou]]),hu={},du={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"20",fill:"currentColor"},uu=g("path",{d:"M11.447 8.894a1 1 0 1 0-.894-1.789l.894 1.789zm-2.894-.789a1 1 0 1 0 .894 1.789l-.894-1.789zm0 1.789a1 1 0 1 0 .894-1.789l-.894 1.789zM7.447 7.106a1 1 0 1 0-.894 1.789l.894-1.789zM10 9a1 1 0 1 0-2 0h2zm-2 2.5a1 1 0 1 0 2 0H8zm9.447-5.606a1 1 0 1 0-.894-1.789l.894 1.789zm-2.894-.789a1 1 0 1 0 .894 1.789l-.894-1.789zm2 .789a1 1 0 1 0 .894-1.789l-.894 1.789zm-1.106-2.789a1 1 0 1 0-.894 1.789l.894-1.789zM18 5a1 1 0 1 0-2 0h2zm-2 2.5a1 1 0 1 0 2 0h-2zm-5.447-4.606a1 1 0 1 0 .894-1.789l-.894 1.789zM9 1l.447-.894a1 1 0 0 0-.894 0L9 1zm-2.447.106a1 1 0 1 0 .894 1.789l-.894-1.789zm-6 3a1 1 0 1 0 .894 1.789L.553 4.106zm2.894.789a1 1 0 1 0-.894-1.789l.894 1.789zm-2-.789a1 1 0 1 0-.894 1.789l.894-1.789zm1.106 2.789a1 1 0 1 0 .894-1.789l-.894 1.789zM2 5a1 1 0 1 0-2 0h2zM0 7.5a1 1 0 1 0 2 0H0zm8.553 12.394a1 1 0 1 0 .894-1.789l-.894 1.789zm-1.106-2.789a1 1 0 1 0-.894 1.789l.894-1.789zm1.106 1a1 1 0 1 0 .894 1.789l-.894-1.789zm2.894.789a1 1 0 1 0-.894-1.789l.894 1.789zM8 19a1 1 0 1 0 2 0H8zm2-2.5a1 1 0 1 0-2 0h2zm-7.447.394a1 1 0 1 0 .894-1.789l-.894 1.789zM1 15H0a1 1 0 0 0 .553.894L1 15zm1-2.5a1 1 0 1 0-2 0h2zm12.553 2.606a1 1 0 1 0 .894 1.789l-.894-1.789zM17 15l.447.894A1 1 0 0 0 18 15h-1zm1-2.5a1 1 0 1 0-2 0h2zm-7.447-5.394l-2 1 .894 1.789 2-1-.894-1.789zm-1.106 1l-2-1-.894 1.789 2 1 .894-1.789zM8 9v2.5h2V9H8zm8.553-4.894l-2 1 .894 1.789 2-1-.894-1.789zm.894 0l-2-1-.894 1.789 2 1 .894-1.789zM16 5v2.5h2V5h-2zm-4.553-3.894l-2-1-.894 1.789 2 1 .894-1.789zm-2.894-1l-2 1 .894 1.789 2-1L8.553.106zM1.447 5.894l2-1-.894-1.789-2 1 .894 1.789zm-.894 0l2 1 .894-1.789-2-1-.894 1.789zM0 5v2.5h2V5H0zm9.447 13.106l-2-1-.894 1.789 2 1 .894-1.789zm0 1.789l2-1-.894-1.789-2 1 .894 1.789zM10 19v-2.5H8V19h2zm-6.553-3.894l-2-1-.894 1.789 2 1 .894-1.789zM2 15v-2.5H0V15h2zm13.447 1.894l2-1-.894-1.789-2 1 .894 1.789zM18 15v-2.5h-2V15h2z"},null,-1),fu=[uu];function cu(t,e){return me(),Se("svg",du,fu)}const pu=Dt(hu,[["render",cu]]),_u=J("Documentation"),gu=g("p",null,[J(" Explore the below examples or see the "),g("a",{target:"_blank",href:"https://github.com/suterma/vue-peaks#vue-peaks"},"vue-peaks documentation on GitHub"),J(". ")],-1),mu=g("p",null,[J(" See the "),g("a",{target:"_blank",href:"https://waveform.prototyping.bbc.co.uk/"},"peaks.js documentation"),J(" for detailed information about the options and tools. ")],-1),vu=J("Examples"),yu=J(" See the below examples to get an idea how to use the wrapper components. "),wu=it({__name:"TheWelcome",setup(t){return(e,i)=>(me(),Se(ye,null,[ee(ha,null,{icon:Le(()=>[ee(lu)]),heading:Le(()=>[_u]),default:Le(()=>[gu,mu]),_:1}),ee(ha,null,{icon:Le(()=>[ee(pu)]),heading:Le(()=>[vu]),default:Le(()=>[yu]),_:1})],64))}});var bu=Math.PI/180;function Cu(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const _i=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},B={_global:_i,version:"8.3.12",isBrowser:Cu(),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle(t){return B.angleDeg?t*bu:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return B.DD.isDragging},isDragReady(){return!!B.DD.node},document:_i.document,_injectGlobal(t){_i.Konva=t}},Ot=t=>{B[t.prototype.getClassName()]=t};B._injectGlobal(B);class xt{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new xt(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var i=this.m;return{x:i[0]*e.x+i[2]*e.y+i[4],y:i[1]*e.x+i[3]*e.y+i[5]}}translate(e,i){return this.m[4]+=this.m[0]*e+this.m[2]*i,this.m[5]+=this.m[1]*e+this.m[3]*i,this}scale(e,i){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=i,this.m[3]*=i,this}rotate(e){var i=Math.cos(e),n=Math.sin(e),r=this.m[0]*i+this.m[2]*n,s=this.m[1]*i+this.m[3]*n,a=this.m[0]*-n+this.m[2]*i,o=this.m[1]*-n+this.m[3]*i;return this.m[0]=r,this.m[1]=s,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,i){var n=this.m[0]+this.m[2]*i,r=this.m[1]+this.m[3]*i,s=this.m[2]+this.m[0]*e,a=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=r,this.m[2]=s,this.m[3]=a,this}multiply(e){var i=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=i,this.m[1]=n,this.m[2]=r,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*e,n=-this.m[1]*e,r=-this.m[2]*e,s=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=n,this.m[2]=r,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}decompose(){var e=this.m[0],i=this.m[1],n=this.m[2],r=this.m[3],s=this.m[4],a=this.m[5],o=e*r-i*n;let l={x:s,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||i!=0){var h=Math.sqrt(e*e+i*i);l.rotation=i>0?Math.acos(e/h):-Math.acos(e/h),l.scaleX=h,l.scaleY=o/h,l.skewX=(e*n+i*r)/o,l.skewY=0}else if(n!=0||r!=0){var d=Math.sqrt(n*n+r*r);l.rotation=Math.PI/2-(r>0?Math.acos(-n/d):-Math.acos(n/d)),l.scaleX=o/d,l.scaleY=d,l.skewX=0,l.skewY=(e*n+i*r)/o}return l.rotation=m._getRotation(l.rotation),l}}var Su="[object Array]",Tu="[object Number]",xu="[object String]",ku="[object Boolean]",Au=Math.PI/180,Pu=180/Math.PI,Tr="#",Eu="",Iu="0",Lu="Konva warning: ",da="Konva error: ",Mu="rgb(",xr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Du=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,cn=[];const Ou=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)},m={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===Su},_isNumber(t){return Object.prototype.toString.call(t)===Tu&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===xu},_isBoolean(t){return Object.prototype.toString.call(t)===ku},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;var e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){cn.push(t),cn.length===1&&Ou(function(){const e=cn;cn=[],e.forEach(function(i){i()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var i=m.createImageElement();i.onload=function(){e(i)},i.src=t},_rgbToHex(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb(t){t=t.replace(Tr,Eu);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var t=(Math.random()*16777215<<0).toString(16);t.length<6;)t=Iu+t;return Tr+t},getRGB(t){var e;return t in xr?(e=xr[t],{r:e[0],g:e[1],b:e[2]}):t[0]===Tr?this._hexToRgb(t.substring(1)):t.substr(0,4)===Mu?(e=Du.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",m._namedColorToRBA(t)||m._hex3ColorToRGBA(t)||m._hex6ColorToRGBA(t)||m._rgbColorToRGBA(t)||m._rgbaColorToRGBA(t)||m._hslColorToRGBA(t)},_namedColorToRBA(t){var e=xr[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map((i,n)=>i.slice(-1)==="%"?n===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),n=Number(i[0])/360,r=Number(i[1])/100,s=Number(i[2])/100;let a,o,l;if(r===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?a=s*(1+r):a=s+r-s*r;const h=2*s-a,d=[0,0,0];for(let f=0;f<3;f++)o=n+1/3*-(f-1),o<0&&o++,o>1&&o--,6*o<1?l=h+(a-h)*6*o:2*o<1?l=a:3*o<2?l=h+(a-h)*(2/3-o)*6:l=h,d[f]=l*255;return{r:Math.round(d[0]),g:Math.round(d[1]),b:Math.round(d[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){var e={};for(var i in t)this._isPlainObject(t[i])?e[i]=this.cloneObject(t[i]):this._isArray(t[i])?e[i]=this.cloneArray(t[i]):e[i]=t[i];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*Au},radToDeg(t){return t*Pu},_degToRad(t){return m.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),m.degToRad(t)},_radToDeg(t){return m.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),m.radToDeg(t)},_getRotation(t){return B.angleDeg?m.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(da+t)},error(t){console.error(da+t)},warn(t){!B.showWarnings||console.warn(Lu+t)},each(t,e){for(var i in t)e(i,t[i])},_inRange(t,e,i){return e<=t&&t<i},_getProjectionToSegment(t,e,i,n,r,s){var a,o,l,h=(t-i)*(t-i)+(e-n)*(e-n);if(h==0)a=t,o=e,l=(r-i)*(r-i)+(s-n)*(s-n);else{var d=((r-t)*(i-t)+(s-e)*(n-e))/h;d<0?(a=t,o=e,l=(t-r)*(t-r)+(e-s)*(e-s)):d>1?(a=i,o=n,l=(i-r)*(i-r)+(n-s)*(n-s)):(a=t+d*(i-t),o=e+d*(n-e),l=(a-r)*(a-r)+(o-s)*(o-s))}return[a,o,l]},_getProjectionToLine(t,e,i){var n=m.cloneObject(t),r=Number.MAX_VALUE;return e.forEach(function(s,a){if(!(!i&&a===e.length-1)){var o=e[(a+1)%e.length],l=m._getProjectionToSegment(s.x,s.y,o.x,o.y,t.x,t.y),h=l[0],d=l[1],f=l[2];f<r&&(n.x=h,n.y=d,r=f)}}),n},_prepareArrayForTween(t,e,i){var n,r=[],s=[];if(t.length>e.length){var a=e;e=t,t=a}for(n=0;n<t.length;n+=2)r.push({x:t[n],y:t[n+1]});for(n=0;n<e.length;n+=2)s.push({x:e[n],y:e[n+1]});var o=[];return s.forEach(function(l){var h=m._getProjectionToLine(l,r,i);o.push(h.x),o.push(h.y)}),o},_prepareToStringify(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var i in t)if(!!(t.hasOwnProperty(i)&&t[i]&&typeof t[i]=="object")){if(e=Object.getOwnPropertyDescriptor(t,i),t[i].visitedByCircularReferenceRemoval||m._isElement(t[i]))if(e.configurable)delete t[i];else return null;else if(m._prepareToStringify(t[i])===null)if(e.configurable)delete t[i];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var i in e)t[i]=e[i];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999}};function Rt(t){return m._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||m._isBoolean(t)?t:Object.prototype.toString.call(t)}function j(){if(B.isUnminified)return function(t,e){return m._isNumber(t)||m.warn(Rt(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function Ru(t){if(B.isUnminified)return function(e,i){let n=m._isNumber(e),r=m._isArray(e)&&e.length==t;return!n&&!r&&m.warn(Rt(e)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function vs(){if(B.isUnminified)return function(t,e){var i=m._isNumber(t),n=t==="auto";return i||n||m.warn(Rt(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function xi(){if(B.isUnminified)return function(t,e){return m._isString(t)||m.warn(Rt(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function Wo(){if(B.isUnminified)return function(t,e){const i=m._isString(t),n=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return i||n||m.warn(Rt(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function Wu(){if(B.isUnminified)return function(t,e){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&t instanceof i||(m._isArray(t)?t.forEach(function(n){m._isNumber(n)||m.warn('"'+e+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):m.warn(Rt(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function yt(){if(B.isUnminified)return function(t,e){var i=t===!0||t===!1;return i||m.warn(Rt(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function Fu(t){if(B.isUnminified)return function(e,i){return e==null||m.isObject(e)||m.warn(Rt(e)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+t),e}}var Li="get",Mi="set";const b={addGetterSetter(t,e,i,n,r){b.addGetter(t,e,i),b.addSetter(t,e,n,r),b.addOverloadedGetterSetter(t,e)},addGetter(t,e,i){var n=Li+m._capitalize(e);t.prototype[n]=t.prototype[n]||function(){var r=this.attrs[e];return r===void 0?i:r}},addSetter(t,e,i,n){var r=Mi+m._capitalize(e);t.prototype[r]||b.overWriteSetter(t,e,i,n)},overWriteSetter(t,e,i,n){var r=Mi+m._capitalize(e);t.prototype[r]=function(s){return i&&s!==void 0&&s!==null&&(s=i.call(this,s,e)),this._setAttr(e,s),n&&n.call(this),this}},addComponentsGetterSetter(t,e,i,n,r){var s=i.length,a=m._capitalize,o=Li+a(e),l=Mi+a(e),h,d;t.prototype[o]=function(){var c={};for(h=0;h<s;h++)d=i[h],c[d]=this.getAttr(e+a(d));return c};var f=Fu(i);t.prototype[l]=function(c){var v=this.attrs[e],w;n&&(c=n.call(this,c)),f&&f.call(this,c,e);for(w in c)!c.hasOwnProperty(w)||this._setAttr(e+a(w),c[w]);return c||i.forEach(T=>{this._setAttr(e+a(T),void 0)}),this._fireChangeEvent(e,v,c),r&&r.call(this),this},b.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var i=m._capitalize(e),n=Mi+i,r=Li+i;t.prototype[e]=function(){return arguments.length?(this[n](arguments[0]),this):this[r]()}},addDeprecatedGetterSetter(t,e,i,n){m.error("Adding deprecated "+e);var r=Li+m._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[r]=function(){m.error(s);var a=this.attrs[e];return a===void 0?i:a},b.addSetter(t,e,n,function(){m.error(s)}),b.addOverloadedGetterSetter(t,e)},backCompat(t,e){m.each(e,function(i,n){var r=t.prototype[n],s=Li+m._capitalize(i),a=Mi+m._capitalize(i);function o(){r.apply(this,arguments),m.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[i]=o,t.prototype[s]=o,t.prototype[a]=o})},afterSetFilter(){this._filterUpToDate=!1}};function Gu(t){var e=[],i=t.length,n=m,r,s;for(r=0;r<i;r++)s=t[r],n._isNumber(s)?s=Math.round(s*1e3)/1e3:n._isString(s)||(s=s+""),e.push(s);return e}var ua=",",Hu="(",zu=")",Bu="([",Vu="])",Nu=";",Uu="()",Xu="=",fa=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Yu=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Ku=100;class ar{constructor(e){this.canvas=e,this._context=e._canvas.getContext("2d"),B.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,i){var n=this.traceArr,r=n.length,s="",a,o,l,h;for(a=0;a<r;a++)o=n[a],l=o.method,l?(h=o.args,s+=l,e?s+=Uu:m._isArray(h[0])?s+=Bu+h.join(ua)+Vu:(i&&(h=h.map(d=>typeof d=="number"?Math.floor(d):d)),s+=Hu+h.join(ua)+zu)):(s+=o.property,e||(s+=Xu+o.val)),s+=Nu;return s}clearTrace(){this.traceArr=[]}_trace(e){var i=this.traceArr,n;i.push(e),n=i.length,n>=Ku&&i.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var i=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(e){var i=e.getLineCap();i&&this.setAttr("lineCap",i)}_applyOpacity(e){var i=e.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(e){var i=e.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(e,i){this._context[e]=i}arc(e,i,n,r,s,a){this._context.arc(e,i,n,r,s,a)}arcTo(e,i,n,r,s){this._context.arcTo(e,i,n,r,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,i,n,r,s,a){this._context.bezierCurveTo(e,i,n,r,s,a)}clearRect(e,i,n,r){this._context.clearRect(e,i,n,r)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,i){var n=arguments;if(n.length===2)return this._context.createImageData(e,i);if(n.length===1)return this._context.createImageData(e)}createLinearGradient(e,i,n,r){return this._context.createLinearGradient(e,i,n,r)}createPattern(e,i){return this._context.createPattern(e,i)}createRadialGradient(e,i,n,r,s,a){return this._context.createRadialGradient(e,i,n,r,s,a)}drawImage(e,i,n,r,s,a,o,l,h){var d=arguments,f=this._context;d.length===3?f.drawImage(e,i,n):d.length===5?f.drawImage(e,i,n,r,s):d.length===9&&f.drawImage(e,i,n,r,s,a,o,l,h)}ellipse(e,i,n,r,s,a,o,l){this._context.ellipse(e,i,n,r,s,a,o,l)}isPointInPath(e,i){return this._context.isPointInPath(e,i)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,i,n,r){this._context.fillRect(e,i,n,r)}strokeRect(e,i,n,r){this._context.strokeRect(e,i,n,r)}fillText(e,i,n,r){r?this._context.fillText(e,i,n,r):this._context.fillText(e,i,n)}measureText(e){return this._context.measureText(e)}getImageData(e,i,n,r){return this._context.getImageData(e,i,n,r)}lineTo(e,i){this._context.lineTo(e,i)}moveTo(e,i){this._context.moveTo(e,i)}rect(e,i,n,r){this._context.rect(e,i,n,r)}putImageData(e,i,n){this._context.putImageData(e,i,n)}quadraticCurveTo(e,i,n,r){this._context.quadraticCurveTo(e,i,n,r)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,i){this._context.scale(e,i)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,i,n,r,s,a){this._context.setTransform(e,i,n,r,s,a)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,i,n,r){this._context.strokeText(e,i,n,r)}transform(e,i,n,r,s,a){this._context.transform(e,i,n,r,s,a)}translate(e,i){this._context.translate(e,i)}_enableTrace(){var e=this,i=fa.length,n=this.setAttr,r,s,a=function(o){var l=e[o],h;e[o]=function(){return s=Gu(Array.prototype.slice.call(arguments,0)),h=l.apply(e,arguments),e._trace({method:o,args:s}),h}};for(r=0;r<i;r++)a(fa[r]);e.setAttr=function(){n.apply(e,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:o,val:l})}}_applyGlobalCompositeOperation(e){const i=e.attrs.globalCompositeOperation;var n=!i||i==="source-over";n||this.setAttr("globalCompositeOperation",i)}}Yu.forEach(function(t){Object.defineProperty(ar.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class ju extends ar{_fillColor(e){var i=e.fill();this.setAttr("fillStyle",i),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var i=e._getLinearGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fillRadialGradient(e){var i=e._getRadialGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fill(e){var i=e.fill(),n=e.getFillPriority();if(i&&n==="color"){this._fillColor(e);return}var r=e.getFillPatternImage();if(r&&n==="pattern"){this._fillPattern(e);return}var s=e.getFillLinearGradientColorStops();if(s&&n==="linear-gradient"){this._fillLinearGradient(e);return}var a=e.getFillRadialGradientColorStops();if(a&&n==="radial-gradient"){this._fillRadialGradient(e);return}i?this._fillColor(e):r?this._fillPattern(e):s?this._fillLinearGradient(e):a&&this._fillRadialGradient(e)}_strokeLinearGradient(e){var i=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),r=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(i.x,i.y,n.x,n.y);if(r){for(var a=0;a<r.length;a+=2)s.addColorStop(r[a],r[a+1]);this.setAttr("strokeStyle",s)}}_stroke(e){var i=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(e),i&&e.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=e.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var i,n,r,s=(i=e.getShadowRGBA())!==null&&i!==void 0?i:"black",a=(n=e.getShadowBlur())!==null&&n!==void 0?n:5,o=(r=e.getShadowOffset())!==null&&r!==void 0?r:{x:0,y:0},l=e.getAbsoluteScale(),h=this.canvas.getPixelRatio(),d=l.x*h,f=l.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(d),Math.abs(f))),this.setAttr("shadowOffsetX",o.x*d),this.setAttr("shadowOffsetY",o.y*f)}}class Zu extends ar{_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){var i=e.getStrokeScaleEnabled();if(!i){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),s=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}}var pn;function $u(){if(pn)return pn;var t=m.createCanvasElement(),e=t.getContext("2d");return pn=function(){var i=B._global.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/n}(),pn}class or{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var i=e||{},n=i.pixelRatio||B.pixelRatio||$u();this.pixelRatio=n,this._canvas=m.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var i=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var i=this.pixelRatio,n=this.getContext()._context;n.scale(i,i)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var i=this.pixelRatio,n=this.getContext()._context;n.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,i){this.setWidth(e||0),this.setHeight(i||0)}toDataURL(e,i){try{return this._canvas.toDataURL(e,i)}catch{try{return this._canvas.toDataURL()}catch(r){return m.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}b.addGetterSetter(or,"pixelRatio",void 0,j());class gi extends or{constructor(e={width:0,height:0}){super(e),this.context=new ju(this),this.setSize(e.width,e.height)}}class ys extends or{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new Zu(this),this.setSize(e.width,e.height)}}const Q={get isDragging(){var t=!1;return Q._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return Q._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const e=[];Q._dragElements.forEach((i,n)=>{const{node:r}=i,s=r.getStage();s.setPointersPositions(t),i.pointerId===void 0&&(i.pointerId=m._getFirstPointerId(t));const a=s._changedPointerPositions.find(h=>h.id===i.pointerId);if(!!a){if(i.dragStatus!=="dragging"){var o=r.dragDistance(),l=Math.max(Math.abs(a.x-i.startPointerPos.x),Math.abs(a.y-i.startPointerPos.y));if(l<o||(r.startDrag({evt:t}),!r.isDragging()))return}r._setDragPosition(t,i),e.push(r)}}),e.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:t},!0)})},_endDragBefore(t){const e=[];Q._dragElements.forEach(i=>{const{node:n}=i,r=n.getStage();if(t&&r.setPointersPositions(t),!r._changedPointerPositions.find(o=>o.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(Q.justDragged=!0,B._mouseListenClick=!1,B._touchListenClick=!1,B._pointerListenClick=!1,i.dragStatus="stopped");const a=i.node.getLayer()||i.node instanceof B.Stage&&i.node;a&&e.indexOf(a)===-1&&e.push(a)}),e.forEach(i=>{i.draw()})},_endDragAfter(t){Q._dragElements.forEach((e,i)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&Q._dragElements.delete(i)})}};B.isBrowser&&(window.addEventListener("mouseup",Q._endDragBefore,!0),window.addEventListener("touchend",Q._endDragBefore,!0),window.addEventListener("mousemove",Q._drag),window.addEventListener("touchmove",Q._drag),window.addEventListener("mouseup",Q._endDragAfter,!1),window.addEventListener("touchend",Q._endDragAfter,!1));var In="absoluteOpacity",_n="allEventListeners",_t="absoluteTransform",ca="absoluteScale",Di="canvas",qu="Change",Ju="children",Qu="konva",Yr="listening",pa="mouseenter",_a="mouseleave",ga="set",ma="Shape",Ln=" ",va="stage",St="transform",ef="Stage",Kr="visible",tf=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Ln);let nf=1;class F{constructor(e){this._id=nf++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===St||e===_t)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,i){var n=this._cache.get(e),r=e===St||e===_t,s=n===void 0||r&&n.dirty===!0;return s&&(n=i.call(this),this._cache.set(e,n)),n}_calculate(e,i,n){if(!this._attachedDepsListeners.get(e)){const r=i.map(s=>s+"Change.konva").join(Ln);this.on(r,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(Di)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===_t&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(Di),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var i=e||{},n={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var r=Math.ceil(i.width||n.width),s=Math.ceil(i.height||n.height),a=i.pixelRatio,o=i.x===void 0?Math.floor(n.x):i.x,l=i.y===void 0?Math.floor(n.y):i.y,h=i.offset||0,d=i.drawBorder||!1,f=i.hitCanvasPixelRatio||1;if(!r||!s){m.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}r+=h*2+1,s+=h*2+1,o-=h,l-=h;var c=new gi({pixelRatio:a,width:r,height:s}),v=new gi({pixelRatio:a,width:0,height:0}),w=new ys({pixelRatio:f,width:r,height:s}),T=c.getContext(),_=w.getContext();return w.isCache=!0,c.isCache=!0,this._cache.delete(Di),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(c.getContext()._context.imageSmoothingEnabled=!1,v.getContext()._context.imageSmoothingEnabled=!1),T.save(),_.save(),T.translate(-o,-l),_.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(In),this._clearSelfAndDescendantCache(ca),this.drawScene(c,this),this.drawHit(w,this),this._isUnderCache=!1,T.restore(),_.restore(),d&&(T.save(),T.beginPath(),T.rect(0,0,r,s),T.closePath(),T.setAttr("strokeStyle","red"),T.setAttr("lineWidth",5),T.stroke(),T.restore()),this._cache.set(Di,{scene:c,filter:v,hit:w,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Di)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,i){var n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],r,s,a,o,l=this.getAbsoluteTransform(i);return n.forEach(function(h){var d=l.point(h);r===void 0&&(r=a=d.x,s=o=d.y),r=Math.min(r,d.x),s=Math.min(s,d.y),a=Math.max(a,d.x),o=Math.max(o,d.y)}),{x:r,y:s,width:a-r,height:o-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();e.translate(i.x,i.y);var n=this._getCachedSceneCanvas(),r=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/r,n.height/r),e.restore()}_drawCachedHitCanvas(e){var i=this._getCanvasCache(),n=i.hit;e.save(),e.translate(i.x,i.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),i=this._getCanvasCache(),n=i.scene,r=i.filter,s=r.getContext(),a,o,l,h;if(e){if(!this._filterUpToDate){var d=n.pixelRatio;r.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio);try{for(a=e.length,s.clear(),s.drawImage(n._canvas,0,0,n.getWidth()/d,n.getHeight()/d),o=s.getImageData(0,0,r.getWidth(),r.getHeight()),l=0;l<a;l++){if(h=e[l],typeof h!="function"){m.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),s.putImageData(o,0,0)}}catch(f){m.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return r}return n}on(e,i){if(this._cache&&this._cache.delete(_n),arguments.length===3)return this._delegate.apply(this,arguments);var n=e.split(Ln),r=n.length,s,a,o,l,h;for(s=0;s<r;s++)a=n[s],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:i});return this}off(e,i){var n=(e||"").split(Ln),r=n.length,s,a,o,l,h,d;if(this._cache&&this._cache.delete(_n),!e)for(a in this.eventListeners)this._off(a);for(s=0;s<r;s++)if(o=n[s],l=o.split("."),h=l[0],d=l[1],h)this.eventListeners[h]&&this._off(h,d,i);else for(a in this.eventListeners)this._off(a,d,i);return this}dispatchEvent(e){var i={target:this,type:e.type,evt:e};return this.fire(e.type,i),this}addEventListener(e,i){return this.on(e,function(n){i.call(this,n.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,i,n){var r=this;this.on(e,function(s){for(var a=s.target.findAncestors(i,!0,r),o=0;o<a.length;o++)s=m.cloneObject(s),s.currentTarget=a[o],n.call(a[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),Q._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(_t),this._clearSelfAndDescendantCache(In),this._clearSelfAndDescendantCache(ca),this._clearSelfAndDescendantCache(va),this._clearSelfAndDescendantCache(Kr),this._clearSelfAndDescendantCache(Yr)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(e){var i="get"+m._capitalize(e);return m._isFunction(this[i])?this[i]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),i=[];e;)i.push(e),e=e.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var i,n;if(!e)return this;for(i in e)i!==Ju&&(n=ga+m._capitalize(i),m._isFunction(this[n])?this[n](e[i]):this._setAttr(i,e[i]))}),this}isListening(){return this._getCache(Yr,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(Kr,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,i=!1){if(e)return this._isVisible(e)&&this._isListening(e);var n=this.getLayer(),r=!1;Q._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===n)&&(r=!0)});var s=!i&&!B.hitOnDragEnabled&&r;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),i=this,n=0,r,s,a,o;function l(h){for(r=[],s=h.length,a=0;a<s;a++)o=h[a],n++,o.nodeType!==ma&&(r=r.concat(o.getChildren().slice())),o._id===i._id&&(a=s);r.length>0&&r[0].getDepth()<=e&&l(r)}return i.nodeType!==ef&&l(i.getStage().getChildren()),n}getDepth(){for(var e=0,i=this.parent;i;)e++,i=i.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(St),this._clearSelfAndDescendantCache(_t)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(e){let i=!1,n=this.parent;for(;n;){if(n.isCached()){i=!0;break}n=n.parent}i&&!e&&(e=!0);var r=this.getAbsoluteTransform(e).getMatrix(),s=new xt,a=this.offset();return s.m=r.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(e){var i=this._clearTransform();this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,this._clearCache(St);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(e.x,e.y),e={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(St),this._clearSelfAndDescendantCache(_t),this}_setTransform(e){var i;for(i in e)this.attrs[i]=e[i]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var i=e.x,n=e.y,r=this.x(),s=this.y();return i!==void 0&&(r+=i),n!==void 0&&(s+=n),this.setPosition({x:r,y:s}),this}_eachAncestorReverse(e,i){var n=[],r=this.getParent(),s,a;if(!(i&&i._id===this._id)){for(n.unshift(this);r&&(!i||r._id!==i._id);)n.unshift(r),r=r.parent;for(s=n.length,a=0;a<s;a++)e(n[a])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return m.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return m.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return m.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return m.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return m.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&m.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(In,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),i=this.getParent();return i&&!i._isUnderCache&&(e*=i.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},i=this.getAttrs(),n,r,s,a,o;e.attrs={};for(n in i)r=i[n],o=m.isObject(r)&&!m._isPlainObject(r)&&!m._isArray(r),!o&&(s=typeof this[n]=="function"&&this[n],delete i[n],a=s?s.call(this):null,i[n]=r,a!==r&&(e.attrs[n]=r));return e.className=this.getClassName(),m._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,i,n){var r=[];i&&this._isMatch(e)&&r.push(this);for(var s=this.parent;s;){if(s===n)return r;s._isMatch(e)&&r.push(s),s=s.parent}return r}isAncestorOf(e){return!1}findAncestor(e,i,n){return this.findAncestors(e,i,n)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var i=e.replace(/ /g,"").split(","),n=i.length,r,s;for(r=0;r<n;r++)if(s=i[r],m.isValidSelector(s)||(m.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),m.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),m.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(va,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,i={},n){return i.target=i.target||this,n?this._fireAndBubble(e,i):this._fire(e,i),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(_t,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var i;if(e)return i=new xt,this._eachAncestorReverse(function(r){var s=r.transformsEnabled();s==="all"?i.multiply(r.getTransform()):s==="position"&&i.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},e),i;i=this._cache.get(_t)||new xt,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var n=this.transformsEnabled();if(n==="all")i.multiply(this.getTransform());else if(n==="position"){const r=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;i.translate(r-a,s-o)}return i.dirty=!1,i}getAbsoluteScale(e){for(var i=this;i;)i._isUnderCache&&(e=i),i=i.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(St,this._getTransform)}_getTransform(){var e,i,n=this._cache.get(St)||new xt;n.reset();var r=this.x(),s=this.y(),a=B.getAngle(this.rotation()),o=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,d=this.attrs.skewY||0,f=this.attrs.offsetX||0,c=this.attrs.offsetY||0;return(r!==0||s!==0)&&n.translate(r,s),a!==0&&n.rotate(a),(h!==0||d!==0)&&n.skew(h,d),(o!==1||l!==1)&&n.scale(o,l),(f!==0||c!==0)&&n.translate(-1*f,-1*c),n.dirty=!1,n}clone(e){var i=m.cloneObject(this.attrs),n,r,s,a,o;for(n in e)i[n]=e[n];var l=new this.constructor(i);for(n in this.eventListeners)for(r=this.eventListeners[n],s=r.length,a=0;a<s;a++)o=r[a],o.name.indexOf(Qu)<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(o));return l}_toKonvaCanvas(e){e=e||{};var i=this.getClientRect(),n=this.getStage(),r=e.x!==void 0?e.x:Math.floor(i.x),s=e.y!==void 0?e.y:Math.floor(i.y),a=e.pixelRatio||1,o=new gi({width:e.width||Math.ceil(i.width)||(n?n.width():0),height:e.height||Math.ceil(i.height)||(n?n.height():0),pixelRatio:a}),l=o.getContext();return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(r||s)&&l.translate(-1*r,-1*s),this.drawScene(o),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var i=e.mimeType||null,n=e.quality||null,r=this._toKonvaCanvas(e).toDataURL(i,n);return e.callback&&e.callback(r),r}toImage(e){return new Promise((i,n)=>{try{const r=e==null?void 0:e.callback;r&&delete e.callback,m._urlToImage(this.toDataURL(e),function(s){i(s),r==null||r(s)})}catch(r){n(r)}})}toBlob(e){return new Promise((i,n)=>{try{const r=e==null?void 0:e.callback;r&&delete e.callback,this.toCanvas(e).toBlob(s=>{i(s),r==null||r(s)})}catch(r){n(r)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():B.dragDistance}_off(e,i,n){var r=this.eventListeners[e],s,a,o;for(s=0;s<r.length;s++)if(a=r[s].name,o=r[s].handler,(a!=="konva"||i==="konva")&&(!i||a===i)&&(!n||n===o)){if(r.splice(s,1),r.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,i,n){this._fire(e+qu,{oldVal:i,newVal:n})}addName(e){if(!this.hasName(e)){var i=this.name(),n=i?i+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const i=this.name();if(!i)return!1;var n=(i||"").split(/\s/g);return n.indexOf(e)!==-1}removeName(e){var i=(this.name()||"").split(/\s/g),n=i.indexOf(e);return n!==-1&&(i.splice(n,1),this.name(i.join(" "))),this}setAttr(e,i){var n=this[ga+m._capitalize(e)];return m._isFunction(n)?n.call(this,i):this._setAttr(e,i),this}_requestDraw(){if(B.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,i){var n=this.attrs[e];n===i&&!m.isObject(i)||(i==null?delete this.attrs[e]:this.attrs[e]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,i),this._requestDraw())}_setComponentAttr(e,i,n){var r;n!==void 0&&(r=this.attrs[e],r||(this.attrs[e]=this.getAttr(e)),this.attrs[e][i]=n,this._fireChangeEvent(e,r,n))}_fireAndBubble(e,i,n){i&&this.nodeType===ma&&(i.target=this);var r=(e===pa||e===_a)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n);if(!r){this._fire(e,i);var s=(e===pa||e===_a)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!s&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,i,n):this._fireAndBubble.call(this.parent,e,i))}}_getProtoListeners(e){let i=this._cache.get(_n);if(!i){i={};let r=Object.getPrototypeOf(this);for(;r;){if(!r.eventListeners){r=Object.getPrototypeOf(r);continue}for(var n in r.eventListeners){const s=r.eventListeners[n],a=i[n]||[];i[n]=s.concat(a)}r=Object.getPrototypeOf(r)}this._cache.set(_n,i)}return i[e]}_fire(e,i){i=i||{},i.currentTarget=this,i.type=e;const n=this._getProtoListeners(e);if(n)for(var r=0;r<n.length;r++)n[r].handler.call(this,i);const s=this.eventListeners[e];if(s)for(var r=0;r<s.length;r++)s[r].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var i=e?e.pointerId:void 0,n=this.getStage(),r=this.getAbsolutePosition(),s=n._getPointerById(i)||n._changedPointerPositions[0]||r;Q._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-r.x,y:s.y-r.y},dragStatus:"ready",pointerId:i})}startDrag(e,i=!0){Q._dragElements.has(this._id)||this._createDragElement(e);const n=Q._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},i)}_setDragPosition(e,i){const n=this.getStage()._getPointerById(i.pointerId);if(!!n){var r={x:n.x-i.offset.x,y:n.y-i.offset.y},s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,r,e);a?r=a:m.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==r.x||this._lastPos.y!==r.y)&&(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}}stopDrag(e){const i=Q._dragElements.get(this._id);i&&(i.dragStatus="stopped"),Q._endDragBefore(e),Q._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=Q._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var i=e.evt.button!==void 0,n=!i||B.dragButtons.indexOf(e.evt.button)>=0;if(!!n&&!this.isDragging()){var r=!1;Q._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(r=!0)}),r||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const i=Q._dragElements.get(this._id),n=i&&i.dragStatus==="dragging",r=i&&i.dragStatus==="ready";n?this.stopDrag():r&&Q._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const i=this.getStage();if(!i)return!1;const n={x:-e.x,y:-e.y,width:i.width()+2*e.x,height:i.height()+2*e.y};return m.haveIntersection(n,this.getClientRect())}static create(e,i){return m._isString(e)&&(e=JSON.parse(e)),this._createNode(e,i)}static _createNode(e,i){var n=F.prototype.getClassName.call(e),r=e.children,s,a,o;i&&(e.attrs.container=i),B[n]||(m.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const l=B[n];if(s=new l(e.attrs),r)for(a=r.length,o=0;o<a;o++)s.add(F._createNode(r[o]));return s}}F.prototype.nodeType="Node";F.prototype._attrsAffectingSize=[];F.prototype.eventListeners={};F.prototype.on.call(F.prototype,tf,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(St),this._clearSelfAndDescendantCache(_t)});F.prototype.on.call(F.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Kr)});F.prototype.on.call(F.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Yr)});F.prototype.on.call(F.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(In)});const oe=b.addGetterSetter;oe(F,"zIndex");oe(F,"absolutePosition");oe(F,"position");oe(F,"x",0,j());oe(F,"y",0,j());oe(F,"globalCompositeOperation","source-over",xi());oe(F,"opacity",1,j());oe(F,"name","",xi());oe(F,"id","",xi());oe(F,"rotation",0,j());b.addComponentsGetterSetter(F,"scale",["x","y"]);oe(F,"scaleX",1,j());oe(F,"scaleY",1,j());b.addComponentsGetterSetter(F,"skew",["x","y"]);oe(F,"skewX",0,j());oe(F,"skewY",0,j());b.addComponentsGetterSetter(F,"offset",["x","y"]);oe(F,"offsetX",0,j());oe(F,"offsetY",0,j());oe(F,"dragDistance",null,j());oe(F,"width",0,j());oe(F,"height",0,j());oe(F,"listening",!0,yt());oe(F,"preventDefault",!0,yt());oe(F,"filters",null,function(t){return this._filterUpToDate=!1,t});oe(F,"visible",!0,yt());oe(F,"transformsEnabled","all",xi());oe(F,"size");oe(F,"dragBoundFunc");oe(F,"draggable",!1,yt());b.backCompat(F,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});const en=new Map,Fo=B._global.PointerEvent!==void 0;function kr(t){return en.get(t)}function ws(t){return{evt:t,pointerId:t.pointerId}}function Go(t,e){return en.get(t)===e}function Ho(t,e){Vi(t),e.getStage()&&(en.set(t,e),Fo&&e._fire("gotpointercapture",ws(new PointerEvent("gotpointercapture"))))}function Vi(t,e){const i=en.get(t);if(!i)return;const n=i.getStage();n&&n.content,en.delete(t),Fo&&i._fire("lostpointercapture",ws(new PointerEvent("lostpointercapture")))}var zo="hasShadow",Bo="shadowRGBA",Vo="patternImage",No="linearGradient",Uo="radialGradient";let gn;function Ar(){return gn||(gn=m.createCanvasElement().getContext("2d"),gn)}const Ni={};function rf(t){t.fill()}function sf(t){t.stroke()}function af(t){t.fill()}function of(t){t.stroke()}function lf(){this._clearCache(zo)}function hf(){this._clearCache(Bo)}function df(){this._clearCache(Vo)}function uf(){this._clearCache(No)}function ff(){this._clearCache(Uo)}class E extends F{constructor(e){super(e);let i;for(;i=m.getRandomColor(),!(i&&!(i in Ni)););this.colorKey=i,Ni[i]=this}getContext(){return m.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return m.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(zo,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Vo,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=Ar();const i=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const n=new xt;n.translate(this.fillPatternX(),this.fillPatternY()),n.rotate(B.getAngle(this.fillPatternRotation())),n.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),n.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const r=n.getMatrix(),s=typeof DOMMatrix>"u"?{a:r[0],b:r[1],c:r[2],d:r[3],e:r[4],f:r[5]}:new DOMMatrix(r);i.setTransform(s)}return i}}_getLinearGradient(){return this._getCache(No,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var i=Ar(),n=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),s=i.createLinearGradient(n.x,n.y,r.x,r.y),a=0;a<e.length;a+=2)s.addColorStop(e[a],e[a+1]);return s}}_getRadialGradient(){return this._getCache(Uo,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var i=Ar(),n=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),s=i.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius()),a=0;a<e.length;a+=2)s.addColorStop(e[a],e[a+1]);return s}}getShadowRGBA(){return this._getCache(Bo,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=m.colorToRGBA(this.shadowColor());return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var i=this.getStage(),n=i.bufferHitCanvas,r;return n.getContext().clear(),this.drawHit(n,null,!0),r=n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,r[3]>0}destroy(){return F.prototype.destroy.call(this),delete Ni[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var i;if(!this.getStage()||!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const r=e||this.hasFill(),s=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(r&&s&&a)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(r&&s&&o&&l)}setStrokeHitEnabled(e){m.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const i=e.skipTransform,n=e.relativeTo,r=this.getSelfRect(),a=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=r.width+a,l=r.height+a,h=!e.skipShadow&&this.hasShadow(),d=h?this.shadowOffsetX():0,f=h?this.shadowOffsetY():0,c=o+Math.abs(d),v=l+Math.abs(f),w=h&&this.shadowBlur()||0,T=c+w*2,_=v+w*2,A={width:T,height:_,x:-(a/2+w)+Math.min(d,0)+r.x,y:-(a/2+w)+Math.min(f,0)+r.y};return i?A:this._transformedRect(A,n)}drawScene(e,i){var n=this.getLayer(),r=e||n.getCanvas(),s=r.getContext(),a=this._getCanvasCache(),o=this.getSceneFunc(),l=this.hasShadow(),h,d,f,c=r.isCache,v=i===this;if(!this.isVisible()&&!v)return this;if(a){s.save();var w=this.getAbsoluteTransform(i).getMatrix();return s.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!o)return this;if(s.save(),this._useBufferCanvas()&&!c){h=this.getStage(),d=h.bufferCanvas,f=d.getContext(),f.clear(),f.save(),f._applyLineJoin(this);var T=this.getAbsoluteTransform(i).getMatrix();f.transform(T[0],T[1],T[2],T[3],T[4],T[5]),o.call(this,f,this),f.restore();var _=d.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(d._canvas,0,0,d.width/_,d.height/_)}else{if(s._applyLineJoin(this),!v){var T=this.getAbsoluteTransform(i).getMatrix();s.transform(T[0],T[1],T[2],T[3],T[4],T[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),o.call(this,s,this)}return s.restore(),this}drawHit(e,i,n=!1){if(!this.shouldDrawHit(i,n))return this;var r=this.getLayer(),s=e||r.hitCanvas,a=s&&s.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||m.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();var d=this.getAbsoluteTransform(i).getMatrix();return a.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),!(this===i)){var c=this.getAbsoluteTransform(i).getMatrix();a.transform(c[0],c[1],c[2],c[3],c[4],c[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(e=0){var i=this._getCanvasCache(),n=this._getCachedSceneCanvas(),r=i.hit,s=r.getContext(),a=r.getWidth(),o=r.getHeight(),l,h,d,f,c,v;s.clear(),s.drawImage(n._canvas,0,0,a,o);try{for(l=s.getImageData(0,0,a,o),h=l.data,d=h.length,f=m._hexToRgb(this.colorKey),c=0;c<d;c+=4)v=h[c+3],v>e?(h[c]=f.r,h[c+1]=f.g,h[c+2]=f.b,h[c+3]=255):h[c+3]=0;s.putImageData(l,0,0)}catch(w){m.error("Unable to draw hit graph from cached scene canvas. "+w.message)}return this}hasPointerCapture(e){return Go(e,this)}setPointerCapture(e){Ho(e,this)}releaseCapture(e){Vi(e)}}E.prototype._fillFunc=rf;E.prototype._strokeFunc=sf;E.prototype._fillFuncHit=af;E.prototype._strokeFuncHit=of;E.prototype._centroid=!1;E.prototype.nodeType="Shape";Ot(E);E.prototype.eventListeners={};E.prototype.on.call(E.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",lf);E.prototype.on.call(E.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",hf);E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",df);E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",uf);E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",ff);b.addGetterSetter(E,"stroke",void 0,Wo());b.addGetterSetter(E,"strokeWidth",2,j());b.addGetterSetter(E,"fillAfterStrokeEnabled",!1);b.addGetterSetter(E,"hitStrokeWidth","auto",vs());b.addGetterSetter(E,"strokeHitEnabled",!0,yt());b.addGetterSetter(E,"perfectDrawEnabled",!0,yt());b.addGetterSetter(E,"shadowForStrokeEnabled",!0,yt());b.addGetterSetter(E,"lineJoin");b.addGetterSetter(E,"lineCap");b.addGetterSetter(E,"sceneFunc");b.addGetterSetter(E,"hitFunc");b.addGetterSetter(E,"dash");b.addGetterSetter(E,"dashOffset",0,j());b.addGetterSetter(E,"shadowColor",void 0,xi());b.addGetterSetter(E,"shadowBlur",0,j());b.addGetterSetter(E,"shadowOpacity",1,j());b.addComponentsGetterSetter(E,"shadowOffset",["x","y"]);b.addGetterSetter(E,"shadowOffsetX",0,j());b.addGetterSetter(E,"shadowOffsetY",0,j());b.addGetterSetter(E,"fillPatternImage");b.addGetterSetter(E,"fill",void 0,Wo());b.addGetterSetter(E,"fillPatternX",0,j());b.addGetterSetter(E,"fillPatternY",0,j());b.addGetterSetter(E,"fillLinearGradientColorStops");b.addGetterSetter(E,"strokeLinearGradientColorStops");b.addGetterSetter(E,"fillRadialGradientStartRadius",0);b.addGetterSetter(E,"fillRadialGradientEndRadius",0);b.addGetterSetter(E,"fillRadialGradientColorStops");b.addGetterSetter(E,"fillPatternRepeat","repeat");b.addGetterSetter(E,"fillEnabled",!0);b.addGetterSetter(E,"strokeEnabled",!0);b.addGetterSetter(E,"shadowEnabled",!0);b.addGetterSetter(E,"dashEnabled",!0);b.addGetterSetter(E,"strokeScaleEnabled",!0);b.addGetterSetter(E,"fillPriority","color");b.addComponentsGetterSetter(E,"fillPatternOffset",["x","y"]);b.addGetterSetter(E,"fillPatternOffsetX",0,j());b.addGetterSetter(E,"fillPatternOffsetY",0,j());b.addComponentsGetterSetter(E,"fillPatternScale",["x","y"]);b.addGetterSetter(E,"fillPatternScaleX",1,j());b.addGetterSetter(E,"fillPatternScaleY",1,j());b.addComponentsGetterSetter(E,"fillLinearGradientStartPoint",["x","y"]);b.addComponentsGetterSetter(E,"strokeLinearGradientStartPoint",["x","y"]);b.addGetterSetter(E,"fillLinearGradientStartPointX",0);b.addGetterSetter(E,"strokeLinearGradientStartPointX",0);b.addGetterSetter(E,"fillLinearGradientStartPointY",0);b.addGetterSetter(E,"strokeLinearGradientStartPointY",0);b.addComponentsGetterSetter(E,"fillLinearGradientEndPoint",["x","y"]);b.addComponentsGetterSetter(E,"strokeLinearGradientEndPoint",["x","y"]);b.addGetterSetter(E,"fillLinearGradientEndPointX",0);b.addGetterSetter(E,"strokeLinearGradientEndPointX",0);b.addGetterSetter(E,"fillLinearGradientEndPointY",0);b.addGetterSetter(E,"strokeLinearGradientEndPointY",0);b.addComponentsGetterSetter(E,"fillRadialGradientStartPoint",["x","y"]);b.addGetterSetter(E,"fillRadialGradientStartPointX",0);b.addGetterSetter(E,"fillRadialGradientStartPointY",0);b.addComponentsGetterSetter(E,"fillRadialGradientEndPoint",["x","y"]);b.addGetterSetter(E,"fillRadialGradientEndPointX",0);b.addGetterSetter(E,"fillRadialGradientEndPointY",0);b.addGetterSetter(E,"fillPatternRotation",0);b.backCompat(E,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});function jr(t,e,i,n,r,s,a){var o=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),l=Math.sqrt(Math.pow(r-i,2)+Math.pow(s-n,2)),h=a*o/(o+l),d=a*l/(o+l),f=i-h*(r-t),c=n-h*(s-e),v=i+d*(r-t),w=n+d*(s-e);return[f,c,v,w]}function ya(t,e){var i=t.length,n=[],r,s;for(r=2;r<i-2;r+=2)s=jr(t[r-2],t[r-1],t[r],t[r+1],t[r+2],t[r+3],e),!isNaN(s[0])&&(n.push(s[0]),n.push(s[1]),n.push(t[r]),n.push(t[r+1]),n.push(s[2]),n.push(s[3]));return n}class ut extends E{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var i=this.points(),n=i.length,r=this.tension(),s=this.closed(),a=this.bezier(),o,l,h;if(!!n){if(e.beginPath(),e.moveTo(i[0],i[1]),r!==0&&n>4){for(o=this.getTensionPoints(),l=o.length,h=s?0:4,s||e.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)e.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);s||e.quadraticCurveTo(o[l-2],o[l-1],i[n-2],i[n-1])}else if(a)for(h=2;h<n;)e.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<n;h+=2)e.lineTo(i[h],i[h+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():ya(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),i=e.length,n=this.tension(),r=jr(e[i-2],e[i-1],e[0],e[1],e[2],e[3],n),s=jr(e[i-4],e[i-3],e[i-2],e[i-1],e[0],e[1],n),a=ya(e,n),o=[r[2],r[3]].concat(a).concat([s[0],s[1],e[i-2],e[i-1],s[2],s[3],r[0],r[1],e[0],e[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var i=e[0],n=e[0],r=e[1],s=e[1],a,o,l=0;l<e.length/2;l++)a=e[l*2],o=e[l*2+1],i=Math.min(i,a),n=Math.max(n,a),r=Math.min(r,o),s=Math.max(s,o);return{x:i,y:r,width:n-i,height:s-r}}}ut.prototype.className="Line";ut.prototype._attrsAffectingSize=["points","bezier","tension"];Ot(ut);b.addGetterSetter(ut,"closed",!1);b.addGetterSetter(ut,"bezier",!1);b.addGetterSetter(ut,"tension",0,j());b.addGetterSetter(ut,"points",[],Wu());class ki extends E{_sceneFunc(e){var i=this.cornerRadius(),n=this.width(),r=this.height();if(e.beginPath(),!i)e.rect(0,0,n,r);else{let s=0,a=0,o=0,l=0;typeof i=="number"?s=a=o=l=Math.min(i,n/2,r/2):(s=Math.min(i[0]||0,n/2,r/2),a=Math.min(i[1]||0,n/2,r/2),l=Math.min(i[2]||0,n/2,r/2),o=Math.min(i[3]||0,n/2,r/2)),e.moveTo(s,0),e.lineTo(n-a,0),e.arc(n-a,a,a,Math.PI*3/2,0,!1),e.lineTo(n,r-l),e.arc(n-l,r-l,l,0,Math.PI/2,!1),e.lineTo(o,r),e.arc(o,r-o,o,Math.PI/2,Math.PI,!1),e.lineTo(0,s),e.arc(s,s,s,Math.PI,Math.PI*3/2,!1)}e.closePath(),e.fillStrokeShape(this)}}ki.prototype.className="Rect";Ot(ki);b.addGetterSetter(ki,"cornerRadius",0,Ru(4));function cf(t){return Array.from(t)}var oi="auto",pf="center",Oi="justify",_f="Change.konva",gf="2d",wa="-",Xo="left",mf="text",vf="Text",yf="top",wf="bottom",ba="middle",Yo="normal",bf="px ",mn=" ",Cf="right",Sf="word",Tf="char",Ca="none",Pr="\u2026",Ko=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],xf=Ko.length;function kf(t){return t.split(",").map(e=>{e=e.trim();const i=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return i&&!n&&(e=`"${e}"`),e}).join(", ")}var vn;function Er(){return vn||(vn=m.createCanvasElement().getContext(gf),vn)}function Af(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Pf(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Ef(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class ue extends E{constructor(e){super(Ef(e)),this._partialTextX=0,this._partialTextY=0;for(var i=0;i<xf;i++)this.on(Ko[i]+_f,this._setTextData);this._setTextData()}_sceneFunc(e){var i=this.textArr,n=i.length;if(!!this.text()){var r=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,o=this.verticalAlign(),l=0,h=this.align(),d=this.getWidth(),f=this.letterSpacing(),c=this.fill(),v=this.textDecoration(),w=v.indexOf("underline")!==-1,T=v.indexOf("line-through")!==-1,_,A=0,A=a/2,x=0,M=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",ba),e.setAttr("textAlign",Xo),o===ba?l=(this.getHeight()-n*a-r*2)/2:o===wf&&(l=this.getHeight()-n*a-r*2),e.translate(r,l+r),_=0;_<n;_++){var x=0,M=0,O=i[_],V=O.text,le=O.width,fe=O.lastInParagraph,R,K,Z;if(e.save(),h===Cf?x+=d-le-r*2:h===pf&&(x+=(d-le-r*2)/2),w&&(e.save(),e.beginPath(),e.moveTo(x,A+M+Math.round(s/2)),R=V.split(" ").length-1,K=R===0,Z=h===Oi&&fe&&!K?d-r*2:le,e.lineTo(x+Math.round(Z),A+M+Math.round(s/2)),e.lineWidth=s/15,e.strokeStyle=c,e.stroke(),e.restore()),T&&(e.save(),e.beginPath(),e.moveTo(x,A+M),R=V.split(" ").length-1,K=R===0,Z=h===Oi&&fe&&!K?d-r*2:le,e.lineTo(x+Math.round(Z),A+M),e.lineWidth=s/15,e.strokeStyle=c,e.stroke(),e.restore()),f!==0||h===Oi){R=V.split(" ").length-1;for(var _e=cf(V),be=0;be<_e.length;be++){var Ce=_e[be];Ce===" "&&!fe&&h===Oi&&(x+=(d-r*2-le)/R),this._partialTextX=x,this._partialTextY=A+M,this._partialText=Ce,e.fillStrokeShape(this),x+=this.measureSize(Ce).width+f}}else this._partialTextX=x,this._partialTextY=A+M,this._partialText=V,e.fillStrokeShape(this);e.restore(),n>1&&(A+=a)}}}_hitFunc(e){var i=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,i,n),e.closePath(),e.fillStrokeShape(this)}setText(e){var i=m._isString(e)?e:e==null?"":e+"";return this._setAttr(mf,i),this}getWidth(){var e=this.attrs.width===oi||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===oi||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return m.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var i=Er(),n=this.fontSize(),r;return i.save(),i.font=this._getContextFont(),r=i.measureText(e),i.restore(),{width:r.width,height:n}}_getContextFont(){return this.fontStyle()+mn+this.fontVariant()+mn+(this.fontSize()+bf)+kf(this.fontFamily())}_addTextLine(e){this.align()===Oi&&(e=e.trim());var i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){var i=this.letterSpacing(),n=e.length;return Er().measureText(e).width+(n?i*(n-1):0)}_setTextData(){var e=this.text().split(`
`),i=+this.fontSize(),n=0,r=this.lineHeight()*i,s=this.attrs.width,a=this.attrs.height,o=s!==oi&&s!==void 0,l=a!==oi&&a!==void 0,h=this.padding(),d=s-h*2,f=a-h*2,c=0,v=this.wrap(),w=v!==Ca,T=v!==Tf&&w,_=this.ellipsis();this.textArr=[],Er().font=this._getContextFont();for(var A=_?this._getTextWidth(Pr):0,x=0,M=e.length;x<M;++x){var O=e[x],V=this._getTextWidth(O);if(o&&V>d)for(;O.length>0;){for(var le=0,fe=O.length,R="",K=0;le<fe;){var Z=le+fe>>>1,_e=O.slice(0,Z+1),be=this._getTextWidth(_e)+A;be<=d?(le=Z+1,R=_e,K=be):fe=Z}if(R){if(T){var Ce,Gt=O[R.length],Pi=Gt===mn||Gt===wa;Pi&&K<=d?Ce=R.length:Ce=Math.max(R.lastIndexOf(mn),R.lastIndexOf(wa))+1,Ce>0&&(le=Ce,R=R.slice(0,le),K=this._getTextWidth(R))}R=R.trimRight(),this._addTextLine(R),n=Math.max(n,K),c+=r;var Ie=this._shouldHandleEllipsis(c);if(Ie){this._tryToAddEllipsisToLastLine();break}if(O=O.slice(le),O=O.trimLeft(),O.length>0&&(V=this._getTextWidth(O),V<=d)){this._addTextLine(O),c+=r,n=Math.max(n,V);break}}else break}else this._addTextLine(O),c+=r,n=Math.max(n,V),this._shouldHandleEllipsis(c)&&x<M-1&&this._tryToAddEllipsisToLastLine();if(l&&c+r>f)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=i,this.textWidth=n}_shouldHandleEllipsis(e){var i=+this.fontSize(),n=this.lineHeight()*i,r=this.attrs.height,s=r!==oi&&r!==void 0,a=this.padding(),o=r-a*2,l=this.wrap(),h=l!==Ca;return!h||s&&e+n>o}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,i=e!==oi&&e!==void 0,n=this.padding(),r=e-n*2,s=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(!(!a||!s)){if(i){var o=this._getTextWidth(a.text+Pr)<r;o||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+Pr)}}getStrokeScaleEnabled(){return!0}}ue.prototype._fillFunc=Af;ue.prototype._strokeFunc=Pf;ue.prototype.className=vf;ue.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Ot(ue);b.overWriteSetter(ue,"width",vs());b.overWriteSetter(ue,"height",vs());b.addGetterSetter(ue,"fontFamily","Arial");b.addGetterSetter(ue,"fontSize",12,j());b.addGetterSetter(ue,"fontStyle",Yo);b.addGetterSetter(ue,"fontVariant",Yo);b.addGetterSetter(ue,"padding",0,j());b.addGetterSetter(ue,"align",Xo);b.addGetterSetter(ue,"verticalAlign",yf);b.addGetterSetter(ue,"lineHeight",1,j());b.addGetterSetter(ue,"wrap",Sf);b.addGetterSetter(ue,"ellipsis",!1,yt());b.addGetterSetter(ue,"letterSpacing",0,j());b.addGetterSetter(ue,"text","",xi());b.addGetterSetter(ue,"textDecoration","");class Be extends F{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const i=this.children||[];var n=[];return i.forEach(function(r){e(r)&&n.push(r)}),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}var n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var i=this._generalFind(e,!0);return i.length>0?i[0]:void 0}_generalFind(e,i){var n=[];return this._descendants(r=>{const s=r._isMatch(e);return s&&n.push(r),!!(s&&i)}),n}_descendants(e){let i=!1;const n=this.getChildren();for(const r of n){if(i=e(r),i)return!0;if(!!r.hasChildren()&&(i=r._descendants(e),i))return!0}return!1}toObject(){var e=F.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(i=>{e.children.push(i.toObject())}),e}isAncestorOf(e){for(var i=e.getParent();i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(e){var i=F.prototype.clone.call(this,e);return this.getChildren().forEach(function(n){i.add(n.clone())}),i}getAllIntersections(e){var i=[];return this.find("Shape").forEach(function(n){n.isVisible()&&n.intersects(e)&&i.push(n)}),i}_clearSelfAndDescendantCache(e){var i;super._clearSelfAndDescendantCache(e),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(n){n._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(i,n){i.index=n}),this._requestDraw()}drawScene(e,i){var n=this.getLayer(),r=e||n&&n.getCanvas(),s=r&&r.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=r&&r.isCache;if(!this.isVisible()&&!l)return this;if(o){s.save();var h=this.getAbsoluteTransform(i).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",r,i);return this}drawHit(e,i){if(!this.shouldDrawHit(i))return this;var n=this.getLayer(),r=e||n&&n.hitCanvas,s=r&&r.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){s.save();var l=this.getAbsoluteTransform(i).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",r,i);return this}_drawChildren(e,i,n){var r,s=i&&i.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h=a&&o||l;const d=n===this;if(h){s.save();var f=this.getAbsoluteTransform(n),c=f.getMatrix();if(s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),s.beginPath(),l)l.call(this,s,this);else{var v=this.clipX(),w=this.clipY();s.rect(v,w,a,o)}s.clip(),c=f.copy().invert().getMatrix(),s.transform(c[0],c[1],c[2],c[3],c[4],c[5])}var T=!d&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";T&&(s.save(),s._applyGlobalCompositeOperation(this)),(r=this.children)===null||r===void 0||r.forEach(function(_){_[e](i,n)}),T&&s.restore(),h&&s.restore()}getClientRect(e){var i;e=e||{};var n=e.skipTransform,r=e.relativeTo,s,a,o,l,h={x:1/0,y:1/0,width:0,height:0},d=this;(i=this.children)===null||i===void 0||i.forEach(function(T){if(!!T.visible()){var _=T.getClientRect({relativeTo:d,skipShadow:e.skipShadow,skipStroke:e.skipStroke});_.width===0&&_.height===0||(s===void 0?(s=_.x,a=_.y,o=_.x+_.width,l=_.y+_.height):(s=Math.min(s,_.x),a=Math.min(a,_.y),o=Math.max(o,_.x+_.width),l=Math.max(l,_.y+_.height)))}});for(var f=this.find("Shape"),c=!1,v=0;v<f.length;v++){var w=f[v];if(w._isVisible(this)){c=!0;break}}return c&&s!==void 0?h={x:s,y:a,width:o-s,height:l-a}:h={x:0,y:0,width:0,height:0},n?h:this._transformedRect(h,r)}}b.addComponentsGetterSetter(Be,"clip",["x","y","width","height"]);b.addGetterSetter(Be,"clipX",void 0,j());b.addGetterSetter(Be,"clipY",void 0,j());b.addGetterSetter(Be,"clipWidth",void 0,j());b.addGetterSetter(Be,"clipHeight",void 0,j());b.addGetterSetter(Be,"clipFunc");var If="Stage",Lf="string",Sa="px",Mf="mouseout",jo="mouseleave",Zo="mouseover",$o="mouseenter",qo="mousemove",Jo="mousedown",Qo="mouseup",Wi="pointermove",Fi="pointerdown",di="pointerup",Gi="pointercancel",Df="lostpointercapture",yn="pointerout",wn="pointerleave",bn="pointerover",Cn="pointerenter",Zr="contextmenu",el="touchstart",tl="touchend",il="touchmove",nl="touchcancel",$r="wheel",Of=5,Rf=[[$o,"_pointerenter"],[Jo,"_pointerdown"],[qo,"_pointermove"],[Qo,"_pointerup"],[jo,"_pointerleave"],[el,"_pointerdown"],[il,"_pointermove"],[tl,"_pointerup"],[nl,"_pointercancel"],[Zo,"_pointerover"],[$r,"_wheel"],[Zr,"_contextmenu"],[Fi,"_pointerdown"],[Wi,"_pointermove"],[di,"_pointerup"],[Gi,"_pointercancel"],[Df,"_lostpointercapture"]];const Ir={mouse:{[yn]:Mf,[wn]:jo,[bn]:Zo,[Cn]:$o,[Wi]:qo,[Fi]:Jo,[di]:Qo,[Gi]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[yn]:"touchout",[wn]:"touchleave",[bn]:"touchover",[Cn]:"touchenter",[Wi]:il,[Fi]:el,[di]:tl,[Gi]:nl,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[yn]:yn,[wn]:wn,[bn]:bn,[Cn]:Cn,[Wi]:Wi,[Fi]:Fi,[di]:di,[Gi]:Gi,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Hi=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",li=t=>{const e=Hi(t);if(e==="pointer")return B.pointerEventsEnabled&&Ir.pointer;if(e==="touch")return Ir.touch;if(e==="mouse")return Ir.mouse};function Ta(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&m.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const Wf="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Mn=[];class lr extends Be{constructor(e){super(Ta(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Mn.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Ta(this.attrs)}),this._checkVisibility()}_validateAdd(e){const i=e.getType()==="Layer",n=e.getType()==="FastLayer";i||n||m.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===Lf){if(e.charAt(0)==="."){var i=e.slice(1);e=document.getElementsByClassName(i)[0]}else{var n;e.charAt(0)!=="#"?n=e:n=e.slice(1),e=document.getElementById(n)}if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,i=e.length,n;for(n=0;n<i;n++)e[n].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),Be.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&m._isInDocument(e)&&this.container().removeChild(e);var i=Mn.indexOf(this);return i>-1&&Mn.splice(i,1),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(m.warn(Wf),null)}_getPointerById(e){return this._pointerPositions.find(i=>i.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var i=new gi({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=i.getContext()._context,r=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),r.forEach(function(s){if(!!s.isVisible()){var a=s._toKonvaCanvas(e);n.drawImage(a._canvas,e.x,e.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}}),i}getIntersection(e){if(!e)return null;var i=this.children,n=i.length,r=n-1,s;for(s=r;s>=0;s--){const a=i[s].getIntersection(e);if(a)return a}return null}_resizeDOM(){var e=this.width(),i=this.height();this.content&&(this.content.style.width=e+Sa,this.content.style.height=i+Sa),this.bufferCanvas.setSize(e,i),this.bufferHitCanvas.setSize(e,i),this.children.forEach(n=>{n.setSize({width:e,height:i}),n.draw()})}add(e,...i){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(e);var r=this.children.length;return r>Of&&m.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),B.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return Go(e,this)}setPointerCapture(e){Ho(e,this)}releaseCapture(e){Vi(e)}getLayers(){return this.children}_bindContentEvents(){!B.isBrowser||Rf.forEach(([e,i])=>{this.content.addEventListener(e,n=>{this[i](n)})})}_pointerenter(e){this.setPointersPositions(e);const i=li(e.type);this._fire(i.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const i=li(e.type);this._fire(i.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let i=this[e+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(e){const i=li(e.type),n=Hi(e.type);if(!!i){this.setPointersPositions(e);var r=this._getTargetShape(n),s=!Q.isDragging||B.hitOnDragEnabled;r&&s?(r._fireAndBubble(i.pointerout,{evt:e}),r._fireAndBubble(i.pointerleave,{evt:e}),this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):s&&(this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const i=li(e.type),n=Hi(e.type);if(!!i){this.setPointersPositions(e);var r=!1;this._changedPointerPositions.forEach(s=>{var a=this.getIntersection(s);if(Q.justDragged=!1,B["_"+n+"ListenClick"]=!0,!(a&&a.isListening()))return;B.capturePointerEventsEnabled&&a.setPointerCapture(s.id),this[n+"ClickStartShape"]=a,a._fireAndBubble(i.pointerdown,{evt:e,pointerId:s.id}),r=!0;const l=e.type.indexOf("touch")>=0;a.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),r||this._fire(i.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const i=li(e.type),n=Hi(e.type);if(!i)return;Q.isDragging&&Q.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var r=!Q.isDragging||B.hitOnDragEnabled;if(!r)return;var s={};let a=!1;var o=this._getTargetShape(n);this._changedPointerPositions.forEach(l=>{const h=kr(l.id)||this.getIntersection(l),d=l.id,f={evt:e,pointerId:d};var c=o!==h;if(c&&o&&(o._fireAndBubble(i.pointerout,Object.assign({},f),h),o._fireAndBubble(i.pointerleave,Object.assign({},f),h)),h){if(s[h._id])return;s[h._id]=!0}h&&h.isListening()?(a=!0,c&&(h._fireAndBubble(i.pointerover,Object.assign({},f),o),h._fireAndBubble(i.pointerenter,Object.assign({},f),o),this[n+"targetShape"]=h),h._fireAndBubble(i.pointermove,Object.assign({},f))):o&&(this._fire(i.pointerover,{evt:e,target:this,currentTarget:this,pointerId:d}),this[n+"targetShape"]=null)}),a||this._fire(i.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const i=li(e.type),n=Hi(e.type);if(!i)return;this.setPointersPositions(e);const r=this[n+"ClickStartShape"],s=this[n+"ClickEndShape"];var a={};let o=!1;this._changedPointerPositions.forEach(l=>{const h=kr(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),a[h._id])return;a[h._id]=!0}const d=l.id,f={evt:e,pointerId:d};let c=!1;B["_"+n+"InDblClickWindow"]?(c=!0,clearTimeout(this[n+"DblTimeout"])):Q.justDragged||(B["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){B["_"+n+"InDblClickWindow"]=!1},B.dblClickWindow),h&&h.isListening()?(o=!0,this[n+"ClickEndShape"]=h,h._fireAndBubble(i.pointerup,Object.assign({},f)),B["_"+n+"ListenClick"]&&r&&r===h&&(h._fireAndBubble(i.pointerclick,Object.assign({},f)),c&&s&&s===h&&h._fireAndBubble(i.pointerdblclick,Object.assign({},f)))):(this[n+"ClickEndShape"]=null,B["_"+n+"ListenClick"]&&this._fire(i.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:d}),c&&this._fire(i.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:d}))}),o||this._fire(i.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),B["_"+n+"ListenClick"]=!1,e.cancelable&&n!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(Zr,{evt:e}):this._fire(Zr,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble($r,{evt:e}):this._fire($r,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const i=kr(e.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(di,ws(e)),Vi(e.pointerId)}_lostpointercapture(e){Vi(e.pointerId)}setPointersPositions(e){var i=this._getContentPosition(),n=null,r=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})})):(n=(e.clientX-i.left)/i.scaleX,r=(e.clientY-i.top)/i.scaleY,this.pointerPos={x:n,y:r},this._pointerPositions=[{x:n,y:r,id:m._getFirstPointerId(e)}],this._changedPointerPositions=[{x:n,y:r,id:m._getFirstPointerId(e)}])}_setPointerPosition(e){m.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new gi({width:this.width(),height:this.height()}),this.bufferHitCanvas=new ys({pixelRatio:1,width:this.width(),height:this.height()}),!!B.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return m.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}lr.prototype.nodeType=If;Ot(lr);b.addGetterSetter(lr,"container");var Ff="#",Gf="beforeDraw",Hf="draw",rl=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],zf=rl.length;class qt extends Be{constructor(e){super(e),this.canvas=new gi,this.hitCanvas=new ys({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),e<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[e+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){F.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=F.prototype.moveUp.call(this);if(!e)return!1;var i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(F.prototype.moveDown.call(this)){var e=this.getStage();if(e){var i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(F.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return F.prototype.remove.call(this),e&&e.parentNode&&m._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:i}){return this.canvas.setSize(e,i),this.hitCanvas.setSize(e,i),this._setSmoothEnabled(),this}_validateAdd(e){var i=e.getType();i!=="Group"&&i!=="Shape"&&m.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),F.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){m.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){m.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,m.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var i=1,n=!1;;){for(let r=0;r<zf;r++){const s=rl[r],a=this._getIntersection({x:e.x+s.x*i,y:e.y+s.y*i}),o=a.shape;if(o)return o;if(n=!!a.antialiased,!a.antialiased)break}if(n)i+=1;else return null}}_getIntersection(e){const i=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*i),Math.round(e.y*i),1,1).data,r=n[3];if(r===255){const s=m._rgbToHex(n[0],n[1],n[2]),a=Ni[Ff+s];return a?{shape:a}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(e,i){var n=this.getLayer(),r=e||n&&n.getCanvas();return this._fire(Gf,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),Be.prototype.drawScene.call(this,r,i),this._fire(Hf,{node:this}),this}drawHit(e,i){var n=this.getLayer(),r=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),Be.prototype.drawHit.call(this,r,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){m.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return m.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,i=!!this.hitCanvas._canvas.parentNode;i?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}}qt.prototype.nodeType="Layer";Ot(qt);b.addGetterSetter(qt,"imageSmoothingEnabled",!0);b.addGetterSetter(qt,"clearBeforeDraw",!0);b.addGetterSetter(qt,"hitGraphEnabled",!0,yt());class bs extends qt{constructor(e){super(e),this.listening(!1),m.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}bs.prototype.nodeType="FastLayer";Ot(bs);class Cs extends Be{_validateAdd(e){var i=e.getType();i!=="Group"&&i!=="Shape"&&m.throw("You may only add groups and shapes to groups.")}}Cs.prototype.nodeType="Group";Ot(Cs);var Lr=function(){return _i.performance&&_i.performance.now?function(){return _i.performance.now()}:function(){return new Date().getTime()}}();class Ye{constructor(e,i){this.id=Ye.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Lr(),frameRate:0},this.func=e,this.setLayers(i)}setLayers(e){var i=[];return e?e.length>0?i=e:i=[e]:i=[],this.layers=i,this}getLayers(){return this.layers}addLayer(e){var i=this.layers,n=i.length,r;for(r=0;r<n;r++)if(i[r]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=Ye,i=e.animations,n=i.length,r;for(r=0;r<n;r++)if(i[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Lr(),Ye._addAnimation(this),this}stop(){return Ye._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var i=e.id,n=this.animations,r=n.length,s;for(s=0;s<r;s++)if(n[s].id===i){this.animations.splice(s,1);break}}static _runFrames(){var e={},i=this.animations,n,r,s,a,o,l,h,d,f;for(a=0;a<i.length;a++)if(n=i[a],r=n.layers,s=n.func,n._updateFrameObject(Lr()),l=r.length,s?f=s.call(n,n.frame)!==!1:f=!0,!!f)for(o=0;o<l;o++)h=r[o],h._id!==void 0&&(e[h._id]=h);for(d in e)!e.hasOwnProperty(d)||e[d].batchDraw()}static _animationLoop(){var e=Ye;e.animations.length?(e._runFrames(),m.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,m.requestAnimFrame(this._animationLoop))}}Ye.animations=[];Ye.animIdCounter=0;Ye.animRunning=!1;var Bf={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Vf=1,xa=2,ka=3,Nf=0,Aa=["fill","stroke","shadowColor"];class Uf{constructor(e,i,n,r,s,a,o){this.prop=e,this.propFunc=i,this.begin=r,this._pos=r,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=s-this.begin,this.pause()}fire(e){var i=this[e];i&&i()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=xa,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=ka,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===xa?this.setTime(e):this.state===ka&&this.setTime(this.duration-e)}pause(){this.state=Vf,this.fire("onPause")}getTimer(){return new Date().getTime()}}class ve{constructor(e){var i=this,n=e.node,r=n._id,s,a=e.easing||Ui.Linear,o=!!e.yoyo,l;typeof e.duration>"u"?s=.3:e.duration===0?s=.001:s=e.duration,this.node=n,this._id=Nf++;var h=n.getLayer()||(n instanceof B.Stage?n.getLayers():null);h||m.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Ye(function(){i.tween.onEnterFrame()},h),this.tween=new Uf(l,function(d){i._tweenFunc(d)},a,0,1,s*1e3,o),this._addListeners(),ve.attrs[r]||(ve.attrs[r]={}),ve.attrs[r][this._id]||(ve.attrs[r][this._id]={}),ve.tweens[r]||(ve.tweens[r]={});for(l in e)Bf[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,i){var n=this.node,r=n._id,s,a,o,l,h,d,f,c;if(o=ve.tweens[r][e],o&&delete ve.attrs[r][o][e],s=n.getAttr(e),m._isArray(i))if(a=[],h=Math.max(i.length,s.length),e==="points"&&i.length!==s.length&&(i.length>s.length?(f=s,s=m._prepareArrayForTween(s,i,n.closed())):(d=i,i=m._prepareArrayForTween(i,s,n.closed()))),e.indexOf("fill")===0)for(l=0;l<h;l++)if(l%2===0)a.push(i[l]-s[l]);else{var v=m.colorToRGBA(s[l]);c=m.colorToRGBA(i[l]),s[l]=v,a.push({r:c.r-v.r,g:c.g-v.g,b:c.b-v.b,a:c.a-v.a})}else for(l=0;l<h;l++)a.push(i[l]-s[l]);else Aa.indexOf(e)!==-1?(s=m.colorToRGBA(s),c=m.colorToRGBA(i),a={r:c.r-s.r,g:c.g-s.g,b:c.b-s.b,a:c.a-s.a}):a=i-s;ve.attrs[r][this._id][e]={start:s,diff:a,end:i,trueEnd:d,trueStart:f},ve.tweens[r][e]=this._id}_tweenFunc(e){var i=this.node,n=ve.attrs[i._id][this._id],r,s,a,o,l,h,d,f;for(r in n){if(s=n[r],a=s.start,o=s.diff,f=s.end,m._isArray(a))if(l=[],d=Math.max(a.length,f.length),r.indexOf("fill")===0)for(h=0;h<d;h++)h%2===0?l.push((a[h]||0)+o[h]*e):l.push("rgba("+Math.round(a[h].r+o[h].r*e)+","+Math.round(a[h].g+o[h].g*e)+","+Math.round(a[h].b+o[h].b*e)+","+(a[h].a+o[h].a*e)+")");else for(h=0;h<d;h++)l.push((a[h]||0)+o[h]*e);else Aa.indexOf(r)!==-1?l="rgba("+Math.round(a.r+o.r*e)+","+Math.round(a.g+o.g*e)+","+Math.round(a.b+o.b*e)+","+(a.a+o.a*e)+")":l=a+o*e;i.setAttr(r,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,i=ve.attrs[e._id][this._id];i.points&&i.points.trueEnd&&e.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,i=ve.attrs[e._id][this._id];i.points&&i.points.trueStart&&e.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,i=this._id,n=ve.tweens[e],r;this.pause();for(r in n)delete ve.tweens[e][r];delete ve.attrs[e][i]}}ve.attrs={};ve.tweens={};F.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var i=new ve(t);i.play()};const Ui={BackEaseIn(t,e,i,n){var r=1.70158;return i*(t/=n)*t*((r+1)*t-r)+e},BackEaseOut(t,e,i,n){var r=1.70158;return i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},BackEaseInOut(t,e,i,n){var r=1.70158;return(t/=n/2)<1?i/2*(t*t*(((r*=1.525)+1)*t-r))+e:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},ElasticEaseIn(t,e,i,n,r,s){var a=0;return t===0?e:(t/=n)===1?e+i:(s||(s=n*.3),!r||r<Math.abs(i)?(r=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/r),-(r*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/s))+e)},ElasticEaseOut(t,e,i,n,r,s){var a=0;return t===0?e:(t/=n)===1?e+i:(s||(s=n*.3),!r||r<Math.abs(i)?(r=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/r),r*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/s)+i+e)},ElasticEaseInOut(t,e,i,n,r,s){var a=0;return t===0?e:(t/=n/2)===2?e+i:(s||(s=n*(.3*1.5)),!r||r<Math.abs(i)?(r=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/r),t<1?-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/s))+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/s)*.5+i+e)},BounceEaseOut(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,i,n){return i-Ui.BounceEaseOut(n-t,0,i,n)+e},BounceEaseInOut(t,e,i,n){return t<n/2?Ui.BounceEaseIn(t*2,0,i,n)*.5+e:Ui.BounceEaseOut(t*2-n,0,i,n)*.5+i*.5+e},EaseIn(t,e,i,n){return i*(t/=n)*t+e},EaseOut(t,e,i,n){return-i*(t/=n)*(t-2)+e},EaseInOut(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,i,n){return i*(t/=n)*t*t*t*t+e},StrongEaseOut(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,i,n){return i*t/n+e}},ke=m._assign(B,{Util:m,Transform:xt,Node:F,Container:Be,Stage:lr,stages:Mn,Layer:qt,FastLayer:bs,Group:Cs,DD:Q,Shape:E,shapes:Ni,Animation:Ye,Tween:ve,Easings:Ui,Context:ar,Canvas:or});function Jt(t,e){this._waveformData=t,this._channelIndex=e}Jt.prototype.min_sample=function(t){var e=(t*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._at(e)};Jt.prototype.max_sample=function(t){var e=(t*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._at(e)};Jt.prototype.set_min_sample=function(t,e){var i=(t*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._set_at(i,e)};Jt.prototype.set_max_sample=function(t,e){var i=(t*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._set_at(i,e)};Jt.prototype.min_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2)};Jt.prototype.max_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2+1)};var hi=127,Sn=-128;function Xf(t,e){var i=Math.floor(t/e),n=t-i*e;return n>0&&i++,i}function Yf(t){var e=t.scale,i=t.amplitude_scale,n=t.split_channels,r=t.length,s=t.sample_rate,a=t.channels.map(function(V){return new Float32Array(V)}),o=n?a.length:1,l=o===1?1:2,h=l===1?20:24,d=Xf(r,e),f=h+d*2*o,c=new ArrayBuffer(f),v=new DataView(c),w=0,T=h,_,A,x=new Array(o),M=new Array(o);for(_=0;_<o;_++)x[_]=1/0,M[_]=-1/0;for(v.setInt32(0,l,!0),v.setUint32(4,1,!0),v.setInt32(8,s,!0),v.setInt32(12,e,!0),v.setInt32(16,d,!0),l===2&&v.setInt32(20,o,!0),A=0;A<r;A++){var O=0;if(o===1){for(_=0;_<a.length;++_)O+=a[_][A];O=Math.floor(hi*O*i/a.length),O<x[0]&&(x[0]=O,x[0]<Sn&&(x[0]=Sn)),O>M[0]&&(M[0]=O,M[0]>hi&&(M[0]=hi))}else for(_=0;_<o;++_)O=Math.floor(hi*a[_][A]*i),O<x[_]&&(x[_]=O,x[_]<Sn&&(x[_]=Sn)),O>M[_]&&(M[_]=O,M[_]>hi&&(M[_]=hi));if(++w===e){for(_=0;_<o;_++)v.setInt8(T++,x[_]),v.setInt8(T++,M[_]),x[_]=1/0,M[_]=-1/0;w=0}}if(w>0)for(_=0;_<o;_++)v.setInt8(T++,x[_]),v.setInt8(T++,M[_]);return c}function Xi(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xi=function(e){return typeof e}:Xi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xi(t)}function Kf(t){return t&&Xi(t)==="object"&&"sample_rate"in t&&"samples_per_pixel"in t&&"bits"in t&&"length"in t&&"data"in t}function jf(t){var e=t&&Xi(t)==="object"&&"byteLength"in t;if(e){var i=new DataView(t),n=i.getInt32(0,!0);if(n!==1&&n!==2)throw new TypeError("WaveformData.create(): This waveform data version not supported")}return e}function Zf(t){var e=t.data,i=t.channels||1,n=24,r=t.bits===8?1:2,s=t.length*2*i;if(e.length!==s)throw new Error("WaveformData.create(): Length mismatch in JSON waveform data");var a=n+e.length*r,o=new ArrayBuffer(a),l=new DataView(o);l.setInt32(0,2,!0),l.setUint32(4,t.bits===8,!0),l.setInt32(8,t.sample_rate,!0),l.setInt32(12,t.samples_per_pixel,!0),l.setInt32(16,t.length,!0),l.setInt32(20,i,!0);var h=n,d;if(t.bits===8)for(d=0;d<e.length;d++)l.setInt8(h++,e[d],!0);else for(d=0;d<e.length;d++)l.setInt16(h,e[d],!0),h+=2;return o}function $f(t,e){var i=atob(t);if(e){for(var n=new Uint8Array(i.length),r=0,s=i.length;r<s;++r)n[r]=i.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}function qf(t,e,i){var n=e===void 0?null:e,r=i===void 0?!1:i,s=$f(t,r),a=s.indexOf(`
`,10)+1,o=s.substring(a)+(n?"//# sourceMappingURL="+n:""),l=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(l)}function Jf(t,e,i){var n;return function(s){return n=n||qf(t,e,i),new Worker(n,s)}}var Qf=Jf("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogQXVkaW9CdWZmZXItYmFzZWQgV2F2ZWZvcm1EYXRhIGdlbmVyYXRvcgogICAqCiAgICogQWRhcHRlZCBmcm9tIEJsb2NrRmlsZTo6Q2FsY1N1bW1hcnkgaW4gQXVkYWNpdHksIHdpdGggcGVybWlzc2lvbi4KICAgKiBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9hdWRhY2l0eS9zb3VyY2UvYnJvd3NlL2F1ZGFjaXR5LXNyYy90cnVuay9zcmMvQmxvY2tGaWxlLmNwcAogICAqLwogIHZhciBJTlQ4X01BWCA9IDEyNzsKICB2YXIgSU5UOF9NSU4gPSAtMTI4OwoKICBmdW5jdGlvbiBjYWxjdWxhdGVXYXZlZm9ybURhdGFMZW5ndGgoYXVkaW9fc2FtcGxlX2NvdW50LCBzY2FsZSkgewogICAgdmFyIGRhdGFfbGVuZ3RoID0gTWF0aC5mbG9vcihhdWRpb19zYW1wbGVfY291bnQgLyBzY2FsZSk7CiAgICB2YXIgc2FtcGxlc19yZW1haW5pbmcgPSBhdWRpb19zYW1wbGVfY291bnQgLSBkYXRhX2xlbmd0aCAqIHNjYWxlOwoKICAgIGlmIChzYW1wbGVzX3JlbWFpbmluZyA+IDApIHsKICAgICAgZGF0YV9sZW5ndGgrKzsKICAgIH0KCiAgICByZXR1cm4gZGF0YV9sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBnZW5lcmF0ZVdhdmVmb3JtRGF0YShvcHRpb25zKSB7CiAgICB2YXIgc2NhbGUgPSBvcHRpb25zLnNjYWxlOwogICAgdmFyIGFtcGxpdHVkZV9zY2FsZSA9IG9wdGlvbnMuYW1wbGl0dWRlX3NjYWxlOwogICAgdmFyIHNwbGl0X2NoYW5uZWxzID0gb3B0aW9ucy5zcGxpdF9jaGFubmVsczsKICAgIHZhciBsZW5ndGggPSBvcHRpb25zLmxlbmd0aDsKICAgIHZhciBzYW1wbGVfcmF0ZSA9IG9wdGlvbnMuc2FtcGxlX3JhdGU7CiAgICB2YXIgY2hhbm5lbHMgPSBvcHRpb25zLmNoYW5uZWxzLm1hcChmdW5jdGlvbiAoY2hhbm5lbCkgewogICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShjaGFubmVsKTsKICAgIH0pOwogICAgdmFyIG91dHB1dF9jaGFubmVscyA9IHNwbGl0X2NoYW5uZWxzID8gY2hhbm5lbHMubGVuZ3RoIDogMTsKICAgIHZhciB2ZXJzaW9uID0gb3V0cHV0X2NoYW5uZWxzID09PSAxID8gMSA6IDI7CiAgICB2YXIgaGVhZGVyX3NpemUgPSB2ZXJzaW9uID09PSAxID8gMjAgOiAyNDsKICAgIHZhciBkYXRhX2xlbmd0aCA9IGNhbGN1bGF0ZVdhdmVmb3JtRGF0YUxlbmd0aChsZW5ndGgsIHNjYWxlKTsKICAgIHZhciB0b3RhbF9zaXplID0gaGVhZGVyX3NpemUgKyBkYXRhX2xlbmd0aCAqIDIgKiBvdXRwdXRfY2hhbm5lbHM7CiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRvdGFsX3NpemUpOwogICAgdmFyIGRhdGFfdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpOwogICAgdmFyIHNjYWxlX2NvdW50ZXIgPSAwOwogICAgdmFyIG9mZnNldCA9IGhlYWRlcl9zaXplOwogICAgdmFyIGNoYW5uZWwsIGk7CiAgICB2YXIgbWluX3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CiAgICB2YXIgbWF4X3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CgogICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICBtYXhfdmFsdWVbY2hhbm5lbF0gPSAtSW5maW5pdHk7CiAgICB9CgogICAgZGF0YV92aWV3LnNldEludDMyKDAsIHZlcnNpb24sIHRydWUpOyAvLyBWZXJzaW9uCgogICAgZGF0YV92aWV3LnNldFVpbnQzMig0LCAxLCB0cnVlKTsgLy8gSXMgOCBiaXQ/CgogICAgZGF0YV92aWV3LnNldEludDMyKDgsIHNhbXBsZV9yYXRlLCB0cnVlKTsgLy8gU2FtcGxlIHJhdGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTIsIHNjYWxlLCB0cnVlKTsgLy8gU2NhbGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTYsIGRhdGFfbGVuZ3RoLCB0cnVlKTsgLy8gTGVuZ3RoCgogICAgaWYgKHZlcnNpb24gPT09IDIpIHsKICAgICAgZGF0YV92aWV3LnNldEludDMyKDIwLCBvdXRwdXRfY2hhbm5lbHMsIHRydWUpOwogICAgfQoKICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgc2FtcGxlID0gMDsKCiAgICAgIGlmIChvdXRwdXRfY2hhbm5lbHMgPT09IDEpIHsKICAgICAgICBmb3IgKGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgY2hhbm5lbHMubGVuZ3RoOyArK2NoYW5uZWwpIHsKICAgICAgICAgIHNhbXBsZSArPSBjaGFubmVsc1tjaGFubmVsXVtpXTsKICAgICAgICB9CgogICAgICAgIHNhbXBsZSA9IE1hdGguZmxvb3IoSU5UOF9NQVggKiBzYW1wbGUgKiBhbXBsaXR1ZGVfc2NhbGUgLyBjaGFubmVscy5sZW5ndGgpOwoKICAgICAgICBpZiAoc2FtcGxlIDwgbWluX3ZhbHVlWzBdKSB7CiAgICAgICAgICBtaW5fdmFsdWVbMF0gPSBzYW1wbGU7CgogICAgICAgICAgaWYgKG1pbl92YWx1ZVswXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgIG1pbl92YWx1ZVswXSA9IElOVDhfTUlOOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHNhbXBsZSA+IG1heF92YWx1ZVswXSkgewogICAgICAgICAgbWF4X3ZhbHVlWzBdID0gc2FtcGxlOwoKICAgICAgICAgIGlmIChtYXhfdmFsdWVbMF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICBtYXhfdmFsdWVbMF0gPSBJTlQ4X01BWDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgKytjaGFubmVsKSB7CiAgICAgICAgICBzYW1wbGUgPSBNYXRoLmZsb29yKElOVDhfTUFYICogY2hhbm5lbHNbY2hhbm5lbF1baV0gKiBhbXBsaXR1ZGVfc2NhbGUpOwoKICAgICAgICAgIGlmIChzYW1wbGUgPCBtaW5fdmFsdWVbY2hhbm5lbF0pIHsKICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gc2FtcGxlOwoKICAgICAgICAgICAgaWYgKG1pbl92YWx1ZVtjaGFubmVsXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gSU5UOF9NSU47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2FtcGxlID4gbWF4X3ZhbHVlW2NoYW5uZWxdKSB7CiAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IHNhbXBsZTsKCiAgICAgICAgICAgIGlmIChtYXhfdmFsdWVbY2hhbm5lbF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IElOVDhfTUFYOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoKytzY2FsZV9jb3VudGVyID09PSBzY2FsZSkgewogICAgICAgIGZvciAoY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBvdXRwdXRfY2hhbm5lbHM7IGNoYW5uZWwrKykgewogICAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgICBkYXRhX3ZpZXcuc2V0SW50OChvZmZzZXQrKywgbWF4X3ZhbHVlW2NoYW5uZWxdKTsKICAgICAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICAgICAgbWF4X3ZhbHVlW2NoYW5uZWxdID0gLUluZmluaXR5OwogICAgICAgIH0KCiAgICAgICAgc2NhbGVfY291bnRlciA9IDA7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc2NhbGVfY291bnRlciA+IDApIHsKICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1heF92YWx1ZVtjaGFubmVsXSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnVmZmVyOwogIH0KCiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlKGV2dCkgewogICAgdmFyIGJ1ZmZlciA9IGdlbmVyYXRlV2F2ZWZvcm1EYXRhKGV2dC5kYXRhKTsgLy8gVHJhbnNmZXIgYnVmZmVyIHRvIHRoZSBjYWxsaW5nIHRocmVhZAoKICAgIHRoaXMucG9zdE1lc3NhZ2UoYnVmZmVyLCBbYnVmZmVyXSk7CiAgICB0aGlzLmNsb3NlKCk7CiAgfTsKCn0pKCk7Cgo=",null,!1);function Ze(t){if(Kf(t)&&(t=Zf(t)),jf(t)){this._data=new DataView(t),this._offset=this._version()===2?24:20,this._channels=[];for(var e=0;e<this.channels;e++)this._channels[e]=new Jt(this,e)}else throw new TypeError("WaveformData.create(): Unknown data format")}var Tn={scale:512,amplitude_scale:1,split_channels:!1,disable_worker:!1};function ec(t){var e={scale:t.scale||Tn.scale,amplitude_scale:t.amplitude_scale||Tn.amplitude_scale,split_channels:t.split_channels||Tn.split_channels,disable_worker:t.disable_worker||Tn.disable_worker};return e}function tc(t){for(var e=[],i=0;i<t.numberOfChannels;++i)e.push(t.getChannelData(i).buffer);return e}function sl(t,e,i){var n=tc(t);if(e.disable_worker){var r=Yf({scale:e.scale,amplitude_scale:e.amplitude_scale,split_channels:e.split_channels,length:t.length,sample_rate:t.sampleRate,channels:n});i(null,new Ze(r),t)}else{var s=new Qf;s.onmessage=function(a){i(null,new Ze(a.data),t)},s.postMessage({scale:e.scale,amplitude_scale:e.amplitude_scale,split_channels:e.split_channels,length:t.length,sample_rate:t.sampleRate,channels:n},n)}}function ic(t,e,i,n){function r(s){s||(s=new DOMException("EncodingError")),n(s)}t.decodeAudioData(e,function(s){sl(s,i,n)},r)}Ze.create=function(e){return new Ze(e)};Ze.createFromAudio=function(t,e){var i=ec(t);if(t.audio_context&&t.array_buffer)return ic(t.audio_context,t.array_buffer,i,e);if(t.audio_buffer)return sl(t.audio_buffer,i,e);throw new TypeError("WaveformData.createFromAudio(): Pass either an AudioContext and ArrayBuffer, or an AudioBuffer object")};Ze.prototype={resample:function(e){if(e.scale=typeof e.scale=="number"?e.scale:null,e.width=typeof e.width=="number"?e.width:null,e.width!=null&&e.width<=0)throw new RangeError("WaveformData.resample(): width should be a positive integer value");if(e.scale!=null&&e.scale<=0)throw new RangeError("WaveformData.resample(): scale should be a positive integer value");if(!e.scale&&!e.width)throw new Error("WaveformData.resample(): Missing scale or width option");var i=e.scale||Math.floor(this.duration*this.sample_rate/e.width),n=this.scale,r=this.length,s=r*this.scale,a=Math.ceil(s/i),o=24,l=this.bits===8?1:2,h=o+a*2*this.channels*l,d=new ArrayBuffer(h),f=new DataView(d);f.setInt32(0,2,!0),f.setUint32(4,this.bits===8,!0),f.setInt32(8,this.sample_rate,!0),f.setInt32(12,i,!0),f.setInt32(16,a,!0),f.setInt32(20,this.channels,!0);var c=new Ze(d),v=0,w=0,T=this.channels,_=new Array(T),A=new Array(T),x;for(x=0;x<T;++x)r>0?(_[x]=this.channel(x).min_sample(v),A[x]=this.channel(x).max_sample(v)):(_[x]=0,A[x]=0);var M=this.bits===8?-128:-32768,O=this.bits===8?127:32767;if(i<n)throw new Error("WaveformData.resample(): Zoom level "+i+" too low, minimum: "+n);var V,le,fe,R,K;function Z(_e){return Math.floor(_e*i)}for(;v<r;){for(;Math.floor(Z(w)/n)===v;){if(w>0)for(x=0;x<T;++x)c.channel(x).set_min_sample(w-1,_[x]),c.channel(x).set_max_sample(w-1,A[x]);if(K=v,w++,V=Z(w),le=Z(w-1),V!==le)for(x=0;x<T;++x)_[x]=O,A[x]=M}for(V=Z(w),fe=Math.floor(V/n),fe>r&&(fe=r);v<fe;){for(x=0;x<T;++x)R=this.channel(x).min_sample(v),R<_[x]&&(_[x]=R),R=this.channel(x).max_sample(v),R>A[x]&&(A[x]=R);v++}}if(v!==K)for(x=0;x<T;++x)c.channel(x).set_min_sample(w-1,_[x]),c.channel(x).set_max_sample(w-1,A[x]);return c},concat:function(){var e=this,i=Array.prototype.slice.call(arguments);i.forEach(function(r){if(e.channels!==r.channels||e.sample_rate!==r.sample_rate||e.bits!==r.bits||e.scale!==r.scale)throw new Error("WaveformData.concat(): Waveforms are incompatible")});var n=this._concatBuffers.apply(this,i);return Ze.create(n)},_concatBuffers:function(){var e=Array.prototype.slice.call(arguments),i=this._offset,n=i,r=0,s=[this].concat(e).map(function(w){return w._data.buffer}),a,o;for(a=0;a<s.length;a++){o=s[a];var l=new DataView(o).getInt32(16,!0);n+=o.byteLength-i,r+=l}var h=new ArrayBuffer(n),d=new DataView(s[0]),f=new DataView(h);for(a=0;a<i;a++)f.setUint8(a,d.getUint8(a));f.setInt32(16,r,!0);var c=0,v=new Uint8Array(h,i);for(a=0;a<s.length;a++)o=s[a],v.set(new Uint8Array(o,i),c),c+=o.byteLength-i;return h},_offsetValues:function(e,i,n){var r=[],s=this.channels;n+=e*s*2;for(var a=0;a<i;a++)r.push(this._at(a*s*2+n));return r},_version:function(){return this._data.getInt32(0,!0)},get length(){return this._data.getUint32(16,!0)},get bits(){var t=Boolean(this._data.getUint32(4,!0));return t?8:16},get duration(){return this.length*this.scale/this.sample_rate},get pixels_per_second(){return this.sample_rate/this.scale},get seconds_per_pixel(){return this.scale/this.sample_rate},get channels(){return this._version()===2?this._data.getInt32(20,!0):1},channel:function(e){if(e>=0&&e<this._channels.length)return this._channels[e];throw new RangeError("Invalid channel: "+e)},get sample_rate(){return this._data.getInt32(8,!0)},get scale(){return this._data.getInt32(12,!0)},_at:function(e){return this.bits===8?this._data.getInt8(this._offset+e):this._data.getInt16(this._offset+e*2,!0)},_set_at:function(e,i){return this.bits===8?this._data.setInt8(this._offset+e,i):this._data.setInt16(this._offset+e*2,i,!0)},at_time:function(e){return Math.floor(e*this.sample_rate/this.scale)},time:function(e){return e*this.scale/this.sample_rate},toJSON:function(){for(var e={version:2,channels:this.channels,sample_rate:this.sample_rate,samples_per_pixel:this.scale,bits:this.bits,length:this.length,data:[]},i=0;i<this.length;i++)for(var n=0;n<this.channels;n++)e.data.push(this.channel(n).min_sample(i)),e.data.push(this.channel(n).max_sample(i));return e},toArrayBuffer:function(){return this._data.buffer}};var al={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function r(l,h,d){this.fn=l,this.context=h,this.once=d||!1}function s(l,h,d,f,c){if(typeof d!="function")throw new TypeError("The listener must be a function");var v=new r(d,f||l,c),w=i?i+h:h;return l._events[w]?l._events[w].fn?l._events[w]=[l._events[w],v]:l._events[w].push(v):(l._events[w]=v,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new n:delete l._events[h]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],d,f;if(this._eventsCount===0)return h;for(f in d=this._events)e.call(d,f)&&h.push(i?f.slice(1):f);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},o.prototype.listeners=function(h){var d=i?i+h:h,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var c=0,v=f.length,w=new Array(v);c<v;c++)w[c]=f[c].fn;return w},o.prototype.listenerCount=function(h){var d=i?i+h:h,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(h,d,f,c,v,w){var T=i?i+h:h;if(!this._events[T])return!1;var _=this._events[T],A=arguments.length,x,M;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),A){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,f),!0;case 4:return _.fn.call(_.context,d,f,c),!0;case 5:return _.fn.call(_.context,d,f,c,v),!0;case 6:return _.fn.call(_.context,d,f,c,v,w),!0}for(M=1,x=new Array(A-1);M<A;M++)x[M-1]=arguments[M];_.fn.apply(_.context,x)}else{var O=_.length,V;for(M=0;M<O;M++)switch(_[M].once&&this.removeListener(h,_[M].fn,void 0,!0),A){case 1:_[M].fn.call(_[M].context);break;case 2:_[M].fn.call(_[M].context,d);break;case 3:_[M].fn.call(_[M].context,d,f);break;case 4:_[M].fn.call(_[M].context,d,f,c);break;default:if(!x)for(V=1,x=new Array(A-1);V<A;V++)x[V-1]=arguments[V];_[M].fn.apply(_[M].context,x)}}return!0},o.prototype.on=function(h,d,f){return s(this,h,d,f,!1)},o.prototype.once=function(h,d,f){return s(this,h,d,f,!0)},o.prototype.removeListener=function(h,d,f,c){var v=i?i+h:h;if(!this._events[v])return this;if(!d)return a(this,v),this;var w=this._events[v];if(w.fn)w.fn===d&&(!c||w.once)&&(!f||w.context===f)&&a(this,v);else{for(var T=0,_=[],A=w.length;T<A;T++)(w[T].fn!==d||c&&!w[T].once||f&&w[T].context!==f)&&_.push(w[T]);_.length?this._events[v]=_.length===1?_[0]:_:a(this,v)}return this},o.prototype.removeAllListeners=function(h){var d;return h?(d=i?i+h:h,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o})(al);var ol=al.exports;function Yi(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yi=function(e){return typeof e}:Yi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yi(t)}function we(t,e,i){this.time=t,this.type=e,this.id=i}we.POINT=0;we.SEGMENT_START=1;we.SEGMENT_END=2;we.sorter=function(t,e){return t.time-e.time};function Pa(t,e){for(t=t.toString();t.length<e;)t="0"+t;return t}function Ss(t,e){var i=[],n=Math.floor(t%1*Math.pow(10,e)),r=Math.floor(t),s=Math.floor(r/60),a=Math.floor(s/60);a>0&&i.push(a),i.push(s%60),i.push(r%60);for(var o=0;o<i.length;o++)i[o]=Pa(i[o],2);return i=i.join(":"),e>0&&(i+="."+Pa(n,e)),i}function nc(t,e){if(e===0)return 0;var i=1;t<0&&(i=-1,t=-t);var n=Math.ceil(t);return i*((n+e-1)/e|0)*e}function Qt(t,e,i){return t<e?e:t>i?i:t}function te(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hr(t,e){for(var i in e)te(e,i)&&(t[i]=e[i]);return t}function rc(t){if(t.length===0)return!0;for(var e=t[0],i=1;i<t.length;i++){if(e>=t[i])return!1;e=t[i]}return!0}function Vn(t){return typeof t=="number"}function ll(t){return!(typeof t!="number"||t!==t||t===1/0||t===-1/0)}function Lt(t){return typeof t=="number"&&Number.isFinite(t)}function wi(t){return t!==null&&Yi(t)==="object"&&!Array.isArray(t)}function $t(t){return typeof t=="string"}function sc(t){return Object.prototype.toString.call(t).includes("ArrayBuffer")}function dt(t){return t==null}function ac(t){return typeof t=="function"}function hl(t){return t===!0||t===!1}function Ea(t){return t instanceof HTMLElement}function oc(t){return Array.isArray(t)}function dr(t){return wi(t)&&te(t,"linearGradientStart")&&te(t,"linearGradientEnd")&&te(t,"linearGradientColorStops")&&Vn(t.linearGradientStart)&&Vn(t.linearGradientEnd)&&oc(t.linearGradientColorStops)&&t.linearGradientColorStops.length===2}var lc=/HeadlessChrome/.test(navigator.userAgent);function hc(){return lc||navigator.webdriver?!1:(typeof document>"u"?"undefined":Yi(document))==="object"&&"visibilityState"in document&&document.visibilityState==="visible"}var dl=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,dc=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,Mt={forward:{},reverse:{}},Ts=0,ur=1,fr=2;Mt.forward[we.POINT]=Ts;Mt.forward[we.SEGMENT_START]=ur;Mt.forward[we.SEGMENT_END]=fr;Mt.reverse[we.POINT]=Ts;Mt.reverse[we.SEGMENT_START]=fr;Mt.reverse[we.SEGMENT_END]=ur;var cr={};cr[Ts]="points.enter";cr[ur]="segments.enter";cr[fr]="segments.exit";function uc(t,e){switch(e.type){case we.POINT:return t.points.getPoint(e.id);case we.SEGMENT_START:case we.SEGMENT_END:return t.segments.getSegment(e.id);default:throw new Error("getPointOrSegment: id not found?")}}function nt(t){this._cues=[],this._peaks=t,this._previousTime=-1,this._updateCues=this._updateCues.bind(this),this._onPlaying=this.onPlaying.bind(this),this._onSeeked=this.onSeeked.bind(this),this._onTimeUpdate=this.onTimeUpdate.bind(this),this._onAnimationFrame=this.onAnimationFrame.bind(this),this._rAFHandle=null,this._activeSegments={},this._attachEventHandlers()}nt.prototype._updateCues=function(){var t=this,e=t._peaks.points.getPoints(),i=t._peaks.segments.getSegments();t._cues.length=0,e.forEach(function(r){t._cues.push(new we(r.time,we.POINT,r.id))}),i.forEach(function(r){t._cues.push(new we(r.startTime,we.SEGMENT_START,r.id)),t._cues.push(new we(r.endTime,we.SEGMENT_END,r.id))}),t._cues.sort(we.sorter);var n=t._peaks.player.getCurrentTime();t._updateActiveSegments(n)};nt.prototype._onUpdate=function(t,e){var i=t>e,n,r,s;i?(n=0,r=this._cues.length,s=1):(n=this._cues.length-1,r=-1,s=-1);for(var a=n;i?a<r:a>r;a+=s){var o=this._cues[a];if(i?o.time>e:o.time<e){if(i?o.time>t:o.time<t)break;var l=uc(this._peaks,o),h=i?Mt.forward[o.type]:Mt.reverse[o.type];h===ur?this._activeSegments[l.id]=l:h===fr&&delete this._activeSegments[l.id],this._peaks.emit(cr[h],l)}}};nt.prototype.onTimeUpdate=function(t){hc()||(this._peaks.player.isPlaying()&&!this._peaks.player.isSeeking()&&this._onUpdate(t,this._previousTime),this._previousTime=t)};nt.prototype.onAnimationFrame=function(){var t=this._peaks.player.getCurrentTime();this._peaks.player.isSeeking()||this._onUpdate(t,this._previousTime),this._previousTime=t,this._peaks.player.isPlaying()&&(this._rAFHandle=dl(this._onAnimationFrame))};nt.prototype.onPlaying=function(){this._previousTime=this._peaks.player.getCurrentTime(),this._rAFHandle=dl(this._onAnimationFrame)};nt.prototype.onSeeked=function(t){this._previousTime=t,this._updateActiveSegments(t)};function fc(t){return function(i){return i.id===t}}nt.prototype._updateActiveSegments=function(t){var e=this,i=e._peaks.segments.getSegmentsAtTime(t);for(var n in e._activeSegments)if(te(e._activeSegments,n)){var r=i.find(fc(n));r||(e._peaks.emit("segments.exit",e._activeSegments[n]),delete e._activeSegments[n])}i.forEach(function(s){s.id in e._activeSegments||(e._activeSegments[s.id]=s,e._peaks.emit("segments.enter",s))})};var Nn=Array("points.update","points.dragmove","points.add","points.remove","points.remove_all","segments.update","segments.dragged","segments.add","segments.remove","segments.remove_all");nt.prototype._attachEventHandlers=function(){this._peaks.on("player.timeupdate",this._onTimeUpdate),this._peaks.on("player.playing",this._onPlaying),this._peaks.on("player.seeked",this._onSeeked);for(var t=0;t<Nn.length;t++)this._peaks.on(Nn[t],this._updateCues);this._updateCues()};nt.prototype._detachEventHandlers=function(){this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.seeked",this._onSeeked);for(var t=0;t<Nn.length;t++)this._peaks.off(Nn[t],this._updateCues)};nt.prototype.destroy=function(){this._rAFHandle&&(dc(this._rAFHandle),this._rAFHandle=null),this._detachEventHandlers(),this._previousTime=-1};var cc=["peaks","id","time","labelText","color","editable"];function ul(t,e){if(!Lt(t.time))throw new TypeError("peaks.points."+e+": time should be a numeric value");if(t.time<0)throw new RangeError("peaks.points."+e+": time should not be negative");if(dt(t.labelText))t.labelText="";else if(!$t(t.labelText))throw new TypeError("peaks.points."+e+": labelText must be a string");if(!hl(t.editable))throw new TypeError("peaks.points."+e+": editable must be true or false");if(t.color&&!$t(t.color)&&!dr(t.color))throw new TypeError("peaks.points."+e+": color must be a string or a valid linear gradient object")}function Ai(t){ul(t,"add()"),this._peaks=t.peaks,this._id=t.id,this._time=t.time,this._labelText=t.labelText,this._color=t.color,this._editable=t.editable,this._setUserData(t)}Ai.prototype._setUserData=function(t){for(var e in t)te(t,e)&&cc.indexOf(e)===-1&&(this[e]=t[e])};Object.defineProperties(Ai.prototype,{id:{enumerable:!0,get:function(){return this._id}},time:{enumerable:!0,get:function(){return this._time}},labelText:{get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}});Ai.prototype.update=function(t){var e={time:this.time,labelText:this.labelText,color:this.color,editable:this.editable};hr(e,t),ul(e,"update()"),this._time=e.time,this._labelText=e.labelText,this._color=e.color,this._editable=e.editable,this._setUserData(t),this._peaks.emit("points.update",this)};Ai.prototype.isVisible=function(t,e){return this.time>=t&&this.time<e};Ai.prototype._setTime=function(t){this._time=t};function Ge(t){this._peaks=t,this._points=[],this._pointsById={},this._pointIdCounter=0}Ge.prototype._getNextPointId=function(){return"peaks.point."+this._pointIdCounter++};Ge.prototype._addPoint=function(t){this._points.push(t),this._pointsById[t.id]=t};Ge.prototype._createPoint=function(t){var e={peaks:this._peaks};return hr(e,t),dt(e.id)&&(e.id=this._getNextPointId()),dt(e.labelText)&&(e.labelText=""),dt(e.editable)&&(e.editable=!1),new Ai(e)};Ge.prototype.getPoints=function(){return this._points};Ge.prototype.getPoint=function(t){return this._pointsById[t]||null};Ge.prototype.find=function(t,e){return this._points.filter(function(i){return i.isVisible(t,e)})};Ge.prototype.add=function(){var t=this,e=Array.isArray(arguments[0]),i=e?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(n){var r=t._createPoint(n);if(te(t._pointsById,r.id))throw new Error("peaks.points.add(): duplicate id");return r}),i.forEach(function(n){t._addPoint(n)}),this._peaks.emit("points.add",i),e?i:i[0]};Ge.prototype._findPoint=function(t){for(var e=[],i=0,n=this._points.length;i<n;i++)t(this._points[i])&&e.push(i);return e};Ge.prototype._removeIndexes=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i]-e.length,r=this._points.splice(n,1)[0];delete this._pointsById[r.id],e.push(r)}return e};Ge.prototype._removePoints=function(t){var e=this._findPoint(t),i=this._removeIndexes(e);return this._peaks.emit("points.remove",i),i};Ge.prototype.remove=function(t){return this._removePoints(function(e){return e===t})};Ge.prototype.removeById=function(t){return this._removePoints(function(e){return e.id===t})};Ge.prototype.removeByTime=function(t){return this._removePoints(function(e){return e.time===t})};Ge.prototype.removeAll=function(){this._points=[],this._pointsById={},this._peaks.emit("points.remove_all")};var pc=["peaks","id","startTime","endTime","labelText","color","editable"];function fl(t,e){if(!Lt(t.startTime))throw new TypeError("peaks.segments."+e+": startTime should be a valid number");if(!Lt(t.endTime))throw new TypeError("peaks.segments."+e+": endTime should be a valid number");if(t.startTime<0)throw new RangeError("peaks.segments."+e+": startTime should not be negative");if(t.endTime<0)throw new RangeError("peaks.segments."+e+": endTime should not be negative");if(t.endTime<t.startTime)throw new RangeError("peaks.segments."+e+": endTime should not be less than startTime");if(dt(t.labelText))t.labelText="";else if(!$t(t.labelText))throw new TypeError("peaks.segments."+e+": labelText must be a string");if(!hl(t.editable))throw new TypeError("peaks.segments."+e+": editable must be true or false");if(t.color&&!$t(t.color)&&!dr(t.color))throw new TypeError("peaks.segments."+e+": color must be a string or a valid linear gradient object")}function ei(t){fl(t,"add()"),this._peaks=t.peaks,this._id=t.id,this._startTime=t.startTime,this._endTime=t.endTime,this._labelText=t.labelText,this._color=t.color,this._editable=t.editable,this._setUserData(t)}ei.prototype._setUserData=function(t){for(var e in t)te(t,e)&&pc.indexOf(e)===-1&&(this[e]=t[e])};Object.defineProperties(ei.prototype,{id:{enumerable:!0,get:function(){return this._id}},startTime:{enumerable:!0,get:function(){return this._startTime}},endTime:{enumerable:!0,get:function(){return this._endTime}},labelText:{enumerable:!0,get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}});ei.prototype.update=function(t){var e={startTime:this.startTime,endTime:this.endTime,labelText:this.labelText,color:this.color,editable:this.editable};hr(e,t),fl(e,"update()"),this._startTime=e.startTime,this._endTime=e.endTime,this._labelText=e.labelText,this._color=e.color,this._editable=e.editable,this._setUserData(t),this._peaks.emit("segments.update",this)};ei.prototype.isVisible=function(t,e){return this.startTime<e&&t<this.endTime};ei.prototype._setStartTime=function(t){this._startTime=t};ei.prototype._setEndTime=function(t){this._endTime=t};function Pe(t){this._peaks=t,this._segments=[],this._segmentsById={},this._segmentIdCounter=0,this._colorIndex=0}Pe.prototype._getNextSegmentId=function(){return"peaks.segment."+this._segmentIdCounter++};var Ia=["#001f3f","#0074d9","#7fdbff","#39cccc","#ffdc00","#ff851b","#ff4136","#85144b","#f012be","#b10dc9"];Pe.prototype._getSegmentColor=function(){return this._peaks.options.randomizeSegmentColor?(++this._colorIndex===Ia.length&&(this._colorIndex=0),Ia[this._colorIndex]):this._peaks.options.segmentColor};Pe.prototype._addSegment=function(t){this._segments.push(t),this._segmentsById[t.id]=t};Pe.prototype._createSegment=function(t){if(!wi(t))throw new TypeError("peaks.segments.add(): expected a Segment object parameter");var e={peaks:this._peaks};return hr(e,t),dt(e.id)&&(e.id=this._getNextSegmentId()),dt(e.color)&&(e.color=this._getSegmentColor()),dt(e.labelText)&&(e.labelText=""),dt(e.editable)&&(e.editable=!1),new ei(e)};Pe.prototype.getSegments=function(){return this._segments};Pe.prototype.getSegment=function(t){return this._segmentsById[t]||null};Pe.prototype.getSegmentsAtTime=function(t){return this._segments.filter(function(e){return t>=e.startTime&&t<e.endTime})};Pe.prototype.find=function(t,e){return this._segments.filter(function(i){return i.isVisible(t,e)})};Pe.prototype.add=function(){var t=this,e=Array.isArray(arguments[0]),i=e?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(n){var r=t._createSegment(n);if(te(t._segmentsById,r.id))throw new Error("peaks.segments.add(): duplicate id");return r}),i.forEach(function(n){t._addSegment(n)}),this._peaks.emit("segments.add",i),e?i:i[0]};Pe.prototype._findSegment=function(t){for(var e=[],i=0,n=this._segments.length;i<n;i++)t(this._segments[i])&&e.push(i);return e};Pe.prototype._removeIndexes=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i]-e.length,r=this._segments.splice(n,1)[0];delete this._segmentsById[r.id],e.push(r)}return e};Pe.prototype._removeSegments=function(t){var e=this._findSegment(t),i=this._removeIndexes(e);return this._peaks.emit("segments.remove",i),i};Pe.prototype.remove=function(t){return this._removeSegments(function(e){return e===t})};Pe.prototype.removeById=function(t){return this._removeSegments(function(e){return e.id===t})};Pe.prototype.removeByTime=function(t,e){e=typeof e=="number"?e:0;var i;return e>0?i=function(r){return r.startTime===t&&r.endTime===e}:i=function(r){return r.startTime===t},this._removeSegments(i)};Pe.prototype.removeAll=function(){this._segments=[],this._segmentsById={},this._peaks.emit("segments.remove_all")};var _c=["OBJECT","TEXTAREA","INPUT","SELECT","OPTION"],cl=32,pl=9,_l=37,gl=39,gc=[cl,pl,_l,gl];function xs(t){this.eventEmitter=t,this._handleKeyEvent=this._handleKeyEvent.bind(this),document.addEventListener("keydown",this._handleKeyEvent),document.addEventListener("keypress",this._handleKeyEvent),document.addEventListener("keyup",this._handleKeyEvent)}xs.prototype._handleKeyEvent=function(e){if(_c.indexOf(e.target.nodeName)===-1){if(gc.indexOf(e.type)>-1&&e.preventDefault(),e.type==="keydown"||e.type==="keypress")switch(e.keyCode){case cl:this.eventEmitter.emit("keyboard.space");break;case pl:this.eventEmitter.emit("keyboard.tab");break}else if(e.type==="keyup")switch(e.keyCode){case _l:e.shiftKey?this.eventEmitter.emit("keyboard.shift_left"):this.eventEmitter.emit("keyboard.left");break;case gl:e.shiftKey?this.eventEmitter.emit("keyboard.shift_right"):this.eventEmitter.emit("keyboard.right");break}}};xs.prototype.destroy=function(){document.removeEventListener("keydown",this._handleKeyEvent),document.removeEventListener("keypress",this._handleKeyEvent),document.removeEventListener("keyup",this._handleKeyEvent)};function $e(t){this._mediaElement=t}$e.prototype._addMediaListener=function(t,e){this._listeners.push({type:t,callback:e}),this._mediaElement.addEventListener(t,e)};$e.prototype.init=function(t){var e=this;return e._eventEmitter=t,e._listeners=[],e._duration=e.getDuration(),e._addMediaListener("timeupdate",function(){e._eventEmitter.emit("player.timeupdate",e.getCurrentTime())}),e._addMediaListener("playing",function(){e._eventEmitter.emit("player.playing",e.getCurrentTime())}),e._addMediaListener("pause",function(){e._eventEmitter.emit("player.pause",e.getCurrentTime())}),e._addMediaListener("ended",function(){e._eventEmitter.emit("player.ended")}),e._addMediaListener("seeked",function(){e._eventEmitter.emit("player.seeked",e.getCurrentTime())}),e._addMediaListener("canplay",function(){e._eventEmitter.emit("player.canplay")}),e._addMediaListener("error",function(i){e._eventEmitter.emit("player.error",i.target.error)}),e._interval=null,new Promise(function(i,n){function r(s){e._mediaElement.removeEventListener("loadedmetadata",r),e._mediaElement.removeEventListener("error",r),s.type==="loadedmetadata"?i():n(s.target.error)}e._mediaElement.readyState===HTMLMediaElement.HAVE_NOTHING?(e._mediaElement.addEventListener("loadedmetadata",r),e._mediaElement.addEventListener("error",r),e._mediaElement.load()):i()})};$e.prototype.destroy=function(){for(var t=0;t<this._listeners.length;t++){var e=this._listeners[t];this._mediaElement.removeEventListener(e.type,e.callback)}this._listeners.length=0,this._mediaElement=null};$e.prototype.play=function(){return this._mediaElement.play()};$e.prototype.pause=function(){this._mediaElement.pause()};$e.prototype.isPlaying=function(){return!this._mediaElement.paused};$e.prototype.isSeeking=function(){return this._mediaElement.seeking};$e.prototype.getCurrentTime=function(){return this._mediaElement.currentTime};$e.prototype.getDuration=function(){return this._mediaElement.duration};$e.prototype.seek=function(t){this._mediaElement.currentTime=t};function nn(t,e){this._eventEmitter=t,this._mediaElement=e,this._playerCanPlayHandler=this._playerCanPlayHandler.bind(this),this._playerErrorHandler=this._playerErrorHandler.bind(this)}nn.prototype.setSource=function(t,e){var i=this;return i._options=t,i._callback=e,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),new Promise(function(n,r){i._resolve=n,i._reject=r,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),i._mediaElement.setAttribute("src",t.mediaUrl)})};nn.prototype._reset=function(){this._eventEmitter.removeListener("player.canplay",this._playerCanPlayHandler),this._eventEmitter.removeListener("player.error",this._playerErrorHandler)};nn.prototype._playerCanPlayHandler=function(){this._reset(),this._resolve()};nn.prototype._playerErrorHandler=function(t){this._reset(),this._reject(t)};$e.prototype.setSource=function(t){if(!t.mediaUrl)return Promise.reject(new Error("peaks.setSource(): options must contain a mediaUrl when using mediaElement"));var e=new nn(this._eventEmitter,this._mediaElement);return e.setSource(t)};function mc(t){for(var e=[],i=t;i;)Object.getOwnPropertyNames(i).forEach(function(n){e.push(n)}),i=Object.getPrototypeOf(i);return e}function vc(t){var e=["init","destroy","play","pause","isPlaying","isSeeking","getCurrentTime","getDuration","seek"],i=mc(t);e.forEach(function(n){if(!i.includes(n))throw new TypeError("Peaks.init(): Player method "+n+" is undefined");if(typeof t[n]!="function")throw new TypeError("Peaks.init(): Player method "+n+" is not a function")})}function Ue(t,e){this._peaks=t,this._playingSegment=!1,this._segment=null,this._loop=!1,this._playSegmentTimerCallback=this._playSegmentTimerCallback.bind(this),vc(e),this._adapter=e}Ue.prototype.init=function(){return this._adapter.init(this._peaks)};Ue.prototype.destroy=function(){this._adapter.destroy()};Ue.prototype.play=function(){return this._adapter.play()};Ue.prototype.pause=function(){this._adapter.pause()};Ue.prototype.isPlaying=function(){return this._adapter.isPlaying()};Ue.prototype.isSeeking=function(){return this._adapter.isSeeking()};Ue.prototype.getCurrentTime=function(){return this._adapter.getCurrentTime()};Ue.prototype.getDuration=function(){return this._adapter.getDuration()};Ue.prototype.seek=function(t){if(!Lt(t)){this._peaks._logger("peaks.player.seek(): parameter must be a valid time, in seconds");return}this._adapter.seek(t)};Ue.prototype.playSegment=function(t,e){var i=this;return!t||!Lt(t.startTime)||!Lt(t.endTime)?Promise.reject(new Error("peaks.player.playSegment(): parameter must be a segment object")):(i._segment=t,i._loop=e,i.seek(t.startTime),i._peaks.once("player.playing",function(){i._playingSegment||(i._playingSegment=!0,window.requestAnimationFrame(i._playSegmentTimerCallback))}),i.play())};Ue.prototype._playSegmentTimerCallback=function(){if(this.isPlaying()){if(this.getCurrentTime()>=this._segment.endTime)if(this._loop)this.seek(this._segment.startTime);else{this.pause(),this._peaks.emit("player.ended"),this._playingSegment=!1;return}}else{this._playingSegment=!1;return}window.requestAnimationFrame(this._playSegmentTimerCallback)};Ue.prototype._setSource=function(t){return this._adapter.setSource(t)};function rn(t){this._options=t}rn.prototype.init=function(t){var e=10,i=20,n=-(e/2)+.5;this._options.view==="zoomview"&&(this._label=new ue({x:2,y:0,text:this._options.point.labelText,textAlign:"left",fontFamily:this._options.fontFamily||"sans-serif",fontSize:this._options.fontSize||10,fontStyle:this._options.fontStyle||"normal",fill:"#000"})),this._options.draggable&&(this._handle=new ki({x:n,y:0,width:e,height:i,fill:this._options.color})),this._line=new ut({x:0,y:0,stroke:this._options.color,strokeWidth:1}),this._handle&&(this._time=new ue({x:-24,y:0,text:this._options.layer.formatTime(this._options.point.time),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._time.hide()),this._handle&&t.add(this._handle),t.add(this._line),this._label&&t.add(this._label),this._time&&t.add(this._time),this.fitToView(),this.bindEventHandlers(t)};rn.prototype.bindEventHandlers=function(t){var e=this;e._handle&&(e._handle.on("mouseover touchstart",function(){e._time.setX(-24-e._time.getWidth()),e._time.show()}),e._handle.on("mouseout touchend",function(){e._time.hide()}),t.on("dragstart",function(){e._time.setX(-24-e._time.getWidth()),e._time.show()}),t.on("dragend",function(){e._time.hide()}))};rn.prototype.fitToView=function(){var t=this._options.layer.getHeight();this._line.points([.5,0,.5,t]),this._label&&this._label.y(12),this._handle&&this._handle.y(t/2-10.5),this._time&&this._time.y(t/2-5)};rn.prototype.timeUpdated=function(t){this._time&&this._time.setText(this._options.layer.formatTime(t))};function sn(t){this._options=t}sn.prototype.init=function(t){var e=10,i=20,n=-(e/2)+.5,r=this._options.startMarker?-24:24,s=this._options.startMarker?this._options.segment.startTime:this._options.segment.endTime;this._label=new ue({x:r,y:0,text:this._options.layer.formatTime(s),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._label.hide(),this._handle=new ki({x:n,y:0,width:e,height:i,fill:this._options.color,stroke:this._options.color,strokeWidth:1}),this._line=new ut({x:0,y:0,stroke:this._options.color,strokeWidth:1}),t.add(this._label),t.add(this._line),t.add(this._handle),this.fitToView(),this.bindEventHandlers(t)};sn.prototype.bindEventHandlers=function(t){var e=this,i=e._options.startMarker?-24:24;e._options.draggable&&(t.on("dragstart",function(){e._options.startMarker&&e._label.setX(i-e._label.getWidth()),e._label.show()}),t.on("dragend",function(){e._label.hide()})),e._handle.on("mouseover touchstart",function(){e._options.startMarker&&e._label.setX(i-e._label.getWidth()),e._label.show()}),e._handle.on("mouseout touchend",function(){e._label.hide()})};sn.prototype.fitToView=function(){var t=this._options.layer.getHeight();this._label.y(t/2-5),this._handle.y(t/2-10.5),this._line.points([.5,0,.5,t])};sn.prototype.timeUpdated=function(t){this._label.setText(this._options.layer.formatTime(t))};function yc(t){return t.view==="zoomview"?new sn(t):null}function wc(t){return new ue({x:12,y:12,text:t.segment.labelText,textAlign:"center",fontFamily:t.fontFamily||"sans-serif",fontSize:t.fontSize||12,fontStyle:t.fontStyle||"normal",fill:"#000"})}function bc(t){return new rn(t)}function Wt(t,e,i){this._view=t,this._offset=e,this._color=i,this._layer=new ke.Layer({listening:!1}),this._highlightRect=null,this._startTime=null,this._endTime=null}Wt.prototype.addToStage=function(t){t.add(this._layer)};Wt.prototype.showHighlight=function(t,e){this._highlightRect||this._createHighlightRect(t,e),this._update(t,e)};Wt.prototype._update=function(t,e){this._startTime=t,this._endTime=e;var i=this._view.timeToPixels(t),n=this._view.timeToPixels(e);this._highlightRect.setAttrs({x:i,width:n-i})};Wt.prototype._createHighlightRect=function(t,e){this._startTime=t,this._endTime=e;var i=this._view.timeToPixels(t),n=this._view.timeToPixels(e);this._highlightRect=new ki({x:i,y:0,width:n-i,stroke:this._color,strokeWidth:1,height:0,fill:this._color,opacity:.3,cornerRadius:2}),this.fitToView(),this._layer.add(this._highlightRect)};Wt.prototype.removeHighlight=function(){this._highlightRect&&(this._highlightRect.destroy(),this._highlightRect=null)};Wt.prototype.updateHighlight=function(){this._highlightRect&&this._update(this._startTime,this._endTime)};Wt.prototype.fitToView=function(){if(this._highlightRect){var t=this._view.getHeight(),e=Qt(this._offset,0,Math.floor(t/2));this._highlightRect.setAttrs({y:e,height:t-e*2})}};function Cc(t){for(;t.parent!==null;){if(t.parent instanceof ke.Layer)return t;t=t.parent}return null}function ti(t,e){this._stage=t,this._handlers=e,this._dragging=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseUp=this._mouseUp.bind(this),this._mouseMove=this._mouseMove.bind(this),this._stage.on("mousedown",this._mouseDown),this._stage.on("touchstart",this._mouseDown),this._lastMouseClientX=null}ti.prototype._mouseDown=function(t){if(!(t.type==="mousedown"&&t.evt.button!==0)){var e=Cc(t.target);if(!(e&&e.attrs.draggable)){if(this._lastMouseClientX=Math.floor(t.type==="touchstart"?t.evt.touches[0].clientX:t.evt.clientX),this._handlers.onMouseDown){var i=this._getMousePosX(this._lastMouseClientX);this._handlers.onMouseDown(i)}window.addEventListener("mousemove",this._mouseMove,!1),window.addEventListener("touchmove",this._mouseMove,!1),window.addEventListener("mouseup",this._mouseUp,!1),window.addEventListener("touchend",this._mouseUp,!1),window.addEventListener("blur",this._mouseUp,!1)}}};ti.prototype._mouseMove=function(t){var e=Math.floor(t.type==="touchmove"?t.changedTouches[0].clientX:t.clientX);if(e!==this._lastMouseClientX&&(this._lastMouseClientX=e,this._dragging=!0,this._handlers.onMouseMove)){var i=this._getMousePosX(e);this._handlers.onMouseMove(i)}};ti.prototype._mouseUp=function(t){var e;if(t.type==="touchend"?(e=Math.floor(t.changedTouches[0].clientX),t.cancelable&&t.preventDefault()):e=Math.floor(t.clientX),this._handlers.onMouseUp){var i=this._getMousePosX(e);this._handlers.onMouseUp(i)}window.removeEventListener("mousemove",this._mouseMove,!1),window.removeEventListener("touchmove",this._mouseMove,!1),window.removeEventListener("mouseup",this._mouseUp,!1),window.removeEventListener("touchend",this._mouseUp,!1),window.removeEventListener("blur",this._mouseUp,!1),this._dragging=!1};ti.prototype._getMousePosX=function(t){var e=this._stage.getContainer().getBoundingClientRect();return t-e.left};ti.prototype.isDragging=function(){return this._dragging};function Re(t){this._player=t.player,this._view=t.view,this._playheadPixel=0,this._playheadLineAnimation=null,this._playheadVisible=!1,this._playheadColor=t.playheadColor,this._playheadTextColor=t.playheadTextColor,this._playheadFontFamily=t.playheadFontFamily,this._playheadFontSize=t.playheadFontSize,this._playheadFontStyle=t.playheadFontStyle,this._playheadLayer=new ke.Layer,this._createPlayhead(this._playheadColor),t.showPlayheadTime&&this._createPlayheadText(this._playheadTextColor),this.fitToView(),this.zoomLevelChanged()}Re.prototype.addToStage=function(t){t.add(this._playheadLayer)};Re.prototype.zoomLevelChanged=function(){var t=this._view.timeToPixels(1),e;this._useAnimation=t>=5,this._useAnimation?this._player.isPlaying()&&!this._playheadLineAnimation&&this._start():this._playheadLineAnimation&&(e=this._player.getCurrentTime(),this.stop(e))};Re.prototype.fitToView=function(){var t=this._view.getHeight();this._playheadLine.points([.5,0,.5,t]),this._playheadText&&this._playheadText.y(12)};Re.prototype._createPlayhead=function(t){this._playheadLine=new ut({stroke:t,strokeWidth:1}),this._playheadGroup=new ke.Group({x:0,y:0}),this._playheadGroup.add(this._playheadLine),this._playheadLayer.add(this._playheadGroup)};Re.prototype._createPlayheadText=function(t){var e=this._player.getCurrentTime(),i=this._view.formatTime(e);this._playheadText=new ue({x:2,y:0,text:i,fontSize:this._playheadFontSize,fontFamily:this._playheadFontFamily,fontStyle:this._playheadFontStyle,fill:t,align:"right"}),this._playheadGroup.add(this._playheadText)};Re.prototype.updatePlayheadTime=function(t){this._syncPlayhead(t),this._player.isPlaying()&&this._start()};Re.prototype._syncPlayhead=function(t){var e=this._view.timeToPixels(t),i=this._view.getFrameOffset(),n=this._view.getWidth(),r=e>=i&&e<=i+n;if(this._playheadPixel=e,r){var s=this._playheadPixel-i;if(this._playheadVisible||(this._playheadVisible=!0,this._playheadGroup.show()),this._playheadGroup.setX(s),this._playheadText){var a=this._view.formatTime(t),o=this._playheadText.getTextWidth();this._playheadText.setText(a),o+s>n-2?this._playheadText.setX(-o-2):o+s<n&&this._playheadText.setX(2)}}else this._playheadVisible&&(this._playheadVisible=!1,this._playheadGroup.hide());this._view.playheadPosChanged&&this._view.playheadPosChanged(t)};Re.prototype._start=function(){var t=this;if(t._playheadLineAnimation&&(t._playheadLineAnimation.stop(),t._playheadLineAnimation=null),!!t._useAnimation){var e=null;t._playheadLineAnimation=new Ye(function(){var i=t._player.getCurrentTime(),n=t._view.timeToPixels(i);n!==e&&(t._syncPlayhead(i),e=n)},t._playheadLayer),t._playheadLineAnimation.start()}};Re.prototype.stop=function(t){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null),this._syncPlayhead(t)};Re.prototype.getPlayheadOffset=function(){return this._playheadPixel-this._view.getFrameOffset()};Re.prototype.getPlayheadPixel=function(){return this._playheadPixel};Re.prototype.showPlayheadTime=function(t){t?this._playheadText||(this._createPlayheadText(this._playheadTextColor),this.fitToView()):this._playheadText&&(this._playheadText.remove(),this._playheadText.destroy(),this._playheadText=null)};Re.prototype.updatePlayheadText=function(){if(this._playheadText){var t=this._player.getCurrentTime(),e=this._view.formatTime(t);this._playheadText.setText(e)}};Re.prototype.destroy=function(){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null)};function rt(t){this._point=t.point,this._marker=t.marker,this._draggable=t.draggable,this._onClick=t.onClick,this._onDblClick=t.onDblClick,this._onDragStart=t.onDragStart,this._onDragMove=t.onDragMove,this._onDragEnd=t.onDragEnd,this._onMouseEnter=t.onMouseEnter,this._onMouseLeave=t.onMouseLeave,this._onContextMenu=t.onContextMenu,this._dragBoundFunc=this._dragBoundFunc.bind(this),this._group=new ke.Group({draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}rt.prototype._bindDefaultEventHandlers=function(){var t=this;t._group.on("dragstart",function(e){t._onDragStart(e,t._point)}),t._group.on("dragmove",function(e){t._onDragMove(e,t._point)}),t._group.on("dragend",function(e){t._onDragEnd(e,t._point)}),t._group.on("click",function(e){t._onClick(e,t._point)}),t._group.on("dblclick",function(e){t._onDblClick(e,t._point)}),t._group.on("mouseenter",function(e){t._onMouseEnter(e,t._point)}),t._group.on("mouseleave",function(e){t._onMouseLeave(e,t._point)}),t._group.on("contextmenu",function(e){t._onContextMenu(e,t._point)})};rt.prototype._dragBoundFunc=function(t){return{x:t.x,y:this._group.getAbsolutePosition().y}};rt.prototype.addToLayer=function(t){t.add(this._group)};rt.prototype.fitToView=function(){this._marker.fitToView()};rt.prototype.getPoint=function(){return this._point};rt.prototype.getX=function(){return this._group.getX()};rt.prototype.getWidth=function(){return this._group.getWidth()};rt.prototype.setX=function(t){this._group.setX(t)};rt.prototype.timeUpdated=function(t){this._marker.timeUpdated&&this._marker.timeUpdated(t)};rt.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};var Sc="sans-serif",Tc=10,xc="normal";function ne(t,e,i){this._peaks=t,this._view=e,this._allowEditing=i,this._pointMarkers={},this._layer=new ke.Layer,this._onPointsDrag=this._onPointsDrag.bind(this),this._onPointHandleClick=this._onPointHandleClick.bind(this),this._onPointHandleDblClick=this._onPointHandleDblClick.bind(this),this._onPointHandleDragStart=this._onPointHandleDragStart.bind(this),this._onPointHandleDragMove=this._onPointHandleDragMove.bind(this),this._onPointHandleDragEnd=this._onPointHandleDragEnd.bind(this),this._onPointHandleMouseEnter=this._onPointHandleMouseEnter.bind(this),this._onPointHandleMouseLeave=this._onPointHandleMouseLeave.bind(this),this._onPointHandleContextMenu=this._onPointHandleContextMenu.bind(this),this._onPointsUpdate=this._onPointsUpdate.bind(this),this._onPointsAdd=this._onPointsAdd.bind(this),this._onPointsRemove=this._onPointsRemove.bind(this),this._onPointsRemoveAll=this._onPointsRemoveAll.bind(this),this._peaks.on("points.update",this._onPointsUpdate),this._peaks.on("points.add",this._onPointsAdd),this._peaks.on("points.remove",this._onPointsRemove),this._peaks.on("points.remove_all",this._onPointsRemoveAll),this._peaks.on("points.dragstart",this._onPointsDrag),this._peaks.on("points.dragmove",this._onPointsDrag),this._peaks.on("points.dragend",this._onPointsDrag)}ne.prototype.addToStage=function(t){t.add(this._layer)};ne.prototype.enableEditing=function(t){this._allowEditing=t};ne.prototype.formatTime=function(t){return this._view.formatTime(t)};ne.prototype._onPointsUpdate=function(t){var e=this._view.getStartTime(),i=this._view.getEndTime();this._removePoint(t),t.isVisible(e,i)&&this._addPointMarker(t),this.updatePoints(e,i)};ne.prototype._onPointsAdd=function(t){var e=this,i=e._view.getStartTime(),n=e._view.getEndTime();t.forEach(function(r){r.isVisible(i,n)&&e._addPointMarker(r)}),e.updatePoints(i,n)};ne.prototype._onPointsRemove=function(t){var e=this;t.forEach(function(i){e._removePoint(i)})};ne.prototype._onPointsRemoveAll=function(){this._layer.removeChildren(),this._pointMarkers={}};ne.prototype._onPointsDrag=function(t){this._updatePoint(t.point)};ne.prototype._createPointMarker=function(t){var e=this._allowEditing&&t.editable,i=this._peaks.options.createPointMarker({point:t,draggable:e,color:t.color?t.color:this._peaks.options.pointMarkerColor,fontFamily:this._peaks.options.fontFamily||Sc,fontSize:this._peaks.options.fontSize||Tc,fontStyle:this._peaks.options.fontStyle||xc,layer:this,view:this._view.getName()});return new rt({point:t,draggable:e,marker:i,onClick:this._onPointHandleClick,onDblClick:this._onPointHandleDblClick,onDragStart:this._onPointHandleDragStart,onDragMove:this._onPointHandleDragMove,onDragEnd:this._onPointHandleDragEnd,onMouseEnter:this._onPointHandleMouseEnter,onMouseLeave:this._onPointHandleMouseLeave,onContextMenu:this._onPointHandleContextMenu})};ne.prototype.getHeight=function(){return this._view.getHeight()};ne.prototype._addPointMarker=function(t){var e=this._createPointMarker(t);return this._pointMarkers[t.id]=e,e.addToLayer(this._layer),e};ne.prototype._onPointHandleDragMove=function(t,e){var i=this._pointMarkers[e.id],n=i.getX();if(n>=0&&n<this._view.getWidth()){var r=n+i.getWidth();e._setTime(this._view.pixelOffsetToTime(r)),i.timeUpdated(e.time)}this._peaks.emit("points.dragmove",{point:e,evt:t.evt})};ne.prototype._onPointHandleMouseEnter=function(t,e){this._peaks.emit("points.mouseenter",{point:e,evt:t.evt})};ne.prototype._onPointHandleMouseLeave=function(t,e){this._peaks.emit("points.mouseleave",{point:e,evt:t.evt})};ne.prototype._onPointHandleClick=function(t,e){this._peaks.emit("points.click",{point:e,evt:t.evt})};ne.prototype._onPointHandleDblClick=function(t,e){this._peaks.emit("points.dblclick",{point:e,evt:t.evt})};ne.prototype._onPointHandleDragStart=function(t,e){this._peaks.emit("points.dragstart",{point:e,evt:t.evt})};ne.prototype._onPointHandleDragEnd=function(t,e){this._peaks.emit("points.dragend",{point:e,evt:t.evt})};ne.prototype._onPointHandleContextMenu=function(t,e){this._peaks.emit("points.contextmenu",{point:e,evt:t.evt})};ne.prototype.updatePoints=function(t,e){var i=this._peaks.points.find(t,e);i.forEach(this._updatePoint.bind(this)),this._removeInvisiblePoints(t,e)};ne.prototype._updatePoint=function(t){var e=this._findOrAddPointMarker(t),i=this._view.timeToPixels(t.time),n=i-this._view.getFrameOffset();e.setX(n)};ne.prototype._findOrAddPointMarker=function(t){var e=this._pointMarkers[t.id];return e||(e=this._addPointMarker(t)),e};ne.prototype._removeInvisiblePoints=function(t,e){var i=0;for(var n in this._pointMarkers)if(te(this._pointMarkers,n)){var r=this._pointMarkers[n].getPoint();r.isVisible(t,e)||(this._removePoint(r),i++)}return i};ne.prototype._removePoint=function(t){var e=this._pointMarkers[t.id];e&&(e.destroy(),delete this._pointMarkers[t.id])};ne.prototype.setVisible=function(t){this._layer.setVisible(t)};ne.prototype.destroy=function(){this._peaks.off("points.update",this._onPointsUpdate),this._peaks.off("points.add",this._onPointsAdd),this._peaks.off("points.remove",this._onPointsRemove),this._peaks.off("points.remove_all",this._onPointsRemoveAll),this._peaks.off("points.dragstart",this._onPointsDrag),this._peaks.off("points.dragmove",this._onPointsDrag),this._peaks.off("points.dragend",this._onPointsDrag)};ne.prototype.fitToView=function(){for(var t in this._pointMarkers)if(te(this._pointMarkers,t)){var e=this._pointMarkers[t];e.fitToView()}};ne.prototype.draw=function(){this._layer.draw()};function Ne(t){this._segment=t.segment,this._marker=t.marker,this._segmentShape=t.segmentShape,this._draggable=t.draggable,this._startMarker=t.startMarker,this._onDrag=t.onDrag,this._onDragStart=t.onDragStart,this._onDragEnd=t.onDragEnd,this._dragBoundFunc=this._dragBoundFunc.bind(this),this._group=new ke.Group({draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}Ne.prototype._bindDefaultEventHandlers=function(){var t=this;t._draggable&&(t._group.on("dragmove",function(e){t._onDrag(e,t)}),t._group.on("dragstart",function(e){t._onDragStart(e,t)}),t._group.on("dragend",function(e){t._onDragEnd(e,t)}))};Ne.prototype._dragBoundFunc=function(t){var e,i;return this._startMarker?(e=this._segmentShape.getEndMarker(),i=e.getX()-e.getWidth(),t.x>i&&(t.x=i)):(e=this._segmentShape.getStartMarker(),i=e.getX()+e.getWidth(),t.x<i&&(t.x=i)),{x:t.x,y:this._group.getAbsolutePosition().y}};Ne.prototype.addToLayer=function(t){t.add(this._group)};Ne.prototype.fitToView=function(){this._marker.fitToView()};Ne.prototype.getSegment=function(){return this._segment};Ne.prototype.getX=function(){return this._group.getX()};Ne.prototype.getWidth=function(){return this._group.getWidth()};Ne.prototype.isStartMarker=function(){return this._startMarker};Ne.prototype.setX=function(t){this._group.setX(t)};Ne.prototype.timeUpdated=function(t){this._marker.timeUpdated&&this._marker.timeUpdated(t)};Ne.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};function Te(t){this._color=t.color;var e={};if($t(t.color))e.fill=t.color;else if(dr(t.color)){var i=t.view._height*(t.color.linearGradientStart/100),n=t.view._height*(t.color.linearGradientEnd/100);e.fillLinearGradientStartPointY=i,e.fillLinearGradientEndPointY=n,e.fillLinearGradientColorStops=[0,t.color.linearGradientColorStops[0],1,t.color.linearGradientColorStops[1]]}else throw new TypeError("Unknown type for color property");this._shape=new ke.Shape(e),this._view=t.view,this._segment=t.segment,this._shape.sceneFunc(this._sceneFunc.bind(this)),this._shape.hitFunc(this._waveformShapeHitFunc.bind(this))}Te.prototype.setSegment=function(t){this._segment=t};Te.prototype.setWaveformColor=function(t){if($t(t))this._shape.fill(t),this._shape.fillLinearGradientStartPointY(null),this._shape.fillLinearGradientEndPointY(null),this._shape.fillLinearGradientColorStops(null);else if(dr(t)){this._shape.fill(null);var e=this._view._height*(t.linearGradientStart/100),i=this._view._height*(t.linearGradientEnd/100);this._shape.fillLinearGradientStartPointY(e),this._shape.fillLinearGradientEndPointY(i),this._shape.fillLinearGradientColorStops([0,t.linearGradientColorStops[0],1,t.linearGradientColorStops[1]])}else throw new TypeError("Unknown type for color property")};Te.prototype.fitToView=function(){this.setWaveformColor(this._color)};Te.prototype._sceneFunc=function(t){var e=this._view.getFrameOffset(),i=this._view.getWidth(),n=this._view.getHeight();this._drawWaveform(t,this._view.getWaveformData(),e,this._segment?this._view.timeToPixels(this._segment.startTime):e,this._segment?this._view.timeToPixels(this._segment.endTime):e+i,i,n)};Te.prototype._drawWaveform=function(t,e,i,n,r,s,a){n<i&&(n=i);var o=i+s;r>o&&(r=o),r>e.length-1&&(r=e.length-1);for(var l=e.channels,h=0,d=Math.floor(a/l),f=0;f<l;f++)f===l-1&&(d=a-(l-1)*d),this._drawChannel(t,e.channel(f),i,n,r,h,d),h+=d};Te.prototype._drawChannel=function(t,e,i,n,r,s,a){var o,l,h=this._view.getAmplitudeScale(),d,f;for(t.beginPath(),o=n;o<=r;o++)l=e.min_sample(o),d=o-i+.5,f=s+Te.scaleY(l,a,h)+.5,t.lineTo(d,f);for(o=r;o>=n;o--)l=e.max_sample(o),d=o-i+.5,f=s+Te.scaleY(l,a,h)+1,t.lineTo(d,f);t.closePath(),t.fillShape(this._shape)};Te.prototype._waveformShapeHitFunc=function(t){if(!!this._segment){var e=this._view.getFrameOffset(),i=this._view.getWidth(),n=this._view.getHeight(),r=this._view.timeToPixels(this._segment.startTime),s=this._view.timeToPixels(this._segment.endTime),a=10,o=n-2*a;o<0&&(o=0);var l=r-e,h=s-r;l<0&&(h-=-l,l=0),l+h>i&&(h-=l+h-i),t.beginPath(),t.rect(l,a,h,o),t.closePath(),t.fillStrokeShape(this._shape)}};Te.prototype.addToLayer=function(t){t.add(this._shape)};Te.prototype.destroy=function(){this._shape.destroy(),this._shape=null};Te.prototype.on=function(t,e){this._shape.on(t,e)};Te.scaleY=function(t,e,i){var n=-(e-1)*(t*i+128)/255+(e-1);return Qt(Math.floor(n),0,e-1)};var La="sans-serif",Ma=10,Da="normal";function Ee(t,e,i,n){this._segment=t,this._peaks=e,this._layer=i,this._view=n,this._label=null,this._startMarker=null,this._endMarker=null,this._color=t.color,this._waveformShape=new Te({color:t.color,view:n,segment:t}),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onClick=this._onClick.bind(this),this._onDblClick=this._onDblClick.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._waveformShape.on("mouseenter",this._onMouseEnter),this._waveformShape.on("mouseleave",this._onMouseLeave),this._waveformShape.on("click",this._onClick),this._waveformShape.on("dblclick",this._onDblClick),this._waveformShape.on("contextmenu",this._onContextMenu),this._onSegmentHandleDrag=this._onSegmentHandleDrag.bind(this),this._onSegmentHandleDragStart=this._onSegmentHandleDragStart.bind(this),this._onSegmentHandleDragEnd=this._onSegmentHandleDragEnd.bind(this),this._label=this._peaks.options.createSegmentLabel({segment:t,view:this._view.getName(),layer:this._layer,fontFamily:this._peaks.options.fontFamily,fontSize:this._peaks.options.fontSize,fontStyle:this._peaks.options.fontStyle}),this._label&&this._label.hide(),this._createMarkers()}Ee.prototype.updatePosition=function(){var t=this._view.timeToPixels(this._segment.startTime),e=this._view.timeToPixels(this._segment.endTime),i=this._view.getFrameOffset(),n=t-i,r=e-i,s=this.getStartMarker();s&&s.setX(n-s.getWidth()),s=this.getEndMarker(),s&&s.setX(r)};Ee.prototype.getSegment=function(){return this._segment};Ee.prototype.getStartMarker=function(){return this._startMarker};Ee.prototype.getEndMarker=function(){return this._endMarker};Ee.prototype.addToLayer=function(t){this._waveformShape.addToLayer(t),this._label&&t.add(this._label),this._startMarker&&this._startMarker.addToLayer(t),this._endMarker&&this._endMarker.addToLayer(t)};Ee.prototype._createMarkers=function(){var t=this._layer.isEditingEnabled()&&this._segment.editable;if(!!t){var e=this._peaks.options.createSegmentMarker({segment:this._segment,draggable:t,startMarker:!0,color:this._peaks.options.segmentStartMarkerColor,fontFamily:this._peaks.options.fontFamily||La,fontSize:this._peaks.options.fontSize||Ma,fontStyle:this._peaks.options.fontStyle||Da,layer:this._layer,view:this._view.getName()});e&&(this._startMarker=new Ne({segment:this._segment,segmentShape:this,draggable:t,startMarker:!0,marker:e,onDrag:this._onSegmentHandleDrag,onDragStart:this._onSegmentHandleDragStart,onDragEnd:this._onSegmentHandleDragEnd}));var i=this._peaks.options.createSegmentMarker({segment:this._segment,draggable:t,startMarker:!1,color:this._peaks.options.segmentEndMarkerColor,fontFamily:this._peaks.options.fontFamily||La,fontSize:this._peaks.options.fontSize||Ma,fontStyle:this._peaks.options.fontStyle||Da,layer:this._layer,view:this._view.getName()});i&&(this._endMarker=new Ne({segment:this._segment,segmentShape:this,draggable:t,startMarker:!1,marker:i,onDrag:this._onSegmentHandleDrag,onDragStart:this._onSegmentHandleDragStart,onDragEnd:this._onSegmentHandleDragEnd}))}};Ee.prototype._onMouseEnter=function(t){this._label&&(this._label.moveToTop(),this._label.show()),this._peaks.emit("segments.mouseenter",{segment:this._segment,evt:t.evt})};Ee.prototype._onMouseLeave=function(t){this._label&&this._label.hide(),this._peaks.emit("segments.mouseleave",{segment:this._segment,evt:t.evt})};Ee.prototype._onClick=function(t){this._peaks.emit("segments.click",{segment:this._segment,evt:t.evt})};Ee.prototype._onDblClick=function(t){this._peaks.emit("segments.dblclick",{segment:this._segment,evt:t.evt})};Ee.prototype._onContextMenu=function(t){this._peaks.emit("segments.contextmenu",{segment:this._segment,evt:t.evt})};Ee.prototype._onSegmentHandleDrag=function(t,e){var i=this._view.getWidth(),n=e.isStartMarker(),r=this._startMarker.getX(),s=this._endMarker.getX();if(n&&r>=0){var a=r+this._startMarker.getWidth();this._segment._setStartTime(this._view.pixelOffsetToTime(a)),e.timeUpdated(this._segment.startTime)}if(!n&&s<i){var o=s;this._segment._setEndTime(this._view.pixelOffsetToTime(o)),e.timeUpdated(this._segment.endTime)}this._peaks.emit("segments.dragged",{segment:this._segment,startMarker:n,evt:t.evt})};Ee.prototype._onSegmentHandleDragStart=function(t,e){var i=e.isStartMarker();this._peaks.emit("segments.dragstart",{segment:this._segment,startMarker:i,evt:t.evt})};Ee.prototype._onSegmentHandleDragEnd=function(t,e){var i=e.isStartMarker();this._peaks.emit("segments.dragend",{segment:this._segment,startMarker:i,evt:t.evt})};Ee.prototype.fitToView=function(){this._startMarker&&this._startMarker.fitToView(),this._endMarker&&this._endMarker.fitToView(),this._waveformShape.setWaveformColor(this._color)};Ee.prototype.destroy=function(){this._waveformShape.destroy(),this._label&&this._label.destroy(),this._startMarker&&this._startMarker.destroy(),this._endMarker&&this._endMarker.destroy()};function pe(t,e,i){this._peaks=t,this._view=e,this._allowEditing=i,this._segmentShapes={},this._layer=new ke.Layer,this._onSegmentsUpdate=this._onSegmentsUpdate.bind(this),this._onSegmentsAdd=this._onSegmentsAdd.bind(this),this._onSegmentsRemove=this._onSegmentsRemove.bind(this),this._onSegmentsRemoveAll=this._onSegmentsRemoveAll.bind(this),this._onSegmentsDragged=this._onSegmentsDragged.bind(this),this._peaks.on("segments.update",this._onSegmentsUpdate),this._peaks.on("segments.add",this._onSegmentsAdd),this._peaks.on("segments.remove",this._onSegmentsRemove),this._peaks.on("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.on("segments.dragged",this._onSegmentsDragged)}pe.prototype.addToStage=function(t){t.add(this._layer)};pe.prototype.enableEditing=function(t){this._allowEditing=t};pe.prototype.isEditingEnabled=function(){return this._allowEditing};pe.prototype.formatTime=function(t){return this._view.formatTime(t)};pe.prototype._onSegmentsUpdate=function(t){var e=!1,i=this._segmentShapes[t.id],n=this._view.getStartTime(),r=this._view.getEndTime();i&&(this._removeSegment(t),e=!0),t.isVisible(n,r)&&(this._addSegmentShape(t),e=!0),e&&this.updateSegments(n,r)};pe.prototype._onSegmentsAdd=function(t){var e=this,i=e._view.getStartTime(),n=e._view.getEndTime();t.forEach(function(r){r.isVisible(i,n)&&e._addSegmentShape(r)}),e.updateSegments(i,n)};pe.prototype._onSegmentsRemove=function(t){var e=this;t.forEach(function(i){e._removeSegment(i)})};pe.prototype._onSegmentsRemoveAll=function(){this._layer.removeChildren(),this._segmentShapes={}};pe.prototype._onSegmentsDragged=function(t){this._updateSegment(t.segment)};pe.prototype._createSegmentShape=function(t){return new Ee(t,this._peaks,this,this._view)};pe.prototype._addSegmentShape=function(t){var e=this._createSegmentShape(t);return e.addToLayer(this._layer),this._segmentShapes[t.id]=e,e};pe.prototype.updateSegments=function(t,e){var i=this._peaks.segments.find(t,e),n=i.length;i.forEach(this._updateSegment.bind(this)),n+=this._removeInvisibleSegments(t,e),n>0&&this._layer.draw()};pe.prototype._updateSegment=function(t){var e=this._findOrAddSegmentShape(t);e.updatePosition()};pe.prototype._findOrAddSegmentShape=function(t){var e=this._segmentShapes[t.id];return e||(e=this._addSegmentShape(t)),e};pe.prototype._removeInvisibleSegments=function(t,e){var i=0;for(var n in this._segmentShapes)if(te(this._segmentShapes,n)){var r=this._segmentShapes[n].getSegment();r.isVisible(t,e)||(this._removeSegment(r),i++)}return i};pe.prototype._removeSegment=function(t){var e=this._segmentShapes[t.id];e&&(e.destroy(),delete this._segmentShapes[t.id])};pe.prototype.setVisible=function(t){this._layer.setVisible(t)};pe.prototype.destroy=function(){this._peaks.off("segments.update",this._onSegmentsUpdate),this._peaks.off("segments.add",this._onSegmentsAdd),this._peaks.off("segments.remove",this._onSegmentsRemove),this._peaks.off("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.off("segments.dragged",this._onSegmentsDragged)};pe.prototype.fitToView=function(){for(var t in this._segmentShapes)if(te(this._segmentShapes,t)){var e=this._segmentShapes[t];e.fitToView()}};pe.prototype.draw=function(){this._layer.draw()};pe.prototype.getHeight=function(){return this._layer.getHeight()};function Ft(t,e){var i=this;i._axisGridlineColor=e.axisGridlineColor,i._axisLabelColor=e.axisLabelColor,i._showAxisLabels=e.showAxisLabels,e.formatAxisTime?i._formatAxisTime=e.formatAxisTime:i._formatAxisTime=function(n){return Ss(n,0)},i._axisLabelFont=Ft._buildFontString(e.fontFamily,e.fontSize,e.fontStyle),i._axisShape=new ke.Shape({sceneFunc:function(r){i._drawAxis(r,t)}})}Ft._buildFontString=function(t,e,i){return e||(e=11),t||(t="sans-serif"),i||(i="normal"),i+" "+e+"px "+t};Ft.prototype.addToLayer=function(t){t.add(this._axisShape)};Ft.prototype.showAxisLabels=function(t){this._showAxisLabels=t};Ft.prototype._getAxisLabelScale=function(t){for(var e=1,i=[1,2,5,10,20,30],n=60,r=0,s;;){s=e*i[r];var a=t.timeToPixels(s);if(a<n)++r===i.length&&(e*=60,r=0);else break}return s};Ft.prototype._drawAxis=function(t,e){var i=e.getStartTime(),n=10,r=this._getAxisLabelScale(e),s=nc(i,r),a=s-i,o=e.timeToPixels(a);t.setAttr("strokeStyle",this._axisGridlineColor),t.setAttr("lineWidth",1),t.setAttr("font",this._axisLabelFont),t.setAttr("fillStyle",this._axisLabelColor),t.setAttr("textAlign","left"),t.setAttr("textBaseline","bottom");for(var l=s,h,d=e.getWidth(),f=e.getHeight();h=o+e.timeToPixels(l-s),!(h>=d);){if(t.beginPath(),t.moveTo(h+.5,0),t.lineTo(h+.5,0+n),t.moveTo(h+.5,f),t.lineTo(h+.5,f-n),t.stroke(),this._showAxisLabels){var c=this._formatAxisTime(l),v=t.measureText(c).width,w=h-v/2,T=f-1-n;w>=0&&t.fillText(c,w,T)}l+=r}};function X(t,e,i){var n=this;if(n._originalWaveformData=t,n._container=e,n._peaks=i,n._options=i.options,n._viewOptions=i.options.overview,n._onTimeUpdate=n._onTimeUpdate.bind(this),n._onPlaying=n._onPlaying.bind(this),n._onPause=n._onPause.bind(this),n._onZoomviewDisplaying=n._onZoomviewDisplaying.bind(this),n._onWindowResize=n._onWindowResize.bind(this),i.on("player.timeupdate",n._onTimeUpdate),i.on("player.playing",n._onPlaying),i.on("player.pause",n._onPause),i.on("zoomview.displaying",n._onZoomviewDisplaying),i.on("window_resize",n._onWindowResize),n._amplitudeScale=1,n._timeLabelPrecision=n._viewOptions.timeLabelPrecision,n._enableSeek=!0,n._viewOptions.formatPlayheadTime?n._formatPlayheadTime=n._viewOptions.formatPlayheadTime:n._formatPlayheadTime=function(s){return Ss(s,n._timeLabelPrecision)},n._width=e.clientWidth,n._height=e.clientHeight,n._data=t,n._width!==0)try{n._data=t.resample({width:n._width})}catch{}ke.showWarnings=!1,n._resizeTimeoutId=null,n._stage=new ke.Stage({container:e,width:n._width,height:n._height}),n._waveformLayer=new ke.Layer({listening:!1}),n._waveformColor=n._viewOptions.waveformColor,n._playedWaveformColor=n._viewOptions.playedWaveformColor,n._createWaveform(),n._segmentsLayer=new pe(i,n,!1),n._segmentsLayer.addToStage(n._stage),n._pointsLayer=new ne(i,n,!1),n._pointsLayer.addToStage(n._stage),n._highlightLayer=new Wt(n,n._viewOptions.highlightOffset,n._viewOptions.highlightColor),n._highlightLayer.addToStage(n._stage),n._createAxisLabels(),n._playheadLayer=new Re({player:n._peaks.player,view:n,showPlayheadTime:n._viewOptions.showPlayheadTime,playheadColor:n._viewOptions.playheadColor,playheadTextColor:n._viewOptions.playheadTextColor,playheadFontFamily:n._viewOptions.fontFamily,playheadFontSize:n._viewOptions.fontSize,playheadFontStyle:n._viewOptions.fontStyle}),n._playheadLayer.addToStage(n._stage);var r=n._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(r),n._createMouseDragHandler(),n._onClick=n._onClick.bind(this),n._onDblClick=n._onDblClick.bind(this),n._onContextMenu=n._onContextMenu.bind(this),n._stage.on("click",n._onClick),n._stage.on("dblclick",n._onDblClick),n._stage.on("contextmenu",n._onContextMenu)}X.prototype._createMouseDragHandler=function(){var t=this;t._mouseDragHandler=new ti(t._stage,{onMouseDown:function(i){this._seek(i)},onMouseMove:function(i){this._seek(i)},_seek:function(i){if(!!t._enableSeek){i=Qt(i,0,t._width);var n=t.pixelsToTime(i),r=t._getDuration();n>r&&(n=r),t._playheadLayer.updatePlayheadTime(n),t._peaks.player.seek(n)}}})};X.prototype.enableSeek=function(t){this._enableSeek=t};X.prototype._onClick=function(t){this._clickHandler(t,"overview.click")};X.prototype._onDblClick=function(t){this._clickHandler(t,"overview.dblclick")};X.prototype._onContextMenu=function(t){this._clickHandler(t,"overview.contextmenu")};X.prototype._clickHandler=function(t,e){var i=t.evt.layerX,n=this.pixelsToTime(i);this._peaks.emit(e,{time:n,evt:t.evt})};X.prototype.getName=function(){return"overview"};X.prototype._onTimeUpdate=function(t){this._playheadLayer.updatePlayheadTime(t)};X.prototype._onPlaying=function(t){this._playheadLayer.updatePlayheadTime(t)};X.prototype._onPause=function(t){this._playheadLayer.stop(t)};X.prototype._onZoomviewDisplaying=function(t,e){this.showHighlight(t,e)};X.prototype.showHighlight=function(t,e){this._highlightLayer.showHighlight(t,e)};X.prototype._onWindowResize=function(){var t=this;t._resizeTimeoutId&&(clearTimeout(t._resizeTimeoutId),t._resizeTimeoutId=null),t._container.clientWidth!==0&&(t._width=t._container.clientWidth,t._stage.setWidth(t._width),t._resizeTimeoutId=setTimeout(function(){t._width=t._container.clientWidth,t._data=t._originalWaveformData.resample({width:t._width}),t._stage.setWidth(t._width),t._updateWaveform()},500))};X.prototype.setWaveformData=function(t){this._originalWaveformData=t,this._width!==0?this._data=t.resample({width:this._width}):this._data=t,this._updateWaveform()};X.prototype.playheadPosChanged=function(t){this._playedWaveformShape&&(this._playedSegment.endTime=t,this._unplayedSegment.startTime=t,this._waveformLayer.draw())};X.prototype.timeToPixels=function(t){return Math.floor(t*this._data.sample_rate/this._data.scale)};X.prototype.pixelsToTime=function(t){return t*this._data.scale/this._data.sample_rate};X.prototype.pixelOffsetToTime=X.prototype.pixelsToTime;X.prototype.getFrameOffset=function(){return 0};X.prototype.getStartTime=function(){return 0};X.prototype.getEndTime=function(){return this._getDuration()};X.prototype.getWidth=function(){return this._width};X.prototype.getHeight=function(){return this._height};X.prototype._getDuration=function(){return this._peaks.player.getDuration()};X.prototype.setAmplitudeScale=function(t){if(!Vn(t)||!ll(t))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=t,this._waveformLayer.draw(),this._segmentsLayer.draw()};X.prototype.getAmplitudeScale=function(){return this._amplitudeScale};X.prototype.getWaveformData=function(){return this._data};X.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new Te({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var t=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:t},this._unplayedSegment={startTime:t,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new Te({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};X.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};X.prototype._createWaveform=function(){this._createWaveformShapes(),this._stage.add(this._waveformLayer)};X.prototype._createAxisLabels=function(){this._axisLayer=new ke.Layer({listening:!1}),this._axis=new Ft(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};X.prototype.removeHighlightRect=function(){this._highlightLayer.removeHighlight()};X.prototype._updateWaveform=function(){this._waveformLayer.draw(),this._axisLayer.draw();var t=this._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(t),this._highlightLayer.updateHighlight();var e=0,i=this.pixelsToTime(this._width);this._pointsLayer.updatePoints(e,i),this._segmentsLayer.updateSegments(e,i)};X.prototype.setWaveformColor=function(t){this._waveformColor=t,this._waveformShape.setWaveformColor(t)};X.prototype.setPlayedWaveformColor=function(t){this._playedWaveformColor=t,t?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(t)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};X.prototype.showPlayheadTime=function(t){this._playheadLayer.showPlayheadTime(t)};X.prototype.setTimeLabelPrecision=function(t){this._timeLabelPrecision=t,this._playheadLayer.updatePlayheadText()};X.prototype.formatTime=function(t){return this._formatPlayheadTime(t)};X.prototype.showAxisLabels=function(t){this._axis.showAxisLabels(t),this._axisLayer.draw()};X.prototype.enableMarkerEditing=function(t){this._segmentsLayer.enableEditing(t),this._pointsLayer.enableEditing(t)};X.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var t=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.setWidth(this._width);try{this._data=this._originalWaveformData.resample({width:this._width}),t=!0}catch{}}this._height=this._container.clientHeight,this._stage.setHeight(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer.fitToView(),this._pointsLayer.fitToView(),this._highlightLayer.fitToView(),t&&this._updateWaveform(),this._stage.draw()}};X.prototype.destroy=function(){this._resizeTimeoutId&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=null),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("zoomview.displaying",this._onZoomviewDisplaying),this._peaks.off("window_resize",this._onWindowResize),this._playheadLayer.destroy(),this._segmentsLayer.destroy(),this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function G(t,e,i){var n=this;n._container=e,n._peaks=i,n._options=i.options,n._viewOptions=n._options.zoomview,n._enableWaveformCache=n._options.waveformCache,n._originalWaveformData=t,n._initWaveformCache(),n._onTimeUpdate=n._onTimeUpdate.bind(n),n._onPlaying=n._onPlaying.bind(n),n._onPause=n._onPause.bind(n),n._onWindowResize=n._onWindowResize.bind(n),n._onKeyboardLeft=n._onKeyboardLeft.bind(n),n._onKeyboardRight=n._onKeyboardRight.bind(n),n._onKeyboardShiftLeft=n._onKeyboardShiftLeft.bind(n),n._onKeyboardShiftRight=n._onKeyboardShiftRight.bind(n),n._peaks.on("player.timeupdate",n._onTimeUpdate),n._peaks.on("player.playing",n._onPlaying),n._peaks.on("player.pause",n._onPause),n._peaks.on("window_resize",n._onWindowResize),n._peaks.on("keyboard.left",n._onKeyboardLeft),n._peaks.on("keyboard.right",n._onKeyboardRight),n._peaks.on("keyboard.shift_left",n._onKeyboardShiftLeft),n._peaks.on("keyboard.shift_right",n._onKeyboardShiftRight),n._enableAutoScroll=!0,n._amplitudeScale=1,n._timeLabelPrecision=n._viewOptions.timeLabelPrecision,n._enableSeek=!0,n._viewOptions.formatPlayheadTime?n._formatPlayheadTime=n._viewOptions.formatPlayheadTime:n._formatPlayheadTime=function(a){return Ss(a,n._timeLabelPrecision)},n._playheadClickTolerance=n._viewOptions.playheadClickTolerance,n._data=null,n._pixelLength=0;var r=i.zoom.getZoomLevel();n._zoomLevelAuto=!1,n._zoomLevelSeconds=null,n._resizeTimeoutId=null,n._resampleData({scale:r}),n._width=e.clientWidth,n._height=e.clientHeight,n._frameOffset=0,n._stage=new ke.Stage({container:e,width:n._width,height:n._height}),n._waveformLayer=new ke.Layer({listening:!1}),n._waveformColor=n._viewOptions.waveformColor,n._playedWaveformColor=n._viewOptions.playedWaveformColor,n._createWaveform(),n._segmentsLayer=new pe(i,n,!0),n._segmentsLayer.addToStage(n._stage),n._pointsLayer=new ne(i,n,!0),n._pointsLayer.addToStage(n._stage),n._createAxisLabels(),n._playheadLayer=new Re({player:n._peaks.player,view:n,showPlayheadTime:n._viewOptions.showPlayheadTime,playheadColor:n._viewOptions.playheadColor,playheadTextColor:n._viewOptions.playheadTextColor,playheadFontFamily:n._viewOptions.fontFamily,playheadFontSize:n._viewOptions.fontSize,playheadFontStyle:n._viewOptions.fontStyle}),n._playheadLayer.addToStage(n._stage);var s=n._peaks.player.getCurrentTime();n._syncPlayhead(s),n._createMouseDragHandler(),n._onWheel=n._onWheel.bind(n),n._onWheelCaptureVerticalScroll=n._onWheelCaptureVerticalScroll.bind(n),n.setWheelMode(n._viewOptions.wheelMode),n._onClick=n._onClick.bind(this),n._onDblClick=n._onDblClick.bind(this),n._onContextMenu=n._onContextMenu.bind(this),n._stage.on("click",n._onClick),n._stage.on("dblclick",n._onDblClick),n._stage.on("contextmenu",n._onContextMenu)}G.prototype._initWaveformCache=function(){this._enableWaveformCache&&(this._waveformData=new Map,this._waveformData.set(this._originalWaveformData.scale,this._originalWaveformData),this._waveformScales=[this._originalWaveformData.scale])};G.prototype._createMouseDragHandler=function(){var t=this;t._mouseDragHandler=new ti(t._stage,{onMouseDown:function(i){this._seeking=!1;var n=t._playheadLayer.getPlayheadOffset();t._enableSeek&&Math.abs(i-n)<=t._playheadClickTolerance&&(this._seeking=!0),this._seeking?this._seek(i):(this.initialFrameOffset=t._frameOffset,this.mouseDownX=i)},onMouseMove:function(i){if(this._seeking)this._seek(i);else{var n=this.mouseDownX-i,r=this.initialFrameOffset+n;r!==this.initialFrameOffset&&t._updateWaveform(r)}},onMouseUp:function(){if(!this._seeking&&t._enableSeek&&!t._mouseDragHandler.isDragging()){var i=t.pixelOffsetToTime(this.mouseDownX),n=t._getDuration();i>n&&(i=n),t._playheadLayer.updatePlayheadTime(i),t._peaks.player.seek(i)}},_seek:function(i){i=Qt(i,0,t._width);var n=t.pixelsToTime(i+t._frameOffset),r=t._getDuration();n>r&&(n=r),t._playheadLayer.updatePlayheadTime(n),t._peaks.player.seek(n)}})};G.prototype.enableSeek=function(t){this._enableSeek=t};G.prototype._onClick=function(t){this._clickHandler(t,"zoomview.click")};G.prototype._onDblClick=function(t){this._clickHandler(t,"zoomview.dblclick")};G.prototype._onContextMenu=function(t){this._clickHandler(t,"zoomview.contextmenu")};G.prototype._clickHandler=function(t,e){var i=t.evt.layerX,n=this.pixelOffsetToTime(i);this._peaks.emit(e,{time:n,evt:t.evt})};G.prototype.setWheelMode=function(t,e){if(e||(e={}),t!==this._wheelMode||e.captureVerticalScroll!==this._captureVerticalScroll)switch(this._stage.off("wheel"),this._wheelMode=t,this._captureVerticalScroll=e.captureVerticalScroll,t){case"scroll":e.captureVerticalScroll?this._stage.on("wheel",this._onWheelCaptureVerticalScroll):this._stage.on("wheel",this._onWheel);break}};G.prototype._onWheel=function(t){var e=t.evt,i;if(e.shiftKey)if(e.deltaY!==0)i=e.deltaY;else if(e.deltaX!==0)i=e.deltaX;else return;else{if(Math.abs(e.deltaX)<Math.abs(e.deltaY))return;i=e.deltaX}e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._width),e.preventDefault();var n=Qt(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this._updateWaveform(n)};G.prototype._onWheelCaptureVerticalScroll=function(t){var e=t.evt,i=Math.abs(e.deltaX)<Math.abs(e.deltaY)?e.deltaY:e.deltaX;e.preventDefault();var n=Qt(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this._updateWaveform(n)};G.prototype.getName=function(){return"zoomview"};G.prototype._onTimeUpdate=function(t){this._mouseDragHandler.isDragging()||this._syncPlayhead(t)};G.prototype._onPlaying=function(t){this._playheadLayer.updatePlayheadTime(t)};G.prototype._onPause=function(t){this._playheadLayer.stop(t)};G.prototype._onWindowResize=function(){var t=this,e=t._container.clientWidth;t._zoomLevelAuto?(t._resizeTimeoutId&&(clearTimeout(t._resizeTimeoutId),t._resizeTimeoutId=null),e!==0&&(t._width=e,t._stage.width(e),t._resizeTimeoutId=setTimeout(function(){t._width=e,t._data=t._originalWaveformData.resample(e),t._stage.width(e),t._updateWaveform(t._frameOffset)},500))):(t._width=e,t._stage.width(e),t._updateWaveform(t._frameOffset))};G.prototype._onKeyboardLeft=function(){this._keyboardScroll(-1,!1)};G.prototype._onKeyboardRight=function(){this._keyboardScroll(1,!1)};G.prototype._onKeyboardShiftLeft=function(){this._keyboardScroll(-1,!0)};G.prototype._onKeyboardShiftRight=function(){this._keyboardScroll(1,!0)};G.prototype._keyboardScroll=function(t,e){var i;e?i=t*this._width:i=t*this.timeToPixels(this._options.nudgeIncrement),this.scrollWaveform({pixels:i})};G.prototype.setWaveformData=function(t){this._originalWaveformData=t,this._initWaveformCache()};G.prototype.playheadPosChanged=function(t){this._playedWaveformShape&&(this._playedSegment.endTime=t,this._unplayedSegment.startTime=t,this._drawWaveformLayer())};G.prototype._syncPlayhead=function(t){if(this._playheadLayer.updatePlayheadTime(t),this._enableAutoScroll){var e=this.timeToPixels(t),i=this._frameOffset+this._width-100;(e>=i||e<this._frameOffset)&&(this._frameOffset=e-100,this._frameOffset<0&&(this._frameOffset=0),this._updateWaveform(this._frameOffset))}};G.prototype._getScale=function(t){return t*this._data.sample_rate/this._width};function kc(t){return te(t,"scale")&&t.scale==="auto"||te(t,"seconds")&&t.seconds==="auto"}G.prototype.setZoom=function(t){var e;if(kc(t)){var i=this._peaks.player.getDuration();if(!Lt(i))return!1;this._zoomLevelAuto=!0,this._zoomLevelSeconds=null,e=this._getScale(i)}else{if(te(t,"scale"))this._zoomLevelSeconds=null,e=t.scale;else if(te(t,"seconds")){if(!Lt(t.seconds))return!1;this._zoomLevelSeconds=t.seconds,e=this._getScale(t.seconds)}this._zoomLevelAuto=!1}e<this._originalWaveformData.scale&&(this._peaks._logger("peaks.zoomview.setZoom(): zoom level must be at least "+this._originalWaveformData.scale),e=this._originalWaveformData.scale);var n=this._peaks.player.getCurrentTime(),r,s=this._playheadLayer.getPlayheadOffset();s>=0&&s<this._width?r=n:(s=Math.floor(this._width/2),r=this.pixelOffsetToTime(s));var a=this._scale;this._resampleData({scale:e});var o=this.timeToPixels(r);return this._frameOffset=o-s,this._updateWaveform(this._frameOffset),this._playheadLayer.zoomLevelChanged(),this._playheadLayer.updatePlayheadTime(n),this._peaks.emit("zoom.update",e,a),!0};G.prototype._resampleData=function(t){var e=t.scale;if(this._enableWaveformCache){if(!this._waveformData.has(e)){for(var i=this._originalWaveformData,n=0;n<this._waveformScales.length&&this._waveformScales[n]<e;n++)i=this._waveformData.get(this._waveformScales[n]);this._waveformData.set(e,i.resample(t)),this._waveformScales.push(e),this._waveformScales.sort(function(r,s){return r-s})}this._data=this._waveformData.get(e)}else this._data=this._originalWaveformData.resample(t);this._scale=this._data.scale,this._pixelLength=this._data.length};G.prototype.getStartTime=function(){return this.pixelOffsetToTime(0)};G.prototype.getEndTime=function(){return this.pixelOffsetToTime(this._width)};G.prototype.setStartTime=function(t){t<0&&(t=0),this._zoomLevelAuto&&(t=0),this._updateWaveform(this.timeToPixels(t))};G.prototype.timeToPixels=function(t){return Math.floor(t*this._data.sample_rate/this._data.scale)};G.prototype.pixelsToTime=function(t){return t*this._data.scale/this._data.sample_rate};G.prototype.pixelOffsetToTime=function(t){var e=this._frameOffset+t;return e*this._data.scale/this._data.sample_rate};G.prototype.getFrameOffset=function(){return this._frameOffset};G.prototype.getWidth=function(){return this._width};G.prototype.getHeight=function(){return this._height};G.prototype._getDuration=function(){return this._peaks.player.getDuration()};G.prototype.setAmplitudeScale=function(t){if(!Vn(t)||!ll(t))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=t,this._drawWaveformLayer(),this._segmentsLayer.draw()};G.prototype.getAmplitudeScale=function(){return this._amplitudeScale};G.prototype.getWaveformData=function(){return this._data};G.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new Te({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var t=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:t},this._unplayedSegment={startTime:t,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new Te({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};G.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};G.prototype._createWaveform=function(){this._createWaveformShapes(),this._stage.add(this._waveformLayer),this._peaks.emit("zoomview.displaying",0,this.getEndTime())};G.prototype._createAxisLabels=function(){this._axisLayer=new ke.Layer({listening:!1}),this._axis=new Ft(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};G.prototype.scrollWaveform=function(t){var e;if(te(t,"pixels"))e=Math.floor(t.pixels);else if(te(t,"seconds"))e=this.timeToPixels(t.seconds);else throw new TypeError("view.scrollWaveform(): Missing umber of pixels or seconds");this._updateWaveform(this._frameOffset+e)};G.prototype._updateWaveform=function(t){var e;this._pixelLength<this._width?(t=0,e=this._width):e=this._pixelLength-this._width,t=Qt(t,0,e),this._frameOffset=t;var i=this._playheadLayer.getPlayheadPixel();this._playheadLayer.updatePlayheadTime(this.pixelsToTime(i)),this._drawWaveformLayer(),this._axisLayer.draw();var n=this.getStartTime(),r=this.getEndTime();this._pointsLayer.updatePoints(n,r),this._segmentsLayer.updateSegments(n,r),this._peaks.emit("zoomview.displaying",n,r)};G.prototype._drawWaveformLayer=function(){this._waveformLayer.draw()};G.prototype.setWaveformColor=function(t){this._waveformColor=t,this._waveformShape.setWaveformColor(t)};G.prototype.setPlayedWaveformColor=function(t){this._playedWaveformColor=t,t?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(t)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};G.prototype.showPlayheadTime=function(t){this._playheadLayer.showPlayheadTime(t)};G.prototype.setTimeLabelPrecision=function(t){this._timeLabelPrecision=t,this._playheadLayer.updatePlayheadText()};G.prototype.formatTime=function(t){return this._formatPlayheadTime(t)};G.prototype.showAxisLabels=function(t){this._axis.showAxisLabels(t),this._axisLayer.draw()};G.prototype.enableAutoScroll=function(t){this._enableAutoScroll=t};G.prototype.enableMarkerEditing=function(t){this._segmentsLayer.enableEditing(t),this._pointsLayer.enableEditing(t)};G.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var t=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.width(this._width);var e=!1,i;if(this._zoomLevelAuto?(e=!0,i={width:this._width}):this._zoomLevelSeconds!==null&&(e=!0,i={scale:this._getScale(this._zoomLevelSeconds)}),e)try{this._resampleData(i),t=!0}catch{}}this._height=this._container.clientHeight,this._stage.height(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer.fitToView(),this._pointsLayer.fitToView(),t&&this._updateWaveform(this._frameOffset),this._stage.draw()}};G.prototype.destroy=function(){this._resizeTimeoutId&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=null),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("window_resize",this._onWindowResize),this._peaks.off("keyboard.left",this._onKeyboardLeft),this._peaks.off("keyboard.right",this._onKeyboardRight),this._peaks.off("keyboard.shift_left",this._onKeyboardShiftLeft),this._peaks.off("keyboard.shift_right",this._onKeyboardShiftRight),this._playheadLayer.destroy(),this._segmentsLayer.destroy(),this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function ii(t){this._peaks=t,this._overview=null,this._zoomview=null}ii.prototype.createOverview=function(t){if(this._overview)return this._overview;var e=this._peaks.getWaveformData();return this._overview=new X(e,t,this._peaks),this._zoomview&&this._overview.showHighlight(this._zoomview.getStartTime(),this._zoomview.getEndTime()),this._overview};ii.prototype.createZoomview=function(t){if(this._zoomview)return this._zoomview;var e=this._peaks.getWaveformData();return this._zoomview=new G(e,t,this._peaks),this._zoomview};ii.prototype.destroyOverview=function(){!this._overview||!this._zoomview||(this._overview.destroy(),this._overview=null)};ii.prototype.destroyZoomview=function(){!this._zoomview||!this._overview||(this._zoomview.destroy(),this._zoomview=null,this._overview.removeHighlightRect())};ii.prototype.destroy=function(){this._overview&&(this._overview.destroy(),this._overview=null),this._zoomview&&(this._zoomview.destroy(),this._zoomview=null)};ii.prototype.getView=function(t){if(dt(t))return this._overview&&this._zoomview?null:this._overview?this._overview:this._zoomview?this._zoomview:null;switch(t){case"overview":return this._overview;case"zoomview":return this._zoomview;default:return null}};function ni(t,e){this._peaks=t,this._zoomLevels=e,this._zoomLevelIndex=0}ni.prototype.setZoomLevels=function(t){this._zoomLevels=t,this.setZoom(0,!0)};ni.prototype.zoomIn=function(){this.setZoom(this._zoomLevelIndex-1)};ni.prototype.zoomOut=function(){this.setZoom(this._zoomLevelIndex+1)};ni.prototype.setZoom=function(t,e){if(t>=this._zoomLevels.length&&(t=this._zoomLevels.length-1),t<0&&(t=0),!(!e&&t===this._zoomLevelIndex)){this._zoomLevelIndex=t;var i=this._peaks.views.getView("zoomview");!i||i.setZoom({scale:this._zoomLevels[t]})}};ni.prototype.getZoom=function(){return this._zoomLevelIndex};ni.prototype.getZoomLevel=function(){return this._zoomLevels[this._zoomLevelIndex]};var Oa="withCredentials"in new XMLHttpRequest;function wt(t){this._peaks=t}wt.prototype.init=function(t,e){if(t.dataUri&&(t.webAudio||t.audioContext)||t.waveformData&&(t.webAudio||t.audioContext)||t.dataUri&&t.waveformData){e(new TypeError("Peaks.init(): You may only pass one source (webAudio, dataUri, or waveformData) to render waveform data."));return}if(t.audioContext&&(this._peaks._logger("Peaks.init(): The audioContext option is deprecated, please pass a webAudio object instead"),t.webAudio={audioContext:t.audioContext}),t.dataUri)return this._getRemoteWaveformData(t,e);if(t.waveformData)return this._buildWaveformFromLocalData(t,e);if(t.webAudio)return t.webAudio.audioBuffer?this._buildWaveformDataFromAudioBuffer(t,e):this._buildWaveformDataUsingWebAudio(t,e);e(new Error("Peaks.init(): You must pass an audioContext, or dataUri, or waveformData to render waveform data"))};wt.prototype._getRemoteWaveformData=function(t,e){var i=this,n=null,r=null,s;if(wi(t.dataUri))n=t.dataUri;else if($t(t.dataUri))n={},n[t.dataUriDefaultFormat||"json"]=t.dataUri;else{e(new TypeError("Peaks.init(): The dataUri option must be an object"));return}if(["ArrayBuffer","JSON"].some(function(o){if(window[o])return r=o.toLowerCase(),s=n[r],Boolean(s)}),!s){e(new Error("Peaks.init(): Unable to determine a compatible dataUri format for this browser"));return}var a=i._createXHR(s,r,t.withCredentials,function(o){if(this.readyState===4){if(this.status!==200){e(new Error("Unable to fetch remote data. HTTP status "+this.status));return}var l=Ze.create(o.target.response);if(l.channels!==1&&l.channels!==2){e(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(l.bits!==8){e(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}e(null,l)}},function(){e(new Error("XHR Failed"))});a.send()};wt.prototype._buildWaveformFromLocalData=function(t,e){var i=null,n=null;if(wi(t.waveformData))i=t.waveformData;else{e(new Error("Peaks.init(): The waveformData option must be an object"));return}if(wi(i.json)?n=i.json:sc(i.arraybuffer)&&(n=i.arraybuffer),!n){e(new Error("Peaks.init(): Unable to determine a compatible waveformData format"));return}try{var r=Ze.create(n);if(r.channels!==1&&r.channels!==2){e(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(r.bits!==8){e(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}e(null,r)}catch(s){e(s)}};wt.prototype._buildWaveformDataUsingWebAudio=function(t,e){var i=this,n=window.AudioContext||window.webkitAudioContext;if(!(t.webAudio.audioContext instanceof n)){e(new TypeError("Peaks.init(): The webAudio.audioContext option must be a valid AudioContext"));return}var r=t.webAudio;r.scale!==t.zoomLevels[0]&&(r.scale=t.zoomLevels[0]);var s=i._peaks.options.mediaElement.currentSrc;s?i._requestAudioAndBuildWaveformData(s,r,t.withCredentials,e):i._peaks.once("player.canplay",function(){i._requestAudioAndBuildWaveformData(i._peaks.options.mediaElement.currentSrc,r,t.withCredentials,e)})};wt.prototype._buildWaveformDataFromAudioBuffer=function(t,e){var i=t.webAudio;i.scale!==t.zoomLevels[0]&&(i.scale=t.zoomLevels[0]);var n={audio_buffer:i.audioBuffer,split_channels:i.multiChannel,scale:i.scale};Ze.createFromAudio(n,e)};wt.prototype._requestAudioAndBuildWaveformData=function(t,e,i,n){var r=this;if(!t){r._peaks._logger("Peaks.init(): The mediaElement src is invalid");return}var s=r._createXHR(t,"arraybuffer",i,function(a){if(this.readyState===4){if(this.status!==200){n(new Error("Unable to fetch remote data. HTTP status "+this.status));return}var o={audio_context:e.audioContext,array_buffer:a.target.response,split_channels:e.multiChannel,scale:e.scale};Ze.createFromAudio(o,n)}},function(){n(new Error("XHR Failed"))});s.send()};wt.prototype._createXHR=function(t,e,i,n,r){var s=new XMLHttpRequest;if(s.open("GET",t,!0),Oa)try{s.responseType=e}catch{}return s.onload=n,s.onerror=r,Oa&&i&&(s.withCredentials=!0),s};function tt(){return ol.call(this),this.options={zoomLevels:[512,1024,2048,4096],waveformCache:!0,mediaElement:null,mediaUrl:null,dataUri:null,dataUriDefaultFormat:"json",withCredentials:!1,waveformData:null,webAudio:null,nudgeIncrement:1,segmentStartMarkerColor:"#aaaaaa",segmentEndMarkerColor:"#aaaaaa",randomizeSegmentColor:!0,segmentColor:"#ff851b",pointMarkerColor:"#39cccc",createSegmentMarker:yc,createSegmentLabel:wc,createPointMarker:bc,logger:console.error.bind(console)},this}tt.prototype=Object.create(ol.prototype);var Un={playheadColor:"#111111",playheadTextColor:"#aaaaaa",axisGridlineColor:"#cccccc",showAxisLabels:!0,axisLabelColor:"#aaaaaa",fontFamily:"sans-serif",fontSize:11,fontStyle:"normal",timeLabelPrecision:2},Ra={playheadClickTolerance:3,waveformColor:"rgba(0, 225, 128, 1)",wheelMode:"none"},Wa={waveformColor:"rgba(0, 0, 0, 0.2)",highlightColor:"#aaaaaa",highlightOffset:11};function Ac(t){var e={};t.containers&&t.containers.overview&&(e.container=t.containers.overview),t.overviewWaveformColor&&(e.waveformColor=t.overviewWaveformColor),t.overviewHighlightOffset&&(e.highlightOffset=t.overviewHighlightOffset),t.overviewHighlightColor&&(e.highlightColor=t.overviewHighlightColor),t.overview&&t.overview.showPlayheadTime&&(e.showPlayheadTime=t.overview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","highlightColor","highlightOffset"];return i.forEach(function(n){t.overview&&te(t.overview,n)?e[n]=t.overview[n]:te(t,n)?e[n]=t[n]:te(e,n)||(te(Wa,n)?e[n]=Wa[n]:te(Un,n)&&(e[n]=Un[n]))}),e}function Pc(t){var e={};t.containers&&t.containers.zoomview&&(e.container=t.containers.zoomview),t.zoomWaveformColor&&(e.waveformColor=t.zoomWaveformColor),t.showPlayheadTime?e.showPlayheadTime=t.showPlayheadTime:t.zoomview&&t.zoomview.showPlayheadTime&&(e.showPlayheadTime=t.zoomview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","playheadClickTolerance","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","wheelMode"];return i.forEach(function(n){t.zoomview&&te(t.zoomview,n)?e[n]=t.zoomview[n]:te(t,n)?e[n]=t[n]:te(e,n)||(te(Ra,n)?e[n]=Ra[n]:te(Un,n)&&(e[n]=Un[n]))}),e}function Ec(t,e){for(var i in e)te(e,i)&&te(t,i)&&(t[i]=e[i]);return t}tt.init=function(t,e){var i=new tt,n=i._setOptions(t);if(n){e(n);return}var r=i.options.zoomview.container,s=i.options.overview.container;if(!Ea(r)&&!Ea(s)){e(new TypeError("Peaks.init(): The zoomview and/or overview container options must be valid HTML elements"));return}if(r&&(r.clientWidth<=0||r.clientHeight<=0)){e(new Error("Peaks.init(): Please ensure that the zoomview container is visible and has non-zero width and height"));return}if(s&&(s.clientWidth<=0||s.clientHeight<=0)){e(new Error("Peaks.init(): Please ensure that the overview container is visible and has non-zero width and height"));return}t.keyboard&&(i._keyboardHandler=new xs(i));var a=t.player?t.player:new $e(i.options.mediaElement);i.player=new Ue(i,a),i.segments=new Pe(i),i.points=new Ge(i),i.zoom=new ni(i,i.options.zoomLevels),i.views=new ii(i);var o=new wt(i);a.init(i).then(function(){o.init(i.options,function(l,h){if(l){e&&e(l);return}i._waveformData=h,s&&i.views.createOverview(s),r&&i.views.createZoomview(r),i._addWindowResizeHandler(),t.segments&&i.segments.add(t.segments),t.points&&i.points.add(t.points),t.emitCueEvents&&(i._cueEmitter=new nt(i)),setTimeout(function(){i.emit("peaks.ready")},0),e(null,i)})}).catch(function(l){e&&e(l)})};tt.prototype._setOptions=function(t){if(!wi(t))return new TypeError("Peaks.init(): The options parameter should be an object");if(!t.player){if(!t.mediaElement)return new Error("Peaks.init(): Missing mediaElement option");if(!(t.mediaElement instanceof HTMLMediaElement))return new TypeError("Peaks.init(): The mediaElement option should be an HTMLMediaElement")}if(t.container)return new Error("Peaks.init(): The container option has been removed, please use containers instead");if(t.logger&&!ac(t.logger))return new TypeError("Peaks.init(): The logger option should be a function");if(t.segments&&!Array.isArray(t.segments))return new TypeError("Peaks.init(): options.segments must be an array of segment objects");if(t.points&&!Array.isArray(t.points))return new TypeError("Peaks.init(): options.points must be an array of point objects");if(Ec(this.options,t),this.options.overview=Ac(t),this.options.zoomview=Pc(t),Array.isArray(this.options.zoomLevels)){if(this.options.zoomLevels.length===0)return new Error("Peaks.init(): The zoomLevels array must not be empty");if(!rc(this.options.zoomLevels))return new Error("Peaks.init(): The zoomLevels array must be sorted in ascending order")}else return new TypeError("Peaks.init(): The zoomLevels option should be an array");this._logger=this.options.logger};tt.prototype.setSource=function(t,e){var i=this;this.player._setSource(t).then(function(){t.zoomLevels||(t.zoomLevels=i.options.zoomLevels);var n=new wt(i);n.init(t,function(r,s){if(r){e(r);return}i._waveformData=s,["overview","zoomview"].forEach(function(a){var o=i.views.getView(a);o&&o.setWaveformData(s)}),i.zoom.setZoomLevels(t.zoomLevels),e()})}).catch(function(n){e(n)})};tt.prototype.getWaveformData=function(){return this._waveformData};tt.prototype._addWindowResizeHandler=function(){this._onResize=this._onResize.bind(this),window.addEventListener("resize",this._onResize)};tt.prototype._onResize=function(){this.emit("window_resize")};tt.prototype._removeWindowResizeHandler=function(){window.removeEventListener("resize",this._onResize)};tt.prototype.destroy=function(){this._removeWindowResizeHandler(),this._keyboardHandler&&this._keyboardHandler.destroy(),this.views&&this.views.destroy(),this.player&&this.player.destroy(),this._cueEmitter&&this._cueEmitter.destroy()};const Ic=["src"],Lc={class:"peaks-controls"},Mc=J("\xA0 "),Dc=J("\xA0 "),Oc=it({__name:"AudioPeaks",props:{src:null,zoomviewElementId:null,zoomviewElement:null,overviewElementId:null,overviewElement:null,mediaElementId:null,mediaElement:null,options:null},setup(t,{expose:e}){const i=t,n=pt(void 0),r=pt(null),s=pt(null),a=pt(null),o=pt(null),l=pt(null),h=pt(null),d=pt(void 0);e({peaksInstance:n}),fs(()=>{f()}),cs(()=>{c()});function f(){console.debug("AudioPeaks::createPeaksInstance:options:",i.options);const _=v(i.overviewElement,i.overviewElementId,r,s,"div"),A=v(i.zoomviewElement,i.zoomviewElementId,a,o,"div"),x=v(i.mediaElement,i.mediaElementId,l,h,"audio");i.options&&(i.options.containers={overview:_,zoomview:A},i.options.mediaElement=x);const M=i.options?i.options:{containers:{overview:_,zoomview:A},mediaElement:x,webAudio:{audioContext:new AudioContext},zoomLevels:[256,512,1024,2048,4096]};tt.init(M,function(O,V){O&&console.error(O),n.value=V,d.value=V==null?void 0:V.zoom.getZoom()})}function c(){var _;(_=n.value)==null||_.destroy()}function v(_,A,x,M,O){if(_)return console.debug("AudioPeaks::Found elm: ",_),_;if(A)return console.debug("AudioPeaks::Found element by id: ",A),document.getElementById(""+A);const V=x.value;if(V)return console.debug("AudioPeaks::Found element by Ref: ",V),V;const le=M.value;if(le){const fe=le.getElementsByTagName(O)[0];if(fe)return console.debug("AudioPeaks::Found element by first in slot: ",fe),fe}}function w(){var _,A;(_=n.value)==null||_.zoom.zoomIn(),d.value=(A=n.value)==null?void 0:A.zoom.getZoom()}function T(){var _,A;(_=n.value)==null||_.zoom.zoomOut(),d.value=(A=n.value)==null?void 0:A.zoom.getZoom()}return(_,A)=>(me(),Se(ye,null,[g("div",{ref_key:"overviewSlot",ref:s},[!i.overviewElementId&&!i.overviewElement?Kt(_.$slots,"overview",{key:0},()=>[g("div",{class:"peaks-overview",ref_key:"overview",ref:r},null,512)],!0):En("",!0)],512),g("div",{ref_key:"zoomviewSlot",ref:o},[!i.zoomviewElementId&&!i.zoomviewElement?Kt(_.$slots,"zoomview",{key:0},()=>[g("div",{class:"peaks-zoomview",ref_key:"zoomview",ref:a},null,512)],!0):En("",!0)],512),g("div",{ref_key:"audioSlot",ref:h},[!i.mediaElementId&&!i.mediaElement?Kt(_.$slots,"default",{key:0},()=>[g("audio",{class:"peaks-audio",ref_key:"audio",ref:l,controls:""},[g("source",{src:t.src},null,8,Ic)],512)],!0):En("",!0)],512),Kt(_.$slots,"controls",{},()=>[g("div",Lc,[g("button",{onClick:A[0]||(A[0]=x=>w())},"Zoom in"),Mc,g("button",{onClick:A[1]||(A[1]=x=>T())},"Zoom out"),Dc,g("span",null,"Zoom level: "+Dn(so(d)),1)])],!0)],64))}});const Pt=Dt(Oc,[["__scopeId","data-v-da208bf3"]]),Rc=g("h1",null,"Basic examples",-1),Wc=g("h3",null,'Just using a media source URL ("simple" mode)',-1),Fc=g("p",null,[J(" By default, the "),g("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaks.vue"},"AudioPeaks Vue component"),J(" template has a new audio element, with the given source URL, and both view panes (overview and zoom, which are rendered with a default size) and a controls pane. A new audio context is created and used to compute the waveform. ")],-1),Gc=g("pre",null,'<AudioPeaks src="lidija_roos-not_for_sale.mp3" />',-1),Hc={class:"example-display"},zc=g("h3",null,'Providing a media element ("slot" mode)',-1),Bc=g("p",null," To provide your own media element, just place it inside the AudioPeaks element (a.k.a. the slot). Vue-peaks will use the first audio element in the slot. A new audio context is created and used to compute the waveform. ",-1),Vc=g("pre",null,`<AudioPeaks>
  <span>You can also add additional HTML content.</span>
  <audio controls style="width: 100%;">
    <source src="https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3" />
  </audio>
</AudioPeaks>  `,-1),Nc={class:"example-display"},Uc=g("span",null,"You can also add additional HTML content.",-1),Xc=g("audio",{controls:"",style:{width:"100%"}},[g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),Yc=g("h3",null,'Using a specified media element ("external" mode)',-1),Kc=g("p",null," If you already have an existing media element, you can reference it by it's (unique) id, or as an HTMLMediaElement object. A new audio context is created and used to compute the waveform. ",-1),jc=g("pre",null,`<audio controls id="externalMediaElement">
  <source src="https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3" />
</audio>
<div>Using the external media element above</div>
<AudioPeaks mediaElementId="externalMediaElement">
</AudioPeaks>  `,-1),Zc={class:"example-display"},$c=g("audio",{controls:"",id:"externalMediaElement"},[g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),qc=g("div",null,"Using the external media element above",-1),Jc=it({__name:"Basic",setup(t){return(e,i)=>(me(),Se(ye,null,[Rc,Wc,Fc,Gc,g("div",Hc,[ee(Pt,{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})]),zc,Bc,Vc,g("div",Nc,[ee(Pt,null,{default:Le(()=>[Uc,Xc]),_:1})]),Yc,Kc,jc,g("div",Zc,[$c,qc,ee(Pt,{mediaElementId:"externalMediaElement"})])],64))}}),Qc=g("h1",null,"Setting styles",-1),ep=g("pre",null,`<style>
.style-example .peaks-overview:hover,
.style-example .peaks-zoomview:hover {
  background-color: hsla(160, 100%, 37%, 0.2);
}

.style-example .peaks-overview,
.style-example .peaks-zoomview {
  height: 50px;
  border: 1px dotted;
  border-color: black;
}
</style>
<div class="style-example">
  <AudioPeaks src="https://suterma.github.io/vue-peaks/lidija_roos-decisions.ogg" />
</div>`,-1),tp=g("p",null,[J(" Each pane (overview, zoomview, audio, controls) has "),g("b",null,"dedicated CSS classes"),J(" which you can use to customize the look and feel. Note however, that you can not style the waveforms themselves this way. ")],-1),ip={class:"example-display style-example"},np=it({__name:"ASecondInstanceWithStyle",setup(t){return(e,i)=>(me(),Se(ye,null,[Qc,ep,tp,g("div",ip,[ee(Pt,{src:"https://suterma.github.io/vue-peaks/lidija_roos-decisions.ogg"})])],64))}});const rp=g("h1",null,"Using slots for custom panes",-1),sp=g("p",null,[J(" To provide your own layout, you can also use the "),g("a",{href:"https://vuejs.org/guide/components/slots.html#named-slots"},"named slots"),J(" for the overview, zoomview, audio (default) and controls pane. ")],-1),ap=g("p",null,[J("This allows you for example to "),g("ul",null,[g("li",null,"layout elements differently"),g("li",null,"not render (instead of just not show) elements"),g("li",null,"have a completely custom media element")]),J(" You can use any of the media element modes with named slots.")],-1),op=g("pre",null,"//TODO",-1),lp={class:"example-display"},hp=g("div",{id:"overviewCustomSlotPane",class:"background-hover",style:{width:"100%",height:"50px"}},null,-1),dp=g("div",null,[g("span",null,[g("small",null,"A small description for the custom overview pane above. Below, the default zoom pane will be rendered.")])],-1),up=g("span",null,"In this example, the audio control is not shown, but some custom buttons instead:",-1),fp=J("\xA0 "),cp={ref:"customSlotPaneAudio"},pp=g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"},null,-1),_p=[pp],gp=J("\xA0 "),mp=g("template",null,null,-1),vp=g("span",null,"No controls are shown, by providing an empty template to the named controls slot.",-1),yp=it({__name:"UsingSlots",setup(t){return(e,i)=>(me(),Se(ye,null,[rp,sp,ap,op,g("div",lp,[hp,dp,ee(Pt,{src:"https://suterma.github.io/vue-peaks/lidija_roos-decisions.ogg",overviewElementId:"overviewCustomSlotPane"},{default:Le(()=>[up,fp,g("audio",cp,_p,512),g("button",{onClick:i[0]||(i[0]=n=>e.$refs.customSlotPaneAudio.play())}," Play "),gp,g("button",{onClick:i[1]||(i[1]=n=>e.$refs.customSlotPaneAudio.pause())}," Pause ")]),controls:Le(()=>[mp]),_:1}),vp])],64))}}),wp=od(`<h1>Using a Peaks.js configuration</h1><pre><code>
    //TODO
  </code>
      </pre><p> To fully customize the appearance and behavior, the Peaks.js <a href="https://github.com/bbc/peaks.js#Configuration">configuration options</a> can be provided. </p><p> Note, that you should omit the the <span class="code">containers.overview</span>, <span class="code">containers.zoomview</span> and <span class="code">mediaElement</span> options, since these are set internally, depending on the view mode (explained with the basic examples). </p><p>The options allow you for example to <ul><li>customize the waveform styles</li><li>define scrolling behavior</li><li>use precomputed waveform data</li></ul></p>`,5),bp={class:"example-display"},Cp=g("audio",{controls:""},[g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),Sp=g("template",null,null,-1),Fa=it({__name:"UsingPeaksConfiguration",setup(t){const e={overview:{waveformColor:"hsl(204, 86%, 53%)",playedWaveformColor:"hsl(204, 71%, 39%)",highlightColor:"hsl(206, 70%, 96%)",highlightOffset:0,axisGridlineColor:"hsl(0, 0%, 29%)",axisLabelColor:"hsl(0, 0%, 29%)"},zoomview:{waveformColor:"hsl(48, 71%, 48%)",playedWaveformColor:"hsl(48, 53%, 31%)",axisGridlineColor:"hsl(0, 0%, 29%)",axisLabelColor:"hsl(0, 0%, 29%)"},webAudio:{audioContext:new AudioContext},zoomLevels:[256],playheadColor:"hsl(348, 100%, 61%)"};return(i,n)=>(me(),Se(ye,null,[wp,g("div",bp,[ee(Pt,{options:e},{controls:Le(()=>[Sp]),default:Le(()=>[Cp]),_:1})])],64))}}),an=t=>(Qn("data-v-62b9bc7a"),t=t(),er(),t),Tp={class:"widget"},xp=["disabled"],kp={key:0,style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Ap=an(()=>g("path",{fill:"currentColor",d:"M14,19H18V5H14M6,19H10V5H6V19Z"},null,-1)),Pp=[Ap],Ep={key:1,style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Ip=an(()=>g("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"},null,-1)),Lp=[Ip],Mp=an(()=>g("template",null,null,-1)),Dp=["src"],Op=an(()=>g("template",null,null,-1)),Rp={class:"item peaks-overview",id:"widgetOverview"},Wp={key:0,class:"spin",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Fp=an(()=>g("path",{fill:"currentColor",d:"M12 19C13.1 19 14 19.9 14 21S13.1 23 12 23 10 22.1 10 21 10.9 19 12 19M12 1C13.1 1 14 1.9 14 3S13.1 5 12 5 10 4.1 10 3 10.9 1 12 1M6 16C7.1 16 8 16.9 8 18S7.1 20 6 20 4 19.1 4 18 4.9 16 6 16M3 10C4.1 10 5 10.9 5 12S4.1 14 3 14 1 13.1 1 12 1.9 10 3 10M6 4C7.1 4 8 4.9 8 6S7.1 8 6 8 4 7.1 4 6 4.9 4 6 4M18 16C19.1 16 20 16.9 20 18S19.1 20 18 20 16 19.1 16 18 16.9 16 18 16M21 10C22.1 10 23 10.9 23 12S22.1 14 21 14 19 13.1 19 12 19.9 10 21 10M18 4C19.1 4 20 4.9 20 6S19.1 8 18 8 16 7.1 16 6 16.9 4 18 4Z"},null,-1)),Gp=[Fp],Hp={key:1},zp=it({__name:"AudioPeaksWidget",props:{src:null},setup(t){const e=t,i={overview:{waveformColor:"hsl(141, 53%, 53%)",playedWaveformColor:"hsl(141, 53%, 31%)",showAxisLabels:!1,axisGridlineColor:"hsl(0, 0%, 100%)"},webAudio:{audioContext:new AudioContext},playheadColor:"hsl(348, 100%, 61%)"},n=pt(null),r=Ti({isPlaying:!1,canPlay:!1});function s(){var a,o;r.isPlaying=!r.isPlaying,r.isPlaying?(a=n.value)==null||a.play():(o=n.value)==null||o.pause()}return(a,o)=>(me(),Se("div",Tp,[g("button",{class:"item",onClick:o[0]||(o[0]=l=>s()),disabled:!r.canPlay},[r.isPlaying?(me(),Se("svg",kp,Pp)):(me(),Se("svg",Ep,Lp))],8,xp),ee(Pt,{overviewElementId:"widgetOverview",ref:"audioPeaksWidget",options:i},{zoomview:Le(()=>[Mp]),default:Le(()=>[g("audio",{ref_key:"audio",ref:n,onCanplay:o[1]||(o[1]=()=>{r.canPlay=!0})},[g("source",{src:e.src},null,8,Dp)],544)]),controls:Le(()=>[Op]),_:1},512),g("div",Rp,[e.src?(me(),Se("svg",Wp,Gp)):(me(),Se("span",Hp,"no URL available"))])]))}});const Bp=Dt(zp,[["__scopeId","data-v-62b9bc7a"]]),ks=t=>(Qn("data-v-97a78f1d"),t=t(),er(),t),Vp=ks(()=>g("h1",null,"A waveform player widget",-1)),Np=ks(()=>g("p",null," This is a showcase for a simple snippets player. This player is available as ready-made component, which you can use as-is or copy and adapt it to your needs.",-1)),Up=ks(()=>g("pre",null,[g("code",null,`
    import AudioPeaksWidget from '../components/AudioPeaksWidget.vue';
    <div class="example-display">
    <AudioPeaksWidget src="https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"></AudioPeaksWidget>
    </div>
  `)],-1)),Xp={class:"example-display"},Yp=it({__name:"DemoWidget",setup(t){const e=Ti({url:""});return(i,n)=>(me(),Se(ye,null,[Vp,Np,Up,g("div",Xp,[wo(g("input",{type:"url","onUpdate:modelValue":n[0]||(n[0]=r=>e.url=r),placeholder:"Paste an URL to a media file"},null,512),[[zd,e.url]]),(me(),nr(Bp,{src:e.url,key:e.url},null,8,["src"]))])],64))}});const Kp=Dt(Yp,[["__scopeId","data-v-97a78f1d"]]),jp=g("h1",null,"Using reactivity",-1),Zp=g("p",null," AudioPeaks currently does not support reactivity for the options. Still, you can use Vue's reactivity on the component itself. You can for example: ",-1),$p=g("p",null,[g("ul",null,[g("li",null,[J("Conditionally render the component (by using Vue's built-in "),g("span",{class:"code"},"v-if"),J(" directive). This also releases memory used. ")]),g("li",null,[J("Replace the media source by setting the "),g("span",{class:"code"},"src"),J(" attribute of the audio element. When you also set the "),g("span",{class:"code"},":key"),J(" property to a new value, the component re-renders. This is called the key-changing technique")])])],-1),qp={class:"example-display"},Jp=J("Example button to create and destroy an AudioPeaks instance: "),Qp=J("Example menu to change the media URL, with automatic re-rendering of the component. "),e_=g("option",{value:""},"-select option-",-1),t_=g("option",{value:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"},"An MP3 music file",-1),i_=g("option",{value:"https://suterma.github.io/vue-peaks/lidija_roos-decisions.ogg"},"An OGG music file",-1),n_=g("option",{value:"https://twit.cachefly.net/audio/sn/sn0886/sn0886.mp3"},"Security Now! Podcast, Episode #886: Wacky Data Exfiltration (112 min, 55.5MB, MP3)",-1),r_=[e_,t_,i_,n_],s_=["src"],a_=it({__name:"UsingReactivity",setup(t){const e=Ti({isRendered:!0,mediaSource:""});function i(){const n=e.isRendered;console.log("CurrentState",n),e.isRendered=!n}return(n,r)=>(me(),Se(ye,null,[jp,Zp,$p,g("div",qp,[g("div",null,[g("label",null,[Jp,g("button",{onClick:r[0]||(r[0]=s=>i()),class:"highlight"},[g("span",null,Dn(e.isRendered?"Destroy":"Render"),1)])])]),g("div",null,[g("label",null,[Qp,wo(g("select",{"onUpdate:modelValue":r[1]||(r[1]=s=>e.mediaSource=s),class:"highlight"},r_,512),[[Bd,e.mediaSource]])])]),e.isRendered?(me(),nr(Pt,{key:e.mediaSource},{default:Le(()=>[g("audio",{controls:"",src:e.mediaSource},null,8,s_)]),_:1})):En("",!0)]),g("pre",null,`<div>
  <label>Example button to create and destroy an AudioPeaks instance:
    <button @click="toggleRendering()" class="highlight">
      <span>`+Dn(e.isRendered?"Destroy":"Render")+`</span>
    </button>
  </label>
</div>
<div>
  <label>Example menu to change the media URL, with automatic re-rendering of the component.
    <select v-model="state.mediaSource" class="highlight">
      <option value="https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3">An MP3 music file</option>
      <option value="https://suterma.github.io/vue-peaks/lidija_roos-decisions.ogg">An OGG music file</option>
      <option value="https://media.grc.com/sn/sn-886-lq.mp3">Security Now! Podcast, Episode #886: Wacky Data
        Exfiltration, 112 min, 13MB MP3 (16kbps)</option>
      <option value="https://pdst.fm/e/cdn.twit.tv/audio/sn/sn0886/sn0886.mp3">Security Now! Podcast, Episode #886:
        Wacky Data
        Exfiltration, 112 min, 55.5MB MP3</option>
      <option value="">none</option>
    </select>
  </label>
</div>
<AudioPeaks v-if="state.isRendered" :key="state.mediaSource">
  <audio controls :src="state.mediaSource"></audio>
</AudioPeaks>`,1)],64))}}),pr=t=>(Qn("data-v-57583192"),t=t(),er(),t),o_=pr(()=>g("img",{alt:"Vue logo",class:"logo",src:Yd,width:"125",height:"125"},null,-1)),l_={class:"wrapper"},h_={class:"example"},d_={class:"example"},u_={class:"example"},f_={class:"example"},c_=pr(()=>g("article",null,[g("h1",null,"Accessing the peaks.js instance"),g("p",null,[J(" In the hosting component, get a reference to the AudioPeaks child component: "),g("pre",null,[g("code",null,"const audioPeaksWidget = ref<InstanceType<typeof AudioPeaks>>()")]),J(" Then, you can access the instance and it's methods by using the reference: "),g("pre",null,[g("code",null,"audioPeaksWidget.value?.peaksInstance?.player.play();")]),J(" Remember, that the instance is only available only after the child has been mounted and peaks.js has been initialized. ")])],-1)),p_={class:"example"},__={class:"example"},g_={class:"example"},m_=pr(()=>g("hr",null,null,-1)),v_=pr(()=>g("div",null,[g("p",null,[g("a",{href:"https://github.com/suterma/vue-peaks"},"vue-peaks"),J(" is created with love by "),g("a",{href:"https://marcelsuter.ch"},"Marcel Suter"),J(" for the "),g("a",{href:"http://replayer.app"},"Replayer"),J(" project. ")])],-1)),y_=it({__name:"App",setup(t){return(e,i)=>(me(),Se(ye,null,[g("header",null,[o_,g("div",l_,[ee(Jd,{msg:"vue-peaks"})])]),g("main",null,[ee(wu)]),g("section",null,[g("article",h_,[ee(Jc)]),g("article",d_,[ee(np)]),g("article",u_,[ee(yp)]),g("article",f_,[ee(Fa)]),c_,g("article",p_,[ee(a_)]),g("article",__,[ee(Fa)]),g("article",g_,[ee(Kp)]),m_,v_])],64))}});const w_=Dt(y_,[["__scopeId","data-v-57583192"]]);Ud(w_).mount("#app");
//# sourceMappingURL=index.9c605ad6.js.map
