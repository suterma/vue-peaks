(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function Dr(e,t){const i=Object.create(null),n=e.split(",");for(let s=0;s<n.length;s++)i[n[s]]=!0;return t?s=>!!i[s.toLowerCase()]:s=>!!i[s]}const Ie={},Ui=[],wt=()=>{},wh=()=>!1,Sh=/^on[^a-z]/,ks=e=>Sh.test(e),Lr=e=>e.startsWith("onUpdate:"),ze=Object.assign,Rr=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Ch=Object.prototype.hasOwnProperty,ye=(e,t)=>Ch.call(e,t),re=Array.isArray,Hi=e=>Pn(e)==="[object Map]",Es=e=>Pn(e)==="[object Set]",pa=e=>Pn(e)==="[object Date]",ge=e=>typeof e=="function",$e=e=>typeof e=="string",mn=e=>typeof e=="symbol",Me=e=>e!==null&&typeof e=="object",Po=e=>Me(e)&&ge(e.then)&&ge(e.catch),Io=Object.prototype.toString,Pn=e=>Io.call(e),Th=e=>Pn(e).slice(8,-1),Mo=e=>Pn(e)==="[object Object]",Fr=e=>$e(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,is=Dr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xs=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},kh=/-(\w)/g,Ot=xs(e=>e.replace(kh,(t,i)=>i?i.toUpperCase():"")),Eh=/\B([A-Z])/g,Yi=xs(e=>e.replace(Eh,"-$1").toLowerCase()),As=xs(e=>e.charAt(0).toUpperCase()+e.slice(1)),er=xs(e=>e?`on${As(e)}`:""),vn=(e,t)=>!Object.is(e,t),ns=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},cs=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},ds=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _a;const ur=()=>_a||(_a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ps(e){if(re(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=$e(n)?Ih(n):Ps(n);if(s)for(const r in s)t[r]=s[r]}return t}else{if($e(e))return e;if(Me(e))return e}}const xh=/;(?![^(]*\))/g,Ah=/:([^]+)/,Ph=/\/\*[^]*?\*\//g;function Ih(e){const t={};return e.replace(Ph,"").split(xh).forEach(i=>{if(i){const n=i.split(Ah);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Nr(e){let t="";if($e(e))t=e;else if(re(e))for(let i=0;i<e.length;i++){const n=Nr(e[i]);n&&(t+=n+" ")}else if(Me(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Mh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Oh=Dr(Mh);function Oo(e){return!!e||e===""}function Dh(e,t){if(e.length!==t.length)return!1;let i=!0;for(let n=0;i&&n<e.length;n++)i=Is(e[n],t[n]);return i}function Is(e,t){if(e===t)return!0;let i=pa(e),n=pa(t);if(i||n)return i&&n?e.getTime()===t.getTime():!1;if(i=mn(e),n=mn(t),i||n)return e===t;if(i=re(e),n=re(t),i||n)return i&&n?Dh(e,t):!1;if(i=Me(e),n=Me(t),i||n){if(!i||!n)return!1;const s=Object.keys(e).length,r=Object.keys(t).length;if(s!==r)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!Is(e[a],t[a]))return!1}}return String(e)===String(t)}function Lh(e,t){return e.findIndex(i=>Is(i,t))}const Wr=e=>$e(e)?e:e==null?"":re(e)||Me(e)&&(e.toString===Io||!ge(e.toString))?JSON.stringify(e,Do,2):String(e),Do=(e,t)=>t&&t.__v_isRef?Do(e,t.value):Hi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[n,s])=>(i[`${n} =>`]=s,i),{})}:Es(t)?{[`Set(${t.size})`]:[...t.values()]}:Me(t)&&!re(t)&&!Mo(t)?String(t):t;let lt;class Rh{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=lt,!t&&lt&&(this.index=(lt.scopes||(lt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const i=lt;try{return lt=this,t()}finally{lt=i}}}on(){lt=this}off(){lt=this.parent}stop(t){if(this._active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Fh(e,t=lt){t&&t.active&&t.effects.push(e)}function Lo(){return lt}function Nh(e){lt&&lt.cleanups.push(e)}const Br=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Ro=e=>(e.w&ti)>0,Fo=e=>(e.n&ti)>0,Wh=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ti},Bh=e=>{const{deps:t}=e;if(t.length){let i=0;for(let n=0;n<t.length;n++){const s=t[n];Ro(s)&&!Fo(s)?s.delete(e):t[i++]=s,s.w&=~ti,s.n&=~ti}t.length=i}},fr=new WeakMap;let on=0,ti=1;const gr=30;let vt;const Ci=Symbol(""),pr=Symbol("");class Gr{constructor(t,i=null,n){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Fh(this,n)}run(){if(!this.active)return this.fn();let t=vt,i=Jt;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=vt,vt=this,Jt=!0,ti=1<<++on,on<=gr?Wh(this):ma(this),this.fn()}finally{on<=gr&&Bh(this),ti=1<<--on,vt=this.parent,Jt=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){vt===this?this.deferStop=!0:this.active&&(ma(this),this.onStop&&this.onStop(),this.active=!1)}}function ma(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let Jt=!0;const No=[];function Zi(){No.push(Jt),Jt=!1}function qi(){const e=No.pop();Jt=e===void 0?!0:e}function st(e,t,i){if(Jt&&vt){let n=fr.get(e);n||fr.set(e,n=new Map);let s=n.get(i);s||n.set(i,s=Br()),Wo(s)}}function Wo(e,t){let i=!1;on<=gr?Fo(e)||(e.n|=ti,i=!Ro(e)):i=!e.has(vt),i&&(e.add(vt),vt.deps.push(e))}function Ut(e,t,i,n,s,r){const a=fr.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(i==="length"&&re(e)){const l=Number(n);a.forEach((h,d)=>{(d==="length"||d>=l)&&o.push(h)})}else switch(i!==void 0&&o.push(a.get(i)),t){case"add":re(e)?Fr(i)&&o.push(a.get("length")):(o.push(a.get(Ci)),Hi(e)&&o.push(a.get(pr)));break;case"delete":re(e)||(o.push(a.get(Ci)),Hi(e)&&o.push(a.get(pr)));break;case"set":Hi(e)&&o.push(a.get(Ci));break}if(o.length===1)o[0]&&_r(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);_r(Br(l))}}function _r(e,t){const i=re(e)?e:[...e];for(const n of i)n.computed&&va(n);for(const n of i)n.computed||va(n)}function va(e,t){(e!==vt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Gh=Dr("__proto__,__v_isRef,__isVue"),Bo=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(mn)),Uh=Ur(),Hh=Ur(!1,!0),Vh=Ur(!0),ya=zh();function zh(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const n=Se(this);for(let r=0,a=this.length;r<a;r++)st(n,"get",r+"");const s=n[t](...i);return s===-1||s===!1?n[t](...i.map(Se)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){Zi();const n=Se(this)[t].apply(this,i);return qi(),n}}),e}function $h(e){const t=Se(this);return st(t,"has",e),t.hasOwnProperty(e)}function Ur(e=!1,t=!1){return function(n,s,r){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&r===(e?t?oc:zo:t?Vo:Ho).get(n))return n;const a=re(n);if(!e){if(a&&ye(ya,s))return Reflect.get(ya,s,r);if(s==="hasOwnProperty")return $h}const o=Reflect.get(n,s,r);return(mn(s)?Bo.has(s):Gh(s))||(e||st(n,"get",s),t)?o:Ze(o)?a&&Fr(s)?o:o.value:Me(o)?e?$o(o):Ai(o):o}}const Xh=Go(),jh=Go(!0);function Go(e=!1){return function(i,n,s,r){let a=i[n];if($i(a)&&Ze(a)&&!Ze(s))return!1;if(!e&&(!us(s)&&!$i(s)&&(a=Se(a),s=Se(s)),!re(i)&&Ze(a)&&!Ze(s)))return a.value=s,!0;const o=re(i)&&Fr(n)?Number(n)<i.length:ye(i,n),l=Reflect.set(i,n,s,r);return i===Se(r)&&(o?vn(s,a)&&Ut(i,"set",n,s):Ut(i,"add",n,s)),l}}function Kh(e,t){const i=ye(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&Ut(e,"delete",t,void 0),n}function Yh(e,t){const i=Reflect.has(e,t);return(!mn(t)||!Bo.has(t))&&st(e,"has",t),i}function Zh(e){return st(e,"iterate",re(e)?"length":Ci),Reflect.ownKeys(e)}const Uo={get:Uh,set:Xh,deleteProperty:Kh,has:Yh,ownKeys:Zh},qh={get:Vh,set(e,t){return!0},deleteProperty(e,t){return!0}},Jh=ze({},Uo,{get:Hh,set:jh}),Hr=e=>e,Ms=e=>Reflect.getPrototypeOf(e);function Un(e,t,i=!1,n=!1){e=e.__v_raw;const s=Se(e),r=Se(t);i||(t!==r&&st(s,"get",t),st(s,"get",r));const{has:a}=Ms(s),o=n?Hr:i?$r:yn;if(a.call(s,t))return o(e.get(t));if(a.call(s,r))return o(e.get(r));e!==s&&e.get(t)}function Hn(e,t=!1){const i=this.__v_raw,n=Se(i),s=Se(e);return t||(e!==s&&st(n,"has",e),st(n,"has",s)),e===s?i.has(e):i.has(e)||i.has(s)}function Vn(e,t=!1){return e=e.__v_raw,!t&&st(Se(e),"iterate",Ci),Reflect.get(e,"size",e)}function ba(e){e=Se(e);const t=Se(this);return Ms(t).has.call(t,e)||(t.add(e),Ut(t,"add",e,e)),this}function wa(e,t){t=Se(t);const i=Se(this),{has:n,get:s}=Ms(i);let r=n.call(i,e);r||(e=Se(e),r=n.call(i,e));const a=s.call(i,e);return i.set(e,t),r?vn(t,a)&&Ut(i,"set",e,t):Ut(i,"add",e,t),this}function Sa(e){const t=Se(this),{has:i,get:n}=Ms(t);let s=i.call(t,e);s||(e=Se(e),s=i.call(t,e)),n&&n.call(t,e);const r=t.delete(e);return s&&Ut(t,"delete",e,void 0),r}function Ca(){const e=Se(this),t=e.size!==0,i=e.clear();return t&&Ut(e,"clear",void 0,void 0),i}function zn(e,t){return function(n,s){const r=this,a=r.__v_raw,o=Se(a),l=t?Hr:e?$r:yn;return!e&&st(o,"iterate",Ci),a.forEach((h,d)=>n.call(s,l(h),l(d),r))}}function $n(e,t,i){return function(...n){const s=this.__v_raw,r=Se(s),a=Hi(r),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=s[e](...n),d=i?Hr:t?$r:yn;return!t&&st(r,"iterate",l?pr:Ci),{next(){const{value:f,done:y}=h.next();return y?{value:f,done:y}:{value:o?[d(f[0]),d(f[1])]:d(f),done:y}},[Symbol.iterator](){return this}}}}function jt(e){return function(...t){return e==="delete"?!1:this}}function Qh(){const e={get(r){return Un(this,r)},get size(){return Vn(this)},has:Hn,add:ba,set:wa,delete:Sa,clear:Ca,forEach:zn(!1,!1)},t={get(r){return Un(this,r,!1,!0)},get size(){return Vn(this)},has:Hn,add:ba,set:wa,delete:Sa,clear:Ca,forEach:zn(!1,!0)},i={get(r){return Un(this,r,!0)},get size(){return Vn(this,!0)},has(r){return Hn.call(this,r,!0)},add:jt("add"),set:jt("set"),delete:jt("delete"),clear:jt("clear"),forEach:zn(!0,!1)},n={get(r){return Un(this,r,!0,!0)},get size(){return Vn(this,!0)},has(r){return Hn.call(this,r,!0)},add:jt("add"),set:jt("set"),delete:jt("delete"),clear:jt("clear"),forEach:zn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=$n(r,!1,!1),i[r]=$n(r,!0,!1),t[r]=$n(r,!1,!0),n[r]=$n(r,!0,!0)}),[e,i,t,n]}const[ec,tc,ic,nc]=Qh();function Vr(e,t){const i=t?e?nc:ic:e?tc:ec;return(n,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(ye(i,s)&&s in n?i:n,s,r)}const sc={get:Vr(!1,!1)},rc={get:Vr(!1,!0)},ac={get:Vr(!0,!1)},Ho=new WeakMap,Vo=new WeakMap,zo=new WeakMap,oc=new WeakMap;function lc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hc(e){return e.__v_skip||!Object.isExtensible(e)?0:lc(Th(e))}function Ai(e){return $i(e)?e:zr(e,!1,Uo,sc,Ho)}function cc(e){return zr(e,!1,Jh,rc,Vo)}function $o(e){return zr(e,!0,qh,ac,zo)}function zr(e,t,i,n,s){if(!Me(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const a=hc(e);if(a===0)return e;const o=new Proxy(e,a===2?n:i);return s.set(e,o),o}function Vi(e){return $i(e)?Vi(e.__v_raw):!!(e&&e.__v_isReactive)}function $i(e){return!!(e&&e.__v_isReadonly)}function us(e){return!!(e&&e.__v_isShallow)}function Xo(e){return Vi(e)||$i(e)}function Se(e){const t=e&&e.__v_raw;return t?Se(t):e}function jo(e){return cs(e,"__v_skip",!0),e}const yn=e=>Me(e)?Ai(e):e,$r=e=>Me(e)?$o(e):e;function Ko(e){Jt&&vt&&(e=Se(e),Wo(e.dep||(e.dep=Br())))}function Yo(e,t){e=Se(e);const i=e.dep;i&&_r(i)}function Ze(e){return!!(e&&e.__v_isRef===!0)}function Zo(e){return qo(e,!1)}function mt(e){return qo(e,!0)}function qo(e,t){return Ze(e)?e:new dc(e,t)}class dc{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:Se(t),this._value=i?t:yn(t)}get value(){return Ko(this),this._value}set value(t){const i=this.__v_isShallow||us(t)||$i(t);t=i?t:Se(t),vn(t,this._rawValue)&&(this._rawValue=t,this._value=i?t:yn(t),Yo(this))}}function Jo(e){return Ze(e)?e.value:e}const uc={get:(e,t,i)=>Jo(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const s=e[t];return Ze(s)&&!Ze(i)?(s.value=i,!0):Reflect.set(e,t,i,n)}};function Qo(e){return Vi(e)?e:new Proxy(e,uc)}class fc{constructor(t,i,n,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Gr(t,()=>{this._dirty||(this._dirty=!0,Yo(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const t=Se(this);return Ko(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function gc(e,t,i=!1){let n,s;const r=ge(e);return r?(n=e,s=wt):(n=e.get,s=e.set),new fc(n,s,r||!s,i)}function Qt(e,t,i,n){let s;try{s=n?e(...n):e()}catch(r){Os(r,t,i)}return s}function St(e,t,i,n){if(ge(e)){const r=Qt(e,t,i,n);return r&&Po(r)&&r.catch(a=>{Os(a,t,i)}),r}const s=[];for(let r=0;r<e.length;r++)s.push(St(e[r],t,i,n));return s}function Os(e,t,i,n=!0){const s=t?t.vnode:null;if(t){let r=t.parent;const a=t.proxy,o=i;for(;r;){const h=r.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,a,o)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){Qt(l,null,10,[e,a,o]);return}}pc(e,i,s,n)}function pc(e,t,i,n=!0){console.error(e)}let bn=!1,mr=!1;const Ye=[];let It=0;const zi=[];let Bt=null,yi=0;const el=Promise.resolve();let Xr=null;function _c(e){const t=Xr||el;return e?t.then(this?e.bind(this):e):t}function mc(e){let t=It+1,i=Ye.length;for(;t<i;){const n=t+i>>>1;wn(Ye[n])<e?t=n+1:i=n}return t}function jr(e){(!Ye.length||!Ye.includes(e,bn&&e.allowRecurse?It+1:It))&&(e.id==null?Ye.push(e):Ye.splice(mc(e.id),0,e),tl())}function tl(){!bn&&!mr&&(mr=!0,Xr=el.then(nl))}function vc(e){const t=Ye.indexOf(e);t>It&&Ye.splice(t,1)}function yc(e){re(e)?zi.push(...e):(!Bt||!Bt.includes(e,e.allowRecurse?yi+1:yi))&&zi.push(e),tl()}function Ta(e,t=bn?It+1:0){for(;t<Ye.length;t++){const i=Ye[t];i&&i.pre&&(Ye.splice(t,1),t--,i())}}function il(e){if(zi.length){const t=[...new Set(zi)];if(zi.length=0,Bt){Bt.push(...t);return}for(Bt=t,Bt.sort((i,n)=>wn(i)-wn(n)),yi=0;yi<Bt.length;yi++)Bt[yi]();Bt=null,yi=0}}const wn=e=>e.id==null?1/0:e.id,bc=(e,t)=>{const i=wn(e)-wn(t);if(i===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return i};function nl(e){mr=!1,bn=!0,Ye.sort(bc);const t=wt;try{for(It=0;It<Ye.length;It++){const i=Ye[It];i&&i.active!==!1&&Qt(i,null,14)}}finally{It=0,Ye.length=0,il(),bn=!1,Xr=null,(Ye.length||zi.length)&&nl()}}function wc(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||Ie;let s=i;const r=t.startsWith("update:"),a=r&&t.slice(7);if(a&&a in n){const d=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:y}=n[d]||Ie;y&&(s=i.map(p=>$e(p)?p.trim():p)),f&&(s=i.map(ds))}let o,l=n[o=er(t)]||n[o=er(Ot(t))];!l&&r&&(l=n[o=er(Yi(t))]),l&&St(l,e,6,s);const h=n[o+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,St(h,e,6,s)}}function sl(e,t,i=!1){const n=t.emitsCache,s=n.get(e);if(s!==void 0)return s;const r=e.emits;let a={},o=!1;if(!ge(e)){const l=h=>{const d=sl(h,t,!0);d&&(o=!0,ze(a,d))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!o?(Me(e)&&n.set(e,null),null):(re(r)?r.forEach(l=>a[l]=null):ze(a,r),Me(e)&&n.set(e,a),a)}function Ds(e,t){return!e||!ks(t)?!1:(t=t.slice(2).replace(/Once$/,""),ye(e,t[0].toLowerCase()+t.slice(1))||ye(e,Yi(t))||ye(e,t))}let Xe=null,Ls=null;function fs(e){const t=Xe;return Xe=e,Ls=e&&e.type.__scopeId||null,t}function Kr(e){Ls=e}function Yr(){Ls=null}function nt(e,t=Xe,i){if(!t||e._n)return e;const n=(...s)=>{n._d&&Ra(-1);const r=fs(t);let a;try{a=e(...s)}finally{fs(r),n._d&&Ra(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function tr(e){const{type:t,vnode:i,proxy:n,withProxy:s,props:r,propsOptions:[a],slots:o,attrs:l,emit:h,render:d,renderCache:f,data:y,setupState:p,ctx:_,inheritAttrs:b}=e;let v,A;const k=fs(e);try{if(i.shapeFlag&4){const u=s||n;v=Pt(d.call(u,u,f,r,p,y,_)),A=l}else{const u=t;v=Pt(u.length>1?u(r,{attrs:l,slots:o,emit:h}):u(r,null)),A=t.props?l:Sc(l)}}catch(u){un.length=0,Os(u,e,1),v=ne(ii)}let c=v;if(A&&b!==!1){const u=Object.keys(A),{shapeFlag:S}=c;u.length&&S&7&&(a&&u.some(Lr)&&(A=Cc(A,a)),c=Xi(c,A))}return i.dirs&&(c=Xi(c),c.dirs=c.dirs?c.dirs.concat(i.dirs):i.dirs),i.transition&&(c.transition=i.transition),v=c,fs(k),v}const Sc=e=>{let t;for(const i in e)(i==="class"||i==="style"||ks(i))&&((t||(t={}))[i]=e[i]);return t},Cc=(e,t)=>{const i={};for(const n in e)(!Lr(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function Tc(e,t,i){const{props:n,children:s,component:r}=e,{props:a,children:o,patchFlag:l}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?ka(n,a,h):!!a;if(l&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const y=d[f];if(a[y]!==n[y]&&!Ds(h,y))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?ka(n,a,h):!0:!!a;return!1}function ka(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(t[r]!==e[r]&&!Ds(i,r))return!0}return!1}function kc({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const Ec=e=>e.__isSuspense;function xc(e,t){t&&t.pendingBranch?re(e)?t.effects.push(...e):t.effects.push(e):yc(e)}const Xn={};function hn(e,t,i){return rl(e,t,i)}function rl(e,t,{immediate:i,deep:n,flush:s,onTrack:r,onTrigger:a}=Ie){var o;const l=Lo()===((o=Ve)==null?void 0:o.scope)?Ve:null;let h,d=!1,f=!1;if(Ze(e)?(h=()=>e.value,d=us(e)):Vi(e)?(h=()=>e,n=!0):re(e)?(f=!0,d=e.some(u=>Vi(u)||us(u)),h=()=>e.map(u=>{if(Ze(u))return u.value;if(Vi(u))return Si(u);if(ge(u))return Qt(u,l,2)})):ge(e)?t?h=()=>Qt(e,l,2):h=()=>{if(!(l&&l.isUnmounted))return y&&y(),St(e,l,3,[p])}:h=wt,t&&n){const u=h;h=()=>Si(u())}let y,p=u=>{y=k.onStop=()=>{Qt(u,l,4)}},_;if(Cn)if(p=wt,t?i&&St(t,l,3,[h(),f?[]:void 0,p]):h(),s==="sync"){const u=bd();_=u.__watcherHandles||(u.__watcherHandles=[])}else return wt;let b=f?new Array(e.length).fill(Xn):Xn;const v=()=>{if(!!k.active)if(t){const u=k.run();(n||d||(f?u.some((S,M)=>vn(S,b[M])):vn(u,b)))&&(y&&y(),St(t,l,3,[u,b===Xn?void 0:f&&b[0]===Xn?[]:b,p]),b=u)}else k.run()};v.allowRecurse=!!t;let A;s==="sync"?A=v:s==="post"?A=()=>it(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),A=()=>jr(v));const k=new Gr(h,A);t?i?v():b=k.run():s==="post"?it(k.run.bind(k),l&&l.suspense):k.run();const c=()=>{k.stop(),l&&l.scope&&Rr(l.scope.effects,k)};return _&&_.push(c),c}function Ac(e,t,i){const n=this.proxy,s=$e(e)?e.includes(".")?al(n,e):()=>n[e]:e.bind(n,n);let r;ge(t)?r=t:(r=t.handler,i=t);const a=Ve;ji(this);const o=rl(s,r.bind(n),i);return a?ji(a):Ti(),o}function al(e,t){const i=t.split(".");return()=>{let n=e;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}function Si(e,t){if(!Me(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ze(e))Si(e.value,t);else if(re(e))for(let i=0;i<e.length;i++)Si(e[i],t);else if(Es(e)||Hi(e))e.forEach(i=>{Si(i,t)});else if(Mo(e))for(const i in e)Si(e[i],t);return e}function vr(e,t){const i=Xe;if(i===null)return e;const n=Bs(i)||i.proxy,s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[a,o,l,h=Ie]=t[r];a&&(ge(a)&&(a={mounted:a,updated:a}),a.deep&&Si(o),s.push({dir:a,instance:n,value:o,oldValue:void 0,arg:l,modifiers:h}))}return e}function pi(e,t,i,n){const s=e.dirs,r=t&&t.dirs;for(let a=0;a<s.length;a++){const o=s[a];r&&(o.oldValue=r[a].value);let l=o.dir[n];l&&(Zi(),St(l,i,8,[e.el,o,e,t]),qi())}}function Tt(e,t){return ge(e)?(()=>ze({name:e.name},t,{setup:e}))():e}const cn=e=>!!e.type.__asyncLoader,ol=e=>e.type.__isKeepAlive;function Pc(e,t){ll(e,"a",t)}function Ic(e,t){ll(e,"da",t)}function ll(e,t,i=Ve){const n=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Rs(t,n,i),i){let s=i.parent;for(;s&&s.parent;)ol(s.parent.vnode)&&Mc(n,t,i,s),s=s.parent}}function Mc(e,t,i,n){const s=Rs(t,e,n,!0);cl(()=>{Rr(n[t],s)},i)}function Rs(e,t,i=Ve,n=!1){if(i){const s=i[e]||(i[e]=[]),r=t.__weh||(t.__weh=(...a)=>{if(i.isUnmounted)return;Zi(),ji(i);const o=St(t,i,e,a);return Ti(),qi(),o});return n?s.unshift(r):s.push(r),r}}const Ht=e=>(t,i=Ve)=>(!Cn||e==="sp")&&Rs(e,(...n)=>t(...n),i),Oc=Ht("bm"),Zr=Ht("m"),Dc=Ht("bu"),Lc=Ht("u"),hl=Ht("bum"),cl=Ht("um"),Rc=Ht("sp"),Fc=Ht("rtg"),Nc=Ht("rtc");function Wc(e,t=Ve){Rs("ec",e,t)}const dl="components";function Dt(e,t){return Gc(dl,e,!0,t)||e}const Bc=Symbol.for("v-ndc");function Gc(e,t,i=!0,n=!1){const s=Xe||Ve;if(s){const r=s.type;if(e===dl){const o=md(r,!1);if(o&&(o===t||o===Ot(t)||o===As(Ot(t))))return r}const a=Ea(s[e]||r[e],t)||Ea(s.appContext[e],t);return!a&&n?r:a}}function Ea(e,t){return e&&(e[t]||e[Ot(t)]||e[As(Ot(t))])}function jn(e,t,i={},n,s){if(Xe.isCE||Xe.parent&&cn(Xe.parent)&&Xe.parent.isCE)return t!=="default"&&(i.name=t),ne("slot",i,n&&n());let r=e[t];r&&r._c&&(r._d=!1),Ee();const a=r&&ul(r(i)),o=Ns(Qe,{key:i.key||a&&a.key||`_${t}`},a||(n?n():[]),a&&e._===1?64:-2);return!s&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),r&&r._c&&(r._d=!0),o}function ul(e){return e.some(t=>_s(t)?!(t.type===ii||t.type===Qe&&!ul(t.children)):!0)?e:null}const yr=e=>e?Cl(e)?Bs(e)||e.proxy:yr(e.parent):null,dn=ze(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>yr(e.parent),$root:e=>yr(e.root),$emit:e=>e.emit,$options:e=>qr(e),$forceUpdate:e=>e.f||(e.f=()=>jr(e.update)),$nextTick:e=>e.n||(e.n=_c.bind(e.proxy)),$watch:e=>Ac.bind(e)}),ir=(e,t)=>e!==Ie&&!e.__isScriptSetup&&ye(e,t),Uc={get({_:e},t){const{ctx:i,setupState:n,data:s,props:r,accessCache:a,type:o,appContext:l}=e;let h;if(t[0]!=="$"){const p=a[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return s[t];case 4:return i[t];case 3:return r[t]}else{if(ir(n,t))return a[t]=1,n[t];if(s!==Ie&&ye(s,t))return a[t]=2,s[t];if((h=e.propsOptions[0])&&ye(h,t))return a[t]=3,r[t];if(i!==Ie&&ye(i,t))return a[t]=4,i[t];br&&(a[t]=0)}}const d=dn[t];let f,y;if(d)return t==="$attrs"&&st(e,"get",t),d(e);if((f=o.__cssModules)&&(f=f[t]))return f;if(i!==Ie&&ye(i,t))return a[t]=4,i[t];if(y=l.config.globalProperties,ye(y,t))return y[t]},set({_:e},t,i){const{data:n,setupState:s,ctx:r}=e;return ir(s,t)?(s[t]=i,!0):n!==Ie&&ye(n,t)?(n[t]=i,!0):ye(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:s,propsOptions:r}},a){let o;return!!i[a]||e!==Ie&&ye(e,a)||ir(t,a)||(o=r[0])&&ye(o,a)||ye(n,a)||ye(dn,a)||ye(s.config.globalProperties,a)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:ye(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function xa(e){return re(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let br=!0;function Hc(e){const t=qr(e),i=e.proxy,n=e.ctx;br=!1,t.beforeCreate&&Aa(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:a,watch:o,provide:l,inject:h,created:d,beforeMount:f,mounted:y,beforeUpdate:p,updated:_,activated:b,deactivated:v,beforeDestroy:A,beforeUnmount:k,destroyed:c,unmounted:u,render:S,renderTracked:M,renderTriggered:H,errorCaptured:C,serverPrefetch:B,expose:E,inheritAttrs:N,components:q,directives:j,filters:te}=t;if(h&&Vc(h,n,null),a)for(const O in a){const R=a[O];ge(R)&&(n[O]=R.bind(i))}if(s){const O=s.call(i,i);Me(O)&&(e.data=Ai(O))}if(br=!0,r)for(const O in r){const R=r[O],X=ge(R)?R.bind(i,i):ge(R.get)?R.get.bind(i,i):wt,ie=!ge(R)&&ge(R.set)?R.set.bind(i):wt,ee=Zt({get:X,set:ie});Object.defineProperty(n,O,{enumerable:!0,configurable:!0,get:()=>ee.value,set:ue=>ee.value=ue})}if(o)for(const O in o)fl(o[O],n,i,O);if(l){const O=ge(l)?l.call(i):l;Reflect.ownKeys(O).forEach(R=>{Yc(R,O[R])})}d&&Aa(d,e,"c");function de(O,R){re(R)?R.forEach(X=>O(X.bind(i))):R&&O(R.bind(i))}if(de(Oc,f),de(Zr,y),de(Dc,p),de(Lc,_),de(Pc,b),de(Ic,v),de(Wc,C),de(Nc,M),de(Fc,H),de(hl,k),de(cl,u),de(Rc,B),re(E))if(E.length){const O=e.exposed||(e.exposed={});E.forEach(R=>{Object.defineProperty(O,R,{get:()=>i[R],set:X=>i[R]=X})})}else e.exposed||(e.exposed={});S&&e.render===wt&&(e.render=S),N!=null&&(e.inheritAttrs=N),q&&(e.components=q),j&&(e.directives=j)}function Vc(e,t,i=wt){re(e)&&(e=wr(e));for(const n in e){const s=e[n];let r;Me(s)?"default"in s?r=ss(s.from||n,s.default,!0):r=ss(s.from||n):r=ss(s),Ze(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[n]=r}}function Aa(e,t,i){St(re(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function fl(e,t,i,n){const s=n.includes(".")?al(i,n):()=>i[n];if($e(e)){const r=t[e];ge(r)&&hn(s,r)}else if(ge(e))hn(s,e.bind(i));else if(Me(e))if(re(e))e.forEach(r=>fl(r,t,i,n));else{const r=ge(e.handler)?e.handler.bind(i):t[e.handler];ge(r)&&hn(s,r,e)}}function qr(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,o=r.get(t);let l;return o?l=o:!s.length&&!i&&!n?l=t:(l={},s.length&&s.forEach(h=>gs(l,h,a,!0)),gs(l,t,a)),Me(t)&&r.set(t,l),l}function gs(e,t,i,n=!1){const{mixins:s,extends:r}=t;r&&gs(e,r,i,!0),s&&s.forEach(a=>gs(e,a,i,!0));for(const a in t)if(!(n&&a==="expose")){const o=zc[a]||i&&i[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const zc={data:Pa,props:Ia,emits:Ia,methods:ln,computed:ln,beforeCreate:Je,created:Je,beforeMount:Je,mounted:Je,beforeUpdate:Je,updated:Je,beforeDestroy:Je,beforeUnmount:Je,destroyed:Je,unmounted:Je,activated:Je,deactivated:Je,errorCaptured:Je,serverPrefetch:Je,components:ln,directives:ln,watch:Xc,provide:Pa,inject:$c};function Pa(e,t){return t?e?function(){return ze(ge(e)?e.call(this,this):e,ge(t)?t.call(this,this):t)}:t:e}function $c(e,t){return ln(wr(e),wr(t))}function wr(e){if(re(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Je(e,t){return e?[...new Set([].concat(e,t))]:t}function ln(e,t){return e?ze(Object.create(null),e,t):t}function Ia(e,t){return e?re(e)&&re(t)?[...new Set([...e,...t])]:ze(Object.create(null),xa(e),xa(t!=null?t:{})):t}function Xc(e,t){if(!e)return t;if(!t)return e;const i=ze(Object.create(null),e);for(const n in t)i[n]=Je(e[n],t[n]);return i}function gl(){return{app:null,config:{isNativeTag:wh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jc=0;function Kc(e,t){return function(n,s=null){ge(n)||(n=ze({},n)),s!=null&&!Me(s)&&(s=null);const r=gl(),a=new Set;let o=!1;const l=r.app={_uid:jc++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:wd,get config(){return r.config},set config(h){},use(h,...d){return a.has(h)||(h&&ge(h.install)?(a.add(h),h.install(l,...d)):ge(h)&&(a.add(h),h(l,...d))),l},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),l},component(h,d){return d?(r.components[h]=d,l):r.components[h]},directive(h,d){return d?(r.directives[h]=d,l):r.directives[h]},mount(h,d,f){if(!o){const y=ne(n,s);return y.appContext=r,d&&t?t(y,h):e(y,h,f),o=!0,l._container=h,h.__vue_app__=l,Bs(y.component)||y.component.proxy}},unmount(){o&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,d){return r.provides[h]=d,l},runWithContext(h){ps=l;try{return h()}finally{ps=null}}};return l}}let ps=null;function Yc(e,t){if(Ve){let i=Ve.provides;const n=Ve.parent&&Ve.parent.provides;n===i&&(i=Ve.provides=Object.create(n)),i[e]=t}}function ss(e,t,i=!1){const n=Ve||Xe;if(n||ps){const s=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:ps._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return i&&ge(t)?t.call(n&&n.proxy):t}}function Zc(e,t,i,n=!1){const s={},r={};cs(r,Ws,1),e.propsDefaults=Object.create(null),pl(e,t,s,r);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);i?e.props=n?s:cc(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function qc(e,t,i,n){const{props:s,attrs:r,vnode:{patchFlag:a}}=e,o=Se(s),[l]=e.propsOptions;let h=!1;if((n||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let y=d[f];if(Ds(e.emitsOptions,y))continue;const p=t[y];if(l)if(ye(r,y))p!==r[y]&&(r[y]=p,h=!0);else{const _=Ot(y);s[_]=Sr(l,o,_,p,e,!1)}else p!==r[y]&&(r[y]=p,h=!0)}}}else{pl(e,t,s,r)&&(h=!0);let d;for(const f in o)(!t||!ye(t,f)&&((d=Yi(f))===f||!ye(t,d)))&&(l?i&&(i[f]!==void 0||i[d]!==void 0)&&(s[f]=Sr(l,o,f,void 0,e,!0)):delete s[f]);if(r!==o)for(const f in r)(!t||!ye(t,f)&&!0)&&(delete r[f],h=!0)}h&&Ut(e,"set","$attrs")}function pl(e,t,i,n){const[s,r]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(is(l))continue;const h=t[l];let d;s&&ye(s,d=Ot(l))?!r||!r.includes(d)?i[d]=h:(o||(o={}))[d]=h:Ds(e.emitsOptions,l)||(!(l in n)||h!==n[l])&&(n[l]=h,a=!0)}if(r){const l=Se(i),h=o||Ie;for(let d=0;d<r.length;d++){const f=r[d];i[f]=Sr(s,l,f,h[f],e,!ye(h,f))}}return a}function Sr(e,t,i,n,s,r){const a=e[i];if(a!=null){const o=ye(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&ge(l)){const{propsDefaults:h}=s;i in h?n=h[i]:(ji(s),n=h[i]=l.call(null,t),Ti())}else n=l}a[0]&&(r&&!o?n=!1:a[1]&&(n===""||n===Yi(i))&&(n=!0))}return n}function _l(e,t,i=!1){const n=t.propsCache,s=n.get(e);if(s)return s;const r=e.props,a={},o=[];let l=!1;if(!ge(e)){const d=f=>{l=!0;const[y,p]=_l(f,t,!0);ze(a,y),p&&o.push(...p)};!i&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!r&&!l)return Me(e)&&n.set(e,Ui),Ui;if(re(r))for(let d=0;d<r.length;d++){const f=Ot(r[d]);Ma(f)&&(a[f]=Ie)}else if(r)for(const d in r){const f=Ot(d);if(Ma(f)){const y=r[d],p=a[f]=re(y)||ge(y)?{type:y}:ze({},y);if(p){const _=La(Boolean,p.type),b=La(String,p.type);p[0]=_>-1,p[1]=b<0||_<b,(_>-1||ye(p,"default"))&&o.push(f)}}}const h=[a,o];return Me(e)&&n.set(e,h),h}function Ma(e){return e[0]!=="$"}function Oa(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Da(e,t){return Oa(e)===Oa(t)}function La(e,t){return re(t)?t.findIndex(i=>Da(i,e)):ge(t)&&Da(t,e)?0:-1}const ml=e=>e[0]==="_"||e==="$stable",Jr=e=>re(e)?e.map(Pt):[Pt(e)],Jc=(e,t,i)=>{if(t._n)return t;const n=nt((...s)=>Jr(t(...s)),i);return n._c=!1,n},vl=(e,t,i)=>{const n=e._ctx;for(const s in e){if(ml(s))continue;const r=e[s];if(ge(r))t[s]=Jc(s,r,n);else if(r!=null){const a=Jr(r);t[s]=()=>a}}},yl=(e,t)=>{const i=Jr(t);e.slots.default=()=>i},Qc=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=Se(t),cs(t,"_",i)):vl(t,e.slots={})}else e.slots={},t&&yl(e,t);cs(e.slots,Ws,1)},ed=(e,t,i)=>{const{vnode:n,slots:s}=e;let r=!0,a=Ie;if(n.shapeFlag&32){const o=t._;o?i&&o===1?r=!1:(ze(s,t),!i&&o===1&&delete s._):(r=!t.$stable,vl(t,s)),a=t}else t&&(yl(e,t),a={default:1});if(r)for(const o in s)!ml(o)&&!(o in a)&&delete s[o]};function Cr(e,t,i,n,s=!1){if(re(e)){e.forEach((y,p)=>Cr(y,t&&(re(t)?t[p]:t),i,n,s));return}if(cn(n)&&!s)return;const r=n.shapeFlag&4?Bs(n.component)||n.component.proxy:n.el,a=s?null:r,{i:o,r:l}=e,h=t&&t.r,d=o.refs===Ie?o.refs={}:o.refs,f=o.setupState;if(h!=null&&h!==l&&($e(h)?(d[h]=null,ye(f,h)&&(f[h]=null)):Ze(h)&&(h.value=null)),ge(l))Qt(l,o,12,[a,d]);else{const y=$e(l),p=Ze(l);if(y||p){const _=()=>{if(e.f){const b=y?ye(f,l)?f[l]:d[l]:l.value;s?re(b)&&Rr(b,r):re(b)?b.includes(r)||b.push(r):y?(d[l]=[r],ye(f,l)&&(f[l]=d[l])):(l.value=[r],e.k&&(d[e.k]=l.value))}else y?(d[l]=a,ye(f,l)&&(f[l]=a)):p&&(l.value=a,e.k&&(d[e.k]=a))};a?(_.id=-1,it(_,i)):_()}}}const it=xc;function td(e){return id(e)}function id(e,t){const i=ur();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:a,createText:o,createComment:l,setText:h,setElementText:d,parentNode:f,nextSibling:y,setScopeId:p=wt,insertStaticContent:_}=e,b=(g,w,x,P=null,D=null,W=null,V=!1,I=null,z=!!w.dynamicChildren)=>{if(g===w)return;g&&!rn(g,w)&&(P=T(g),ue(g,D,W,!0),g=null),w.patchFlag===-2&&(z=!1,w.dynamicChildren=null);const{type:L,ref:$,shapeFlag:Z}=w;switch(L){case Fs:v(g,w,x,P);break;case ii:A(g,w,x,P);break;case rs:g==null&&k(w,x,P,V);break;case Qe:q(g,w,x,P,D,W,V,I,z);break;default:Z&1?S(g,w,x,P,D,W,V,I,z):Z&6?j(g,w,x,P,D,W,V,I,z):(Z&64||Z&128)&&L.process(g,w,x,P,D,W,V,I,z,Y)}$!=null&&D&&Cr($,g&&g.ref,W,w||g,!w)},v=(g,w,x,P)=>{if(g==null)n(w.el=o(w.children),x,P);else{const D=w.el=g.el;w.children!==g.children&&h(D,w.children)}},A=(g,w,x,P)=>{g==null?n(w.el=l(w.children||""),x,P):w.el=g.el},k=(g,w,x,P)=>{[g.el,g.anchor]=_(g.children,w,x,P,g.el,g.anchor)},c=({el:g,anchor:w},x,P)=>{let D;for(;g&&g!==w;)D=y(g),n(g,x,P),g=D;n(w,x,P)},u=({el:g,anchor:w})=>{let x;for(;g&&g!==w;)x=y(g),s(g),g=x;s(w)},S=(g,w,x,P,D,W,V,I,z)=>{V=V||w.type==="svg",g==null?M(w,x,P,D,W,V,I,z):B(g,w,D,W,V,I,z)},M=(g,w,x,P,D,W,V,I)=>{let z,L;const{type:$,props:Z,shapeFlag:J,transition:oe,dirs:pe}=g;if(z=g.el=a(g.type,W,Z&&Z.is,Z),J&8?d(z,g.children):J&16&&C(g.children,z,null,P,D,W&&$!=="foreignObject",V,I),pe&&pi(g,null,P,"created"),H(z,g,g.scopeId,V,P),Z){for(const U in Z)U!=="value"&&!is(U)&&r(z,U,null,Z[U],W,g.children,P,D,me);"value"in Z&&r(z,"value",null,Z.value),(L=Z.onVnodeBeforeMount)&&At(L,P,g)}pe&&pi(g,null,P,"beforeMount");const F=(!D||D&&!D.pendingBranch)&&oe&&!oe.persisted;F&&oe.beforeEnter(z),n(z,w,x),((L=Z&&Z.onVnodeMounted)||F||pe)&&it(()=>{L&&At(L,P,g),F&&oe.enter(z),pe&&pi(g,null,P,"mounted")},D)},H=(g,w,x,P,D)=>{if(x&&p(g,x),P)for(let W=0;W<P.length;W++)p(g,P[W]);if(D){let W=D.subTree;if(w===W){const V=D.vnode;H(g,V,V.scopeId,V.slotScopeIds,D.parent)}}},C=(g,w,x,P,D,W,V,I,z=0)=>{for(let L=z;L<g.length;L++){const $=g[L]=I?Yt(g[L]):Pt(g[L]);b(null,$,w,x,P,D,W,V,I)}},B=(g,w,x,P,D,W,V)=>{const I=w.el=g.el;let{patchFlag:z,dynamicChildren:L,dirs:$}=w;z|=g.patchFlag&16;const Z=g.props||Ie,J=w.props||Ie;let oe;x&&_i(x,!1),(oe=J.onVnodeBeforeUpdate)&&At(oe,x,w,g),$&&pi(w,g,x,"beforeUpdate"),x&&_i(x,!0);const pe=D&&w.type!=="foreignObject";if(L?E(g.dynamicChildren,L,I,x,P,pe,W):V||R(g,w,I,null,x,P,pe,W,!1),z>0){if(z&16)N(I,w,Z,J,x,P,D);else if(z&2&&Z.class!==J.class&&r(I,"class",null,J.class,D),z&4&&r(I,"style",Z.style,J.style,D),z&8){const F=w.dynamicProps;for(let U=0;U<F.length;U++){const Q=F[U],fe=Z[Q],De=J[Q];(De!==fe||Q==="value")&&r(I,Q,fe,De,D,g.children,x,P,me)}}z&1&&g.children!==w.children&&d(I,w.children)}else!V&&L==null&&N(I,w,Z,J,x,P,D);((oe=J.onVnodeUpdated)||$)&&it(()=>{oe&&At(oe,x,w,g),$&&pi(w,g,x,"updated")},P)},E=(g,w,x,P,D,W,V)=>{for(let I=0;I<w.length;I++){const z=g[I],L=w[I],$=z.el&&(z.type===Qe||!rn(z,L)||z.shapeFlag&70)?f(z.el):x;b(z,L,$,null,P,D,W,V,!0)}},N=(g,w,x,P,D,W,V)=>{if(x!==P){if(x!==Ie)for(const I in x)!is(I)&&!(I in P)&&r(g,I,x[I],null,V,w.children,D,W,me);for(const I in P){if(is(I))continue;const z=P[I],L=x[I];z!==L&&I!=="value"&&r(g,I,L,z,V,w.children,D,W,me)}"value"in P&&r(g,"value",x.value,P.value)}},q=(g,w,x,P,D,W,V,I,z)=>{const L=w.el=g?g.el:o(""),$=w.anchor=g?g.anchor:o("");let{patchFlag:Z,dynamicChildren:J,slotScopeIds:oe}=w;oe&&(I=I?I.concat(oe):oe),g==null?(n(L,x,P),n($,x,P),C(w.children,x,$,D,W,V,I,z)):Z>0&&Z&64&&J&&g.dynamicChildren?(E(g.dynamicChildren,J,x,D,W,V,I),(w.key!=null||D&&w===D.subTree)&&bl(g,w,!0)):R(g,w,x,$,D,W,V,I,z)},j=(g,w,x,P,D,W,V,I,z)=>{w.slotScopeIds=I,g==null?w.shapeFlag&512?D.ctx.activate(w,x,P,V,z):te(w,x,P,D,W,V,z):le(g,w,z)},te=(g,w,x,P,D,W,V)=>{const I=g.component=dd(g,P,D);if(ol(g)&&(I.ctx.renderer=Y),fd(I),I.asyncDep){if(D&&D.registerDep(I,de),!g.el){const z=I.subTree=ne(ii);A(null,z,w,x)}return}de(I,g,w,x,D,W,V)},le=(g,w,x)=>{const P=w.component=g.component;if(Tc(g,w,x))if(P.asyncDep&&!P.asyncResolved){O(P,w,x);return}else P.next=w,vc(P.update),P.update();else w.el=g.el,P.vnode=w},de=(g,w,x,P,D,W,V)=>{const I=()=>{if(g.isMounted){let{next:$,bu:Z,u:J,parent:oe,vnode:pe}=g,F=$,U;_i(g,!1),$?($.el=pe.el,O(g,$,V)):$=pe,Z&&ns(Z),(U=$.props&&$.props.onVnodeBeforeUpdate)&&At(U,oe,$,pe),_i(g,!0);const Q=tr(g),fe=g.subTree;g.subTree=Q,b(fe,Q,f(fe.el),T(fe),g,D,W),$.el=Q.el,F===null&&kc(g,Q.el),J&&it(J,D),(U=$.props&&$.props.onVnodeUpdated)&&it(()=>At(U,oe,$,pe),D)}else{let $;const{el:Z,props:J}=w,{bm:oe,m:pe,parent:F}=g,U=cn(w);if(_i(g,!1),oe&&ns(oe),!U&&($=J&&J.onVnodeBeforeMount)&&At($,F,w),_i(g,!0),Z&&ve){const Q=()=>{g.subTree=tr(g),ve(Z,g.subTree,g,D,null)};U?w.type.__asyncLoader().then(()=>!g.isUnmounted&&Q()):Q()}else{const Q=g.subTree=tr(g);b(null,Q,x,P,g,D,W),w.el=Q.el}if(pe&&it(pe,D),!U&&($=J&&J.onVnodeMounted)){const Q=w;it(()=>At($,F,Q),D)}(w.shapeFlag&256||F&&cn(F.vnode)&&F.vnode.shapeFlag&256)&&g.a&&it(g.a,D),g.isMounted=!0,w=x=P=null}},z=g.effect=new Gr(I,()=>jr(L),g.scope),L=g.update=()=>z.run();L.id=g.uid,_i(g,!0),L()},O=(g,w,x)=>{w.component=g;const P=g.vnode.props;g.vnode=w,g.next=null,qc(g,w.props,P,x),ed(g,w.children,x),Zi(),Ta(),qi()},R=(g,w,x,P,D,W,V,I,z=!1)=>{const L=g&&g.children,$=g?g.shapeFlag:0,Z=w.children,{patchFlag:J,shapeFlag:oe}=w;if(J>0){if(J&128){ie(L,Z,x,P,D,W,V,I,z);return}else if(J&256){X(L,Z,x,P,D,W,V,I,z);return}}oe&8?($&16&&me(L,D,W),Z!==L&&d(x,Z)):$&16?oe&16?ie(L,Z,x,P,D,W,V,I,z):me(L,D,W,!0):($&8&&d(x,""),oe&16&&C(Z,x,P,D,W,V,I,z))},X=(g,w,x,P,D,W,V,I,z)=>{g=g||Ui,w=w||Ui;const L=g.length,$=w.length,Z=Math.min(L,$);let J;for(J=0;J<Z;J++){const oe=w[J]=z?Yt(w[J]):Pt(w[J]);b(g[J],oe,x,null,D,W,V,I,z)}L>$?me(g,D,W,!0,!1,Z):C(w,x,P,D,W,V,I,z,Z)},ie=(g,w,x,P,D,W,V,I,z)=>{let L=0;const $=w.length;let Z=g.length-1,J=$-1;for(;L<=Z&&L<=J;){const oe=g[L],pe=w[L]=z?Yt(w[L]):Pt(w[L]);if(rn(oe,pe))b(oe,pe,x,null,D,W,V,I,z);else break;L++}for(;L<=Z&&L<=J;){const oe=g[Z],pe=w[J]=z?Yt(w[J]):Pt(w[J]);if(rn(oe,pe))b(oe,pe,x,null,D,W,V,I,z);else break;Z--,J--}if(L>Z){if(L<=J){const oe=J+1,pe=oe<$?w[oe].el:P;for(;L<=J;)b(null,w[L]=z?Yt(w[L]):Pt(w[L]),x,pe,D,W,V,I,z),L++}}else if(L>J)for(;L<=Z;)ue(g[L],D,W,!0),L++;else{const oe=L,pe=L,F=new Map;for(L=pe;L<=J;L++){const ot=w[L]=z?Yt(w[L]):Pt(w[L]);ot.key!=null&&F.set(ot.key,L)}let U,Q=0;const fe=J-pe+1;let De=!1,dt=0;const gi=new Array(fe);for(L=0;L<fe;L++)gi[L]=0;for(L=oe;L<=Z;L++){const ot=g[L];if(Q>=fe){ue(ot,D,W,!0);continue}let xt;if(ot.key!=null)xt=F.get(ot.key);else for(U=pe;U<=J;U++)if(gi[U-pe]===0&&rn(ot,w[U])){xt=U;break}xt===void 0?ue(ot,D,W,!0):(gi[xt-pe]=L+1,xt>=dt?dt=xt:De=!0,b(ot,w[xt],x,null,D,W,V,I,z),Q++)}const Gn=De?nd(gi):Ui;for(U=Gn.length-1,L=fe-1;L>=0;L--){const ot=pe+L,xt=w[ot],ga=ot+1<$?w[ot+1].el:P;gi[L]===0?b(null,xt,x,ga,D,W,V,I,z):De&&(U<0||L!==Gn[U]?ee(xt,x,ga,2):U--)}}},ee=(g,w,x,P,D=null)=>{const{el:W,type:V,transition:I,children:z,shapeFlag:L}=g;if(L&6){ee(g.component.subTree,w,x,P);return}if(L&128){g.suspense.move(w,x,P);return}if(L&64){V.move(g,w,x,Y);return}if(V===Qe){n(W,w,x);for(let Z=0;Z<z.length;Z++)ee(z[Z],w,x,P);n(g.anchor,w,x);return}if(V===rs){c(g,w,x);return}if(P!==2&&L&1&&I)if(P===0)I.beforeEnter(W),n(W,w,x),it(()=>I.enter(W),D);else{const{leave:Z,delayLeave:J,afterLeave:oe}=I,pe=()=>n(W,w,x),F=()=>{Z(W,()=>{pe(),oe&&oe()})};J?J(W,pe,F):F()}else n(W,w,x)},ue=(g,w,x,P=!1,D=!1)=>{const{type:W,props:V,ref:I,children:z,dynamicChildren:L,shapeFlag:$,patchFlag:Z,dirs:J}=g;if(I!=null&&Cr(I,null,x,g,!0),$&256){w.ctx.deactivate(g);return}const oe=$&1&&J,pe=!cn(g);let F;if(pe&&(F=V&&V.onVnodeBeforeUnmount)&&At(F,w,g),$&6)Pe(g.component,x,P);else{if($&128){g.suspense.unmount(x,P);return}oe&&pi(g,null,w,"beforeUnmount"),$&64?g.type.remove(g,w,x,D,Y,P):L&&(W!==Qe||Z>0&&Z&64)?me(L,w,x,!1,!0):(W===Qe&&Z&384||!D&&$&16)&&me(z,w,x),P&&we(g)}(pe&&(F=V&&V.onVnodeUnmounted)||oe)&&it(()=>{F&&At(F,w,g),oe&&pi(g,null,w,"unmounted")},x)},we=g=>{const{type:w,el:x,anchor:P,transition:D}=g;if(w===Qe){Oe(x,P);return}if(w===rs){u(g);return}const W=()=>{s(x),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(g.shapeFlag&1&&D&&!D.persisted){const{leave:V,delayLeave:I}=D,z=()=>V(x,W);I?I(g.el,W,z):z()}else W()},Oe=(g,w)=>{let x;for(;g!==w;)x=y(g),s(g),g=x;s(w)},Pe=(g,w,x)=>{const{bum:P,scope:D,update:W,subTree:V,um:I}=g;P&&ns(P),D.stop(),W&&(W.active=!1,ue(V,g,w,x)),I&&it(I,w),it(()=>{g.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},me=(g,w,x,P=!1,D=!1,W=0)=>{for(let V=W;V<g.length;V++)ue(g[V],w,x,P,D)},T=g=>g.shapeFlag&6?T(g.component.subTree):g.shapeFlag&128?g.suspense.next():y(g.anchor||g.el),G=(g,w,x)=>{g==null?w._vnode&&ue(w._vnode,null,null,!0):b(w._vnode||null,g,w,null,null,null,x),Ta(),il(),w._vnode=g},Y={p:b,um:ue,m:ee,r:we,mt:te,mc:C,pc:R,pbc:E,n:T,o:e};let Te,ve;return t&&([Te,ve]=t(Y)),{render:G,hydrate:Te,createApp:Kc(G,Te)}}function _i({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function bl(e,t,i=!1){const n=e.children,s=t.children;if(re(n)&&re(s))for(let r=0;r<n.length;r++){const a=n[r];let o=s[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[r]=Yt(s[r]),o.el=a.el),i||bl(a,o)),o.type===Fs&&(o.el=a.el)}}function nd(e){const t=e.slice(),i=[0];let n,s,r,a,o;const l=e.length;for(n=0;n<l;n++){const h=e[n];if(h!==0){if(s=i[i.length-1],e[s]<h){t[n]=s,i.push(n);continue}for(r=0,a=i.length-1;r<a;)o=r+a>>1,e[i[o]]<h?r=o+1:a=o;h<e[i[r]]&&(r>0&&(t[n]=i[r-1]),i[r]=n)}}for(r=i.length,a=i[r-1];r-- >0;)i[r]=a,a=t[a];return i}const sd=e=>e.__isTeleport,Qe=Symbol.for("v-fgt"),Fs=Symbol.for("v-txt"),ii=Symbol.for("v-cmt"),rs=Symbol.for("v-stc"),un=[];let yt=null;function Ee(e=!1){un.push(yt=e?null:[])}function rd(){un.pop(),yt=un[un.length-1]||null}let Sn=1;function Ra(e){Sn+=e}function wl(e){return e.dynamicChildren=Sn>0?yt||Ui:null,rd(),Sn>0&&yt&&yt.push(e),e}function Le(e,t,i,n,s,r){return wl(m(e,t,i,n,s,r,!0))}function Ns(e,t,i,n,s){return wl(ne(e,t,i,n,s,!0))}function _s(e){return e?e.__v_isVNode===!0:!1}function rn(e,t){return e.type===t.type&&e.key===t.key}const Ws="__vInternal",Sl=({key:e})=>e!=null?e:null,as=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?$e(e)||Ze(e)||ge(e)?{i:Xe,r:e,k:t,f:!!i}:e:null);function m(e,t=null,i=null,n=0,s=null,r=e===Qe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Sl(t),ref:t&&as(t),scopeId:Ls,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Xe};return o?(Qr(l,i),r&128&&e.normalize(l)):i&&(l.shapeFlag|=$e(i)?8:16),Sn>0&&!a&&yt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&yt.push(l),l}const ne=ad;function ad(e,t=null,i=null,n=0,s=null,r=!1){if((!e||e===Bc)&&(e=ii),_s(e)){const o=Xi(e,t,!0);return i&&Qr(o,i),Sn>0&&!r&&yt&&(o.shapeFlag&6?yt[yt.indexOf(e)]=o:yt.push(o)),o.patchFlag|=-2,o}if(vd(e)&&(e=e.__vccOpts),t){t=od(t);let{class:o,style:l}=t;o&&!$e(o)&&(t.class=Nr(o)),Me(l)&&(Xo(l)&&!re(l)&&(l=ze({},l)),t.style=Ps(l))}const a=$e(e)?1:Ec(e)?128:sd(e)?64:Me(e)?4:ge(e)?2:0;return m(e,t,i,n,s,a,r,!0)}function od(e){return e?Xo(e)||Ws in e?ze({},e):e:null}function Xi(e,t,i=!1){const{props:n,ref:s,patchFlag:r,children:a}=e,o=t?ld(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&Sl(o),ref:t&&t.ref?i&&s?re(s)?s.concat(as(t)):[s,as(t)]:as(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Qe?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Xi(e.ssContent),ssFallback:e.ssFallback&&Xi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function ce(e=" ",t=0){return ne(Fs,null,e,t)}function ai(e,t){const i=ne(rs,null,e);return i.staticCount=t,i}function fn(e="",t=!1){return t?(Ee(),Ns(ii,null,e)):ne(ii,null,e)}function Pt(e){return e==null||typeof e=="boolean"?ne(ii):re(e)?ne(Qe,null,e.slice()):typeof e=="object"?Yt(e):ne(Fs,null,String(e))}function Yt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Xi(e)}function Qr(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(re(t))i=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),Qr(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!(Ws in t)?t._ctx=Xe:s===3&&Xe&&(Xe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ge(t)?(t={default:t,_ctx:Xe},i=32):(t=String(t),n&64?(i=16,t=[ce(t)]):i=8);e.children=t,e.shapeFlag|=i}function ld(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=Nr([t.class,n.class]));else if(s==="style")t.style=Ps([t.style,n.style]);else if(ks(s)){const r=t[s],a=n[s];a&&r!==a&&!(re(r)&&r.includes(a))&&(t[s]=r?[].concat(r,a):a)}else s!==""&&(t[s]=n[s])}return t}function At(e,t,i,n=null){St(e,t,7,[i,n])}const hd=gl();let cd=0;function dd(e,t,i){const n=e.type,s=(t?t.appContext:e.appContext)||hd,r={uid:cd++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Rh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_l(n,s),emitsOptions:sl(n,s),emit:null,emitted:null,propsDefaults:Ie,inheritAttrs:n.inheritAttrs,ctx:Ie,data:Ie,props:Ie,attrs:Ie,slots:Ie,refs:Ie,setupState:Ie,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=wc.bind(null,r),e.ce&&e.ce(r),r}let Ve=null;const ud=()=>Ve||Xe;let ea,Fi,Fa="__VUE_INSTANCE_SETTERS__";(Fi=ur()[Fa])||(Fi=ur()[Fa]=[]),Fi.push(e=>Ve=e),ea=e=>{Fi.length>1?Fi.forEach(t=>t(e)):Fi[0](e)};const ji=e=>{ea(e),e.scope.on()},Ti=()=>{Ve&&Ve.scope.off(),ea(null)};function Cl(e){return e.vnode.shapeFlag&4}let Cn=!1;function fd(e,t=!1){Cn=t;const{props:i,children:n}=e.vnode,s=Cl(e);Zc(e,i,s,t),Qc(e,n);const r=s?gd(e,t):void 0;return Cn=!1,r}function gd(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=jo(new Proxy(e.ctx,Uc));const{setup:n}=i;if(n){const s=e.setupContext=n.length>1?_d(e):null;ji(e),Zi();const r=Qt(n,e,0,[e.props,s]);if(qi(),Ti(),Po(r)){if(r.then(Ti,Ti),t)return r.then(a=>{Na(e,a,t)}).catch(a=>{Os(a,e,0)});e.asyncDep=r}else Na(e,r,t)}else Tl(e,t)}function Na(e,t,i){ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Me(t)&&(e.setupState=Qo(t)),Tl(e,i)}let Wa;function Tl(e,t,i){const n=e.type;if(!e.render){if(!t&&Wa&&!n.render){const s=n.template||qr(e).template;if(s){const{isCustomElement:r,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=n,h=ze(ze({isCustomElement:r,delimiters:o},a),l);n.render=Wa(s,h)}}e.render=n.render||wt}ji(e),Zi(),Hc(e),qi(),Ti()}function pd(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,i){return st(e,"get","$attrs"),t[i]}}))}function _d(e){const t=i=>{e.exposed=i||{}};return{get attrs(){return pd(e)},slots:e.slots,emit:e.emit,expose:t}}function Bs(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Qo(jo(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in dn)return dn[i](e)},has(t,i){return i in t||i in dn}}))}function md(e,t=!0){return ge(e)?e.displayName||e.name:e.name||t&&e.__name}function vd(e){return ge(e)&&"__vccOpts"in e}const Zt=(e,t)=>gc(e,t,Cn);function Ba(e,t,i){const n=arguments.length;return n===2?Me(t)&&!re(t)?_s(t)?ne(e,null,[t]):ne(e,t):ne(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&_s(i)&&(i=[i]),ne(e,t,i))}const yd=Symbol.for("v-scx"),bd=()=>ss(yd),wd="3.3.4",Sd="http://www.w3.org/2000/svg",bi=typeof document<"u"?document:null,Ga=bi&&bi.createElement("template"),Cd={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const s=t?bi.createElementNS(Sd,e):bi.createElement(e,i?{is:i}:void 0);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>bi.createTextNode(e),createComment:e=>bi.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>bi.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,s,r){const a=i?i.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{Ga.innerHTML=n?`<svg>${e}</svg>`:e;const o=Ga.content;if(n){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,i)}return[a?a.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function Td(e,t,i){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function kd(e,t,i){const n=e.style,s=$e(i);if(i&&!s){if(t&&!$e(t))for(const r in t)i[r]==null&&Tr(n,r,"");for(const r in i)Tr(n,r,i[r])}else{const r=n.display;s?t!==i&&(n.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=r)}}const Ua=/\s*!important$/;function Tr(e,t,i){if(re(i))i.forEach(n=>Tr(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=Ed(e,t);Ua.test(i)?e.setProperty(Yi(n),i.replace(Ua,""),"important"):e[n]=i}}const Ha=["Webkit","Moz","ms"],nr={};function Ed(e,t){const i=nr[t];if(i)return i;let n=Ot(t);if(n!=="filter"&&n in e)return nr[t]=n;n=As(n);for(let s=0;s<Ha.length;s++){const r=Ha[s]+n;if(r in e)return nr[t]=r}return t}const Va="http://www.w3.org/1999/xlink";function xd(e,t,i,n,s){if(n&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(Va,t.slice(6,t.length)):e.setAttributeNS(Va,t,i);else{const r=Oh(t);i==null||r&&!Oo(i)?e.removeAttribute(t):e.setAttribute(t,r?"":i)}}function Ad(e,t,i,n,s,r,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,s,r),e[t]=i==null?"":i;return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){e._value=i;const h=o==="OPTION"?e.getAttribute("value"):e.value,d=i==null?"":i;h!==d&&(e.value=d),i==null&&e.removeAttribute(t);return}let l=!1;if(i===""||i==null){const h=typeof e[t];h==="boolean"?i=Oo(i):i==null&&h==="string"?(i="",l=!0):h==="number"&&(i=0,l=!0)}try{e[t]=i}catch{}l&&e.removeAttribute(t)}function wi(e,t,i,n){e.addEventListener(t,i,n)}function Pd(e,t,i,n){e.removeEventListener(t,i,n)}function Id(e,t,i,n,s=null){const r=e._vei||(e._vei={}),a=r[t];if(n&&a)a.value=n;else{const[o,l]=Md(t);if(n){const h=r[t]=Ld(n,s);wi(e,o,h,l)}else a&&(Pd(e,o,a,l),r[t]=void 0)}}const za=/(?:Once|Passive|Capture)$/;function Md(e){let t;if(za.test(e)){t={};let n;for(;n=e.match(za);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Yi(e.slice(2)),t]}let sr=0;const Od=Promise.resolve(),Dd=()=>sr||(Od.then(()=>sr=0),sr=Date.now());function Ld(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;St(Rd(n,i.value),t,5,[n])};return i.value=e,i.attached=Dd(),i}function Rd(e,t){if(re(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const $a=/^on[a-z]/,Fd=(e,t,i,n,s=!1,r,a,o,l)=>{t==="class"?Td(e,n,s):t==="style"?kd(e,i,n):ks(t)?Lr(t)||Id(e,t,i,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Nd(e,t,n,s))?Ad(e,t,n,r,a,o,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),xd(e,t,n,s))};function Nd(e,t,i,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&$a.test(t)&&ge(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||$a.test(t)&&$e(i)?!1:t in e}const ms=e=>{const t=e.props["onUpdate:modelValue"]||!1;return re(t)?i=>ns(t,i):t};function Wd(e){e.target.composing=!0}function Xa(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const kl={created(e,{modifiers:{lazy:t,trim:i,number:n}},s){e._assign=ms(s);const r=n||s.props&&s.props.type==="number";wi(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;i&&(o=o.trim()),r&&(o=ds(o)),e._assign(o)}),i&&wi(e,"change",()=>{e.value=e.value.trim()}),t||(wi(e,"compositionstart",Wd),wi(e,"compositionend",Xa),wi(e,"change",Xa))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:n,number:s}},r){if(e._assign=ms(r),e.composing||document.activeElement===e&&e.type!=="range"&&(i||n&&e.value.trim()===t||(s||e.type==="number")&&ds(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},Bd={deep:!0,created(e,{value:t,modifiers:{number:i}},n){const s=Es(t);wi(e,"change",()=>{const r=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>i?ds(vs(a)):vs(a));e._assign(e.multiple?s?new Set(r):r:r[0])}),e._assign=ms(n)},mounted(e,{value:t}){ja(e,t)},beforeUpdate(e,t,i){e._assign=ms(i)},updated(e,{value:t}){ja(e,t)}};function ja(e,t){const i=e.multiple;if(!(i&&!re(t)&&!Es(t))){for(let n=0,s=e.options.length;n<s;n++){const r=e.options[n],a=vs(r);if(i)re(t)?r.selected=Lh(t,a)>-1:r.selected=t.has(a);else if(Is(vs(r),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function vs(e){return"_value"in e?e._value:e.value}const Gd=ze({patchProp:Fd},Cd);let Ka;function Ud(){return Ka||(Ka=td(Gd))}const Hd=(...e)=>{const t=Ud().createApp(...e),{mount:i}=t;return t.mount=n=>{const s=Vd(n);if(!s)return;const r=t._component;!ge(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const a=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function Vd(e){return $e(e)?document.querySelector(e):e}const zd="/vue-peaks/assets/peaks-logo.72e98b64.svg",oi=(e,t)=>{const i=e.__vccOpts||e;for(const[n,s]of t)i[n]=s;return i},$d={},Xd={class:"columns"},jd=m("div",{class:"column"},[m("p",null,[ce(" The "),m("span",{class:"code"},"AudioPeaks"),ce(" component has it's own CSS class, plus each generated pane (overview, zoomview, audio/video element, controls) has a dedicated CSS class which you can select for your styles. Note however, that you can not style the waveforms themselves this way. ")]),m("p",null,"The following selectors are available:")],-1),Kd={class:"column"};function Yd(e,t){const i=Dt("highlightjs");return Ee(),Le("div",Xd,[jd,m("div",Kd,[ne(i,{language:"css",code:`div.peaks { 
    /* The div with the whole AudioPeaks component */ }
div.peaks-overview { 
    /* The div with the overview waveform */ }
div.peaks-zoomview { 
    /* The div with the zoom waveform */ }
div.peaks-controls { 
    /* The div with the zoom controls */ }
audio.peaks { 
    /* The audio element, when provided by vue-peaks 
       (in the 'simple' mode) */ }
video.peaks { 
    /* The video element, when provided by vue-peaks 
       (in the 'simple' mode) */ }`})])])}const Zd=oi($d,[["render",Yd]]);function qd(e){return Lo()?(Nh(e),!0):!1}function kr(e){return typeof e=="function"?e():Jo(e)}const Jd=typeof window<"u"&&typeof document<"u",Ya=()=>{};function Qd(e,t){function i(...n){return new Promise((s,r)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(s).catch(r)})}return i}function eu(e,t={}){let i,n,s=Ya;const r=o=>{clearTimeout(o),s(),s=Ya};return o=>{const l=kr(e),h=kr(t.maxWait);return i&&r(i),l<=0||h!==void 0&&h<=0?(n&&(r(n),n=null),Promise.resolve(o())):new Promise((d,f)=>{s=t.rejectOnCancel?f:d,h&&!n&&(n=setTimeout(()=>{i&&r(i),n=null,d(o())},h)),i=setTimeout(()=>{n&&r(n),n=null,d(o())},l)})}}function tu(e,t=200,i={}){return Qd(eu(t,i),e)}function Za(e){var t;const i=kr(e);return(t=i==null?void 0:i.$el)!=null?t:i}const iu=Jd?window:void 0;function nu(){const e=Zo(!1);return ud()&&Zr(()=>{e.value=!0}),e}function su(e){const t=nu();return Zt(()=>(t.value,Boolean(e())))}function ru(e,t,i={}){const{window:n=iu,...s}=i;let r;const a=su(()=>n&&"ResizeObserver"in n),o=()=>{r&&(r.disconnect(),r=void 0)},l=Zt(()=>Array.isArray(e)?e.map(f=>Za(f)):[Za(e)]),h=hn(l,f=>{if(o(),a.value&&n){r=new ResizeObserver(t);for(const y of f)y&&r.observe(y,s)}},{immediate:!0,flush:"post",deep:!0}),d=()=>{o(),h()};return qd(d),{isSupported:a,stop:d}}var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function au(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Er={exports:{}},xr={},We={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;var t=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof qa<"u"?qa:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.2.0",isBrowser:i(),isUnminified:/param/.test(function(s){}.toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const n=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})(We);var je={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=We;class i{constructor(u=[1,0,0,1,0,0]){this.dirty=!1,this.m=u&&u.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(u){u.m[0]=this.m[0],u.m[1]=this.m[1],u.m[2]=this.m[2],u.m[3]=this.m[3],u.m[4]=this.m[4],u.m[5]=this.m[5]}point(u){var S=this.m;return{x:S[0]*u.x+S[2]*u.y+S[4],y:S[1]*u.x+S[3]*u.y+S[5]}}translate(u,S){return this.m[4]+=this.m[0]*u+this.m[2]*S,this.m[5]+=this.m[1]*u+this.m[3]*S,this}scale(u,S){return this.m[0]*=u,this.m[1]*=u,this.m[2]*=S,this.m[3]*=S,this}rotate(u){var S=Math.cos(u),M=Math.sin(u),H=this.m[0]*S+this.m[2]*M,C=this.m[1]*S+this.m[3]*M,B=this.m[0]*-M+this.m[2]*S,E=this.m[1]*-M+this.m[3]*S;return this.m[0]=H,this.m[1]=C,this.m[2]=B,this.m[3]=E,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(u,S){var M=this.m[0]+this.m[2]*S,H=this.m[1]+this.m[3]*S,C=this.m[2]+this.m[0]*u,B=this.m[3]+this.m[1]*u;return this.m[0]=M,this.m[1]=H,this.m[2]=C,this.m[3]=B,this}multiply(u){var S=this.m[0]*u.m[0]+this.m[2]*u.m[1],M=this.m[1]*u.m[0]+this.m[3]*u.m[1],H=this.m[0]*u.m[2]+this.m[2]*u.m[3],C=this.m[1]*u.m[2]+this.m[3]*u.m[3],B=this.m[0]*u.m[4]+this.m[2]*u.m[5]+this.m[4],E=this.m[1]*u.m[4]+this.m[3]*u.m[5]+this.m[5];return this.m[0]=S,this.m[1]=M,this.m[2]=H,this.m[3]=C,this.m[4]=B,this.m[5]=E,this}invert(){var u=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),S=this.m[3]*u,M=-this.m[1]*u,H=-this.m[2]*u,C=this.m[0]*u,B=u*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),E=u*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=S,this.m[1]=M,this.m[2]=H,this.m[3]=C,this.m[4]=B,this.m[5]=E,this}getMatrix(){return this.m}decompose(){var u=this.m[0],S=this.m[1],M=this.m[2],H=this.m[3],C=this.m[4],B=this.m[5],E=u*H-S*M;let N={x:C,y:B,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(u!=0||S!=0){var q=Math.sqrt(u*u+S*S);N.rotation=S>0?Math.acos(u/q):-Math.acos(u/q),N.scaleX=q,N.scaleY=E/q,N.skewX=(u*M+S*H)/E,N.skewY=0}else if(M!=0||H!=0){var j=Math.sqrt(M*M+H*H);N.rotation=Math.PI/2-(H>0?Math.acos(-M/j):-Math.acos(M/j)),N.scaleX=E/j,N.scaleY=j,N.skewX=0,N.skewY=(u*M+S*H)/E}return N.rotation=e.Util._getRotation(N.rotation),N}}e.Transform=i;var n="[object Array]",s="[object Number]",r="[object String]",a="[object Boolean]",o=Math.PI/180,l=180/Math.PI,h="#",d="",f="0",y="Konva warning: ",p="Konva error: ",_="rgb(",b={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,A=[];const k=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(c){setTimeout(c,60)};e.Util={_isElement(c){return!!(c&&c.nodeType==1)},_isFunction(c){return!!(c&&c.constructor&&c.call&&c.apply)},_isPlainObject(c){return!!c&&c.constructor===Object},_isArray(c){return Object.prototype.toString.call(c)===n},_isNumber(c){return Object.prototype.toString.call(c)===s&&!isNaN(c)&&isFinite(c)},_isString(c){return Object.prototype.toString.call(c)===r},_isBoolean(c){return Object.prototype.toString.call(c)===a},isObject(c){return c instanceof Object},isValidSelector(c){if(typeof c!="string")return!1;var u=c[0];return u==="#"||u==="."||u===u.toUpperCase()},_sign(c){return c===0||c>0?1:-1},requestAnimFrame(c){A.push(c),A.length===1&&k(function(){const u=A;A=[],u.forEach(function(S){S()})})},createCanvasElement(){var c=document.createElement("canvas");try{c.style=c.style||{}}catch{}return c},createImageElement(){return document.createElement("img")},_isInDocument(c){for(;c=c.parentNode;)if(c==document)return!0;return!1},_urlToImage(c,u){var S=e.Util.createImageElement();S.onload=function(){u(S)},S.src=c},_rgbToHex(c,u,S){return((1<<24)+(c<<16)+(u<<8)+S).toString(16).slice(1)},_hexToRgb(c){c=c.replace(h,d);var u=parseInt(c,16);return{r:u>>16&255,g:u>>8&255,b:u&255}},getRandomColor(){for(var c=(Math.random()*16777215<<0).toString(16);c.length<6;)c=f+c;return h+c},getRGB(c){var u;return c in b?(u=b[c],{r:u[0],g:u[1],b:u[2]}):c[0]===h?this._hexToRgb(c.substring(1)):c.substr(0,4)===_?(u=v.exec(c.replace(/ /g,"")),{r:parseInt(u[1],10),g:parseInt(u[2],10),b:parseInt(u[3],10)}):{r:0,g:0,b:0}},colorToRGBA(c){return c=c||"black",e.Util._namedColorToRBA(c)||e.Util._hex3ColorToRGBA(c)||e.Util._hex4ColorToRGBA(c)||e.Util._hex6ColorToRGBA(c)||e.Util._hex8ColorToRGBA(c)||e.Util._rgbColorToRGBA(c)||e.Util._rgbaColorToRGBA(c)||e.Util._hslColorToRGBA(c)},_namedColorToRBA(c){var u=b[c.toLowerCase()];return u?{r:u[0],g:u[1],b:u[2],a:1}:null},_rgbColorToRGBA(c){if(c.indexOf("rgb(")===0){c=c.match(/rgb\(([^)]+)\)/)[1];var u=c.split(/ *, */).map(Number);return{r:u[0],g:u[1],b:u[2],a:1}}},_rgbaColorToRGBA(c){if(c.indexOf("rgba(")===0){c=c.match(/rgba\(([^)]+)\)/)[1];var u=c.split(/ *, */).map((S,M)=>S.slice(-1)==="%"?M===3?parseInt(S)/100:parseInt(S)/100*255:Number(S));return{r:u[0],g:u[1],b:u[2],a:u[3]}}},_hex8ColorToRGBA(c){if(c[0]==="#"&&c.length===9)return{r:parseInt(c.slice(1,3),16),g:parseInt(c.slice(3,5),16),b:parseInt(c.slice(5,7),16),a:parseInt(c.slice(7,9),16)/255}},_hex6ColorToRGBA(c){if(c[0]==="#"&&c.length===7)return{r:parseInt(c.slice(1,3),16),g:parseInt(c.slice(3,5),16),b:parseInt(c.slice(5,7),16),a:1}},_hex4ColorToRGBA(c){if(c[0]==="#"&&c.length===5)return{r:parseInt(c[1]+c[1],16),g:parseInt(c[2]+c[2],16),b:parseInt(c[3]+c[3],16),a:parseInt(c[4]+c[4],16)/255}},_hex3ColorToRGBA(c){if(c[0]==="#"&&c.length===4)return{r:parseInt(c[1]+c[1],16),g:parseInt(c[2]+c[2],16),b:parseInt(c[3]+c[3],16),a:1}},_hslColorToRGBA(c){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(c)){const[u,...S]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(c),M=Number(S[0])/360,H=Number(S[1])/100,C=Number(S[2])/100;let B,E,N;if(H===0)return N=C*255,{r:Math.round(N),g:Math.round(N),b:Math.round(N),a:1};C<.5?B=C*(1+H):B=C+H-C*H;const q=2*C-B,j=[0,0,0];for(let te=0;te<3;te++)E=M+1/3*-(te-1),E<0&&E++,E>1&&E--,6*E<1?N=q+(B-q)*6*E:2*E<1?N=B:3*E<2?N=q+(B-q)*(2/3-E)*6:N=q,j[te]=N*255;return{r:Math.round(j[0]),g:Math.round(j[1]),b:Math.round(j[2]),a:1}}},haveIntersection(c,u){return!(u.x>c.x+c.width||u.x+u.width<c.x||u.y>c.y+c.height||u.y+u.height<c.y)},cloneObject(c){var u={};for(var S in c)this._isPlainObject(c[S])?u[S]=this.cloneObject(c[S]):this._isArray(c[S])?u[S]=this.cloneArray(c[S]):u[S]=c[S];return u},cloneArray(c){return c.slice(0)},degToRad(c){return c*o},radToDeg(c){return c*l},_degToRad(c){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(c)},_radToDeg(c){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(c)},_getRotation(c){return t.Konva.angleDeg?e.Util.radToDeg(c):c},_capitalize(c){return c.charAt(0).toUpperCase()+c.slice(1)},throw(c){throw new Error(p+c)},error(c){console.error(p+c)},warn(c){!t.Konva.showWarnings||console.warn(y+c)},each(c,u){for(var S in c)u(S,c[S])},_inRange(c,u,S){return u<=c&&c<S},_getProjectionToSegment(c,u,S,M,H,C){var B,E,N,q=(c-S)*(c-S)+(u-M)*(u-M);if(q==0)B=c,E=u,N=(H-S)*(H-S)+(C-M)*(C-M);else{var j=((H-c)*(S-c)+(C-u)*(M-u))/q;j<0?(B=c,E=u,N=(c-H)*(c-H)+(u-C)*(u-C)):j>1?(B=S,E=M,N=(S-H)*(S-H)+(M-C)*(M-C)):(B=c+j*(S-c),E=u+j*(M-u),N=(B-H)*(B-H)+(E-C)*(E-C))}return[B,E,N]},_getProjectionToLine(c,u,S){var M=e.Util.cloneObject(c),H=Number.MAX_VALUE;return u.forEach(function(C,B){if(!(!S&&B===u.length-1)){var E=u[(B+1)%u.length],N=e.Util._getProjectionToSegment(C.x,C.y,E.x,E.y,c.x,c.y),q=N[0],j=N[1],te=N[2];te<H&&(M.x=q,M.y=j,H=te)}}),M},_prepareArrayForTween(c,u,S){var M,H=[],C=[];if(c.length>u.length){var B=u;u=c,c=B}for(M=0;M<c.length;M+=2)H.push({x:c[M],y:c[M+1]});for(M=0;M<u.length;M+=2)C.push({x:u[M],y:u[M+1]});var E=[];return C.forEach(function(N){var q=e.Util._getProjectionToLine(N,H,S);E.push(q.x),E.push(q.y)}),E},_prepareToStringify(c){var u;c.visitedByCircularReferenceRemoval=!0;for(var S in c)if(!!(c.hasOwnProperty(S)&&c[S]&&typeof c[S]=="object")){if(u=Object.getOwnPropertyDescriptor(c,S),c[S].visitedByCircularReferenceRemoval||e.Util._isElement(c[S]))if(u.configurable)delete c[S];else return null;else if(e.Util._prepareToStringify(c[S])===null)if(u.configurable)delete c[S];else return null}return delete c.visitedByCircularReferenceRemoval,c},_assign(c,u){for(var S in u)c[S]=u[S];return c},_getFirstPointerId(c){return c.touches?c.changedTouches[0].identifier:c.pointerId||999},releaseCanvas(...c){!t.Konva.releaseCanvasOnDestroy||c.forEach(u=>{u.width=0,u.height=0})},drawRoundedRectPath(c,u,S,M){let H=0,C=0,B=0,E=0;typeof M=="number"?H=C=B=E=Math.min(M,u/2,S/2):(H=Math.min(M[0]||0,u/2,S/2),C=Math.min(M[1]||0,u/2,S/2),E=Math.min(M[2]||0,u/2,S/2),B=Math.min(M[3]||0,u/2,S/2)),c.moveTo(H,0),c.lineTo(u-C,0),c.arc(u-C,C,C,Math.PI*3/2,0,!1),c.lineTo(u,S-E),c.arc(u-E,S-E,E,0,Math.PI/2,!1),c.lineTo(B,S),c.arc(B,S-B,B,Math.PI/2,Math.PI,!1),c.lineTo(0,H),c.arc(H,H,H,Math.PI,Math.PI*3/2,!1)}}})(je);var li={},Lt={},be={};Object.defineProperty(be,"__esModule",{value:!0});be.getComponentValidator=be.getBooleanValidator=be.getNumberArrayValidator=be.getFunctionValidator=be.getStringOrGradientValidator=be.getStringValidator=be.getNumberOrAutoValidator=be.getNumberOrArrayOfNumbersValidator=be.getNumberValidator=be.alphaComponent=be.RGBComponent=void 0;const Vt=We,Ne=je;function zt(e){return Ne.Util._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||Ne.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function ou(e){return e>255?255:e<0?0:Math.round(e)}be.RGBComponent=ou;function lu(e){return e>1?1:e<1e-4?1e-4:e}be.alphaComponent=lu;function hu(){if(Vt.Konva.isUnminified)return function(e,t){return Ne.Util._isNumber(e)||Ne.Util.warn(zt(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}be.getNumberValidator=hu;function cu(e){if(Vt.Konva.isUnminified)return function(t,i){let n=Ne.Util._isNumber(t),s=Ne.Util._isArray(t)&&t.length==e;return!n&&!s&&Ne.Util.warn(zt(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}}be.getNumberOrArrayOfNumbersValidator=cu;function du(){if(Vt.Konva.isUnminified)return function(e,t){var i=Ne.Util._isNumber(e),n=e==="auto";return i||n||Ne.Util.warn(zt(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}be.getNumberOrAutoValidator=du;function uu(){if(Vt.Konva.isUnminified)return function(e,t){return Ne.Util._isString(e)||Ne.Util.warn(zt(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}be.getStringValidator=uu;function fu(){if(Vt.Konva.isUnminified)return function(e,t){const i=Ne.Util._isString(e),n=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return i||n||Ne.Util.warn(zt(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}be.getStringOrGradientValidator=fu;function gu(){if(Vt.Konva.isUnminified)return function(e,t){return Ne.Util._isFunction(e)||Ne.Util.warn(zt(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}}be.getFunctionValidator=gu;function pu(){if(Vt.Konva.isUnminified)return function(e,t){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&e instanceof i||(Ne.Util._isArray(e)?e.forEach(function(n){Ne.Util._isNumber(n)||Ne.Util.warn('"'+t+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):Ne.Util.warn(zt(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}be.getNumberArrayValidator=pu;function _u(){if(Vt.Konva.isUnminified)return function(e,t){var i=e===!0||e===!1;return i||Ne.Util.warn(zt(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}be.getBooleanValidator=_u;function mu(e){if(Vt.Konva.isUnminified)return function(t,i){return t==null||Ne.Util.isObject(t)||Ne.Util.warn(zt(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}be.getComponentValidator=mu;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=je,i=be;var n="get",s="set";e.Factory={addGetterSetter(r,a,o,l,h){e.Factory.addGetter(r,a,o),e.Factory.addSetter(r,a,l,h),e.Factory.addOverloadedGetterSetter(r,a)},addGetter(r,a,o){var l=n+t.Util._capitalize(a);r.prototype[l]=r.prototype[l]||function(){var h=this.attrs[a];return h===void 0?o:h}},addSetter(r,a,o,l){var h=s+t.Util._capitalize(a);r.prototype[h]||e.Factory.overWriteSetter(r,a,o,l)},overWriteSetter(r,a,o,l){var h=s+t.Util._capitalize(a);r.prototype[h]=function(d){return o&&d!==void 0&&d!==null&&(d=o.call(this,d,a)),this._setAttr(a,d),l&&l.call(this),this}},addComponentsGetterSetter(r,a,o,l,h){var d=o.length,f=t.Util._capitalize,y=n+f(a),p=s+f(a),_,b;r.prototype[y]=function(){var A={};for(_=0;_<d;_++)b=o[_],A[b]=this.getAttr(a+f(b));return A};var v=(0,i.getComponentValidator)(o);r.prototype[p]=function(A){var k=this.attrs[a],c;l&&(A=l.call(this,A)),v&&v.call(this,A,a);for(c in A)!A.hasOwnProperty(c)||this._setAttr(a+f(c),A[c]);return A||o.forEach(u=>{this._setAttr(a+f(u),void 0)}),this._fireChangeEvent(a,k,A),h&&h.call(this),this},e.Factory.addOverloadedGetterSetter(r,a)},addOverloadedGetterSetter(r,a){var o=t.Util._capitalize(a),l=s+o,h=n+o;r.prototype[a]=function(){return arguments.length?(this[l](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(r,a,o,l){t.Util.error("Adding deprecated "+a);var h=n+t.Util._capitalize(a),d=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[h]=function(){t.Util.error(d);var f=this.attrs[a];return f===void 0?o:f},e.Factory.addSetter(r,a,l,function(){t.Util.error(d)}),e.Factory.addOverloadedGetterSetter(r,a)},backCompat(r,a){t.Util.each(a,function(o,l){var h=r.prototype[l],d=n+t.Util._capitalize(o),f=s+t.Util._capitalize(o);function y(){h.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}r.prototype[o]=y,r.prototype[d]=y,r.prototype[f]=y})},afterSetFilter(){this._filterUpToDate=!1}}})(Lt);var Ct={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.HitContext=Gt.SceneContext=Gt.Context=void 0;const El=je,vu=We;function yu(e){var t=[],i=e.length,n=El.Util,s,r;for(s=0;s<i;s++)r=e[s],n._isNumber(r)?r=Math.round(r*1e3)/1e3:n._isString(r)||(r=r+""),t.push(r);return t}var Ja=",",bu="(",wu=")",Su="([",Cu="])",Tu=";",ku="()",Eu="=",Qa=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],xu=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Au=100;class Gs{constructor(t){this.canvas=t,vu.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,i){var n=this.traceArr,s=n.length,r="",a,o,l,h;for(a=0;a<s;a++)o=n[a],l=o.method,l?(h=o.args,r+=l,t?r+=ku:El.Util._isArray(h[0])?r+=Su+h.join(Ja)+Cu:(i&&(h=h.map(d=>typeof d=="number"?Math.floor(d):d)),r+=bu+h.join(Ja)+wu)):(r+=o.property,t||(r+=Eu+o.val)),r+=Tu;return r}clearTrace(){this.traceArr=[]}_trace(t){var i=this.traceArr,n;i.push(t),n=i.length,n>=Au&&i.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var i=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(t){const i=t.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(t){var i=t.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(t){const i=t.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(t,i){this._context[t]=i}arc(t,i,n,s,r,a){this._context.arc(t,i,n,s,r,a)}arcTo(t,i,n,s,r){this._context.arcTo(t,i,n,s,r)}beginPath(){this._context.beginPath()}bezierCurveTo(t,i,n,s,r,a){this._context.bezierCurveTo(t,i,n,s,r,a)}clearRect(t,i,n,s){this._context.clearRect(t,i,n,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,i){var n=arguments;if(n.length===2)return this._context.createImageData(t,i);if(n.length===1)return this._context.createImageData(t)}createLinearGradient(t,i,n,s){return this._context.createLinearGradient(t,i,n,s)}createPattern(t,i){return this._context.createPattern(t,i)}createRadialGradient(t,i,n,s,r,a){return this._context.createRadialGradient(t,i,n,s,r,a)}drawImage(t,i,n,s,r,a,o,l,h){var d=arguments,f=this._context;d.length===3?f.drawImage(t,i,n):d.length===5?f.drawImage(t,i,n,s,r):d.length===9&&f.drawImage(t,i,n,s,r,a,o,l,h)}ellipse(t,i,n,s,r,a,o,l){this._context.ellipse(t,i,n,s,r,a,o,l)}isPointInPath(t,i,n,s){return n?this._context.isPointInPath(n,t,i,s):this._context.isPointInPath(t,i,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,i,n,s){this._context.fillRect(t,i,n,s)}strokeRect(t,i,n,s){this._context.strokeRect(t,i,n,s)}fillText(t,i,n,s){s?this._context.fillText(t,i,n,s):this._context.fillText(t,i,n)}measureText(t){return this._context.measureText(t)}getImageData(t,i,n,s){return this._context.getImageData(t,i,n,s)}lineTo(t,i){this._context.lineTo(t,i)}moveTo(t,i){this._context.moveTo(t,i)}rect(t,i,n,s){this._context.rect(t,i,n,s)}putImageData(t,i,n){this._context.putImageData(t,i,n)}quadraticCurveTo(t,i,n,s){this._context.quadraticCurveTo(t,i,n,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,i){this._context.scale(t,i)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,i,n,s,r,a){this._context.setTransform(t,i,n,s,r,a)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,i,n,s){this._context.strokeText(t,i,n,s)}transform(t,i,n,s,r,a){this._context.transform(t,i,n,s,r,a)}translate(t,i){this._context.translate(t,i)}_enableTrace(){var t=this,i=Qa.length,n=this.setAttr,s,r,a=function(o){var l=t[o],h;t[o]=function(){return r=yu(Array.prototype.slice.call(arguments,0)),h=l.apply(t,arguments),t._trace({method:o,args:r}),h}};for(s=0;s<i;s++)a(Qa[s]);t.setAttr=function(){n.apply(t,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:o,val:l})}}_applyGlobalCompositeOperation(t){const i=t.attrs.globalCompositeOperation;var n=!i||i==="source-over";n||this.setAttr("globalCompositeOperation",i)}}Gt.Context=Gs;xu.forEach(function(e){Object.defineProperty(Gs.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class Pu extends Gs{constructor(t,{willReadFrequently:i=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:i})}_fillColor(t){var i=t.fill();this.setAttr("fillStyle",i),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var i=t._getLinearGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fillRadialGradient(t){const i=t._getRadialGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fill(t){const i=t.fill(),n=t.getFillPriority();if(i&&n==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&n==="pattern"){this._fillPattern(t);return}const r=t.getFillLinearGradientColorStops();if(r&&n==="linear-gradient"){this._fillLinearGradient(t);return}const a=t.getFillRadialGradientColorStops();if(a&&n==="radial-gradient"){this._fillRadialGradient(t);return}i?this._fillColor(t):s?this._fillPattern(t):r?this._fillLinearGradient(t):a&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const i=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(i.x,i.y,n.x,n.y);if(s){for(var a=0;a<s.length;a+=2)r.addColorStop(s[a],s[a+1]);this.setAttr("strokeStyle",r)}}_stroke(t){var i=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();var s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var r=t.getStrokeLinearGradientColorStops();r?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}_applyShadow(t){var i,n,s,r=(i=t.getShadowRGBA())!==null&&i!==void 0?i:"black",a=(n=t.getShadowBlur())!==null&&n!==void 0?n:5,o=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},l=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),d=l.x*h,f=l.y*h;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",a*Math.min(Math.abs(d),Math.abs(f))),this.setAttr("shadowOffsetX",o.x*d),this.setAttr("shadowOffsetY",o.y*f)}}Gt.SceneContext=Pu;class Iu extends Gs{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const r=t.getStrokeScaleEnabled();if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t);var n=t.hitStrokeWidth(),s=n==="auto"?t.strokeWidth():n;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),r||this.restore()}}}Gt.HitContext=Iu;Object.defineProperty(Ct,"__esModule",{value:!0});Ct.HitCanvas=Ct.SceneCanvas=Ct.Canvas=void 0;const ys=je,xl=Gt,Al=We,Mu=Lt,Ou=be;var Kn;function Du(){if(Kn)return Kn;var e=ys.Util.createCanvasElement(),t=e.getContext("2d");return Kn=function(){var i=Al.Konva._global.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/n}(),ys.Util.releaseCanvas(e),Kn}class Us{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var i=t||{},n=i.pixelRatio||Al.Konva.pixelRatio||Du();this.pixelRatio=n,this._canvas=ys.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var i=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var i=this.pixelRatio,n=this.getContext()._context;n.scale(i,i)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var i=this.pixelRatio,n=this.getContext()._context;n.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,i){this.setWidth(t||0),this.setHeight(i||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch{try{return this._canvas.toDataURL()}catch(s){return ys.Util.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Ct.Canvas=Us;Mu.Factory.addGetterSetter(Us,"pixelRatio",void 0,(0,Ou.getNumberValidator)());class Lu extends Us{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new xl.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}Ct.SceneCanvas=Lu;class Ru extends Us{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new xl.HitContext(this),this.setSize(t.width,t.height)}}Ct.HitCanvas=Ru;var Hs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=We,i=je;e.DD={get isDragging(){var n=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){var n;return e.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];e.DD._dragElements.forEach((r,a)=>{const{node:o}=r,l=o.getStage();l.setPointersPositions(n),r.pointerId===void 0&&(r.pointerId=i.Util._getFirstPointerId(n));const h=l._changedPointerPositions.find(y=>y.id===r.pointerId);if(!!h){if(r.dragStatus!=="dragging"){var d=o.dragDistance(),f=Math.max(Math.abs(h.x-r.startPointerPos.x),Math.abs(h.y-r.startPointerPos.y));if(f<d||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,r),s.push(o)}}),s.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:n},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(r=>{const{node:a}=r,o=a.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(d=>d.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,r.dragStatus="stopped");const h=r.node.getLayer()||r.node instanceof t.Konva.Stage&&r.node;h&&s.indexOf(h)===-1&&s.push(h)}),s.forEach(r=>{r.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((s,r)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(r)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))})(Hs);Object.defineProperty(li,"__esModule",{value:!0});li.Node=void 0;const _e=je,In=Lt,Yn=Ct,mi=We,ut=Hs,Be=be;var os="absoluteOpacity",Zn="allEventListeners",Wt="absoluteTransform",eo="absoluteScale",vi="canvas",Fu="Change",Nu="children",Wu="konva",Ar="listening",to="mouseenter",io="mouseleave",no="set",so="Shape",ls=" ",ro="stage",Kt="transform",Bu="Stage",Pr="visible",Gu=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(ls);let Uu=1;class he{constructor(t){this._id=Uu++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Kt||t===Wt)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,i){var n=this._cache.get(t),s=t===Kt||t===Wt,r=n===void 0||s&&n.dirty===!0;return r&&(n=i.call(this),this._cache.set(t,n)),n}_calculate(t,i,n){if(!this._attachedDepsListeners.get(t)){const s=i.map(r=>r+"Change.konva").join(ls);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}_getCanvasCache(){return this._cache.get(vi)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Wt&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(vi)){const{scene:t,filter:i,hit:n}=this._cache.get(vi);_e.Util.releaseCanvas(t,i,n),this._cache.delete(vi)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var i=t||{},n={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var s=Math.ceil(i.width||n.width),r=Math.ceil(i.height||n.height),a=i.pixelRatio,o=i.x===void 0?Math.floor(n.x):i.x,l=i.y===void 0?Math.floor(n.y):i.y,h=i.offset||0,d=i.drawBorder||!1,f=i.hitCanvasPixelRatio||1;if(!s||!r){_e.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}s+=h*2+1,r+=h*2+1,o-=h,l-=h;var y=new Yn.SceneCanvas({pixelRatio:a,width:s,height:r}),p=new Yn.SceneCanvas({pixelRatio:a,width:0,height:0,willReadFrequently:!0}),_=new Yn.HitCanvas({pixelRatio:f,width:s,height:r}),b=y.getContext(),v=_.getContext();return _.isCache=!0,y.isCache=!0,this._cache.delete(vi),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(y.getContext()._context.imageSmoothingEnabled=!1,p.getContext()._context.imageSmoothingEnabled=!1),b.save(),v.save(),b.translate(-o,-l),v.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(os),this._clearSelfAndDescendantCache(eo),this.drawScene(y,this),this.drawHit(_,this),this._isUnderCache=!1,b.restore(),v.restore(),d&&(b.save(),b.beginPath(),b.rect(0,0,s,r),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(vi,{scene:y,filter:p,hit:_,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(vi)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,i){var n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s,r,a,o,l=this.getAbsoluteTransform(i);return n.forEach(function(h){var d=l.point(h);s===void 0&&(s=a=d.x,r=o=d.y),s=Math.min(s,d.x),r=Math.min(r,d.y),a=Math.max(a,d.x),o=Math.max(o,d.y)}),{x:s,y:r,width:a-s,height:o-r}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();t.translate(i.x,i.y);var n=this._getCachedSceneCanvas(),s=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/s,n.height/s),t.restore()}_drawCachedHitCanvas(t){var i=this._getCanvasCache(),n=i.hit;t.save(),t.translate(i.x,i.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t=this.filters(),i=this._getCanvasCache(),n=i.scene,s=i.filter,r=s.getContext(),a,o,l,h;if(t){if(!this._filterUpToDate){var d=n.pixelRatio;s.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio);try{for(a=t.length,r.clear(),r.drawImage(n._canvas,0,0,n.getWidth()/d,n.getHeight()/d),o=r.getImageData(0,0,s.getWidth(),s.getHeight()),l=0;l<a;l++){if(h=t[l],typeof h!="function"){_e.Util.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),r.putImageData(o,0,0)}}catch(f){_e.Util.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return n}on(t,i){if(this._cache&&this._cache.delete(Zn),arguments.length===3)return this._delegate.apply(this,arguments);var n=t.split(ls),s=n.length,r,a,o,l,h;for(r=0;r<s;r++)a=n[r],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:i});return this}off(t,i){var n=(t||"").split(ls),s=n.length,r,a,o,l,h,d;if(this._cache&&this._cache.delete(Zn),!t)for(a in this.eventListeners)this._off(a);for(r=0;r<s;r++)if(o=n[r],l=o.split("."),h=l[0],d=l[1],h)this.eventListeners[h]&&this._off(h,d,i);else for(a in this.eventListeners)this._off(a,d,i);return this}dispatchEvent(t){var i={target:this,type:t.type,evt:t};return this.fire(t.type,i),this}addEventListener(t,i){return this.on(t,function(n){i.call(this,n.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,i,n){var s=this;this.on(t,function(r){for(var a=r.target.findAncestors(i,!0,s),o=0;o<a.length;o++)r=_e.Util.cloneObject(r),r.currentTarget=a[o],n.call(a[o],r)})}remove(){return this.isDragging()&&this.stopDrag(),ut.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Wt),this._clearSelfAndDescendantCache(os),this._clearSelfAndDescendantCache(eo),this._clearSelfAndDescendantCache(ro),this._clearSelfAndDescendantCache(Pr),this._clearSelfAndDescendantCache(Ar)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){var i="get"+_e.Util._capitalize(t);return _e.Util._isFunction(this[i])?this[i]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),i=[];t;)i.push(t),t=t.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var i,n;if(!t)return this;for(i in t)i!==Nu&&(n=no+_e.Util._capitalize(i),_e.Util._isFunction(this[n])?this[n](t[i]):this._setAttr(i,t[i]))}),this}isListening(){return this._getCache(Ar,this._isListening)}_isListening(t){if(!this.listening())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isListening(t):!0}isVisible(){return this._getCache(Pr,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isVisible(t):!0}shouldDrawHit(t,i=!1){if(t)return this._isVisible(t)&&this._isListening(t);var n=this.getLayer(),s=!1;ut.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===n)&&(s=!0)});var r=!i&&!mi.Konva.hitOnDragEnabled&&s;return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t=this.getDepth(),i=this,n=0,s,r,a,o;function l(h){for(s=[],r=h.length,a=0;a<r;a++)o=h[a],n++,o.nodeType!==so&&(s=s.concat(o.getChildren().slice())),o._id===i._id&&(a=r);s.length>0&&s[0].getDepth()<=t&&l(s)}return i.nodeType!==Bu&&l(i.getStage().getChildren()),n}getDepth(){for(var t=0,i=this.parent;i;)t++,i=i.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Kt),this._clearSelfAndDescendantCache(Wt)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(t)}getAbsolutePosition(t){let i=!1,n=this.parent;for(;n;){if(n.isCached()){i=!0;break}n=n.parent}i&&!t&&(t=!0);var s=this.getAbsoluteTransform(t).getMatrix(),r=new _e.Transform,a=this.offset();return r.m=s.slice(),r.translate(a.x,a.y),r.getTranslation()}setAbsolutePosition(t){var i=this._clearTransform();this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,this._clearCache(Kt);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(t.x,t.y),t={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(i),this.setPosition({x:t.x,y:t.y}),this._clearCache(Kt),this._clearSelfAndDescendantCache(Wt),this}_setTransform(t){var i;for(i in t)this.attrs[i]=t[i]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var i=t.x,n=t.y,s=this.x(),r=this.y();return i!==void 0&&(s+=i),n!==void 0&&(r+=n),this.setPosition({x:s,y:r}),this}_eachAncestorReverse(t,i){var n=[],s=this.getParent(),r,a;if(!(i&&i._id===this._id)){for(n.unshift(this);s&&(!i||s._id!==i._id);)n.unshift(s),s=s.parent;for(r=n.length,a=0;a<r;a++)t(n[a])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return _e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return _e.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return _e.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return _e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return _e.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&_e.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(os,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),i=this.getParent();return i&&!i._isUnderCache&&(t*=i.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t={},i=this.getAttrs(),n,s,r,a,o;t.attrs={};for(n in i)s=i[n],o=_e.Util.isObject(s)&&!_e.Util._isPlainObject(s)&&!_e.Util._isArray(s),!o&&(r=typeof this[n]=="function"&&this[n],delete i[n],a=r?r.call(this):null,i[n]=s,a!==s&&(t.attrs[n]=s));return t.className=this.getClassName(),_e.Util._prepareToStringify(t)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,i,n){var s=[];i&&this._isMatch(t)&&s.push(this);for(var r=this.parent;r;){if(r===n)return s;r._isMatch(t)&&s.push(r),r=r.parent}return s}isAncestorOf(t){return!1}findAncestor(t,i,n){return this.findAncestors(t,i,n)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);var i=t.replace(/ /g,"").split(","),n=i.length,s,r;for(s=0;s<n;s++)if(r=i[s],_e.Util.isValidSelector(r)||(_e.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),_e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),_e.Util.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(ro,this._getStage)}_getStage(){var t=this.getParent();if(t)return t.getStage()}fire(t,i={},n){return i.target=i.target||this,n?this._fireAndBubble(t,i):this._fire(t,i),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Wt,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var i;if(t)return i=new _e.Transform,this._eachAncestorReverse(function(s){var r=s.transformsEnabled();r==="all"?i.multiply(s.getTransform()):r==="position"&&i.translate(s.x()-s.offsetX(),s.y()-s.offsetY())},t),i;i=this._cache.get(Wt)||new _e.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var n=this.transformsEnabled();if(n==="all")i.multiply(this.getTransform());else if(n==="position"){const s=this.attrs.x||0,r=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;i.translate(s-a,r-o)}return i.dirty=!1,i}getAbsoluteScale(t){for(var i=this;i;)i._isUnderCache&&(t=i),i=i.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Kt,this._getTransform)}_getTransform(){var t,i,n=this._cache.get(Kt)||new _e.Transform;n.reset();var s=this.x(),r=this.y(),a=mi.Konva.getAngle(this.rotation()),o=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,d=this.attrs.skewY||0,f=this.attrs.offsetX||0,y=this.attrs.offsetY||0;return(s!==0||r!==0)&&n.translate(s,r),a!==0&&n.rotate(a),(h!==0||d!==0)&&n.skew(h,d),(o!==1||l!==1)&&n.scale(o,l),(f!==0||y!==0)&&n.translate(-1*f,-1*y),n.dirty=!1,n}clone(t){var i=_e.Util.cloneObject(this.attrs),n,s,r,a,o;for(n in t)i[n]=t[n];var l=new this.constructor(i);for(n in this.eventListeners)for(s=this.eventListeners[n],r=s.length,a=0;a<r;a++)o=s[a],o.name.indexOf(Wu)<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(o));return l}_toKonvaCanvas(t){t=t||{};var i=this.getClientRect(),n=this.getStage(),s=t.x!==void 0?t.x:Math.floor(i.x),r=t.y!==void 0?t.y:Math.floor(i.y),a=t.pixelRatio||1,o=new Yn.SceneCanvas({width:t.width||Math.ceil(i.width)||(n?n.width():0),height:t.height||Math.ceil(i.height)||(n?n.height():0),pixelRatio:a}),l=o.getContext();return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(s||r)&&l.translate(-1*s,-1*r),this.drawScene(o),l.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};var i=t.mimeType||null,n=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(i,n);return t.callback&&t.callback(s),s}toImage(t){return new Promise((i,n)=>{try{const s=t==null?void 0:t.callback;s&&delete t.callback,_e.Util._urlToImage(this.toDataURL(t),function(r){i(r),s==null||s(r)})}catch(s){n(s)}})}toBlob(t){return new Promise((i,n)=>{try{const s=t==null?void 0:t.callback;s&&delete t.callback,this.toCanvas(t).toBlob(r=>{i(r),s==null||s(r)})}catch(s){n(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():mi.Konva.dragDistance}_off(t,i,n){var s=this.eventListeners[t],r,a,o;for(r=0;r<s.length;r++)if(a=s[r].name,o=s[r].handler,(a!=="konva"||i==="konva")&&(!i||a===i)&&(!n||n===o)){if(s.splice(r,1),s.length===0){delete this.eventListeners[t];break}r--}}_fireChangeEvent(t,i,n){this._fire(t+Fu,{oldVal:i,newVal:n})}addName(t){if(!this.hasName(t)){var i=this.name(),n=i?i+" "+t:t;this.name(n)}return this}hasName(t){if(!t)return!1;const i=this.name();if(!i)return!1;var n=(i||"").split(/\s/g);return n.indexOf(t)!==-1}removeName(t){var i=(this.name()||"").split(/\s/g),n=i.indexOf(t);return n!==-1&&(i.splice(n,1),this.name(i.join(" "))),this}setAttr(t,i){var n=this[no+_e.Util._capitalize(t)];return _e.Util._isFunction(n)?n.call(this,i):this._setAttr(t,i),this}_requestDraw(){if(mi.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,i){var n=this.attrs[t];n===i&&!_e.Util.isObject(i)||(i==null?delete this.attrs[t]:this.attrs[t]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,i),this._requestDraw())}_setComponentAttr(t,i,n){var s;n!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][i]=n,this._fireChangeEvent(t,s,n))}_fireAndBubble(t,i,n){i&&this.nodeType===so&&(i.target=this);var s=(t===to||t===io)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n);if(!s){this._fire(t,i);var r=(t===to||t===io)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,i,n):this._fireAndBubble.call(this.parent,t,i))}}_getProtoListeners(t){var i,n,s;const r=(i=this._cache.get(Zn))!==null&&i!==void 0?i:{};let a=r==null?void 0:r[t];if(a===void 0){a=[];let o=Object.getPrototypeOf(this);for(;o;){const l=(s=(n=o.eventListeners)===null||n===void 0?void 0:n[t])!==null&&s!==void 0?s:[];a.push(...l),o=Object.getPrototypeOf(o)}r[t]=a,this._cache.set(Zn,r)}return a}_fire(t,i){i=i||{},i.currentTarget=this,i.type=t;const n=this._getProtoListeners(t);if(n)for(var s=0;s<n.length;s++)n[s].handler.call(this,i);const r=this.eventListeners[t];if(r)for(var s=0;s<r.length;s++)r[s].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var i=t?t.pointerId:void 0,n=this.getStage(),s=this.getAbsolutePosition(),r=n._getPointerById(i)||n._changedPointerPositions[0]||s;ut.DD._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-s.x,y:r.y-s.y},dragStatus:"ready",pointerId:i})}startDrag(t,i=!0){ut.DD._dragElements.has(this._id)||this._createDragElement(t);const n=ut.DD._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},i)}_setDragPosition(t,i){const n=this.getStage()._getPointerById(i.pointerId);if(!!n){var s={x:n.x-i.offset.x,y:n.y-i.offset.y},r=this.dragBoundFunc();if(r!==void 0){const a=r.call(this,s,t);a?s=a:_e.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}}stopDrag(t){const i=ut.DD._dragElements.get(this._id);i&&(i.dragStatus="stopped"),ut.DD._endDragBefore(t),ut.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=ut.DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var i=t.evt.button!==void 0,n=!i||mi.Konva.dragButtons.indexOf(t.evt.button)>=0;if(!!n&&!this.isDragging()){var s=!1;ut.DD._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(s=!0)}),s||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage();if(!t)return;const i=ut.DD._dragElements.get(this._id),n=i&&i.dragStatus==="dragging",s=i&&i.dragStatus==="ready";n?this.stopDrag():s&&ut.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const i=this.getStage();if(!i)return!1;const n={x:-t.x,y:-t.y,width:i.width()+2*t.x,height:i.height()+2*t.y};return _e.Util.haveIntersection(n,this.getClientRect())}static create(t,i){return _e.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,i)}static _createNode(t,i){var n=he.prototype.getClassName.call(t),s=t.children,r,a,o;i&&(t.attrs.container=i),mi.Konva[n]||(_e.Util.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const l=mi.Konva[n];if(r=new l(t.attrs),s)for(a=s.length,o=0;o<a;o++)r.add(he._createNode(s[o]));return r}}li.Node=he;he.prototype.nodeType="Node";he.prototype._attrsAffectingSize=[];he.prototype.eventListeners={};he.prototype.on.call(he.prototype,Gu,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Kt),this._clearSelfAndDescendantCache(Wt)});he.prototype.on.call(he.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Pr)});he.prototype.on.call(he.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Ar)});he.prototype.on.call(he.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(os)});const xe=In.Factory.addGetterSetter;xe(he,"zIndex");xe(he,"absolutePosition");xe(he,"position");xe(he,"x",0,(0,Be.getNumberValidator)());xe(he,"y",0,(0,Be.getNumberValidator)());xe(he,"globalCompositeOperation","source-over",(0,Be.getStringValidator)());xe(he,"opacity",1,(0,Be.getNumberValidator)());xe(he,"name","",(0,Be.getStringValidator)());xe(he,"id","",(0,Be.getStringValidator)());xe(he,"rotation",0,(0,Be.getNumberValidator)());In.Factory.addComponentsGetterSetter(he,"scale",["x","y"]);xe(he,"scaleX",1,(0,Be.getNumberValidator)());xe(he,"scaleY",1,(0,Be.getNumberValidator)());In.Factory.addComponentsGetterSetter(he,"skew",["x","y"]);xe(he,"skewX",0,(0,Be.getNumberValidator)());xe(he,"skewY",0,(0,Be.getNumberValidator)());In.Factory.addComponentsGetterSetter(he,"offset",["x","y"]);xe(he,"offsetX",0,(0,Be.getNumberValidator)());xe(he,"offsetY",0,(0,Be.getNumberValidator)());xe(he,"dragDistance",null,(0,Be.getNumberValidator)());xe(he,"width",0,(0,Be.getNumberValidator)());xe(he,"height",0,(0,Be.getNumberValidator)());xe(he,"listening",!0,(0,Be.getBooleanValidator)());xe(he,"preventDefault",!0,(0,Be.getBooleanValidator)());xe(he,"filters",null,function(e){return this._filterUpToDate=!1,e});xe(he,"visible",!0,(0,Be.getBooleanValidator)());xe(he,"transformsEnabled","all",(0,Be.getStringValidator)());xe(he,"size");xe(he,"dragBoundFunc");xe(he,"draggable",!1,(0,Be.getBooleanValidator)());In.Factory.backCompat(he,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.Container=void 0;const Ji=Lt,rr=li,Vs=be;class Ii extends rr.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const i=this.children||[];var n=[];return i.forEach(function(s){t(s)&&n.push(s)}),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(var i=0;i<t.length;i++)this.add(t[i]);return this}const n=t[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var i=this._generalFind(t,!0);return i.length>0?i[0]:void 0}_generalFind(t,i){var n=[];return this._descendants(s=>{const r=s._isMatch(t);return r&&n.push(s),!!(r&&i)}),n}_descendants(t){let i=!1;const n=this.getChildren();for(const s of n){if(i=t(s),i)return!0;if(!!s.hasChildren()&&(i=s._descendants(t),i))return!0}return!1}toObject(){var t=rr.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(i=>{t.children.push(i.toObject())}),t}isAncestorOf(t){for(var i=t.getParent();i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(t){var i=rr.Node.prototype.clone.call(this,t);return this.getChildren().forEach(function(n){i.add(n.clone())}),i}getAllIntersections(t){var i=[];return this.find("Shape").forEach(function(n){n.isVisible()&&n.intersects(t)&&i.push(n)}),i}_clearSelfAndDescendantCache(t){var i;super._clearSelfAndDescendantCache(t),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(n){n._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(i,n){i.index=n}),this._requestDraw()}drawScene(t,i){var n=this.getLayer(),s=t||n&&n.getCanvas(),r=s&&s.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=s&&s.isCache;if(!this.isVisible()&&!l)return this;if(o){r.save();var h=this.getAbsoluteTransform(i).getMatrix();r.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(r),r.restore()}else this._drawChildren("drawScene",s,i);return this}drawHit(t,i){if(!this.shouldDrawHit(i))return this;var n=this.getLayer(),s=t||n&&n.hitCanvas,r=s&&s.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){r.save();var l=this.getAbsoluteTransform(i).getMatrix();r.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",s,i);return this}_drawChildren(t,i,n){var s,r=i&&i.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h=a&&o||l;const d=n===this;if(h){r.save();var f=this.getAbsoluteTransform(n),y=f.getMatrix();r.transform(y[0],y[1],y[2],y[3],y[4],y[5]),r.beginPath();let v;if(l)v=l.call(this,r,this);else{var p=this.clipX(),_=this.clipY();r.rect(p,_,a,o)}r.clip.apply(r,v),y=f.copy().invert().getMatrix(),r.transform(y[0],y[1],y[2],y[3],y[4],y[5])}var b=!d&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";b&&(r.save(),r._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(v){v[t](i,n)}),b&&r.restore(),h&&r.restore()}getClientRect(t){var i;t=t||{};var n=t.skipTransform,s=t.relativeTo,r,a,o,l,h={x:1/0,y:1/0,width:0,height:0},d=this;(i=this.children)===null||i===void 0||i.forEach(function(b){if(!!b.visible()){var v=b.getClientRect({relativeTo:d,skipShadow:t.skipShadow,skipStroke:t.skipStroke});v.width===0&&v.height===0||(r===void 0?(r=v.x,a=v.y,o=v.x+v.width,l=v.y+v.height):(r=Math.min(r,v.x),a=Math.min(a,v.y),o=Math.max(o,v.x+v.width),l=Math.max(l,v.y+v.height)))}});for(var f=this.find("Shape"),y=!1,p=0;p<f.length;p++){var _=f[p];if(_._isVisible(this)){y=!0;break}}return y&&r!==void 0?h={x:r,y:a,width:o-r,height:l-a}:h={x:0,y:0,width:0,height:0},n?h:this._transformedRect(h,s)}}Pi.Container=Ii;Ji.Factory.addComponentsGetterSetter(Ii,"clip",["x","y","width","height"]);Ji.Factory.addGetterSetter(Ii,"clipX",void 0,(0,Vs.getNumberValidator)());Ji.Factory.addGetterSetter(Ii,"clipY",void 0,(0,Vs.getNumberValidator)());Ji.Factory.addGetterSetter(Ii,"clipWidth",void 0,(0,Vs.getNumberValidator)());Ji.Factory.addGetterSetter(Ii,"clipHeight",void 0,(0,Vs.getNumberValidator)());Ji.Factory.addGetterSetter(Ii,"clipFunc");var Pl={},ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.releaseCapture=ht.setPointerCapture=ht.hasPointerCapture=ht.createEvent=ht.getCapturedShape=void 0;const Hu=We,Tn=new Map,Il=Hu.Konva._global.PointerEvent!==void 0;function Vu(e){return Tn.get(e)}ht.getCapturedShape=Vu;function ta(e){return{evt:e,pointerId:e.pointerId}}ht.createEvent=ta;function zu(e,t){return Tn.get(e)===t}ht.hasPointerCapture=zu;function $u(e,t){Ml(e),t.getStage()&&(Tn.set(e,t),Il&&t._fire("gotpointercapture",ta(new PointerEvent("gotpointercapture"))))}ht.setPointerCapture=$u;function Ml(e,t){const i=Tn.get(e);if(!i)return;const n=i.getStage();n&&n.content,Tn.delete(e),Il&&i._fire("lostpointercapture",ta(new PointerEvent("lostpointercapture")))}ht.releaseCapture=Ml;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=je,i=Lt,n=Pi,s=We,r=Ct,a=Hs,o=We,l=ht;var h="Stage",d="string",f="px",y="mouseout",p="mouseleave",_="mouseover",b="mouseenter",v="mousemove",A="mousedown",k="mouseup",c="pointermove",u="pointerdown",S="pointerup",M="pointercancel",H="lostpointercapture",C="pointerout",B="pointerleave",E="pointerover",N="pointerenter",q="contextmenu",j="touchstart",te="touchend",le="touchmove",de="touchcancel",O="wheel",R=5,X=[[b,"_pointerenter"],[A,"_pointerdown"],[v,"_pointermove"],[k,"_pointerup"],[p,"_pointerleave"],[j,"_pointerdown"],[le,"_pointermove"],[te,"_pointerup"],[de,"_pointercancel"],[_,"_pointerover"],[O,"_wheel"],[q,"_contextmenu"],[u,"_pointerdown"],[c,"_pointermove"],[S,"_pointerup"],[M,"_pointercancel"],[H,"_lostpointercapture"]];const ie={mouse:{[C]:y,[B]:p,[E]:_,[N]:b,[c]:v,[u]:A,[S]:k,[M]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[C]:"touchout",[B]:"touchleave",[E]:"touchover",[N]:"touchenter",[c]:le,[u]:j,[S]:te,[M]:de,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[C]:C,[B]:B,[E]:E,[N]:N,[c]:c,[u]:u,[S]:S,[M]:M,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ee=me=>me.indexOf("pointer")>=0?"pointer":me.indexOf("touch")>=0?"touch":"mouse",ue=me=>{const T=ee(me);if(T==="pointer")return s.Konva.pointerEventsEnabled&&ie.pointer;if(T==="touch")return ie.touch;if(T==="mouse")return ie.mouse};function we(me={}){return(me.clipFunc||me.clipWidth||me.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),me}const Oe="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class Pe extends n.Container{constructor(T){super(we(T)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{we(this.attrs)}),this._checkVisibility()}_validateAdd(T){const G=T.getType()==="Layer",Y=T.getType()==="FastLayer";G||Y||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const T=this.visible()?"":"none";this.content.style.display=T}setContainer(T){if(typeof T===d){if(T.charAt(0)==="."){var G=T.slice(1);T=document.getElementsByClassName(G)[0]}else{var Y;T.charAt(0)!=="#"?Y=T:Y=T.slice(1),T=document.getElementById(Y)}if(!T)throw"Can not find container in document with id "+Y}return this._setAttr("container",T),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),T.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var T=this.children,G=T.length,Y;for(Y=0;Y<G;Y++)T[Y].clear();return this}clone(T){return T||(T={}),T.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,T)}destroy(){super.destroy();var T=this.content;T&&t.Util._isInDocument(T)&&this.container().removeChild(T);var G=e.stages.indexOf(this);return G>-1&&e.stages.splice(G,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const T=this._pointerPositions[0]||this._changedPointerPositions[0];return T?{x:T.x,y:T.y}:(t.Util.warn(Oe),null)}_getPointerById(T){return this._pointerPositions.find(G=>G.id===T)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(T){T=T||{},T.x=T.x||0,T.y=T.y||0,T.width=T.width||this.width(),T.height=T.height||this.height();var G=new r.SceneCanvas({width:T.width,height:T.height,pixelRatio:T.pixelRatio||1}),Y=G.getContext()._context,Te=this.children;return(T.x||T.y)&&Y.translate(-1*T.x,-1*T.y),Te.forEach(function(ve){if(!!ve.isVisible()){var g=ve._toKonvaCanvas(T);Y.drawImage(g._canvas,T.x,T.y,g.getWidth()/g.getPixelRatio(),g.getHeight()/g.getPixelRatio())}}),G}getIntersection(T){if(!T)return null;var G=this.children,Y=G.length,Te=Y-1,ve;for(ve=Te;ve>=0;ve--){const g=G[ve].getIntersection(T);if(g)return g}return null}_resizeDOM(){var T=this.width(),G=this.height();this.content&&(this.content.style.width=T+f,this.content.style.height=G+f),this.bufferCanvas.setSize(T,G),this.bufferHitCanvas.setSize(T,G),this.children.forEach(Y=>{Y.setSize({width:T,height:G}),Y.draw()})}add(T,...G){if(arguments.length>1){for(var Y=0;Y<arguments.length;Y++)this.add(arguments[Y]);return this}super.add(T);var Te=this.children.length;return Te>R&&t.Util.warn("The stage has "+Te+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),T.setSize({width:this.width(),height:this.height()}),T.draw(),s.Konva.isBrowser&&this.content.appendChild(T.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(T){return l.hasPointerCapture(T,this)}setPointerCapture(T){l.setPointerCapture(T,this)}releaseCapture(T){l.releaseCapture(T,this)}getLayers(){return this.children}_bindContentEvents(){!s.Konva.isBrowser||X.forEach(([T,G])=>{this.content.addEventListener(T,Y=>{this[G](Y)},{passive:!1})})}_pointerenter(T){this.setPointersPositions(T);const G=ue(T.type);this._fire(G.pointerenter,{evt:T,target:this,currentTarget:this})}_pointerover(T){this.setPointersPositions(T);const G=ue(T.type);this._fire(G.pointerover,{evt:T,target:this,currentTarget:this})}_getTargetShape(T){let G=this[T+"targetShape"];return G&&!G.getStage()&&(G=null),G}_pointerleave(T){const G=ue(T.type),Y=ee(T.type);if(!!G){this.setPointersPositions(T);var Te=this._getTargetShape(Y),ve=!a.DD.isDragging||s.Konva.hitOnDragEnabled;Te&&ve?(Te._fireAndBubble(G.pointerout,{evt:T}),Te._fireAndBubble(G.pointerleave,{evt:T}),this._fire(G.pointerleave,{evt:T,target:this,currentTarget:this}),this[Y+"targetShape"]=null):ve&&(this._fire(G.pointerleave,{evt:T,target:this,currentTarget:this}),this._fire(G.pointerout,{evt:T,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(T){const G=ue(T.type),Y=ee(T.type);if(!!G){this.setPointersPositions(T);var Te=!1;this._changedPointerPositions.forEach(ve=>{var g=this.getIntersection(ve);if(a.DD.justDragged=!1,s.Konva["_"+Y+"ListenClick"]=!0,!(g&&g.isListening()))return;s.Konva.capturePointerEventsEnabled&&g.setPointerCapture(ve.id),this[Y+"ClickStartShape"]=g,g._fireAndBubble(G.pointerdown,{evt:T,pointerId:ve.id}),Te=!0;const x=T.type.indexOf("touch")>=0;g.preventDefault()&&T.cancelable&&x&&T.preventDefault()}),Te||this._fire(G.pointerdown,{evt:T,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(T){const G=ue(T.type),Y=ee(T.type);if(!G)return;a.DD.isDragging&&a.DD.node.preventDefault()&&T.cancelable&&T.preventDefault(),this.setPointersPositions(T);var Te=!a.DD.isDragging||s.Konva.hitOnDragEnabled;if(!Te)return;var ve={};let g=!1;var w=this._getTargetShape(Y);this._changedPointerPositions.forEach(x=>{const P=l.getCapturedShape(x.id)||this.getIntersection(x),D=x.id,W={evt:T,pointerId:D};var V=w!==P;if(V&&w&&(w._fireAndBubble(G.pointerout,Object.assign({},W),P),w._fireAndBubble(G.pointerleave,Object.assign({},W),P)),P){if(ve[P._id])return;ve[P._id]=!0}P&&P.isListening()?(g=!0,V&&(P._fireAndBubble(G.pointerover,Object.assign({},W),w),P._fireAndBubble(G.pointerenter,Object.assign({},W),w),this[Y+"targetShape"]=P),P._fireAndBubble(G.pointermove,Object.assign({},W))):w&&(this._fire(G.pointerover,{evt:T,target:this,currentTarget:this,pointerId:D}),this[Y+"targetShape"]=null)}),g||this._fire(G.pointermove,{evt:T,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(T){const G=ue(T.type),Y=ee(T.type);if(!G)return;this.setPointersPositions(T);const Te=this[Y+"ClickStartShape"],ve=this[Y+"ClickEndShape"];var g={};let w=!1;this._changedPointerPositions.forEach(x=>{const P=l.getCapturedShape(x.id)||this.getIntersection(x);if(P){if(P.releaseCapture(x.id),g[P._id])return;g[P._id]=!0}const D=x.id,W={evt:T,pointerId:D};let V=!1;s.Konva["_"+Y+"InDblClickWindow"]?(V=!0,clearTimeout(this[Y+"DblTimeout"])):a.DD.justDragged||(s.Konva["_"+Y+"InDblClickWindow"]=!0,clearTimeout(this[Y+"DblTimeout"])),this[Y+"DblTimeout"]=setTimeout(function(){s.Konva["_"+Y+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),P&&P.isListening()?(w=!0,this[Y+"ClickEndShape"]=P,P._fireAndBubble(G.pointerup,Object.assign({},W)),s.Konva["_"+Y+"ListenClick"]&&Te&&Te===P&&(P._fireAndBubble(G.pointerclick,Object.assign({},W)),V&&ve&&ve===P&&P._fireAndBubble(G.pointerdblclick,Object.assign({},W)))):(this[Y+"ClickEndShape"]=null,s.Konva["_"+Y+"ListenClick"]&&this._fire(G.pointerclick,{evt:T,target:this,currentTarget:this,pointerId:D}),V&&this._fire(G.pointerdblclick,{evt:T,target:this,currentTarget:this,pointerId:D}))}),w||this._fire(G.pointerup,{evt:T,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+Y+"ListenClick"]=!1,T.cancelable&&Y!=="touch"&&T.preventDefault()}_contextmenu(T){this.setPointersPositions(T);var G=this.getIntersection(this.getPointerPosition());G&&G.isListening()?G._fireAndBubble(q,{evt:T}):this._fire(q,{evt:T,target:this,currentTarget:this})}_wheel(T){this.setPointersPositions(T);var G=this.getIntersection(this.getPointerPosition());G&&G.isListening()?G._fireAndBubble(O,{evt:T}):this._fire(O,{evt:T,target:this,currentTarget:this})}_pointercancel(T){this.setPointersPositions(T);const G=l.getCapturedShape(T.pointerId)||this.getIntersection(this.getPointerPosition());G&&G._fireAndBubble(S,l.createEvent(T)),l.releaseCapture(T.pointerId)}_lostpointercapture(T){l.releaseCapture(T.pointerId)}setPointersPositions(T){var G=this._getContentPosition(),Y=null,Te=null;T=T||window.event,T.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(T.touches,ve=>{this._pointerPositions.push({id:ve.identifier,x:(ve.clientX-G.left)/G.scaleX,y:(ve.clientY-G.top)/G.scaleY})}),Array.prototype.forEach.call(T.changedTouches||T.touches,ve=>{this._changedPointerPositions.push({id:ve.identifier,x:(ve.clientX-G.left)/G.scaleX,y:(ve.clientY-G.top)/G.scaleY})})):(Y=(T.clientX-G.left)/G.scaleX,Te=(T.clientY-G.top)/G.scaleY,this.pointerPos={x:Y,y:Te},this._pointerPositions=[{x:Y,y:Te,id:t.Util._getFirstPointerId(T)}],this._changedPointerPositions=[{x:Y,y:Te,id:t.Util._getFirstPointerId(T)}])}_setPointerPosition(T){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(T)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var T=this.content.getBoundingClientRect();return{top:T.top,left:T.left,scaleX:T.width/this.content.clientWidth||1,scaleY:T.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!s.Konva.isBrowser){var T=this.container();if(!T)throw"Stage has no container. A container is required.";T.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),T.appendChild(this.content),this._resizeDOM()}}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(T){T.batchDraw()}),this}}e.Stage=Pe,Pe.prototype.nodeType=h,(0,o._registerNode)(Pe),i.Factory.addGetterSetter(Pe,"container")})(Pl);var Mn={},Qi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=We,i=je,n=Lt,s=li,r=be,a=We,o=ht;var l="hasShadow",h="shadowRGBA",d="patternImage",f="linearGradient",y="radialGradient";let p;function _(){return p||(p=i.Util.createCanvasElement().getContext("2d"),p)}e.shapes={};function b(B){const E=this.attrs.fillRule;E?B.fill(E):B.fill()}function v(B){B.stroke()}function A(B){B.fill()}function k(B){B.stroke()}function c(){this._clearCache(l)}function u(){this._clearCache(h)}function S(){this._clearCache(d)}function M(){this._clearCache(f)}function H(){this._clearCache(y)}class C extends s.Node{constructor(E){super(E);let N;for(;N=i.Util.getRandomColor(),!(N&&!(N in e.shapes)););this.colorKey=N,e.shapes[N]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var E=_();const N=E.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(N&&N.setTransform){const q=new i.Transform;q.translate(this.fillPatternX(),this.fillPatternY()),q.rotate(t.Konva.getAngle(this.fillPatternRotation())),q.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),q.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const j=q.getMatrix(),te=typeof DOMMatrix>"u"?{a:j[0],b:j[1],c:j[2],d:j[3],e:j[4],f:j[5]}:new DOMMatrix(j);N.setTransform(te)}return N}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){var E=this.fillLinearGradientColorStops();if(E){for(var N=_(),q=this.fillLinearGradientStartPoint(),j=this.fillLinearGradientEndPoint(),te=N.createLinearGradient(q.x,q.y,j.x,j.y),le=0;le<E.length;le+=2)te.addColorStop(E[le],E[le+1]);return te}}_getRadialGradient(){return this._getCache(y,this.__getRadialGradient)}__getRadialGradient(){var E=this.fillRadialGradientColorStops();if(E){for(var N=_(),q=this.fillRadialGradientStartPoint(),j=this.fillRadialGradientEndPoint(),te=N.createRadialGradient(q.x,q.y,this.fillRadialGradientStartRadius(),j.x,j.y,this.fillRadialGradientEndRadius()),le=0;le<E.length;le+=2)te.addColorStop(E[le],E[le+1]);return te}}getShadowRGBA(){return this._getCache(h,this._getShadowRGBA)}_getShadowRGBA(){if(!!this.hasShadow()){var E=i.Util.colorToRGBA(this.shadowColor());if(E)return"rgba("+E.r+","+E.g+","+E.b+","+E.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const E=this.hitStrokeWidth();return E==="auto"?this.hasStroke():this.strokeEnabled()&&!!E}intersects(E){var N=this.getStage(),q=N.bufferHitCanvas,j;return q.getContext().clear(),this.drawHit(q,null,!0),j=q.context.getImageData(Math.round(E.x),Math.round(E.y),1,1).data,j[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(E){var N;if(!this.getStage()||!((N=this.attrs.perfectDrawEnabled)!==null&&N!==void 0?N:!0))return!1;const j=E||this.hasFill(),te=this.hasStroke(),le=this.getAbsoluteOpacity()!==1;if(j&&te&&le)return!0;const de=this.hasShadow(),O=this.shadowForStrokeEnabled();return!!(j&&te&&de&&O)}setStrokeHitEnabled(E){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),E?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var E=this.size();return{x:this._centroid?-E.width/2:0,y:this._centroid?-E.height/2:0,width:E.width,height:E.height}}getClientRect(E={}){const N=E.skipTransform,q=E.relativeTo,j=this.getSelfRect(),le=!E.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,de=j.width+le,O=j.height+le,R=!E.skipShadow&&this.hasShadow(),X=R?this.shadowOffsetX():0,ie=R?this.shadowOffsetY():0,ee=de+Math.abs(X),ue=O+Math.abs(ie),we=R&&this.shadowBlur()||0,Oe=ee+we*2,Pe=ue+we*2,me={width:Oe,height:Pe,x:-(le/2+we)+Math.min(X,0)+j.x,y:-(le/2+we)+Math.min(ie,0)+j.y};return N?me:this._transformedRect(me,q)}drawScene(E,N){var q=this.getLayer(),j=E||q.getCanvas(),te=j.getContext(),le=this._getCanvasCache(),de=this.getSceneFunc(),O=this.hasShadow(),R,X,ie,ee=j.isCache,ue=N===this;if(!this.isVisible()&&!ue)return this;if(le){te.save();var we=this.getAbsoluteTransform(N).getMatrix();return te.transform(we[0],we[1],we[2],we[3],we[4],we[5]),this._drawCachedSceneCanvas(te),te.restore(),this}if(!de)return this;if(te.save(),this._useBufferCanvas()&&!ee){R=this.getStage(),X=R.bufferCanvas,ie=X.getContext(),ie.clear(),ie.save(),ie._applyLineJoin(this);var Oe=this.getAbsoluteTransform(N).getMatrix();ie.transform(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5]),de.call(this,ie,this),ie.restore();var Pe=X.pixelRatio;O&&te._applyShadow(this),te._applyOpacity(this),te._applyGlobalCompositeOperation(this),te.drawImage(X._canvas,0,0,X.width/Pe,X.height/Pe)}else{if(te._applyLineJoin(this),!ue){var Oe=this.getAbsoluteTransform(N).getMatrix();te.transform(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5]),te._applyOpacity(this),te._applyGlobalCompositeOperation(this)}O&&te._applyShadow(this),de.call(this,te,this)}return te.restore(),this}drawHit(E,N,q=!1){if(!this.shouldDrawHit(N,q))return this;var j=this.getLayer(),te=E||j.hitCanvas,le=te&&te.getContext(),de=this.hitFunc()||this.sceneFunc(),O=this._getCanvasCache(),R=O&&O.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),R){le.save();var X=this.getAbsoluteTransform(N).getMatrix();return le.transform(X[0],X[1],X[2],X[3],X[4],X[5]),this._drawCachedHitCanvas(le),le.restore(),this}if(!de)return this;if(le.save(),le._applyLineJoin(this),!(this===N)){var ee=this.getAbsoluteTransform(N).getMatrix();le.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5])}return de.call(this,le,this),le.restore(),this}drawHitFromCache(E=0){var N=this._getCanvasCache(),q=this._getCachedSceneCanvas(),j=N.hit,te=j.getContext(),le=j.getWidth(),de=j.getHeight(),O,R,X,ie,ee,ue;te.clear(),te.drawImage(q._canvas,0,0,le,de);try{for(O=te.getImageData(0,0,le,de),R=O.data,X=R.length,ie=i.Util._hexToRgb(this.colorKey),ee=0;ee<X;ee+=4)ue=R[ee+3],ue>E?(R[ee]=ie.r,R[ee+1]=ie.g,R[ee+2]=ie.b,R[ee+3]=255):R[ee+3]=0;te.putImageData(O,0,0)}catch(we){i.Util.error("Unable to draw hit graph from cached scene canvas. "+we.message)}return this}hasPointerCapture(E){return o.hasPointerCapture(E,this)}setPointerCapture(E){o.setPointerCapture(E,this)}releaseCapture(E){o.releaseCapture(E,this)}}e.Shape=C,C.prototype._fillFunc=b,C.prototype._strokeFunc=v,C.prototype._fillFuncHit=A,C.prototype._strokeFuncHit=k,C.prototype._centroid=!1,C.prototype.nodeType="Shape",(0,a._registerNode)(C),C.prototype.eventListeners={},C.prototype.on.call(C.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",c),C.prototype.on.call(C.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",u),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",S),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",M),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",H),n.Factory.addGetterSetter(C,"stroke",void 0,(0,r.getStringOrGradientValidator)()),n.Factory.addGetterSetter(C,"strokeWidth",2,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(C,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(C,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(C,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(C,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(C,"lineJoin"),n.Factory.addGetterSetter(C,"lineCap"),n.Factory.addGetterSetter(C,"sceneFunc"),n.Factory.addGetterSetter(C,"hitFunc"),n.Factory.addGetterSetter(C,"dash"),n.Factory.addGetterSetter(C,"dashOffset",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"shadowColor",void 0,(0,r.getStringValidator)()),n.Factory.addGetterSetter(C,"shadowBlur",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"shadowOpacity",1,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(C,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(C,"shadowOffsetX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"shadowOffsetY",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillPatternImage"),n.Factory.addGetterSetter(C,"fill",void 0,(0,r.getStringOrGradientValidator)()),n.Factory.addGetterSetter(C,"fillPatternX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillPatternY",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(C,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(C,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(C,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(C,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(C,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(C,"fillEnabled",!0),n.Factory.addGetterSetter(C,"strokeEnabled",!0),n.Factory.addGetterSetter(C,"shadowEnabled",!0),n.Factory.addGetterSetter(C,"dashEnabled",!0),n.Factory.addGetterSetter(C,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(C,"fillPriority","color"),n.Factory.addComponentsGetterSetter(C,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(C,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(C,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(C,"fillPatternScaleX",1,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillPatternScaleY",1,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(C,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(C,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(C,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(C,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(C,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(C,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(C,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(C,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(C,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(C,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(C,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(C,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(C,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(C,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(C,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(C,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(C,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(C,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(C,"fillPatternRotation",0),n.Factory.addGetterSetter(C,"fillRule",void 0,(0,r.getStringValidator)()),n.Factory.backCompat(C,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Qi);Object.defineProperty(Mn,"__esModule",{value:!0});Mn.Layer=void 0;const Nt=je,ar=Pi,Ni=li,ia=Lt,ao=Ct,Xu=be,ju=Qi,Ku=We;var Yu="#",Zu="beforeDraw",qu="draw",Ol=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Ju=Ol.length;class en extends ar.Container{constructor(t){super(t),this.canvas=new ao.SceneCanvas,this.hitCanvas=new ao.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),t<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[t+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Ni.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=Ni.Node.prototype.moveUp.call(this);if(!t)return!1;var i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Ni.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Ni.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return Ni.Node.prototype.remove.call(this),t&&t.parentNode&&Nt.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:i}){return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(t){var i=t.getType();i!=="Group"&&i!=="Shape"&&Nt.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Ni.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Nt.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Nt.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Nt.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var i=1,n=!1;;){for(let s=0;s<Ju;s++){const r=Ol[s],a=this._getIntersection({x:t.x+r.x*i,y:t.y+r.y*i}),o=a.shape;if(o)return o;if(n=!!a.antialiased,!a.antialiased)break}if(n)i+=1;else return null}}_getIntersection(t){const i=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,s=n[3];if(s===255){const r=Nt.Util._rgbToHex(n[0],n[1],n[2]),a=ju.shapes[Yu+r];return a?{shape:a}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,i){var n=this.getLayer(),s=t||n&&n.getCanvas();return this._fire(Zu,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),ar.Container.prototype.drawScene.call(this,s,i),this._fire(qu,{node:this}),this}drawHit(t,i){var n=this.getLayer(),s=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),ar.Container.prototype.drawHit.call(this,s,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){Nt.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return Nt.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,i=!!this.hitCanvas._canvas.parentNode;i?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Nt.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Mn.Layer=en;en.prototype.nodeType="Layer";(0,Ku._registerNode)(en);ia.Factory.addGetterSetter(en,"imageSmoothingEnabled",!0);ia.Factory.addGetterSetter(en,"clearBeforeDraw",!0);ia.Factory.addGetterSetter(en,"hitGraphEnabled",!0,(0,Xu.getBooleanValidator)());var zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.FastLayer=void 0;const Qu=je,ef=Mn,tf=We;class na extends ef.Layer{constructor(t){super(t),this.listening(!1),Qu.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}zs.FastLayer=na;na.prototype.nodeType="FastLayer";(0,tf._registerNode)(na);var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.Group=void 0;const nf=je,sf=Pi,rf=We;class sa extends sf.Container{_validateAdd(t){var i=t.getType();i!=="Group"&&i!=="Shape"&&nf.Util.throw("You may only add groups and shapes to groups.")}}$s.Group=sa;sa.prototype.nodeType="Group";(0,rf._registerNode)(sa);var On={};Object.defineProperty(On,"__esModule",{value:!0});var Dl=On.Animation=void 0;const or=We,oo=je;var lr=function(){return or.glob.performance&&or.glob.performance.now?function(){return or.glob.performance.now()}:function(){return new Date().getTime()}}();class Mt{constructor(t,i){this.id=Mt.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:lr(),frameRate:0},this.func=t,this.setLayers(i)}setLayers(t){var i=[];return t?t.length>0?i=t:i=[t]:i=[],this.layers=i,this}getLayers(){return this.layers}addLayer(t){var i=this.layers,n=i.length,s;for(s=0;s<n;s++)if(i[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){var t=Mt,i=t.animations,n=i.length,s;for(s=0;s<n;s++)if(i[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=lr(),Mt._addAnimation(this),this}stop(){return Mt._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){var i=t.id,n=this.animations,s=n.length,r;for(r=0;r<s;r++)if(n[r].id===i){this.animations.splice(r,1);break}}static _runFrames(){var t={},i=this.animations,n,s,r,a,o,l,h,d,f;for(a=0;a<i.length;a++)if(n=i[a],s=n.layers,r=n.func,n._updateFrameObject(lr()),l=s.length,r?f=r.call(n,n.frame)!==!1:f=!0,!!f)for(o=0;o<l;o++)h=s[o],h._id!==void 0&&(t[h._id]=h);for(d in t)!t.hasOwnProperty(d)||t[d].batchDraw()}static _animationLoop(){var t=Mt;t.animations.length?(t._runFrames(),oo.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,oo.Util.requestAnimFrame(this._animationLoop))}}Dl=On.Animation=Mt;Mt.animations=[];Mt.animIdCounter=0;Mt.animRunning=!1;var Ll={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=je,i=On,n=li,s=We;var r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,o=2,l=3,h=0,d=["fill","stroke","shadowColor"];class f{constructor(_,b,v,A,k,c,u){this.prop=_,this.propFunc=b,this.begin=A,this._pos=A,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=u,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=k-this.begin,this.pause()}fire(_){var b=this[_];b&&b()}setTime(_){_>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():_<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=_,this.update())}getTime(){return this._time}setPosition(_){this.prevPos=this._pos,this.propFunc(_),this._pos=_}getPosition(_){return _===void 0&&(_=this._time),this.func(_,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(_){this.pause(),this._time=_,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var _=this.getTimer()-this._startTime;this.state===o?this.setTime(_):this.state===l&&this.setTime(this.duration-_)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class y{constructor(_){var b=this,v=_.node,A=v._id,k,c=_.easing||e.Easings.Linear,u=!!_.yoyo,S;typeof _.duration>"u"?k=.3:_.duration===0?k=.001:k=_.duration,this.node=v,this._id=h++;var M=v.getLayer()||(v instanceof s.Konva.Stage?v.getLayers():null);M||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){b.tween.onEnterFrame()},M),this.tween=new f(S,function(H){b._tweenFunc(H)},c,0,1,k*1e3,u),this._addListeners(),y.attrs[A]||(y.attrs[A]={}),y.attrs[A][this._id]||(y.attrs[A][this._id]={}),y.tweens[A]||(y.tweens[A]={});for(S in _)r[S]===void 0&&this._addAttr(S,_[S]);this.reset(),this.onFinish=_.onFinish,this.onReset=_.onReset,this.onUpdate=_.onUpdate}_addAttr(_,b){var v=this.node,A=v._id,k,c,u,S,M,H,C,B;if(u=y.tweens[A][_],u&&delete y.attrs[A][u][_],k=v.getAttr(_),t.Util._isArray(b))if(c=[],M=Math.max(b.length,k.length),_==="points"&&b.length!==k.length&&(b.length>k.length?(C=k,k=t.Util._prepareArrayForTween(k,b,v.closed())):(H=b,b=t.Util._prepareArrayForTween(b,k,v.closed()))),_.indexOf("fill")===0)for(S=0;S<M;S++)if(S%2===0)c.push(b[S]-k[S]);else{var E=t.Util.colorToRGBA(k[S]);B=t.Util.colorToRGBA(b[S]),k[S]=E,c.push({r:B.r-E.r,g:B.g-E.g,b:B.b-E.b,a:B.a-E.a})}else for(S=0;S<M;S++)c.push(b[S]-k[S]);else d.indexOf(_)!==-1?(k=t.Util.colorToRGBA(k),B=t.Util.colorToRGBA(b),c={r:B.r-k.r,g:B.g-k.g,b:B.b-k.b,a:B.a-k.a}):c=b-k;y.attrs[A][this._id][_]={start:k,diff:c,end:b,trueEnd:H,trueStart:C},y.tweens[A][_]=this._id}_tweenFunc(_){var b=this.node,v=y.attrs[b._id][this._id],A,k,c,u,S,M,H,C;for(A in v){if(k=v[A],c=k.start,u=k.diff,C=k.end,t.Util._isArray(c))if(S=[],H=Math.max(c.length,C.length),A.indexOf("fill")===0)for(M=0;M<H;M++)M%2===0?S.push((c[M]||0)+u[M]*_):S.push("rgba("+Math.round(c[M].r+u[M].r*_)+","+Math.round(c[M].g+u[M].g*_)+","+Math.round(c[M].b+u[M].b*_)+","+(c[M].a+u[M].a*_)+")");else for(M=0;M<H;M++)S.push((c[M]||0)+u[M]*_);else d.indexOf(A)!==-1?S="rgba("+Math.round(c.r+u.r*_)+","+Math.round(c.g+u.g*_)+","+Math.round(c.b+u.b*_)+","+(c.a+u.a*_)+")":S=c+u*_;b.setAttr(A,S)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var _=this.node,b=y.attrs[_._id][this._id];b.points&&b.points.trueEnd&&_.setAttr("points",b.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var _=this.node,b=y.attrs[_._id][this._id];b.points&&b.points.trueStart&&_.points(b.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(_){return this.tween.seek(_*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var _=this.node._id,b=this._id,v=y.tweens[_],A;this.pause();for(A in v)delete y.tweens[_][A];delete y.attrs[_][b]}}e.Tween=y,y.attrs={},y.tweens={},n.Node.prototype.to=function(p){var _=p.onFinish;p.node=this,p.onFinish=function(){this.destroy(),_&&_()};var b=new y(p);b.play()},e.Easings={BackEaseIn(p,_,b,v){var A=1.70158;return b*(p/=v)*p*((A+1)*p-A)+_},BackEaseOut(p,_,b,v){var A=1.70158;return b*((p=p/v-1)*p*((A+1)*p+A)+1)+_},BackEaseInOut(p,_,b,v){var A=1.70158;return(p/=v/2)<1?b/2*(p*p*(((A*=1.525)+1)*p-A))+_:b/2*((p-=2)*p*(((A*=1.525)+1)*p+A)+2)+_},ElasticEaseIn(p,_,b,v,A,k){var c=0;return p===0?_:(p/=v)===1?_+b:(k||(k=v*.3),!A||A<Math.abs(b)?(A=b,c=k/4):c=k/(2*Math.PI)*Math.asin(b/A),-(A*Math.pow(2,10*(p-=1))*Math.sin((p*v-c)*(2*Math.PI)/k))+_)},ElasticEaseOut(p,_,b,v,A,k){var c=0;return p===0?_:(p/=v)===1?_+b:(k||(k=v*.3),!A||A<Math.abs(b)?(A=b,c=k/4):c=k/(2*Math.PI)*Math.asin(b/A),A*Math.pow(2,-10*p)*Math.sin((p*v-c)*(2*Math.PI)/k)+b+_)},ElasticEaseInOut(p,_,b,v,A,k){var c=0;return p===0?_:(p/=v/2)===2?_+b:(k||(k=v*(.3*1.5)),!A||A<Math.abs(b)?(A=b,c=k/4):c=k/(2*Math.PI)*Math.asin(b/A),p<1?-.5*(A*Math.pow(2,10*(p-=1))*Math.sin((p*v-c)*(2*Math.PI)/k))+_:A*Math.pow(2,-10*(p-=1))*Math.sin((p*v-c)*(2*Math.PI)/k)*.5+b+_)},BounceEaseOut(p,_,b,v){return(p/=v)<1/2.75?b*(7.5625*p*p)+_:p<2/2.75?b*(7.5625*(p-=1.5/2.75)*p+.75)+_:p<2.5/2.75?b*(7.5625*(p-=2.25/2.75)*p+.9375)+_:b*(7.5625*(p-=2.625/2.75)*p+.984375)+_},BounceEaseIn(p,_,b,v){return b-e.Easings.BounceEaseOut(v-p,0,b,v)+_},BounceEaseInOut(p,_,b,v){return p<v/2?e.Easings.BounceEaseIn(p*2,0,b,v)*.5+_:e.Easings.BounceEaseOut(p*2-v,0,b,v)*.5+b*.5+_},EaseIn(p,_,b,v){return b*(p/=v)*p+_},EaseOut(p,_,b,v){return-b*(p/=v)*(p-2)+_},EaseInOut(p,_,b,v){return(p/=v/2)<1?b/2*p*p+_:-b/2*(--p*(p-2)-1)+_},StrongEaseIn(p,_,b,v){return b*(p/=v)*p*p*p*p+_},StrongEaseOut(p,_,b,v){return b*((p=p/v-1)*p*p*p*p+1)+_},StrongEaseInOut(p,_,b,v){return(p/=v/2)<1?b/2*p*p*p*p*p+_:b/2*((p-=2)*p*p*p*p+2)+_},Linear(p,_,b,v){return b*p/v+_}}})(Ll);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=We,i=je,n=li,s=Pi,r=Pl,a=Mn,o=zs,l=$s,h=Hs,d=Qi,f=On,y=Ll,p=Gt,_=Ct;e.Konva=i.Util._assign(t.Konva,{Util:i.Util,Transform:i.Transform,Node:n.Node,Container:s.Container,Stage:r.Stage,stages:r.stages,Layer:a.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:h.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:y.Tween,Easings:y.Easings,Context:p.Context,Canvas:_.Canvas}),e.default=e.Konva})(xr);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var i=xr;Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return i.Konva}});const n=xr;e.exports=n.Konva})(Er,Er.exports);const Re=au(Er.exports);var ra={};Object.defineProperty(ra,"__esModule",{value:!0});var Xs=ra.Line=void 0;const js=Lt,af=Qi,Rl=be,of=We;function Ir(e,t,i,n,s,r,a){var o=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2)),l=Math.sqrt(Math.pow(s-i,2)+Math.pow(r-n,2)),h=a*o/(o+l),d=a*l/(o+l),f=i-h*(s-e),y=n-h*(r-t),p=i+d*(s-e),_=n+d*(r-t);return[f,y,p,_]}function lo(e,t){var i=e.length,n=[],s,r;for(s=2;s<i-2;s+=2)r=Ir(e[s-2],e[s-1],e[s],e[s+1],e[s+2],e[s+3],t),!isNaN(r[0])&&(n.push(r[0]),n.push(r[1]),n.push(e[s]),n.push(e[s+1]),n.push(r[2]),n.push(r[3]));return n}class hi extends af.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var i=this.points(),n=i.length,s=this.tension(),r=this.closed(),a=this.bezier(),o,l,h;if(!!n){if(t.beginPath(),t.moveTo(i[0],i[1]),s!==0&&n>4){for(o=this.getTensionPoints(),l=o.length,h=r?0:4,r||t.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)t.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);r||t.quadraticCurveTo(o[l-2],o[l-1],i[n-2],i[n-1])}else if(a)for(h=2;h<n;)t.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<n;h+=2)t.lineTo(i[h],i[h+1]);r?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():lo(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),i=t.length,n=this.tension(),s=Ir(t[i-2],t[i-1],t[0],t[1],t[2],t[3],n),r=Ir(t[i-4],t[i-3],t[i-2],t[i-1],t[0],t[1],n),a=lo(t,n),o=[s[2],s[3]].concat(a).concat([r[0],r[1],t[i-2],t[i-1],r[2],r[3],s[0],s[1],t[0],t[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();for(var i=t[0],n=t[0],s=t[1],r=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],i=Math.min(i,a),n=Math.max(n,a),s=Math.min(s,o),r=Math.max(r,o);return{x:i,y:s,width:n-i,height:r-s}}}Xs=ra.Line=hi;hi.prototype.className="Line";hi.prototype._attrsAffectingSize=["points","bezier","tension"];(0,of._registerNode)(hi);js.Factory.addGetterSetter(hi,"closed",!1);js.Factory.addGetterSetter(hi,"bezier",!1);js.Factory.addGetterSetter(hi,"tension",0,(0,Rl.getNumberValidator)());js.Factory.addGetterSetter(hi,"points",[],(0,Rl.getNumberArrayValidator)());var aa={};Object.defineProperty(aa,"__esModule",{value:!0});var tn=aa.Rect=void 0;const lf=Lt,hf=Qi,cf=We,df=je,uf=be;class Ks extends hf.Shape{_sceneFunc(t){var i=this.cornerRadius(),n=this.width(),s=this.height();t.beginPath(),i?df.Util.drawRoundedRectPath(t,n,s,i):t.rect(0,0,n,s),t.closePath(),t.fillStrokeShape(this)}}tn=aa.Rect=Ks;Ks.prototype.className="Rect";(0,cf._registerNode)(Ks);lf.Factory.addGetterSetter(Ks,"cornerRadius",0,(0,uf.getNumberOrArrayOfNumbersValidator)(4));var kn={};Object.defineProperty(kn,"__esModule",{value:!0});var xi=kn.Text=kn.stringToArray=void 0;const Mr=je,et=Lt,ff=Qi,ci=be,gf=We;function Fl(e){return Array.from(e)}kn.stringToArray=Fl;var Wi="auto",pf="center",an="justify",_f="Change.konva",mf="2d",ho="-",Nl="left",vf="text",yf="Text",bf="top",wf="bottom",co="middle",Wl="normal",Sf="px ",qn=" ",Cf="right",Tf="word",kf="char",uo="none",hr="\u2026",Bl=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Ef=Bl.length;function xf(e){return e.split(",").map(t=>{t=t.trim();const i=t.indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return i&&!n&&(t=`"${t}"`),t}).join(", ")}var Jn;function cr(){return Jn||(Jn=Mr.Util.createCanvasElement().getContext(mf),Jn)}function Af(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Pf(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function If(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class Ge extends ff.Shape{constructor(t){super(If(t)),this._partialTextX=0,this._partialTextY=0;for(var i=0;i<Ef;i++)this.on(Bl[i]+_f,this._setTextData);this._setTextData()}_sceneFunc(t){var i=this.textArr,n=i.length;if(!!this.text()){var s=this.padding(),r=this.fontSize(),a=this.lineHeight()*r,o=this.verticalAlign(),l=0,h=this.align(),d=this.getWidth(),f=this.letterSpacing(),y=this.fill(),p=this.textDecoration(),_=p.indexOf("underline")!==-1,b=p.indexOf("line-through")!==-1,v,A=0,A=a/2,k=0,c=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",co),t.setAttr("textAlign",Nl),o===co?l=(this.getHeight()-n*a-s*2)/2:o===wf&&(l=this.getHeight()-n*a-s*2),t.translate(s,l+s),v=0;v<n;v++){var k=0,c=0,u=i[v],S=u.text,M=u.width,H=u.lastInParagraph,C,B,E;if(t.save(),h===Cf?k+=d-M-s*2:h===pf&&(k+=(d-M-s*2)/2),_){t.save(),t.beginPath(),t.moveTo(k,A+c+Math.round(r/2)),C=S.split(" ").length-1,B=C===0,E=h===an&&!H?d-s*2:M,t.lineTo(k+Math.round(E),A+c+Math.round(r/2)),t.lineWidth=r/15;const de=this._getLinearGradient();t.strokeStyle=de||y,t.stroke(),t.restore()}if(b){t.save(),t.beginPath(),t.moveTo(k,A+c),C=S.split(" ").length-1,B=C===0,E=h===an&&H&&!B?d-s*2:M,t.lineTo(k+Math.round(E),A+c),t.lineWidth=r/15;const de=this._getLinearGradient();t.strokeStyle=de||y,t.stroke(),t.restore()}if(f!==0||h===an){C=S.split(" ").length-1;for(var N=Fl(S),q=0;q<N.length;q++){var j=N[q];j===" "&&!H&&h===an&&(k+=(d-s*2-M)/C),this._partialTextX=k,this._partialTextY=A+c,this._partialText=j,t.fillStrokeShape(this),k+=this.measureSize(j).width+f}}else this._partialTextX=k,this._partialTextY=A+c,this._partialText=S,t.fillStrokeShape(this);t.restore(),n>1&&(A+=a)}}}_hitFunc(t){var i=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}setText(t){var i=Mr.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(vf,i),this}getWidth(){var t=this.attrs.width===Wi||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var t=this.attrs.height===Wi||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Mr.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var i=cr(),n=this.fontSize(),s;return i.save(),i.font=this._getContextFont(),s=i.measureText(t),i.restore(),{width:s.width,height:n}}_getContextFont(){return this.fontStyle()+qn+this.fontVariant()+qn+(this.fontSize()+Sf)+xf(this.fontFamily())}_addTextLine(t){this.align()===an&&(t=t.trim());var n=this._getTextWidth(t);return this.textArr.push({text:t,width:n,lastInParagraph:!1})}_getTextWidth(t){var i=this.letterSpacing(),n=t.length;return cr().measureText(t).width+(n?i*(n-1):0)}_setTextData(){var t=this.text().split(`
`),i=+this.fontSize(),n=0,s=this.lineHeight()*i,r=this.attrs.width,a=this.attrs.height,o=r!==Wi&&r!==void 0,l=a!==Wi&&a!==void 0,h=this.padding(),d=r-h*2,f=a-h*2,y=0,p=this.wrap(),_=p!==uo,b=p!==kf&&_,v=this.ellipsis();this.textArr=[],cr().font=this._getContextFont();for(var A=v?this._getTextWidth(hr):0,k=0,c=t.length;k<c;++k){var u=t[k],S=this._getTextWidth(u);if(o&&S>d)for(;u.length>0;){for(var M=0,H=u.length,C="",B=0;M<H;){var E=M+H>>>1,N=u.slice(0,E+1),q=this._getTextWidth(N)+A;q<=d?(M=E+1,C=N,B=q):H=E}if(C){if(b){var j,te=u[C.length],le=te===qn||te===ho;le&&B<=d?j=C.length:j=Math.max(C.lastIndexOf(qn),C.lastIndexOf(ho))+1,j>0&&(M=j,C=C.slice(0,M),B=this._getTextWidth(C))}C=C.trimRight(),this._addTextLine(C),n=Math.max(n,B),y+=s;var de=this._shouldHandleEllipsis(y);if(de){this._tryToAddEllipsisToLastLine();break}if(u=u.slice(M),u=u.trimLeft(),u.length>0&&(S=this._getTextWidth(u),S<=d)){this._addTextLine(u),y+=s,n=Math.max(n,S);break}}else break}else this._addTextLine(u),y+=s,n=Math.max(n,S),this._shouldHandleEllipsis(y)&&k<c-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&y+s>f)break}this.textHeight=i,this.textWidth=n}_shouldHandleEllipsis(t){var i=+this.fontSize(),n=this.lineHeight()*i,s=this.attrs.height,r=s!==Wi&&s!==void 0,a=this.padding(),o=s-a*2,l=this.wrap(),h=l!==uo;return!h||r&&t+n>o}_tryToAddEllipsisToLastLine(){var t=this.attrs.width,i=t!==Wi&&t!==void 0,n=this.padding(),s=t-n*2,r=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(!(!a||!r)){if(i){var o=this._getTextWidth(a.text+hr)<s;o||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+hr)}}getStrokeScaleEnabled(){return!0}}xi=kn.Text=Ge;Ge.prototype._fillFunc=Af;Ge.prototype._strokeFunc=Pf;Ge.prototype.className=yf;Ge.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,gf._registerNode)(Ge);et.Factory.overWriteSetter(Ge,"width",(0,ci.getNumberOrAutoValidator)());et.Factory.overWriteSetter(Ge,"height",(0,ci.getNumberOrAutoValidator)());et.Factory.addGetterSetter(Ge,"fontFamily","Arial");et.Factory.addGetterSetter(Ge,"fontSize",12,(0,ci.getNumberValidator)());et.Factory.addGetterSetter(Ge,"fontStyle",Wl);et.Factory.addGetterSetter(Ge,"fontVariant",Wl);et.Factory.addGetterSetter(Ge,"padding",0,(0,ci.getNumberValidator)());et.Factory.addGetterSetter(Ge,"align",Nl);et.Factory.addGetterSetter(Ge,"verticalAlign",bf);et.Factory.addGetterSetter(Ge,"lineHeight",1,(0,ci.getNumberValidator)());et.Factory.addGetterSetter(Ge,"wrap",Tf);et.Factory.addGetterSetter(Ge,"ellipsis",!1,(0,ci.getBooleanValidator)());et.Factory.addGetterSetter(Ge,"letterSpacing",0,(0,ci.getNumberValidator)());et.Factory.addGetterSetter(Ge,"text","",(0,ci.getStringValidator)());et.Factory.addGetterSetter(Ge,"textDecoration","");function Mi(e,t){this._waveformData=e,this._channelIndex=t}Mi.prototype.min_sample=function(e){var t=(e*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._at(t)};Mi.prototype.max_sample=function(e){var t=(e*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._at(t)};Mi.prototype.set_min_sample=function(e,t){var i=(e*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._set_at(i,t)};Mi.prototype.set_max_sample=function(e,t){var i=(e*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._set_at(i,t)};Mi.prototype.min_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2)};Mi.prototype.max_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2+1)};var Bi=127,Qn=-128;function Mf(e,t){var i=Math.floor(e/t),n=e-i*t;return n>0&&i++,i}function Of(e){var t=e.scale,i=e.amplitude_scale,n=e.split_channels,s=e.length,r=e.sample_rate,a=e.channels.map(function(S){return new Float32Array(S)}),o=n?a.length:1,l=o===1?1:2,h=l===1?20:24,d=Mf(s,t),f=h+d*2*o,y=new ArrayBuffer(f),p=new DataView(y),_=0,b=h,v,A,k=new Array(o),c=new Array(o);for(v=0;v<o;v++)k[v]=1/0,c[v]=-1/0;for(p.setInt32(0,l,!0),p.setUint32(4,1,!0),p.setInt32(8,r,!0),p.setInt32(12,t,!0),p.setInt32(16,d,!0),l===2&&p.setInt32(20,o,!0),A=0;A<s;A++){var u=0;if(o===1){for(v=0;v<a.length;++v)u+=a[v][A];u=Math.floor(Bi*u*i/a.length),u<k[0]&&(k[0]=u,k[0]<Qn&&(k[0]=Qn)),u>c[0]&&(c[0]=u,c[0]>Bi&&(c[0]=Bi))}else for(v=0;v<o;++v)u=Math.floor(Bi*a[v][A]*i),u<k[v]&&(k[v]=u,k[v]<Qn&&(k[v]=Qn)),u>c[v]&&(c[v]=u,c[v]>Bi&&(c[v]=Bi));if(++_===t){for(v=0;v<o;v++)p.setInt8(b++,k[v]),p.setInt8(b++,c[v]),k[v]=1/0,c[v]=-1/0;_=0}}if(_>0)for(v=0;v<o;v++)p.setInt8(b++,k[v]),p.setInt8(b++,c[v]);return y}function gn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gn=function(t){return typeof t}:gn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gn(e)}function Df(e){return e&&gn(e)==="object"&&"sample_rate"in e&&"samples_per_pixel"in e&&"bits"in e&&"length"in e&&"data"in e}function Lf(e){var t=e&&gn(e)==="object"&&"byteLength"in e;if(t){var i=new DataView(e),n=i.getInt32(0,!0);if(n!==1&&n!==2)throw new TypeError("WaveformData.create(): This waveform data version not supported")}return t}function Rf(e){var t=e.data,i=e.channels||1,n=24,s=e.bits===8?1:2,r=e.length*2*i;if(t.length!==r)throw new Error("WaveformData.create(): Length mismatch in JSON waveform data");var a=n+t.length*s,o=new ArrayBuffer(a),l=new DataView(o);l.setInt32(0,2,!0),l.setUint32(4,e.bits===8,!0),l.setInt32(8,e.sample_rate,!0),l.setInt32(12,e.samples_per_pixel,!0),l.setInt32(16,e.length,!0),l.setInt32(20,i,!0);var h=n,d;if(e.bits===8)for(d=0;d<t.length;d++)l.setInt8(h++,t[d],!0);else for(d=0;d<t.length;d++)l.setInt16(h,t[d],!0),h+=2;return o}function Ff(e,t){var i=atob(e);if(t){for(var n=new Uint8Array(i.length),s=0,r=i.length;s<r;++s)n[s]=i.charCodeAt(s);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}function Nf(e,t,i){var n=t===void 0?null:t,s=i===void 0?!1:i,r=Ff(e,s),a=r.indexOf(`
`,10)+1,o=r.substring(a)+(n?"//# sourceMappingURL="+n:""),l=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(l)}function Wf(e,t,i){var n;return function(r){return n=n||Nf(e,t,i),new Worker(n,r)}}var Bf=Wf("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogQXVkaW9CdWZmZXItYmFzZWQgV2F2ZWZvcm1EYXRhIGdlbmVyYXRvcgogICAqCiAgICogQWRhcHRlZCBmcm9tIEJsb2NrRmlsZTo6Q2FsY1N1bW1hcnkgaW4gQXVkYWNpdHksIHdpdGggcGVybWlzc2lvbi4KICAgKiBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9hdWRhY2l0eS9zb3VyY2UvYnJvd3NlL2F1ZGFjaXR5LXNyYy90cnVuay9zcmMvQmxvY2tGaWxlLmNwcAogICAqLwogIHZhciBJTlQ4X01BWCA9IDEyNzsKICB2YXIgSU5UOF9NSU4gPSAtMTI4OwoKICBmdW5jdGlvbiBjYWxjdWxhdGVXYXZlZm9ybURhdGFMZW5ndGgoYXVkaW9fc2FtcGxlX2NvdW50LCBzY2FsZSkgewogICAgdmFyIGRhdGFfbGVuZ3RoID0gTWF0aC5mbG9vcihhdWRpb19zYW1wbGVfY291bnQgLyBzY2FsZSk7CiAgICB2YXIgc2FtcGxlc19yZW1haW5pbmcgPSBhdWRpb19zYW1wbGVfY291bnQgLSBkYXRhX2xlbmd0aCAqIHNjYWxlOwoKICAgIGlmIChzYW1wbGVzX3JlbWFpbmluZyA+IDApIHsKICAgICAgZGF0YV9sZW5ndGgrKzsKICAgIH0KCiAgICByZXR1cm4gZGF0YV9sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBnZW5lcmF0ZVdhdmVmb3JtRGF0YShvcHRpb25zKSB7CiAgICB2YXIgc2NhbGUgPSBvcHRpb25zLnNjYWxlOwogICAgdmFyIGFtcGxpdHVkZV9zY2FsZSA9IG9wdGlvbnMuYW1wbGl0dWRlX3NjYWxlOwogICAgdmFyIHNwbGl0X2NoYW5uZWxzID0gb3B0aW9ucy5zcGxpdF9jaGFubmVsczsKICAgIHZhciBsZW5ndGggPSBvcHRpb25zLmxlbmd0aDsKICAgIHZhciBzYW1wbGVfcmF0ZSA9IG9wdGlvbnMuc2FtcGxlX3JhdGU7CiAgICB2YXIgY2hhbm5lbHMgPSBvcHRpb25zLmNoYW5uZWxzLm1hcChmdW5jdGlvbiAoY2hhbm5lbCkgewogICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShjaGFubmVsKTsKICAgIH0pOwogICAgdmFyIG91dHB1dF9jaGFubmVscyA9IHNwbGl0X2NoYW5uZWxzID8gY2hhbm5lbHMubGVuZ3RoIDogMTsKICAgIHZhciB2ZXJzaW9uID0gb3V0cHV0X2NoYW5uZWxzID09PSAxID8gMSA6IDI7CiAgICB2YXIgaGVhZGVyX3NpemUgPSB2ZXJzaW9uID09PSAxID8gMjAgOiAyNDsKICAgIHZhciBkYXRhX2xlbmd0aCA9IGNhbGN1bGF0ZVdhdmVmb3JtRGF0YUxlbmd0aChsZW5ndGgsIHNjYWxlKTsKICAgIHZhciB0b3RhbF9zaXplID0gaGVhZGVyX3NpemUgKyBkYXRhX2xlbmd0aCAqIDIgKiBvdXRwdXRfY2hhbm5lbHM7CiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRvdGFsX3NpemUpOwogICAgdmFyIGRhdGFfdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpOwogICAgdmFyIHNjYWxlX2NvdW50ZXIgPSAwOwogICAgdmFyIG9mZnNldCA9IGhlYWRlcl9zaXplOwogICAgdmFyIGNoYW5uZWwsIGk7CiAgICB2YXIgbWluX3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CiAgICB2YXIgbWF4X3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CgogICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICBtYXhfdmFsdWVbY2hhbm5lbF0gPSAtSW5maW5pdHk7CiAgICB9CgogICAgZGF0YV92aWV3LnNldEludDMyKDAsIHZlcnNpb24sIHRydWUpOyAvLyBWZXJzaW9uCgogICAgZGF0YV92aWV3LnNldFVpbnQzMig0LCAxLCB0cnVlKTsgLy8gSXMgOCBiaXQ/CgogICAgZGF0YV92aWV3LnNldEludDMyKDgsIHNhbXBsZV9yYXRlLCB0cnVlKTsgLy8gU2FtcGxlIHJhdGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTIsIHNjYWxlLCB0cnVlKTsgLy8gU2NhbGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTYsIGRhdGFfbGVuZ3RoLCB0cnVlKTsgLy8gTGVuZ3RoCgogICAgaWYgKHZlcnNpb24gPT09IDIpIHsKICAgICAgZGF0YV92aWV3LnNldEludDMyKDIwLCBvdXRwdXRfY2hhbm5lbHMsIHRydWUpOwogICAgfQoKICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgc2FtcGxlID0gMDsKCiAgICAgIGlmIChvdXRwdXRfY2hhbm5lbHMgPT09IDEpIHsKICAgICAgICBmb3IgKGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgY2hhbm5lbHMubGVuZ3RoOyArK2NoYW5uZWwpIHsKICAgICAgICAgIHNhbXBsZSArPSBjaGFubmVsc1tjaGFubmVsXVtpXTsKICAgICAgICB9CgogICAgICAgIHNhbXBsZSA9IE1hdGguZmxvb3IoSU5UOF9NQVggKiBzYW1wbGUgKiBhbXBsaXR1ZGVfc2NhbGUgLyBjaGFubmVscy5sZW5ndGgpOwoKICAgICAgICBpZiAoc2FtcGxlIDwgbWluX3ZhbHVlWzBdKSB7CiAgICAgICAgICBtaW5fdmFsdWVbMF0gPSBzYW1wbGU7CgogICAgICAgICAgaWYgKG1pbl92YWx1ZVswXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgIG1pbl92YWx1ZVswXSA9IElOVDhfTUlOOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHNhbXBsZSA+IG1heF92YWx1ZVswXSkgewogICAgICAgICAgbWF4X3ZhbHVlWzBdID0gc2FtcGxlOwoKICAgICAgICAgIGlmIChtYXhfdmFsdWVbMF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICBtYXhfdmFsdWVbMF0gPSBJTlQ4X01BWDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgKytjaGFubmVsKSB7CiAgICAgICAgICBzYW1wbGUgPSBNYXRoLmZsb29yKElOVDhfTUFYICogY2hhbm5lbHNbY2hhbm5lbF1baV0gKiBhbXBsaXR1ZGVfc2NhbGUpOwoKICAgICAgICAgIGlmIChzYW1wbGUgPCBtaW5fdmFsdWVbY2hhbm5lbF0pIHsKICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gc2FtcGxlOwoKICAgICAgICAgICAgaWYgKG1pbl92YWx1ZVtjaGFubmVsXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gSU5UOF9NSU47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2FtcGxlID4gbWF4X3ZhbHVlW2NoYW5uZWxdKSB7CiAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IHNhbXBsZTsKCiAgICAgICAgICAgIGlmIChtYXhfdmFsdWVbY2hhbm5lbF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IElOVDhfTUFYOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoKytzY2FsZV9jb3VudGVyID09PSBzY2FsZSkgewogICAgICAgIGZvciAoY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBvdXRwdXRfY2hhbm5lbHM7IGNoYW5uZWwrKykgewogICAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgICBkYXRhX3ZpZXcuc2V0SW50OChvZmZzZXQrKywgbWF4X3ZhbHVlW2NoYW5uZWxdKTsKICAgICAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICAgICAgbWF4X3ZhbHVlW2NoYW5uZWxdID0gLUluZmluaXR5OwogICAgICAgIH0KCiAgICAgICAgc2NhbGVfY291bnRlciA9IDA7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc2NhbGVfY291bnRlciA+IDApIHsKICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1heF92YWx1ZVtjaGFubmVsXSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnVmZmVyOwogIH0KCiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlKGV2dCkgewogICAgdmFyIGJ1ZmZlciA9IGdlbmVyYXRlV2F2ZWZvcm1EYXRhKGV2dC5kYXRhKTsgLy8gVHJhbnNmZXIgYnVmZmVyIHRvIHRoZSBjYWxsaW5nIHRocmVhZAoKICAgIHRoaXMucG9zdE1lc3NhZ2UoYnVmZmVyLCBbYnVmZmVyXSk7CiAgICB0aGlzLmNsb3NlKCk7CiAgfTsKCn0pKCk7Cgo=",null,!1);function gt(e){if(Df(e)&&(e=Rf(e)),Lf(e)){this._data=new DataView(e),this._offset=this._version()===2?24:20,this._channels=[];for(var t=0;t<this.channels;t++)this._channels[t]=new Mi(this,t)}else throw new TypeError("WaveformData.create(): Unknown data format")}var es={scale:512,amplitude_scale:1,split_channels:!1,disable_worker:!1};function Gf(e){var t={scale:e.scale||es.scale,amplitude_scale:e.amplitude_scale||es.amplitude_scale,split_channels:e.split_channels||es.split_channels,disable_worker:e.disable_worker||es.disable_worker};return t}function Uf(e){for(var t=[],i=0;i<e.numberOfChannels;++i)t.push(e.getChannelData(i).buffer);return t}function Gl(e,t,i){var n=Uf(e);if(t.disable_worker){var s=Of({scale:t.scale,amplitude_scale:t.amplitude_scale,split_channels:t.split_channels,length:e.length,sample_rate:e.sampleRate,channels:n});i(null,new gt(s),e)}else{var r=new Bf;r.onmessage=function(a){i(null,new gt(a.data),e)},r.postMessage({scale:t.scale,amplitude_scale:t.amplitude_scale,split_channels:t.split_channels,length:e.length,sample_rate:e.sampleRate,channels:n},n)}}function Hf(e,t,i,n){function s(r){r||(r=new DOMException("EncodingError")),n(r)}e.decodeAudioData(t,function(r){Gl(r,i,n)},s)}gt.create=function(t){return new gt(t)};gt.createFromAudio=function(e,t){var i=Gf(e);if(e.audio_context&&e.array_buffer)return Hf(e.audio_context,e.array_buffer,i,t);if(e.audio_buffer)return Gl(e.audio_buffer,i,t);throw new TypeError("WaveformData.createFromAudio(): Pass either an AudioContext and ArrayBuffer, or an AudioBuffer object")};gt.prototype={resample:function(t){if(t.scale=typeof t.scale=="number"?t.scale:null,t.width=typeof t.width=="number"?t.width:null,t.width!=null&&t.width<=0)throw new RangeError("WaveformData.resample(): width should be a positive integer value");if(t.scale!=null&&t.scale<=0)throw new RangeError("WaveformData.resample(): scale should be a positive integer value");if(!t.scale&&!t.width)throw new Error("WaveformData.resample(): Missing scale or width option");var i=t.scale||Math.floor(this.duration*this.sample_rate/t.width),n=this.scale,s=this.length,r=s*this.scale,a=Math.ceil(r/i),o=24,l=this.bits===8?1:2,h=o+a*2*this.channels*l,d=new ArrayBuffer(h),f=new DataView(d);f.setInt32(0,2,!0),f.setUint32(4,this.bits===8,!0),f.setInt32(8,this.sample_rate,!0),f.setInt32(12,i,!0),f.setInt32(16,a,!0),f.setInt32(20,this.channels,!0);var y=new gt(d),p=0,_=0,b=this.channels,v=new Array(b),A=new Array(b),k;for(k=0;k<b;++k)s>0?(v[k]=this.channel(k).min_sample(p),A[k]=this.channel(k).max_sample(p)):(v[k]=0,A[k]=0);var c=this.bits===8?-128:-32768,u=this.bits===8?127:32767;if(i<n)throw new Error("WaveformData.resample(): Zoom level "+i+" too low, minimum: "+n);var S,M,H,C,B;function E(N){return Math.floor(N*i)}for(;p<s;){for(;Math.floor(E(_)/n)===p;){if(_>0)for(k=0;k<b;++k)y.channel(k).set_min_sample(_-1,v[k]),y.channel(k).set_max_sample(_-1,A[k]);if(B=p,_++,S=E(_),M=E(_-1),S!==M)for(k=0;k<b;++k)v[k]=u,A[k]=c}for(S=E(_),H=Math.floor(S/n),H>s&&(H=s);p<H;){for(k=0;k<b;++k)C=this.channel(k).min_sample(p),C<v[k]&&(v[k]=C),C=this.channel(k).max_sample(p),C>A[k]&&(A[k]=C);p++}}if(p!==B)for(k=0;k<b;++k)y.channel(k).set_min_sample(_-1,v[k]),y.channel(k).set_max_sample(_-1,A[k]);return y},concat:function(){var t=this,i=Array.prototype.slice.call(arguments);i.forEach(function(s){if(t.channels!==s.channels||t.sample_rate!==s.sample_rate||t.bits!==s.bits||t.scale!==s.scale)throw new Error("WaveformData.concat(): Waveforms are incompatible")});var n=this._concatBuffers.apply(this,i);return gt.create(n)},_concatBuffers:function(){var t=Array.prototype.slice.call(arguments),i=this._offset,n=i,s=0,r=[this].concat(t).map(function(_){return _._data.buffer}),a,o;for(a=0;a<r.length;a++){o=r[a];var l=new DataView(o).getInt32(16,!0);n+=o.byteLength-i,s+=l}var h=new ArrayBuffer(n),d=new DataView(r[0]),f=new DataView(h);for(a=0;a<i;a++)f.setUint8(a,d.getUint8(a));f.setInt32(16,s,!0);var y=0,p=new Uint8Array(h,i);for(a=0;a<r.length;a++)o=r[a],p.set(new Uint8Array(o,i),y),y+=o.byteLength-i;return h},_offsetValues:function(t,i,n){var s=[],r=this.channels;n+=t*r*2;for(var a=0;a<i;a++)s.push(this._at(a*r*2+n));return s},_version:function(){return this._data.getInt32(0,!0)},get length(){return this._data.getUint32(16,!0)},get bits(){var e=Boolean(this._data.getUint32(4,!0));return e?8:16},get duration(){return this.length*this.scale/this.sample_rate},get pixels_per_second(){return this.sample_rate/this.scale},get seconds_per_pixel(){return this.scale/this.sample_rate},get channels(){return this._version()===2?this._data.getInt32(20,!0):1},channel:function(t){if(t>=0&&t<this._channels.length)return this._channels[t];throw new RangeError("Invalid channel: "+t)},get sample_rate(){return this._data.getInt32(8,!0)},get scale(){return this._data.getInt32(12,!0)},_at:function(t){return this.bits===8?this._data.getInt8(this._offset+t):this._data.getInt16(this._offset+t*2,!0)},_set_at:function(t,i){return this.bits===8?this._data.setInt8(this._offset+t,i):this._data.setInt16(this._offset+t*2,i,!0)},at_time:function(t){return Math.floor(t*this.sample_rate/this.scale)},time:function(t){return t*this.scale/this.sample_rate},toJSON:function(){for(var t={version:2,channels:this.channels,sample_rate:this.sample_rate,samples_per_pixel:this.scale,bits:this.bits,length:this.length,data:[]},i=0;i<this.length;i++)for(var n=0;n<this.channels;n++)t.data.push(this.channel(n).min_sample(i)),t.data.push(this.channel(n).max_sample(i));return t},toArrayBuffer:function(){return this._data.buffer}};var Ul={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function s(l,h,d){this.fn=l,this.context=h,this.once=d||!1}function r(l,h,d,f,y){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new s(d,f||l,y),_=i?i+h:h;return l._events[_]?l._events[_].fn?l._events[_]=[l._events[_],p]:l._events[_].push(p):(l._events[_]=p,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new n:delete l._events[h]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],d,f;if(this._eventsCount===0)return h;for(f in d=this._events)t.call(d,f)&&h.push(i?f.slice(1):f);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},o.prototype.listeners=function(h){var d=i?i+h:h,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var y=0,p=f.length,_=new Array(p);y<p;y++)_[y]=f[y].fn;return _},o.prototype.listenerCount=function(h){var d=i?i+h:h,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(h,d,f,y,p,_){var b=i?i+h:h;if(!this._events[b])return!1;var v=this._events[b],A=arguments.length,k,c;if(v.fn){switch(v.once&&this.removeListener(h,v.fn,void 0,!0),A){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,y),!0;case 5:return v.fn.call(v.context,d,f,y,p),!0;case 6:return v.fn.call(v.context,d,f,y,p,_),!0}for(c=1,k=new Array(A-1);c<A;c++)k[c-1]=arguments[c];v.fn.apply(v.context,k)}else{var u=v.length,S;for(c=0;c<u;c++)switch(v[c].once&&this.removeListener(h,v[c].fn,void 0,!0),A){case 1:v[c].fn.call(v[c].context);break;case 2:v[c].fn.call(v[c].context,d);break;case 3:v[c].fn.call(v[c].context,d,f);break;case 4:v[c].fn.call(v[c].context,d,f,y);break;default:if(!k)for(S=1,k=new Array(A-1);S<A;S++)k[S-1]=arguments[S];v[c].fn.apply(v[c].context,k)}}return!0},o.prototype.on=function(h,d,f){return r(this,h,d,f,!1)},o.prototype.once=function(h,d,f){return r(this,h,d,f,!0)},o.prototype.removeListener=function(h,d,f,y){var p=i?i+h:h;if(!this._events[p])return this;if(!d)return a(this,p),this;var _=this._events[p];if(_.fn)_.fn===d&&(!y||_.once)&&(!f||_.context===f)&&a(this,p);else{for(var b=0,v=[],A=_.length;b<A;b++)(_[b].fn!==d||y&&!_[b].once||f&&_[b].context!==f)&&v.push(_[b]);v.length?this._events[p]=v.length===1?v[0]:v:a(this,p)}return this},o.prototype.removeAllListeners=function(h){var d;return h?(d=i?i+h:h,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o})(Ul);var Hl=Ul.exports;function pn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pn=function(t){return typeof t}:pn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(e)}function Ue(e,t,i){this.time=e,this.type=t,this.id=i}Ue.POINT=0;Ue.SEGMENT_START=1;Ue.SEGMENT_END=2;Ue.sorter=function(e,t){return e.time-t.time};function fo(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e}function oa(e,t){var i=[],n=Math.floor(e%1*Math.pow(10,t)),s=Math.floor(e),r=Math.floor(s/60),a=Math.floor(r/60);a>0&&i.push(a),i.push(r%60),i.push(s%60);for(var o=0;o<i.length;o++)i[o]=fo(i[o],2);return i=i.join(":"),t>0&&(i+="."+fo(n,t)),i}function Vf(e,t){if(t===0)return 0;var i=1;e<0&&(i=-1,e=-e);var n=Math.ceil(e);return i*((n+t-1)/t|0)*t}function pt(e,t,i){return e<t?t:e>i?i:e}function se(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _n(e,t){for(var i in t)se(t,i)&&(e[i]=t[i]);return e}function zf(e){if(e.length===0)return!0;for(var t=e[0],i=1;i<e.length;i++){if(t>=e[i])return!1;t=e[i]}return!0}function bs(e){return typeof e=="number"}function Vl(e){return!(typeof e!="number"||e!==e||e===1/0||e===-1/0)}function ni(e){return typeof e=="number"&&Number.isFinite(e)}function En(e){return e!==null&&pn(e)==="object"&&!Array.isArray(e)}function ki(e){return typeof e=="string"}function $f(e){return Object.prototype.toString.call(e).includes("ArrayBuffer")}function ft(e){return e==null}function Xf(e){return typeof e=="function"}function zl(e){return e===!0||e===!1}function Or(e){return e instanceof HTMLElement}function jf(e){return Array.isArray(e)}function Ys(e){return En(e)&&se(e,"linearGradientStart")&&se(e,"linearGradientEnd")&&se(e,"linearGradientColorStops")&&bs(e.linearGradientStart)&&bs(e.linearGradientEnd)&&jf(e.linearGradientColorStops)&&e.linearGradientColorStops.length===2}function la(e){for(;e.parent!==null;){if(e.parent instanceof Re.Layer)return e;e=e.parent}return null}var Kf=/HeadlessChrome/.test(navigator.userAgent);function Yf(){return Kf||navigator.webdriver?!1:(typeof document>"u"?"undefined":pn(document))==="object"&&"visibilityState"in document&&document.visibilityState==="visible"}var $l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Zf=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,si={forward:{},reverse:{}},Zs=0,Dn=1,Ln=2;si.forward[Ue.POINT]=Zs;si.forward[Ue.SEGMENT_START]=Dn;si.forward[Ue.SEGMENT_END]=Ln;si.reverse[Ue.POINT]=Zs;si.reverse[Ue.SEGMENT_START]=Ln;si.reverse[Ue.SEGMENT_END]=Dn;var qs={};qs[Zs]="points.enter";qs[Dn]="segments.enter";qs[Ln]="segments.exit";var Js={};Js[Zs]="point";Js[Dn]="segment";Js[Ln]="segment";function qf(e,t){switch(t.type){case Ue.POINT:return e.points.getPoint(t.id);case Ue.SEGMENT_START:case Ue.SEGMENT_END:return e.segments.getSegment(t.id);default:throw new Error("getPointOrSegment: id not found?")}}function kt(e){this._cues=[],this._peaks=e,this._previousTime=-1,this._updateCues=this._updateCues.bind(this),this._onPlaying=this._onPlaying.bind(this),this._onSeeked=this._onSeeked.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onAnimationFrame=this._onAnimationFrame.bind(this),this._rAFHandle=null,this._activeSegments={},this._attachEventHandlers()}kt.prototype._updateCues=function(){var e=this,t=e._peaks.points.getPoints(),i=e._peaks.segments.getSegments();e._cues.length=0,t.forEach(function(s){e._cues.push(new Ue(s.time,Ue.POINT,s.id))}),i.forEach(function(s){e._cues.push(new Ue(s.startTime,Ue.SEGMENT_START,s.id)),e._cues.push(new Ue(s.endTime,Ue.SEGMENT_END,s.id))}),e._cues.sort(Ue.sorter);var n=e._peaks.player.getCurrentTime();e._updateActiveSegments(n)};kt.prototype._onUpdate=function(e,t){var i=e>t,n,s,r;i?(n=0,s=this._cues.length,r=1):(n=this._cues.length-1,s=-1,r=-1);for(var a=n;i?a<s:a>s;a+=r){var o=this._cues[a];if(i?o.time>t:o.time<t){if(i?o.time>e:o.time<e)break;var l=qf(this._peaks,o),h=i?si.forward[o.type]:si.reverse[o.type];h===Dn?this._activeSegments[l.id]=l:h===Ln&&delete this._activeSegments[l.id];var d={time:e};d[Js[h]]=l,this._peaks.emit(qs[h],d)}}};kt.prototype._onTimeUpdate=function(e){Yf()||(this._peaks.player.isPlaying()&&!this._peaks.player.isSeeking()&&this._onUpdate(e,this._previousTime),this._previousTime=e)};kt.prototype._onAnimationFrame=function(){var e=this._peaks.player.getCurrentTime();this._peaks.player.isSeeking()||this._onUpdate(e,this._previousTime),this._previousTime=e,this._peaks.player.isPlaying()&&(this._rAFHandle=$l(this._onAnimationFrame))};kt.prototype._onPlaying=function(){this._previousTime=this._peaks.player.getCurrentTime(),this._rAFHandle=$l(this._onAnimationFrame)};kt.prototype._onSeeked=function(e){this._previousTime=e,this._updateActiveSegments(e)};function Jf(e){return function(i){return i.id===e}}kt.prototype._updateActiveSegments=function(e){var t=this,i=t._peaks.segments.getSegmentsAtTime(e);for(var n in t._activeSegments)if(se(t._activeSegments,n)){var s=i.find(Jf(n));s||(t._peaks.emit("segments.exit",{segment:t._activeSegments[n],time:e}),delete t._activeSegments[n])}i.forEach(function(r){r.id in t._activeSegments||(t._activeSegments[r.id]=r,t._peaks.emit("segments.enter",{segment:r,time:e}))})};var ws=["points.update","points.dragmove","points.add","points.remove","points.remove_all","segments.update","segments.dragged","segments.add","segments.remove","segments.remove_all"];kt.prototype._attachEventHandlers=function(){this._peaks.on("player.timeupdate",this._onTimeUpdate),this._peaks.on("player.playing",this._onPlaying),this._peaks.on("player.seeked",this._onSeeked);for(var e=0;e<ws.length;e++)this._peaks.on(ws[e],this._updateCues);this._updateCues()};kt.prototype._detachEventHandlers=function(){this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.seeked",this._onSeeked);for(var e=0;e<ws.length;e++)this._peaks.off(ws[e],this._updateCues)};kt.prototype.destroy=function(){this._rAFHandle&&(Zf(this._rAFHandle),this._rAFHandle=null),this._detachEventHandlers(),this._previousTime=-1};var Xl=["id","pid","time","labelText","color","editable"],Qf=["update","isVisible","peaks","pid"];function eg(e,t){ft(e.labelText)&&(e.labelText=""),ft(e.editable)&&(e.editable=!1),ft(e.color)&&(e.color=t.pointMarkerColor)}function jl(e,t){var i=t?"update()":"add()";if((!t||t&&se(e,"time"))&&!ni(e.time))throw new TypeError("peaks.points."+i+": time should be a numeric value");if(e.time<0)throw new RangeError("peaks.points."+i+": time should not be negative");if(se(e,"labelText")&&!ki(e.labelText))throw new TypeError("peaks.points."+i+": labelText must be a string");if(se(e,"editable")&&!zl(e.editable))throw new TypeError("peaks.points."+i+": editable must be true or false");if(se(e,"color")&&!ki(e.color)&&!Ys(e.color))throw new TypeError("peaks.points."+i+": color must be a string or a valid linear gradient object");Qf.forEach(function(n){if(se(e,n))throw new Error("peaks.points."+i+": invalid option name: "+n)}),Xl.forEach(function(n){if(se(e,"_"+n))throw new Error("peaks.points."+i+": invalid option name: _"+n)})}function nn(e,t,i){this._peaks=e,this._pid=t,this._setUserData(i)}nn.prototype._setUserData=function(e){for(var t in e)se(e,t)&&(Xl.indexOf(t)===-1?this[t]=e[t]:this["_"+t]=e[t])};Object.defineProperties(nn.prototype,{id:{enumerable:!0,get:function(){return this._id}},pid:{enumerable:!0,get:function(){return this._pid}},time:{enumerable:!0,get:function(){return this._time}},labelText:{get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}});nn.prototype.update=function(e){if(jl(e,!0),se(e,"id")){if(ft(e.id))throw new TypeError("point.update(): invalid id");this._peaks.points.updatePointId(this,e.id)}this._setUserData(e),this._peaks.emit("points.update",this,e)};nn.prototype.isVisible=function(e,t){return this.time>=e&&this.time<t};nn.prototype._setTime=function(e){this._time=e};function Ke(e){this._peaks=e,this._points=[],this._pointsById={},this._pointsByPid={},this._pointIdCounter=0,this._pointPid=0}Ke.prototype._getNextPointId=function(){return"peaks.point."+this._pointIdCounter++};Ke.prototype._getNextPid=function(){return this._pointPid++};Ke.prototype._addPoint=function(e){this._points.push(e),this._pointsById[e.id]=e,this._pointsByPid[e.pid]=e};Ke.prototype._createPoint=function(e){var t={};_n(t,e),ft(t.id)&&(t.id=this._getNextPointId());var i=this._getNextPid();return eg(t,this._peaks.options),jl(t,!1),new nn(this._peaks,i,t)};Ke.prototype.getPoints=function(){return this._points};Ke.prototype.getPoint=function(e){return this._pointsById[e]};Ke.prototype.find=function(e,t){return this._points.filter(function(i){return i.isVisible(e,t)})};Ke.prototype.add=function(){var e=this,t=Array.isArray(arguments[0]),i=t?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(n){var s=e._createPoint(n);if(se(e._pointsById,s.id))throw new Error("peaks.points.add(): duplicate id");return s}),i.forEach(function(n){e._addPoint(n)}),this._peaks.emit("points.add",{points:i}),t?i:i[0]};Ke.prototype.updatePointId=function(e,t){if(this._pointsById[e.id]){if(this._pointsById[t])throw new Error("point.update(): duplicate id");delete this._pointsById[e.id],this._pointsById[t]=e}};Ke.prototype._findPoint=function(e){for(var t=[],i=0,n=this._points.length;i<n;i++)e(this._points[i])&&t.push(i);return t};Ke.prototype._removeIndexes=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i]-t.length,s=this._points.splice(n,1)[0];delete this._pointsById[s.id],delete this._pointsByPid[s.pid],t.push(s)}return t};Ke.prototype._removePoints=function(e){var t=this._findPoint(e),i=this._removeIndexes(t);return this._peaks.emit("points.remove",{points:i}),i};Ke.prototype.remove=function(e){return this._removePoints(function(t){return t===e})};Ke.prototype.removeById=function(e){return this._removePoints(function(t){return t.id===e})};Ke.prototype.removeByTime=function(e){return this._removePoints(function(t){return t.time===e})};Ke.prototype.removeAll=function(){this._points=[],this._pointsById={},this._pointsByPid={},this._peaks.emit("points.remove_all")};var Kl=["id","pid","startTime","endTime","labelText","color","borderColor","editable"],tg=["update","isVisible","peaks","pid"];function ig(e,t){ft(e.color)&&(t.overlay?e.color=t.overlayColor:e.color=t.waveformColor),ft(e.borderColor)&&(e.borderColor=t.overlayBorderColor),ft(e.labelText)&&(e.labelText=""),ft(e.editable)&&(e.editable=!1)}function Yl(e,t){var i=t?"update()":"add()";if(se(e,"startTime")&&!ni(e.startTime))throw new TypeError("peaks.segments."+i+": startTime should be a valid number");if(se(e,"endTime")&&!ni(e.endTime))throw new TypeError("peaks.segments."+i+": endTime should be a valid number");if(!t&&(!se(e,"startTime")||!se(e,"endTime")))throw new TypeError("peaks.segments."+i+": missing startTime or endTime");if(e.startTime<0)throw new RangeError("peaks.segments."+i+": startTime should not be negative");if(e.endTime<0)throw new RangeError("peaks.segments."+i+": endTime should not be negative");if(e.endTime<e.startTime)throw new RangeError("peaks.segments."+i+": endTime should not be less than startTime");if(se(e,"labelText")&&!ki(e.labelText))throw new TypeError("peaks.segments."+i+": labelText must be a string");if(se(e,"editable")&&!zl(e.editable))throw new TypeError("peaks.segments."+i+": editable must be true or false");if(se(e,"color")&&!ki(e.color)&&!Ys(e.color))throw new TypeError("peaks.segments."+i+": color must be a string or a valid linear gradient object");if(se(e,"borderColor")&&!ki(e.borderColor))throw new TypeError("peaks.segments."+i+": borderColor must be a string");tg.forEach(function(n){if(se(e,n))throw new Error("peaks.segments."+i+": invalid option name: "+n)}),Kl.forEach(function(n){if(se(e,"_"+n))throw new Error("peaks.segments."+i+": invalid option name: _"+n)})}function Oi(e,t,i){this._peaks=e,this._pid=t,this._id=i.id,this._startTime=i.startTime,this._endTime=i.endTime,this._labelText=i.labelText,this._color=i.color,this._borderColor=i.borderColor,this._editable=i.editable,this._setUserData(i)}Oi.prototype._setUserData=function(e){for(var t in e)se(e,t)&&(Kl.indexOf(t)===-1?this[t]=e[t]:this["_"+t]=e[t])};Object.defineProperties(Oi.prototype,{id:{enumerable:!0,get:function(){return this._id}},pid:{enumerable:!0,get:function(){return this._pid}},startTime:{enumerable:!0,get:function(){return this._startTime}},endTime:{enumerable:!0,get:function(){return this._endTime}},labelText:{enumerable:!0,get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},borderColor:{enumerable:!0,get:function(){return this._borderColor}},editable:{enumerable:!0,get:function(){return this._editable}}});Oi.prototype.update=function(e){if(Yl(e,!0),se(e,"id")){if(ft(e.id))throw new TypeError("segment.update(): invalid id");this._peaks.segments.updateSegmentId(this,e.id)}this._setUserData(e),this._peaks.emit("segments.update",this,e)};Oi.prototype.isVisible=function(e,t){return this.startTime<t&&e<this.endTime};Oi.prototype._setStartTime=function(e){this._startTime=e};Oi.prototype._setEndTime=function(e){this._endTime=e};function Fe(e){this._peaks=e,this._segments=[],this._segmentsById={},this._segmentsByPid={},this._segmentIdCounter=0,this._segmentPid=0,this._isInserting=!1}Fe.prototype._getNextSegmentId=function(){return"peaks.segment."+this._segmentIdCounter++};Fe.prototype._getNextPid=function(){return this._segmentPid++};Fe.prototype._addSegment=function(e){this._segments.push(e),this._segmentsById[e.id]=e,this._segmentsByPid[e.pid]=e};Fe.prototype._createSegment=function(e){var t={};_n(t,e),ft(t.id)&&(t.id=this._getNextSegmentId());var i=this._getNextPid();return ig(t,this._peaks.options.segmentOptions),Yl(t,!1),new Oi(this._peaks,i,t)};Fe.prototype.getSegments=function(){return this._segments};Fe.prototype.getSegment=function(e){return this._segmentsById[e]};Fe.prototype.getSegmentsAtTime=function(e){return this._segments.filter(function(t){return e>=t.startTime&&e<t.endTime})};Fe.prototype.find=function(e,t){return this._segments.filter(function(i){return i.isVisible(e,t)})};Fe.prototype._getSortedSegments=function(){return this._segments.slice().sort(function(e,t){return e.startTime-t.startTime})};Fe.prototype.findPreviousSegment=function(e){var t=this._getSortedSegments(),i=t.findIndex(function(n){return n.id===e.id});if(i!==-1)return t[i-1]};Fe.prototype.findNextSegment=function(e){var t=this._getSortedSegments(),i=t.findIndex(function(n){return n.id===e.id});if(i!==-1)return t[i+1]};Fe.prototype.add=function(){var e=this,t=Array.isArray(arguments[0]),i=t?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(n){var s=e._createSegment(n);if(se(e._segmentsById,s.id))throw new Error("peaks.segments.add(): duplicate id");return s}),i.forEach(function(n){e._addSegment(n)}),this._peaks.emit("segments.add",{segments:i,insert:this._isInserting}),t?i:i[0]};Fe.prototype.updateSegmentId=function(e,t){if(this._segmentsById[e.id]){if(this._segmentsById[t])throw new Error("segment.update(): duplicate id");delete this._segmentsById[e.id],this._segmentsById[t]=e}};Fe.prototype._findSegment=function(e){for(var t=[],i=0,n=this._segments.length;i<n;i++)e(this._segments[i])&&t.push(i);return t};Fe.prototype._removeIndexes=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i]-t.length,s=this._segments.splice(n,1)[0];delete this._segmentsById[s.id],delete this._segmentsByPid[s.pid],t.push(s)}return t};Fe.prototype._removeSegments=function(e){var t=this._findSegment(e),i=this._removeIndexes(t);return this._peaks.emit("segments.remove",{segments:i}),i};Fe.prototype.remove=function(e){return this._removeSegments(function(t){return t===e})};Fe.prototype.removeById=function(e){return this._removeSegments(function(t){return t.id===e})};Fe.prototype.removeByTime=function(e,t){t=typeof t=="number"?t:0;var i;return t>0?i=function(s){return s.startTime===e&&s.endTime===t}:i=function(s){return s.startTime===e},this._removeSegments(i)};Fe.prototype.removeAll=function(){this._segments=[],this._segmentsById={},this._segmentsByPid={},this._peaks.emit("segments.remove_all")};Fe.prototype.setInserting=function(e){this._isInserting=e};Fe.prototype.isInserting=function(){return this._isInserting};var ng=["OBJECT","TEXTAREA","INPUT","SELECT","OPTION"],Zl=32,ql=9,Jl=37,Ql=39,sg=[Zl,ql,Jl,Ql];function ha(e){this.eventEmitter=e,this._handleKeyEvent=this._handleKeyEvent.bind(this),document.addEventListener("keydown",this._handleKeyEvent),document.addEventListener("keypress",this._handleKeyEvent),document.addEventListener("keyup",this._handleKeyEvent)}ha.prototype._handleKeyEvent=function(t){if(ng.indexOf(t.target.nodeName)===-1){if(sg.indexOf(t.type)>-1&&t.preventDefault(),t.type==="keydown"||t.type==="keypress")switch(t.keyCode){case Zl:this.eventEmitter.emit("keyboard.space");break;case ql:this.eventEmitter.emit("keyboard.tab");break}else if(t.type==="keyup")switch(t.keyCode){case Jl:t.shiftKey?this.eventEmitter.emit("keyboard.shift_left"):this.eventEmitter.emit("keyboard.left");break;case Ql:t.shiftKey?this.eventEmitter.emit("keyboard.shift_right"):this.eventEmitter.emit("keyboard.right");break}}};ha.prototype.destroy=function(){document.removeEventListener("keydown",this._handleKeyEvent),document.removeEventListener("keypress",this._handleKeyEvent),document.removeEventListener("keyup",this._handleKeyEvent)};function rg(e){return!!(e.src||e.querySelector("source"))}function _t(e){this._mediaElement=e}_t.prototype._addMediaListener=function(e,t){this._listeners.push({type:e,callback:t}),this._mediaElement.addEventListener(e,t)};_t.prototype.init=function(e){var t=this;return t._eventEmitter=e,t._listeners=[],t._duration=t.getDuration(),t._addMediaListener("timeupdate",function(){t._eventEmitter.emit("player.timeupdate",t.getCurrentTime())}),t._addMediaListener("playing",function(){t._eventEmitter.emit("player.playing",t.getCurrentTime())}),t._addMediaListener("pause",function(){t._eventEmitter.emit("player.pause",t.getCurrentTime())}),t._addMediaListener("ended",function(){t._eventEmitter.emit("player.ended")}),t._addMediaListener("seeked",function(){t._eventEmitter.emit("player.seeked",t.getCurrentTime())}),t._addMediaListener("canplay",function(){t._eventEmitter.emit("player.canplay")}),t._addMediaListener("error",function(i){t._eventEmitter.emit("player.error",i.target.error)}),t._interval=null,rg(t._mediaElement)?new Promise(function(i,n){function s(r){t._mediaElement.removeEventListener("loadedmetadata",s),t._mediaElement.removeEventListener("error",s),r.type==="loadedmetadata"?i():n(r.target.error)}t._mediaElement.readyState===HTMLMediaElement.HAVE_NOTHING?(t._mediaElement.addEventListener("loadedmetadata",s),t._mediaElement.addEventListener("error",s),t._mediaElement.load()):i()}):Promise.resolve()};_t.prototype.destroy=function(){for(var e=0;e<this._listeners.length;e++){var t=this._listeners[e];this._mediaElement.removeEventListener(t.type,t.callback)}this._listeners.length=0,this._mediaElement=null};_t.prototype.play=function(){return this._mediaElement.play()};_t.prototype.pause=function(){this._mediaElement.pause()};_t.prototype.isPlaying=function(){return!this._mediaElement.paused};_t.prototype.isSeeking=function(){return this._mediaElement.seeking};_t.prototype.getCurrentTime=function(){return this._mediaElement.currentTime};_t.prototype.getDuration=function(){return this._mediaElement.duration};_t.prototype.seek=function(e){this._mediaElement.currentTime=e};function Rn(e,t){this._eventEmitter=e,this._mediaElement=t,this._playerCanPlayHandler=this._playerCanPlayHandler.bind(this),this._playerErrorHandler=this._playerErrorHandler.bind(this)}Rn.prototype.setSource=function(e,t){var i=this;return i._options=e,i._callback=t,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),new Promise(function(n,s){i._resolve=n,i._reject=s,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),i._mediaElement.setAttribute("src",e.mediaUrl),i._mediaElement.readyState===HTMLMediaElement.HAVE_NOTHING&&i._mediaElement.load()})};Rn.prototype._reset=function(){this._eventEmitter.removeListener("player.canplay",this._playerCanPlayHandler),this._eventEmitter.removeListener("player.error",this._playerErrorHandler)};Rn.prototype._playerCanPlayHandler=function(){this._reset(),this._resolve()};Rn.prototype._playerErrorHandler=function(e){this._reset(),this._reject(e)};_t.prototype.setSource=function(e){if(!e.mediaUrl)return Promise.reject(new Error("peaks.setSource(): options must contain a mediaUrl when using mediaElement"));var t=new Rn(this._eventEmitter,this._mediaElement);return t.setSource(e)};function ag(e){for(var t=[],i=e;i;)Object.getOwnPropertyNames(i).forEach(function(n){t.push(n)}),i=Object.getPrototypeOf(i);return t}function og(e){var t=["init","destroy","play","pause","isPlaying","isSeeking","getCurrentTime","getDuration","seek"],i=ag(e);t.forEach(function(n){if(!i.includes(n))throw new TypeError("Peaks.init(): Player method "+n+" is undefined");if(typeof e[n]!="function")throw new TypeError("Peaks.init(): Player method "+n+" is not a function")})}function ct(e,t){this._peaks=e,this._playingSegment=!1,this._segment=null,this._loop=!1,this._playSegmentTimerCallback=this._playSegmentTimerCallback.bind(this),og(t),this._adapter=t}ct.prototype.init=function(){return this._adapter.init(this._peaks)};ct.prototype.destroy=function(){this._adapter.destroy()};ct.prototype.play=function(){return this._adapter.play()};ct.prototype.pause=function(){this._adapter.pause()};ct.prototype.isPlaying=function(){return this._adapter.isPlaying()};ct.prototype.isSeeking=function(){return this._adapter.isSeeking()};ct.prototype.getCurrentTime=function(){return this._adapter.getCurrentTime()};ct.prototype.getDuration=function(){return this._adapter.getDuration()};ct.prototype.seek=function(e){if(!ni(e)){this._peaks._logger("peaks.player.seek(): parameter must be a valid time, in seconds");return}this._adapter.seek(e)};ct.prototype.playSegment=function(e,t){var i=this;return!e||!ni(e.startTime)||!ni(e.endTime)?Promise.reject(new Error("peaks.player.playSegment(): parameter must be a segment object")):(i._segment=e,i._loop=t,i.seek(e.startTime),i._peaks.once("player.playing",function(){i._playingSegment||(i._playingSegment=!0,window.requestAnimationFrame(i._playSegmentTimerCallback))}),i.play())};ct.prototype._playSegmentTimerCallback=function(){if(this.isPlaying()){if(this.getCurrentTime()>=this._segment.endTime)if(this._loop)this.seek(this._segment.startTime);else{this.pause(),this._peaks.emit("player.ended"),this._playingSegment=!1;return}}else{this._playingSegment=!1;return}window.requestAnimationFrame(this._playSegmentTimerCallback)};ct.prototype._setSource=function(e){return this._adapter.setSource(e)};function Fn(e){this._options=e,this._draggable=e.editable}Fn.prototype.init=function(e){var t=10,i=20,n=-(t/2)+.5;this._options.view==="zoomview"&&(this._label=new xi({x:2,y:0,text:this._options.point.labelText,textAlign:"left",fontFamily:this._options.fontFamily||"sans-serif",fontSize:this._options.fontSize||10,fontStyle:this._options.fontStyle||"normal",fill:"#000"})),this._handle=new tn({x:n,y:0,width:t,height:i,fill:this._options.color,visible:this._draggable}),this._line=new Xs({x:0,y:0,stroke:this._options.color,strokeWidth:1}),this._time=new xi({x:-24,y:0,text:this._options.layer.formatTime(this._options.point.time),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._time.hide(),e.add(this._handle),e.add(this._line),this._label&&e.add(this._label),e.add(this._time),this.fitToView(),this.bindEventHandlers(e)};Fn.prototype.bindEventHandlers=function(e){var t=this;t._handle.on("mouseover touchstart",function(){t._draggable&&(t._time.setX(-24-t._time.getWidth()),t._time.show())}),t._handle.on("mouseout touchend",function(){t._draggable&&t._time.hide()}),e.on("dragstart",function(){t._time.setX(-24-t._time.getWidth()),t._time.show()}),e.on("dragend",function(){t._time.hide()})};Fn.prototype.fitToView=function(){var e=this._options.layer.getHeight();this._line.points([.5,0,.5,e]),this._label&&this._label.y(12),this._handle&&this._handle.y(e/2-10.5),this._time&&this._time.y(e/2-5)};Fn.prototype.update=function(e){e.time!==void 0&&this._time&&this._time.setText(this._options.layer.formatTime(e.time)),e.labelText!==void 0&&this._label&&this._label.text(e.labelText),e.color!==void 0&&(this._handle&&this._handle.fill(e.color),this._line.stroke(e.color)),e.editable!==void 0&&(this._draggable=e.editable,this._handle.visible(this._draggable))};function Nn(e){this._options=e,this._editable=e.editable}Nn.prototype.init=function(e){var t=10,i=20,n=-(t/2)+.5,s=this._options.startMarker?-24:24,r=this._options.startMarker?this._options.segment.startTime:this._options.segment.endTime;this._label=new xi({x:s,y:0,text:this._options.layer.formatTime(r),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center",visible:this._editable}),this._label.hide(),this._handle=new tn({x:n,y:0,width:t,height:i,fill:this._options.color,stroke:this._options.color,strokeWidth:1,visible:this._editable}),this._line=new Xs({x:0,y:0,stroke:this._options.color,strokeWidth:1,visible:this._editable}),e.add(this._label),e.add(this._line),e.add(this._handle),this.fitToView(),this.bindEventHandlers(e)};Nn.prototype.bindEventHandlers=function(e){var t=this,i=t._options.startMarker?-24:24;e.on("dragstart",function(){t._options.startMarker&&t._label.setX(i-t._label.getWidth()),t._label.show()}),e.on("dragend",function(){t._label.hide()}),t._handle.on("mouseover touchstart",function(){t._options.startMarker&&t._label.setX(i-t._label.getWidth()),t._label.show()}),t._handle.on("mouseout touchend",function(){t._label.hide()})};Nn.prototype.fitToView=function(){var e=this._options.layer.getHeight();this._label.y(e/2-5),this._handle.y(e/2-10.5),this._line.points([.5,0,.5,e])};Nn.prototype.update=function(e){e.startTime!==void 0&&this._options.startMarker&&this._label.text(this._options.layer.formatTime(e.startTime)),e.endTime!==void 0&&!this._options.startMarker&&this._label.text(this._options.layer.formatTime(e.endTime)),e.editable!==void 0&&(this._editable=e.editable,this._label.visible(this._editable),this._handle.visible(this._editable),this._line.visible(this._editable))};function lg(e){return e.view==="zoomview"?new Nn(e):null}function hg(e){return new xi({x:12,y:12,text:e.segment.labelText,textAlign:"center",fontFamily:e.fontFamily||"sans-serif",fontSize:e.fontSize||12,fontStyle:e.fontStyle||"normal",fill:"#000"})}function cg(e){return new Fn(e)}function di(e,t){this._view=e,this._offset=t.highlightOffset,this._color=t.highlightColor,this._layer=new Re.Layer({listening:!1}),this._highlightRect=null,this._startTime=null,this._endTime=null,this._strokeColor=t.highlightStrokeColor,this._opacity=t.highlightOpacity,this._cornerRadius=t.highlightCornerRadius}di.prototype.addToStage=function(e){e.add(this._layer)};di.prototype.showHighlight=function(e,t){this._highlightRect||this._createHighlightRect(e,t),this._update(e,t)};di.prototype._update=function(e,t){this._startTime=e,this._endTime=t;var i=this._view.timeToPixels(e),n=this._view.timeToPixels(t);this._highlightRect.setAttrs({x:i,width:n-i})};di.prototype._createHighlightRect=function(e,t){this._startTime=e,this._endTime=t;var i=this._view.timeToPixels(e),n=this._view.timeToPixels(t);this._highlightRect=new tn({x:i,y:0,width:n-i,height:0,stroke:this._strokeColor,strokeWidth:1,fill:this._color,opacity:this._opacity,cornerRadius:this._cornerRadius}),this.fitToView(),this._layer.add(this._highlightRect)};di.prototype.removeHighlight=function(){this._highlightRect&&(this._highlightRect.destroy(),this._highlightRect=null)};di.prototype.updateHighlight=function(){this._highlightRect&&this._update(this._startTime,this._endTime)};di.prototype.fitToView=function(){if(this._highlightRect){var e=this._view.getHeight(),t=pt(this._offset,0,Math.floor(e/2));this._highlightRect.setAttrs({y:t,height:e-t*2})}};function tt(e){this._player=e.player,this._view=e.view,this._playheadPixel=0,this._playheadLineAnimation=null,this._playheadVisible=!1,this._playheadColor=e.playheadColor,this._playheadTextColor=e.playheadTextColor,this._playheadFontFamily=e.playheadFontFamily,this._playheadFontSize=e.playheadFontSize,this._playheadFontStyle=e.playheadFontStyle,this._playheadLayer=new Re.Layer,this._createPlayhead(this._playheadColor),e.showPlayheadTime&&this._createPlayheadText(this._playheadTextColor),this.fitToView(),this.zoomLevelChanged()}tt.prototype.addToStage=function(e){e.add(this._playheadLayer)};tt.prototype.zoomLevelChanged=function(){var e=this._view.timeToPixels(1);if(this._useAnimation=e>=5,this._useAnimation)this._player.isPlaying()&&!this._playheadLineAnimation&&this._start();else if(this._playheadLineAnimation){var t=this._player.getCurrentTime();this.stop(t)}};tt.prototype.fitToView=function(){var e=this._view.getHeight();this._playheadLine.points([.5,0,.5,e]),this._playheadText&&this._playheadText.y(12)};tt.prototype._createPlayhead=function(e){this._playheadLine=new Xs({stroke:e,strokeWidth:1}),this._playheadGroup=new Re.Group({x:0,y:0}),this._playheadGroup.add(this._playheadLine),this._playheadLayer.add(this._playheadGroup)};tt.prototype._createPlayheadText=function(e){var t=this._player.getCurrentTime(),i=this._view.formatTime(t);this._playheadText=new xi({x:2,y:0,text:i,fontSize:this._playheadFontSize,fontFamily:this._playheadFontFamily,fontStyle:this._playheadFontStyle,fill:e,align:"right"}),this._playheadGroup.add(this._playheadText)};tt.prototype.updatePlayheadTime=function(e){this._syncPlayhead(e),this._player.isPlaying()&&this._start()};tt.prototype._syncPlayhead=function(e){var t=this._view.timeToPixels(e),i=this._view.getFrameOffset(),n=this._view.getWidth(),s=t>=i&&t<=i+n;if(this._playheadPixel=t,s){var r=this._playheadPixel-i;if(this._playheadVisible||(this._playheadVisible=!0,this._playheadGroup.show()),this._playheadGroup.setX(r),this._playheadText){var a=this._view.formatTime(e),o=this._playheadText.getTextWidth();this._playheadText.setText(a),o+r>n-2?this._playheadText.setX(-o-2):o+r<n&&this._playheadText.setX(2)}}else this._playheadVisible&&(this._playheadVisible=!1,this._playheadGroup.hide());this._view.playheadPosChanged&&this._view.playheadPosChanged(e)};tt.prototype._start=function(){var e=this;if(e._playheadLineAnimation&&(e._playheadLineAnimation.stop(),e._playheadLineAnimation=null),!!e._useAnimation){var t=null;e._playheadLineAnimation=new Dl(function(){var i=e._player.getCurrentTime(),n=e._view.timeToPixels(i);n!==t&&(e._syncPlayhead(i),t=n)},e._playheadLayer),e._playheadLineAnimation.start()}};tt.prototype.stop=function(e){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null),this._syncPlayhead(e)};tt.prototype.getPlayheadPixel=function(){return this._playheadPixel};tt.prototype.showPlayheadTime=function(e){e?this._playheadText||(this._createPlayheadText(this._playheadTextColor),this.fitToView()):this._playheadText&&(this._playheadText.remove(),this._playheadText.destroy(),this._playheadText=null)};tt.prototype.updatePlayheadText=function(){if(this._playheadText){var e=this._player.getCurrentTime(),t=this._view.formatTime(e);this._playheadText.setText(t)}};tt.prototype.destroy=function(){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null)};function Et(e){this._point=e.point,this._marker=e.marker,this._draggable=e.draggable,this._onDragStart=e.onDragStart,this._onDragMove=e.onDragMove,this._onDragEnd=e.onDragEnd,this._dragBoundFunc=e.dragBoundFunc,this._onMouseEnter=e.onMouseEnter,this._onMouseLeave=e.onMouseLeave,this._group=new Re.Group({name:"point-marker",point:this._point,draggable:this._draggable,dragBoundFunc:e.dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}Et.prototype._bindDefaultEventHandlers=function(){var e=this;e._group.on("dragstart",function(t){e._onDragStart(t,e._point)}),e._group.on("dragmove",function(t){e._onDragMove(t,e._point)}),e._group.on("dragend",function(t){e._onDragEnd(t,e._point)}),e._group.on("mouseenter",function(t){e._onMouseEnter(t,e._point)}),e._group.on("mouseleave",function(t){e._onMouseLeave(t,e._point)})};Et.prototype.addToLayer=function(e){e.add(this._group)};Et.prototype.fitToView=function(){this._marker.fitToView()};Et.prototype.getPoint=function(){return this._point};Et.prototype.getX=function(){return this._group.getX()};Et.prototype.setX=function(e){this._group.setX(e)};Et.prototype.getWidth=function(){return this._group.getWidth()};Et.prototype.getAbsolutePosition=function(){return this._group.getAbsolutePosition()};Et.prototype.update=function(e){e.editable!==void 0&&this._group.draggable(e.editable),this._marker.update&&this._marker.update(e)};Et.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};var dg="sans-serif",ug=10,fg="normal";function ke(e,t,i){this._peaks=e,this._view=t,this._allowEditing=i,this._pointMarkers={},this._layer=new Re.Layer,this._onPointsDrag=this._onPointsDrag.bind(this),this._onPointMarkerDragStart=this._onPointMarkerDragStart.bind(this),this._onPointMarkerDragMove=this._onPointMarkerDragMove.bind(this),this._onPointMarkerDragEnd=this._onPointMarkerDragEnd.bind(this),this._pointMarkerDragBoundFunc=this._pointMarkerDragBoundFunc.bind(this),this._onPointMarkerMouseEnter=this._onPointMarkerMouseEnter.bind(this),this._onPointMarkerMouseLeave=this._onPointMarkerMouseLeave.bind(this),this._onPointsUpdate=this._onPointsUpdate.bind(this),this._onPointsAdd=this._onPointsAdd.bind(this),this._onPointsRemove=this._onPointsRemove.bind(this),this._onPointsRemoveAll=this._onPointsRemoveAll.bind(this),this._peaks.on("points.update",this._onPointsUpdate),this._peaks.on("points.add",this._onPointsAdd),this._peaks.on("points.remove",this._onPointsRemove),this._peaks.on("points.remove_all",this._onPointsRemoveAll),this._peaks.on("points.dragstart",this._onPointsDrag),this._peaks.on("points.dragmove",this._onPointsDrag),this._peaks.on("points.dragend",this._onPointsDrag)}ke.prototype.addToStage=function(e){e.add(this._layer)};ke.prototype.enableEditing=function(e){this._allowEditing=e};ke.prototype.getPointMarker=function(e){return this._pointMarkers[e.pid]};ke.prototype.formatTime=function(e){return this._view.formatTime(e)};ke.prototype._onPointsUpdate=function(e,t){var i=this._view.getStartTime(),n=this._view.getEndTime(),s=this.getPointMarker(e),r=e.isVisible(i,n);if(s&&!r)this._removePoint(e);else if(!s&&r)this._updatePoint(e);else if(s&&r){if(se(t,"time")){var a=this._view.timeToPixels(e.time),o=a-this._view.getFrameOffset();s.setX(o)}s.update(t)}};ke.prototype._onPointsAdd=function(e){var t=this,i=t._view.getStartTime(),n=t._view.getEndTime();e.points.forEach(function(s){s.isVisible(i,n)&&t._updatePoint(s)})};ke.prototype._onPointsRemove=function(e){var t=this;e.points.forEach(function(i){t._removePoint(i)})};ke.prototype._onPointsRemoveAll=function(){this._layer.removeChildren(),this._pointMarkers={}};ke.prototype._createPointMarker=function(e){var t=this._allowEditing&&e.editable,i=this._peaks.options.createPointMarker({point:e,editable:t,color:e.color,fontFamily:this._peaks.options.fontFamily||dg,fontSize:this._peaks.options.fontSize||ug,fontStyle:this._peaks.options.fontStyle||fg,layer:this,view:this._view.getName()});return new Et({point:e,draggable:t,marker:i,onDragStart:this._onPointMarkerDragStart,onDragMove:this._onPointMarkerDragMove,onDragEnd:this._onPointMarkerDragEnd,dragBoundFunc:this._pointMarkerDragBoundFunc,onMouseEnter:this._onPointMarkerMouseEnter,onMouseLeave:this._onPointMarkerMouseLeave})};ke.prototype.getHeight=function(){return this._view.getHeight()};ke.prototype._addPointMarker=function(e){var t=this._createPointMarker(e);return this._pointMarkers[e.pid]=t,t.addToLayer(this._layer),t};ke.prototype._onPointsDrag=function(e){var t=this._updatePoint(e.point);t.update({time:e.point.time})};ke.prototype._onPointMarkerMouseEnter=function(e,t){this._peaks.emit("points.mouseenter",{point:t,evt:e.evt})};ke.prototype._onPointMarkerMouseLeave=function(e,t){this._peaks.emit("points.mouseleave",{point:t,evt:e.evt})};ke.prototype._onPointMarkerDragStart=function(e,t){this._dragPointMarker=this.getPointMarker(t),this._peaks.emit("points.dragstart",{point:t,evt:e.evt})};ke.prototype._onPointMarkerDragMove=function(e,t){var i=this._pointMarkers[t.pid],n=i.getX(),s=n+i.getWidth();t._setTime(this._view.pixelOffsetToTime(s)),this._peaks.emit("points.dragmove",{point:t,evt:e.evt})};ke.prototype._onPointMarkerDragEnd=function(e,t){this._dragPointMarker=null,this._peaks.emit("points.dragend",{point:t,evt:e.evt})};ke.prototype._pointMarkerDragBoundFunc=function(e){return{x:pt(e.x,0,this._view.getWidth()),y:this._dragPointMarker.getAbsolutePosition().y}};ke.prototype.updatePoints=function(e,t){var i=this._peaks.points.find(e,t);i.forEach(this._updatePoint.bind(this)),this._removeInvisiblePoints(e,t)};ke.prototype._updatePoint=function(e){var t=this.getPointMarker(e);t||(t=this._addPointMarker(e));var i=this._view.timeToPixels(e.time),n=i-this._view.getFrameOffset();return t.setX(n),t};ke.prototype._removeInvisiblePoints=function(e,t){for(var i in this._pointMarkers)if(se(this._pointMarkers,i)){var n=this._pointMarkers[i].getPoint();n.isVisible(e,t)||this._removePoint(n)}};ke.prototype._removePoint=function(e){var t=this.getPointMarker(e);t&&(t.destroy(),delete this._pointMarkers[e.pid])};ke.prototype.setVisible=function(e){this._layer.setVisible(e)};ke.prototype.destroy=function(){this._peaks.off("points.update",this._onPointsUpdate),this._peaks.off("points.add",this._onPointsAdd),this._peaks.off("points.remove",this._onPointsRemove),this._peaks.off("points.remove_all",this._onPointsRemoveAll),this._peaks.off("points.dragstart",this._onPointsDrag),this._peaks.off("points.dragmove",this._onPointsDrag),this._peaks.off("points.dragend",this._onPointsDrag)};ke.prototype.fitToView=function(){for(var e in this._pointMarkers)if(se(this._pointMarkers,e)){var t=this._pointMarkers[e];t.fitToView()}};ke.prototype.draw=function(){this._layer.draw()};function Wn(e){this._options=e}Wn.prototype.init=function(e){var t=10,i=20,n=-(t/2)+.5,s=this._options.startMarker?-24:24,r=this._options.startMarker?this._options.segment.startTime:this._options.segment.endTime;this._label=new xi({x:s,y:0,text:this._options.layer.formatTime(r),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center",visible:!1}),this._handle=new tn({x:n,y:0,width:t,height:i}),e.add(this._label),e.add(this._handle),this.fitToView(),this.bindEventHandlers(e)};Wn.prototype.bindEventHandlers=function(e){var t=this,i=t._options.startMarker?-24:24;e.on("dragstart",function(){t._options.startMarker&&t._label.setX(i-t._label.getWidth()),t._label.show()}),e.on("dragend",function(){t._label.hide()}),t._handle.on("mouseover touchstart",function(){t._options.startMarker&&t._label.setX(i-t._label.getWidth()),t._label.show(),document.body.style.cursor="ew-resize"}),t._handle.on("mouseout touchend",function(){t._label.hide(),document.body.style.cursor="default"})};Wn.prototype.fitToView=function(){var e=this._options.layer.getHeight(),t=this._options.segmentOptions.overlayOffset,i=pt(0,e-2*t);this._label.y(e/2-5),this._handle.y(t),this._handle.height(i)};Wn.prototype.update=function(e){e.startTime!==void 0&&this._options.startMarker&&this._label.text(this._options.layer.formatTime(e.startTime)),e.endTime!==void 0&&!this._options.startMarker&&this._label.text(this._options.layer.formatTime(e.endTime))};function qe(e){var t=this;t._segment=e.segment,t._marker=e.marker,t._segmentShape=e.segmentShape,t._editable=e.editable,t._startMarker=e.startMarker,t._onDragStart=e.onDragStart,t._onDragMove=e.onDragMove,t._onDragEnd=e.onDragEnd,t._group=new Re.Group({name:"segment-marker",segment:t._segment,draggable:t._editable,visible:t._editable,dragBoundFunc:function(n){return e.dragBoundFunc(t,n)}}),t._bindDefaultEventHandlers(),t._marker.init(t._group)}qe.prototype._bindDefaultEventHandlers=function(){var e=this;e._group.on("dragstart",function(t){e._onDragStart(e,t)}),e._group.on("dragmove",function(t){e._onDragMove(e,t)}),e._group.on("dragend",function(t){e._onDragEnd(e,t)})};qe.prototype.addToLayer=function(e){e.add(this._group)};qe.prototype.moveToTop=function(){this._group.moveToTop()};qe.prototype.fitToView=function(){this._marker.fitToView()};qe.prototype.getSegment=function(){return this._segment};qe.prototype.getX=function(){return this._group.getX()};qe.prototype.setX=function(e){this._group.setX(e)};qe.prototype.getWidth=function(){return this._group.getWidth()};qe.prototype.getAbsolutePosition=function(){return this._group.getAbsolutePosition()};qe.prototype.isStartMarker=function(){return this._startMarker};qe.prototype.update=function(e){e.editable!==void 0&&(this._group.visible(e.editable),this._group.draggable(e.editable)),this._marker.update&&this._marker.update(e)};qe.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};qe.prototype.startDrag=function(){this._group.startDrag()};qe.prototype.stopDrag=function(){this._group.stopDrag()};function He(e){this._color=e.color;var t={};if(ki(e.color))t.fill=e.color;else if(Ys(e.color)){var i=e.view._height*(e.color.linearGradientStart/100),n=e.view._height*(e.color.linearGradientEnd/100);t.fillLinearGradientStartPointY=i,t.fillLinearGradientEndPointY=n,t.fillLinearGradientColorStops=[0,e.color.linearGradientColorStops[0],1,e.color.linearGradientColorStops[1]]}else throw new TypeError("Unknown type for color property");this._shape=new Re.Shape(t),this._view=e.view,this._segment=e.segment,this._shape.sceneFunc(this._sceneFunc.bind(this))}He.prototype.getX=function(){return this._shape.getX()};He.prototype.setX=function(e){return this._shape.setX(e)};He.prototype.setSegment=function(e){this._segment=e};He.prototype.setWaveformColor=function(e){if(ki(e))this._shape.fill(e),this._shape.fillLinearGradientStartPointY(null),this._shape.fillLinearGradientEndPointY(null),this._shape.fillLinearGradientColorStops(null);else if(Ys(e)){this._shape.fill(null);var t=this._view._height*(e.linearGradientStart/100),i=this._view._height*(e.linearGradientEnd/100);this._shape.fillLinearGradientStartPointY(t),this._shape.fillLinearGradientEndPointY(i),this._shape.fillLinearGradientColorStops([0,e.linearGradientColorStops[0],1,e.linearGradientColorStops[1]])}else throw new TypeError("Unknown type for color property")};He.prototype.fitToView=function(){this.setWaveformColor(this._color)};He.prototype._sceneFunc=function(e){var t=this._view.getFrameOffset(),i=this._view.getWidth(),n=this._view.getHeight();this._drawWaveform(e,this._view.getWaveformData(),t,this._segment?this._view.timeToPixels(this._segment.startTime):t,this._segment?this._view.timeToPixels(this._segment.endTime):t+i,i,n)};He.prototype._drawWaveform=function(e,t,i,n,s,r,a){n<i&&(n=i);var o=i+r;s>o&&(s=o),s>t.length-1&&(s=t.length-1);for(var l=t.channels,h=0,d=Math.floor(a/l),f=0;f<l;f++)f===l-1&&(d=a-(l-1)*d),this._drawChannel(e,t.channel(f),i,n,s,h,d),h+=d};He.prototype._drawChannel=function(e,t,i,n,s,r,a){var o,l,h=this._view.getAmplitudeScale(),d,f;for(e.beginPath(),o=n;o<=s;o++)l=t.min_sample(o),d=o-i+.5,f=r+He.scaleY(l,a,h)+.5,e.lineTo(d,f);for(o=s;o>=n;o--)l=t.max_sample(o),d=o-i+.5,f=r+He.scaleY(l,a,h)+1,e.lineTo(d,f);e.closePath(),e.fillShape(this._shape)};He.prototype.addToLayer=function(e){e.add(this._shape)};He.prototype.destroy=function(){this._shape.destroy(),this._shape=null};He.prototype.on=function(e,t){this._shape.on(e,t)};He.prototype.off=function(e,t){this._shape.off(e,t)};He.scaleY=function(e,t,i){var n=-(t-1)*(e*i+128)/255+(t-1);return pt(Math.floor(n),0,t-1)};var go="sans-serif",po=10,_o="normal";function Ce(e,t,i,n){this._segment=e,this._peaks=t,this._layer=i,this._view=n,this._label=null,this._startMarker=null,this._endMarker=null,this._color=e.color,this._borderColor=e.borderColor,this._draggable=this._segment.editable&&this._view.isSegmentDraggingEnabled(),this._dragging=!1;var s=n.getViewOptions().segmentOptions;this._overlayOffset=s.overlayOffset,s.overlay||(this._waveformShape=new He({color:e.color,view:n,segment:e})),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._dragBoundFunc=this._dragBoundFunc.bind(this),this._onSegmentDragStart=this._onSegmentDragStart.bind(this),this._onSegmentDragMove=this._onSegmentDragMove.bind(this),this._onSegmentDragEnd=this._onSegmentDragEnd.bind(this),this._onSegmentMarkerDragStart=this._onSegmentMarkerDragStart.bind(this),this._onSegmentMarkerDragMove=this._onSegmentMarkerDragMove.bind(this),this._onSegmentMarkerDragEnd=this._onSegmentMarkerDragEnd.bind(this),this._segmentMarkerDragBoundFunc=this._segmentMarkerDragBoundFunc.bind(this),this._label=this._peaks.options.createSegmentLabel({segment:e,view:this._view.getName(),layer:this._layer,fontFamily:this._peaks.options.fontFamily,fontSize:this._peaks.options.fontSize,fontStyle:this._peaks.options.fontStyle}),this._label&&this._label.hide();var r=this._view.timeToPixelOffset(this._segment.startTime),a=this._view.timeToPixelOffset(this._segment.endTime),o=pt(0,this._view.getHeight()-2*this._overlayOffset);this._overlay=new Re.Group({name:"segment-overlay",segment:this._segment,x:r,y:0,width:a-r,height:this._view.getHeight(),clipX:0,clipY:this._overlayOffset,clipWidth:a-r,clipHeight:o,draggable:this._draggable,dragBoundFunc:this._dragBoundFunc});var l,h,d,f,y;s.overlay&&(l=this._borderColor||s.overlayBorderColor,h=s.overlayBorderWidth,d=this._color||s.overlayColor,f=s.overlayOpacity,y=s.overlayCornerRadius),this._overlayRect=new Re.Rect({x:0,y:this._overlayOffset,width:a-r,stroke:l,strokeWidth:h,height:o,fill:d,opacity:f,cornerRadius:y}),this._overlay.add(this._overlayRect),s.overlay&&(this._overlayText=new Re.Text({x:0,y:this._overlayOffset,text:this._segment.labelText,fontFamily:s.overlayFontFamily,fontSize:s.overlayFontSize,fontStyle:s.overlayFontStyle,fill:s.overlayLabelColor,listening:!1,align:s.overlayLabelAlign,width:a-r,verticalAlign:s.overlayLabelVerticalAlign,height:o,padding:s.overlayLabelPadding}),this._overlay.add(this._overlayText)),this._overlay.on("mouseenter",this._onMouseEnter),this._overlay.on("mouseleave",this._onMouseLeave),this._overlay.on("mousedown",this._onMouseDown),this._overlay.on("mouseup",this._onMouseUp),this._draggable&&(this._overlay.on("dragstart",this._onSegmentDragStart),this._overlay.on("dragmove",this._onSegmentDragMove),this._overlay.on("dragend",this._onSegmentDragEnd)),this._createMarkers()}function gg(e){return new Wn(e)}Ce.prototype._createMarkers=function(){var e=this._layer.isEditingEnabled()&&this._segment.editable,t=this._view.getViewOptions().segmentOptions,i=t.markers?this._peaks.options.createSegmentMarker:gg,n=i({segment:this._segment,editable:e,startMarker:!0,color:t.startMarkerColor,fontFamily:this._peaks.options.fontFamily||go,fontSize:this._peaks.options.fontSize||po,fontStyle:this._peaks.options.fontStyle||_o,layer:this._layer,view:this._view.getName(),segmentOptions:this._view.getViewOptions().segmentOptions});n&&(this._startMarker=new qe({segment:this._segment,segmentShape:this,editable:e,startMarker:!0,marker:n,onDragStart:this._onSegmentMarkerDragStart,onDragMove:this._onSegmentMarkerDragMove,onDragEnd:this._onSegmentMarkerDragEnd,dragBoundFunc:this._segmentMarkerDragBoundFunc}));var s=i({segment:this._segment,editable:e,startMarker:!1,color:t.endMarkerColor,fontFamily:this._peaks.options.fontFamily||go,fontSize:this._peaks.options.fontSize||po,fontStyle:this._peaks.options.fontStyle||_o,layer:this._layer,view:this._view.getName(),segmentOptions:this._view.getViewOptions().segmentOptions});s&&(this._endMarker=new qe({segment:this._segment,segmentShape:this,editable:e,startMarker:!1,marker:s,onDragStart:this._onSegmentMarkerDragStart,onDragMove:this._onSegmentMarkerDragMove,onDragEnd:this._onSegmentMarkerDragEnd,dragBoundFunc:this._segmentMarkerDragBoundFunc}))};Ce.prototype._dragBoundFunc=function(e){return{x:e.x,y:0}};Ce.prototype.update=function(e){var t=this._view.timeToPixelOffset(this._segment.startTime),i=this._view.timeToPixelOffset(this._segment.endTime),n=i-t,s;(s=this.getStartMarker())&&(s.setX(t-s.getWidth()),e&&s.update(e)),(s=this.getEndMarker())&&(s.setX(i),e&&s.update(e)),this._color=this._segment.color,this._borderColor=this._segment.bordercolor,this._overlayText&&this._overlayText.text(this._segment.labelText);var r=this._view.getViewOptions().segmentOptions;r.overlay?(this._color&&this._overlayRect.fill(this._color),this._borderColor&&this._overlayRect.stroke(this._borderColor)):this._waveformShape.setWaveformColor(this._segment.color),this._dragging||this._overlay&&(this._overlay.setAttrs({x:t,width:n,clipWidth:n<1?1:n}),this._overlayRect.setAttrs({x:0,width:n}),this._overlayText&&this._overlayText.setAttrs({width:n}))};Ce.prototype.getSegment=function(){return this._segment};Ce.prototype.getStartMarker=function(){return this._startMarker};Ce.prototype.getEndMarker=function(){return this._endMarker};Ce.prototype.addToLayer=function(e){this._waveformShape&&this._waveformShape.addToLayer(e),this._label&&e.add(this._label),this._overlay&&e.add(this._overlay),this._startMarker&&this._startMarker.addToLayer(e),this._endMarker&&this._endMarker.addToLayer(e)};Ce.prototype.isDragging=function(){return this._dragging};Ce.prototype._onMouseEnter=function(e){this._label&&(this._label.moveToTop(),this._label.show()),this._peaks.emit("segments.mouseenter",{segment:this._segment,evt:e.evt})};Ce.prototype._onMouseLeave=function(e){this._label&&this._label.hide(),this._peaks.emit("segments.mouseleave",{segment:this._segment,evt:e.evt})};Ce.prototype._onMouseDown=function(e){this._peaks.emit("segments.mousedown",{segment:this._segment,evt:e.evt})};Ce.prototype._onMouseUp=function(e){this._peaks.emit("segments.mouseup",{segment:this._segment,evt:e.evt})};Ce.prototype.segmentClicked=function(e,t){this._moveToTop(),this._peaks.emit("segments."+e,t)};Ce.prototype._moveToTop=function(){this._overlay.moveToTop(),this._layer.moveSegmentMarkersToTop()};Ce.prototype.enableSegmentDragging=function(e){!this._segment.editable||(!this._draggable&&e?(this._overlay.on("dragstart",this._onSegmentDragStart),this._overlay.on("dragmove",this._onSegmentDragMove),this._overlay.on("dragend",this._onSegmentDragEnd)):this._draggable&&!e&&(this._overlay.off("dragstart",this._onSegmentDragStart),this._overlay.off("dragmove",this._onSegmentDragMove),this._overlay.off("dragend",this._onSegmentDragEnd)),this._overlay.draggable(e),this._draggable=e)};Ce.prototype._setPreviousAndNextSegments=function(){this._view.getSegmentDragMode()!=="overlap"?(this._nextSegment=this._peaks.segments.findNextSegment(this._segment),this._previousSegment=this._peaks.segments.findPreviousSegment(this._segment)):(this._nextSegment=null,this._previousSegment=null)};Ce.prototype._onSegmentDragStart=function(e){this._setPreviousAndNextSegments(),this._dragging=!0,this._dragStartX=this._overlay.getX(),this._dragStartTime=this._segment.startTime,this._dragEndTime=this._segment.endTime,this._peaks.emit("segments.dragstart",{segment:this._segment,marker:!1,startMarker:!1,evt:e.evt})};Ce.prototype._onSegmentDragMove=function(e){var t=this._overlay.getX(),i=t-this._dragStartX,n=this._view.pixelsToTime(i),s=this._dragStartTime+n,r=this._dragEndTime+n,a=this._segment.endTime-this._segment.startTime,o,l=this._view.getMinSegmentDragWidth(),h=this._view.pixelsToTime(l),d=!1,f=!1;if(s<0&&(s=0,r=a,this._overlay.setX(this._view.timeToPixelOffset(s))),this._previousSegment){var y=this._view.timeToPixelOffset(this._previousSegment.endTime);if(s<this._previousSegment.endTime){if(o=this._view.getSegmentDragMode(),o==="no-overlap"||o==="compress"&&!this._previousSegment.editable)s=this._previousSegment.endTime,r=s+a,this._overlay.setX(y);else if(o==="compress"){var p=s,_=this._previousSegment.startTime+h;p<_&&(p=_,y=this._view.timeToPixelOffset(p),this._overlay.setX(y),s=p,r=s+a),this._previousSegment.update({endTime:p}),d=!0}}}if(this._nextSegment){var b=this._view.timeToPixelOffset(this._nextSegment.startTime);if(r>this._nextSegment.startTime){if(o=this._view.getSegmentDragMode(),o==="no-overlap"||o==="compress"&&!this._nextSegment.editable)r=this._nextSegment.startTime,s=r-a,this._overlay.setX(b-this._overlay.getWidth());else if(o==="compress"){var v=r,A=this._nextSegment.endTime-h;v>A&&(v=A,b=this._view.timeToPixelOffset(v),this._overlay.setX(b-this._overlay.getWidth()),r=v,s=r-a),this._nextSegment.update({startTime:v}),f=!0}}}this._segment._setStartTime(s),this._segment._setEndTime(r),this._peaks.emit("segments.dragged",{segment:this._segment,marker:!1,startMarker:!1,evt:e.evt}),d?this._peaks.emit("segments.dragged",{segment:this._previousSegment,marker:!1,startMarker:!1,evt:e.evt}):f&&this._peaks.emit("segments.dragged",{segment:this._nextSegment,marker:!1,startMarker:!1,evt:e.evt})};Ce.prototype._onSegmentDragEnd=function(e){this._dragging=!1,this._peaks.emit("segments.dragend",{segment:this._segment,marker:!1,startMarker:!1,evt:e.evt})};Ce.prototype.moveMarkersToTop=function(){this._startMarker&&this._startMarker.moveToTop(),this._endMarker&&this._endMarker.moveToTop()};Ce.prototype.startDrag=function(){this._endMarker&&this._endMarker.startDrag()};Ce.prototype.stopDrag=function(){this._endMarker&&this._endMarker.stopDrag()};Ce.prototype._onSegmentMarkerDragStart=function(e,t){this._setPreviousAndNextSegments(),this._moveToTop(),this._startMarkerX=this._startMarker.getX(),this._endMarkerX=this._endMarker.getX(),this._peaks.emit("segments.dragstart",{segment:this._segment,marker:!0,startMarker:e.isStartMarker(),evt:t.evt})};Ce.prototype._onSegmentMarkerDragMove=function(e,t){e.isStartMarker()?(this._segmentStartMarkerDragMove(e,t),e.update({startTime:this._segment.startTime})):(this._segmentEndMarkerDragMove(e,t),e.update({endTime:this._segment.endTime}))};function eh(e){return e.endTime-e.startTime}Ce.prototype._segmentStartMarkerDragMove=function(e,t){var i=this._view.getWidth(),n=this._startMarker.getX(),s=this._endMarker.getX(),r=this._view.pixelsToTime(50),a=this._view.getMinSegmentDragWidth(),o=this._endMarker.getX()-a;o>i&&(o=i);var l=!1,h=!1,d;if(this._previousSegment&&(d=this._view.timeToPixelOffset(this._previousSegment.endTime),l=d>=0),n>o)e.setX(o),this._overlay.clipWidth(o-s),a===0&&o<i?this._segment._setStartTime(this._segment.endTime):this._segment._setStartTime(this._view.pixelOffsetToTime(o));else if(this._previousSegment&&l){var f=this._view.getSegmentDragMode(),y=f==="no-overlap"||f==="compress"&&!this._previousSegment.editable,p=f==="compress"&&this._previousSegment.editable;if(n<=d){if(y)e.setX(d),this._overlay.clipWidth(d-s),this._segment._setStartTime(this._previousSegment.endTime);else if(p){var _=eh(this._previousSegment);_<r&&(r=_);var b=this._view.timeToPixelOffset(this._previousSegment.startTime+r);n<b&&(n=b),e.setX(n),this._overlay.clipWidth(s-n),this._segment._setStartTime(this._view.pixelOffsetToTime(n)),this._previousSegment.update({endTime:this._view.pixelOffsetToTime(n)}),h=!0}}else n<0&&(n=0),e.setX(n),this._overlay.clipWidth(s-n),this._segment._setStartTime(this._view.pixelOffsetToTime(n))}else n<0&&(n=0),e.setX(n),this._overlay.clipWidth(s-n),this._segment._setStartTime(this._view.pixelOffsetToTime(n));this._peaks.emit("segments.dragged",{segment:this._segment,marker:!0,startMarker:!0,evt:t.evt}),h&&this._peaks.emit("segments.dragged",{segment:this._previousSegment,marker:!0,startMarker:!1,evt:t.evt})};Ce.prototype._segmentEndMarkerDragMove=function(e,t){var i=this._view.getWidth(),n=this._startMarker.getX(),s=this._endMarker.getX(),r=this._view.pixelsToTime(50),a=this._view.getMinSegmentDragWidth(),o=this._startMarker.getX()+a;o<0&&(o=0);var l=!1,h=!1,d;if(this._nextSegment&&(d=this._view.timeToPixelOffset(this._nextSegment.startTime),l=d<i),s<o)e.setX(o),this._overlay.clipWidth(o-n),a===0&&o>0?this._segment._setEndTime(this._segment.startTime):this._segment._setEndTime(this._view.pixelOffsetToTime(o));else if(this._nextSegment&&l){var f=this._view.getSegmentDragMode(),y=f==="no-overlap"||f==="compress"&&!this._nextSegment.editable,p=f==="compress"&&this._nextSegment.editable;if(s>=d){if(y)e.setX(d),this._overlay.clipWidth(d-n),this._segment._setEndTime(this._nextSegment.startTime);else if(p){var _=eh(this._nextSegment);_<r&&(r=_);var b=this._view.timeToPixelOffset(this._nextSegment.endTime-r);s>b&&(s=b),e.setX(s),this._overlay.clipWidth(s-n),this._segment._setEndTime(this._view.pixelOffsetToTime(s)),this._nextSegment.update({startTime:this._view.pixelOffsetToTime(s)}),h=!0}}else s>i&&(s=i),e.setX(s),this._overlay.clipWidth(s-n),this._segment._setEndTime(this._view.pixelOffsetToTime(s))}else s>i&&(s=i),e.setX(s),this._overlay.clipWidth(s-n),this._segment._setEndTime(this._view.pixelOffsetToTime(s));this._peaks.emit("segments.dragged",{segment:this._segment,marker:!0,startMarker:!1,evt:t.evt}),h&&this._peaks.emit("segments.dragged",{segment:this._nextSegment,marker:!0,startMarker:!0,evt:t.evt})};Ce.prototype._onSegmentMarkerDragEnd=function(e,t){this._nextSegment=null,this._previousSegment=null;var i=e.isStartMarker();this._peaks.emit("segments.dragend",{segment:this._segment,marker:!0,startMarker:i,evt:t.evt})};Ce.prototype._segmentMarkerDragBoundFunc=function(e,t){return{x:t.x,y:e.getAbsolutePosition().y}};Ce.prototype.fitToView=function(){if(this._startMarker&&this._startMarker.fitToView(),this._endMarker&&this._endMarker.fitToView(),this._overlay){var e=this._view.getHeight(),t=pt(0,e-this._overlayOffset*2);this._overlay.setAttrs({y:0,height:e,clipY:this._overlayOffset,clipHeight:t}),this._overlayRect.setAttrs({y:this._overlayOffset,height:t}),this._overlayText&&this._overlayText.setAttrs({y:this._overlayOffset,height:t})}};Ce.prototype.destroy=function(){this._waveformShape&&this._waveformShape.destroy(),this._label&&this._label.destroy(),this._startMarker&&this._startMarker.destroy(),this._endMarker&&this._endMarker.destroy(),this._overlay&&this._overlay.destroy()};function Ae(e,t,i){this._peaks=e,this._view=t,this._allowEditing=i,this._segmentShapes={},this._layer=new Re.Layer,this._onSegmentsUpdate=this._onSegmentsUpdate.bind(this),this._onSegmentsAdd=this._onSegmentsAdd.bind(this),this._onSegmentsRemove=this._onSegmentsRemove.bind(this),this._onSegmentsRemoveAll=this._onSegmentsRemoveAll.bind(this),this._onSegmentsDragged=this._onSegmentsDragged.bind(this),this._peaks.on("segments.update",this._onSegmentsUpdate),this._peaks.on("segments.add",this._onSegmentsAdd),this._peaks.on("segments.remove",this._onSegmentsRemove),this._peaks.on("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.on("segments.dragged",this._onSegmentsDragged)}Ae.prototype.addToStage=function(e){e.add(this._layer)};Ae.prototype.enableEditing=function(e){this._allowEditing=e};Ae.prototype.isEditingEnabled=function(){return this._allowEditing};Ae.prototype.enableSegmentDragging=function(e){for(var t in this._segmentShapes)se(this._segmentShapes,t)&&this._segmentShapes[t].enableSegmentDragging(e)};Ae.prototype.getSegmentShape=function(e){return this._segmentShapes[e.pid]};Ae.prototype.formatTime=function(e){return this._view.formatTime(e)};Ae.prototype._onSegmentsUpdate=function(e,t){var i=this._view.getStartTime(),n=this._view.getEndTime(),s=this.getSegmentShape(e),r=e.isVisible(i,n);s&&!r?s.isDragging()||this._removeSegment(e):!s&&r?s=this._updateSegment(e):s&&r&&s.update(t)};Ae.prototype._onSegmentsAdd=function(e){var t=this,i=t._view.getStartTime(),n=t._view.getEndTime();e.segments.forEach(function(s){if(s.isVisible(i,n)){var r=t._addSegmentShape(s);r.update()}}),this.moveSegmentMarkersToTop()};Ae.prototype._onSegmentsRemove=function(e){var t=this;e.segments.forEach(function(i){t._removeSegment(i)})};Ae.prototype._onSegmentsRemoveAll=function(){this._layer.removeChildren(),this._segmentShapes={}};Ae.prototype._onSegmentsDragged=function(e){this._updateSegment(e.segment)};Ae.prototype._createSegmentShape=function(e){return new Ce(e,this._peaks,this,this._view)};Ae.prototype._addSegmentShape=function(e){var t=this._createSegmentShape(e);return t.addToLayer(this._layer),this._segmentShapes[e.pid]=t,t};Ae.prototype.updateSegments=function(e,t){var i=this._peaks.segments.find(e,t);i.forEach(this._updateSegment.bind(this)),this._removeInvisibleSegments(e,t)};Ae.prototype._updateSegment=function(e){var t=this.getSegmentShape(e);t||(t=this._addSegmentShape(e)),t.update()};Ae.prototype._removeInvisibleSegments=function(e,t){for(var i in this._segmentShapes)if(se(this._segmentShapes,i)){var n=this._segmentShapes[i].getSegment();n.isVisible(e,t)||this._removeSegment(n)}};Ae.prototype._removeSegment=function(e){var t=this._segmentShapes[e.pid];t&&(t.destroy(),delete this._segmentShapes[e.pid])};Ae.prototype.moveSegmentMarkersToTop=function(){for(var e in this._segmentShapes)se(this._segmentShapes,e)&&this._segmentShapes[e].moveMarkersToTop()};Ae.prototype.setVisible=function(e){this._layer.setVisible(e)};Ae.prototype.segmentClicked=function(e,t){var i=this._segmentShapes[t.segment.pid];i&&i.segmentClicked(e,t)};Ae.prototype.destroy=function(){this._peaks.off("segments.update",this._onSegmentsUpdate),this._peaks.off("segments.add",this._onSegmentsAdd),this._peaks.off("segments.remove",this._onSegmentsRemove),this._peaks.off("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.off("segments.dragged",this._onSegmentsDragged)};Ae.prototype.fitToView=function(){for(var e in this._segmentShapes)if(se(this._segmentShapes,e)){var t=this._segmentShapes[e];t.fitToView()}};Ae.prototype.draw=function(){this._layer.draw()};Ae.prototype.getHeight=function(){return this._layer.getHeight()};function ui(e,t){var i=this;i._axisGridlineColor=t.axisGridlineColor,i._axisLabelColor=t.axisLabelColor,i._showAxisLabels=t.showAxisLabels,t.formatAxisTime?i._formatAxisTime=t.formatAxisTime:i._formatAxisTime=function(n){return oa(n,0)},i._axisLabelFont=ui._buildFontString(t.fontFamily,t.fontSize,t.fontStyle),i._axisShape=new Re.Shape({sceneFunc:function(s){i._drawAxis(s,e)}})}ui._buildFontString=function(e,t,i){return t||(t=11),e||(e="sans-serif"),i||(i="normal"),i+" "+t+"px "+e};ui.prototype.addToLayer=function(e){e.add(this._axisShape)};ui.prototype.showAxisLabels=function(e){this._showAxisLabels=e};ui.prototype._getAxisLabelScale=function(e){for(var t=1,i=[1,2,5,10,20,30],n=60,s=0,r;;){r=t*i[s];var a=e.timeToPixels(r);if(a<n)++s===i.length&&(t*=60,s=0);else break}return r};ui.prototype._drawAxis=function(e,t){var i=t.getStartTime(),n=10,s=this._getAxisLabelScale(t),r=Vf(i,s),a=r-i,o=t.timeToPixels(a);e.setAttr("strokeStyle",this._axisGridlineColor),e.setAttr("lineWidth",1),e.setAttr("font",this._axisLabelFont),e.setAttr("fillStyle",this._axisLabelColor),e.setAttr("textAlign","left"),e.setAttr("textBaseline","bottom");for(var l=t.getWidth(),h=t.getHeight(),d=r;;){var f=o+t.timeToPixels(d-r);if(f>=l)break;if(e.beginPath(),e.moveTo(f+.5,0),e.lineTo(f+.5,0+n),e.moveTo(f+.5,h),e.lineTo(f+.5,h-n),e.stroke(),this._showAxisLabels){var y=this._formatAxisTime(d),p=e.measureText(y).width,_=f-p/2,b=h-1-n;_>=0&&e.fillText(y,_,b)}d+=s}};function $t(e,t){this._stage=e,this._handlers=t,this._dragging=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseUp=this._mouseUp.bind(this),this._mouseMove=this._mouseMove.bind(this),this._stage.on("mousedown",this._mouseDown),this._stage.on("touchstart",this._mouseDown),this._lastMouseClientX=null}$t.prototype._mouseDown=function(e){var t=null;if(!(e.type==="mousedown"&&e.evt.button!==0)){var i=la(e.target);if(i&&i.attrs.draggable){if(i.attrs.name==="point-marker"||i.attrs.name==="segment-marker")return;i.attrs.name==="segment-overlay"&&(t=i)}if(this._lastMouseClientX=Math.floor(e.type==="touchstart"?e.evt.touches[0].clientX:e.evt.clientX),this._handlers.onMouseDown){var n=this._getMousePosX(this._lastMouseClientX);this._handlers.onMouseDown(n,t)}window.addEventListener("mousemove",this._mouseMove,{capture:!1,passive:!0}),window.addEventListener("touchmove",this._mouseMove,{capture:!1,passive:!0}),window.addEventListener("mouseup",this._mouseUp,{capture:!1,passive:!0}),window.addEventListener("touchend",this._mouseUp,{capture:!1,passive:!0}),window.addEventListener("blur",this._mouseUp,{capture:!1,passive:!0})}};$t.prototype._mouseMove=function(e){var t=Math.floor(e.type==="touchmove"?e.changedTouches[0].clientX:e.clientX);if(t!==this._lastMouseClientX&&(this._lastMouseClientX=t,this._dragging=!0,this._handlers.onMouseMove)){var i=this._getMousePosX(t);this._handlers.onMouseMove(i)}};$t.prototype._mouseUp=function(e){var t;if(e.type==="touchend"?(t=Math.floor(e.changedTouches[0].clientX),e.cancelable&&e.preventDefault()):t=Math.floor(e.clientX),this._handlers.onMouseUp){var i=this._getMousePosX(t);this._handlers.onMouseUp(i)}window.removeEventListener("mousemove",this._mouseMove,{capture:!1}),window.removeEventListener("touchmove",this._mouseMove,{capture:!1}),window.removeEventListener("mouseup",this._mouseUp,{capture:!1}),window.removeEventListener("touchend",this._mouseUp,{capture:!1}),window.removeEventListener("blur",this._mouseUp,{capture:!1}),this._dragging=!1};$t.prototype._getMousePosX=function(e){var t=this._stage.getContainer().getBoundingClientRect();return e-t.left};$t.prototype.isDragging=function(){return this._dragging};$t.prototype.destroy=function(){this._stage.off("mousedown",this._mouseDown),this._stage.off("touchstart",this._mouseDown)};function Bn(e,t){this._peaks=e,this._view=t,this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._mouseDragHandler=new $t(t._stage,{onMouseDown:this._onMouseDown,onMouseMove:this._onMouseMove})}Bn.prototype._onMouseDown=function(e){this._seek(e)};Bn.prototype._onMouseMove=function(e){this._seek(e)};Bn.prototype._seek=function(e){if(!!this._view.isSeekEnabled()){e=pt(e,0,this._width);var t=this._view.pixelsToTime(e),i=this._peaks.player.getDuration();t>i&&(t=i),this._view.updatePlayheadTime(t),this._peaks.player.seek(t)}};Bn.prototype.destroy=function(){this._mouseDragHandler.destroy()};function ae(e,t,i){var n=this;n._originalWaveformData=e,n._container=t,n._peaks=i,n._options=i.options,n._viewOptions=i.options.overview,n._onTimeUpdate=n._onTimeUpdate.bind(this),n._onPlaying=n._onPlaying.bind(this),n._onPause=n._onPause.bind(this),n._onZoomviewDisplaying=n._onZoomviewDisplaying.bind(this),i.on("player.timeupdate",n._onTimeUpdate),i.on("player.playing",n._onPlaying),i.on("player.pause",n._onPause),i.on("zoomview.displaying",n._onZoomviewDisplaying),n._amplitudeScale=1,n._timeLabelPrecision=n._viewOptions.timeLabelPrecision,n._enableSeek=!0,n._viewOptions.formatPlayheadTime?n._formatPlayheadTime=n._viewOptions.formatPlayheadTime:n._formatPlayheadTime=function(r){return oa(r,n._timeLabelPrecision)},n._width=t.clientWidth,n._height=t.clientHeight,n._data=e,n._width!==0&&n._resampleAndSetWaveformData(e,n._width),Re.showWarnings=!1,n._stage=new Re.Stage({container:t,width:n._width,height:n._height}),n._waveformColor=n._viewOptions.waveformColor,n._playedWaveformColor=n._viewOptions.playedWaveformColor,n._createWaveform(),n._viewOptions.enableSegments&&(n._segmentsLayer=new Ae(i,n,!1),n._segmentsLayer.addToStage(n._stage)),n._viewOptions.enablePoints&&(n._pointsLayer=new ke(i,n,!1),n._pointsLayer.addToStage(n._stage)),n._highlightLayer=new di(n,n._viewOptions),n._highlightLayer.addToStage(n._stage),n._createAxisLabels(),n._playheadLayer=new tt({player:n._peaks.player,view:n,showPlayheadTime:n._viewOptions.showPlayheadTime,playheadColor:n._viewOptions.playheadColor,playheadTextColor:n._viewOptions.playheadTextColor,playheadFontFamily:n._viewOptions.fontFamily,playheadFontSize:n._viewOptions.fontSize,playheadFontStyle:n._viewOptions.fontStyle}),n._playheadLayer.addToStage(n._stage);var s=n._peaks.player.getCurrentTime();n._playheadLayer.updatePlayheadTime(s),n._mouseDragHandler=new Bn(i,n),n._onClick=n._onClick.bind(n),n._onDblClick=n._onDblClick.bind(n),n._onContextMenu=n._onContextMenu.bind(n),n._stage.on("click",n._onClick),n._stage.on("dblclick",n._onDblClick),n._stage.on("contextmenu",n._onContextMenu)}ae.prototype.enableSeek=function(e){this._enableSeek=e};ae.prototype.isSeekEnabled=function(){return this._enableSeek};ae.prototype._onClick=function(e){this._clickHandler(e,"click")};ae.prototype._onDblClick=function(e){this._clickHandler(e,"dblclick")};ae.prototype._onContextMenu=function(e){this._clickHandler(e,"contextmenu")};ae.prototype._clickHandler=function(e,t){var i=!0;if(e.target!==this._stage){var n=la(e.target);if(n){if(n.attrs.name==="point-marker"){var s=n.getAttr("point");s&&this._peaks.emit("points."+t,{point:s,evt:e.evt,preventViewEvent:function(){i=!1}})}else if(n.attrs.name==="segment-overlay"){var r=n.getAttr("segment");if(r){var a={segment:r,evt:e.evt,preventViewEvent:function(){i=!1}};this._segmentsLayer&&this._segmentsLayer.segmentClicked(t,a)}}}}if(i){var o=e.evt.layerX,l=this.pixelsToTime(o);this._peaks.emit("overview."+t,{time:l,evt:e.evt})}};ae.prototype.isSegmentDraggingEnabled=function(){return!1};ae.prototype.getName=function(){return"overview"};ae.prototype._onTimeUpdate=function(e){this._playheadLayer.updatePlayheadTime(e)};ae.prototype._onPlaying=function(e){this._playheadLayer.updatePlayheadTime(e)};ae.prototype._onPause=function(e){this._playheadLayer.stop(e)};ae.prototype._onZoomviewDisplaying=function(e,t){this.showHighlight(e,t)};ae.prototype.updatePlayheadTime=function(e){this._playheadLayer.updatePlayheadTime(e)};ae.prototype.showHighlight=function(e,t){this._highlightLayer.showHighlight(e,t)};ae.prototype.setWaveformData=function(e){this._originalWaveformData=e,this._width!==0?this._resampleAndSetWaveformData(e,this._width):this._data=e,this._updateWaveform()};ae.prototype._resampleAndSetWaveformData=function(e,t){try{return this._data=e.resample({width:t}),!0}catch{return this._data=e,!1}};ae.prototype.playheadPosChanged=function(e){this._playedWaveformShape&&(this._playedSegment.endTime=e,this._unplayedSegment.startTime=e,this._waveformLayer.draw())};ae.prototype.timeToPixels=function(e){return Math.floor(e*this._data.sample_rate/this._data.scale)};ae.prototype.timeToPixelOffset=ae.prototype.timeToPixels;ae.prototype.pixelsToTime=function(e){return e*this._data.scale/this._data.sample_rate};ae.prototype.pixelOffsetToTime=ae.prototype.pixelsToTime;ae.prototype.getFrameOffset=function(){return 0};ae.prototype.getStartTime=function(){return 0};ae.prototype.getEndTime=function(){return this._getDuration()};ae.prototype.getWidth=function(){return this._width};ae.prototype.getHeight=function(){return this._height};ae.prototype._getDuration=function(){return this._peaks.player.getDuration()};ae.prototype.setAmplitudeScale=function(e){if(!bs(e)||!Vl(e))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=e,this._waveformLayer.draw(),this._segmentsLayer&&this._segmentsLayer.draw()};ae.prototype.getAmplitudeScale=function(){return this._amplitudeScale};ae.prototype.getWaveformData=function(){return this._data};ae.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new He({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var e=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:e},this._unplayedSegment={startTime:e,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new He({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};ae.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};ae.prototype._createWaveform=function(){this._waveformLayer=new Re.Layer({listening:!1}),this._createWaveformShapes(),this._stage.add(this._waveformLayer)};ae.prototype._createAxisLabels=function(){this._axisLayer=new Re.Layer({listening:!1}),this._axis=new ui(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};ae.prototype.removeHighlightRect=function(){this._highlightLayer.removeHighlight()};ae.prototype._updateWaveform=function(){this._waveformLayer.draw(),this._axisLayer.draw();var e=this._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(e),this._highlightLayer.updateHighlight();var t=0,i=this.pixelsToTime(this._width);this._pointsLayer&&this._pointsLayer.updatePoints(t,i),this._segmentsLayer&&this._segmentsLayer.updateSegments(t,i)};ae.prototype.setWaveformColor=function(e){this._waveformColor=e,this._waveformShape.setWaveformColor(e)};ae.prototype.setPlayedWaveformColor=function(e){this._playedWaveformColor=e,e?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(e)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};ae.prototype.showPlayheadTime=function(e){this._playheadLayer.showPlayheadTime(e)};ae.prototype.setTimeLabelPrecision=function(e){this._timeLabelPrecision=e,this._playheadLayer.updatePlayheadText()};ae.prototype.formatTime=function(e){return this._formatPlayheadTime(e)};ae.prototype.showAxisLabels=function(e){this._axis.showAxisLabels(e),this._axisLayer.draw()};ae.prototype.enableMarkerEditing=function(e){this._segmentsLayer&&this._segmentsLayer.enableEditing(e),this._pointsLayer&&this._pointsLayer.enableEditing(e)};ae.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var e=!1;this._container.clientWidth!==this._width&&(this._width=this._container.clientWidth,this._stage.setWidth(this._width),this._resampleAndSetWaveformData(this._originalWaveformData,this._width)&&(e=!0)),this._container.clientHeight!==this._height&&(this._height=this._container.clientHeight,this._stage.setHeight(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer&&this._segmentsLayer.fitToView(),this._pointsLayer&&this._pointsLayer.fitToView(),this._highlightLayer.fitToView()),e&&this._updateWaveform()}};ae.prototype.getViewOptions=function(){return this._viewOptions};ae.prototype.destroy=function(){this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("zoomview.displaying",this._onZoomviewDisplaying),this._mouseDragHandler.destroy(),this._playheadLayer.destroy(),this._segmentsLayer&&this._segmentsLayer.destroy(),this._pointsLayer&&this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function sn(e,t){this._peaks=e,this._view=t,this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._mouseDragHandler=new $t(t._stage,{onMouseDown:this._onMouseDown,onMouseMove:this._onMouseMove,onMouseUp:this._onMouseUp})}sn.prototype.isDragging=function(){return this._mouseDragHandler.isDragging()};sn.prototype._onMouseDown=function(e,t){this._segment=t,this._segment&&(this._segmentIsDraggable=this._segment.draggable(),this._segment.draggable(!1));var i=this._view.pixelsToTime(e+this._view.getFrameOffset());this._peaks.segments.setInserting(!0),this._insertSegment=this._peaks.segments.add({startTime:i,endTime:i,editable:!0}),this._insertSegmentShape=this._view._segmentsLayer.getSegmentShape(this._insertSegment),this._insertSegmentShape&&(this._insertSegmentShape.moveMarkersToTop(),this._insertSegmentShape.startDrag())};sn.prototype._onMouseMove=function(){};sn.prototype._onMouseUp=function(){this._insertSegmentShape&&(this._insertSegmentShape.stopDrag(),this._insertSegmentShape=null),this._segment&&this._segmentIsDraggable&&this._segment.draggable(!0),this._peaks.emit("segments.insert",{segment:this._insertSegment}),this._peaks.segments.setInserting(!1)};sn.prototype.destroy=function(){this._mouseDragHandler.destroy()};function fi(e,t){this._peaks=e,this._view=t,this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._mouseDragHandler=new $t(t._stage,{onMouseDown:this._onMouseDown,onMouseMove:this._onMouseMove,onMouseUp:this._onMouseUp})}fi.prototype.isDragging=function(){return this._mouseDragHandler.isDragging()};fi.prototype._onMouseDown=function(e,t){this._segment=t,this._seeking=!1;var i=this._view.getPlayheadOffset();this._view.isSeekEnabled()&&Math.abs(e-i)<=this._view.getPlayheadClickTolerance()&&(this._seeking=!0,this._segment&&(this._segmentIsDraggable=this._segment.draggable(),this._segment.draggable(!1))),this._seeking?this._seek(e):(this._initialFrameOffset=this._view.getFrameOffset(),this._mouseDownX=e)};fi.prototype._onMouseMove=function(e){if(!(this._segment&&!this._seeking))if(this._seeking){e=pt(e,0,this._view.getWidth());var t=this._view.pixelsToTime(e+this._view.getFrameOffset());this._seek(t)}else{var i=this._mouseDownX-e,n=this._initialFrameOffset+i;n!==this._initialFrameOffset&&this._view.updateWaveform(n)}};fi.prototype._onMouseUp=function(){if(!this._seeking&&this._view._enableSeek&&!this._mouseDragHandler.isDragging()){var e=this._view.pixelOffsetToTime(this._mouseDownX);this._seek(e)}this._segment&&this._seeking&&this._segmentIsDraggable&&this._segment.draggable(!0)};fi.prototype._seek=function(e){var t=this._peaks.player.getDuration();e>t&&(e=t),this._view.updatePlayheadTime(e),this._peaks.player.seek(e)};fi.prototype.destroy=function(){this._mouseDragHandler.destroy()};function K(e,t,i){var n=this;n._container=t,n._peaks=i,n._options=i.options,n._viewOptions=n._options.zoomview,n._enableWaveformCache=n._options.waveformCache,n._originalWaveformData=e,n._initWaveformCache(),n._onTimeUpdate=n._onTimeUpdate.bind(n),n._onPlaying=n._onPlaying.bind(n),n._onPause=n._onPause.bind(n),n._onKeyboardLeft=n._onKeyboardLeft.bind(n),n._onKeyboardRight=n._onKeyboardRight.bind(n),n._onKeyboardShiftLeft=n._onKeyboardShiftLeft.bind(n),n._onKeyboardShiftRight=n._onKeyboardShiftRight.bind(n),n._peaks.on("player.timeupdate",n._onTimeUpdate),n._peaks.on("player.playing",n._onPlaying),n._peaks.on("player.pause",n._onPause),n._peaks.on("keyboard.left",n._onKeyboardLeft),n._peaks.on("keyboard.right",n._onKeyboardRight),n._peaks.on("keyboard.shift_left",n._onKeyboardShiftLeft),n._peaks.on("keyboard.shift_right",n._onKeyboardShiftRight),n._autoScroll=n._viewOptions.autoScroll,n._autoScrollOffset=n._viewOptions.autoScrollOffset,n._amplitudeScale=1,n._timeLabelPrecision=n._viewOptions.timeLabelPrecision,n._enableSeek=!0,n._enableSegmentDragging=!1,n._segmentDragMode="overlap",n._minSegmentDragWidth=0,n._insertSegmentShape=null,n._viewOptions.formatPlayheadTime?n._formatPlayheadTime=n._viewOptions.formatPlayheadTime:n._formatPlayheadTime=function(a){return oa(a,n._timeLabelPrecision)},n._playheadClickTolerance=n._viewOptions.playheadClickTolerance,n._data=null,n._pixelLength=0;var s=i.zoom.getZoomLevel();n._zoomLevelAuto=!1,n._zoomLevelSeconds=null,n._resampleData({scale:s}),n._width=t.clientWidth,n._height=t.clientHeight,n._frameOffset=0,n._stage=new Re.Stage({container:t,width:n._width,height:n._height}),n._waveformColor=n._viewOptions.waveformColor,n._playedWaveformColor=n._viewOptions.playedWaveformColor,n._createWaveform(),n._viewOptions.enableSegments&&(n._segmentsLayer=new Ae(i,n,!0),n._segmentsLayer.addToStage(n._stage)),n._viewOptions.enablePoints&&(n._pointsLayer=new ke(i,n,!0),n._pointsLayer.addToStage(n._stage)),n._createAxisLabels(),n._playheadLayer=new tt({player:n._peaks.player,view:n,showPlayheadTime:n._viewOptions.showPlayheadTime,playheadColor:n._viewOptions.playheadColor,playheadTextColor:n._viewOptions.playheadTextColor,playheadFontFamily:n._viewOptions.fontFamily,playheadFontSize:n._viewOptions.fontSize,playheadFontStyle:n._viewOptions.fontStyle}),n._playheadLayer.addToStage(n._stage);var r=n._peaks.player.getCurrentTime();n._syncPlayhead(r),n._mouseDragHandler=new fi(n._peaks,n),n._onWheel=n._onWheel.bind(n),n._onWheelCaptureVerticalScroll=n._onWheelCaptureVerticalScroll.bind(n),n.setWheelMode(n._viewOptions.wheelMode),n._onClick=n._onClick.bind(n),n._onDblClick=n._onDblClick.bind(n),n._onContextMenu=n._onContextMenu.bind(n),n._stage.on("click",n._onClick),n._stage.on("dblclick",n._onDblClick),n._stage.on("contextmenu",n._onContextMenu)}K.prototype._initWaveformCache=function(){this._enableWaveformCache&&(this._waveformData=new Map,this._waveformData.set(this._originalWaveformData.scale,this._originalWaveformData),this._waveformScales=[this._originalWaveformData.scale])};K.prototype.enableSeek=function(e){this._enableSeek=e};K.prototype.isSeekEnabled=function(){return this._enableSeek};K.prototype._onClick=function(e){this._clickHandler(e,"click")};K.prototype._onDblClick=function(e){this._clickHandler(e,"dblclick")};K.prototype._onContextMenu=function(e){this._clickHandler(e,"contextmenu")};K.prototype._clickHandler=function(e,t){var i=!0;if(e.target!==this._stage){var n=la(e.target);if(n){if(n.attrs.name==="point-marker"){var s=n.getAttr("point");s&&this._peaks.emit("points."+t,{point:s,evt:e.evt,preventViewEvent:function(){i=!1}})}else if(n.attrs.name==="segment-overlay"){var r=n.getAttr("segment");if(r){var a={segment:r,evt:e.evt,preventViewEvent:function(){i=!1}};this._segmentsLayer&&this._segmentsLayer.segmentClicked(t,a)}}}}if(i){var o=e.evt.layerX,l=this.pixelOffsetToTime(o);this._peaks.emit("zoomview."+t,{time:l,evt:e.evt})}};K.prototype.setWheelMode=function(e,t){if(t||(t={}),e!==this._wheelMode||t.captureVerticalScroll!==this._captureVerticalScroll)switch(this._stage.off("wheel"),this._wheelMode=e,this._captureVerticalScroll=t.captureVerticalScroll,e){case"scroll":t.captureVerticalScroll?this._stage.on("wheel",this._onWheelCaptureVerticalScroll):this._stage.on("wheel",this._onWheel);break}};K.prototype._onWheel=function(e){var t=e.evt,i;if(t.shiftKey)if(t.deltaY!==0)i=t.deltaY;else if(t.deltaX!==0)i=t.deltaX;else return;else{if(Math.abs(t.deltaX)<Math.abs(t.deltaY))return;i=t.deltaX}t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._width),t.preventDefault();var n=pt(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this.updateWaveform(n)};K.prototype._onWheelCaptureVerticalScroll=function(e){var t=e.evt,i=Math.abs(t.deltaX)<Math.abs(t.deltaY)?t.deltaY:t.deltaX;t.preventDefault();var n=pt(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this.updateWaveform(n)};K.prototype.setWaveformDragMode=function(e){this._viewOptions.enableSegments&&(this._mouseDragHandler.destroy(),e==="insert-segment"?this._mouseDragHandler=new sn(this._peaks,this):this._mouseDragHandler=new fi(this._peaks,this))};K.prototype.enableSegmentDragging=function(e){this._enableSegmentDragging=e,this._segmentsLayer&&this._segmentsLayer.enableSegmentDragging(e)};K.prototype.isSegmentDraggingEnabled=function(){return this._enableSegmentDragging};K.prototype.setSegmentDragMode=function(e){this._segmentDragMode=e};K.prototype.getSegmentDragMode=function(){return this._segmentDragMode};K.prototype.getName=function(){return"zoomview"};K.prototype._onTimeUpdate=function(e){this._mouseDragHandler.isDragging()||this._syncPlayhead(e)};K.prototype._onPlaying=function(e){this._playheadLayer.updatePlayheadTime(e)};K.prototype._onPause=function(e){this._playheadLayer.stop(e)};K.prototype._onKeyboardLeft=function(){this._keyboardScroll(-1,!1)};K.prototype._onKeyboardRight=function(){this._keyboardScroll(1,!1)};K.prototype._onKeyboardShiftLeft=function(){this._keyboardScroll(-1,!0)};K.prototype._onKeyboardShiftRight=function(){this._keyboardScroll(1,!0)};K.prototype._keyboardScroll=function(e,t){var i;t?i=e*this._width:i=e*this.timeToPixels(this._options.nudgeIncrement),this.scrollWaveform({pixels:i})};K.prototype.setWaveformData=function(e){this._originalWaveformData=e,this._initWaveformCache()};K.prototype.getPlayheadOffset=function(){return this._playheadLayer.getPlayheadPixel()-this._frameOffset};K.prototype.getPlayheadClickTolerance=function(){return this._playheadClickTolerance};K.prototype.playheadPosChanged=function(e){this._playedWaveformShape&&(this._playedSegment.endTime=e,this._unplayedSegment.startTime=e,this._drawWaveformLayer())};K.prototype.updatePlayheadTime=function(e){this._playheadLayer.updatePlayheadTime(e)};K.prototype._syncPlayhead=function(e){if(this._playheadLayer.updatePlayheadTime(e),this._autoScroll){var t=this.timeToPixels(e),i=this._frameOffset+this._width-this._autoScrollOffset;(t>=i||t<this._frameOffset)&&(this._frameOffset=t-this._autoScrollOffset,this._frameOffset<0&&(this._frameOffset=0),this.updateWaveform(this._frameOffset))}};K.prototype._getScale=function(e){return e*this._data.sample_rate/this._width};function pg(e){return se(e,"scale")&&e.scale==="auto"||se(e,"seconds")&&e.seconds==="auto"}K.prototype.setZoom=function(e){var t;if(pg(e)){var i=this._peaks.player.getDuration();if(!ni(i))return!1;this._zoomLevelAuto=!0,this._zoomLevelSeconds=null,t=this._getScale(i)}else{if(se(e,"scale"))this._zoomLevelSeconds=null,t=e.scale;else if(se(e,"seconds")){if(!ni(e.seconds))return!1;this._zoomLevelSeconds=e.seconds,t=this._getScale(e.seconds)}this._zoomLevelAuto=!1}t<this._originalWaveformData.scale&&(this._peaks._logger("peaks.zoomview.setZoom(): zoom level must be at least "+this._originalWaveformData.scale),t=this._originalWaveformData.scale);var n=this._peaks.player.getCurrentTime(),s,r=this.getPlayheadOffset();r>=0&&r<this._width?s=n:(r=Math.floor(this._width/2),s=this.pixelOffsetToTime(r));var a=this._scale;this._resampleData({scale:t});var o=this.timeToPixels(s);return this._frameOffset=o-r,this.updateWaveform(this._frameOffset),this._playheadLayer.zoomLevelChanged(),this._playheadLayer.updatePlayheadTime(n),this._peaks.emit("zoom.update",{currentZoom:t,previousZoom:a}),!0};K.prototype._resampleData=function(e){var t=e.scale;if(this._enableWaveformCache){if(!this._waveformData.has(t)){for(var i=this._originalWaveformData,n=0;n<this._waveformScales.length&&this._waveformScales[n]<t;n++)i=this._waveformData.get(this._waveformScales[n]);this._waveformData.set(t,i.resample(e)),this._waveformScales.push(t),this._waveformScales.sort(function(s,r){return s-r})}this._data=this._waveformData.get(t)}else this._data=this._originalWaveformData.resample(e);this._scale=this._data.scale,this._pixelLength=this._data.length};K.prototype.getStartTime=function(){return this.pixelOffsetToTime(0)};K.prototype.getEndTime=function(){return this.pixelOffsetToTime(this._width)};K.prototype.setStartTime=function(e){e<0&&(e=0),this._zoomLevelAuto&&(e=0),this.updateWaveform(this.timeToPixels(e))};K.prototype.timeToPixels=function(e){return Math.floor(e*this._data.sample_rate/this._data.scale)};K.prototype.pixelsToTime=function(e){return e*this._data.scale/this._data.sample_rate};K.prototype.pixelOffsetToTime=function(e){var t=this._frameOffset+e;return t*this._data.scale/this._data.sample_rate};K.prototype.timeToPixelOffset=function(e){return Math.floor(e*this._data.sample_rate/this._data.scale)-this._frameOffset};K.prototype.getFrameOffset=function(){return this._frameOffset};K.prototype.getWidth=function(){return this._width};K.prototype.getHeight=function(){return this._height};K.prototype.getPixelLength=function(){return this._pixelLength};K.prototype._getDuration=function(){return this._peaks.player.getDuration()};K.prototype.setAmplitudeScale=function(e){if(!bs(e)||!Vl(e))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=e,this._drawWaveformLayer(),this._segmentsLayer&&this._segmentsLayer.draw()};K.prototype.getAmplitudeScale=function(){return this._amplitudeScale};K.prototype.getWaveformData=function(){return this._data};K.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new He({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var e=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:e},this._unplayedSegment={startTime:e,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new He({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};K.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};K.prototype._createWaveform=function(){this._waveformLayer=new Re.Layer({listening:!1}),this._createWaveformShapes(),this._stage.add(this._waveformLayer),this._peaks.emit("zoomview.displaying",0,this.getEndTime())};K.prototype._createAxisLabels=function(){this._axisLayer=new Re.Layer({listening:!1}),this._axis=new ui(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};K.prototype.scrollWaveform=function(e){var t;if(se(e,"pixels"))t=Math.floor(e.pixels);else if(se(e,"seconds"))t=this.timeToPixels(e.seconds);else throw new TypeError("view.scrollWaveform(): Missing umber of pixels or seconds");this.updateWaveform(this._frameOffset+t)};K.prototype.updateWaveform=function(e){var t;this._pixelLength<this._width?(e=0,t=this._width):t=this._pixelLength-this._width,e=pt(e,0,t),this._frameOffset=e;var i=this._playheadLayer.getPlayheadPixel();this._playheadLayer.updatePlayheadTime(this.pixelsToTime(i)),this._drawWaveformLayer(),this._axisLayer.draw();var n=this.getStartTime(),s=this.getEndTime();this._pointsLayer&&this._pointsLayer.updatePoints(n,s),this._segmentsLayer&&this._segmentsLayer.updateSegments(n,s),this._peaks.emit("zoomview.displaying",n,s)};K.prototype._drawWaveformLayer=function(){this._waveformLayer.draw()};K.prototype.setWaveformColor=function(e){this._waveformColor=e,this._waveformShape.setWaveformColor(e)};K.prototype.setPlayedWaveformColor=function(e){this._playedWaveformColor=e,e?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(e)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};K.prototype.showPlayheadTime=function(e){this._playheadLayer.showPlayheadTime(e)};K.prototype.setTimeLabelPrecision=function(e){this._timeLabelPrecision=e,this._playheadLayer.updatePlayheadText()};K.prototype.formatTime=function(e){return this._formatPlayheadTime(e)};K.prototype.showAxisLabels=function(e){this._axis.showAxisLabels(e),this._axisLayer.draw()};K.prototype.enableAutoScroll=function(e,t){this._autoScroll=e,se(t,"offset")&&(this._autoScrollOffset=t.offset)};K.prototype.enableMarkerEditing=function(e){this._segmentsLayer&&this._segmentsLayer.enableEditing(e),this._pointsLayer&&this._pointsLayer.enableEditing(e)};K.prototype.getMinSegmentDragWidth=function(){return this._insertSegmentShape?0:this._minSegmentDragWidth};K.prototype.setMinSegmentDragWidth=function(e){this._minSegmentDragWidth=e};K.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var e=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.width(this._width);var t=!1,i;if(this._zoomLevelAuto?(t=!0,i={width:this._width}):this._zoomLevelSeconds!==null&&(t=!0,i={scale:this._getScale(this._zoomLevelSeconds)}),t)try{this._resampleData(i),e=!0}catch{}}this._container.clientHeight!==this._height&&(this._height=this._container.clientHeight,this._stage.height(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer&&this._segmentsLayer.fitToView(),this._pointsLayer&&this._pointsLayer.fitToView()),e&&this.updateWaveform(this._frameOffset)}};K.prototype.getStage=function(){return this._stage};K.prototype.getSegmentsLayer=function(){return this._segmentsLayer};K.prototype.getViewOptions=function(){return this._viewOptions};K.prototype.destroy=function(){this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("keyboard.left",this._onKeyboardLeft),this._peaks.off("keyboard.right",this._onKeyboardRight),this._peaks.off("keyboard.shift_left",this._onKeyboardShiftLeft),this._peaks.off("keyboard.shift_right",this._onKeyboardShiftRight),this._mouseDragHandler.destroy(),this._playheadLayer.destroy(),this._segmentsLayer&&this._segmentsLayer.destroy(),this._pointsLayer&&this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function rt(e,t,i){this._waveformData=e,this._container=t,this._peaks=i,this._options=i.options.scrollbar,this._zoomview=i.views.getView("zoomview"),this._dragBoundFunc=this._dragBoundFunc.bind(this),this._onScrollboxDragStart=this._onScrollboxDragStart.bind(this),this._onScrollboxDragMove=this._onScrollboxDragMove.bind(this),this._onScrollboxDragEnd=this._onScrollboxDragEnd.bind(this),this._onZoomviewDisplaying=this._onZoomviewDisplaying.bind(this),this._onScrollbarClick=this._onScrollbarClick.bind(this),i.on("zoomview.displaying",this._onZoomviewDisplaying),this._width=t.clientWidth,this._height=t.clientHeight,this._stage=new Re.Stage({container:t,width:this._width,height:this._height}),this._layer=new Re.Layer,this._stage.on("click",this._onScrollbarClick),this._stage.add(this._layer),this._color=this._options.color,this._scrollboxX=0,this._minScrollboxWidth=this._options.minWidth,this._offsetY=0,this._scrollbox=new Re.Group({draggable:!0,dragBoundFunc:this._dragBoundFunc}),this._scrollboxRect=new tn({x:this._scrollboxX,y:this._offsetY,width:0,height:this._height,fill:this._color}),this._scrollbox.add(this._scrollboxRect),this._setScrollboxWidth(),this._scrollbox.on("dragstart",this._onScrollboxDragStart),this._scrollbox.on("dragmove",this._onScrollboxDragMove),this._scrollbox.on("dragend",this._onScrollboxDragEnd),this._layer.add(this._scrollbox),this._layer.draw()}rt.prototype.setZoomview=function(e){this._zoomview=e,this._updateScrollbarWidthAndPosition()};rt.prototype._setScrollboxWidth=function(){this._zoomview?(this._scrollboxWidth=Math.floor(this._width*this._zoomview.pixelsToTime(this._zoomview.getWidth())/this._peaks.player.getDuration()),this._scrollboxWidth<this._minScrollboxWidth&&(this._scrollboxWidth=this._minScrollboxWidth)):this._scrollboxWidth=this._width,this._scrollboxRect.width(this._scrollboxWidth)};rt.prototype._getScrollbarRange=function(){return this._width-this._scrollboxWidth};rt.prototype._dragBoundFunc=function(e){return{x:e.x,y:0}};rt.prototype._onScrollboxDragStart=function(){this._dragging=!0};rt.prototype._onScrollboxDragEnd=function(){this._dragging=!1};rt.prototype._onScrollboxDragMove=function(){var e=this._getScrollbarRange(),t=pt(this._scrollbox.x(),0,e);this._scrollbox.x(t),t!==this._scrollboxX&&(this._scrollboxX=t,this._zoomview&&this._updateWaveform(t))};rt.prototype._onZoomviewDisplaying=function(){this._dragging||this._updateScrollbarWidthAndPosition()};rt.prototype._updateScrollbarWidthAndPosition=function(){if(this._setScrollboxWidth(),this._zoomview){var e=this._zoomview.getStartTime(),t=this._zoomview.getPixelLength()-this._zoomview.getWidth(),i=Math.floor(this._zoomview.timeToPixels(e)*this._getScrollbarRange()/t);this._scrollbox.x(i),this._layer.draw()}};rt.prototype._onScrollbarClick=function(e){if(e.target===this._stage&&this._zoomview){var t=Math.floor(e.evt.layerX-this._scrollboxWidth/2);t<0&&(t=0),this._updateWaveform(t)}};rt.prototype._updateWaveform=function(e){var t=Math.floor((this._zoomview.getPixelLength()-this._zoomview.getWidth())*e/this._getScrollbarRange());this._zoomview.updateWaveform(t)};rt.prototype.fitToContainer=function(){this._container.clientWidth===0&&this._container.clientHeight===0||(this._container.clientWidth!==this._width&&(this._width=this._container.clientWidth,this._stage.width(this._width),this._updateScrollbarWidthAndPosition()),this._height=this._container.clientHeight,this._stage.height(this._height))};rt.prototype.destroy=function(){this._layer.destroy(),this._stage.destroy(),this._stage=null};function Xt(e){this._peaks=e,this._overview=null,this._zoomview=null,this._scrollbar=null}Xt.prototype.createOverview=function(e){if(this._overview)return this._overview;var t=this._peaks.getWaveformData();return this._overview=new ae(t,e,this._peaks),this._zoomview&&this._overview.showHighlight(this._zoomview.getStartTime(),this._zoomview.getEndTime()),this._overview};Xt.prototype.createZoomview=function(e){if(this._zoomview)return this._zoomview;var t=this._peaks.getWaveformData();return this._zoomview=new K(t,e,this._peaks),this._scrollbar&&this._scrollbar.setZoomview(this._zoomview),this._zoomview};Xt.prototype.createScrollbar=function(e){var t=this._peaks.getWaveformData();return this._scrollbar=new rt(t,e,this._peaks),this._scrollbar};Xt.prototype.destroyOverview=function(){!this._overview||!this._zoomview||(this._overview.destroy(),this._overview=null)};Xt.prototype.destroyZoomview=function(){!this._zoomview||!this._overview||(this._zoomview.destroy(),this._zoomview=null,this._overview.removeHighlightRect())};Xt.prototype.destroy=function(){this._overview&&(this._overview.destroy(),this._overview=null),this._zoomview&&(this._zoomview.destroy(),this._zoomview=null),this._scrollbar&&(this._scrollbar.destroy(),this._scrollbar=null)};Xt.prototype.getView=function(e){if(ft(e))return this._overview&&this._zoomview?null:this._overview?this._overview:this._zoomview?this._zoomview:null;switch(e){case"overview":return this._overview;case"zoomview":return this._zoomview;default:return null}};Xt.prototype.getScrollbar=function(){return this._scrollbar};function Di(e,t){this._peaks=e,this._zoomLevels=t,this._zoomLevelIndex=0}Di.prototype.setZoomLevels=function(e){this._zoomLevels=e,this.setZoom(0,!0)};Di.prototype.zoomIn=function(){this.setZoom(this._zoomLevelIndex-1)};Di.prototype.zoomOut=function(){this.setZoom(this._zoomLevelIndex+1)};Di.prototype.setZoom=function(e,t){if(e>=this._zoomLevels.length&&(e=this._zoomLevels.length-1),e<0&&(e=0),!(!t&&e===this._zoomLevelIndex)){this._zoomLevelIndex=e;var i=this._peaks.views.getView("zoomview");!i||i.setZoom({scale:this._zoomLevels[e]})}};Di.prototype.getZoom=function(){return this._zoomLevelIndex};Di.prototype.getZoomLevel=function(){return this._zoomLevels[this._zoomLevelIndex]};var mo="withCredentials"in new XMLHttpRequest;function Rt(e){this._peaks=e}Rt.prototype.init=function(e,t){if(e.dataUri&&(e.webAudio||e.audioContext)||e.waveformData&&(e.webAudio||e.audioContext)||e.dataUri&&e.waveformData){t(new TypeError("Peaks.init(): You may only pass one source (webAudio, dataUri, or waveformData) to render waveform data."));return}if(e.audioContext&&(this._peaks._logger("Peaks.init(): The audioContext option is deprecated, please pass a webAudio object instead"),e.webAudio={audioContext:e.audioContext}),e.dataUri)return this._getRemoteWaveformData(e,t);if(e.waveformData)return this._buildWaveformFromLocalData(e,t);if(e.webAudio)return e.webAudio.audioBuffer?this._buildWaveformDataFromAudioBuffer(e,t):this._buildWaveformDataUsingWebAudio(e,t);t(new Error("Peaks.init(): You must pass an audioContext, or dataUri, or waveformData to render waveform data"))};Rt.prototype._getRemoteWaveformData=function(e,t){var i=this,n=null,s=null,r;if(En(e.dataUri))n=e.dataUri;else{t(new TypeError("Peaks.init(): The dataUri option must be an object"));return}if(["ArrayBuffer","JSON"].some(function(a){if(window[a])return s=a.toLowerCase(),r=n[s],Boolean(r)}),!r){t(new Error("Peaks.init(): Unable to determine a compatible dataUri format for this browser"));return}i._xhr=i._createXHR(r,s,e.withCredentials,function(a){if(this.readyState===4){if(this.status!==200){t(new Error("Unable to fetch remote data. HTTP status "+this.status));return}i._xhr=null;var o=gt.create(a.target.response);if(o.channels!==1&&o.channels!==2){t(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(o.bits!==8){t(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}t(null,o)}},function(){t(new Error("XHR failed"))},function(){t(new Error("XHR aborted"))}),i._xhr.send()};Rt.prototype._buildWaveformFromLocalData=function(e,t){var i=null,n=null;if(En(e.waveformData))i=e.waveformData;else{t(new Error("Peaks.init(): The waveformData option must be an object"));return}if(En(i.json)?n=i.json:$f(i.arraybuffer)&&(n=i.arraybuffer),!n){t(new Error("Peaks.init(): Unable to determine a compatible waveformData format"));return}try{var s=gt.create(n);if(s.channels!==1&&s.channels!==2){t(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(s.bits!==8){t(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}t(null,s)}catch(r){t(r)}};Rt.prototype._buildWaveformDataUsingWebAudio=function(e,t){var i=this,n=window.AudioContext||window.webkitAudioContext;if(!(e.webAudio.audioContext instanceof n)){t(new TypeError("Peaks.init(): The webAudio.audioContext option must be a valid AudioContext"));return}var s=e.webAudio;s.scale!==e.zoomLevels[0]&&(s.scale=e.zoomLevels[0]);var r=i._peaks.options.mediaElement.currentSrc;r?i._requestAudioAndBuildWaveformData(r,s,e.withCredentials,t):i._peaks.once("player.canplay",function(){i._requestAudioAndBuildWaveformData(i._peaks.options.mediaElement.currentSrc,s,e.withCredentials,t)})};Rt.prototype._buildWaveformDataFromAudioBuffer=function(e,t){var i=e.webAudio;i.scale!==e.zoomLevels[0]&&(i.scale=e.zoomLevels[0]);var n={audio_buffer:i.audioBuffer,split_channels:i.multiChannel,scale:i.scale,disable_worker:!0};gt.createFromAudio(n,t)};Rt.prototype._requestAudioAndBuildWaveformData=function(e,t,i,n){var s=this;if(!e){s._peaks._logger("Peaks.init(): The mediaElement src is invalid");return}s._xhr=s._createXHR(e,"arraybuffer",i,function(r){if(this.readyState===4){if(this.status!==200){n(new Error("Unable to fetch remote data. HTTP status "+this.status));return}s._xhr=null;var a={audio_context:t.audioContext,array_buffer:r.target.response,split_channels:t.multiChannel,scale:t.scale};gt.createFromAudio(a,n)}},function(){n(new Error("XHR failed"))},function(){n(new Error("XHR aborted"))}),s._xhr.send()};Rt.prototype.abort=function(){this._xhr&&this._xhr.abort()};Rt.prototype._createXHR=function(e,t,i,n,s,r){var a=new XMLHttpRequest;if(a.open("GET",e,!0),mo)try{a.responseType=t}catch{}return a.onload=n,a.onerror=s,mo&&i&&(a.withCredentials=!0),a.addEventListener("abort",r),a};function ri(){return Hl.call(this),this.options={zoomLevels:[512,1024,2048,4096],waveformCache:!0,mediaElement:null,mediaUrl:null,dataUri:null,withCredentials:!1,waveformData:null,webAudio:null,nudgeIncrement:1,pointMarkerColor:"#39cccc",createSegmentMarker:lg,createSegmentLabel:hg,createPointMarker:cg,logger:console.error.bind(console)},this}ri.prototype=Object.create(Hl.prototype);var Ss={playheadColor:"#111111",playheadTextColor:"#aaaaaa",axisGridlineColor:"#cccccc",showAxisLabels:!0,axisLabelColor:"#aaaaaa",fontFamily:"sans-serif",fontSize:11,fontStyle:"normal",timeLabelPrecision:2,enablePoints:!0,enableSegments:!0},vo={playheadClickTolerance:3,waveformColor:"rgba(0, 225, 128, 1)",wheelMode:"none",autoScroll:!0,autoScrollOffset:100},yo={waveformColor:"rgba(0, 0, 0, 0.2)",highlightColor:"#aaaaaa",highlightStrokeColor:"transparent",highlightOpacity:.3,highlightOffset:11,highlightCornerRadius:2},_g={overlay:!1,markers:!0,startMarkerColor:"#aaaaaa",endMarkerColor:"#aaaaaa",waveformColor:"#0074d9",overlayColor:"#ff0000",overlayOpacity:.3,overlayBorderColor:"#ff0000",overlayBorderWidth:2,overlayCornerRadius:5,overlayOffset:25,overlayLabelAlign:"left",overlayLabelVerticalAlign:"top",overlayLabelPadding:8,overlayLabelColor:"#000000",overlayFontFamily:"sans-serif",overlayFontSize:12,overlayFontStyle:"normal"},mg={color:"#888888",minWidth:50};function vg(e){var t={};e.overview&&e.overview.showPlayheadTime&&(t.showPlayheadTime=e.overview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","highlightColor","highlightStrokeColor","highlightOpacity","highlightCornerRadius","highlightOffset","enablePoints","enableSegments"];return i.forEach(function(n){e.overview&&se(e.overview,n)?t[n]=e.overview[n]:se(e,n)?t[n]=e[n]:se(t,n)||(se(yo,n)?t[n]=yo[n]:se(Ss,n)&&(t[n]=Ss[n]))}),t}function yg(e){var t={};e.showPlayheadTime?t.showPlayheadTime=e.showPlayheadTime:e.zoomview&&e.zoomview.showPlayheadTime&&(t.showPlayheadTime=e.zoomview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","playheadClickTolerance","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","wheelMode","autoScroll","autoScrollOffset","enablePoints","enableSegments"];return i.forEach(function(n){e.zoomview&&se(e.zoomview,n)?t[n]=e.zoomview[n]:se(e,n)?t[n]=e[n]:se(t,n)||(se(vo,n)?t[n]=vo[n]:se(Ss,n)&&(t[n]=Ss[n]))}),t}function bg(e){if(!se(e,"scrollbar"))return null;var t={},i=["container","color","minWidth"];return i.forEach(function(n){se(e.scrollbar,n)?t[n]=e.scrollbar[n]:t[n]=mg[n]}),t}function hs(e,t){for(var i in t)se(t,i)&&se(e,i)&&(e[i]=t[i]);return e}function wg(e,t){e.segmentOptions={},_n(e.segmentOptions,_g),t.segmentOptions&&hs(e.segmentOptions,t.segmentOptions),e.zoomview.segmentOptions={},_n(e.zoomview.segmentOptions,e.segmentOptions),t.zoomview&&t.zoomview.segmentOptions&&hs(e.zoomview.segmentOptions,t.zoomview.segmentOptions),e.overview.segmentOptions={},_n(e.overview.segmentOptions,e.segmentOptions),t.overview&&t.overview.segmentOptions&&hs(e.overview.segmentOptions,t.overview.segmentOptions)}function bo(e){var t=e.zoomview.container,i=e.overview.container;if(!Or(t)&&!Or(i))return new TypeError("Peaks.init(): The zoomview and/or overview container options must be valid HTML elements");if(t&&(t.clientWidth<=0||t.clientHeight<=0))return new Error("Peaks.init(): Please ensure that the zoomview container is visible and has non-zero width and height");if(i&&(i.clientWidth<=0||i.clientHeight<=0))return new Error("Peaks.init(): Please ensure that the overview container is visible and has non-zero width and height")}ri.init=function(e,t){var i=new ri,n=i._setOptions(e);if(n){t(n);return}if(n=bo(i.options),n){t(n);return}var s=null;if(i.options.scrollbar){if(s=i.options.scrollbar.container,!Or(s)){t(new TypeError("Peaks.init(): The scrollbar container option must be a valid HTML element"));return}if(s.clientWidth<=0){t(new TypeError("Peaks.init(): Please ensure that the scrollbar container is visible and has non-zero width"));return}}e.keyboard&&(i._keyboardHandler=new ha(i));var r=e.player?e.player:new _t(i.options.mediaElement);return i.player=new ct(i,r),i.segments=new Fe(i),i.points=new Ke(i),i.zoom=new Di(i,i.options.zoomLevels),i.views=new Xt(i),i._waveformBuilder=new Rt(i),i.player.init(i).then(function(){i._waveformBuilder.init(i.options,function(a,o){if(a){t&&t(a);return}if(a=bo(i.options),a){t&&t(a);return}i._waveformBuilder=null,i._waveformData=o;var l=i.options.zoomview.container,h=i.options.overview.container;h&&i.views.createOverview(h),l&&i.views.createZoomview(l),s&&i.views.createScrollbar(s),e.segments&&i.segments.add(e.segments),e.points&&i.points.add(e.points),e.emitCueEvents&&(i._cueEmitter=new kt(i)),setTimeout(function(){i.emit("peaks.ready")},0),t(null,i)})}).catch(function(a){t&&t(a)}),i};ri.prototype._setOptions=function(e){if(!En(e))return new TypeError("Peaks.init(): The options parameter should be an object");if(!e.player){if(!e.mediaElement)return new Error("Peaks.init(): Missing mediaElement option");if(!(e.mediaElement instanceof HTMLMediaElement))return new TypeError("Peaks.init(): The mediaElement option should be an HTMLMediaElement")}if(e.logger&&!Xf(e.logger))return new TypeError("Peaks.init(): The logger option should be a function");if(e.segments&&!Array.isArray(e.segments))return new TypeError("Peaks.init(): options.segments must be an array of segment objects");if(e.points&&!Array.isArray(e.points))return new TypeError("Peaks.init(): options.points must be an array of point objects");if(hs(this.options,e),this.options.overview=vg(e),this.options.zoomview=yg(e),this.options.scrollbar=bg(e),wg(this.options,e),Array.isArray(this.options.zoomLevels)){if(this.options.zoomLevels.length===0)return new Error("Peaks.init(): The zoomLevels array must not be empty");if(!zf(this.options.zoomLevels))return new Error("Peaks.init(): The zoomLevels array must be sorted in ascending order")}else return new TypeError("Peaks.init(): The zoomLevels option should be an array");this._logger=this.options.logger};ri.prototype.setSource=function(e,t){var i=this;i.player._setSource(e).then(function(){e.zoomLevels||(e.zoomLevels=i.options.zoomLevels),i._waveformBuilder=new Rt(i),i._waveformBuilder.init(e,function(n,s){if(n){t(n);return}i._waveformBuilder=null,i._waveformData=s,["overview","zoomview"].forEach(function(r){var a=i.views.getView(r);a&&a.setWaveformData(s)}),i.zoom.setZoomLevels(e.zoomLevels),t()})}).catch(function(n){t(n)})};ri.prototype.getWaveformData=function(){return this._waveformData};ri.prototype.destroy=function(){this._waveformBuilder&&this._waveformBuilder.abort(),this._keyboardHandler&&this._keyboardHandler.destroy(),this.views&&this.views.destroy(),this.player&&this.player.destroy(),this._cueEmitter&&this._cueEmitter.destroy()};const Sg=["src"],Cg=["src"],Tg={class:"peaks-controls"},kg=300,Eg=Tt({__name:"AudioPeaks",props:{src:{},video:{type:Boolean},zoomviewElementId:{},zoomviewElement:{},overviewElementId:{},overviewElement:{},mediaElementId:{},mediaElement:{},options:{}},emits:["error"],setup(e,{expose:t,emit:i}){const n=e,s=mt(void 0),r=mt(null),a=mt(null),o=mt(null),l=mt(null),h=mt(null),d=mt(null),f=mt(null),y=mt(void 0);t({peaksInstance:s}),Zr(()=>{p()}),hl(()=>{_()});function p(){console.debug("AudioPeaks::createPeaksInstance:options:",n.options);const c=v(n.overviewElement,n.overviewElementId,a,o,"div"),u=v(n.zoomviewElement,n.zoomviewElementId,l,h,"div"),S=v(n.mediaElement,n.mediaElementId,d,f,"audio,video");n.options&&(n.options.zoomview?n.options.zoomview.container=u:n.options.zoomview={container:u},n.options.overview?n.options.overview.container=c:n.options.overview={container:c},n.options.mediaElement=S);const M=n.options?n.options:{overview:{container:c},zoomview:{container:u},mediaElement:S,webAudio:{audioContext:new AudioContext},zoomLevels:[256,512,1024,2048,4096]};ri.init(M,function(H,C){H&&(console.error(H),i("error",H)),s.value=C,y.value=C==null?void 0:C.zoom.getZoom()})}function _(){var c;(c=s.value)==null||c.destroy()}ru(r,()=>{b()});const b=tu(()=>{var S,M;console.debug("AudioPeaks::debouncedOverviewResize");const c=(S=s.value)==null?void 0:S.views.getView("overview");c==null||c.fitToContainer();const u=(M=s.value)==null?void 0:M.views.getView("zoomview");u==null||u.fitToContainer()},kg);function v(c,u,S,M,H){if(c)return console.debug("AudioPeaks::Found elm: ",c),c;if(u)return console.debug("AudioPeaks::Found element by id: ",u),document.getElementById(""+u);const C=S.value;if(C)return console.debug("AudioPeaks::Found element by Ref: ",C),C;const B=M.value;if(B){const E=B.querySelector(H);if(E)return console.debug("AudioPeaks::Found element by first in slot: ",E),E}}function A(){var c,u;(c=s.value)==null||c.zoom.zoomIn(),y.value=(u=s.value)==null?void 0:u.zoom.getZoom()}function k(){var c,u;(c=s.value)==null||c.zoom.zoomOut(),y.value=(u=s.value)==null?void 0:u.zoom.getZoom()}return(c,u)=>(Ee(),Le("div",{ref_key:"audioPeaks",ref:r,class:"peaks"},[m("div",{ref_key:"overviewSlot",ref:o},[!n.overviewElementId&&!n.overviewElement?jn(c.$slots,"overview",{key:0},()=>[m("div",{class:"peaks-overview",ref_key:"overview",ref:a},null,512)],!0):fn("",!0)],512),m("div",{ref_key:"zoomviewSlot",ref:h},[!n.zoomviewElementId&&!n.zoomviewElement?jn(c.$slots,"zoomview",{key:0},()=>[m("div",{class:"peaks-zoomview",ref_key:"zoomview",ref:l},null,512)],!0):fn("",!0)],512),m("div",{ref_key:"audioSlot",ref:f},[!n.mediaElementId&&!n.mediaElement?jn(c.$slots,"default",{key:0},()=>[c.video?(Ee(),Le("video",{key:0,class:"peaks",ref_key:"audio",ref:d,controls:""},[m("source",{src:c.src},null,8,Sg),ce(" Your browser does not support the video element. ")],512)):(Ee(),Le("audio",{key:1,class:"peaks peaks-audio",ref_key:"audio",ref:d,controls:""},[m("source",{src:c.src},null,8,Cg),ce(" Your browser does not support the audio element. ")],512))],!0):fn("",!0)],512),jn(c.$slots,"controls",{},()=>[m("div",Tg,[m("button",{onClick:u[0]||(u[0]=S=>A())},"Zoom in"),ce("\xA0 "),m("button",{onClick:u[1]||(u[1]=S=>k())},"Zoom out"),ce("\xA0 "),m("span",null,"Zoom level: "+Wr(y.value),1)])],!0)],512))}});const bt=oi(Eg,[["__scopeId","data-v-77d7c44b"]]),xg=m("p",null,[ce("vue-peaks provides three modes of operation: "),m("ul",null,[m("li",null,[m("b",null,"Simple mode"),ce(": just set the media URL, and all views are automatically rendered by default")]),m("li",null,[m("b",null,"Slot mode"),ce(": the media element and additional views are provided using named slots")]),m("li",null,[m("b",null,"External mode"),ce(": the media element and additional views are referenced by id or HTML element references ")])])],-1),Ag=m("p",null," First, import the Single File Component (SFC): ",-1),Pg=m("h4",{class:"title is-4"},"Simple mode",-1),Ig={class:"columns is-desktop"},Mg={class:"column"},Og=m("p",null,[ce(" By default, the "),m("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaks.vue"},"AudioPeaks Vue component"),ce(" template creates a new audio element, with the given source URL, and both view panes (overview and zoom, which are rendered with a default size) and a controls pane. A new audio context is created and used to compute the waveform. ")],-1),Dg={class:"column"},Lg={class:"box"},Rg=m("h4",{class:"title is-4"},"Slot mode",-1),Fg={class:"columns is-desktop"},Ng=m("div",{class:"column"},[m("p",null,[ce(" To provide your own media element, just place it inside the "),m("span",{class:"code"},"AudioPeaks"),ce(" element (a.k.a. the slot). Vue-peaks will use the first media element in the slot. A new audio context is created and used to compute the waveform. ")])],-1),Wg={class:"column"},Bg={class:"column is-narrow"},Gg={class:"box"},Ug=m("span",{class:"tag is-danger is-multiline"},"You can also add additional HTML content.",-1),Hg=m("audio",{controls:""},[m("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),Vg=m("h4",{class:"title is-4"},"External mode",-1),zg={class:"columns is-desktop"},$g=m("div",{class:"column"},[m("p",null," If you already have an existing media element, you can reference it by it's (unique) id, or as an HTMLMediaElement object. A new audio context is created and used to compute the waveform. ")],-1),Xg={class:"column"},jg={class:"column is-narrow"},Kg={class:"box"},Yg=m("audio",{controls:"",id:"externalMediaElement"},[m("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),Zg=m("div",null,[m("span",{class:"tag is-danger"}," Using the external media element above.")],-1),qg={class:"columns is-desktop"},Jg=m("div",{class:"column"},[m("p",null," There are also properties available for overview area and the zoom view area. ")],-1),Qg={class:"column"},ep={class:"column is-narrow"},tp={class:"box"},ip=m("div",{id:"externalBasicOverviewDivId"},"Overview",-1),np=m("div",{id:"externalBasicZoomviewDivId"},"Zoomview",-1),sp=m("div",null,[m("span",{class:"tag is-danger"}," Using the external overview and zoomview element above.")],-1),rp=Tt({__name:"ExampleWithTheBasics",setup(e){return(t,i)=>{const n=Dt("highlightjs");return Ee(),Le(Qe,null,[xg,Ag,ne(n,{language:"vue-typescript",code:"import AudioPeaks from 'vue-peaks/src/components/AudioPeaks.vue';"}),Pg,m("div",Ig,[m("div",Mg,[Og,ne(n,{language:"vue-template",code:"<AudioPeaks src='https://domain/file.mp3' />"})]),m("div",Dg,[m("div",Lg,[ne(bt,{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})])])]),Rg,m("div",Fg,[Ng,m("div",Wg,[ne(n,{language:"vue-template",code:`<AudioPeaks>
  <span>You can also add additional HTML content.</span>
  <audio controls>
    <source src='https://domain/file.mp3' />
  </audio>
</AudioPeaks>`})]),m("div",Bg,[m("div",Gg,[ne(bt,null,{default:nt(()=>[Ug,Hg]),_:1})])])]),Vg,m("div",zg,[$g,m("div",Xg,[ne(n,{language:"vue-template",code:`<audio controls id='externalMediaElement'>
  <source src='https://domain/file.mp3' />
</audio>
<div><span class='tag is-danger'>
    Using the external media element above.</span></div>
<AudioPeaks mediaElementId='externalMediaElement'>
</AudioPeaks>`})]),m("div",jg,[m("div",Kg,[Yg,Zg,ne(bt,{mediaElementId:"externalMediaElement"})])])]),m("div",qg,[Jg,m("div",Qg,[ne(n,{language:"vue-template",code:`<div id='externalBasicOverviewDivId'>Overview</div>
<div id='externalBasicZoomviewDivId'>Zoomview</div>
<div><span class='tag is-danger'>
Using the external overview and zoomview element above.</span></div>
<AudioPeaks src='https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3' 
  overviewElementId='externalBasicOverviewDivId'
  zoomviewElementId='externalBasicZoomviewDivId'>
</AudioPeaks>`})]),m("div",ep,[m("div",tp,[ip,np,sp,ne(bt,{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3",overviewElementId:"externalBasicOverviewDivId",zoomviewElementId:"externalBasicZoomviewDivId"})])])])],64)}}}),at=e=>(Kr("data-v-87040083"),e=e(),Yr(),e),ap=at(()=>m("p",null," vue-peaks also supports video, as peaks.js does. These examples expand on the above examples, with a focus on video content. ",-1)),op=at(()=>m("h4",{class:"title is-4"},"Simple mode (with video)",-1)),lp={class:"columns is-desktop"},hp={class:"column"},cp=at(()=>m("p",null,[ce(" By default, the "),m("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaks.vue"},"AudioPeaks Vue component"),ce(" template creates a new audio element. While this works for the audio part of video content, you can specify that the used HTML media element actually is a video element: ")],-1)),dp={class:"column"},up={class:"box"},fp=at(()=>m("p",null,[ce(" Voyage of Discovery (Source: "),m("a",{href:"https://solarsystem.nasa.gov/resources/317/voyage-of-discovery/?category=planets_saturn"},"NASA)"),ce(", 12.3 MB (video/webm) ")],-1)),gp=at(()=>m("h4",{class:"title is-4"},"Slot mode (with video)",-1)),pp={class:"columns is-desktop"},_p={class:"column"},mp=at(()=>m("p",null,[ce(" No difference to audio here, just place your video element inside the "),m("span",{class:"code"},"AudioPeaks"),ce(" element using the default slot. ")],-1)),vp=at(()=>m("p",null,[ce(" Note that the default slot is still named "),m("span",{class:"code"},"#audio"),ce(", in case you want to use it for customization. ")],-1)),yp={class:"columns is-desktop"},bp={class:"column"},wp={class:"box"},Sp=at(()=>m("p",null,[ce(" Cassini's High-Flying, Ring-Grazing Orbits (Source: "),m("a",{href:"https://solarsystem.nasa.gov/resources/17561/cassinis-high-flying-ring-grazing-orbits/?category=videos"},"NASA / Jet Propulsion Laboratory - Caltech)"),ce(", 27.1 MB (video/ogg) ")],-1)),Cp=at(()=>m("video",{controls:"",style:{width:"100%"}},[m("source",{src:"https://solarsystem.nasa.gov/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBbDFmIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--971840d1ebc56d50fc897c92adb1b8d7f8aad71e/JPL-20161121-CASSINf-0001-720.ogv?disposition=inline"})],-1)),Tp=at(()=>m("h4",{class:"title is-4"},"External mode (with video)",-1)),kp={class:"columns is-desktop"},Ep={class:"column"},xp=at(()=>m("p",null," As with audio, you can reference your existing video element by it's (unique) id, or as an HTMLMediaElement object. ",-1)),Ap={class:"column is-narrow"},Pp={class:"box"},Ip=at(()=>m("p",null,[ce(" Where is the Edge of the Solar System? (Source: "),m("a",{href:"https://solarsystem.nasa.gov/resources/17561/cassinis-high-flying-ring-grazing-orbits/?category=videos"},"NASA's Goddard Space Flight Center)"),ce(", 28.8 MB (video/mp4) ")],-1)),Mp=at(()=>m("video",{controls:"",id:"externalVideoElement"},[m("source",{src:"https://solarsystem.nasa.gov/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBczlnIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--8e7fbe9534876dd62ed8e8eec07a33197beab17a/12639_EdgeofSolarSystem_Final_24fps_v02_VX-718267_appletv_subtitles.m4v?disposition=inline"})],-1)),Op=at(()=>m("div",null,[m("span",{class:"tag is-danger"}," Using the external video element above.")],-1)),Dp=Tt({__name:"ExampleUsingVideo",setup(e){return(t,i)=>{const n=Dt("highlightjs");return Ee(),Le(Qe,null,[ap,op,m("div",lp,[m("div",hp,[cp,ne(n,{language:"vue-template",code:"<AudioPeaks video src='https://domain/video-file.mp4' />"})]),m("div",dp,[m("div",up,[fp,ne(bt,{video:"",src:"https://solarsystem.nasa.gov/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBcHRYIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--c6d603ff2a89b19ebdd89842ff2e35911e2ca2a2/-home-www-videos-voyager-20130912d-discovery20110428-640.webm?disposition=inline"})])])]),gp,m("div",pp,[m("div",_p,[mp,ne(n,{language:"vue-template",code:`<AudioPeaks>
  <video controls>
    <source src='https://domain/video-file.mp4' />
  </video>
</AudioPeaks>`}),vp]),m("div",yp,[m("div",bp,[m("div",wp,[Sp,ne(bt,null,{default:nt(()=>[Cp]),_:1})])])])]),Tp,m("div",kp,[m("div",Ep,[xp,ne(n,{language:"vue-template",code:`<audio controls id='externalVideoElement'>
  <source src='https://domain/video-file.mp4' />
</audio>
<div><span class='tag is-danger'>
    Using the external media element above.</span></div>
<AudioPeaks mediaElementId='externalVideoElement'>
</AudioPeaks>`})]),m("div",Ap,[m("div",Pp,[Ip,Mp,Op,ne(bt,{mediaElementId:"externalVideoElement"})])])])],64)}}});const Lp=oi(Dp,[["__scopeId","data-v-87040083"]]),Rp={class:"columns is-desktop"},Fp=ai('<div class="column"><p> To fully customize the appearance and behavior, the Peaks.js <a href="https://github.com/bbc/peaks.js/blob/master/doc/API.md#configuration">configuration options</a> can be provided. </p><p> Note, that you should omit the the <span class="code">zoomview.container</span>, <span class="code">overview.container</span> and <span class="code">mediaElement</span> options, since these are already handled internally, depending on the view mode (see explanation with the basic examples). </p><p>The options allow you for example to <ul><li>customize the waveform styles</li><li>define scrolling behavior</li><li>use precomputed waveform data</li></ul></p></div>',1),Np={class:"column"},Wp={class:"column"},Bp={class:"box"},Gp=m("audio",{controls:""},[m("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),Up=m("template",null,null,-1),Hp=Tt({__name:"ExampleUsingPeaksOptions",setup(e){const t={overview:{waveformColor:"#3298dc",playedWaveformColor:"#238cd1",highlightColor:"hsl(206, 70%, 96%)",highlightOffset:0,axisGridlineColor:"hsl(0, 0%, 29%)",axisLabelColor:"hsl(0, 0%, 29%)",showPlayheadTime:!1},zoomview:{waveformColor:"#f1b70e",playedWaveformColor:"#d9a50d",axisGridlineColor:"hsl(0, 0%, 29%)",axisLabelColor:"hsl(0, 0%, 29%)",playheadTextColor:"#e43725",showPlayheadTime:!0},webAudio:{audioContext:new AudioContext},zoomLevels:[256],playheadColor:"#e43725"};return(i,n)=>{const s=Dt("highlightjs");return Ee(),Le("div",Rp,[Fp,m("div",Np,[ne(s,{language:"vue-typescript",code:`/** The configuration options 
* @remarks The colors are taken from a Bulma color scheme.
*/
const options: PeaksOptions = {
  overview: {
    /* container is handled separately by AudioPeaks */
    waveformColor: 'hsl(204, 86%, 53%)',
    playedWaveformColor: 'hsl(204, 71%, 39%)',
    highlightColor: 'hsl(206, 70%, 96%)',
    highlightOffset: 0,
    axisGridlineColor: 'hsl(0, 0%, 29%)',
    axisLabelColor: 'hsl(0, 0%, 29%)',
  },
  zoomview: {
    /* container is handled separately by AudioPeaks */
    waveformColor: 'hsl(48, 71%, 48%)',
    playedWaveformColor: 'hsl(48, 53%, 31%)',
    axisGridlineColor: 'hsl(0, 0%, 29%)',
    axisLabelColor: 'hsl(0, 0%, 29%)',
  },
  /* mediaElement is handled separately by AudioPeaks */
  webAudio: { audioContext: new AudioContext() },
  zoomLevels: [256],
  playheadColor: 'hsl(348, 100%, 61%)'
}`}),ne(s,{language:"vue-template",code:`<AudioPeaks :options='options'>
  <audio controls>
    <source src='https://domain/file.mp3' />
  </audio>
  <template #controls><template />
    <!-- Using an empty template on a slot 
         prevents the default content -->
  </template>
</AudioPeaks>`})]),m("div",Wp,[m("div",Bp,[ne(bt,{options:t},{controls:nt(()=>[Up]),default:nt(()=>[Gp]),_:1})])])])}}}),Li=e=>(Kr("data-v-b3ef7b4c"),e=e(),Yr(),e),Vp={class:"widget"},zp=["disabled"],$p={key:0,style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Xp=Li(()=>m("path",{fill:"currentColor",d:"M14,19H18V5H14M6,19H10V5H6V19Z"},null,-1)),jp=[Xp],Kp={key:1,style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Yp=Li(()=>m("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"},null,-1)),Zp=[Yp],qp=["disabled"],Jp={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Qp=Li(()=>m("path",{fill:"currentColor",d:"M14.55 20C15 20.76 15.5 21.44 15.91 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V10.22C19.5 10.08 19 10 18.5 10C18.33 10 18.17 10 18 10.03V4H13V12L10.5 9.75L8 12V4H6V20H14.55M22 15.5C22 18.1 18.5 22 18.5 22S15 18.1 15 15.5C15 13.6 16.6 12 18.5 12S22 13.6 22 15.5M19.7 15.6C19.7 15 19.1 14.4 18.5 14.4S17.3 14.9 17.3 15.6C17.3 16.2 17.8 16.8 18.5 16.8S19.8 16.2 19.7 15.6Z"},null,-1)),e_=[Qp],t_=["disabled"],i_={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},n_=Li(()=>m("path",{fill:"currentColor",d:"M13.09 20C13.21 20.72 13.46 21.39 13.81 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V13.09C19.67 13.04 19.34 13 19 13C18.66 13 18.33 13.04 18 13.09V4H13V12L10.5 9.75L8 12V4H6V20H13.09M17 16V22L22 19L17 16Z"},null,-1)),s_=[n_],r_=Li(()=>m("template",null,null,-1)),a_=["src"],o_=Li(()=>m("template",null,null,-1)),l_={class:"item peaks-overview",id:"widgetOverview"},h_=["title"],c_={class:"spin",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},d_=Li(()=>m("path",{fill:"currentColor",d:"M12 19C13.1 19 14 19.9 14 21S13.1 23 12 23 10 22.1 10 21 10.9 19 12 19M12 1C13.1 1 14 1.9 14 3S13.1 5 12 5 10 4.1 10 3 10.9 1 12 1M6 16C7.1 16 8 16.9 8 18S7.1 20 6 20 4 19.1 4 18 4.9 16 6 16M3 10C4.1 10 5 10.9 5 12S4.1 14 3 14 1 13.1 1 12 1.9 10 3 10M6 4C7.1 4 8 4.9 8 6S7.1 8 6 8 4 7.1 4 6 4.9 4 6 4M18 16C19.1 16 20 16.9 20 18S19.1 20 18 20 16 19.1 16 18 16.9 16 18 16M21 10C22.1 10 23 10.9 23 12S22.1 14 21 14 19 13.1 19 12 19.9 10 21 10M18 4C19.1 4 20 4.9 20 6S19.1 8 18 8 16 7.1 16 6 16.9 4 18 4Z"},null,-1)),u_=[d_],f_={key:1},g_={key:2,class:"has-text-danger"},p_=Tt({__name:"AudioPeaksWidget",props:{src:{}},setup(e){const t=e,i=mt(),n=Zt(()=>{var d;return(d=i.value)==null?void 0:d.peaksInstance}),s=mt(null),r=Ai({isPlaying:!1,canPlay:!1,bookmark:0,lastErrorMessage:""}),a={overview:{waveformColor:"#2ecc71",playedWaveformColor:"#29b765",showAxisLabels:!1,axisGridlineColor:"hsl(0, 0%, 100%)",playheadTextColor:"#e43725",showPlayheadTime:!0},showPlayheadTime:!0,webAudio:{audioContext:new AudioContext},playheadColor:"#e43725"};function o(){var d,f;r.isPlaying=!r.isPlaying,r.isPlaying?(d=s.value)==null||d.play():(f=s.value)==null||f.pause()}function l(){var f,y;const d=(f=n.value)==null?void 0:f.player.getCurrentTime();d&&((y=n.value)==null||y.points.add({time:d,editable:!0,labelText:"Bookmark",color:"#000000"}),r.bookmark=d)}function h(){var d;(d=n.value)==null||d.player.seek(r.bookmark)}return(d,f)=>(Ee(),Le("div",Vp,[m("button",{class:"item",onClick:f[0]||(f[0]=y=>o()),disabled:!r.canPlay},[r.isPlaying?(Ee(),Le("svg",$p,jp)):(Ee(),Le("svg",Kp,Zp))],8,zp),m("button",{class:"item",onClick:f[1]||(f[1]=y=>l()),disabled:!r.canPlay,title:"set bookmark"},[(Ee(),Le("svg",Jp,e_))],8,qp),m("button",{class:"item",onClick:f[2]||(f[2]=y=>h()),disabled:!r.bookmark,title:"seek bookmark"},[(Ee(),Le("svg",i_,s_))],8,t_),ne(bt,{overviewElementId:"widgetOverview",ref_key:"audioPeaks",ref:i,options:a,onError:f[4]||(f[4]=y=>r.lastErrorMessage=y.message)},{zoomview:nt(()=>[r_]),default:nt(()=>[m("audio",{ref_key:"audio",ref:s,onCanplay:f[3]||(f[3]=()=>{r.canPlay=!0})},[m("source",{src:t.src},null,8,a_)],544)]),controls:nt(()=>[o_]),_:1},512),m("div",l_,[t.src?(Ee(),Le("div",{key:0,title:`Loading and rendering from ${t.src}`},[(Ee(),Le("svg",c_,u_))],8,h_)):(Ee(),Le("span",f_,"no media available")),r.lastErrorMessage?(Ee(),Le("span",g_,Wr(r.lastErrorMessage),1)):fn("",!0)])]))}});const __=oi(p_,[["__scopeId","data-v-b3ef7b4c"]]),m_={class:"columns"},v_=m("div",{class:"column"},[m("p",null,[ce(" This is a showcase for a simple media player. It's available with vue-peaks as ready-made component, "),m("span",{class:"code"},"AudioPeaksWidget.vue"),ce(", which you can use as-is or adapt to your needs. ")])],-1),y_={class:"column"},b_={class:"column"},w_={class:"box"},S_={class:"field"},C_={class:"control"},T_=m("div",{class:"columns"},[m("div",{class:"column"},[m("p",null,[ce(" You can find the complete "),m("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaksWidget.vue"},"Widget SFC source code on GitHub"),ce(". ")])])],-1),k_=Tt({__name:"DemoWidget",setup(e){const t=Ai({url:""});return(i,n)=>{const s=Dt("highlightjs");return Ee(),Le(Qe,null,[m("div",m_,[v_,m("div",y_,[ne(s,{language:"vue-typescript",code:`import AudioPeaksWidget 
from 'vue-peaks/src/components/AudioPeaksWidget.vue';
const state = reactive({ url: '' });`}),ne(s,{language:"vue-template",code:`<input type='url' 
       v-model='state.url' 
       placeholder='Paste an URL to a media file' />
<!-- The :key property makes sure that the component 
     is re-rendered on every URL change, causing
     a re-render of the waveform -->       
<AudioPeaksWidget :src='state.url' 
                  :key='state.url'>
</AudioPeaksWidget>`})]),m("div",b_,[m("div",w_,[m("div",S_,[m("div",C_,[vr(m("input",{class:"input",type:"url","onUpdate:modelValue":n[0]||(n[0]=r=>t.url=r),placeholder:"Paste an URL to a media file"},null,512),[[kl,t.url]])])]),(Ee(),Ns(__,{src:t.url,key:t.url},null,8,["src"]))])])]),T_],64)}}}),E_={class:"columns"},x_={class:"column"},A_=m("p",null,[ce("You might need to access the peaks.js instance to call various functions on their extensive "),m("a",{href:"https://github.com/bbc/peaks.js#api>"},"API"),ce(".")],-1),P_=m("p",null," In the hosting component, get a reference to the AudioPeaks child component and, for convenience, a directly computed property to the actual peaks.js instance: ",-1),I_=m("p",null," Now you can access the instance and it's methods by using the reference, like in this example: ",-1),M_=m("p",null," Remember, that the instance is available only after the child has been mounted and peaks.js has been initialized. ",-1),O_=Tt({__name:"AccessingThePeaksInstance",setup(e){return Ai({url:""}),(t,i)=>{const n=Dt("highlightjs");return Ee(),Le("div",E_,[m("div",x_,[A_,P_,m("p",null,[ne(n,{language:"vue-typescript",code:`/** Reference to the AudioPeaks component */
const audioPeaks = shallowRef<InstanceType<typeof AudioPeaks>>()

/** Accessor to the peaks instance from the AudioPeaks component
 * @remarks Allows access to the peaks.js instance 
 * to call various functions on the API.
 */
const peaksInstance = computed(() => audioPeaks.value?.peaksInstance);`})]),I_,m("p",null,[ne(n,{language:"vue-typescript",code:`/** Sets a bookmark at the current position
 */
function setBookmark() {
  const currentTime = peaksInstance.value?.player.getCurrentTime();
  if (currentTime) {
    peaksInstance.value?.points.add({
      time: currentTime
    });
    state.bookmark = currentTime;
  }
}`})]),M_])])}}}),D_={class:"columns is-desktop"},L_={class:"column"},R_={class:"box"},F_={class:"field"},N_=m("label",{class:"label is-multiline"},"Create and destroy an AudioPeaks instance:",-1),W_={class:"control"},B_={class:"field"},G_=m("label",{class:"label is-multiline"},"Change the media URL (triggers re-rendering).",-1),U_={class:"control"},H_={class:"select is-danger"},V_=m("option",{value:""},"none",-1),z_=m("option",{value:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"},"An MP3 music file ",-1),$_=m("option",{value:"https://suterma.github.io/vue-peaks/lidija_roos-decisions.ogg"},"An OGG music file ",-1),X_=m("option",{value:"https://twit.cachefly.net/audio/sn/sn0886/sn0886.mp3"},"Security Now! Podcast, Episode #886 (112 min, 55.5MB, MP3)",-1),j_=[V_,z_,$_,X_],K_={class:"field"},Y_=m("label",{class:"label is-multiline"},"Change the size (triggers re-drawing).",-1),Z_={class:"control"},q_=["src"],J_=m("template",null,null,-1),Q_=m("template",null,null,-1),em=ai('<p> AudioPeaks currently does not support reactivity for the options. Still, you can use Vue&#39;s reactivity on the component itself. You can for example: </p><p><ul><li>Conditionally render the component (by using Vue&#39;s built-in <span class="code">v-if</span> directive). This also releases memory used. </li><li>Replace the media source by setting the <span class="code">src</span> attribute of the audio element. When you also set the <span class="code">:key</span> property to a new value, the component re-renders. <br>This is called the key-changing technique, and is required to trigger an update of the waveform.</li></ul></p><p> Note that media elements with an empty <span class="code">src</span> attribute cause a <span class="code">MediaError</span>. If this is a concern to you, use the <span class="code">v-if</span> directive to conditionally only render the element on non-emtpy URL values. </p>',3),tm={class:"column"},im=m("p",null,[ce(' vue-peaks internally handles resizing of the contained overview and zoomview areas. If you, in the "external mode", have an external zoomview or overview area that are resizing independent from the '),m("span",{class:"code"},"AudioPeaks"),ce(" instance, please handle their resizing according to the "),m("a",{href:"https://github.com/bbc/peaks.js/blob/master/doc/API.md#viewfittocontainer"},"peaks.js API docs about resizing"),ce(". ")],-1),nm=Tt({__name:"ExampleUsingReactivity",setup(e){const t=Ai({isRendered:!0,mediaSource:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3",peaksWidth:50});function i(){const n=t.isRendered;console.log("CurrentState",n),t.isRendered=!n}return(n,s)=>{const r=Dt("highlightjs");return Ee(),Le("div",D_,[m("div",L_,[m("div",R_,[m("div",F_,[N_,m("div",W_,[m("button",{onClick:s[0]||(s[0]=a=>i()),class:"button is-danger"},[m("span",null,Wr(t.isRendered?"Destroy":"Render"),1)])])]),m("div",B_,[G_,m("div",U_,[m("div",H_,[vr(m("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.mediaSource=a),class:"highlight"},j_,512),[[Bd,t.mediaSource]])])])]),m("div",K_,[Y_,m("div",Z_,[vr(m("input",{id:"peaksWidthSlider",class:"slider is-fullwidth is-danger is-circle",step:"1",min:"0",max:"100","onUpdate:modelValue":s[2]||(s[2]=a=>t.peaksWidth=a),type:"range"},null,512),[[kl,t.peaksWidth]])])]),t.isRendered?(Ee(),Ns(bt,{key:t.mediaSource,style:Ps({width:t.peaksWidth+"%"})},{zoomview:nt(()=>[J_]),controls:nt(()=>[Q_]),default:nt(()=>[m("audio",{controls:"",src:t.mediaSource},null,8,q_)]),_:1},8,["style"])):fn("",!0)]),em]),m("div",tm,[ne(r,{language:"vue-template",code:`<AudioPeaks v-if='state.isRendered' :key='state.mediaSource' :style='{ width: state.peaksWidth + '%' }'>
  <audio controls :src='state.mediaSource'></audio>
  <template #zoomview>
	<template />
  </template>
  <template #controls>
	<template />
  </template>
</AudioPeaks>`}),im])])}}}),sm={class:"columns is-desktop"},rm=ai('<div class="column"><p> To provide your own layout, you can also use the <a href="https://vuejs.org/guide/components/slots.html#named-slots">named slots</a>: <li><span class="code">#overview</span></li><li><span class="code">#zoomview</span></li><li><span class="code">#audio</span> (default)</li><li><span class="code">#controls</span></li></p><p>This allows you for example to <ul><li>layout elements differently</li><li>not render (instead of just not show) elements</li><li>have a completely custom media element</li></ul> You can use any of the media element modes with named slots. Use <span class="code">$refs</span> to access the relevant HTML elements.</p><p>You can use a different mode for each slot, thus mixing the &quot;slot&quot; mode with the &quot;external&quot; mode in the same component instance.</p></div>',1),am={class:"column"},om={class:"column is-narrow",style:{"max-width":"400px"}},lm={class:"box"},hm=m("div",{style:{height:"50px"}},null,-1),cm=m("span",{class:"tag is-danger"}," Some slot content here.",-1),dm=m("span",{class:"tag is-danger is-multiline"}," In this example, the audio control is not shown, but some custom buttons instead:",-1),um={ref:"audio"},fm=m("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"},null,-1),gm=[fm],pm=m("template",null,null,-1),_m=m("span",{class:"tag is-danger is-multiline"}," No zoom controls are shown, by providing an empty template to the named controls slot.",-1),mm=Tt({__name:"ExampleUsingSlots",setup(e){return(t,i)=>{const n=Dt("highlightjs");return Ee(),Le("div",sm,[rm,m("div",am,[ne(n,{language:"vue-template",code:`<AudioPeaks>
  <template #overview>
    <div style='height: 50px;'></div>
    <span class='tag is-danger'>
      Some slot content here.</span>
  </template>
  <template #default>
    <span class='tag is-danger is-multiline'>
      In this example, the audio control is not shown,
      but some custom
      buttons instead:</span>
    <audio ref='audio'>
      <source src='https://domain/file.mp3' />
    </audio>
    <button @click='($refs.audio as HTMLAudioElement).play()'>
      Play
    </button>\xA0
    <button @click='($refs.audio as HTMLAudioElement).pause()'>
      Pause
    </button>
  </template>
  <template #controls>
    <template />
  </template>
</AudioPeaks>
<span class='tag is-danger is-multiline'>
  No zoom controls are shown, by providing an empty template
  to the named controls slot.</span>`})]),m("div",om,[m("div",lm,[ne(bt,null,{overview:nt(()=>[hm,cm]),default:nt(()=>[dm,m("audio",um,gm,512),m("button",{onClick:i[0]||(i[0]=s=>t.$refs.audio.play())}," Play "),ce("\xA0 "),m("button",{onClick:i[1]||(i[1]=s=>t.$refs.audio.pause())}," Pause ")]),controls:nt(()=>[pm]),_:1}),_m])])])}}}),vm={},ym={class:"columns"},bm=ai('<div class="column"><p> vue-peaks aims to simplify the use of <a target="_blank" href="https://github.com/bbc/peaks.js/">peaks.js</a> in a <a target="_blank" href=" https://vuejs.org/">Vue3</a> environment. It provides a <a target="_blank" href="    https://vuejs.org/guide/scaling-up/sfc.html">Single File Component (SFC)</a>, <span class="code">AudioPeaks</span>. </p><p> Explore the below examples or see the <a target="_blank" href="https://github.com/suterma/vue-peaks#vue-peaks">vue-peaks GitHub repository</a>. </p></div>',1),wm={class:"column"},Sm=m("p",null,[ce(" Installing vue-peaks also installs "),m("a",{target:"_blank",href:"https://github.com/bbc/peaks.js/"},"peaks.js (version 3)"),ce(" as a dependency. Additionally, peaks.js uses "),m("a",{target:"_blank",href:"https://konvajs.org/"},"Konva (version 8 or 9)"),ce(" and "),m("a",{target:"_blank",href:"https://github.com/bbc/waveform-data.js"},"waveform-data (version 4)"),ce(" as peer dependencies; these will get installed with vue-peaks, if not already available. ")],-1);function Cm(e,t){const i=Dt("highlightjs");return Ee(),Le("div",ym,[bm,m("div",wm,[m("p",null,[ne(i,{language:"bash",code:"npm install vue-peaks --save"})]),Sm])])}const Tm=oi(vm,[["render",Cm]]),km={},Em=ai('<p>This project uses</p><ul><li><a href="https://github.com/bbc/peaks.js/" target="_blank">peaks.js</a>, a client-side JavaScript component to display and interact with audio waveforms in the browser. (Released under the LGPL-3.0 license, by the British Broadcasting Corporation and contributors) </li><li><a href="https://vuejs.org/" target="_blank">Vue.js</a>, the progressive JavaScript framework. (Released under the MIT License, Copyright \xA9 2014-2021 Evan You) </li><li><a href="https://bulma.io/" target="_blank">Bulma</a>, the modern CSS framework that just works. (Released under the MIT License, by Jeremy Thomas) </li><li><a href="https://jenil.github.io/bulmaswatch/" target="_blank">Bulmaswatch</a>, free themes for Bulma. (Released under the MIT License, by Jenil Gogari) </li><li><a href="https://materialdesignicons.com/" target="_blank">Material Design Icons</a>, the original. Following Google&#39;s Material Design guidelines for system icons. (Icons released under the Apache 2.0 License, by pictogrammers.com) </li><li><a href="https://jestjs.io/" target="_blank"> Jest</a>, a delightful JavaScript Testing Framework. (Released under the MIT License, by Facebook) </li><li> Music from the Album &quot;Not For Sale&quot; by Lidija Roos (Released to the public, by Lidija Roos) </li><li><a href="https://github.com/highlightjs/vue-plugin" target="_blank">@highlightjs/vue-plugin</a>, provides a highlightjs component for use in your Vue.js 3 applications. (Released under the BSD-3-Clause license, by the highlight.js team) </li><li><a href="https://github.com/microsoft/rushstack/tree/main/eslint/eslint-patch" target="_blank">@rushstack/eslint-patch</a>, a patch that improves how ESLint loads plugins when working in a monorepo with a reusable toolchain. (Released under the MIT License, by Microsoft) </li><li><a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank">@types/jsdom, @types/node</a>, the repository for high quality TypeScript type definitions. (Released under the MIT License, by various contributors) </li><li><a href="https://github.com/vitejs/vite" target="_blank">vite, vitest, @vitejs/plugin-vue</a>, next Generation Frontend Tooling. (Released under the MIT License, by the vite team) </li><li><a href="https://github.com/eslint/eslint" target="_blank">eslint</a>, a tool for identifying and reporting on patterns found in ECMAScript/JavaScript code. (Released under the MIT License, by the eslint team) </li><li><a href="https://github.com/jsdom/jsdom" target="_blank">jsdom</a>, a pure-JavaScript implementation of many web standards. (Released under the MIT License, by the jsdom team) </li><li><a href="https://github.com/mysticatea/npm-run-all" target="_blank">npm-run-all</a>, a CLI tool to run multiple npm-scripts in parallel or sequential. (Released under the MIT License, by Toru Nagashima) </li><li><a href="https://github.com/prettier/prettier" target="_blank">prettier</a>, an opinionated Code Formatter. (Released under the MIT License, by the prettier team) </li><li><a href="https://github.com/Microsoft/TypeScript" target="_blank">typescript</a>, a language for application-scale JavaScript. (Released under the Apache-2.0 license, by Microsoft) </li><li><a href="https://github.com/johnsoncodehk/volar" target="_blank">vue-tsc</a>, high-performance tooling for Vue. (Released under the MIT License, by Johnson Chu) </li><li><a href="https://vueuse.org/" target="_blank">VueUse</a>, a Collection of essential Vue Composition Utilities (Released under the MIT License, by the VueUse team) </li><li><a href="https://github.com/Wikiki/bulma-slider" target="_blank">bulma-slider</a>, Bulma&#39;s extension to display sliders (Released under the MIT License, by Wikiki) </li></ul><p>Initial code is taken from</p><ul><li><a href="https://github.com/candeogi/peaks-vue-demo" target="_blank">peaks-vue-demo</a>, by Giovanni Candeo (MIT-licensed) </li><li><a href="https://github.com/thom4parisot/vue-waveform-template" target="_blank">vue-waveform-template</a>, by Thomas Parisot (MIT-licensed) </li></ul>',4);function xm(e,t){return Em}const Am=oi(km,[["render",xm]]),Pm={},Im={class:"columns"},Mm=m("div",{class:"column"},[m("p",null,[ce(" Vue-peaks offers it's own properties for customization. Plus, you can configure the underlying peaks.js instance via the options property (of type "),m("span",{class:"code"},"PeaksOptions"),ce("). ")]),m("p",null,[ce(" Read more about each property directly in the "),m("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaks.vue#L9"},"source code comments"),ce(". ")])],-1),Om={class:"column"};function Dm(e,t){const i=Dt("highlightjs");return Ee(),Le("div",Im,[Mm,m("div",Om,[ne(i,{language:"vue-typescript",code:`src?: string | undefined;
video?: boolean | undefined;
zoomviewElementId?: string | undefined;
zoomviewElement?: HTMLDivElement | undefined;
overviewElementId?: string | undefined;
overviewElement?: HTMLDivElement | undefined;
mediaElementId?: string | undefined;
mediaElement?: HTMLMediaElement | undefined;
options?: PeaksOptions | undefined;`})])])}const Lm=oi(Pm,[["render",Dm]]),Ft=e=>(Kr("data-v-b5403f72"),e=e(),Yr(),e),Rm=ai('<section class="hero is-light" data-v-b5403f72><div class="hero-body has-text-centered" data-v-b5403f72><img alt="Vue logo" class="logo" src="'+zd+'" width="125" height="125" data-v-b5403f72><h1 class="title is-1" data-v-b5403f72>vue-peaks</h1><h2 class="subtitle is-3" data-v-b5403f72> A lightweight Vue wrapper around the <a target="_blank" href="https://github.com/bbc/peaks.js/" data-v-b5403f72>bbc/peaks.js</a> audio waveform UI component. </h2></div></section>',1),Fm={class:"section"},Nm={class:"no-container"},Wm={class:"columns"},Bm=ai('<div class="column is-2" data-v-b5403f72><aside class="is-medium menu" data-v-b5403f72><p class="menu-label" data-v-b5403f72>Topics</p><ul class="menu-list" data-v-b5403f72><li data-v-b5403f72><a href="#basic-examples" data-v-b5403f72> Basic examples</a></li><li data-v-b5403f72><a href="#available-properties" data-v-b5403f72> Properties</a></li><li data-v-b5403f72><a href="#setting-styles" data-v-b5403f72>Setting styles</a></li><li data-v-b5403f72><a href="#using-slots" data-v-b5403f72>Using slots</a></li><li data-v-b5403f72><a href="#using-options" data-v-b5403f72>Options</a></li><li data-v-b5403f72><a href="#accessing-instance" data-v-b5403f72>Accessing the instance</a></li><li data-v-b5403f72><a href="#using-reactivity" data-v-b5403f72>Using reactivity</a></li><li data-v-b5403f72><a href="#player-widget" data-v-b5403f72>A widget</a></li><li data-v-b5403f72><a href="#using-video" data-v-b5403f72>Using video</a></li><li data-v-b5403f72><a href="#credits" data-v-b5403f72>Credits</a></li></ul></aside></div>',1),Gm={class:"column is-10"},Um={class:"content"},Hm={class:"example"},Vm=Ft(()=>m("h3",{id:"basic-examples",class:"title is-3"}," Basic examples ",-1)),zm={class:"example"},$m=Ft(()=>m("h3",{id:"available-properties",class:"title is-3"}," Available properties ",-1)),Xm={class:"example"},jm=Ft(()=>m("h3",{id:"setting-styles",class:"title is-3"}," Setting styles ",-1)),Km={class:"example"},Ym=Ft(()=>m("h3",{id:"using-slots",class:"title is-3"}," Using slots for custom views ",-1)),Zm={class:"example"},qm=Ft(()=>m("h3",{id:"using-options",class:"title is-3"}," Using peaks.js configuration options ",-1)),Jm={class:"example"},Qm=Ft(()=>m("h3",{id:"accessing-instance",class:"title is-3"}," Accessing the peaks.js instance ",-1)),ev=Ft(()=>m("h3",{id:"using-reactivity",class:"title is-3"}," Using reactivity ",-1)),tv={class:"example"},iv=Ft(()=>m("h3",{id:"player-widget",class:"title is-3"}," A waveform player widget ",-1)),nv={class:"example"},sv=Ft(()=>m("h3",{id:"using-video",class:"title is-3"}," Using video ",-1)),rv={class:"example"},av=Ft(()=>m("h3",{id:"credits",class:"title is-3"}," Credits ",-1)),ov={class:"example"},lv=ai('<footer class="footer" data-v-b5403f72><section class="section" data-v-b5403f72><div class="container has-text-centered" data-v-b5403f72><p data-v-b5403f72><a href="https://github.com/suterma/vue-peaks" data-v-b5403f72>vue-peaks</a> is created with love by <a href="https://marcelsuter.ch" data-v-b5403f72>Marcel Suter</a> for the <a href="http://replayer.app" data-v-b5403f72>Replayer</a> project. </p></div></section></footer>',1),hv=Tt({__name:"App",setup(e){return(t,i)=>(Ee(),Le(Qe,null,[Rm,m("section",Fm,[m("div",Nm,[m("div",Wm,[Bm,m("div",Gm,[m("div",Um,[m("article",Hm,[ne(Tm)]),Vm,m("article",zm,[ne(rp)]),$m,m("article",Xm,[ne(Lm)]),jm,m("article",Km,[ne(Zd)]),Ym,m("article",Zm,[ne(mm)]),qm,m("article",Jm,[ne(Hp)]),Qm,m("article",null,[ne(O_)]),ev,m("article",tv,[ne(nm)]),iv,m("article",nv,[ne(k_)]),sv,m("article",rv,[ne(Lp)]),av,m("article",ov,[ne(Am)])])])])])]),lv],64))}});const cv=oi(hv,[["__scopeId","data-v-b5403f72"]]);function th(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const i=e[t],n=typeof i;(n==="object"||n==="function")&&!Object.isFrozen(i)&&th(i)}),e}class wo{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function ih(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function qt(e,...t){const i=Object.create(null);for(const n in e)i[n]=e[n];return t.forEach(function(n){for(const s in n)i[s]=n[s]}),i}const dv="</span>",So=e=>!!e.scope,uv=(e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const i=e.split(".");return[`${t}${i.shift()}`,...i.map((n,s)=>`${n}${"_".repeat(s+1)}`)].join(" ")}return`${t}${e}`};class fv{constructor(t,i){this.buffer="",this.classPrefix=i.classPrefix,t.walk(this)}addText(t){this.buffer+=ih(t)}openNode(t){if(!So(t))return;const i=uv(t.scope,{prefix:this.classPrefix});this.span(i)}closeNode(t){!So(t)||(this.buffer+=dv)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const Co=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class ca{constructor(){this.rootNode=Co(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const i=Co({scope:t});this.add(i),this.stack.push(i)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,i){return typeof i=="string"?t.addText(i):i.children&&(t.openNode(i),i.children.forEach(n=>this._walk(t,n)),t.closeNode(i)),t}static _collapse(t){typeof t!="string"&&(!t.children||(t.children.every(i=>typeof i=="string")?t.children=[t.children.join("")]:t.children.forEach(i=>{ca._collapse(i)})))}}class gv extends ca{constructor(t){super(),this.options=t}addText(t){t!==""&&this.add(t)}startScope(t){this.openNode(t)}endScope(){this.closeNode()}__addSublanguage(t,i){const n=t.root;i&&(n.scope=`language:${i}`),this.add(n)}toHTML(){return new fv(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function xn(e){return e?typeof e=="string"?e:e.source:null}function nh(e){return Ri("(?=",e,")")}function pv(e){return Ri("(?:",e,")*")}function _v(e){return Ri("(?:",e,")?")}function Ri(...e){return e.map(i=>xn(i)).join("")}function mv(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function da(...e){return"("+(mv(e).capture?"":"?:")+e.map(n=>xn(n)).join("|")+")"}function sh(e){return new RegExp(e.toString()+"|").exec("").length-1}function vv(e,t){const i=e&&e.exec(t);return i&&i.index===0}const yv=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function ua(e,{joinWith:t}){let i=0;return e.map(n=>{i+=1;const s=i;let r=xn(n),a="";for(;r.length>0;){const o=yv.exec(r);if(!o){a+=r;break}a+=r.substring(0,o.index),r=r.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?a+="\\"+String(Number(o[1])+s):(a+=o[0],o[0]==="("&&i++)}return a}).map(n=>`(${n})`).join(t)}const bv=/\b\B/,rh="[a-zA-Z]\\w*",fa="[a-zA-Z_]\\w*",ah="\\b\\d+(\\.\\d+)?",oh="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",lh="\\b(0b[01]+)",wv="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Sv=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=Ri(t,/.*\b/,e.binary,/\b.*/)),qt({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(i,n)=>{i.index!==0&&n.ignoreMatch()}},e)},An={begin:"\\\\[\\s\\S]",relevance:0},Cv={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[An]},Tv={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[An]},kv={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Qs=function(e,t,i={}){const n=qt({scope:"comment",begin:e,end:t,contains:[]},i);n.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=da("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return n.contains.push({begin:Ri(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),n},Ev=Qs("//","$"),xv=Qs("/\\*","\\*/"),Av=Qs("#","$"),Pv={scope:"number",begin:ah,relevance:0},Iv={scope:"number",begin:oh,relevance:0},Mv={scope:"number",begin:lh,relevance:0},Ov={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[An,{begin:/\[/,end:/\]/,relevance:0,contains:[An]}]}]},Dv={scope:"title",begin:rh,relevance:0},Lv={scope:"title",begin:fa,relevance:0},Rv={begin:"\\.\\s*"+fa,relevance:0},Fv=function(e){return Object.assign(e,{"on:begin":(t,i)=>{i.data._beginMatch=t[1]},"on:end":(t,i)=>{i.data._beginMatch!==t[1]&&i.ignoreMatch()}})};var ts=Object.freeze({__proto__:null,MATCH_NOTHING_RE:bv,IDENT_RE:rh,UNDERSCORE_IDENT_RE:fa,NUMBER_RE:ah,C_NUMBER_RE:oh,BINARY_NUMBER_RE:lh,RE_STARTERS_RE:wv,SHEBANG:Sv,BACKSLASH_ESCAPE:An,APOS_STRING_MODE:Cv,QUOTE_STRING_MODE:Tv,PHRASAL_WORDS_MODE:kv,COMMENT:Qs,C_LINE_COMMENT_MODE:Ev,C_BLOCK_COMMENT_MODE:xv,HASH_COMMENT_MODE:Av,NUMBER_MODE:Pv,C_NUMBER_MODE:Iv,BINARY_NUMBER_MODE:Mv,REGEXP_MODE:Ov,TITLE_MODE:Dv,UNDERSCORE_TITLE_MODE:Lv,METHOD_GUARD:Rv,END_SAME_AS_BEGIN:Fv});function Nv(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function Wv(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function Bv(e,t){!t||!e.beginKeywords||(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=Nv,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function Gv(e,t){!Array.isArray(e.illegal)||(e.illegal=da(...e.illegal))}function Uv(e,t){if(!!e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function Hv(e,t){e.relevance===void 0&&(e.relevance=1)}const Vv=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const i=Object.assign({},e);Object.keys(e).forEach(n=>{delete e[n]}),e.keywords=i.keywords,e.begin=Ri(i.beforeMatch,nh(i.begin)),e.starts={relevance:0,contains:[Object.assign(i,{endsParent:!0})]},e.relevance=0,delete i.beforeMatch},zv=["of","and","for","in","not","or","if","then","parent","list","value"],$v="keyword";function hh(e,t,i=$v){const n=Object.create(null);return typeof e=="string"?s(i,e.split(" ")):Array.isArray(e)?s(i,e):Object.keys(e).forEach(function(r){Object.assign(n,hh(e[r],t,r))}),n;function s(r,a){t&&(a=a.map(o=>o.toLowerCase())),a.forEach(function(o){const l=o.split("|");n[l[0]]=[r,Xv(l[0],l[1])]})}}function Xv(e,t){return t?Number(t):jv(e)?0:1}function jv(e){return zv.includes(e.toLowerCase())}const To={},Ei=e=>{console.error(e)},ko=(e,...t)=>{console.log(`WARN: ${e}`,...t)},Gi=(e,t)=>{To[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),To[`${e}/${t}`]=!0)},Cs=new Error;function ch(e,t,{key:i}){let n=0;const s=e[i],r={},a={};for(let o=1;o<=t.length;o++)a[o+n]=s[o],r[o+n]=!0,n+=sh(t[o-1]);e[i]=a,e[i]._emit=r,e[i]._multi=!0}function Kv(e){if(!!Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw Ei("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Cs;if(typeof e.beginScope!="object"||e.beginScope===null)throw Ei("beginScope must be object"),Cs;ch(e,e.begin,{key:"beginScope"}),e.begin=ua(e.begin,{joinWith:""})}}function Yv(e){if(!!Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw Ei("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Cs;if(typeof e.endScope!="object"||e.endScope===null)throw Ei("endScope must be object"),Cs;ch(e,e.end,{key:"endScope"}),e.end=ua(e.end,{joinWith:""})}}function Zv(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function qv(e){Zv(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),Kv(e),Yv(e)}function Jv(e){function t(a,o){return new RegExp(xn(a),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(o?"g":""))}class i{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,o]),this.matchAt+=sh(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(l=>l[1]);this.matcherRe=t(ua(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(o);if(!l)return null;const h=l.findIndex((f,y)=>y>0&&f!==void 0),d=this.matchIndexes[h];return l.splice(0,h),Object.assign(l,d)}}class n{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const l=new i;return this.rules.slice(o).forEach(([h,d])=>l.addRule(h,d)),l.compile(),this.multiRegexes[o]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,l){this.rules.push([o,l]),l.type==="begin"&&this.count++}exec(o){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let h=l.exec(o);if(this.resumingScanAtSamePosition()&&!(h&&h.index===this.lastIndex)){const d=this.getMatcher(0);d.lastIndex=this.lastIndex+1,h=d.exec(o)}return h&&(this.regexIndex+=h.position+1,this.regexIndex===this.count&&this.considerAll()),h}}function s(a){const o=new n;return a.contains.forEach(l=>o.addRule(l.begin,{rule:l,type:"begin"})),a.terminatorEnd&&o.addRule(a.terminatorEnd,{type:"end"}),a.illegal&&o.addRule(a.illegal,{type:"illegal"}),o}function r(a,o){const l=a;if(a.isCompiled)return l;[Wv,Uv,qv,Vv].forEach(d=>d(a,o)),e.compilerExtensions.forEach(d=>d(a,o)),a.__beforeBegin=null,[Bv,Gv,Hv].forEach(d=>d(a,o)),a.isCompiled=!0;let h=null;return typeof a.keywords=="object"&&a.keywords.$pattern&&(a.keywords=Object.assign({},a.keywords),h=a.keywords.$pattern,delete a.keywords.$pattern),h=h||/\w+/,a.keywords&&(a.keywords=hh(a.keywords,e.case_insensitive)),l.keywordPatternRe=t(h,!0),o&&(a.begin||(a.begin=/\B|\b/),l.beginRe=t(l.begin),!a.end&&!a.endsWithParent&&(a.end=/\B|\b/),a.end&&(l.endRe=t(l.end)),l.terminatorEnd=xn(l.end)||"",a.endsWithParent&&o.terminatorEnd&&(l.terminatorEnd+=(a.end?"|":"")+o.terminatorEnd)),a.illegal&&(l.illegalRe=t(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(d){return Qv(d==="self"?a:d)})),a.contains.forEach(function(d){r(d,l)}),a.starts&&r(a.starts,o),l.matcher=s(l),l}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=qt(e.classNameAliases||{}),r(e)}function dh(e){return e?e.endsWithParent||dh(e.starts):!1}function Qv(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return qt(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:dh(e)?qt(e,{starts:e.starts?qt(e.starts):null}):Object.isFrozen(e)?qt(e):e}var ey="11.8.0";class ty extends Error{constructor(t,i){super(t),this.name="HTMLInjectionError",this.html=i}}const dr=ih,Eo=qt,xo=Symbol("nomatch"),iy=7,uh=function(e){const t=Object.create(null),i=Object.create(null),n=[];let s=!0;const r="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:gv};function l(O){return o.noHighlightRe.test(O)}function h(O){let R=O.className+" ";R+=O.parentNode?O.parentNode.className:"";const X=o.languageDetectRe.exec(R);if(X){const ie=B(X[1]);return ie||(ko(r.replace("{}",X[1])),ko("Falling back to no-highlight mode for this block.",O)),ie?X[1]:"no-highlight"}return R.split(/\s+/).find(ie=>l(ie)||B(ie))}function d(O,R,X){let ie="",ee="";typeof R=="object"?(ie=O,X=R.ignoreIllegals,ee=R.language):(Gi("10.7.0","highlight(lang, code, ...args) has been deprecated."),Gi("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ee=O,ie=R),X===void 0&&(X=!0);const ue={code:ie,language:ee};le("before:highlight",ue);const we=ue.result?ue.result:f(ue.language,ue.code,X);return we.code=ue.code,le("after:highlight",we),we}function f(O,R,X,ie){const ee=Object.create(null);function ue(F,U){return F.keywords[U]}function we(){if(!I.keywords){L.addText($);return}let F=0;I.keywordPatternRe.lastIndex=0;let U=I.keywordPatternRe.exec($),Q="";for(;U;){Q+=$.substring(F,U.index);const fe=D.case_insensitive?U[0].toLowerCase():U[0],De=ue(I,fe);if(De){const[dt,gi]=De;if(L.addText(Q),Q="",ee[fe]=(ee[fe]||0)+1,ee[fe]<=iy&&(Z+=gi),dt.startsWith("_"))Q+=U[0];else{const Gn=D.classNameAliases[dt]||dt;me(U[0],Gn)}}else Q+=U[0];F=I.keywordPatternRe.lastIndex,U=I.keywordPatternRe.exec($)}Q+=$.substring(F),L.addText(Q)}function Oe(){if($==="")return;let F=null;if(typeof I.subLanguage=="string"){if(!t[I.subLanguage]){L.addText($);return}F=f(I.subLanguage,$,!0,z[I.subLanguage]),z[I.subLanguage]=F._top}else F=p($,I.subLanguage.length?I.subLanguage:null);I.relevance>0&&(Z+=F.relevance),L.__addSublanguage(F._emitter,F.language)}function Pe(){I.subLanguage!=null?Oe():we(),$=""}function me(F,U){F!==""&&(L.startScope(U),L.addText(F),L.endScope())}function T(F,U){let Q=1;const fe=U.length-1;for(;Q<=fe;){if(!F._emit[Q]){Q++;continue}const De=D.classNameAliases[F[Q]]||F[Q],dt=U[Q];De?me(dt,De):($=dt,we(),$=""),Q++}}function G(F,U){return F.scope&&typeof F.scope=="string"&&L.openNode(D.classNameAliases[F.scope]||F.scope),F.beginScope&&(F.beginScope._wrap?(me($,D.classNameAliases[F.beginScope._wrap]||F.beginScope._wrap),$=""):F.beginScope._multi&&(T(F.beginScope,U),$="")),I=Object.create(F,{parent:{value:I}}),I}function Y(F,U,Q){let fe=vv(F.endRe,Q);if(fe){if(F["on:end"]){const De=new wo(F);F["on:end"](U,De),De.isMatchIgnored&&(fe=!1)}if(fe){for(;F.endsParent&&F.parent;)F=F.parent;return F}}if(F.endsWithParent)return Y(F.parent,U,Q)}function Te(F){return I.matcher.regexIndex===0?($+=F[0],1):(pe=!0,0)}function ve(F){const U=F[0],Q=F.rule,fe=new wo(Q),De=[Q.__beforeBegin,Q["on:begin"]];for(const dt of De)if(!!dt&&(dt(F,fe),fe.isMatchIgnored))return Te(U);return Q.skip?$+=U:(Q.excludeBegin&&($+=U),Pe(),!Q.returnBegin&&!Q.excludeBegin&&($=U)),G(Q,F),Q.returnBegin?0:U.length}function g(F){const U=F[0],Q=R.substring(F.index),fe=Y(I,F,Q);if(!fe)return xo;const De=I;I.endScope&&I.endScope._wrap?(Pe(),me(U,I.endScope._wrap)):I.endScope&&I.endScope._multi?(Pe(),T(I.endScope,F)):De.skip?$+=U:(De.returnEnd||De.excludeEnd||($+=U),Pe(),De.excludeEnd&&($=U));do I.scope&&L.closeNode(),!I.skip&&!I.subLanguage&&(Z+=I.relevance),I=I.parent;while(I!==fe.parent);return fe.starts&&G(fe.starts,F),De.returnEnd?0:U.length}function w(){const F=[];for(let U=I;U!==D;U=U.parent)U.scope&&F.unshift(U.scope);F.forEach(U=>L.openNode(U))}let x={};function P(F,U){const Q=U&&U[0];if($+=F,Q==null)return Pe(),0;if(x.type==="begin"&&U.type==="end"&&x.index===U.index&&Q===""){if($+=R.slice(U.index,U.index+1),!s){const fe=new Error(`0 width match regex (${O})`);throw fe.languageName=O,fe.badRule=x.rule,fe}return 1}if(x=U,U.type==="begin")return ve(U);if(U.type==="illegal"&&!X){const fe=new Error('Illegal lexeme "'+Q+'" for mode "'+(I.scope||"<unnamed>")+'"');throw fe.mode=I,fe}else if(U.type==="end"){const fe=g(U);if(fe!==xo)return fe}if(U.type==="illegal"&&Q==="")return 1;if(oe>1e5&&oe>U.index*3)throw new Error("potential infinite loop, way more iterations than matches");return $+=Q,Q.length}const D=B(O);if(!D)throw Ei(r.replace("{}",O)),new Error('Unknown language: "'+O+'"');const W=Jv(D);let V="",I=ie||W;const z={},L=new o.__emitter(o);w();let $="",Z=0,J=0,oe=0,pe=!1;try{if(D.__emitTokens)D.__emitTokens(R,L);else{for(I.matcher.considerAll();;){oe++,pe?pe=!1:I.matcher.considerAll(),I.matcher.lastIndex=J;const F=I.matcher.exec(R);if(!F)break;const U=R.substring(J,F.index),Q=P(U,F);J=F.index+Q}P(R.substring(J))}return L.finalize(),V=L.toHTML(),{language:O,value:V,relevance:Z,illegal:!1,_emitter:L,_top:I}}catch(F){if(F.message&&F.message.includes("Illegal"))return{language:O,value:dr(R),illegal:!0,relevance:0,_illegalBy:{message:F.message,index:J,context:R.slice(J-100,J+100),mode:F.mode,resultSoFar:V},_emitter:L};if(s)return{language:O,value:dr(R),illegal:!1,relevance:0,errorRaised:F,_emitter:L,_top:I};throw F}}function y(O){const R={value:dr(O),illegal:!1,relevance:0,_top:a,_emitter:new o.__emitter(o)};return R._emitter.addText(O),R}function p(O,R){R=R||o.languages||Object.keys(t);const X=y(O),ie=R.filter(B).filter(N).map(Pe=>f(Pe,O,!1));ie.unshift(X);const ee=ie.sort((Pe,me)=>{if(Pe.relevance!==me.relevance)return me.relevance-Pe.relevance;if(Pe.language&&me.language){if(B(Pe.language).supersetOf===me.language)return 1;if(B(me.language).supersetOf===Pe.language)return-1}return 0}),[ue,we]=ee,Oe=ue;return Oe.secondBest=we,Oe}function _(O,R,X){const ie=R&&i[R]||X;O.classList.add("hljs"),O.classList.add(`language-${ie}`)}function b(O){let R=null;const X=h(O);if(l(X))return;if(le("before:highlightElement",{el:O,language:X}),O.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(O)),o.throwUnescapedHTML))throw new ty("One of your code blocks includes unescaped HTML.",O.innerHTML);R=O;const ie=R.textContent,ee=X?d(ie,{language:X,ignoreIllegals:!0}):p(ie);O.innerHTML=ee.value,_(O,X,ee.language),O.result={language:ee.language,re:ee.relevance,relevance:ee.relevance},ee.secondBest&&(O.secondBest={language:ee.secondBest.language,relevance:ee.secondBest.relevance}),le("after:highlightElement",{el:O,result:ee,text:ie})}function v(O){o=Eo(o,O)}const A=()=>{u(),Gi("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function k(){u(),Gi("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let c=!1;function u(){if(document.readyState==="loading"){c=!0;return}document.querySelectorAll(o.cssSelector).forEach(b)}function S(){c&&u()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",S,!1);function M(O,R){let X=null;try{X=R(e)}catch(ie){if(Ei("Language definition for '{}' could not be registered.".replace("{}",O)),s)Ei(ie);else throw ie;X=a}X.name||(X.name=O),t[O]=X,X.rawDefinition=R.bind(null,e),X.aliases&&E(X.aliases,{languageName:O})}function H(O){delete t[O];for(const R of Object.keys(i))i[R]===O&&delete i[R]}function C(){return Object.keys(t)}function B(O){return O=(O||"").toLowerCase(),t[O]||t[i[O]]}function E(O,{languageName:R}){typeof O=="string"&&(O=[O]),O.forEach(X=>{i[X.toLowerCase()]=R})}function N(O){const R=B(O);return R&&!R.disableAutodetect}function q(O){O["before:highlightBlock"]&&!O["before:highlightElement"]&&(O["before:highlightElement"]=R=>{O["before:highlightBlock"](Object.assign({block:R.el},R))}),O["after:highlightBlock"]&&!O["after:highlightElement"]&&(O["after:highlightElement"]=R=>{O["after:highlightBlock"](Object.assign({block:R.el},R))})}function j(O){q(O),n.push(O)}function te(O){const R=n.indexOf(O);R!==-1&&n.splice(R,1)}function le(O,R){const X=O;n.forEach(function(ie){ie[X]&&ie[X](R)})}function de(O){return Gi("10.7.0","highlightBlock will be removed entirely in v12.0"),Gi("10.7.0","Please use highlightElement now."),b(O)}Object.assign(e,{highlight:d,highlightAuto:p,highlightAll:u,highlightElement:b,highlightBlock:de,configure:v,initHighlighting:A,initHighlightingOnLoad:k,registerLanguage:M,unregisterLanguage:H,listLanguages:C,getLanguage:B,registerAliases:E,autoDetection:N,inherit:Eo,addPlugin:j,removePlugin:te}),e.debugMode=function(){s=!1},e.safeMode=function(){s=!0},e.versionString=ey,e.regex={concat:Ri,lookahead:nh,either:da,optional:_v,anyNumberOfTimes:pv};for(const O in ts)typeof ts[O]=="object"&&th(ts[O]);return Object.assign(e,ts),e},Ki=uh({});Ki.newInstance=()=>uh({});var ny=Ki;Ki.HighlightJS=Ki;Ki.default=Ki;const ei=ny,Ts="[A-Za-z$_][0-9A-Za-z$_]*",fh=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],gh=["true","false","null","undefined","NaN","Infinity"],ph=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],_h=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],mh=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],vh=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],yh=[].concat(mh,ph,_h);function sy(e){const t=e.regex,i=(R,{after:X})=>{const ie="</"+R[0].slice(1);return R.input.indexOf(ie,X)!==-1},n=Ts,s={begin:"<>",end:"</>"},r=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(R,X)=>{const ie=R[0].length+R.index,ee=R.input[ie];if(ee==="<"||ee===","){X.ignoreMatch();return}ee===">"&&(i(R,{after:ie})||X.ignoreMatch());let ue;const we=R.input.substring(ie);if(ue=we.match(/^\s*=/)){X.ignoreMatch();return}if((ue=we.match(/^\s+extends\s+/))&&ue.index===0){X.ignoreMatch();return}}},o={$pattern:Ts,keyword:fh,literal:gh,built_in:yh,"variable.language":vh},l="[0-9](_?[0-9])*",h=`\\.(${l})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${d})((${h})|\\.)?|(${h}))[eE][+-]?(${l})\\b`},{begin:`\\b(${d})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},y={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},p={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,y],subLanguage:"xml"}},_={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,y],subLanguage:"css"}},b={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,y],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,y]},k={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},c=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,_,b,v,{match:/\$\d+/},f];y.contains=c.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(c)});const u=[].concat(k,y.contains),S=u.concat([{begin:/\(/,end:/\)/,keywords:o,contains:["self"].concat(u)}]),M={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:S},H={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},C={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...ph,..._h]}},B={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},E={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[M],illegal:/%/},N={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function q(R){return t.concat("(?!",R.join("|"),")")}const j={match:t.concat(/\b/,q([...mh,"super","import"]),n,t.lookahead(/\(/)),className:"title.function",relevance:0},te={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},le={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},M]},de="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",O={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(de)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[M]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:S,CLASS_REFERENCE:C},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),B,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,_,b,v,k,{match:/\$\d+/},f,C,{className:"attr",begin:n+t.lookahead(":"),relevance:0},O,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[k,e.REGEXP_MODE,{className:"function",begin:de,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:S}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:r},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},E,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[M,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},te,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[M]},j,N,H,le,{match:/\$[(.]/}]}}function ry(e){const t=sy(e),i=Ts,n=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[t.exports.CLASS_REFERENCE]},r={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:n},contains:[t.exports.CLASS_REFERENCE]},a={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},o=["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"],l={$pattern:Ts,keyword:fh.concat(o),literal:gh,built_in:yh.concat(n),"variable.language":vh},h={className:"meta",begin:"@"+i},d=(y,p,_)=>{const b=y.contains.findIndex(v=>v.label===p);if(b===-1)throw new Error("can not find mode to replace");y.contains.splice(b,1,_)};Object.assign(t.keywords,l),t.exports.PARAMS_CONTAINS.push(h),t.contains=t.contains.concat([h,s,r]),d(t,"shebang",e.SHEBANG()),d(t,"use_strict",a);const f=t.contains.find(y=>y.label==="func.def");return f.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t}function bh(e){const t=e.regex,i=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),n=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},r={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},a=e.inherit(r,{begin:/\(/,end:/\)/}),o=e.inherit(e.APOS_STRING_MODE,{className:"string"}),l=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:n,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[r,l,o,a,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[r,a,l,o]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(i,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:i,relevance:0,starts:h}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(i,/>/))),contains:[{className:"name",begin:i,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function ay(e){const t=e.regex,i={},n={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[i]}]};Object.assign(i,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},n]});const s={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},r={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,i,s]};s.contains.push(a);const o={className:"",begin:/\\"/},l={className:"string",begin:/'/,end:/'/},h={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,i]},d=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],f=e.SHEBANG({binary:`(${d.join("|")})`,relevance:10}),y={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},p=["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],_=["true","false"],b={match:/(\/[a-z._-]+)+/},v=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],A=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias"],k=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],c=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:p,literal:_,built_in:[...v,...A,"set","shopt",...k,...c]},contains:[f,e.SHEBANG(),y,h,e.HASH_COMMENT_MODE,r,b,a,o,l,i]}}const oy=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),ly=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],hy=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],cy=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],dy=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],uy=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function fy(e){const t=e.regex,i=oy(e),n={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",r=/@-?\w[\w]*(-\w+)*/,a="[a-zA-Z-][a-zA-Z0-9_-]*",o=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[i.BLOCK_COMMENT,n,i.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+a,relevance:0},i.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+cy.join("|")+")"},{begin:":(:)?("+dy.join("|")+")"}]},i.CSS_VARIABLE,{className:"attribute",begin:"\\b("+uy.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[i.BLOCK_COMMENT,i.HEXCOLOR,i.IMPORTANT,i.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},i.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:r},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:hy.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,i.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+ly.join("|")+")\\b"}]}}var Ao=Tt({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(e){var t=Zo(e.language);hn(function(){return e.language},function(s){t.value=s});var i=Zt(function(){return e.autodetect||!t.value}),n=Zt(function(){return!i.value&&!ei.getLanguage(t.value)});return{className:Zt(function(){return n.value?"":"hljs "+t.value}),highlightedCode:Zt(function(){var s;if(n.value)return console.warn('The language "'+t.value+'" you specified could not be found.'),e.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(i.value){var r=ei.highlightAuto(e.code);return t.value=(s=r.language)!==null&&s!==void 0?s:"",r.value}return(r=ei.highlight(e.code,{language:t.value,ignoreIllegals:e.ignoreIllegals})).value})}},render:function(){return Ba("pre",{},[Ba("code",{class:this.className,innerHTML:this.highlightedCode})])}}),gy={install:function(e){e.component("highlightjs",Ao)},component:Ao};ei.registerLanguage("vue-typescript",ry);ei.registerLanguage("vue-template",bh);ei.registerLanguage("vue-sfc",bh);ei.registerLanguage("bash",ay);ei.registerLanguage("css",fy);Hd(cv).use(gy).mount("#app");
//# sourceMappingURL=index.06d8f6ff.js.map
