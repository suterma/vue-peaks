(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function vr(t,e){const i=Object.create(null),n=t.split(",");for(let s=0;s<n.length;s++)i[n[s]]=!0;return e?s=>!!i[s.toLowerCase()]:s=>!!i[s]}const _e={},Ai=[],lt=()=>{},dh=()=>!1,uh=/^on[^a-z]/,vs=t=>uh.test(t),yr=t=>t.startsWith("onUpdate:"),Ie=Object.assign,br=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},fh=Object.prototype.hasOwnProperty,re=(t,e)=>fh.call(t,e),$=Array.isArray,Pi=t=>Tn(t)==="[object Map]",ys=t=>Tn(t)==="[object Set]",qr=t=>Tn(t)==="[object Date]",ee=t=>typeof t=="function",Me=t=>typeof t=="string",pn=t=>typeof t=="symbol",me=t=>t!==null&&typeof t=="object",fo=t=>me(t)&&ee(t.then)&&ee(t.catch),po=Object.prototype.toString,Tn=t=>po.call(t),ph=t=>Tn(t).slice(8,-1),go=t=>Tn(t)==="[object Object]",wr=t=>Me(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Kn=vr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bs=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},gh=/-(\w)/g,bt=bs(t=>t.replace(gh,(e,i)=>i?i.toUpperCase():"")),_h=/\B([A-Z])/g,Gi=bs(t=>t.replace(_h,"-$1").toLowerCase()),ws=bs(t=>t.charAt(0).toUpperCase()+t.slice(1)),Bs=bs(t=>t?`on${ws(t)}`:""),gn=(t,e)=>!Object.is(t,e),Zn=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},ss=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},rs=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Jr;const tr=()=>Jr||(Jr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Cr(t){if($(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],s=Me(n)?bh(n):Cr(n);if(s)for(const r in s)e[r]=s[r]}return e}else{if(Me(t))return t;if(me(t))return t}}const mh=/;(?![^(]*\))/g,vh=/:([^]+)/,yh=/\/\*[^]*?\*\//g;function bh(t){const e={};return t.replace(yh,"").split(mh).forEach(i=>{if(i){const n=i.split(vh);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Sr(t){let e="";if(Me(t))e=t;else if($(t))for(let i=0;i<t.length;i++){const n=Sr(t[i]);n&&(e+=n+" ")}else if(me(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const wh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ch=vr(wh);function _o(t){return!!t||t===""}function Sh(t,e){if(t.length!==e.length)return!1;let i=!0;for(let n=0;i&&n<t.length;n++)i=Cs(t[n],e[n]);return i}function Cs(t,e){if(t===e)return!0;let i=qr(t),n=qr(e);if(i||n)return i&&n?t.getTime()===e.getTime():!1;if(i=pn(t),n=pn(e),i||n)return t===e;if(i=$(t),n=$(e),i||n)return i&&n?Sh(t,e):!1;if(i=me(t),n=me(e),i||n){if(!i||!n)return!1;const s=Object.keys(t).length,r=Object.keys(e).length;if(s!==r)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!Cs(t[a],e[a]))return!1}}return String(t)===String(e)}function Th(t,e){return t.findIndex(i=>Cs(i,e))}const Tr=t=>Me(t)?t:t==null?"":$(t)||me(t)&&(t.toString===po||!ee(t.toString))?JSON.stringify(t,mo,2):String(t),mo=(t,e)=>e&&e.__v_isRef?mo(t,e.value):Pi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,s])=>(i[`${n} =>`]=s,i),{})}:ys(e)?{[`Set(${e.size})`]:[...e.values()]}:me(e)&&!$(e)&&!go(e)?String(e):e;let rt;class xh{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=rt,!e&&rt&&(this.index=(rt.scopes||(rt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const i=rt;try{return rt=this,e()}finally{rt=i}}}on(){rt=this}off(){rt=this.parent}stop(e){if(this._active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function kh(t,e=rt){e&&e.active&&e.effects.push(t)}function Eh(){return rt}const xr=t=>{const e=new Set(t);return e.w=0,e.n=0,e},vo=t=>(t.w&Wt)>0,yo=t=>(t.n&Wt)>0,Ah=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Wt},Ph=t=>{const{deps:e}=t;if(e.length){let i=0;for(let n=0;n<e.length;n++){const s=e[n];vo(s)&&!yo(s)?s.delete(t):e[i++]=s,s.w&=~Wt,s.n&=~Wt}e.length=i}},ir=new WeakMap;let Ji=0,Wt=1;const nr=30;let at;const si=Symbol(""),sr=Symbol("");class kr{constructor(e,i=null,n){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,kh(this,n)}run(){if(!this.active)return this.fn();let e=at,i=Ht;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=at,at=this,Ht=!0,Wt=1<<++Ji,Ji<=nr?Ah(this):Qr(this),this.fn()}finally{Ji<=nr&&Ph(this),Wt=1<<--Ji,at=this.parent,Ht=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){at===this?this.deferStop=!0:this.active&&(Qr(this),this.onStop&&this.onStop(),this.active=!1)}}function Qr(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let Ht=!0;const bo=[];function Wi(){bo.push(Ht),Ht=!1}function Bi(){const t=bo.pop();Ht=t===void 0?!0:t}function je(t,e,i){if(Ht&&at){let n=ir.get(t);n||ir.set(t,n=new Map);let s=n.get(i);s||n.set(i,s=xr()),wo(s)}}function wo(t,e){let i=!1;Ji<=nr?yo(t)||(t.n|=Wt,i=!vo(t)):i=!t.has(at),i&&(t.add(at),at.deps.push(t))}function kt(t,e,i,n,s,r){const a=ir.get(t);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(i==="length"&&$(t)){const l=Number(n);a.forEach((h,c)=>{(c==="length"||c>=l)&&o.push(h)})}else switch(i!==void 0&&o.push(a.get(i)),e){case"add":$(t)?wr(i)&&o.push(a.get("length")):(o.push(a.get(si)),Pi(t)&&o.push(a.get(sr)));break;case"delete":$(t)||(o.push(a.get(si)),Pi(t)&&o.push(a.get(sr)));break;case"set":Pi(t)&&o.push(a.get(si));break}if(o.length===1)o[0]&&rr(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);rr(xr(l))}}function rr(t,e){const i=$(t)?t:[...t];for(const n of i)n.computed&&ea(n);for(const n of i)n.computed||ea(n)}function ea(t,e){(t!==at||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Ih=vr("__proto__,__v_isRef,__isVue"),Co=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(pn)),Mh=Er(),Lh=Er(!1,!0),Oh=Er(!0),ta=Rh();function Rh(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const n=he(this);for(let r=0,a=this.length;r<a;r++)je(n,"get",r+"");const s=n[e](...i);return s===-1||s===!1?n[e](...i.map(he)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){Wi();const n=he(this)[e].apply(this,i);return Bi(),n}}),t}function Dh(t){const e=he(this);return je(e,"has",t),e.hasOwnProperty(t)}function Er(t=!1,e=!1){return function(n,s,r){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&r===(t?e?qh:Eo:e?ko:xo).get(n))return n;const a=$(n);if(!t){if(a&&re(ta,s))return Reflect.get(ta,s,r);if(s==="hasOwnProperty")return Dh}const o=Reflect.get(n,s,r);return(pn(s)?Co.has(s):Ih(s))||(t||je(n,"get",s),e)?o:Fe(o)?a&&wr(s)?o:o.value:me(o)?t?Ao(o):hi(o):o}}const Nh=So(),Hh=So(!0);function So(t=!1){return function(i,n,s,r){let a=i[n];if(Ri(a)&&Fe(a)&&!Fe(s))return!1;if(!t&&(!as(s)&&!Ri(s)&&(a=he(a),s=he(s)),!$(i)&&Fe(a)&&!Fe(s)))return a.value=s,!0;const o=$(i)&&wr(n)?Number(n)<i.length:re(i,n),l=Reflect.set(i,n,s,r);return i===he(r)&&(o?gn(s,a)&&kt(i,"set",n,s):kt(i,"add",n,s)),l}}function Fh(t,e){const i=re(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&i&&kt(t,"delete",e,void 0),n}function Gh(t,e){const i=Reflect.has(t,e);return(!pn(e)||!Co.has(e))&&je(t,"has",e),i}function Wh(t){return je(t,"iterate",$(t)?"length":si),Reflect.ownKeys(t)}const To={get:Mh,set:Nh,deleteProperty:Fh,has:Gh,ownKeys:Wh},Bh={get:Oh,set(t,e){return!0},deleteProperty(t,e){return!0}},zh=Ie({},To,{get:Lh,set:Hh}),Ar=t=>t,Ss=t=>Reflect.getPrototypeOf(t);function Pn(t,e,i=!1,n=!1){t=t.__v_raw;const s=he(t),r=he(e);i||(e!==r&&je(s,"get",e),je(s,"get",r));const{has:a}=Ss(s),o=n?Ar:i?Mr:_n;if(a.call(s,e))return o(t.get(e));if(a.call(s,r))return o(t.get(r));t!==s&&t.get(e)}function In(t,e=!1){const i=this.__v_raw,n=he(i),s=he(t);return e||(t!==s&&je(n,"has",t),je(n,"has",s)),t===s?i.has(t):i.has(t)||i.has(s)}function Mn(t,e=!1){return t=t.__v_raw,!e&&je(he(t),"iterate",si),Reflect.get(t,"size",t)}function ia(t){t=he(t);const e=he(this);return Ss(e).has.call(e,t)||(e.add(t),kt(e,"add",t,t)),this}function na(t,e){e=he(e);const i=he(this),{has:n,get:s}=Ss(i);let r=n.call(i,t);r||(t=he(t),r=n.call(i,t));const a=s.call(i,t);return i.set(t,e),r?gn(e,a)&&kt(i,"set",t,e):kt(i,"add",t,e),this}function sa(t){const e=he(this),{has:i,get:n}=Ss(e);let s=i.call(e,t);s||(t=he(t),s=i.call(e,t)),n&&n.call(e,t);const r=e.delete(t);return s&&kt(e,"delete",t,void 0),r}function ra(){const t=he(this),e=t.size!==0,i=t.clear();return e&&kt(t,"clear",void 0,void 0),i}function Ln(t,e){return function(n,s){const r=this,a=r.__v_raw,o=he(a),l=e?Ar:t?Mr:_n;return!t&&je(o,"iterate",si),a.forEach((h,c)=>n.call(s,l(h),l(c),r))}}function On(t,e,i){return function(...n){const s=this.__v_raw,r=he(s),a=Pi(r),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,h=s[t](...n),c=i?Ar:e?Mr:_n;return!e&&je(r,"iterate",l?sr:si),{next(){const{value:d,done:f}=h.next();return f?{value:d,done:f}:{value:o?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Lt(t){return function(...e){return t==="delete"?!1:this}}function Uh(){const t={get(r){return Pn(this,r)},get size(){return Mn(this)},has:In,add:ia,set:na,delete:sa,clear:ra,forEach:Ln(!1,!1)},e={get(r){return Pn(this,r,!1,!0)},get size(){return Mn(this)},has:In,add:ia,set:na,delete:sa,clear:ra,forEach:Ln(!1,!0)},i={get(r){return Pn(this,r,!0)},get size(){return Mn(this,!0)},has(r){return In.call(this,r,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:Ln(!0,!1)},n={get(r){return Pn(this,r,!0,!0)},get size(){return Mn(this,!0)},has(r){return In.call(this,r,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:Ln(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=On(r,!1,!1),i[r]=On(r,!0,!1),e[r]=On(r,!1,!0),n[r]=On(r,!0,!0)}),[t,i,e,n]}const[Vh,Xh,Yh,$h]=Uh();function Pr(t,e){const i=e?t?$h:Yh:t?Xh:Vh;return(n,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(re(i,s)&&s in n?i:n,s,r)}const jh={get:Pr(!1,!1)},Kh={get:Pr(!1,!0)},Zh={get:Pr(!0,!1)},xo=new WeakMap,ko=new WeakMap,Eo=new WeakMap,qh=new WeakMap;function Jh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qh(t){return t.__v_skip||!Object.isExtensible(t)?0:Jh(ph(t))}function hi(t){return Ri(t)?t:Ir(t,!1,To,jh,xo)}function ec(t){return Ir(t,!1,zh,Kh,ko)}function Ao(t){return Ir(t,!0,Bh,Zh,Eo)}function Ir(t,e,i,n,s){if(!me(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const a=Qh(t);if(a===0)return t;const o=new Proxy(t,a===2?n:i);return s.set(t,o),o}function Ii(t){return Ri(t)?Ii(t.__v_raw):!!(t&&t.__v_isReactive)}function Ri(t){return!!(t&&t.__v_isReadonly)}function as(t){return!!(t&&t.__v_isShallow)}function Po(t){return Ii(t)||Ri(t)}function he(t){const e=t&&t.__v_raw;return e?he(e):t}function Io(t){return ss(t,"__v_skip",!0),t}const _n=t=>me(t)?hi(t):t,Mr=t=>me(t)?Ao(t):t;function Mo(t){Ht&&at&&(t=he(t),wo(t.dep||(t.dep=xr())))}function Lo(t,e){t=he(t);const i=t.dep;i&&rr(i)}function Fe(t){return!!(t&&t.__v_isRef===!0)}function tc(t){return Oo(t,!1)}function _t(t){return Oo(t,!0)}function Oo(t,e){return Fe(t)?t:new ic(t,e)}class ic{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:he(e),this._value=i?e:_n(e)}get value(){return Mo(this),this._value}set value(e){const i=this.__v_isShallow||as(e)||Ri(e);e=i?e:he(e),gn(e,this._rawValue)&&(this._rawValue=e,this._value=i?e:_n(e),Lo(this))}}function nc(t){return Fe(t)?t.value:t}const sc={get:(t,e,i)=>nc(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const s=t[e];return Fe(s)&&!Fe(i)?(s.value=i,!0):Reflect.set(t,e,i,n)}};function Ro(t){return Ii(t)?t:new Proxy(t,sc)}class rc{constructor(e,i,n,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new kr(e,()=>{this._dirty||(this._dirty=!0,Lo(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const e=he(this);return Mo(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function ac(t,e,i=!1){let n,s;const r=ee(t);return r?(n=t,s=lt):(n=t.get,s=t.set),new rc(n,s,r||!s,i)}function Ft(t,e,i,n){let s;try{s=n?t(...n):t()}catch(r){Ts(r,e,i)}return s}function ht(t,e,i,n){if(ee(t)){const r=Ft(t,e,i,n);return r&&fo(r)&&r.catch(a=>{Ts(a,e,i)}),r}const s=[];for(let r=0;r<t.length;r++)s.push(ht(t[r],e,i,n));return s}function Ts(t,e,i,n=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const a=e.proxy,o=i;for(;r;){const h=r.ec;if(h){for(let c=0;c<h.length;c++)if(h[c](t,a,o)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){Ft(l,null,10,[t,a,o]);return}}oc(t,i,s,n)}function oc(t,e,i,n=!0){console.error(t)}let mn=!1,ar=!1;const He=[];let vt=0;const Mi=[];let xt=null,ei=0;const Do=Promise.resolve();let Lr=null;function lc(t){const e=Lr||Do;return t?e.then(this?t.bind(this):t):e}function hc(t){let e=vt+1,i=He.length;for(;e<i;){const n=e+i>>>1;vn(He[n])<t?e=n+1:i=n}return e}function Or(t){(!He.length||!He.includes(t,mn&&t.allowRecurse?vt+1:vt))&&(t.id==null?He.push(t):He.splice(hc(t.id),0,t),No())}function No(){!mn&&!ar&&(ar=!0,Lr=Do.then(Fo))}function cc(t){const e=He.indexOf(t);e>vt&&He.splice(e,1)}function dc(t){$(t)?Mi.push(...t):(!xt||!xt.includes(t,t.allowRecurse?ei+1:ei))&&Mi.push(t),No()}function aa(t,e=mn?vt+1:0){for(;e<He.length;e++){const i=He[e];i&&i.pre&&(He.splice(e,1),e--,i())}}function Ho(t){if(Mi.length){const e=[...new Set(Mi)];if(Mi.length=0,xt){xt.push(...e);return}for(xt=e,xt.sort((i,n)=>vn(i)-vn(n)),ei=0;ei<xt.length;ei++)xt[ei]();xt=null,ei=0}}const vn=t=>t.id==null?1/0:t.id,uc=(t,e)=>{const i=vn(t)-vn(e);if(i===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function Fo(t){ar=!1,mn=!0,He.sort(uc);const e=lt;try{for(vt=0;vt<He.length;vt++){const i=He[vt];i&&i.active!==!1&&Ft(i,null,14)}}finally{vt=0,He.length=0,Ho(),mn=!1,Lr=null,(He.length||Mi.length)&&Fo()}}function fc(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||_e;let s=i;const r=e.startsWith("update:"),a=r&&e.slice(7);if(a&&a in n){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:d,trim:f}=n[c]||_e;f&&(s=i.map(v=>Me(v)?v.trim():v)),d&&(s=i.map(rs))}let o,l=n[o=Bs(e)]||n[o=Bs(bt(e))];!l&&r&&(l=n[o=Bs(Gi(e))]),l&&ht(l,t,6,s);const h=n[o+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,ht(h,t,6,s)}}function Go(t,e,i=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const r=t.emits;let a={},o=!1;if(!ee(t)){const l=h=>{const c=Go(h,e,!0);c&&(o=!0,Ie(a,c))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!o?(me(t)&&n.set(t,null),null):($(r)?r.forEach(l=>a[l]=null):Ie(a,r),me(t)&&n.set(t,a),a)}function xs(t,e){return!t||!vs(e)?!1:(e=e.slice(2).replace(/Once$/,""),re(t,e[0].toLowerCase()+e.slice(1))||re(t,Gi(e))||re(t,e))}let Ge=null,ks=null;function os(t){const e=Ge;return Ge=t,ks=t&&t.type.__scopeId||null,e}function Wo(t){ks=t}function Bo(){ks=null}function Ze(t,e=Ge,i){if(!e||t._n)return t;const n=(...s)=>{n._d&&ma(-1);const r=os(e);let a;try{a=t(...s)}finally{os(r),n._d&&ma(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function zs(t){const{type:e,vnode:i,proxy:n,withProxy:s,props:r,propsOptions:[a],slots:o,attrs:l,emit:h,render:c,renderCache:d,data:f,setupState:v,ctx:x,inheritAttrs:C}=t;let _,D;const w=os(t);try{if(i.shapeFlag&4){const L=s||n;_=mt(c.call(L,L,d,r,v,f,x)),D=l}else{const L=e;_=mt(L.length>1?L(r,{attrs:l,slots:o,emit:h}):L(r,null)),D=e.props?l:pc(l)}}catch(L){on.length=0,Ts(L,t,1),_=K(Bt)}let F=_;if(D&&C!==!1){const L=Object.keys(D),{shapeFlag:Z}=F;L.length&&Z&7&&(a&&L.some(yr)&&(D=gc(D,a)),F=Di(F,D))}return i.dirs&&(F=Di(F),F.dirs=F.dirs?F.dirs.concat(i.dirs):i.dirs),i.transition&&(F.transition=i.transition),_=F,os(w),_}const pc=t=>{let e;for(const i in t)(i==="class"||i==="style"||vs(i))&&((e||(e={}))[i]=t[i]);return e},gc=(t,e)=>{const i={};for(const n in t)(!yr(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function _c(t,e,i){const{props:n,children:s,component:r}=t,{props:a,children:o,patchFlag:l}=e,h=r.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?oa(n,a,h):!!a;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(a[f]!==n[f]&&!xs(h,f))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?oa(n,a,h):!0:!!a;return!1}function oa(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(e[r]!==t[r]&&!xs(i,r))return!0}return!1}function mc({vnode:t,parent:e},i){for(;e&&e.subTree===t;)(t=e.vnode).el=i,e=e.parent}const vc=t=>t.__isSuspense;function yc(t,e){e&&e.pendingBranch?$(t)?e.effects.push(...t):e.effects.push(t):dc(t)}const Rn={};function qn(t,e,i){return zo(t,e,i)}function zo(t,e,{immediate:i,deep:n,flush:s,onTrack:r,onTrigger:a}=_e){var o;const l=Eh()===((o=Oe)==null?void 0:o.scope)?Oe:null;let h,c=!1,d=!1;if(Fe(t)?(h=()=>t.value,c=as(t)):Ii(t)?(h=()=>t,n=!0):$(t)?(d=!0,c=t.some(L=>Ii(L)||as(L)),h=()=>t.map(L=>{if(Fe(L))return L.value;if(Ii(L))return ni(L);if(ee(L))return Ft(L,l,2)})):ee(t)?e?h=()=>Ft(t,l,2):h=()=>{if(!(l&&l.isUnmounted))return f&&f(),ht(t,l,3,[v])}:h=lt,e&&n){const L=h;h=()=>ni(L())}let f,v=L=>{f=w.onStop=()=>{Ft(L,l,4)}},x;if(bn)if(v=lt,e?i&&ht(e,l,3,[h(),d?[]:void 0,v]):h(),s==="sync"){const L=dd();x=L.__watcherHandles||(L.__watcherHandles=[])}else return lt;let C=d?new Array(t.length).fill(Rn):Rn;const _=()=>{if(!!w.active)if(e){const L=w.run();(n||c||(d?L.some((Z,ie)=>gn(Z,C[ie])):gn(L,C)))&&(f&&f(),ht(e,l,3,[L,C===Rn?void 0:d&&C[0]===Rn?[]:C,v]),C=L)}else w.run()};_.allowRecurse=!!e;let D;s==="sync"?D=_:s==="post"?D=()=>Ye(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),D=()=>Or(_));const w=new kr(h,D);e?i?_():C=w.run():s==="post"?Ye(w.run.bind(w),l&&l.suspense):w.run();const F=()=>{w.stop(),l&&l.scope&&br(l.scope.effects,w)};return x&&x.push(F),F}function bc(t,e,i){const n=this.proxy,s=Me(t)?t.includes(".")?Uo(n,t):()=>n[t]:t.bind(n,n);let r;ee(e)?r=e:(r=e.handler,i=e);const a=Oe;Ni(this);const o=zo(s,r.bind(n),i);return a?Ni(a):ri(),o}function Uo(t,e){const i=e.split(".");return()=>{let n=t;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}function ni(t,e){if(!me(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Fe(t))ni(t.value,e);else if($(t))for(let i=0;i<t.length;i++)ni(t[i],e);else if(ys(t)||Pi(t))t.forEach(i=>{ni(i,e)});else if(go(t))for(const i in t)ni(t[i],e);return t}function Vo(t,e){const i=Ge;if(i===null)return t;const n=Ms(i)||i.proxy,s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[a,o,l,h=_e]=e[r];a&&(ee(a)&&(a={mounted:a,updated:a}),a.deep&&ni(o),s.push({dir:a,instance:n,value:o,oldValue:void 0,arg:l,modifiers:h}))}return t}function qt(t,e,i,n){const s=t.dirs,r=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];r&&(o.oldValue=r[a].value);let l=o.dir[n];l&&(Wi(),ht(l,i,8,[t.el,o,t,e]),Bi())}}function wt(t,e){return ee(t)?(()=>Ie({name:t.name},e,{setup:t}))():t}const rn=t=>!!t.type.__asyncLoader,Xo=t=>t.type.__isKeepAlive;function wc(t,e){Yo(t,"a",e)}function Cc(t,e){Yo(t,"da",e)}function Yo(t,e,i=Oe){const n=t.__wdc||(t.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Es(e,n,i),i){let s=i.parent;for(;s&&s.parent;)Xo(s.parent.vnode)&&Sc(n,e,i,s),s=s.parent}}function Sc(t,e,i,n){const s=Es(e,t,n,!0);Ko(()=>{br(n[e],s)},i)}function Es(t,e,i=Oe,n=!1){if(i){const s=i[t]||(i[t]=[]),r=e.__weh||(e.__weh=(...a)=>{if(i.isUnmounted)return;Wi(),Ni(i);const o=ht(e,i,t,a);return ri(),Bi(),o});return n?s.unshift(r):s.push(r),r}}const Et=t=>(e,i=Oe)=>(!bn||t==="sp")&&Es(t,(...n)=>e(...n),i),Tc=Et("bm"),$o=Et("m"),xc=Et("bu"),kc=Et("u"),jo=Et("bum"),Ko=Et("um"),Ec=Et("sp"),Ac=Et("rtg"),Pc=Et("rtc");function Ic(t,e=Oe){Es("ec",t,e)}const Zo="components";function At(t,e){return Lc(Zo,t,!0,e)||t}const Mc=Symbol.for("v-ndc");function Lc(t,e,i=!0,n=!1){const s=Ge||Oe;if(s){const r=s.type;if(t===Zo){const o=ld(r,!1);if(o&&(o===e||o===bt(e)||o===ws(bt(e))))return r}const a=la(s[t]||r[t],e)||la(s.appContext[t],e);return!a&&n?r:a}}function la(t,e){return t&&(t[e]||t[bt(e)]||t[ws(bt(e))])}function Dn(t,e,i={},n,s){if(Ge.isCE||Ge.parent&&rn(Ge.parent)&&Ge.parent.isCE)return e!=="default"&&(i.name=e),K("slot",i,n&&n());let r=t[e];r&&r._c&&(r._d=!1),be();const a=r&&qo(r(i)),o=Ps($e,{key:i.key||a&&a.key||`_${e}`},a||(n?n():[]),a&&t._===1?64:-2);return!s&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),r&&r._c&&(r._d=!0),o}function qo(t){return t.some(e=>cs(e)?!(e.type===Bt||e.type===$e&&!qo(e.children)):!0)?t:null}const or=t=>t?ll(t)?Ms(t)||t.proxy:or(t.parent):null,an=Ie(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>or(t.parent),$root:t=>or(t.root),$emit:t=>t.emit,$options:t=>Rr(t),$forceUpdate:t=>t.f||(t.f=()=>Or(t.update)),$nextTick:t=>t.n||(t.n=lc.bind(t.proxy)),$watch:t=>bc.bind(t)}),Us=(t,e)=>t!==_e&&!t.__isScriptSetup&&re(t,e),Oc={get({_:t},e){const{ctx:i,setupState:n,data:s,props:r,accessCache:a,type:o,appContext:l}=t;let h;if(e[0]!=="$"){const v=a[e];if(v!==void 0)switch(v){case 1:return n[e];case 2:return s[e];case 4:return i[e];case 3:return r[e]}else{if(Us(n,e))return a[e]=1,n[e];if(s!==_e&&re(s,e))return a[e]=2,s[e];if((h=t.propsOptions[0])&&re(h,e))return a[e]=3,r[e];if(i!==_e&&re(i,e))return a[e]=4,i[e];lr&&(a[e]=0)}}const c=an[e];let d,f;if(c)return e==="$attrs"&&je(t,"get",e),c(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(i!==_e&&re(i,e))return a[e]=4,i[e];if(f=l.config.globalProperties,re(f,e))return f[e]},set({_:t},e,i){const{data:n,setupState:s,ctx:r}=t;return Us(s,e)?(s[e]=i,!0):n!==_e&&re(n,e)?(n[e]=i,!0):re(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:s,propsOptions:r}},a){let o;return!!i[a]||t!==_e&&re(t,a)||Us(e,a)||(o=r[0])&&re(o,a)||re(n,a)||re(an,a)||re(s.config.globalProperties,a)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:re(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function ha(t){return $(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let lr=!0;function Rc(t){const e=Rr(t),i=t.proxy,n=t.ctx;lr=!1,e.beforeCreate&&ca(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:a,watch:o,provide:l,inject:h,created:c,beforeMount:d,mounted:f,beforeUpdate:v,updated:x,activated:C,deactivated:_,beforeDestroy:D,beforeUnmount:w,destroyed:F,unmounted:L,render:Z,renderTracked:ie,renderTriggered:ye,errorCaptured:J,serverPrefetch:ue,expose:fe,inheritAttrs:Ae,components:Be,directives:Le,filters:ft}=e;if(h&&Dc(h,n,null),a)for(const k in a){const I=a[k];ee(I)&&(n[k]=I.bind(i))}if(s){const k=s.call(i,i);me(k)&&(t.data=hi(k))}if(lr=!0,r)for(const k in r){const I=r[k],Y=ee(I)?I.bind(i,i):ee(I.get)?I.get.bind(i,i):lt,ne=!ee(I)&&ee(I.set)?I.set.bind(i):lt,ae=ki({get:Y,set:ne});Object.defineProperty(n,k,{enumerable:!0,configurable:!0,get:()=>ae.value,set:ge=>ae.value=ge})}if(o)for(const k in o)Jo(o[k],n,i,k);if(l){const k=ee(l)?l.call(i):l;Reflect.ownKeys(k).forEach(I=>{Bc(I,k[I])})}c&&ca(c,t,"c");function pe(k,I){$(I)?I.forEach(Y=>k(Y.bind(i))):I&&k(I.bind(i))}if(pe(Tc,d),pe($o,f),pe(xc,v),pe(kc,x),pe(wc,C),pe(Cc,_),pe(Ic,J),pe(Pc,ie),pe(Ac,ye),pe(jo,w),pe(Ko,L),pe(Ec,ue),$(fe))if(fe.length){const k=t.exposed||(t.exposed={});fe.forEach(I=>{Object.defineProperty(k,I,{get:()=>i[I],set:Y=>i[I]=Y})})}else t.exposed||(t.exposed={});Z&&t.render===lt&&(t.render=Z),Ae!=null&&(t.inheritAttrs=Ae),Be&&(t.components=Be),Le&&(t.directives=Le)}function Dc(t,e,i=lt){$(t)&&(t=hr(t));for(const n in t){const s=t[n];let r;me(s)?"default"in s?r=Jn(s.from||n,s.default,!0):r=Jn(s.from||n):r=Jn(s),Fe(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):e[n]=r}}function ca(t,e,i){ht($(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function Jo(t,e,i,n){const s=n.includes(".")?Uo(i,n):()=>i[n];if(Me(t)){const r=e[t];ee(r)&&qn(s,r)}else if(ee(t))qn(s,t.bind(i));else if(me(t))if($(t))t.forEach(r=>Jo(r,e,i,n));else{const r=ee(t.handler)?t.handler.bind(i):e[t.handler];ee(r)&&qn(s,r,t)}}function Rr(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:a}}=t.appContext,o=r.get(e);let l;return o?l=o:!s.length&&!i&&!n?l=e:(l={},s.length&&s.forEach(h=>ls(l,h,a,!0)),ls(l,e,a)),me(e)&&r.set(e,l),l}function ls(t,e,i,n=!1){const{mixins:s,extends:r}=e;r&&ls(t,r,i,!0),s&&s.forEach(a=>ls(t,a,i,!0));for(const a in e)if(!(n&&a==="expose")){const o=Nc[a]||i&&i[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Nc={data:da,props:ua,emits:ua,methods:Qi,computed:Qi,beforeCreate:Ue,created:Ue,beforeMount:Ue,mounted:Ue,beforeUpdate:Ue,updated:Ue,beforeDestroy:Ue,beforeUnmount:Ue,destroyed:Ue,unmounted:Ue,activated:Ue,deactivated:Ue,errorCaptured:Ue,serverPrefetch:Ue,components:Qi,directives:Qi,watch:Fc,provide:da,inject:Hc};function da(t,e){return e?t?function(){return Ie(ee(t)?t.call(this,this):t,ee(e)?e.call(this,this):e)}:e:t}function Hc(t,e){return Qi(hr(t),hr(e))}function hr(t){if($(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Ue(t,e){return t?[...new Set([].concat(t,e))]:e}function Qi(t,e){return t?Ie(Object.create(null),t,e):e}function ua(t,e){return t?$(t)&&$(e)?[...new Set([...t,...e])]:Ie(Object.create(null),ha(t),ha(e!=null?e:{})):e}function Fc(t,e){if(!t)return e;if(!e)return t;const i=Ie(Object.create(null),t);for(const n in e)i[n]=Ue(t[n],e[n]);return i}function Qo(){return{app:null,config:{isNativeTag:dh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Gc=0;function Wc(t,e){return function(n,s=null){ee(n)||(n=Ie({},n)),s!=null&&!me(s)&&(s=null);const r=Qo(),a=new Set;let o=!1;const l=r.app={_uid:Gc++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:ud,get config(){return r.config},set config(h){},use(h,...c){return a.has(h)||(h&&ee(h.install)?(a.add(h),h.install(l,...c)):ee(h)&&(a.add(h),h(l,...c))),l},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),l},component(h,c){return c?(r.components[h]=c,l):r.components[h]},directive(h,c){return c?(r.directives[h]=c,l):r.directives[h]},mount(h,c,d){if(!o){const f=K(n,s);return f.appContext=r,c&&e?e(f,h):t(f,h,d),o=!0,l._container=h,h.__vue_app__=l,Ms(f.component)||f.component.proxy}},unmount(){o&&(t(null,l._container),delete l._container.__vue_app__)},provide(h,c){return r.provides[h]=c,l},runWithContext(h){hs=l;try{return h()}finally{hs=null}}};return l}}let hs=null;function Bc(t,e){if(Oe){let i=Oe.provides;const n=Oe.parent&&Oe.parent.provides;n===i&&(i=Oe.provides=Object.create(n)),i[t]=e}}function Jn(t,e,i=!1){const n=Oe||Ge;if(n||hs){const s=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:hs._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return i&&ee(e)?e.call(n&&n.proxy):e}}function zc(t,e,i,n=!1){const s={},r={};ss(r,Is,1),t.propsDefaults=Object.create(null),el(t,e,s,r);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);i?t.props=n?s:ec(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function Uc(t,e,i,n){const{props:s,attrs:r,vnode:{patchFlag:a}}=t,o=he(s),[l]=t.propsOptions;let h=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(xs(t.emitsOptions,f))continue;const v=e[f];if(l)if(re(r,f))v!==r[f]&&(r[f]=v,h=!0);else{const x=bt(f);s[x]=cr(l,o,x,v,t,!1)}else v!==r[f]&&(r[f]=v,h=!0)}}}else{el(t,e,s,r)&&(h=!0);let c;for(const d in o)(!e||!re(e,d)&&((c=Gi(d))===d||!re(e,c)))&&(l?i&&(i[d]!==void 0||i[c]!==void 0)&&(s[d]=cr(l,o,d,void 0,t,!0)):delete s[d]);if(r!==o)for(const d in r)(!e||!re(e,d)&&!0)&&(delete r[d],h=!0)}h&&kt(t,"set","$attrs")}function el(t,e,i,n){const[s,r]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Kn(l))continue;const h=e[l];let c;s&&re(s,c=bt(l))?!r||!r.includes(c)?i[c]=h:(o||(o={}))[c]=h:xs(t.emitsOptions,l)||(!(l in n)||h!==n[l])&&(n[l]=h,a=!0)}if(r){const l=he(i),h=o||_e;for(let c=0;c<r.length;c++){const d=r[c];i[d]=cr(s,l,d,h[d],t,!re(h,d))}}return a}function cr(t,e,i,n,s,r){const a=t[i];if(a!=null){const o=re(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&ee(l)){const{propsDefaults:h}=s;i in h?n=h[i]:(Ni(s),n=h[i]=l.call(null,e),ri())}else n=l}a[0]&&(r&&!o?n=!1:a[1]&&(n===""||n===Gi(i))&&(n=!0))}return n}function tl(t,e,i=!1){const n=e.propsCache,s=n.get(t);if(s)return s;const r=t.props,a={},o=[];let l=!1;if(!ee(t)){const c=d=>{l=!0;const[f,v]=tl(d,e,!0);Ie(a,f),v&&o.push(...v)};!i&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!r&&!l)return me(t)&&n.set(t,Ai),Ai;if($(r))for(let c=0;c<r.length;c++){const d=bt(r[c]);fa(d)&&(a[d]=_e)}else if(r)for(const c in r){const d=bt(c);if(fa(d)){const f=r[c],v=a[d]=$(f)||ee(f)?{type:f}:Ie({},f);if(v){const x=_a(Boolean,v.type),C=_a(String,v.type);v[0]=x>-1,v[1]=C<0||x<C,(x>-1||re(v,"default"))&&o.push(d)}}}const h=[a,o];return me(t)&&n.set(t,h),h}function fa(t){return t[0]!=="$"}function pa(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function ga(t,e){return pa(t)===pa(e)}function _a(t,e){return $(e)?e.findIndex(i=>ga(i,t)):ee(e)&&ga(e,t)?0:-1}const il=t=>t[0]==="_"||t==="$stable",Dr=t=>$(t)?t.map(mt):[mt(t)],Vc=(t,e,i)=>{if(e._n)return e;const n=Ze((...s)=>Dr(e(...s)),i);return n._c=!1,n},nl=(t,e,i)=>{const n=t._ctx;for(const s in t){if(il(s))continue;const r=t[s];if(ee(r))e[s]=Vc(s,r,n);else if(r!=null){const a=Dr(r);e[s]=()=>a}}},sl=(t,e)=>{const i=Dr(e);t.slots.default=()=>i},Xc=(t,e)=>{if(t.vnode.shapeFlag&32){const i=e._;i?(t.slots=he(e),ss(e,"_",i)):nl(e,t.slots={})}else t.slots={},e&&sl(t,e);ss(t.slots,Is,1)},Yc=(t,e,i)=>{const{vnode:n,slots:s}=t;let r=!0,a=_e;if(n.shapeFlag&32){const o=e._;o?i&&o===1?r=!1:(Ie(s,e),!i&&o===1&&delete s._):(r=!e.$stable,nl(e,s)),a=e}else e&&(sl(t,e),a={default:1});if(r)for(const o in s)!il(o)&&!(o in a)&&delete s[o]};function dr(t,e,i,n,s=!1){if($(t)){t.forEach((f,v)=>dr(f,e&&($(e)?e[v]:e),i,n,s));return}if(rn(n)&&!s)return;const r=n.shapeFlag&4?Ms(n.component)||n.component.proxy:n.el,a=s?null:r,{i:o,r:l}=t,h=e&&e.r,c=o.refs===_e?o.refs={}:o.refs,d=o.setupState;if(h!=null&&h!==l&&(Me(h)?(c[h]=null,re(d,h)&&(d[h]=null)):Fe(h)&&(h.value=null)),ee(l))Ft(l,o,12,[a,c]);else{const f=Me(l),v=Fe(l);if(f||v){const x=()=>{if(t.f){const C=f?re(d,l)?d[l]:c[l]:l.value;s?$(C)&&br(C,r):$(C)?C.includes(r)||C.push(r):f?(c[l]=[r],re(d,l)&&(d[l]=c[l])):(l.value=[r],t.k&&(c[t.k]=l.value))}else f?(c[l]=a,re(d,l)&&(d[l]=a)):v&&(l.value=a,t.k&&(c[t.k]=a))};a?(x.id=-1,Ye(x,i)):x()}}}const Ye=yc;function $c(t){return jc(t)}function jc(t,e){const i=tr();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:a,createText:o,createComment:l,setText:h,setElementText:c,parentNode:d,nextSibling:f,setScopeId:v=lt,insertStaticContent:x}=t,C=(u,p,b,A=null,S=null,O=null,G=!1,y=null,N=!!p.dynamicChildren)=>{if(u===p)return;u&&!ji(u,p)&&(A=Kt(u),ge(u,S,O,!0),u=null),p.patchFlag===-2&&(N=!1,p.dynamicChildren=null);const{type:T,ref:H,shapeFlag:W}=p;switch(T){case As:_(u,p,b,A);break;case Bt:D(u,p,b,A);break;case Qn:u==null&&w(p,b,A,G);break;case $e:Be(u,p,b,A,S,O,G,y,N);break;default:W&1?Z(u,p,b,A,S,O,G,y,N):W&6?Le(u,p,b,A,S,O,G,y,N):(W&64||W&128)&&T.process(u,p,b,A,S,O,G,y,N,St)}H!=null&&S&&dr(H,u&&u.ref,O,p||u,!p)},_=(u,p,b,A)=>{if(u==null)n(p.el=o(p.children),b,A);else{const S=p.el=u.el;p.children!==u.children&&h(S,p.children)}},D=(u,p,b,A)=>{u==null?n(p.el=l(p.children||""),b,A):p.el=u.el},w=(u,p,b,A)=>{[u.el,u.anchor]=x(u.children,p,b,A,u.el,u.anchor)},F=({el:u,anchor:p},b,A)=>{let S;for(;u&&u!==p;)S=f(u),n(u,b,A),u=S;n(p,b,A)},L=({el:u,anchor:p})=>{let b;for(;u&&u!==p;)b=f(u),s(u),u=b;s(p)},Z=(u,p,b,A,S,O,G,y,N)=>{G=G||p.type==="svg",u==null?ie(p,b,A,S,O,G,y,N):ue(u,p,S,O,G,y,N)},ie=(u,p,b,A,S,O,G,y)=>{let N,T;const{type:H,props:W,shapeFlag:B,transition:j,dirs:te}=u;if(N=u.el=a(u.type,O,W&&W.is,W),B&8?c(N,u.children):B&16&&J(u.children,N,null,A,S,O&&H!=="foreignObject",G,y),te&&qt(u,null,A,"created"),ye(N,u,u.scopeId,G,A),W){for(const M in W)M!=="value"&&!Kn(M)&&r(N,M,null,W[M],O,u.children,A,S,xe);"value"in W&&r(N,"value",null,W.value),(T=W.onVnodeBeforeMount)&&gt(T,A,u)}te&&qt(u,null,A,"beforeMount");const P=(!S||S&&!S.pendingBranch)&&j&&!j.persisted;P&&j.beforeEnter(N),n(N,p,b),((T=W&&W.onVnodeMounted)||P||te)&&Ye(()=>{T&&gt(T,A,u),P&&j.enter(N),te&&qt(u,null,A,"mounted")},S)},ye=(u,p,b,A,S)=>{if(b&&v(u,b),A)for(let O=0;O<A.length;O++)v(u,A[O]);if(S){let O=S.subTree;if(p===O){const G=S.vnode;ye(u,G,G.scopeId,G.slotScopeIds,S.parent)}}},J=(u,p,b,A,S,O,G,y,N=0)=>{for(let T=N;T<u.length;T++){const H=u[T]=y?Rt(u[T]):mt(u[T]);C(null,H,p,b,A,S,O,G,y)}},ue=(u,p,b,A,S,O,G)=>{const y=p.el=u.el;let{patchFlag:N,dynamicChildren:T,dirs:H}=p;N|=u.patchFlag&16;const W=u.props||_e,B=p.props||_e;let j;b&&Jt(b,!1),(j=B.onVnodeBeforeUpdate)&&gt(j,b,p,u),H&&qt(p,u,b,"beforeUpdate"),b&&Jt(b,!0);const te=S&&p.type!=="foreignObject";if(T?fe(u.dynamicChildren,T,y,b,A,te,O):G||I(u,p,y,null,b,A,te,O,!1),N>0){if(N&16)Ae(y,p,W,B,b,A,S);else if(N&2&&W.class!==B.class&&r(y,"class",null,B.class,S),N&4&&r(y,"style",W.style,B.style,S),N&8){const P=p.dynamicProps;for(let M=0;M<P.length;M++){const z=P[M],Q=W[z],we=B[z];(we!==Q||z==="value")&&r(y,z,Q,we,S,u.children,b,A,xe)}}N&1&&u.children!==p.children&&c(y,p.children)}else!G&&T==null&&Ae(y,p,W,B,b,A,S);((j=B.onVnodeUpdated)||H)&&Ye(()=>{j&&gt(j,b,p,u),H&&qt(p,u,b,"updated")},A)},fe=(u,p,b,A,S,O,G)=>{for(let y=0;y<p.length;y++){const N=u[y],T=p[y],H=N.el&&(N.type===$e||!ji(N,T)||N.shapeFlag&70)?d(N.el):b;C(N,T,H,null,A,S,O,G,!0)}},Ae=(u,p,b,A,S,O,G)=>{if(b!==A){if(b!==_e)for(const y in b)!Kn(y)&&!(y in A)&&r(u,y,b[y],null,G,p.children,S,O,xe);for(const y in A){if(Kn(y))continue;const N=A[y],T=b[y];N!==T&&y!=="value"&&r(u,y,T,N,G,p.children,S,O,xe)}"value"in A&&r(u,"value",b.value,A.value)}},Be=(u,p,b,A,S,O,G,y,N)=>{const T=p.el=u?u.el:o(""),H=p.anchor=u?u.anchor:o("");let{patchFlag:W,dynamicChildren:B,slotScopeIds:j}=p;j&&(y=y?y.concat(j):j),u==null?(n(T,b,A),n(H,b,A),J(p.children,b,H,S,O,G,y,N)):W>0&&W&64&&B&&u.dynamicChildren?(fe(u.dynamicChildren,B,b,S,O,G,y),(p.key!=null||S&&p===S.subTree)&&rl(u,p,!0)):I(u,p,b,H,S,O,G,y,N)},Le=(u,p,b,A,S,O,G,y,N)=>{p.slotScopeIds=y,u==null?p.shapeFlag&512?S.ctx.activate(p,b,A,G,N):ft(p,b,A,S,O,G,N):st(u,p,N)},ft=(u,p,b,A,S,O,G)=>{const y=u.component=nd(u,A,S);if(Xo(u)&&(y.ctx.renderer=St),sd(y),y.asyncDep){if(S&&S.registerDep(y,pe),!u.el){const N=y.subTree=K(Bt);D(null,N,p,b)}return}pe(y,u,p,b,S,O,G)},st=(u,p,b)=>{const A=p.component=u.component;if(_c(u,p,b))if(A.asyncDep&&!A.asyncResolved){k(A,p,b);return}else A.next=p,cc(A.update),A.update();else p.el=u.el,A.vnode=p},pe=(u,p,b,A,S,O,G)=>{const y=()=>{if(u.isMounted){let{next:H,bu:W,u:B,parent:j,vnode:te}=u,P=H,M;Jt(u,!1),H?(H.el=te.el,k(u,H,G)):H=te,W&&Zn(W),(M=H.props&&H.props.onVnodeBeforeUpdate)&&gt(M,j,H,te),Jt(u,!0);const z=zs(u),Q=u.subTree;u.subTree=z,C(Q,z,d(Q.el),Kt(Q),u,S,O),H.el=z.el,P===null&&mc(u,z.el),B&&Ye(B,S),(M=H.props&&H.props.onVnodeUpdated)&&Ye(()=>gt(M,j,H,te),S)}else{let H;const{el:W,props:B}=p,{bm:j,m:te,parent:P}=u,M=rn(p);if(Jt(u,!1),j&&Zn(j),!M&&(H=B&&B.onVnodeBeforeMount)&&gt(H,P,p),Jt(u,!0),W&&$i){const z=()=>{u.subTree=zs(u),$i(W,u.subTree,u,S,null)};M?p.type.__asyncLoader().then(()=>!u.isUnmounted&&z()):z()}else{const z=u.subTree=zs(u);C(null,z,b,A,u,S,O),p.el=z.el}if(te&&Ye(te,S),!M&&(H=B&&B.onVnodeMounted)){const z=p;Ye(()=>gt(H,P,z),S)}(p.shapeFlag&256||P&&rn(P.vnode)&&P.vnode.shapeFlag&256)&&u.a&&Ye(u.a,S),u.isMounted=!0,p=b=A=null}},N=u.effect=new kr(y,()=>Or(T),u.scope),T=u.update=()=>N.run();T.id=u.uid,Jt(u,!0),T()},k=(u,p,b)=>{p.component=u;const A=u.vnode.props;u.vnode=p,u.next=null,Uc(u,p.props,A,b),Yc(u,p.children,b),Wi(),aa(),Bi()},I=(u,p,b,A,S,O,G,y,N=!1)=>{const T=u&&u.children,H=u?u.shapeFlag:0,W=p.children,{patchFlag:B,shapeFlag:j}=p;if(B>0){if(B&128){ne(T,W,b,A,S,O,G,y,N);return}else if(B&256){Y(T,W,b,A,S,O,G,y,N);return}}j&8?(H&16&&xe(T,S,O),W!==T&&c(b,W)):H&16?j&16?ne(T,W,b,A,S,O,G,y,N):xe(T,S,O,!0):(H&8&&c(b,""),j&16&&J(W,b,A,S,O,G,y,N))},Y=(u,p,b,A,S,O,G,y,N)=>{u=u||Ai,p=p||Ai;const T=u.length,H=p.length,W=Math.min(T,H);let B;for(B=0;B<W;B++){const j=p[B]=N?Rt(p[B]):mt(p[B]);C(u[B],j,b,null,S,O,G,y,N)}T>H?xe(u,S,O,!0,!1,W):J(p,b,A,S,O,G,y,N,W)},ne=(u,p,b,A,S,O,G,y,N)=>{let T=0;const H=p.length;let W=u.length-1,B=H-1;for(;T<=W&&T<=B;){const j=u[T],te=p[T]=N?Rt(p[T]):mt(p[T]);if(ji(j,te))C(j,te,b,null,S,O,G,y,N);else break;T++}for(;T<=W&&T<=B;){const j=u[W],te=p[B]=N?Rt(p[B]):mt(p[B]);if(ji(j,te))C(j,te,b,null,S,O,G,y,N);else break;W--,B--}if(T>W){if(T<=B){const j=B+1,te=j<H?p[j].el:A;for(;T<=B;)C(null,p[T]=N?Rt(p[T]):mt(p[T]),b,te,S,O,G,y,N),T++}}else if(T>B)for(;T<=W;)ge(u[T],S,O,!0),T++;else{const j=T,te=T,P=new Map;for(T=te;T<=B;T++){const Ke=p[T]=N?Rt(p[T]):mt(p[T]);Ke.key!=null&&P.set(Ke.key,T)}let M,z=0;const Q=B-te+1;let we=!1,et=0;const Zt=new Array(Q);for(T=0;T<Q;T++)Zt[T]=0;for(T=j;T<=W;T++){const Ke=u[T];if(z>=Q){ge(Ke,S,O,!0);continue}let pt;if(Ke.key!=null)pt=P.get(Ke.key);else for(M=te;M<=B;M++)if(Zt[M-te]===0&&ji(Ke,p[M])){pt=M;break}pt===void 0?ge(Ke,S,O,!0):(Zt[pt-te]=T+1,pt>=et?et=pt:we=!0,C(Ke,p[pt],b,null,S,O,G,y,N),z++)}const An=we?Kc(Zt):Ai;for(M=An.length-1,T=Q-1;T>=0;T--){const Ke=te+T,pt=p[Ke],Zr=Ke+1<H?p[Ke+1].el:A;Zt[T]===0?C(null,pt,b,Zr,S,O,G,y,N):we&&(M<0||T!==An[M]?ae(pt,b,Zr,2):M--)}}},ae=(u,p,b,A,S=null)=>{const{el:O,type:G,transition:y,children:N,shapeFlag:T}=u;if(T&6){ae(u.component.subTree,p,b,A);return}if(T&128){u.suspense.move(p,b,A);return}if(T&64){G.move(u,p,b,St);return}if(G===$e){n(O,p,b);for(let W=0;W<N.length;W++)ae(N[W],p,b,A);n(u.anchor,p,b);return}if(G===Qn){F(u,p,b);return}if(A!==2&&T&1&&y)if(A===0)y.beforeEnter(O),n(O,p,b),Ye(()=>y.enter(O),S);else{const{leave:W,delayLeave:B,afterLeave:j}=y,te=()=>n(O,p,b),P=()=>{W(O,()=>{te(),j&&j()})};B?B(O,te,P):P()}else n(O,p,b)},ge=(u,p,b,A=!1,S=!1)=>{const{type:O,props:G,ref:y,children:N,dynamicChildren:T,shapeFlag:H,patchFlag:W,dirs:B}=u;if(y!=null&&dr(y,null,b,u,!0),H&256){p.ctx.deactivate(u);return}const j=H&1&&B,te=!rn(u);let P;if(te&&(P=G&&G.onVnodeBeforeUnmount)&&gt(P,p,u),H&6)ze(u.component,b,A);else{if(H&128){u.suspense.unmount(b,A);return}j&&qt(u,null,p,"beforeUnmount"),H&64?u.type.remove(u,p,b,S,St,A):T&&(O!==$e||W>0&&W&64)?xe(T,p,b,!1,!0):(O===$e&&W&384||!S&&H&16)&&xe(N,p,b),A&&Xe(u)}(te&&(P=G&&G.onVnodeUnmounted)||j)&&Ye(()=>{P&&gt(P,p,u),j&&qt(u,null,p,"unmounted")},b)},Xe=u=>{const{type:p,el:b,anchor:A,transition:S}=u;if(p===$e){bi(b,A);return}if(p===Qn){L(u);return}const O=()=>{s(b),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(u.shapeFlag&1&&S&&!S.persisted){const{leave:G,delayLeave:y}=S,N=()=>G(b,O);y?y(u.el,O,N):N()}else O()},bi=(u,p)=>{let b;for(;u!==p;)b=f(u),s(u),u=b;s(p)},ze=(u,p,b)=>{const{bum:A,scope:S,update:O,subTree:G,um:y}=u;A&&Zn(A),S.stop(),O&&(O.active=!1,ge(G,u,p,b)),y&&Ye(y,p),Ye(()=>{u.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&u.asyncDep&&!u.asyncResolved&&u.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},xe=(u,p,b,A=!1,S=!1,O=0)=>{for(let G=O;G<u.length;G++)ge(u[G],p,b,A,S)},Kt=u=>u.shapeFlag&6?Kt(u.component.subTree):u.shapeFlag&128?u.suspense.next():f(u.anchor||u.el),Xi=(u,p,b)=>{u==null?p._vnode&&ge(p._vnode,null,null,!0):C(p._vnode||null,u,p,null,null,null,b),aa(),Ho(),p._vnode=u},St={p:C,um:ge,m:ae,r:Xe,mt:ft,mc:J,pc:I,pbc:fe,n:Kt,o:t};let Yi,$i;return e&&([Yi,$i]=e(St)),{render:Xi,hydrate:Yi,createApp:Wc(Xi,Yi)}}function Jt({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function rl(t,e,i=!1){const n=t.children,s=e.children;if($(n)&&$(s))for(let r=0;r<n.length;r++){const a=n[r];let o=s[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[r]=Rt(s[r]),o.el=a.el),i||rl(a,o)),o.type===As&&(o.el=a.el)}}function Kc(t){const e=t.slice(),i=[0];let n,s,r,a,o;const l=t.length;for(n=0;n<l;n++){const h=t[n];if(h!==0){if(s=i[i.length-1],t[s]<h){e[n]=s,i.push(n);continue}for(r=0,a=i.length-1;r<a;)o=r+a>>1,t[i[o]]<h?r=o+1:a=o;h<t[i[r]]&&(r>0&&(e[n]=i[r-1]),i[r]=n)}}for(r=i.length,a=i[r-1];r-- >0;)i[r]=a,a=e[a];return i}const Zc=t=>t.__isTeleport,$e=Symbol.for("v-fgt"),As=Symbol.for("v-txt"),Bt=Symbol.for("v-cmt"),Qn=Symbol.for("v-stc"),on=[];let ot=null;function be(t=!1){on.push(ot=t?null:[])}function qc(){on.pop(),ot=on[on.length-1]||null}let yn=1;function ma(t){yn+=t}function al(t){return t.dynamicChildren=yn>0?ot||Ai:null,qc(),yn>0&&ot&&ot.push(t),t}function ke(t,e,i,n,s,r){return al(g(t,e,i,n,s,r,!0))}function Ps(t,e,i,n,s){return al(K(t,e,i,n,s,!0))}function cs(t){return t?t.__v_isVNode===!0:!1}function ji(t,e){return t.type===e.type&&t.key===e.key}const Is="__vInternal",ol=({key:t})=>t!=null?t:null,es=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Me(t)||Fe(t)||ee(t)?{i:Ge,r:t,k:e,f:!!i}:t:null);function g(t,e=null,i=null,n=0,s=null,r=t===$e?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ol(e),ref:e&&es(e),scopeId:ks,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ge};return o?(Nr(l,i),r&128&&t.normalize(l)):i&&(l.shapeFlag|=Me(i)?8:16),yn>0&&!a&&ot&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&ot.push(l),l}const K=Jc;function Jc(t,e=null,i=null,n=0,s=null,r=!1){if((!t||t===Mc)&&(t=Bt),cs(t)){const o=Di(t,e,!0);return i&&Nr(o,i),yn>0&&!r&&ot&&(o.shapeFlag&6?ot[ot.indexOf(t)]=o:ot.push(o)),o.patchFlag|=-2,o}if(hd(t)&&(t=t.__vccOpts),e){e=Qc(e);let{class:o,style:l}=e;o&&!Me(o)&&(e.class=Sr(o)),me(l)&&(Po(l)&&!$(l)&&(l=Ie({},l)),e.style=Cr(l))}const a=Me(t)?1:vc(t)?128:Zc(t)?64:me(t)?4:ee(t)?2:0;return g(t,e,i,n,s,a,r,!0)}function Qc(t){return t?Po(t)||Is in t?Ie({},t):t:null}function Di(t,e,i=!1){const{props:n,ref:s,patchFlag:r,children:a}=t,o=e?ed(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&ol(o),ref:e&&e.ref?i&&s?$(s)?s.concat(es(e)):[s,es(e)]:es(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==$e?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Di(t.ssContent),ssFallback:t.ssFallback&&Di(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Se(t=" ",e=0){return K(As,null,t,e)}function Vt(t,e){const i=K(Qn,null,t);return i.staticCount=e,i}function ln(t="",e=!1){return e?(be(),Ps(Bt,null,t)):K(Bt,null,t)}function mt(t){return t==null||typeof t=="boolean"?K(Bt):$(t)?K($e,null,t.slice()):typeof t=="object"?Rt(t):K(As,null,String(t))}function Rt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Di(t)}function Nr(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if($(e))i=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),Nr(t,s()),s._c&&(s._d=!0));return}else{i=32;const s=e._;!s&&!(Is in e)?e._ctx=Ge:s===3&&Ge&&(Ge.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ee(e)?(e={default:e,_ctx:Ge},i=32):(e=String(e),n&64?(i=16,e=[Se(e)]):i=8);t.children=e,t.shapeFlag|=i}function ed(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Sr([e.class,n.class]));else if(s==="style")e.style=Cr([e.style,n.style]);else if(vs(s)){const r=e[s],a=n[s];a&&r!==a&&!($(r)&&r.includes(a))&&(e[s]=r?[].concat(r,a):a)}else s!==""&&(e[s]=n[s])}return e}function gt(t,e,i,n=null){ht(t,e,7,[i,n])}const td=Qo();let id=0;function nd(t,e,i){const n=t.type,s=(e?e.appContext:t.appContext)||td,r={uid:id++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new xh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tl(n,s),emitsOptions:Go(n,s),emit:null,emitted:null,propsDefaults:_e,inheritAttrs:n.inheritAttrs,ctx:_e,data:_e,props:_e,attrs:_e,slots:_e,refs:_e,setupState:_e,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=fc.bind(null,r),t.ce&&t.ce(r),r}let Oe=null,Hr,wi,va="__VUE_INSTANCE_SETTERS__";(wi=tr()[va])||(wi=tr()[va]=[]),wi.push(t=>Oe=t),Hr=t=>{wi.length>1?wi.forEach(e=>e(t)):wi[0](t)};const Ni=t=>{Hr(t),t.scope.on()},ri=()=>{Oe&&Oe.scope.off(),Hr(null)};function ll(t){return t.vnode.shapeFlag&4}let bn=!1;function sd(t,e=!1){bn=e;const{props:i,children:n}=t.vnode,s=ll(t);zc(t,i,s,e),Xc(t,n);const r=s?rd(t,e):void 0;return bn=!1,r}function rd(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=Io(new Proxy(t.ctx,Oc));const{setup:n}=i;if(n){const s=t.setupContext=n.length>1?od(t):null;Ni(t),Wi();const r=Ft(n,t,0,[t.props,s]);if(Bi(),ri(),fo(r)){if(r.then(ri,ri),e)return r.then(a=>{ya(t,a,e)}).catch(a=>{Ts(a,t,0)});t.asyncDep=r}else ya(t,r,e)}else hl(t,e)}function ya(t,e,i){ee(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:me(e)&&(t.setupState=Ro(e)),hl(t,i)}let ba;function hl(t,e,i){const n=t.type;if(!t.render){if(!e&&ba&&!n.render){const s=n.template||Rr(t).template;if(s){const{isCustomElement:r,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,h=Ie(Ie({isCustomElement:r,delimiters:o},a),l);n.render=ba(s,h)}}t.render=n.render||lt}Ni(t),Wi(),Rc(t),Bi(),ri()}function ad(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,i){return je(t,"get","$attrs"),e[i]}}))}function od(t){const e=i=>{t.exposed=i||{}};return{get attrs(){return ad(t)},slots:t.slots,emit:t.emit,expose:e}}function Ms(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Ro(Io(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in an)return an[i](t)},has(e,i){return i in e||i in an}}))}function ld(t,e=!0){return ee(t)?t.displayName||t.name:t.name||e&&t.__name}function hd(t){return ee(t)&&"__vccOpts"in t}const ki=(t,e)=>ac(t,e,bn);function wa(t,e,i){const n=arguments.length;return n===2?me(e)&&!$(e)?cs(e)?K(t,null,[e]):K(t,e):K(t,null,e):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&cs(i)&&(i=[i]),K(t,e,i))}const cd=Symbol.for("v-scx"),dd=()=>Jn(cd),ud="3.3.4",fd="http://www.w3.org/2000/svg",ti=typeof document<"u"?document:null,Ca=ti&&ti.createElement("template"),pd={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const s=e?ti.createElementNS(fd,t):ti.createElement(t,i?{is:i}:void 0);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>ti.createTextNode(t),createComment:t=>ti.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ti.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,n,s,r){const a=i?i.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{Ca.innerHTML=n?`<svg>${t}</svg>`:t;const o=Ca.content;if(n){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,i)}return[a?a.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function gd(t,e,i){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}function _d(t,e,i){const n=t.style,s=Me(i);if(i&&!s){if(e&&!Me(e))for(const r in e)i[r]==null&&ur(n,r,"");for(const r in i)ur(n,r,i[r])}else{const r=n.display;s?e!==i&&(n.cssText=i):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=r)}}const Sa=/\s*!important$/;function ur(t,e,i){if($(i))i.forEach(n=>ur(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=md(t,e);Sa.test(i)?t.setProperty(Gi(n),i.replace(Sa,""),"important"):t[n]=i}}const Ta=["Webkit","Moz","ms"],Vs={};function md(t,e){const i=Vs[e];if(i)return i;let n=bt(e);if(n!=="filter"&&n in t)return Vs[e]=n;n=ws(n);for(let s=0;s<Ta.length;s++){const r=Ta[s]+n;if(r in t)return Vs[e]=r}return e}const xa="http://www.w3.org/1999/xlink";function vd(t,e,i,n,s){if(n&&e.startsWith("xlink:"))i==null?t.removeAttributeNS(xa,e.slice(6,e.length)):t.setAttributeNS(xa,e,i);else{const r=Ch(e);i==null||r&&!_o(i)?t.removeAttribute(e):t.setAttribute(e,r?"":i)}}function yd(t,e,i,n,s,r,a){if(e==="innerHTML"||e==="textContent"){n&&a(n,s,r),t[e]=i==null?"":i;return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){t._value=i;const h=o==="OPTION"?t.getAttribute("value"):t.value,c=i==null?"":i;h!==c&&(t.value=c),i==null&&t.removeAttribute(e);return}let l=!1;if(i===""||i==null){const h=typeof t[e];h==="boolean"?i=_o(i):i==null&&h==="string"?(i="",l=!0):h==="number"&&(i=0,l=!0)}try{t[e]=i}catch{}l&&t.removeAttribute(e)}function ii(t,e,i,n){t.addEventListener(e,i,n)}function bd(t,e,i,n){t.removeEventListener(e,i,n)}function wd(t,e,i,n,s=null){const r=t._vei||(t._vei={}),a=r[e];if(n&&a)a.value=n;else{const[o,l]=Cd(e);if(n){const h=r[e]=xd(n,s);ii(t,o,h,l)}else a&&(bd(t,o,a,l),r[e]=void 0)}}const ka=/(?:Once|Passive|Capture)$/;function Cd(t){let e;if(ka.test(t)){e={};let n;for(;n=t.match(ka);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Gi(t.slice(2)),e]}let Xs=0;const Sd=Promise.resolve(),Td=()=>Xs||(Sd.then(()=>Xs=0),Xs=Date.now());function xd(t,e){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;ht(kd(n,i.value),e,5,[n])};return i.value=t,i.attached=Td(),i}function kd(t,e){if($(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const Ea=/^on[a-z]/,Ed=(t,e,i,n,s=!1,r,a,o,l)=>{e==="class"?gd(t,n,s):e==="style"?_d(t,i,n):vs(e)?yr(e)||wd(t,e,i,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ad(t,e,n,s))?yd(t,e,n,r,a,o,l):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),vd(t,e,n,s))};function Ad(t,e,i,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&Ea.test(e)&&ee(i)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Ea.test(e)&&Me(i)?!1:e in t}const ds=t=>{const e=t.props["onUpdate:modelValue"]||!1;return $(e)?i=>Zn(e,i):e};function Pd(t){t.target.composing=!0}function Aa(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Id={created(t,{modifiers:{lazy:e,trim:i,number:n}},s){t._assign=ds(s);const r=n||s.props&&s.props.type==="number";ii(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;i&&(o=o.trim()),r&&(o=rs(o)),t._assign(o)}),i&&ii(t,"change",()=>{t.value=t.value.trim()}),e||(ii(t,"compositionstart",Pd),ii(t,"compositionend",Aa),ii(t,"change",Aa))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:i,trim:n,number:s}},r){if(t._assign=ds(r),t.composing||document.activeElement===t&&t.type!=="range"&&(i||n&&t.value.trim()===e||(s||t.type==="number")&&rs(t.value)===e))return;const a=e==null?"":e;t.value!==a&&(t.value=a)}},Md={deep:!0,created(t,{value:e,modifiers:{number:i}},n){const s=ys(e);ii(t,"change",()=>{const r=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>i?rs(us(a)):us(a));t._assign(t.multiple?s?new Set(r):r:r[0])}),t._assign=ds(n)},mounted(t,{value:e}){Pa(t,e)},beforeUpdate(t,e,i){t._assign=ds(i)},updated(t,{value:e}){Pa(t,e)}};function Pa(t,e){const i=t.multiple;if(!(i&&!$(e)&&!ys(e))){for(let n=0,s=t.options.length;n<s;n++){const r=t.options[n],a=us(r);if(i)$(e)?r.selected=Th(e,a)>-1:r.selected=e.has(a);else if(Cs(us(r),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function us(t){return"_value"in t?t._value:t.value}const Ld=Ie({patchProp:Ed},pd);let Ia;function Od(){return Ia||(Ia=$c(Ld))}const Rd=(...t)=>{const e=Od().createApp(...t),{mount:i}=e;return e.mount=n=>{const s=Dd(n);if(!s)return;const r=e._component;!ee(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const a=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function Dd(t){return Me(t)?document.querySelector(t):t}const Nd="/vue-peaks/assets/peaks-logo.72e98b64.svg",ci=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i},Hd={},Fd={class:"columns"},Gd=g("div",{class:"column"},[g("p",null,[Se(" Each pane (overview, zoomview, audio, controls) has "),g("b",null," a dedicated CSS class"),Se(" which you can use to select for your styles. Note however, that you can not style the waveforms themselves this way. ")]),g("p",null," The following selectors are available: ")],-1),Wd={class:"column"};function Bd(t,e){const i=At("highlightjs");return be(),ke("div",Fd,[Gd,g("div",Wd,[K(i,{language:"css",code:`div.peaks-overview { 
    /* The div with the overview waveform */ }
div.peaks-zoomview { 
    /* The div with the zoom waveform */ }
div.peaks-controls { 
    /* The div with the zoom controls */ }
audio.peaks-audio { 
    /* The audio control, when provided by vue-peaks 
       (in the 'simple' mode) */ }`})])])}const zd=ci(Hd,[["render",Bd]]);var Ud=Math.PI/180;function Vd(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Li=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},X={_global:Li,version:"8.4.3",isBrowser:Vd(),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle(t){return X.angleDeg?t*Ud:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return X.DD.isDragging},isDragReady(){return!!X.DD.node},releaseCanvasOnDestroy:!0,document:Li.document,_injectGlobal(t){Li.Konva=t}},Xt=t=>{X[t.prototype.getClassName()]=t};X._injectGlobal(X);class Dt{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Dt(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var i=this.m;return{x:i[0]*e.x+i[2]*e.y+i[4],y:i[1]*e.x+i[3]*e.y+i[5]}}translate(e,i){return this.m[4]+=this.m[0]*e+this.m[2]*i,this.m[5]+=this.m[1]*e+this.m[3]*i,this}scale(e,i){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=i,this.m[3]*=i,this}rotate(e){var i=Math.cos(e),n=Math.sin(e),s=this.m[0]*i+this.m[2]*n,r=this.m[1]*i+this.m[3]*n,a=this.m[0]*-n+this.m[2]*i,o=this.m[1]*-n+this.m[3]*i;return this.m[0]=s,this.m[1]=r,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,i){var n=this.m[0]+this.m[2]*i,s=this.m[1]+this.m[3]*i,r=this.m[2]+this.m[0]*e,a=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=s,this.m[2]=r,this.m[3]=a,this}multiply(e){var i=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],s=this.m[0]*e.m[2]+this.m[2]*e.m[3],r=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=i,this.m[1]=n,this.m[2]=s,this.m[3]=r,this.m[4]=a,this.m[5]=o,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*e,n=-this.m[1]*e,s=-this.m[2]*e,r=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=n,this.m[2]=s,this.m[3]=r,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}decompose(){var e=this.m[0],i=this.m[1],n=this.m[2],s=this.m[3],r=this.m[4],a=this.m[5],o=e*s-i*n;let l={x:r,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||i!=0){var h=Math.sqrt(e*e+i*i);l.rotation=i>0?Math.acos(e/h):-Math.acos(e/h),l.scaleX=h,l.scaleY=o/h,l.skewX=(e*n+i*s)/o,l.skewY=0}else if(n!=0||s!=0){var c=Math.sqrt(n*n+s*s);l.rotation=Math.PI/2-(s>0?Math.acos(-n/c):-Math.acos(n/c)),l.scaleX=o/c,l.scaleY=c,l.skewX=0,l.skewY=(e*n+i*s)/o}return l.rotation=m._getRotation(l.rotation),l}}var Xd="[object Array]",Yd="[object Number]",$d="[object String]",jd="[object Boolean]",Kd=Math.PI/180,Zd=180/Math.PI,Ys="#",qd="",Jd="0",Qd="Konva warning: ",Ma="Konva error: ",eu="rgb(",$s={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},tu=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Nn=[];const iu=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)},m={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===Xd},_isNumber(t){return Object.prototype.toString.call(t)===Yd&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===$d},_isBoolean(t){return Object.prototype.toString.call(t)===jd},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;var e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){Nn.push(t),Nn.length===1&&iu(function(){const e=Nn;Nn=[],e.forEach(function(i){i()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var i=m.createImageElement();i.onload=function(){e(i)},i.src=t},_rgbToHex(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb(t){t=t.replace(Ys,qd);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var t=(Math.random()*16777215<<0).toString(16);t.length<6;)t=Jd+t;return Ys+t},getRGB(t){var e;return t in $s?(e=$s[t],{r:e[0],g:e[1],b:e[2]}):t[0]===Ys?this._hexToRgb(t.substring(1)):t.substr(0,4)===eu?(e=tu.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",m._namedColorToRBA(t)||m._hex3ColorToRGBA(t)||m._hex4ColorToRGBA(t)||m._hex6ColorToRGBA(t)||m._hex8ColorToRGBA(t)||m._rgbColorToRGBA(t)||m._rgbaColorToRGBA(t)||m._hslColorToRGBA(t)},_namedColorToRBA(t){var e=$s[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map((i,n)=>i.slice(-1)==="%"?n===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if(t[0]==="#"&&t.length===9)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if(t[0]==="#"&&t.length===5)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),n=Number(i[0])/360,s=Number(i[1])/100,r=Number(i[2])/100;let a,o,l;if(s===0)return l=r*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};r<.5?a=r*(1+s):a=r+s-r*s;const h=2*r-a,c=[0,0,0];for(let d=0;d<3;d++)o=n+1/3*-(d-1),o<0&&o++,o>1&&o--,6*o<1?l=h+(a-h)*6*o:2*o<1?l=a:3*o<2?l=h+(a-h)*(2/3-o)*6:l=h,c[d]=l*255;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){var e={};for(var i in t)this._isPlainObject(t[i])?e[i]=this.cloneObject(t[i]):this._isArray(t[i])?e[i]=this.cloneArray(t[i]):e[i]=t[i];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*Kd},radToDeg(t){return t*Zd},_degToRad(t){return m.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),m.degToRad(t)},_radToDeg(t){return m.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),m.radToDeg(t)},_getRotation(t){return X.angleDeg?m.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(Ma+t)},error(t){console.error(Ma+t)},warn(t){!X.showWarnings||console.warn(Qd+t)},each(t,e){for(var i in t)e(i,t[i])},_inRange(t,e,i){return e<=t&&t<i},_getProjectionToSegment(t,e,i,n,s,r){var a,o,l,h=(t-i)*(t-i)+(e-n)*(e-n);if(h==0)a=t,o=e,l=(s-i)*(s-i)+(r-n)*(r-n);else{var c=((s-t)*(i-t)+(r-e)*(n-e))/h;c<0?(a=t,o=e,l=(t-s)*(t-s)+(e-r)*(e-r)):c>1?(a=i,o=n,l=(i-s)*(i-s)+(n-r)*(n-r)):(a=t+c*(i-t),o=e+c*(n-e),l=(a-s)*(a-s)+(o-r)*(o-r))}return[a,o,l]},_getProjectionToLine(t,e,i){var n=m.cloneObject(t),s=Number.MAX_VALUE;return e.forEach(function(r,a){if(!(!i&&a===e.length-1)){var o=e[(a+1)%e.length],l=m._getProjectionToSegment(r.x,r.y,o.x,o.y,t.x,t.y),h=l[0],c=l[1],d=l[2];d<s&&(n.x=h,n.y=c,s=d)}}),n},_prepareArrayForTween(t,e,i){var n,s=[],r=[];if(t.length>e.length){var a=e;e=t,t=a}for(n=0;n<t.length;n+=2)s.push({x:t[n],y:t[n+1]});for(n=0;n<e.length;n+=2)r.push({x:e[n],y:e[n+1]});var o=[];return r.forEach(function(l){var h=m._getProjectionToLine(l,s,i);o.push(h.x),o.push(h.y)}),o},_prepareToStringify(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var i in t)if(!!(t.hasOwnProperty(i)&&t[i]&&typeof t[i]=="object")){if(e=Object.getOwnPropertyDescriptor(t,i),t[i].visitedByCircularReferenceRemoval||m._isElement(t[i]))if(e.configurable)delete t[i];else return null;else if(m._prepareToStringify(t[i])===null)if(e.configurable)delete t[i];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var i in e)t[i]=e[i];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999},releaseCanvas(...t){!X.releaseCanvasOnDestroy||t.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(t,e,i,n){let s=0,r=0,a=0,o=0;typeof n=="number"?s=r=a=o=Math.min(n,e/2,i/2):(s=Math.min(n[0]||0,e/2,i/2),r=Math.min(n[1]||0,e/2,i/2),o=Math.min(n[2]||0,e/2,i/2),a=Math.min(n[3]||0,e/2,i/2)),t.moveTo(s,0),t.lineTo(e-r,0),t.arc(e-r,r,r,Math.PI*3/2,0,!1),t.lineTo(e,i-o),t.arc(e-o,i-o,o,0,Math.PI/2,!1),t.lineTo(a,i),t.arc(a,i-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,s),t.arc(s,s,s,Math.PI,Math.PI*3/2,!1)}};function Yt(t){return m._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||m._isBoolean(t)?t:Object.prototype.toString.call(t)}function se(){if(X.isUnminified)return function(t,e){return m._isNumber(t)||m.warn(Yt(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function nu(t){if(X.isUnminified)return function(e,i){let n=m._isNumber(e),s=m._isArray(e)&&e.length==t;return!n&&!s&&m.warn(Yt(e)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function Fr(){if(X.isUnminified)return function(t,e){var i=m._isNumber(t),n=t==="auto";return i||n||m.warn(Yt(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function zi(){if(X.isUnminified)return function(t,e){return m._isString(t)||m.warn(Yt(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function cl(){if(X.isUnminified)return function(t,e){const i=m._isString(t),n=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return i||n||m.warn(Yt(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function su(){if(X.isUnminified)return function(t,e){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&t instanceof i||(m._isArray(t)?t.forEach(function(n){m._isNumber(n)||m.warn('"'+e+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):m.warn(Yt(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function Pt(){if(X.isUnminified)return function(t,e){var i=t===!0||t===!1;return i||m.warn(Yt(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function ru(t){if(X.isUnminified)return function(e,i){return e==null||m.isObject(e)||m.warn(Yt(e)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+t),e}}var Ki="get",Zi="set";const E={addGetterSetter(t,e,i,n,s){E.addGetter(t,e,i),E.addSetter(t,e,n,s),E.addOverloadedGetterSetter(t,e)},addGetter(t,e,i){var n=Ki+m._capitalize(e);t.prototype[n]=t.prototype[n]||function(){var s=this.attrs[e];return s===void 0?i:s}},addSetter(t,e,i,n){var s=Zi+m._capitalize(e);t.prototype[s]||E.overWriteSetter(t,e,i,n)},overWriteSetter(t,e,i,n){var s=Zi+m._capitalize(e);t.prototype[s]=function(r){return i&&r!==void 0&&r!==null&&(r=i.call(this,r,e)),this._setAttr(e,r),n&&n.call(this),this}},addComponentsGetterSetter(t,e,i,n,s){var r=i.length,a=m._capitalize,o=Ki+a(e),l=Zi+a(e),h,c;t.prototype[o]=function(){var f={};for(h=0;h<r;h++)c=i[h],f[c]=this.getAttr(e+a(c));return f};var d=ru(i);t.prototype[l]=function(f){var v=this.attrs[e],x;n&&(f=n.call(this,f)),d&&d.call(this,f,e);for(x in f)!f.hasOwnProperty(x)||this._setAttr(e+a(x),f[x]);return f||i.forEach(C=>{this._setAttr(e+a(C),void 0)}),this._fireChangeEvent(e,v,f),s&&s.call(this),this},E.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var i=m._capitalize(e),n=Zi+i,s=Ki+i;t.prototype[e]=function(){return arguments.length?(this[n](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(t,e,i,n){m.error("Adding deprecated "+e);var s=Ki+m._capitalize(e),r=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[s]=function(){m.error(r);var a=this.attrs[e];return a===void 0?i:a},E.addSetter(t,e,n,function(){m.error(r)}),E.addOverloadedGetterSetter(t,e)},backCompat(t,e){m.each(e,function(i,n){var s=t.prototype[n],r=Ki+m._capitalize(i),a=Zi+m._capitalize(i);function o(){s.apply(this,arguments),m.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[i]=o,t.prototype[r]=o,t.prototype[a]=o})},afterSetFilter(){this._filterUpToDate=!1}};function au(t){var e=[],i=t.length,n=m,s,r;for(s=0;s<i;s++)r=t[s],n._isNumber(r)?r=Math.round(r*1e3)/1e3:n._isString(r)||(r=r+""),e.push(r);return e}var La=",",ou="(",lu=")",hu="([",cu="])",du=";",uu="()",fu="=",Oa=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],pu=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const gu=100;class Ls{constructor(e){this.canvas=e,X.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,i){var n=this.traceArr,s=n.length,r="",a,o,l,h;for(a=0;a<s;a++)o=n[a],l=o.method,l?(h=o.args,r+=l,e?r+=uu:m._isArray(h[0])?r+=hu+h.join(La)+cu:(i&&(h=h.map(c=>typeof c=="number"?Math.floor(c):c)),r+=ou+h.join(La)+lu)):(r+=o.property,e||(r+=fu+o.val)),r+=du;return r}clearTrace(){this.traceArr=[]}_trace(e){var i=this.traceArr,n;i.push(e),n=i.length,n>=gu&&i.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var i=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(e){const i=e.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(e){var i=e.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(e){const i=e.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(e,i){this._context[e]=i}arc(e,i,n,s,r,a){this._context.arc(e,i,n,s,r,a)}arcTo(e,i,n,s,r){this._context.arcTo(e,i,n,s,r)}beginPath(){this._context.beginPath()}bezierCurveTo(e,i,n,s,r,a){this._context.bezierCurveTo(e,i,n,s,r,a)}clearRect(e,i,n,s){this._context.clearRect(e,i,n,s)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,i){var n=arguments;if(n.length===2)return this._context.createImageData(e,i);if(n.length===1)return this._context.createImageData(e)}createLinearGradient(e,i,n,s){return this._context.createLinearGradient(e,i,n,s)}createPattern(e,i){return this._context.createPattern(e,i)}createRadialGradient(e,i,n,s,r,a){return this._context.createRadialGradient(e,i,n,s,r,a)}drawImage(e,i,n,s,r,a,o,l,h){var c=arguments,d=this._context;c.length===3?d.drawImage(e,i,n):c.length===5?d.drawImage(e,i,n,s,r):c.length===9&&d.drawImage(e,i,n,s,r,a,o,l,h)}ellipse(e,i,n,s,r,a,o,l){this._context.ellipse(e,i,n,s,r,a,o,l)}isPointInPath(e,i,n,s){return n?this._context.isPointInPath(n,e,i,s):this._context.isPointInPath(e,i,s)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,i,n,s){this._context.fillRect(e,i,n,s)}strokeRect(e,i,n,s){this._context.strokeRect(e,i,n,s)}fillText(e,i,n,s){s?this._context.fillText(e,i,n,s):this._context.fillText(e,i,n)}measureText(e){return this._context.measureText(e)}getImageData(e,i,n,s){return this._context.getImageData(e,i,n,s)}lineTo(e,i){this._context.lineTo(e,i)}moveTo(e,i){this._context.moveTo(e,i)}rect(e,i,n,s){this._context.rect(e,i,n,s)}putImageData(e,i,n){this._context.putImageData(e,i,n)}quadraticCurveTo(e,i,n,s){this._context.quadraticCurveTo(e,i,n,s)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,i){this._context.scale(e,i)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,i,n,s,r,a){this._context.setTransform(e,i,n,s,r,a)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,i,n,s){this._context.strokeText(e,i,n,s)}transform(e,i,n,s,r,a){this._context.transform(e,i,n,s,r,a)}translate(e,i){this._context.translate(e,i)}_enableTrace(){var e=this,i=Oa.length,n=this.setAttr,s,r,a=function(o){var l=e[o],h;e[o]=function(){return r=au(Array.prototype.slice.call(arguments,0)),h=l.apply(e,arguments),e._trace({method:o,args:r}),h}};for(s=0;s<i;s++)a(Oa[s]);e.setAttr=function(){n.apply(e,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:o,val:l})}}_applyGlobalCompositeOperation(e){const i=e.attrs.globalCompositeOperation;var n=!i||i==="source-over";n||this.setAttr("globalCompositeOperation",i)}}pu.forEach(function(t){Object.defineProperty(Ls.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class _u extends Ls{constructor(e){super(e),this._context=e._canvas.getContext("2d")}_fillColor(e){var i=e.fill();this.setAttr("fillStyle",i),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var i=e._getLinearGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fillRadialGradient(e){const i=e._getRadialGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fill(e){const i=e.fill(),n=e.getFillPriority();if(i&&n==="color"){this._fillColor(e);return}const s=e.getFillPatternImage();if(s&&n==="pattern"){this._fillPattern(e);return}const r=e.getFillLinearGradientColorStops();if(r&&n==="linear-gradient"){this._fillLinearGradient(e);return}const a=e.getFillRadialGradientColorStops();if(a&&n==="radial-gradient"){this._fillRadialGradient(e);return}i?this._fillColor(e):s?this._fillPattern(e):r?this._fillLinearGradient(e):a&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const i=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),s=e.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(i.x,i.y,n.x,n.y);if(s){for(var a=0;a<s.length;a+=2)r.addColorStop(s[a],s[a+1]);this.setAttr("strokeStyle",r)}}_stroke(e){var i=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();var s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),i&&e.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var r=e.getStrokeLinearGradientColorStops();r?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var i,n,s,r=(i=e.getShadowRGBA())!==null&&i!==void 0?i:"black",a=(n=e.getShadowBlur())!==null&&n!==void 0?n:5,o=(s=e.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},l=e.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=l.x*h,d=l.y*h;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",a*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*d)}}class mu extends Ls{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const r=e.getStrokeScaleEnabled();if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e);var n=e.hitStrokeWidth(),s=n==="auto"?e.strokeWidth():n;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),r||this.restore()}}}var Hn;function vu(){if(Hn)return Hn;var t=m.createCanvasElement(),e=t.getContext("2d");return Hn=function(){var i=X._global.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/n}(),m.releaseCanvas(t),Hn}class Os{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var i=e||{},n=i.pixelRatio||X.pixelRatio||vu();this.pixelRatio=n,this._canvas=m.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var i=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var i=this.pixelRatio,n=this.getContext()._context;n.scale(i,i)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var i=this.pixelRatio,n=this.getContext()._context;n.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,i){this.setWidth(e||0),this.setHeight(i||0)}toDataURL(e,i){try{return this._canvas.toDataURL(e,i)}catch{try{return this._canvas.toDataURL()}catch(s){return m.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}E.addGetterSetter(Os,"pixelRatio",void 0,se());class Oi extends Os{constructor(e={width:0,height:0}){super(e),this.context=new _u(this),this.setSize(e.width,e.height)}}class Gr extends Os{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new mu(this),this.setSize(e.width,e.height)}}const oe={get isDragging(){var t=!1;return oe._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return oe._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const e=[];oe._dragElements.forEach((i,n)=>{const{node:s}=i,r=s.getStage();r.setPointersPositions(t),i.pointerId===void 0&&(i.pointerId=m._getFirstPointerId(t));const a=r._changedPointerPositions.find(h=>h.id===i.pointerId);if(!!a){if(i.dragStatus!=="dragging"){var o=s.dragDistance(),l=Math.max(Math.abs(a.x-i.startPointerPos.x),Math.abs(a.y-i.startPointerPos.y));if(l<o||(s.startDrag({evt:t}),!s.isDragging()))return}s._setDragPosition(t,i),e.push(s)}}),e.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:t},!0)})},_endDragBefore(t){const e=[];oe._dragElements.forEach(i=>{const{node:n}=i,s=n.getStage();if(t&&s.setPointersPositions(t),!s._changedPointerPositions.find(o=>o.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(oe.justDragged=!0,X._mouseListenClick=!1,X._touchListenClick=!1,X._pointerListenClick=!1,i.dragStatus="stopped");const a=i.node.getLayer()||i.node instanceof X.Stage&&i.node;a&&e.indexOf(a)===-1&&e.push(a)}),e.forEach(i=>{i.draw()})},_endDragAfter(t){oe._dragElements.forEach((e,i)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&oe._dragElements.delete(i)})}};X.isBrowser&&(window.addEventListener("mouseup",oe._endDragBefore,!0),window.addEventListener("touchend",oe._endDragBefore,!0),window.addEventListener("mousemove",oe._drag),window.addEventListener("touchmove",oe._drag),window.addEventListener("mouseup",oe._endDragAfter,!1),window.addEventListener("touchend",oe._endDragAfter,!1));var ts="absoluteOpacity",Fn="allEventListeners",Tt="absoluteTransform",Ra="absoluteScale",Qt="canvas",yu="Change",bu="children",wu="konva",fr="listening",Da="mouseenter",Na="mouseleave",Ha="set",Fa="Shape",is=" ",Ga="stage",Ot="transform",Cu="Stage",pr="visible",Su=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(is);let Tu=1;class U{constructor(e){this._id=Tu++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Ot||e===Tt)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,i){var n=this._cache.get(e),s=e===Ot||e===Tt,r=n===void 0||s&&n.dirty===!0;return r&&(n=i.call(this),this._cache.set(e,n)),n}_calculate(e,i,n){if(!this._attachedDepsListeners.get(e)){const s=i.map(r=>r+"Change.konva").join(is);this.on(s,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(Qt)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Tt&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Qt)){const{scene:e,filter:i,hit:n}=this._cache.get(Qt);m.releaseCanvas(e,i,n),this._cache.delete(Qt)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var i=e||{},n={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var s=Math.ceil(i.width||n.width),r=Math.ceil(i.height||n.height),a=i.pixelRatio,o=i.x===void 0?Math.floor(n.x):i.x,l=i.y===void 0?Math.floor(n.y):i.y,h=i.offset||0,c=i.drawBorder||!1,d=i.hitCanvasPixelRatio||1;if(!s||!r){m.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}s+=h*2+1,r+=h*2+1,o-=h,l-=h;var f=new Oi({pixelRatio:a,width:s,height:r}),v=new Oi({pixelRatio:a,width:0,height:0}),x=new Gr({pixelRatio:d,width:s,height:r}),C=f.getContext(),_=x.getContext();return x.isCache=!0,f.isCache=!0,this._cache.delete(Qt),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(f.getContext()._context.imageSmoothingEnabled=!1,v.getContext()._context.imageSmoothingEnabled=!1),C.save(),_.save(),C.translate(-o,-l),_.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(ts),this._clearSelfAndDescendantCache(Ra),this.drawScene(f,this),this.drawHit(x,this),this._isUnderCache=!1,C.restore(),_.restore(),c&&(C.save(),C.beginPath(),C.rect(0,0,s,r),C.closePath(),C.setAttr("strokeStyle","red"),C.setAttr("lineWidth",5),C.stroke(),C.restore()),this._cache.set(Qt,{scene:f,filter:v,hit:x,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Qt)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,i){var n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s,r,a,o,l=this.getAbsoluteTransform(i);return n.forEach(function(h){var c=l.point(h);s===void 0&&(s=a=c.x,r=o=c.y),s=Math.min(s,c.x),r=Math.min(r,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),{x:s,y:r,width:a-s,height:o-r}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();e.translate(i.x,i.y);var n=this._getCachedSceneCanvas(),s=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/s,n.height/s),e.restore()}_drawCachedHitCanvas(e){var i=this._getCanvasCache(),n=i.hit;e.save(),e.translate(i.x,i.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),i=this._getCanvasCache(),n=i.scene,s=i.filter,r=s.getContext(),a,o,l,h;if(e){if(!this._filterUpToDate){var c=n.pixelRatio;s.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio);try{for(a=e.length,r.clear(),r.drawImage(n._canvas,0,0,n.getWidth()/c,n.getHeight()/c),o=r.getImageData(0,0,s.getWidth(),s.getHeight()),l=0;l<a;l++){if(h=e[l],typeof h!="function"){m.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),r.putImageData(o,0,0)}}catch(d){m.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return n}on(e,i){if(this._cache&&this._cache.delete(Fn),arguments.length===3)return this._delegate.apply(this,arguments);var n=e.split(is),s=n.length,r,a,o,l,h;for(r=0;r<s;r++)a=n[r],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:i});return this}off(e,i){var n=(e||"").split(is),s=n.length,r,a,o,l,h,c;if(this._cache&&this._cache.delete(Fn),!e)for(a in this.eventListeners)this._off(a);for(r=0;r<s;r++)if(o=n[r],l=o.split("."),h=l[0],c=l[1],h)this.eventListeners[h]&&this._off(h,c,i);else for(a in this.eventListeners)this._off(a,c,i);return this}dispatchEvent(e){var i={target:this,type:e.type,evt:e};return this.fire(e.type,i),this}addEventListener(e,i){return this.on(e,function(n){i.call(this,n.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,i,n){var s=this;this.on(e,function(r){for(var a=r.target.findAncestors(i,!0,s),o=0;o<a.length;o++)r=m.cloneObject(r),r.currentTarget=a[o],n.call(a[o],r)})}remove(){return this.isDragging()&&this.stopDrag(),oe._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Tt),this._clearSelfAndDescendantCache(ts),this._clearSelfAndDescendantCache(Ra),this._clearSelfAndDescendantCache(Ga),this._clearSelfAndDescendantCache(pr),this._clearSelfAndDescendantCache(fr)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var i="get"+m._capitalize(e);return m._isFunction(this[i])?this[i]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),i=[];e;)i.push(e),e=e.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var i,n;if(!e)return this;for(i in e)i!==bu&&(n=Ha+m._capitalize(i),m._isFunction(this[n])?this[n](e[i]):this._setAttr(i,e[i]))}),this}isListening(){return this._getCache(fr,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(pr,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,i=!1){if(e)return this._isVisible(e)&&this._isListening(e);var n=this.getLayer(),s=!1;oe._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===n)&&(s=!0)});var r=!i&&!X.hitOnDragEnabled&&s;return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),i=this,n=0,s,r,a,o;function l(h){for(s=[],r=h.length,a=0;a<r;a++)o=h[a],n++,o.nodeType!==Fa&&(s=s.concat(o.getChildren().slice())),o._id===i._id&&(a=r);s.length>0&&s[0].getDepth()<=e&&l(s)}return i.nodeType!==Cu&&l(i.getStage().getChildren()),n}getDepth(){for(var e=0,i=this.parent;i;)e++,i=i.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Ot),this._clearSelfAndDescendantCache(Tt)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(e){let i=!1,n=this.parent;for(;n;){if(n.isCached()){i=!0;break}n=n.parent}i&&!e&&(e=!0);var s=this.getAbsoluteTransform(e).getMatrix(),r=new Dt,a=this.offset();return r.m=s.slice(),r.translate(a.x,a.y),r.getTranslation()}setAbsolutePosition(e){var i=this._clearTransform();this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,this._clearCache(Ot);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(e.x,e.y),e={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(Ot),this._clearSelfAndDescendantCache(Tt),this}_setTransform(e){var i;for(i in e)this.attrs[i]=e[i]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var i=e.x,n=e.y,s=this.x(),r=this.y();return i!==void 0&&(s+=i),n!==void 0&&(r+=n),this.setPosition({x:s,y:r}),this}_eachAncestorReverse(e,i){var n=[],s=this.getParent(),r,a;if(!(i&&i._id===this._id)){for(n.unshift(this);s&&(!i||s._id!==i._id);)n.unshift(s),s=s.parent;for(r=n.length,a=0;a<r;a++)e(n[a])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return m.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return m.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return m.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return m.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return m.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&m.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ts,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),i=this.getParent();return i&&!i._isUnderCache&&(e*=i.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},i=this.getAttrs(),n,s,r,a,o;e.attrs={};for(n in i)s=i[n],o=m.isObject(s)&&!m._isPlainObject(s)&&!m._isArray(s),!o&&(r=typeof this[n]=="function"&&this[n],delete i[n],a=r?r.call(this):null,i[n]=s,a!==s&&(e.attrs[n]=s));return e.className=this.getClassName(),m._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,i,n){var s=[];i&&this._isMatch(e)&&s.push(this);for(var r=this.parent;r;){if(r===n)return s;r._isMatch(e)&&s.push(r),r=r.parent}return s}isAncestorOf(e){return!1}findAncestor(e,i,n){return this.findAncestors(e,i,n)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var i=e.replace(/ /g,"").split(","),n=i.length,s,r;for(s=0;s<n;s++)if(r=i[s],m.isValidSelector(r)||(m.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),m.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),m.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(Ga,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,i={},n){return i.target=i.target||this,n?this._fireAndBubble(e,i):this._fire(e,i),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Tt,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var i;if(e)return i=new Dt,this._eachAncestorReverse(function(s){var r=s.transformsEnabled();r==="all"?i.multiply(s.getTransform()):r==="position"&&i.translate(s.x()-s.offsetX(),s.y()-s.offsetY())},e),i;i=this._cache.get(Tt)||new Dt,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var n=this.transformsEnabled();if(n==="all")i.multiply(this.getTransform());else if(n==="position"){const s=this.attrs.x||0,r=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;i.translate(s-a,r-o)}return i.dirty=!1,i}getAbsoluteScale(e){for(var i=this;i;)i._isUnderCache&&(e=i),i=i.getParent();const s=this.getAbsoluteTransform(e).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Ot,this._getTransform)}_getTransform(){var e,i,n=this._cache.get(Ot)||new Dt;n.reset();var s=this.x(),r=this.y(),a=X.getAngle(this.rotation()),o=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,d=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return(s!==0||r!==0)&&n.translate(s,r),a!==0&&n.rotate(a),(h!==0||c!==0)&&n.skew(h,c),(o!==1||l!==1)&&n.scale(o,l),(d!==0||f!==0)&&n.translate(-1*d,-1*f),n.dirty=!1,n}clone(e){var i=m.cloneObject(this.attrs),n,s,r,a,o;for(n in e)i[n]=e[n];var l=new this.constructor(i);for(n in this.eventListeners)for(s=this.eventListeners[n],r=s.length,a=0;a<r;a++)o=s[a],o.name.indexOf(wu)<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(o));return l}_toKonvaCanvas(e){e=e||{};var i=this.getClientRect(),n=this.getStage(),s=e.x!==void 0?e.x:Math.floor(i.x),r=e.y!==void 0?e.y:Math.floor(i.y),a=e.pixelRatio||1,o=new Oi({width:e.width||Math.ceil(i.width)||(n?n.width():0),height:e.height||Math.ceil(i.height)||(n?n.height():0),pixelRatio:a}),l=o.getContext();return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(s||r)&&l.translate(-1*s,-1*r),this.drawScene(o),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var i=e.mimeType||null,n=e.quality||null,s=this._toKonvaCanvas(e).toDataURL(i,n);return e.callback&&e.callback(s),s}toImage(e){return new Promise((i,n)=>{try{const s=e==null?void 0:e.callback;s&&delete e.callback,m._urlToImage(this.toDataURL(e),function(r){i(r),s==null||s(r)})}catch(s){n(s)}})}toBlob(e){return new Promise((i,n)=>{try{const s=e==null?void 0:e.callback;s&&delete e.callback,this.toCanvas(e).toBlob(r=>{i(r),s==null||s(r)})}catch(s){n(s)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():X.dragDistance}_off(e,i,n){var s=this.eventListeners[e],r,a,o;for(r=0;r<s.length;r++)if(a=s[r].name,o=s[r].handler,(a!=="konva"||i==="konva")&&(!i||a===i)&&(!n||n===o)){if(s.splice(r,1),s.length===0){delete this.eventListeners[e];break}r--}}_fireChangeEvent(e,i,n){this._fire(e+yu,{oldVal:i,newVal:n})}addName(e){if(!this.hasName(e)){var i=this.name(),n=i?i+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const i=this.name();if(!i)return!1;var n=(i||"").split(/\s/g);return n.indexOf(e)!==-1}removeName(e){var i=(this.name()||"").split(/\s/g),n=i.indexOf(e);return n!==-1&&(i.splice(n,1),this.name(i.join(" "))),this}setAttr(e,i){var n=this[Ha+m._capitalize(e)];return m._isFunction(n)?n.call(this,i):this._setAttr(e,i),this}_requestDraw(){if(X.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,i){var n=this.attrs[e];n===i&&!m.isObject(i)||(i==null?delete this.attrs[e]:this.attrs[e]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,i),this._requestDraw())}_setComponentAttr(e,i,n){var s;n!==void 0&&(s=this.attrs[e],s||(this.attrs[e]=this.getAttr(e)),this.attrs[e][i]=n,this._fireChangeEvent(e,s,n))}_fireAndBubble(e,i,n){i&&this.nodeType===Fa&&(i.target=this);var s=(e===Da||e===Na)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n);if(!s){this._fire(e,i);var r=(e===Da||e===Na)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,i,n):this._fireAndBubble.call(this.parent,e,i))}}_getProtoListeners(e){let i=this._cache.get(Fn);if(!i){i={};let s=Object.getPrototypeOf(this);for(;s;){if(!s.eventListeners){s=Object.getPrototypeOf(s);continue}for(var n in s.eventListeners){const r=s.eventListeners[n],a=i[n]||[];i[n]=r.concat(a)}s=Object.getPrototypeOf(s)}this._cache.set(Fn,i)}return i[e]}_fire(e,i){i=i||{},i.currentTarget=this,i.type=e;const n=this._getProtoListeners(e);if(n)for(var s=0;s<n.length;s++)n[s].handler.call(this,i);const r=this.eventListeners[e];if(r)for(var s=0;s<r.length;s++)r[s].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var i=e?e.pointerId:void 0,n=this.getStage(),s=this.getAbsolutePosition(),r=n._getPointerById(i)||n._changedPointerPositions[0]||s;oe._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-s.x,y:r.y-s.y},dragStatus:"ready",pointerId:i})}startDrag(e,i=!0){oe._dragElements.has(this._id)||this._createDragElement(e);const n=oe._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},i)}_setDragPosition(e,i){const n=this.getStage()._getPointerById(i.pointerId);if(!!n){var s={x:n.x-i.offset.x,y:n.y-i.offset.y},r=this.dragBoundFunc();if(r!==void 0){const a=r.call(this,s,e);a?s=a:m.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}}stopDrag(e){const i=oe._dragElements.get(this._id);i&&(i.dragStatus="stopped"),oe._endDragBefore(e),oe._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=oe._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var i=e.evt.button!==void 0,n=!i||X.dragButtons.indexOf(e.evt.button)>=0;if(!!n&&!this.isDragging()){var s=!1;oe._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(s=!0)}),s||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const i=oe._dragElements.get(this._id),n=i&&i.dragStatus==="dragging",s=i&&i.dragStatus==="ready";n?this.stopDrag():s&&oe._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const i=this.getStage();if(!i)return!1;const n={x:-e.x,y:-e.y,width:i.width()+2*e.x,height:i.height()+2*e.y};return m.haveIntersection(n,this.getClientRect())}static create(e,i){return m._isString(e)&&(e=JSON.parse(e)),this._createNode(e,i)}static _createNode(e,i){var n=U.prototype.getClassName.call(e),s=e.children,r,a,o;i&&(e.attrs.container=i),X[n]||(m.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const l=X[n];if(r=new l(e.attrs),s)for(a=s.length,o=0;o<a;o++)r.add(U._createNode(s[o]));return r}}U.prototype.nodeType="Node";U.prototype._attrsAffectingSize=[];U.prototype.eventListeners={};U.prototype.on.call(U.prototype,Su,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Ot),this._clearSelfAndDescendantCache(Tt)});U.prototype.on.call(U.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(pr)});U.prototype.on.call(U.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(fr)});U.prototype.on.call(U.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ts)});const de=E.addGetterSetter;de(U,"zIndex");de(U,"absolutePosition");de(U,"position");de(U,"x",0,se());de(U,"y",0,se());de(U,"globalCompositeOperation","source-over",zi());de(U,"opacity",1,se());de(U,"name","",zi());de(U,"id","",zi());de(U,"rotation",0,se());E.addComponentsGetterSetter(U,"scale",["x","y"]);de(U,"scaleX",1,se());de(U,"scaleY",1,se());E.addComponentsGetterSetter(U,"skew",["x","y"]);de(U,"skewX",0,se());de(U,"skewY",0,se());E.addComponentsGetterSetter(U,"offset",["x","y"]);de(U,"offsetX",0,se());de(U,"offsetY",0,se());de(U,"dragDistance",null,se());de(U,"width",0,se());de(U,"height",0,se());de(U,"listening",!0,Pt());de(U,"preventDefault",!0,Pt());de(U,"filters",null,function(t){return this._filterUpToDate=!1,t});de(U,"visible",!0,Pt());de(U,"transformsEnabled","all",zi());de(U,"size");de(U,"dragBoundFunc");de(U,"draggable",!1,Pt());E.backCompat(U,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});const wn=new Map,dl=X._global.PointerEvent!==void 0;function js(t){return wn.get(t)}function Wr(t){return{evt:t,pointerId:t.pointerId}}function ul(t,e){return wn.get(t)===e}function fl(t,e){hn(t),e.getStage()&&(wn.set(t,e),dl&&e._fire("gotpointercapture",Wr(new PointerEvent("gotpointercapture"))))}function hn(t,e){const i=wn.get(t);if(!i)return;const n=i.getStage();n&&n.content,wn.delete(t),dl&&i._fire("lostpointercapture",Wr(new PointerEvent("lostpointercapture")))}var pl="hasShadow",gl="shadowRGBA",_l="patternImage",ml="linearGradient",vl="radialGradient";let Gn;function Ks(){return Gn||(Gn=m.createCanvasElement().getContext("2d"),Gn)}const cn={};function xu(t){t.fill()}function ku(t){t.stroke()}function Eu(t){t.fill()}function Au(t){t.stroke()}function Pu(){this._clearCache(pl)}function Iu(){this._clearCache(gl)}function Mu(){this._clearCache(_l)}function Lu(){this._clearCache(ml)}function Ou(){this._clearCache(vl)}class R extends U{constructor(e){super(e);let i;for(;i=m.getRandomColor(),!(i&&!(i in cn)););this.colorKey=i,cn[i]=this}getContext(){return m.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return m.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(pl,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(_l,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=Ks();const i=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const n=new Dt;n.translate(this.fillPatternX(),this.fillPatternY()),n.rotate(X.getAngle(this.fillPatternRotation())),n.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),n.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=n.getMatrix(),r=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);i.setTransform(r)}return i}}_getLinearGradient(){return this._getCache(ml,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var i=Ks(),n=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),r=i.createLinearGradient(n.x,n.y,s.x,s.y),a=0;a<e.length;a+=2)r.addColorStop(e[a],e[a+1]);return r}}_getRadialGradient(){return this._getCache(vl,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var i=Ks(),n=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),r=i.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius()),a=0;a<e.length;a+=2)r.addColorStop(e[a],e[a+1]);return r}}getShadowRGBA(){return this._getCache(gl,this._getShadowRGBA)}_getShadowRGBA(){if(!!this.hasShadow()){var e=m.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var i=this.getStage(),n=i.bufferHitCanvas,s;return n.getContext().clear(),this.drawHit(n,null,!0),s=n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,s[3]>0}destroy(){return U.prototype.destroy.call(this),delete cn[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var i;if(!this.getStage()||!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const s=e||this.hasFill(),r=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(s&&r&&a)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(s&&r&&o&&l)}setStrokeHitEnabled(e){m.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const i=e.skipTransform,n=e.relativeTo,s=this.getSelfRect(),a=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=s.width+a,l=s.height+a,h=!e.skipShadow&&this.hasShadow(),c=h?this.shadowOffsetX():0,d=h?this.shadowOffsetY():0,f=o+Math.abs(c),v=l+Math.abs(d),x=h&&this.shadowBlur()||0,C=f+x*2,_=v+x*2,D={width:C,height:_,x:-(a/2+x)+Math.min(c,0)+s.x,y:-(a/2+x)+Math.min(d,0)+s.y};return i?D:this._transformedRect(D,n)}drawScene(e,i){var n=this.getLayer(),s=e||n.getCanvas(),r=s.getContext(),a=this._getCanvasCache(),o=this.getSceneFunc(),l=this.hasShadow(),h,c,d,f=s.isCache,v=i===this;if(!this.isVisible()&&!v)return this;if(a){r.save();var x=this.getAbsoluteTransform(i).getMatrix();return r.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._drawCachedSceneCanvas(r),r.restore(),this}if(!o)return this;if(r.save(),this._useBufferCanvas()&&!f){h=this.getStage(),c=h.bufferCanvas,d=c.getContext(),d.clear(),d.save(),d._applyLineJoin(this);var C=this.getAbsoluteTransform(i).getMatrix();d.transform(C[0],C[1],C[2],C[3],C[4],C[5]),o.call(this,d,this),d.restore();var _=c.pixelRatio;l&&r._applyShadow(this),r._applyOpacity(this),r._applyGlobalCompositeOperation(this),r.drawImage(c._canvas,0,0,c.width/_,c.height/_)}else{if(r._applyLineJoin(this),!v){var C=this.getAbsoluteTransform(i).getMatrix();r.transform(C[0],C[1],C[2],C[3],C[4],C[5]),r._applyOpacity(this),r._applyGlobalCompositeOperation(this)}l&&r._applyShadow(this),o.call(this,r,this)}return r.restore(),this}drawHit(e,i,n=!1){if(!this.shouldDrawHit(i,n))return this;var s=this.getLayer(),r=e||s.hitCanvas,a=r&&r.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||m.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();var c=this.getAbsoluteTransform(i).getMatrix();return a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),!(this===i)){var f=this.getAbsoluteTransform(i).getMatrix();a.transform(f[0],f[1],f[2],f[3],f[4],f[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(e=0){var i=this._getCanvasCache(),n=this._getCachedSceneCanvas(),s=i.hit,r=s.getContext(),a=s.getWidth(),o=s.getHeight(),l,h,c,d,f,v;r.clear(),r.drawImage(n._canvas,0,0,a,o);try{for(l=r.getImageData(0,0,a,o),h=l.data,c=h.length,d=m._hexToRgb(this.colorKey),f=0;f<c;f+=4)v=h[f+3],v>e?(h[f]=d.r,h[f+1]=d.g,h[f+2]=d.b,h[f+3]=255):h[f+3]=0;r.putImageData(l,0,0)}catch(x){m.error("Unable to draw hit graph from cached scene canvas. "+x.message)}return this}hasPointerCapture(e){return ul(e,this)}setPointerCapture(e){fl(e,this)}releaseCapture(e){hn(e)}}R.prototype._fillFunc=xu;R.prototype._strokeFunc=ku;R.prototype._fillFuncHit=Eu;R.prototype._strokeFuncHit=Au;R.prototype._centroid=!1;R.prototype.nodeType="Shape";Xt(R);R.prototype.eventListeners={};R.prototype.on.call(R.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Pu);R.prototype.on.call(R.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Iu);R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",Mu);R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Lu);R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",Ou);E.addGetterSetter(R,"stroke",void 0,cl());E.addGetterSetter(R,"strokeWidth",2,se());E.addGetterSetter(R,"fillAfterStrokeEnabled",!1);E.addGetterSetter(R,"hitStrokeWidth","auto",Fr());E.addGetterSetter(R,"strokeHitEnabled",!0,Pt());E.addGetterSetter(R,"perfectDrawEnabled",!0,Pt());E.addGetterSetter(R,"shadowForStrokeEnabled",!0,Pt());E.addGetterSetter(R,"lineJoin");E.addGetterSetter(R,"lineCap");E.addGetterSetter(R,"sceneFunc");E.addGetterSetter(R,"hitFunc");E.addGetterSetter(R,"dash");E.addGetterSetter(R,"dashOffset",0,se());E.addGetterSetter(R,"shadowColor",void 0,zi());E.addGetterSetter(R,"shadowBlur",0,se());E.addGetterSetter(R,"shadowOpacity",1,se());E.addComponentsGetterSetter(R,"shadowOffset",["x","y"]);E.addGetterSetter(R,"shadowOffsetX",0,se());E.addGetterSetter(R,"shadowOffsetY",0,se());E.addGetterSetter(R,"fillPatternImage");E.addGetterSetter(R,"fill",void 0,cl());E.addGetterSetter(R,"fillPatternX",0,se());E.addGetterSetter(R,"fillPatternY",0,se());E.addGetterSetter(R,"fillLinearGradientColorStops");E.addGetterSetter(R,"strokeLinearGradientColorStops");E.addGetterSetter(R,"fillRadialGradientStartRadius",0);E.addGetterSetter(R,"fillRadialGradientEndRadius",0);E.addGetterSetter(R,"fillRadialGradientColorStops");E.addGetterSetter(R,"fillPatternRepeat","repeat");E.addGetterSetter(R,"fillEnabled",!0);E.addGetterSetter(R,"strokeEnabled",!0);E.addGetterSetter(R,"shadowEnabled",!0);E.addGetterSetter(R,"dashEnabled",!0);E.addGetterSetter(R,"strokeScaleEnabled",!0);E.addGetterSetter(R,"fillPriority","color");E.addComponentsGetterSetter(R,"fillPatternOffset",["x","y"]);E.addGetterSetter(R,"fillPatternOffsetX",0,se());E.addGetterSetter(R,"fillPatternOffsetY",0,se());E.addComponentsGetterSetter(R,"fillPatternScale",["x","y"]);E.addGetterSetter(R,"fillPatternScaleX",1,se());E.addGetterSetter(R,"fillPatternScaleY",1,se());E.addComponentsGetterSetter(R,"fillLinearGradientStartPoint",["x","y"]);E.addComponentsGetterSetter(R,"strokeLinearGradientStartPoint",["x","y"]);E.addGetterSetter(R,"fillLinearGradientStartPointX",0);E.addGetterSetter(R,"strokeLinearGradientStartPointX",0);E.addGetterSetter(R,"fillLinearGradientStartPointY",0);E.addGetterSetter(R,"strokeLinearGradientStartPointY",0);E.addComponentsGetterSetter(R,"fillLinearGradientEndPoint",["x","y"]);E.addComponentsGetterSetter(R,"strokeLinearGradientEndPoint",["x","y"]);E.addGetterSetter(R,"fillLinearGradientEndPointX",0);E.addGetterSetter(R,"strokeLinearGradientEndPointX",0);E.addGetterSetter(R,"fillLinearGradientEndPointY",0);E.addGetterSetter(R,"strokeLinearGradientEndPointY",0);E.addComponentsGetterSetter(R,"fillRadialGradientStartPoint",["x","y"]);E.addGetterSetter(R,"fillRadialGradientStartPointX",0);E.addGetterSetter(R,"fillRadialGradientStartPointY",0);E.addComponentsGetterSetter(R,"fillRadialGradientEndPoint",["x","y"]);E.addGetterSetter(R,"fillRadialGradientEndPointX",0);E.addGetterSetter(R,"fillRadialGradientEndPointY",0);E.addGetterSetter(R,"fillPatternRotation",0);E.backCompat(R,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});function gr(t,e,i,n,s,r,a){var o=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),l=Math.sqrt(Math.pow(s-i,2)+Math.pow(r-n,2)),h=a*o/(o+l),c=a*l/(o+l),d=i-h*(s-t),f=n-h*(r-e),v=i+c*(s-t),x=n+c*(r-e);return[d,f,v,x]}function Wa(t,e){var i=t.length,n=[],s,r;for(s=2;s<i-2;s+=2)r=gr(t[s-2],t[s-1],t[s],t[s+1],t[s+2],t[s+3],e),!isNaN(r[0])&&(n.push(r[0]),n.push(r[1]),n.push(t[s]),n.push(t[s+1]),n.push(r[2]),n.push(r[3]));return n}class Ct extends R{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var i=this.points(),n=i.length,s=this.tension(),r=this.closed(),a=this.bezier(),o,l,h;if(!!n){if(e.beginPath(),e.moveTo(i[0],i[1]),s!==0&&n>4){for(o=this.getTensionPoints(),l=o.length,h=r?0:4,r||e.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)e.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);r||e.quadraticCurveTo(o[l-2],o[l-1],i[n-2],i[n-1])}else if(a)for(h=2;h<n;)e.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<n;h+=2)e.lineTo(i[h],i[h+1]);r?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Wa(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),i=e.length,n=this.tension(),s=gr(e[i-2],e[i-1],e[0],e[1],e[2],e[3],n),r=gr(e[i-4],e[i-3],e[i-2],e[i-1],e[0],e[1],n),a=Wa(e,n),o=[s[2],s[3]].concat(a).concat([r[0],r[1],e[i-2],e[i-1],r[2],r[3],s[0],s[1],e[0],e[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var i=e[0],n=e[0],s=e[1],r=e[1],a,o,l=0;l<e.length/2;l++)a=e[l*2],o=e[l*2+1],i=Math.min(i,a),n=Math.max(n,a),s=Math.min(s,o),r=Math.max(r,o);return{x:i,y:s,width:n-i,height:r-s}}}Ct.prototype.className="Line";Ct.prototype._attrsAffectingSize=["points","bezier","tension"];Xt(Ct);E.addGetterSetter(Ct,"closed",!1);E.addGetterSetter(Ct,"bezier",!1);E.addGetterSetter(Ct,"tension",0,se());E.addGetterSetter(Ct,"points",[],su());class Ui extends R{_sceneFunc(e){var i=this.cornerRadius(),n=this.width(),s=this.height();e.beginPath(),i?m.drawRoundedRectPath(e,n,s,i):e.rect(0,0,n,s),e.closePath(),e.fillStrokeShape(this)}}Ui.prototype.className="Rect";Xt(Ui);E.addGetterSetter(Ui,"cornerRadius",0,nu(4));function Ru(t){return Array.from(t)}var Ci="auto",Du="center",qi="justify",Nu="Change.konva",Hu="2d",Ba="-",yl="left",Fu="text",Gu="Text",Wu="top",Bu="bottom",za="middle",bl="normal",zu="px ",Wn=" ",Uu="right",Vu="word",Xu="char",Ua="none",Zs="\u2026",wl=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Yu=wl.length;function $u(t){return t.split(",").map(e=>{e=e.trim();const i=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return i&&!n&&(e=`"${e}"`),e}).join(", ")}var Bn;function qs(){return Bn||(Bn=m.createCanvasElement().getContext(Hu),Bn)}function ju(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Ku(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Zu(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class ve extends R{constructor(e){super(Zu(e)),this._partialTextX=0,this._partialTextY=0;for(var i=0;i<Yu;i++)this.on(wl[i]+Nu,this._setTextData);this._setTextData()}_sceneFunc(e){var i=this.textArr,n=i.length;if(!!this.text()){var s=this.padding(),r=this.fontSize(),a=this.lineHeight()*r,o=this.verticalAlign(),l=0,h=this.align(),c=this.getWidth(),d=this.letterSpacing(),f=this.fill(),v=this.textDecoration(),x=v.indexOf("underline")!==-1,C=v.indexOf("line-through")!==-1,_,D=0,D=a/2,w=0,F=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",za),e.setAttr("textAlign",yl),o===za?l=(this.getHeight()-n*a-s*2)/2:o===Bu&&(l=this.getHeight()-n*a-s*2),e.translate(s,l+s),_=0;_<n;_++){var w=0,F=0,L=i[_],Z=L.text,ie=L.width,ye=L.lastInParagraph,J,ue,fe;if(e.save(),h===Uu?w+=c-ie-s*2:h===Du&&(w+=(c-ie-s*2)/2),x){e.save(),e.beginPath(),e.moveTo(w,D+F+Math.round(r/2)),J=Z.split(" ").length-1,ue=J===0,fe=h===qi&&!ye?c-s*2:ie,e.lineTo(w+Math.round(fe),D+F+Math.round(r/2)),e.lineWidth=r/15;const pe=this._getLinearGradient();e.strokeStyle=pe||f,e.stroke(),e.restore()}if(C){e.save(),e.beginPath(),e.moveTo(w,D+F),J=Z.split(" ").length-1,ue=J===0,fe=h===qi&&ye&&!ue?c-s*2:ie,e.lineTo(w+Math.round(fe),D+F),e.lineWidth=r/15;const pe=this._getLinearGradient();e.strokeStyle=pe||f,e.stroke(),e.restore()}if(d!==0||h===qi){J=Z.split(" ").length-1;for(var Ae=Ru(Z),Be=0;Be<Ae.length;Be++){var Le=Ae[Be];Le===" "&&!ye&&h===qi&&(w+=(c-s*2-ie)/J),this._partialTextX=w,this._partialTextY=D+F,this._partialText=Le,e.fillStrokeShape(this),w+=this.measureSize(Le).width+d}}else this._partialTextX=w,this._partialTextY=D+F,this._partialText=Z,e.fillStrokeShape(this);e.restore(),n>1&&(D+=a)}}}_hitFunc(e){var i=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,i,n),e.closePath(),e.fillStrokeShape(this)}setText(e){var i=m._isString(e)?e:e==null?"":e+"";return this._setAttr(Fu,i),this}getWidth(){var e=this.attrs.width===Ci||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Ci||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return m.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var i=qs(),n=this.fontSize(),s;return i.save(),i.font=this._getContextFont(),s=i.measureText(e),i.restore(),{width:s.width,height:n}}_getContextFont(){return this.fontStyle()+Wn+this.fontVariant()+Wn+(this.fontSize()+zu)+$u(this.fontFamily())}_addTextLine(e){this.align()===qi&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){var i=this.letterSpacing(),n=e.length;return qs().measureText(e).width+(n?i*(n-1):0)}_setTextData(){var e=this.text().split(`
`),i=+this.fontSize(),n=0,s=this.lineHeight()*i,r=this.attrs.width,a=this.attrs.height,o=r!==Ci&&r!==void 0,l=a!==Ci&&a!==void 0,h=this.padding(),c=r-h*2,d=a-h*2,f=0,v=this.wrap(),x=v!==Ua,C=v!==Xu&&x,_=this.ellipsis();this.textArr=[],qs().font=this._getContextFont();for(var D=_?this._getTextWidth(Zs):0,w=0,F=e.length;w<F;++w){var L=e[w],Z=this._getTextWidth(L);if(o&&Z>c)for(;L.length>0;){for(var ie=0,ye=L.length,J="",ue=0;ie<ye;){var fe=ie+ye>>>1,Ae=L.slice(0,fe+1),Be=this._getTextWidth(Ae)+D;Be<=c?(ie=fe+1,J=Ae,ue=Be):ye=fe}if(J){if(C){var Le,ft=L[J.length],st=ft===Wn||ft===Ba;st&&ue<=c?Le=J.length:Le=Math.max(J.lastIndexOf(Wn),J.lastIndexOf(Ba))+1,Le>0&&(ie=Le,J=J.slice(0,ie),ue=this._getTextWidth(J))}J=J.trimRight(),this._addTextLine(J),n=Math.max(n,ue),f+=s;var pe=this._shouldHandleEllipsis(f);if(pe){this._tryToAddEllipsisToLastLine();break}if(L=L.slice(ie),L=L.trimLeft(),L.length>0&&(Z=this._getTextWidth(L),Z<=c)){this._addTextLine(L),f+=s,n=Math.max(n,Z);break}}else break}else this._addTextLine(L),f+=s,n=Math.max(n,Z),this._shouldHandleEllipsis(f)&&w<F-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&f+s>d)break}this.textHeight=i,this.textWidth=n}_shouldHandleEllipsis(e){var i=+this.fontSize(),n=this.lineHeight()*i,s=this.attrs.height,r=s!==Ci&&s!==void 0,a=this.padding(),o=s-a*2,l=this.wrap(),h=l!==Ua;return!h||r&&e+n>o}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,i=e!==Ci&&e!==void 0,n=this.padding(),s=e-n*2,r=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(!(!a||!r)){if(i){var o=this._getTextWidth(a.text+Zs)<s;o||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+Zs)}}getStrokeScaleEnabled(){return!0}}ve.prototype._fillFunc=ju;ve.prototype._strokeFunc=Ku;ve.prototype.className=Gu;ve.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Xt(ve);E.overWriteSetter(ve,"width",Fr());E.overWriteSetter(ve,"height",Fr());E.addGetterSetter(ve,"fontFamily","Arial");E.addGetterSetter(ve,"fontSize",12,se());E.addGetterSetter(ve,"fontStyle",bl);E.addGetterSetter(ve,"fontVariant",bl);E.addGetterSetter(ve,"padding",0,se());E.addGetterSetter(ve,"align",yl);E.addGetterSetter(ve,"verticalAlign",Wu);E.addGetterSetter(ve,"lineHeight",1,se());E.addGetterSetter(ve,"wrap",Vu);E.addGetterSetter(ve,"ellipsis",!1,Pt());E.addGetterSetter(ve,"letterSpacing",0,se());E.addGetterSetter(ve,"text","",zi());E.addGetterSetter(ve,"textDecoration","");class qe extends U{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const i=this.children||[];var n=[];return i.forEach(function(s){e(s)&&n.push(s)}),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var i=0;i<e.length;i++)this.add(e[i]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var i=this._generalFind(e,!0);return i.length>0?i[0]:void 0}_generalFind(e,i){var n=[];return this._descendants(s=>{const r=s._isMatch(e);return r&&n.push(s),!!(r&&i)}),n}_descendants(e){let i=!1;const n=this.getChildren();for(const s of n){if(i=e(s),i)return!0;if(!!s.hasChildren()&&(i=s._descendants(e),i))return!0}return!1}toObject(){var e=U.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(i=>{e.children.push(i.toObject())}),e}isAncestorOf(e){for(var i=e.getParent();i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(e){var i=U.prototype.clone.call(this,e);return this.getChildren().forEach(function(n){i.add(n.clone())}),i}getAllIntersections(e){var i=[];return this.find("Shape").forEach(function(n){n.isVisible()&&n.intersects(e)&&i.push(n)}),i}_clearSelfAndDescendantCache(e){var i;super._clearSelfAndDescendantCache(e),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(n){n._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(i,n){i.index=n}),this._requestDraw()}drawScene(e,i){var n=this.getLayer(),s=e||n&&n.getCanvas(),r=s&&s.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=s&&s.isCache;if(!this.isVisible()&&!l)return this;if(o){r.save();var h=this.getAbsoluteTransform(i).getMatrix();r.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(r),r.restore()}else this._drawChildren("drawScene",s,i);return this}drawHit(e,i){if(!this.shouldDrawHit(i))return this;var n=this.getLayer(),s=e||n&&n.hitCanvas,r=s&&s.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){r.save();var l=this.getAbsoluteTransform(i).getMatrix();r.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",s,i);return this}_drawChildren(e,i,n){var s,r=i&&i.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h=a&&o||l;const c=n===this;if(h){r.save();var d=this.getAbsoluteTransform(n),f=d.getMatrix();if(r.transform(f[0],f[1],f[2],f[3],f[4],f[5]),r.beginPath(),l)l.call(this,r,this);else{var v=this.clipX(),x=this.clipY();r.rect(v,x,a,o)}r.clip(),f=d.copy().invert().getMatrix(),r.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var C=!c&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";C&&(r.save(),r._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(_){_[e](i,n)}),C&&r.restore(),h&&r.restore()}getClientRect(e){var i;e=e||{};var n=e.skipTransform,s=e.relativeTo,r,a,o,l,h={x:1/0,y:1/0,width:0,height:0},c=this;(i=this.children)===null||i===void 0||i.forEach(function(C){if(!!C.visible()){var _=C.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});_.width===0&&_.height===0||(r===void 0?(r=_.x,a=_.y,o=_.x+_.width,l=_.y+_.height):(r=Math.min(r,_.x),a=Math.min(a,_.y),o=Math.max(o,_.x+_.width),l=Math.max(l,_.y+_.height)))}});for(var d=this.find("Shape"),f=!1,v=0;v<d.length;v++){var x=d[v];if(x._isVisible(this)){f=!0;break}}return f&&r!==void 0?h={x:r,y:a,width:o-r,height:l-a}:h={x:0,y:0,width:0,height:0},n?h:this._transformedRect(h,s)}}E.addComponentsGetterSetter(qe,"clip",["x","y","width","height"]);E.addGetterSetter(qe,"clipX",void 0,se());E.addGetterSetter(qe,"clipY",void 0,se());E.addGetterSetter(qe,"clipWidth",void 0,se());E.addGetterSetter(qe,"clipHeight",void 0,se());E.addGetterSetter(qe,"clipFunc");var qu="Stage",Ju="string",Va="px",Qu="mouseout",Cl="mouseleave",Sl="mouseover",Tl="mouseenter",xl="mousemove",kl="mousedown",El="mouseup",en="pointermove",tn="pointerdown",Ei="pointerup",nn="pointercancel",ef="lostpointercapture",zn="pointerout",Un="pointerleave",Vn="pointerover",Xn="pointerenter",_r="contextmenu",Al="touchstart",Pl="touchend",Il="touchmove",Ml="touchcancel",mr="wheel",tf=5,nf=[[Tl,"_pointerenter"],[kl,"_pointerdown"],[xl,"_pointermove"],[El,"_pointerup"],[Cl,"_pointerleave"],[Al,"_pointerdown"],[Il,"_pointermove"],[Pl,"_pointerup"],[Ml,"_pointercancel"],[Sl,"_pointerover"],[mr,"_wheel"],[_r,"_contextmenu"],[tn,"_pointerdown"],[en,"_pointermove"],[Ei,"_pointerup"],[nn,"_pointercancel"],[ef,"_lostpointercapture"]];const Js={mouse:{[zn]:Qu,[Un]:Cl,[Vn]:Sl,[Xn]:Tl,[en]:xl,[tn]:kl,[Ei]:El,[nn]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[zn]:"touchout",[Un]:"touchleave",[Vn]:"touchover",[Xn]:"touchenter",[en]:Il,[tn]:Al,[Ei]:Pl,[nn]:Ml,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[zn]:zn,[Un]:Un,[Vn]:Vn,[Xn]:Xn,[en]:en,[tn]:tn,[Ei]:Ei,[nn]:nn,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},sn=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",Si=t=>{const e=sn(t);if(e==="pointer")return X.pointerEventsEnabled&&Js.pointer;if(e==="touch")return Js.touch;if(e==="mouse")return Js.mouse};function Xa(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&m.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const sf="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",ns=[];class Rs extends qe{constructor(e){super(Xa(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),ns.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Xa(this.attrs)}),this._checkVisibility()}_validateAdd(e){const i=e.getType()==="Layer",n=e.getType()==="FastLayer";i||n||m.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===Ju){if(e.charAt(0)==="."){var i=e.slice(1);e=document.getElementsByClassName(i)[0]}else{var n;e.charAt(0)!=="#"?n=e:n=e.slice(1),e=document.getElementById(n)}if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,i=e.length,n;for(n=0;n<i;n++)e[n].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),qe.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&m._isInDocument(e)&&this.container().removeChild(e);var i=ns.indexOf(this);return i>-1&&ns.splice(i,1),m.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(m.warn(sf),null)}_getPointerById(e){return this._pointerPositions.find(i=>i.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var i=new Oi({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=i.getContext()._context,s=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),s.forEach(function(r){if(!!r.isVisible()){var a=r._toKonvaCanvas(e);n.drawImage(a._canvas,e.x,e.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}}),i}getIntersection(e){if(!e)return null;var i=this.children,n=i.length,s=n-1,r;for(r=s;r>=0;r--){const a=i[r].getIntersection(e);if(a)return a}return null}_resizeDOM(){var e=this.width(),i=this.height();this.content&&(this.content.style.width=e+Va,this.content.style.height=i+Va),this.bufferCanvas.setSize(e,i),this.bufferHitCanvas.setSize(e,i),this.children.forEach(n=>{n.setSize({width:e,height:i}),n.draw()})}add(e,...i){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(e);var s=this.children.length;return s>tf&&m.warn("The stage has "+s+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),X.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return ul(e,this)}setPointerCapture(e){fl(e,this)}releaseCapture(e){hn(e)}getLayers(){return this.children}_bindContentEvents(){!X.isBrowser||nf.forEach(([e,i])=>{this.content.addEventListener(e,n=>{this[i](n)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const i=Si(e.type);this._fire(i.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const i=Si(e.type);this._fire(i.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let i=this[e+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(e){const i=Si(e.type),n=sn(e.type);if(!!i){this.setPointersPositions(e);var s=this._getTargetShape(n),r=!oe.isDragging||X.hitOnDragEnabled;s&&r?(s._fireAndBubble(i.pointerout,{evt:e}),s._fireAndBubble(i.pointerleave,{evt:e}),this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):r&&(this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const i=Si(e.type),n=sn(e.type);if(!!i){this.setPointersPositions(e);var s=!1;this._changedPointerPositions.forEach(r=>{var a=this.getIntersection(r);if(oe.justDragged=!1,X["_"+n+"ListenClick"]=!0,!(a&&a.isListening()))return;X.capturePointerEventsEnabled&&a.setPointerCapture(r.id),this[n+"ClickStartShape"]=a,a._fireAndBubble(i.pointerdown,{evt:e,pointerId:r.id}),s=!0;const l=e.type.indexOf("touch")>=0;a.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),s||this._fire(i.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const i=Si(e.type),n=sn(e.type);if(!i)return;oe.isDragging&&oe.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var s=!oe.isDragging||X.hitOnDragEnabled;if(!s)return;var r={};let a=!1;var o=this._getTargetShape(n);this._changedPointerPositions.forEach(l=>{const h=js(l.id)||this.getIntersection(l),c=l.id,d={evt:e,pointerId:c};var f=o!==h;if(f&&o&&(o._fireAndBubble(i.pointerout,Object.assign({},d),h),o._fireAndBubble(i.pointerleave,Object.assign({},d),h)),h){if(r[h._id])return;r[h._id]=!0}h&&h.isListening()?(a=!0,f&&(h._fireAndBubble(i.pointerover,Object.assign({},d),o),h._fireAndBubble(i.pointerenter,Object.assign({},d),o),this[n+"targetShape"]=h),h._fireAndBubble(i.pointermove,Object.assign({},d))):o&&(this._fire(i.pointerover,{evt:e,target:this,currentTarget:this,pointerId:c}),this[n+"targetShape"]=null)}),a||this._fire(i.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const i=Si(e.type),n=sn(e.type);if(!i)return;this.setPointersPositions(e);const s=this[n+"ClickStartShape"],r=this[n+"ClickEndShape"];var a={};let o=!1;this._changedPointerPositions.forEach(l=>{const h=js(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),a[h._id])return;a[h._id]=!0}const c=l.id,d={evt:e,pointerId:c};let f=!1;X["_"+n+"InDblClickWindow"]?(f=!0,clearTimeout(this[n+"DblTimeout"])):oe.justDragged||(X["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){X["_"+n+"InDblClickWindow"]=!1},X.dblClickWindow),h&&h.isListening()?(o=!0,this[n+"ClickEndShape"]=h,h._fireAndBubble(i.pointerup,Object.assign({},d)),X["_"+n+"ListenClick"]&&s&&s===h&&(h._fireAndBubble(i.pointerclick,Object.assign({},d)),f&&r&&r===h&&h._fireAndBubble(i.pointerdblclick,Object.assign({},d)))):(this[n+"ClickEndShape"]=null,X["_"+n+"ListenClick"]&&this._fire(i.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:c}),f&&this._fire(i.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:c}))}),o||this._fire(i.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),X["_"+n+"ListenClick"]=!1,e.cancelable&&n!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(_r,{evt:e}):this._fire(_r,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(mr,{evt:e}):this._fire(mr,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const i=js(e.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(Ei,Wr(e)),hn(e.pointerId)}_lostpointercapture(e){hn(e.pointerId)}setPointersPositions(e){var i=this._getContentPosition(),n=null,s=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,r=>{this._pointerPositions.push({id:r.identifier,x:(r.clientX-i.left)/i.scaleX,y:(r.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,r=>{this._changedPointerPositions.push({id:r.identifier,x:(r.clientX-i.left)/i.scaleX,y:(r.clientY-i.top)/i.scaleY})})):(n=(e.clientX-i.left)/i.scaleX,s=(e.clientY-i.top)/i.scaleY,this.pointerPos={x:n,y:s},this._pointerPositions=[{x:n,y:s,id:m._getFirstPointerId(e)}],this._changedPointerPositions=[{x:n,y:s,id:m._getFirstPointerId(e)}])}_setPointerPosition(e){m.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Oi({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Gr({pixelRatio:1,width:this.width(),height:this.height()}),!!X.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return m.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}Rs.prototype.nodeType=qu;Xt(Rs);E.addGetterSetter(Rs,"container");var rf="#",af="beforeDraw",of="draw",Ll=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],lf=Ll.length;class di extends qe{constructor(e){super(e),this.canvas=new Oi,this.hitCanvas=new Gr({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),e<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[e+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){U.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=U.prototype.moveUp.call(this);if(!e)return!1;var i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(U.prototype.moveDown.call(this)){var e=this.getStage();if(e){var i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(U.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return U.prototype.remove.call(this),e&&e.parentNode&&m._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:i}){return this.canvas.setSize(e,i),this.hitCanvas.setSize(e,i),this._setSmoothEnabled(),this}_validateAdd(e){var i=e.getType();i!=="Group"&&i!=="Shape"&&m.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),U.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){m.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){m.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,m.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var i=1,n=!1;;){for(let s=0;s<lf;s++){const r=Ll[s],a=this._getIntersection({x:e.x+r.x*i,y:e.y+r.y*i}),o=a.shape;if(o)return o;if(n=!!a.antialiased,!a.antialiased)break}if(n)i+=1;else return null}}_getIntersection(e){const i=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*i),Math.round(e.y*i),1,1).data,s=n[3];if(s===255){const r=m._rgbToHex(n[0],n[1],n[2]),a=cn[rf+r];return a?{shape:a}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(e,i){var n=this.getLayer(),s=e||n&&n.getCanvas();return this._fire(af,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),qe.prototype.drawScene.call(this,s,i),this._fire(of,{node:this}),this}drawHit(e,i){var n=this.getLayer(),s=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),qe.prototype.drawHit.call(this,s,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){m.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return m.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,i=!!this.hitCanvas._canvas.parentNode;i?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return m.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}di.prototype.nodeType="Layer";Xt(di);E.addGetterSetter(di,"imageSmoothingEnabled",!0);E.addGetterSetter(di,"clearBeforeDraw",!0);E.addGetterSetter(di,"hitGraphEnabled",!0,Pt());class Br extends di{constructor(e){super(e),this.listening(!1),m.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Br.prototype.nodeType="FastLayer";Xt(Br);class zr extends qe{_validateAdd(e){var i=e.getType();i!=="Group"&&i!=="Shape"&&m.throw("You may only add groups and shapes to groups.")}}zr.prototype.nodeType="Group";Xt(zr);var Qs=function(){return Li.performance&&Li.performance.now?function(){return Li.performance.now()}:function(){return new Date().getTime()}}();class tt{constructor(e,i){this.id=tt.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Qs(),frameRate:0},this.func=e,this.setLayers(i)}setLayers(e){var i=[];return e?e.length>0?i=e:i=[e]:i=[],this.layers=i,this}getLayers(){return this.layers}addLayer(e){var i=this.layers,n=i.length,s;for(s=0;s<n;s++)if(i[s]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=tt,i=e.animations,n=i.length,s;for(s=0;s<n;s++)if(i[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Qs(),tt._addAnimation(this),this}stop(){return tt._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var i=e.id,n=this.animations,s=n.length,r;for(r=0;r<s;r++)if(n[r].id===i){this.animations.splice(r,1);break}}static _runFrames(){var e={},i=this.animations,n,s,r,a,o,l,h,c,d;for(a=0;a<i.length;a++)if(n=i[a],s=n.layers,r=n.func,n._updateFrameObject(Qs()),l=s.length,r?d=r.call(n,n.frame)!==!1:d=!0,!!d)for(o=0;o<l;o++)h=s[o],h._id!==void 0&&(e[h._id]=h);for(c in e)!e.hasOwnProperty(c)||e[c].batchDraw()}static _animationLoop(){var e=tt;e.animations.length?(e._runFrames(),m.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,m.requestAnimFrame(this._animationLoop))}}tt.animations=[];tt.animIdCounter=0;tt.animRunning=!1;var hf={node:1,duration:1,easing:1,onFinish:1,yoyo:1},cf=1,Ya=2,$a=3,df=0,ja=["fill","stroke","shadowColor"];class uf{constructor(e,i,n,s,r,a,o){this.prop=e,this.propFunc=i,this.begin=s,this._pos=s,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=r-this.begin,this.pause()}fire(e){var i=this[e];i&&i()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=Ya,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=$a,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===Ya?this.setTime(e):this.state===$a&&this.setTime(this.duration-e)}pause(){this.state=cf,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Te{constructor(e){var i=this,n=e.node,s=n._id,r,a=e.easing||dn.Linear,o=!!e.yoyo,l;typeof e.duration>"u"?r=.3:e.duration===0?r=.001:r=e.duration,this.node=n,this._id=df++;var h=n.getLayer()||(n instanceof X.Stage?n.getLayers():null);h||m.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new tt(function(){i.tween.onEnterFrame()},h),this.tween=new uf(l,function(c){i._tweenFunc(c)},a,0,1,r*1e3,o),this._addListeners(),Te.attrs[s]||(Te.attrs[s]={}),Te.attrs[s][this._id]||(Te.attrs[s][this._id]={}),Te.tweens[s]||(Te.tweens[s]={});for(l in e)hf[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,i){var n=this.node,s=n._id,r,a,o,l,h,c,d,f;if(o=Te.tweens[s][e],o&&delete Te.attrs[s][o][e],r=n.getAttr(e),m._isArray(i))if(a=[],h=Math.max(i.length,r.length),e==="points"&&i.length!==r.length&&(i.length>r.length?(d=r,r=m._prepareArrayForTween(r,i,n.closed())):(c=i,i=m._prepareArrayForTween(i,r,n.closed()))),e.indexOf("fill")===0)for(l=0;l<h;l++)if(l%2===0)a.push(i[l]-r[l]);else{var v=m.colorToRGBA(r[l]);f=m.colorToRGBA(i[l]),r[l]=v,a.push({r:f.r-v.r,g:f.g-v.g,b:f.b-v.b,a:f.a-v.a})}else for(l=0;l<h;l++)a.push(i[l]-r[l]);else ja.indexOf(e)!==-1?(r=m.colorToRGBA(r),f=m.colorToRGBA(i),a={r:f.r-r.r,g:f.g-r.g,b:f.b-r.b,a:f.a-r.a}):a=i-r;Te.attrs[s][this._id][e]={start:r,diff:a,end:i,trueEnd:c,trueStart:d},Te.tweens[s][e]=this._id}_tweenFunc(e){var i=this.node,n=Te.attrs[i._id][this._id],s,r,a,o,l,h,c,d;for(s in n){if(r=n[s],a=r.start,o=r.diff,d=r.end,m._isArray(a))if(l=[],c=Math.max(a.length,d.length),s.indexOf("fill")===0)for(h=0;h<c;h++)h%2===0?l.push((a[h]||0)+o[h]*e):l.push("rgba("+Math.round(a[h].r+o[h].r*e)+","+Math.round(a[h].g+o[h].g*e)+","+Math.round(a[h].b+o[h].b*e)+","+(a[h].a+o[h].a*e)+")");else for(h=0;h<c;h++)l.push((a[h]||0)+o[h]*e);else ja.indexOf(s)!==-1?l="rgba("+Math.round(a.r+o.r*e)+","+Math.round(a.g+o.g*e)+","+Math.round(a.b+o.b*e)+","+(a.a+o.a*e)+")":l=a+o*e;i.setAttr(s,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,i=Te.attrs[e._id][this._id];i.points&&i.points.trueEnd&&e.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,i=Te.attrs[e._id][this._id];i.points&&i.points.trueStart&&e.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,i=this._id,n=Te.tweens[e],s;this.pause();for(s in n)delete Te.tweens[e][s];delete Te.attrs[e][i]}}Te.attrs={};Te.tweens={};U.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var i=new Te(t);i.play()};const dn={BackEaseIn(t,e,i,n){var s=1.70158;return i*(t/=n)*t*((s+1)*t-s)+e},BackEaseOut(t,e,i,n){var s=1.70158;return i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},BackEaseInOut(t,e,i,n){var s=1.70158;return(t/=n/2)<1?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},ElasticEaseIn(t,e,i,n,s,r){var a=0;return t===0?e:(t/=n)===1?e+i:(r||(r=n*.3),!s||s<Math.abs(i)?(s=i,a=r/4):a=r/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/r))+e)},ElasticEaseOut(t,e,i,n,s,r){var a=0;return t===0?e:(t/=n)===1?e+i:(r||(r=n*.3),!s||s<Math.abs(i)?(s=i,a=r/4):a=r/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/r)+i+e)},ElasticEaseInOut(t,e,i,n,s,r){var a=0;return t===0?e:(t/=n/2)===2?e+i:(r||(r=n*(.3*1.5)),!s||s<Math.abs(i)?(s=i,a=r/4):a=r/(2*Math.PI)*Math.asin(i/s),t<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/r))+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/r)*.5+i+e)},BounceEaseOut(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,i,n){return i-dn.BounceEaseOut(n-t,0,i,n)+e},BounceEaseInOut(t,e,i,n){return t<n/2?dn.BounceEaseIn(t*2,0,i,n)*.5+e:dn.BounceEaseOut(t*2-n,0,i,n)*.5+i*.5+e},EaseIn(t,e,i,n){return i*(t/=n)*t+e},EaseOut(t,e,i,n){return-i*(t/=n)*(t-2)+e},EaseInOut(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,i,n){return i*(t/=n)*t*t*t*t+e},StrongEaseOut(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,i,n){return i*t/n+e}},Re=m._assign(X,{Util:m,Transform:Dt,Node:U,Container:qe,Stage:Rs,stages:ns,Layer:di,FastLayer:Br,Group:zr,DD:oe,Shape:R,shapes:cn,Animation:tt,Tween:Te,Easings:dn,Context:Ls,Canvas:Os});function ui(t,e){this._waveformData=t,this._channelIndex=e}ui.prototype.min_sample=function(t){var e=(t*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._at(e)};ui.prototype.max_sample=function(t){var e=(t*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._at(e)};ui.prototype.set_min_sample=function(t,e){var i=(t*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._set_at(i,e)};ui.prototype.set_max_sample=function(t,e){var i=(t*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._set_at(i,e)};ui.prototype.min_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2)};ui.prototype.max_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2+1)};var Ti=127,Yn=-128;function ff(t,e){var i=Math.floor(t/e),n=t-i*e;return n>0&&i++,i}function pf(t){var e=t.scale,i=t.amplitude_scale,n=t.split_channels,s=t.length,r=t.sample_rate,a=t.channels.map(function(Z){return new Float32Array(Z)}),o=n?a.length:1,l=o===1?1:2,h=l===1?20:24,c=ff(s,e),d=h+c*2*o,f=new ArrayBuffer(d),v=new DataView(f),x=0,C=h,_,D,w=new Array(o),F=new Array(o);for(_=0;_<o;_++)w[_]=1/0,F[_]=-1/0;for(v.setInt32(0,l,!0),v.setUint32(4,1,!0),v.setInt32(8,r,!0),v.setInt32(12,e,!0),v.setInt32(16,c,!0),l===2&&v.setInt32(20,o,!0),D=0;D<s;D++){var L=0;if(o===1){for(_=0;_<a.length;++_)L+=a[_][D];L=Math.floor(Ti*L*i/a.length),L<w[0]&&(w[0]=L,w[0]<Yn&&(w[0]=Yn)),L>F[0]&&(F[0]=L,F[0]>Ti&&(F[0]=Ti))}else for(_=0;_<o;++_)L=Math.floor(Ti*a[_][D]*i),L<w[_]&&(w[_]=L,w[_]<Yn&&(w[_]=Yn)),L>F[_]&&(F[_]=L,F[_]>Ti&&(F[_]=Ti));if(++x===e){for(_=0;_<o;_++)v.setInt8(C++,w[_]),v.setInt8(C++,F[_]),w[_]=1/0,F[_]=-1/0;x=0}}if(x>0)for(_=0;_<o;_++)v.setInt8(C++,w[_]),v.setInt8(C++,F[_]);return f}function un(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?un=function(e){return typeof e}:un=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(t)}function gf(t){return t&&un(t)==="object"&&"sample_rate"in t&&"samples_per_pixel"in t&&"bits"in t&&"length"in t&&"data"in t}function _f(t){var e=t&&un(t)==="object"&&"byteLength"in t;if(e){var i=new DataView(t),n=i.getInt32(0,!0);if(n!==1&&n!==2)throw new TypeError("WaveformData.create(): This waveform data version not supported")}return e}function mf(t){var e=t.data,i=t.channels||1,n=24,s=t.bits===8?1:2,r=t.length*2*i;if(e.length!==r)throw new Error("WaveformData.create(): Length mismatch in JSON waveform data");var a=n+e.length*s,o=new ArrayBuffer(a),l=new DataView(o);l.setInt32(0,2,!0),l.setUint32(4,t.bits===8,!0),l.setInt32(8,t.sample_rate,!0),l.setInt32(12,t.samples_per_pixel,!0),l.setInt32(16,t.length,!0),l.setInt32(20,i,!0);var h=n,c;if(t.bits===8)for(c=0;c<e.length;c++)l.setInt8(h++,e[c],!0);else for(c=0;c<e.length;c++)l.setInt16(h,e[c],!0),h+=2;return o}function vf(t,e){var i=atob(t);if(e){for(var n=new Uint8Array(i.length),s=0,r=i.length;s<r;++s)n[s]=i.charCodeAt(s);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}function yf(t,e,i){var n=e===void 0?null:e,s=i===void 0?!1:i,r=vf(t,s),a=r.indexOf(`
`,10)+1,o=r.substring(a)+(n?"//# sourceMappingURL="+n:""),l=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(l)}function bf(t,e,i){var n;return function(r){return n=n||yf(t,e,i),new Worker(n,r)}}var wf=bf("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogQXVkaW9CdWZmZXItYmFzZWQgV2F2ZWZvcm1EYXRhIGdlbmVyYXRvcgogICAqCiAgICogQWRhcHRlZCBmcm9tIEJsb2NrRmlsZTo6Q2FsY1N1bW1hcnkgaW4gQXVkYWNpdHksIHdpdGggcGVybWlzc2lvbi4KICAgKiBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9hdWRhY2l0eS9zb3VyY2UvYnJvd3NlL2F1ZGFjaXR5LXNyYy90cnVuay9zcmMvQmxvY2tGaWxlLmNwcAogICAqLwogIHZhciBJTlQ4X01BWCA9IDEyNzsKICB2YXIgSU5UOF9NSU4gPSAtMTI4OwoKICBmdW5jdGlvbiBjYWxjdWxhdGVXYXZlZm9ybURhdGFMZW5ndGgoYXVkaW9fc2FtcGxlX2NvdW50LCBzY2FsZSkgewogICAgdmFyIGRhdGFfbGVuZ3RoID0gTWF0aC5mbG9vcihhdWRpb19zYW1wbGVfY291bnQgLyBzY2FsZSk7CiAgICB2YXIgc2FtcGxlc19yZW1haW5pbmcgPSBhdWRpb19zYW1wbGVfY291bnQgLSBkYXRhX2xlbmd0aCAqIHNjYWxlOwoKICAgIGlmIChzYW1wbGVzX3JlbWFpbmluZyA+IDApIHsKICAgICAgZGF0YV9sZW5ndGgrKzsKICAgIH0KCiAgICByZXR1cm4gZGF0YV9sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBnZW5lcmF0ZVdhdmVmb3JtRGF0YShvcHRpb25zKSB7CiAgICB2YXIgc2NhbGUgPSBvcHRpb25zLnNjYWxlOwogICAgdmFyIGFtcGxpdHVkZV9zY2FsZSA9IG9wdGlvbnMuYW1wbGl0dWRlX3NjYWxlOwogICAgdmFyIHNwbGl0X2NoYW5uZWxzID0gb3B0aW9ucy5zcGxpdF9jaGFubmVsczsKICAgIHZhciBsZW5ndGggPSBvcHRpb25zLmxlbmd0aDsKICAgIHZhciBzYW1wbGVfcmF0ZSA9IG9wdGlvbnMuc2FtcGxlX3JhdGU7CiAgICB2YXIgY2hhbm5lbHMgPSBvcHRpb25zLmNoYW5uZWxzLm1hcChmdW5jdGlvbiAoY2hhbm5lbCkgewogICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShjaGFubmVsKTsKICAgIH0pOwogICAgdmFyIG91dHB1dF9jaGFubmVscyA9IHNwbGl0X2NoYW5uZWxzID8gY2hhbm5lbHMubGVuZ3RoIDogMTsKICAgIHZhciB2ZXJzaW9uID0gb3V0cHV0X2NoYW5uZWxzID09PSAxID8gMSA6IDI7CiAgICB2YXIgaGVhZGVyX3NpemUgPSB2ZXJzaW9uID09PSAxID8gMjAgOiAyNDsKICAgIHZhciBkYXRhX2xlbmd0aCA9IGNhbGN1bGF0ZVdhdmVmb3JtRGF0YUxlbmd0aChsZW5ndGgsIHNjYWxlKTsKICAgIHZhciB0b3RhbF9zaXplID0gaGVhZGVyX3NpemUgKyBkYXRhX2xlbmd0aCAqIDIgKiBvdXRwdXRfY2hhbm5lbHM7CiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRvdGFsX3NpemUpOwogICAgdmFyIGRhdGFfdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpOwogICAgdmFyIHNjYWxlX2NvdW50ZXIgPSAwOwogICAgdmFyIG9mZnNldCA9IGhlYWRlcl9zaXplOwogICAgdmFyIGNoYW5uZWwsIGk7CiAgICB2YXIgbWluX3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CiAgICB2YXIgbWF4X3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CgogICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICBtYXhfdmFsdWVbY2hhbm5lbF0gPSAtSW5maW5pdHk7CiAgICB9CgogICAgZGF0YV92aWV3LnNldEludDMyKDAsIHZlcnNpb24sIHRydWUpOyAvLyBWZXJzaW9uCgogICAgZGF0YV92aWV3LnNldFVpbnQzMig0LCAxLCB0cnVlKTsgLy8gSXMgOCBiaXQ/CgogICAgZGF0YV92aWV3LnNldEludDMyKDgsIHNhbXBsZV9yYXRlLCB0cnVlKTsgLy8gU2FtcGxlIHJhdGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTIsIHNjYWxlLCB0cnVlKTsgLy8gU2NhbGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTYsIGRhdGFfbGVuZ3RoLCB0cnVlKTsgLy8gTGVuZ3RoCgogICAgaWYgKHZlcnNpb24gPT09IDIpIHsKICAgICAgZGF0YV92aWV3LnNldEludDMyKDIwLCBvdXRwdXRfY2hhbm5lbHMsIHRydWUpOwogICAgfQoKICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgc2FtcGxlID0gMDsKCiAgICAgIGlmIChvdXRwdXRfY2hhbm5lbHMgPT09IDEpIHsKICAgICAgICBmb3IgKGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgY2hhbm5lbHMubGVuZ3RoOyArK2NoYW5uZWwpIHsKICAgICAgICAgIHNhbXBsZSArPSBjaGFubmVsc1tjaGFubmVsXVtpXTsKICAgICAgICB9CgogICAgICAgIHNhbXBsZSA9IE1hdGguZmxvb3IoSU5UOF9NQVggKiBzYW1wbGUgKiBhbXBsaXR1ZGVfc2NhbGUgLyBjaGFubmVscy5sZW5ndGgpOwoKICAgICAgICBpZiAoc2FtcGxlIDwgbWluX3ZhbHVlWzBdKSB7CiAgICAgICAgICBtaW5fdmFsdWVbMF0gPSBzYW1wbGU7CgogICAgICAgICAgaWYgKG1pbl92YWx1ZVswXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgIG1pbl92YWx1ZVswXSA9IElOVDhfTUlOOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHNhbXBsZSA+IG1heF92YWx1ZVswXSkgewogICAgICAgICAgbWF4X3ZhbHVlWzBdID0gc2FtcGxlOwoKICAgICAgICAgIGlmIChtYXhfdmFsdWVbMF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICBtYXhfdmFsdWVbMF0gPSBJTlQ4X01BWDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgKytjaGFubmVsKSB7CiAgICAgICAgICBzYW1wbGUgPSBNYXRoLmZsb29yKElOVDhfTUFYICogY2hhbm5lbHNbY2hhbm5lbF1baV0gKiBhbXBsaXR1ZGVfc2NhbGUpOwoKICAgICAgICAgIGlmIChzYW1wbGUgPCBtaW5fdmFsdWVbY2hhbm5lbF0pIHsKICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gc2FtcGxlOwoKICAgICAgICAgICAgaWYgKG1pbl92YWx1ZVtjaGFubmVsXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gSU5UOF9NSU47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2FtcGxlID4gbWF4X3ZhbHVlW2NoYW5uZWxdKSB7CiAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IHNhbXBsZTsKCiAgICAgICAgICAgIGlmIChtYXhfdmFsdWVbY2hhbm5lbF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IElOVDhfTUFYOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoKytzY2FsZV9jb3VudGVyID09PSBzY2FsZSkgewogICAgICAgIGZvciAoY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBvdXRwdXRfY2hhbm5lbHM7IGNoYW5uZWwrKykgewogICAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgICBkYXRhX3ZpZXcuc2V0SW50OChvZmZzZXQrKywgbWF4X3ZhbHVlW2NoYW5uZWxdKTsKICAgICAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICAgICAgbWF4X3ZhbHVlW2NoYW5uZWxdID0gLUluZmluaXR5OwogICAgICAgIH0KCiAgICAgICAgc2NhbGVfY291bnRlciA9IDA7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc2NhbGVfY291bnRlciA+IDApIHsKICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1heF92YWx1ZVtjaGFubmVsXSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnVmZmVyOwogIH0KCiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlKGV2dCkgewogICAgdmFyIGJ1ZmZlciA9IGdlbmVyYXRlV2F2ZWZvcm1EYXRhKGV2dC5kYXRhKTsgLy8gVHJhbnNmZXIgYnVmZmVyIHRvIHRoZSBjYWxsaW5nIHRocmVhZAoKICAgIHRoaXMucG9zdE1lc3NhZ2UoYnVmZmVyLCBbYnVmZmVyXSk7CiAgICB0aGlzLmNsb3NlKCk7CiAgfTsKCn0pKCk7Cgo=",null,!1);function it(t){if(gf(t)&&(t=mf(t)),_f(t)){this._data=new DataView(t),this._offset=this._version()===2?24:20,this._channels=[];for(var e=0;e<this.channels;e++)this._channels[e]=new ui(this,e)}else throw new TypeError("WaveformData.create(): Unknown data format")}var $n={scale:512,amplitude_scale:1,split_channels:!1,disable_worker:!1};function Cf(t){var e={scale:t.scale||$n.scale,amplitude_scale:t.amplitude_scale||$n.amplitude_scale,split_channels:t.split_channels||$n.split_channels,disable_worker:t.disable_worker||$n.disable_worker};return e}function Sf(t){for(var e=[],i=0;i<t.numberOfChannels;++i)e.push(t.getChannelData(i).buffer);return e}function Ol(t,e,i){var n=Sf(t);if(e.disable_worker){var s=pf({scale:e.scale,amplitude_scale:e.amplitude_scale,split_channels:e.split_channels,length:t.length,sample_rate:t.sampleRate,channels:n});i(null,new it(s),t)}else{var r=new wf;r.onmessage=function(a){i(null,new it(a.data),t)},r.postMessage({scale:e.scale,amplitude_scale:e.amplitude_scale,split_channels:e.split_channels,length:t.length,sample_rate:t.sampleRate,channels:n},n)}}function Tf(t,e,i,n){function s(r){r||(r=new DOMException("EncodingError")),n(r)}t.decodeAudioData(e,function(r){Ol(r,i,n)},s)}it.create=function(e){return new it(e)};it.createFromAudio=function(t,e){var i=Cf(t);if(t.audio_context&&t.array_buffer)return Tf(t.audio_context,t.array_buffer,i,e);if(t.audio_buffer)return Ol(t.audio_buffer,i,e);throw new TypeError("WaveformData.createFromAudio(): Pass either an AudioContext and ArrayBuffer, or an AudioBuffer object")};it.prototype={resample:function(e){if(e.scale=typeof e.scale=="number"?e.scale:null,e.width=typeof e.width=="number"?e.width:null,e.width!=null&&e.width<=0)throw new RangeError("WaveformData.resample(): width should be a positive integer value");if(e.scale!=null&&e.scale<=0)throw new RangeError("WaveformData.resample(): scale should be a positive integer value");if(!e.scale&&!e.width)throw new Error("WaveformData.resample(): Missing scale or width option");var i=e.scale||Math.floor(this.duration*this.sample_rate/e.width),n=this.scale,s=this.length,r=s*this.scale,a=Math.ceil(r/i),o=24,l=this.bits===8?1:2,h=o+a*2*this.channels*l,c=new ArrayBuffer(h),d=new DataView(c);d.setInt32(0,2,!0),d.setUint32(4,this.bits===8,!0),d.setInt32(8,this.sample_rate,!0),d.setInt32(12,i,!0),d.setInt32(16,a,!0),d.setInt32(20,this.channels,!0);var f=new it(c),v=0,x=0,C=this.channels,_=new Array(C),D=new Array(C),w;for(w=0;w<C;++w)s>0?(_[w]=this.channel(w).min_sample(v),D[w]=this.channel(w).max_sample(v)):(_[w]=0,D[w]=0);var F=this.bits===8?-128:-32768,L=this.bits===8?127:32767;if(i<n)throw new Error("WaveformData.resample(): Zoom level "+i+" too low, minimum: "+n);var Z,ie,ye,J,ue;function fe(Ae){return Math.floor(Ae*i)}for(;v<s;){for(;Math.floor(fe(x)/n)===v;){if(x>0)for(w=0;w<C;++w)f.channel(w).set_min_sample(x-1,_[w]),f.channel(w).set_max_sample(x-1,D[w]);if(ue=v,x++,Z=fe(x),ie=fe(x-1),Z!==ie)for(w=0;w<C;++w)_[w]=L,D[w]=F}for(Z=fe(x),ye=Math.floor(Z/n),ye>s&&(ye=s);v<ye;){for(w=0;w<C;++w)J=this.channel(w).min_sample(v),J<_[w]&&(_[w]=J),J=this.channel(w).max_sample(v),J>D[w]&&(D[w]=J);v++}}if(v!==ue)for(w=0;w<C;++w)f.channel(w).set_min_sample(x-1,_[w]),f.channel(w).set_max_sample(x-1,D[w]);return f},concat:function(){var e=this,i=Array.prototype.slice.call(arguments);i.forEach(function(s){if(e.channels!==s.channels||e.sample_rate!==s.sample_rate||e.bits!==s.bits||e.scale!==s.scale)throw new Error("WaveformData.concat(): Waveforms are incompatible")});var n=this._concatBuffers.apply(this,i);return it.create(n)},_concatBuffers:function(){var e=Array.prototype.slice.call(arguments),i=this._offset,n=i,s=0,r=[this].concat(e).map(function(x){return x._data.buffer}),a,o;for(a=0;a<r.length;a++){o=r[a];var l=new DataView(o).getInt32(16,!0);n+=o.byteLength-i,s+=l}var h=new ArrayBuffer(n),c=new DataView(r[0]),d=new DataView(h);for(a=0;a<i;a++)d.setUint8(a,c.getUint8(a));d.setInt32(16,s,!0);var f=0,v=new Uint8Array(h,i);for(a=0;a<r.length;a++)o=r[a],v.set(new Uint8Array(o,i),f),f+=o.byteLength-i;return h},_offsetValues:function(e,i,n){var s=[],r=this.channels;n+=e*r*2;for(var a=0;a<i;a++)s.push(this._at(a*r*2+n));return s},_version:function(){return this._data.getInt32(0,!0)},get length(){return this._data.getUint32(16,!0)},get bits(){var t=Boolean(this._data.getUint32(4,!0));return t?8:16},get duration(){return this.length*this.scale/this.sample_rate},get pixels_per_second(){return this.sample_rate/this.scale},get seconds_per_pixel(){return this.scale/this.sample_rate},get channels(){return this._version()===2?this._data.getInt32(20,!0):1},channel:function(e){if(e>=0&&e<this._channels.length)return this._channels[e];throw new RangeError("Invalid channel: "+e)},get sample_rate(){return this._data.getInt32(8,!0)},get scale(){return this._data.getInt32(12,!0)},_at:function(e){return this.bits===8?this._data.getInt8(this._offset+e):this._data.getInt16(this._offset+e*2,!0)},_set_at:function(e,i){return this.bits===8?this._data.setInt8(this._offset+e,i):this._data.setInt16(this._offset+e*2,i,!0)},at_time:function(e){return Math.floor(e*this.sample_rate/this.scale)},time:function(e){return e*this.scale/this.sample_rate},toJSON:function(){for(var e={version:2,channels:this.channels,sample_rate:this.sample_rate,samples_per_pixel:this.scale,bits:this.bits,length:this.length,data:[]},i=0;i<this.length;i++)for(var n=0;n<this.channels;n++)e.data.push(this.channel(n).min_sample(i)),e.data.push(this.channel(n).max_sample(i));return e},toArrayBuffer:function(){return this._data.buffer}};var Rl={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function s(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function r(l,h,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var v=new s(c,d||l,f),x=i?i+h:h;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],v]:l._events[x].push(v):(l._events[x]=v,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new n:delete l._events[h]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],c,d;if(this._eventsCount===0)return h;for(d in c=this._events)e.call(c,d)&&h.push(i?d.slice(1):d);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},o.prototype.listeners=function(h){var c=i?i+h:h,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,v=d.length,x=new Array(v);f<v;f++)x[f]=d[f].fn;return x},o.prototype.listenerCount=function(h){var c=i?i+h:h,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(h,c,d,f,v,x){var C=i?i+h:h;if(!this._events[C])return!1;var _=this._events[C],D=arguments.length,w,F;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),D){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,c),!0;case 3:return _.fn.call(_.context,c,d),!0;case 4:return _.fn.call(_.context,c,d,f),!0;case 5:return _.fn.call(_.context,c,d,f,v),!0;case 6:return _.fn.call(_.context,c,d,f,v,x),!0}for(F=1,w=new Array(D-1);F<D;F++)w[F-1]=arguments[F];_.fn.apply(_.context,w)}else{var L=_.length,Z;for(F=0;F<L;F++)switch(_[F].once&&this.removeListener(h,_[F].fn,void 0,!0),D){case 1:_[F].fn.call(_[F].context);break;case 2:_[F].fn.call(_[F].context,c);break;case 3:_[F].fn.call(_[F].context,c,d);break;case 4:_[F].fn.call(_[F].context,c,d,f);break;default:if(!w)for(Z=1,w=new Array(D-1);Z<D;Z++)w[Z-1]=arguments[Z];_[F].fn.apply(_[F].context,w)}}return!0},o.prototype.on=function(h,c,d){return r(this,h,c,d,!1)},o.prototype.once=function(h,c,d){return r(this,h,c,d,!0)},o.prototype.removeListener=function(h,c,d,f){var v=i?i+h:h;if(!this._events[v])return this;if(!c)return a(this,v),this;var x=this._events[v];if(x.fn)x.fn===c&&(!f||x.once)&&(!d||x.context===d)&&a(this,v);else{for(var C=0,_=[],D=x.length;C<D;C++)(x[C].fn!==c||f&&!x[C].once||d&&x[C].context!==d)&&_.push(x[C]);_.length?this._events[v]=_.length===1?_[0]:_:a(this,v)}return this},o.prototype.removeAllListeners=function(h){var c;return h?(c=i?i+h:h,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o})(Rl);var Dl=Rl.exports;function fn(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fn=function(e){return typeof e}:fn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(t)}function Ee(t,e,i){this.time=t,this.type=e,this.id=i}Ee.POINT=0;Ee.SEGMENT_START=1;Ee.SEGMENT_END=2;Ee.sorter=function(t,e){return t.time-e.time};function Ka(t,e){for(t=t.toString();t.length<e;)t="0"+t;return t}function Ur(t,e){var i=[],n=Math.floor(t%1*Math.pow(10,e)),s=Math.floor(t),r=Math.floor(s/60),a=Math.floor(r/60);a>0&&i.push(a),i.push(r%60),i.push(s%60);for(var o=0;o<i.length;o++)i[o]=Ka(i[o],2);return i=i.join(":"),e>0&&(i+="."+Ka(n,e)),i}function xf(t,e){if(e===0)return 0;var i=1;t<0&&(i=-1,t=-t);var n=Math.ceil(t);return i*((n+e-1)/e|0)*e}function fi(t,e,i){return t<e?e:t>i?i:t}function le(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ds(t,e){for(var i in e)le(e,i)&&(t[i]=e[i]);return t}function kf(t){if(t.length===0)return!0;for(var e=t[0],i=1;i<t.length;i++){if(e>=t[i])return!1;e=t[i]}return!0}function fs(t){return typeof t=="number"}function Nl(t){return!(typeof t!="number"||t!==t||t===1/0||t===-1/0)}function zt(t){return typeof t=="number"&&Number.isFinite(t)}function Hi(t){return t!==null&&fn(t)==="object"&&!Array.isArray(t)}function li(t){return typeof t=="string"}function Ef(t){return Object.prototype.toString.call(t).includes("ArrayBuffer")}function yt(t){return t==null}function Af(t){return typeof t=="function"}function Hl(t){return t===!0||t===!1}function Za(t){return t instanceof HTMLElement}function Pf(t){return Array.isArray(t)}function Ns(t){return Hi(t)&&le(t,"linearGradientStart")&&le(t,"linearGradientEnd")&&le(t,"linearGradientColorStops")&&fs(t.linearGradientStart)&&fs(t.linearGradientEnd)&&Pf(t.linearGradientColorStops)&&t.linearGradientColorStops.length===2}var If=/HeadlessChrome/.test(navigator.userAgent);function Mf(){return If||navigator.webdriver?!1:(typeof document>"u"?"undefined":fn(document))==="object"&&"visibilityState"in document&&document.visibilityState==="visible"}var Fl=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Lf=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,Ut={forward:{},reverse:{}},Vr=0,Hs=1,Fs=2;Ut.forward[Ee.POINT]=Vr;Ut.forward[Ee.SEGMENT_START]=Hs;Ut.forward[Ee.SEGMENT_END]=Fs;Ut.reverse[Ee.POINT]=Vr;Ut.reverse[Ee.SEGMENT_START]=Fs;Ut.reverse[Ee.SEGMENT_END]=Hs;var Gs={};Gs[Vr]="points.enter";Gs[Hs]="segments.enter";Gs[Fs]="segments.exit";function Of(t,e){switch(e.type){case Ee.POINT:return t.points.getPoint(e.id);case Ee.SEGMENT_START:case Ee.SEGMENT_END:return t.segments.getSegment(e.id);default:throw new Error("getPointOrSegment: id not found?")}}function dt(t){this._cues=[],this._peaks=t,this._previousTime=-1,this._updateCues=this._updateCues.bind(this),this._onPlaying=this.onPlaying.bind(this),this._onSeeked=this.onSeeked.bind(this),this._onTimeUpdate=this.onTimeUpdate.bind(this),this._onAnimationFrame=this.onAnimationFrame.bind(this),this._rAFHandle=null,this._activeSegments={},this._attachEventHandlers()}dt.prototype._updateCues=function(){var t=this,e=t._peaks.points.getPoints(),i=t._peaks.segments.getSegments();t._cues.length=0,e.forEach(function(s){t._cues.push(new Ee(s.time,Ee.POINT,s.id))}),i.forEach(function(s){t._cues.push(new Ee(s.startTime,Ee.SEGMENT_START,s.id)),t._cues.push(new Ee(s.endTime,Ee.SEGMENT_END,s.id))}),t._cues.sort(Ee.sorter);var n=t._peaks.player.getCurrentTime();t._updateActiveSegments(n)};dt.prototype._onUpdate=function(t,e){var i=t>e,n,s,r;i?(n=0,s=this._cues.length,r=1):(n=this._cues.length-1,s=-1,r=-1);for(var a=n;i?a<s:a>s;a+=r){var o=this._cues[a];if(i?o.time>e:o.time<e){if(i?o.time>t:o.time<t)break;var l=Of(this._peaks,o),h=i?Ut.forward[o.type]:Ut.reverse[o.type];h===Hs?this._activeSegments[l.id]=l:h===Fs&&delete this._activeSegments[l.id],this._peaks.emit(Gs[h],l)}}};dt.prototype.onTimeUpdate=function(t){Mf()||(this._peaks.player.isPlaying()&&!this._peaks.player.isSeeking()&&this._onUpdate(t,this._previousTime),this._previousTime=t)};dt.prototype.onAnimationFrame=function(){var t=this._peaks.player.getCurrentTime();this._peaks.player.isSeeking()||this._onUpdate(t,this._previousTime),this._previousTime=t,this._peaks.player.isPlaying()&&(this._rAFHandle=Fl(this._onAnimationFrame))};dt.prototype.onPlaying=function(){this._previousTime=this._peaks.player.getCurrentTime(),this._rAFHandle=Fl(this._onAnimationFrame)};dt.prototype.onSeeked=function(t){this._previousTime=t,this._updateActiveSegments(t)};function Rf(t){return function(i){return i.id===t}}dt.prototype._updateActiveSegments=function(t){var e=this,i=e._peaks.segments.getSegmentsAtTime(t);for(var n in e._activeSegments)if(le(e._activeSegments,n)){var s=i.find(Rf(n));s||(e._peaks.emit("segments.exit",e._activeSegments[n]),delete e._activeSegments[n])}i.forEach(function(r){r.id in e._activeSegments||(e._activeSegments[r.id]=r,e._peaks.emit("segments.enter",r))})};var ps=Array("points.update","points.dragmove","points.add","points.remove","points.remove_all","segments.update","segments.dragged","segments.add","segments.remove","segments.remove_all");dt.prototype._attachEventHandlers=function(){this._peaks.on("player.timeupdate",this._onTimeUpdate),this._peaks.on("player.playing",this._onPlaying),this._peaks.on("player.seeked",this._onSeeked);for(var t=0;t<ps.length;t++)this._peaks.on(ps[t],this._updateCues);this._updateCues()};dt.prototype._detachEventHandlers=function(){this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.seeked",this._onSeeked);for(var t=0;t<ps.length;t++)this._peaks.off(ps[t],this._updateCues)};dt.prototype.destroy=function(){this._rAFHandle&&(Lf(this._rAFHandle),this._rAFHandle=null),this._detachEventHandlers(),this._previousTime=-1};var Df=["peaks","id","time","labelText","color","editable"];function Gl(t,e){if(!zt(t.time))throw new TypeError("peaks.points."+e+": time should be a numeric value");if(t.time<0)throw new RangeError("peaks.points."+e+": time should not be negative");if(yt(t.labelText))t.labelText="";else if(!li(t.labelText))throw new TypeError("peaks.points."+e+": labelText must be a string");if(!Hl(t.editable))throw new TypeError("peaks.points."+e+": editable must be true or false");if(t.color&&!li(t.color)&&!Ns(t.color))throw new TypeError("peaks.points."+e+": color must be a string or a valid linear gradient object")}function Vi(t){Gl(t,"add()"),this._peaks=t.peaks,this._id=t.id,this._time=t.time,this._labelText=t.labelText,this._color=t.color,this._editable=t.editable,this._setUserData(t)}Vi.prototype._setUserData=function(t){for(var e in t)le(t,e)&&Df.indexOf(e)===-1&&(this[e]=t[e])};Object.defineProperties(Vi.prototype,{id:{enumerable:!0,get:function(){return this._id}},time:{enumerable:!0,get:function(){return this._time}},labelText:{get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}});Vi.prototype.update=function(t){var e={time:this.time,labelText:this.labelText,color:this.color,editable:this.editable};Ds(e,t),Gl(e,"update()"),this._time=e.time,this._labelText=e.labelText,this._color=e.color,this._editable=e.editable,this._setUserData(t),this._peaks.emit("points.update",this)};Vi.prototype.isVisible=function(t,e){return this.time>=t&&this.time<e};Vi.prototype._setTime=function(t){this._time=t};function Ve(t){this._peaks=t,this._points=[],this._pointsById={},this._pointIdCounter=0}Ve.prototype._getNextPointId=function(){return"peaks.point."+this._pointIdCounter++};Ve.prototype._addPoint=function(t){this._points.push(t),this._pointsById[t.id]=t};Ve.prototype._createPoint=function(t){var e={peaks:this._peaks};return Ds(e,t),yt(e.id)&&(e.id=this._getNextPointId()),yt(e.labelText)&&(e.labelText=""),yt(e.editable)&&(e.editable=!1),new Vi(e)};Ve.prototype.getPoints=function(){return this._points};Ve.prototype.getPoint=function(t){return this._pointsById[t]||null};Ve.prototype.find=function(t,e){return this._points.filter(function(i){return i.isVisible(t,e)})};Ve.prototype.add=function(){var t=this,e=Array.isArray(arguments[0]),i=e?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(n){var s=t._createPoint(n);if(le(t._pointsById,s.id))throw new Error("peaks.points.add(): duplicate id");return s}),i.forEach(function(n){t._addPoint(n)}),this._peaks.emit("points.add",i),e?i:i[0]};Ve.prototype._findPoint=function(t){for(var e=[],i=0,n=this._points.length;i<n;i++)t(this._points[i])&&e.push(i);return e};Ve.prototype._removeIndexes=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i]-e.length,s=this._points.splice(n,1)[0];delete this._pointsById[s.id],e.push(s)}return e};Ve.prototype._removePoints=function(t){var e=this._findPoint(t),i=this._removeIndexes(e);return this._peaks.emit("points.remove",i),i};Ve.prototype.remove=function(t){return this._removePoints(function(e){return e===t})};Ve.prototype.removeById=function(t){return this._removePoints(function(e){return e.id===t})};Ve.prototype.removeByTime=function(t){return this._removePoints(function(e){return e.time===t})};Ve.prototype.removeAll=function(){this._points=[],this._pointsById={},this._peaks.emit("points.remove_all")};var Nf=["peaks","id","startTime","endTime","labelText","color","editable"];function Wl(t,e){if(!zt(t.startTime))throw new TypeError("peaks.segments."+e+": startTime should be a valid number");if(!zt(t.endTime))throw new TypeError("peaks.segments."+e+": endTime should be a valid number");if(t.startTime<0)throw new RangeError("peaks.segments."+e+": startTime should not be negative");if(t.endTime<0)throw new RangeError("peaks.segments."+e+": endTime should not be negative");if(t.endTime<t.startTime)throw new RangeError("peaks.segments."+e+": endTime should not be less than startTime");if(yt(t.labelText))t.labelText="";else if(!li(t.labelText))throw new TypeError("peaks.segments."+e+": labelText must be a string");if(!Hl(t.editable))throw new TypeError("peaks.segments."+e+": editable must be true or false");if(t.color&&!li(t.color)&&!Ns(t.color))throw new TypeError("peaks.segments."+e+": color must be a string or a valid linear gradient object")}function pi(t){Wl(t,"add()"),this._peaks=t.peaks,this._id=t.id,this._startTime=t.startTime,this._endTime=t.endTime,this._labelText=t.labelText,this._color=t.color,this._editable=t.editable,this._setUserData(t)}pi.prototype._setUserData=function(t){for(var e in t)le(t,e)&&Nf.indexOf(e)===-1&&(this[e]=t[e])};Object.defineProperties(pi.prototype,{id:{enumerable:!0,get:function(){return this._id}},startTime:{enumerable:!0,get:function(){return this._startTime}},endTime:{enumerable:!0,get:function(){return this._endTime}},labelText:{enumerable:!0,get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}});pi.prototype.update=function(t){var e={startTime:this.startTime,endTime:this.endTime,labelText:this.labelText,color:this.color,editable:this.editable};Ds(e,t),Wl(e,"update()"),this._startTime=e.startTime,this._endTime=e.endTime,this._labelText=e.labelText,this._color=e.color,this._editable=e.editable,this._setUserData(t),this._peaks.emit("segments.update",this)};pi.prototype.isVisible=function(t,e){return this.startTime<e&&t<this.endTime};pi.prototype._setStartTime=function(t){this._startTime=t};pi.prototype._setEndTime=function(t){this._endTime=t};function De(t){this._peaks=t,this._segments=[],this._segmentsById={},this._segmentIdCounter=0,this._colorIndex=0}De.prototype._getNextSegmentId=function(){return"peaks.segment."+this._segmentIdCounter++};var qa=["#001f3f","#0074d9","#7fdbff","#39cccc","#ffdc00","#ff851b","#ff4136","#85144b","#f012be","#b10dc9"];De.prototype._getSegmentColor=function(){return this._peaks.options.randomizeSegmentColor?(++this._colorIndex===qa.length&&(this._colorIndex=0),qa[this._colorIndex]):this._peaks.options.segmentColor};De.prototype._addSegment=function(t){this._segments.push(t),this._segmentsById[t.id]=t};De.prototype._createSegment=function(t){if(!Hi(t))throw new TypeError("peaks.segments.add(): expected a Segment object parameter");var e={peaks:this._peaks};return Ds(e,t),yt(e.id)&&(e.id=this._getNextSegmentId()),yt(e.color)&&(e.color=this._getSegmentColor()),yt(e.labelText)&&(e.labelText=""),yt(e.editable)&&(e.editable=!1),new pi(e)};De.prototype.getSegments=function(){return this._segments};De.prototype.getSegment=function(t){return this._segmentsById[t]||null};De.prototype.getSegmentsAtTime=function(t){return this._segments.filter(function(e){return t>=e.startTime&&t<e.endTime})};De.prototype.find=function(t,e){return this._segments.filter(function(i){return i.isVisible(t,e)})};De.prototype.add=function(){var t=this,e=Array.isArray(arguments[0]),i=e?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(n){var s=t._createSegment(n);if(le(t._segmentsById,s.id))throw new Error("peaks.segments.add(): duplicate id");return s}),i.forEach(function(n){t._addSegment(n)}),this._peaks.emit("segments.add",i),e?i:i[0]};De.prototype._findSegment=function(t){for(var e=[],i=0,n=this._segments.length;i<n;i++)t(this._segments[i])&&e.push(i);return e};De.prototype._removeIndexes=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i]-e.length,s=this._segments.splice(n,1)[0];delete this._segmentsById[s.id],e.push(s)}return e};De.prototype._removeSegments=function(t){var e=this._findSegment(t),i=this._removeIndexes(e);return this._peaks.emit("segments.remove",i),i};De.prototype.remove=function(t){return this._removeSegments(function(e){return e===t})};De.prototype.removeById=function(t){return this._removeSegments(function(e){return e.id===t})};De.prototype.removeByTime=function(t,e){e=typeof e=="number"?e:0;var i;return e>0?i=function(s){return s.startTime===t&&s.endTime===e}:i=function(s){return s.startTime===t},this._removeSegments(i)};De.prototype.removeAll=function(){this._segments=[],this._segmentsById={},this._peaks.emit("segments.remove_all")};var Hf=["OBJECT","TEXTAREA","INPUT","SELECT","OPTION"],Bl=32,zl=9,Ul=37,Vl=39,Ff=[Bl,zl,Ul,Vl];function Xr(t){this.eventEmitter=t,this._handleKeyEvent=this._handleKeyEvent.bind(this),document.addEventListener("keydown",this._handleKeyEvent),document.addEventListener("keypress",this._handleKeyEvent),document.addEventListener("keyup",this._handleKeyEvent)}Xr.prototype._handleKeyEvent=function(e){if(Hf.indexOf(e.target.nodeName)===-1){if(Ff.indexOf(e.type)>-1&&e.preventDefault(),e.type==="keydown"||e.type==="keypress")switch(e.keyCode){case Bl:this.eventEmitter.emit("keyboard.space");break;case zl:this.eventEmitter.emit("keyboard.tab");break}else if(e.type==="keyup")switch(e.keyCode){case Ul:e.shiftKey?this.eventEmitter.emit("keyboard.shift_left"):this.eventEmitter.emit("keyboard.left");break;case Vl:e.shiftKey?this.eventEmitter.emit("keyboard.shift_right"):this.eventEmitter.emit("keyboard.right");break}}};Xr.prototype.destroy=function(){document.removeEventListener("keydown",this._handleKeyEvent),document.removeEventListener("keypress",this._handleKeyEvent),document.removeEventListener("keyup",this._handleKeyEvent)};function nt(t){this._mediaElement=t}nt.prototype._addMediaListener=function(t,e){this._listeners.push({type:t,callback:e}),this._mediaElement.addEventListener(t,e)};nt.prototype.init=function(t){var e=this;return e._eventEmitter=t,e._listeners=[],e._duration=e.getDuration(),e._addMediaListener("timeupdate",function(){e._eventEmitter.emit("player.timeupdate",e.getCurrentTime())}),e._addMediaListener("playing",function(){e._eventEmitter.emit("player.playing",e.getCurrentTime())}),e._addMediaListener("pause",function(){e._eventEmitter.emit("player.pause",e.getCurrentTime())}),e._addMediaListener("ended",function(){e._eventEmitter.emit("player.ended")}),e._addMediaListener("seeked",function(){e._eventEmitter.emit("player.seeked",e.getCurrentTime())}),e._addMediaListener("canplay",function(){e._eventEmitter.emit("player.canplay")}),e._addMediaListener("error",function(i){e._eventEmitter.emit("player.error",i.target.error)}),e._interval=null,new Promise(function(i,n){function s(r){e._mediaElement.removeEventListener("loadedmetadata",s),e._mediaElement.removeEventListener("error",s),r.type==="loadedmetadata"?i():n(r.target.error)}e._mediaElement.readyState===HTMLMediaElement.HAVE_NOTHING?(e._mediaElement.addEventListener("loadedmetadata",s),e._mediaElement.addEventListener("error",s),e._mediaElement.load()):i()})};nt.prototype.destroy=function(){for(var t=0;t<this._listeners.length;t++){var e=this._listeners[t];this._mediaElement.removeEventListener(e.type,e.callback)}this._listeners.length=0,this._mediaElement=null};nt.prototype.play=function(){return this._mediaElement.play()};nt.prototype.pause=function(){this._mediaElement.pause()};nt.prototype.isPlaying=function(){return!this._mediaElement.paused};nt.prototype.isSeeking=function(){return this._mediaElement.seeking};nt.prototype.getCurrentTime=function(){return this._mediaElement.currentTime};nt.prototype.getDuration=function(){return this._mediaElement.duration};nt.prototype.seek=function(t){this._mediaElement.currentTime=t};function xn(t,e){this._eventEmitter=t,this._mediaElement=e,this._playerCanPlayHandler=this._playerCanPlayHandler.bind(this),this._playerErrorHandler=this._playerErrorHandler.bind(this)}xn.prototype.setSource=function(t,e){var i=this;return i._options=t,i._callback=e,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),new Promise(function(n,s){i._resolve=n,i._reject=s,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),i._mediaElement.setAttribute("src",t.mediaUrl)})};xn.prototype._reset=function(){this._eventEmitter.removeListener("player.canplay",this._playerCanPlayHandler),this._eventEmitter.removeListener("player.error",this._playerErrorHandler)};xn.prototype._playerCanPlayHandler=function(){this._reset(),this._resolve()};xn.prototype._playerErrorHandler=function(t){this._reset(),this._reject(t)};nt.prototype.setSource=function(t){if(!t.mediaUrl)return Promise.reject(new Error("peaks.setSource(): options must contain a mediaUrl when using mediaElement"));var e=new xn(this._eventEmitter,this._mediaElement);return e.setSource(t)};function Gf(t){for(var e=[],i=t;i;)Object.getOwnPropertyNames(i).forEach(function(n){e.push(n)}),i=Object.getPrototypeOf(i);return e}function Wf(t){var e=["init","destroy","play","pause","isPlaying","isSeeking","getCurrentTime","getDuration","seek"],i=Gf(t);e.forEach(function(n){if(!i.includes(n))throw new TypeError("Peaks.init(): Player method "+n+" is undefined");if(typeof t[n]!="function")throw new TypeError("Peaks.init(): Player method "+n+" is not a function")})}function Qe(t,e){this._peaks=t,this._playingSegment=!1,this._segment=null,this._loop=!1,this._playSegmentTimerCallback=this._playSegmentTimerCallback.bind(this),Wf(e),this._adapter=e}Qe.prototype.init=function(){return this._adapter.init(this._peaks)};Qe.prototype.destroy=function(){this._adapter.destroy()};Qe.prototype.play=function(){return this._adapter.play()};Qe.prototype.pause=function(){this._adapter.pause()};Qe.prototype.isPlaying=function(){return this._adapter.isPlaying()};Qe.prototype.isSeeking=function(){return this._adapter.isSeeking()};Qe.prototype.getCurrentTime=function(){return this._adapter.getCurrentTime()};Qe.prototype.getDuration=function(){return this._adapter.getDuration()};Qe.prototype.seek=function(t){if(!zt(t)){this._peaks._logger("peaks.player.seek(): parameter must be a valid time, in seconds");return}this._adapter.seek(t)};Qe.prototype.playSegment=function(t,e){var i=this;return!t||!zt(t.startTime)||!zt(t.endTime)?Promise.reject(new Error("peaks.player.playSegment(): parameter must be a segment object")):(i._segment=t,i._loop=e,i.seek(t.startTime),i._peaks.once("player.playing",function(){i._playingSegment||(i._playingSegment=!0,window.requestAnimationFrame(i._playSegmentTimerCallback))}),i.play())};Qe.prototype._playSegmentTimerCallback=function(){if(this.isPlaying()){if(this.getCurrentTime()>=this._segment.endTime)if(this._loop)this.seek(this._segment.startTime);else{this.pause(),this._peaks.emit("player.ended"),this._playingSegment=!1;return}}else{this._playingSegment=!1;return}window.requestAnimationFrame(this._playSegmentTimerCallback)};Qe.prototype._setSource=function(t){return this._adapter.setSource(t)};function kn(t){this._options=t}kn.prototype.init=function(t){var e=10,i=20,n=-(e/2)+.5;this._options.view==="zoomview"&&(this._label=new ve({x:2,y:0,text:this._options.point.labelText,textAlign:"left",fontFamily:this._options.fontFamily||"sans-serif",fontSize:this._options.fontSize||10,fontStyle:this._options.fontStyle||"normal",fill:"#000"})),this._options.draggable&&(this._handle=new Ui({x:n,y:0,width:e,height:i,fill:this._options.color})),this._line=new Ct({x:0,y:0,stroke:this._options.color,strokeWidth:1}),this._handle&&(this._time=new ve({x:-24,y:0,text:this._options.layer.formatTime(this._options.point.time),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._time.hide()),this._handle&&t.add(this._handle),t.add(this._line),this._label&&t.add(this._label),this._time&&t.add(this._time),this.fitToView(),this.bindEventHandlers(t)};kn.prototype.bindEventHandlers=function(t){var e=this;e._handle&&(e._handle.on("mouseover touchstart",function(){e._time.setX(-24-e._time.getWidth()),e._time.show()}),e._handle.on("mouseout touchend",function(){e._time.hide()}),t.on("dragstart",function(){e._time.setX(-24-e._time.getWidth()),e._time.show()}),t.on("dragend",function(){e._time.hide()}))};kn.prototype.fitToView=function(){var t=this._options.layer.getHeight();this._line.points([.5,0,.5,t]),this._label&&this._label.y(12),this._handle&&this._handle.y(t/2-10.5),this._time&&this._time.y(t/2-5)};kn.prototype.timeUpdated=function(t){this._time&&this._time.setText(this._options.layer.formatTime(t))};function En(t){this._options=t}En.prototype.init=function(t){var e=10,i=20,n=-(e/2)+.5,s=this._options.startMarker?-24:24,r=this._options.startMarker?this._options.segment.startTime:this._options.segment.endTime;this._label=new ve({x:s,y:0,text:this._options.layer.formatTime(r),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._label.hide(),this._handle=new Ui({x:n,y:0,width:e,height:i,fill:this._options.color,stroke:this._options.color,strokeWidth:1}),this._line=new Ct({x:0,y:0,stroke:this._options.color,strokeWidth:1}),t.add(this._label),t.add(this._line),t.add(this._handle),this.fitToView(),this.bindEventHandlers(t)};En.prototype.bindEventHandlers=function(t){var e=this,i=e._options.startMarker?-24:24;e._options.draggable&&(t.on("dragstart",function(){e._options.startMarker&&e._label.setX(i-e._label.getWidth()),e._label.show()}),t.on("dragend",function(){e._label.hide()})),e._handle.on("mouseover touchstart",function(){e._options.startMarker&&e._label.setX(i-e._label.getWidth()),e._label.show()}),e._handle.on("mouseout touchend",function(){e._label.hide()})};En.prototype.fitToView=function(){var t=this._options.layer.getHeight();this._label.y(t/2-5),this._handle.y(t/2-10.5),this._line.points([.5,0,.5,t])};En.prototype.timeUpdated=function(t){this._label.setText(this._options.layer.formatTime(t))};function Bf(t){return t.view==="zoomview"?new En(t):null}function zf(t){return new ve({x:12,y:12,text:t.segment.labelText,textAlign:"center",fontFamily:t.fontFamily||"sans-serif",fontSize:t.fontSize||12,fontStyle:t.fontStyle||"normal",fill:"#000"})}function Uf(t){return new kn(t)}function $t(t,e){this._view=t,this._offset=e.highlightOffset,this._color=e.highlightColor,this._layer=new Re.Layer({listening:!1}),this._highlightRect=null,this._startTime=null,this._endTime=null,this._strokeColor=e.highlightStrokeColor,this._opacity=e.highlightOpacity,this._cornerRadius=e.highlightCornerRadius}$t.prototype.addToStage=function(t){t.add(this._layer)};$t.prototype.showHighlight=function(t,e){this._highlightRect||this._createHighlightRect(t,e),this._update(t,e)};$t.prototype._update=function(t,e){this._startTime=t,this._endTime=e;var i=this._view.timeToPixels(t),n=this._view.timeToPixels(e);this._highlightRect.setAttrs({x:i,width:n-i})};$t.prototype._createHighlightRect=function(t,e){this._startTime=t,this._endTime=e;var i=this._view.timeToPixels(t),n=this._view.timeToPixels(e);this._highlightRect=new Ui({x:i,y:0,width:n-i,stroke:this._strokeColor,strokeWidth:1,height:0,fill:this._color,opacity:this._opacity,cornerRadius:this._cornerRadius}),this.fitToView(),this._layer.add(this._highlightRect)};$t.prototype.removeHighlight=function(){this._highlightRect&&(this._highlightRect.destroy(),this._highlightRect=null)};$t.prototype.updateHighlight=function(){this._highlightRect&&this._update(this._startTime,this._endTime)};$t.prototype.fitToView=function(){if(this._highlightRect){var t=this._view.getHeight(),e=fi(this._offset,0,Math.floor(t/2));this._highlightRect.setAttrs({y:e,height:t-e*2})}};function Vf(t){for(;t.parent!==null;){if(t.parent instanceof Re.Layer)return t;t=t.parent}return null}function gi(t,e){this._stage=t,this._handlers=e,this._dragging=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseUp=this._mouseUp.bind(this),this._mouseMove=this._mouseMove.bind(this),this._stage.on("mousedown",this._mouseDown),this._stage.on("touchstart",this._mouseDown),this._lastMouseClientX=null}gi.prototype._mouseDown=function(t){if(!(t.type==="mousedown"&&t.evt.button!==0)){var e=Vf(t.target);if(!(e&&e.attrs.draggable)){if(this._lastMouseClientX=Math.floor(t.type==="touchstart"?t.evt.touches[0].clientX:t.evt.clientX),this._handlers.onMouseDown){var i=this._getMousePosX(this._lastMouseClientX);this._handlers.onMouseDown(i)}window.addEventListener("mousemove",this._mouseMove,!1),window.addEventListener("touchmove",this._mouseMove,!1),window.addEventListener("mouseup",this._mouseUp,!1),window.addEventListener("touchend",this._mouseUp,!1),window.addEventListener("blur",this._mouseUp,!1)}}};gi.prototype._mouseMove=function(t){var e=Math.floor(t.type==="touchmove"?t.changedTouches[0].clientX:t.clientX);if(e!==this._lastMouseClientX&&(this._lastMouseClientX=e,this._dragging=!0,this._handlers.onMouseMove)){var i=this._getMousePosX(e);this._handlers.onMouseMove(i)}};gi.prototype._mouseUp=function(t){var e;if(t.type==="touchend"?(e=Math.floor(t.changedTouches[0].clientX),t.cancelable&&t.preventDefault()):e=Math.floor(t.clientX),this._handlers.onMouseUp){var i=this._getMousePosX(e);this._handlers.onMouseUp(i)}window.removeEventListener("mousemove",this._mouseMove,!1),window.removeEventListener("touchmove",this._mouseMove,!1),window.removeEventListener("mouseup",this._mouseUp,!1),window.removeEventListener("touchend",this._mouseUp,!1),window.removeEventListener("blur",this._mouseUp,!1),this._dragging=!1};gi.prototype._getMousePosX=function(t){var e=this._stage.getContainer().getBoundingClientRect();return t-e.left};gi.prototype.isDragging=function(){return this._dragging};function We(t){this._player=t.player,this._view=t.view,this._playheadPixel=0,this._playheadLineAnimation=null,this._playheadVisible=!1,this._playheadColor=t.playheadColor,this._playheadTextColor=t.playheadTextColor,this._playheadFontFamily=t.playheadFontFamily,this._playheadFontSize=t.playheadFontSize,this._playheadFontStyle=t.playheadFontStyle,this._playheadLayer=new Re.Layer,this._createPlayhead(this._playheadColor),t.showPlayheadTime&&this._createPlayheadText(this._playheadTextColor),this.fitToView(),this.zoomLevelChanged()}We.prototype.addToStage=function(t){t.add(this._playheadLayer)};We.prototype.zoomLevelChanged=function(){var t=this._view.timeToPixels(1),e;this._useAnimation=t>=5,this._useAnimation?this._player.isPlaying()&&!this._playheadLineAnimation&&this._start():this._playheadLineAnimation&&(e=this._player.getCurrentTime(),this.stop(e))};We.prototype.fitToView=function(){var t=this._view.getHeight();this._playheadLine.points([.5,0,.5,t]),this._playheadText&&this._playheadText.y(12)};We.prototype._createPlayhead=function(t){this._playheadLine=new Ct({stroke:t,strokeWidth:1}),this._playheadGroup=new Re.Group({x:0,y:0}),this._playheadGroup.add(this._playheadLine),this._playheadLayer.add(this._playheadGroup)};We.prototype._createPlayheadText=function(t){var e=this._player.getCurrentTime(),i=this._view.formatTime(e);this._playheadText=new ve({x:2,y:0,text:i,fontSize:this._playheadFontSize,fontFamily:this._playheadFontFamily,fontStyle:this._playheadFontStyle,fill:t,align:"right"}),this._playheadGroup.add(this._playheadText)};We.prototype.updatePlayheadTime=function(t){this._syncPlayhead(t),this._player.isPlaying()&&this._start()};We.prototype._syncPlayhead=function(t){var e=this._view.timeToPixels(t),i=this._view.getFrameOffset(),n=this._view.getWidth(),s=e>=i&&e<=i+n;if(this._playheadPixel=e,s){var r=this._playheadPixel-i;if(this._playheadVisible||(this._playheadVisible=!0,this._playheadGroup.show()),this._playheadGroup.setX(r),this._playheadText){var a=this._view.formatTime(t),o=this._playheadText.getTextWidth();this._playheadText.setText(a),o+r>n-2?this._playheadText.setX(-o-2):o+r<n&&this._playheadText.setX(2)}}else this._playheadVisible&&(this._playheadVisible=!1,this._playheadGroup.hide());this._view.playheadPosChanged&&this._view.playheadPosChanged(t)};We.prototype._start=function(){var t=this;if(t._playheadLineAnimation&&(t._playheadLineAnimation.stop(),t._playheadLineAnimation=null),!!t._useAnimation){var e=null;t._playheadLineAnimation=new tt(function(){var i=t._player.getCurrentTime(),n=t._view.timeToPixels(i);n!==e&&(t._syncPlayhead(i),e=n)},t._playheadLayer),t._playheadLineAnimation.start()}};We.prototype.stop=function(t){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null),this._syncPlayhead(t)};We.prototype.getPlayheadOffset=function(){return this._playheadPixel-this._view.getFrameOffset()};We.prototype.getPlayheadPixel=function(){return this._playheadPixel};We.prototype.showPlayheadTime=function(t){t?this._playheadText||(this._createPlayheadText(this._playheadTextColor),this.fitToView()):this._playheadText&&(this._playheadText.remove(),this._playheadText.destroy(),this._playheadText=null)};We.prototype.updatePlayheadText=function(){if(this._playheadText){var t=this._player.getCurrentTime(),e=this._view.formatTime(t);this._playheadText.setText(e)}};We.prototype.destroy=function(){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null)};function ut(t){this._point=t.point,this._marker=t.marker,this._draggable=t.draggable,this._onClick=t.onClick,this._onDblClick=t.onDblClick,this._onDragStart=t.onDragStart,this._onDragMove=t.onDragMove,this._onDragEnd=t.onDragEnd,this._onMouseEnter=t.onMouseEnter,this._onMouseLeave=t.onMouseLeave,this._onContextMenu=t.onContextMenu,this._dragBoundFunc=this._dragBoundFunc.bind(this),this._group=new Re.Group({draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}ut.prototype._bindDefaultEventHandlers=function(){var t=this;t._group.on("dragstart",function(e){t._onDragStart(e,t._point)}),t._group.on("dragmove",function(e){t._onDragMove(e,t._point)}),t._group.on("dragend",function(e){t._onDragEnd(e,t._point)}),t._group.on("click",function(e){t._onClick(e,t._point)}),t._group.on("dblclick",function(e){t._onDblClick(e,t._point)}),t._group.on("mouseenter",function(e){t._onMouseEnter(e,t._point)}),t._group.on("mouseleave",function(e){t._onMouseLeave(e,t._point)}),t._group.on("contextmenu",function(e){t._onContextMenu(e,t._point)})};ut.prototype._dragBoundFunc=function(t){return{x:t.x,y:this._group.getAbsolutePosition().y}};ut.prototype.addToLayer=function(t){t.add(this._group)};ut.prototype.fitToView=function(){this._marker.fitToView()};ut.prototype.getPoint=function(){return this._point};ut.prototype.getX=function(){return this._group.getX()};ut.prototype.getWidth=function(){return this._group.getWidth()};ut.prototype.setX=function(t){this._group.setX(t)};ut.prototype.timeUpdated=function(t){this._marker.timeUpdated&&this._marker.timeUpdated(t)};ut.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};var Xf="sans-serif",Yf=10,$f="normal";function ce(t,e,i){this._peaks=t,this._view=e,this._allowEditing=i,this._pointMarkers={},this._layer=new Re.Layer,this._onPointsDrag=this._onPointsDrag.bind(this),this._onPointHandleClick=this._onPointHandleClick.bind(this),this._onPointHandleDblClick=this._onPointHandleDblClick.bind(this),this._onPointHandleDragStart=this._onPointHandleDragStart.bind(this),this._onPointHandleDragMove=this._onPointHandleDragMove.bind(this),this._onPointHandleDragEnd=this._onPointHandleDragEnd.bind(this),this._onPointHandleMouseEnter=this._onPointHandleMouseEnter.bind(this),this._onPointHandleMouseLeave=this._onPointHandleMouseLeave.bind(this),this._onPointHandleContextMenu=this._onPointHandleContextMenu.bind(this),this._onPointsUpdate=this._onPointsUpdate.bind(this),this._onPointsAdd=this._onPointsAdd.bind(this),this._onPointsRemove=this._onPointsRemove.bind(this),this._onPointsRemoveAll=this._onPointsRemoveAll.bind(this),this._peaks.on("points.update",this._onPointsUpdate),this._peaks.on("points.add",this._onPointsAdd),this._peaks.on("points.remove",this._onPointsRemove),this._peaks.on("points.remove_all",this._onPointsRemoveAll),this._peaks.on("points.dragstart",this._onPointsDrag),this._peaks.on("points.dragmove",this._onPointsDrag),this._peaks.on("points.dragend",this._onPointsDrag)}ce.prototype.addToStage=function(t){t.add(this._layer)};ce.prototype.enableEditing=function(t){this._allowEditing=t};ce.prototype.formatTime=function(t){return this._view.formatTime(t)};ce.prototype._onPointsUpdate=function(t){var e=this._view.getStartTime(),i=this._view.getEndTime();this._removePoint(t),t.isVisible(e,i)&&this._addPointMarker(t),this.updatePoints(e,i)};ce.prototype._onPointsAdd=function(t){var e=this,i=e._view.getStartTime(),n=e._view.getEndTime();t.forEach(function(s){s.isVisible(i,n)&&e._addPointMarker(s)}),e.updatePoints(i,n)};ce.prototype._onPointsRemove=function(t){var e=this;t.forEach(function(i){e._removePoint(i)})};ce.prototype._onPointsRemoveAll=function(){this._layer.removeChildren(),this._pointMarkers={}};ce.prototype._onPointsDrag=function(t){this._updatePoint(t.point)};ce.prototype._createPointMarker=function(t){var e=this._allowEditing&&t.editable,i=this._peaks.options.createPointMarker({point:t,draggable:e,color:t.color?t.color:this._peaks.options.pointMarkerColor,fontFamily:this._peaks.options.fontFamily||Xf,fontSize:this._peaks.options.fontSize||Yf,fontStyle:this._peaks.options.fontStyle||$f,layer:this,view:this._view.getName()});return new ut({point:t,draggable:e,marker:i,onClick:this._onPointHandleClick,onDblClick:this._onPointHandleDblClick,onDragStart:this._onPointHandleDragStart,onDragMove:this._onPointHandleDragMove,onDragEnd:this._onPointHandleDragEnd,onMouseEnter:this._onPointHandleMouseEnter,onMouseLeave:this._onPointHandleMouseLeave,onContextMenu:this._onPointHandleContextMenu})};ce.prototype.getHeight=function(){return this._view.getHeight()};ce.prototype._addPointMarker=function(t){var e=this._createPointMarker(t);return this._pointMarkers[t.id]=e,e.addToLayer(this._layer),e};ce.prototype._onPointHandleDragMove=function(t,e){var i=this._pointMarkers[e.id],n=i.getX();if(n>=0&&n<this._view.getWidth()){var s=n+i.getWidth();e._setTime(this._view.pixelOffsetToTime(s)),i.timeUpdated(e.time)}this._peaks.emit("points.dragmove",{point:e,evt:t.evt})};ce.prototype._onPointHandleMouseEnter=function(t,e){this._peaks.emit("points.mouseenter",{point:e,evt:t.evt})};ce.prototype._onPointHandleMouseLeave=function(t,e){this._peaks.emit("points.mouseleave",{point:e,evt:t.evt})};ce.prototype._onPointHandleClick=function(t,e){this._peaks.emit("points.click",{point:e,evt:t.evt})};ce.prototype._onPointHandleDblClick=function(t,e){this._peaks.emit("points.dblclick",{point:e,evt:t.evt})};ce.prototype._onPointHandleDragStart=function(t,e){this._peaks.emit("points.dragstart",{point:e,evt:t.evt})};ce.prototype._onPointHandleDragEnd=function(t,e){this._peaks.emit("points.dragend",{point:e,evt:t.evt})};ce.prototype._onPointHandleContextMenu=function(t,e){this._peaks.emit("points.contextmenu",{point:e,evt:t.evt})};ce.prototype.updatePoints=function(t,e){var i=this._peaks.points.find(t,e);i.forEach(this._updatePoint.bind(this)),this._removeInvisiblePoints(t,e)};ce.prototype._updatePoint=function(t){var e=this._findOrAddPointMarker(t),i=this._view.timeToPixels(t.time),n=i-this._view.getFrameOffset();e.setX(n)};ce.prototype._findOrAddPointMarker=function(t){var e=this._pointMarkers[t.id];return e||(e=this._addPointMarker(t)),e};ce.prototype._removeInvisiblePoints=function(t,e){var i=0;for(var n in this._pointMarkers)if(le(this._pointMarkers,n)){var s=this._pointMarkers[n].getPoint();s.isVisible(t,e)||(this._removePoint(s),i++)}return i};ce.prototype._removePoint=function(t){var e=this._pointMarkers[t.id];e&&(e.destroy(),delete this._pointMarkers[t.id])};ce.prototype.setVisible=function(t){this._layer.setVisible(t)};ce.prototype.destroy=function(){this._peaks.off("points.update",this._onPointsUpdate),this._peaks.off("points.add",this._onPointsAdd),this._peaks.off("points.remove",this._onPointsRemove),this._peaks.off("points.remove_all",this._onPointsRemoveAll),this._peaks.off("points.dragstart",this._onPointsDrag),this._peaks.off("points.dragmove",this._onPointsDrag),this._peaks.off("points.dragend",this._onPointsDrag)};ce.prototype.fitToView=function(){for(var t in this._pointMarkers)if(le(this._pointMarkers,t)){var e=this._pointMarkers[t];e.fitToView()}};ce.prototype.draw=function(){this._layer.draw()};function Je(t){this._segment=t.segment,this._marker=t.marker,this._segmentShape=t.segmentShape,this._draggable=t.draggable,this._startMarker=t.startMarker,this._onDrag=t.onDrag,this._onDragStart=t.onDragStart,this._onDragEnd=t.onDragEnd,this._dragBoundFunc=this._dragBoundFunc.bind(this),this._group=new Re.Group({draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}Je.prototype._bindDefaultEventHandlers=function(){var t=this;t._draggable&&(t._group.on("dragmove",function(e){t._onDrag(e,t)}),t._group.on("dragstart",function(e){t._onDragStart(e,t)}),t._group.on("dragend",function(e){t._onDragEnd(e,t)}))};Je.prototype._dragBoundFunc=function(t){var e,i;return this._startMarker?(e=this._segmentShape.getEndMarker(),i=e.getX()-e.getWidth(),t.x>i&&(t.x=i)):(e=this._segmentShape.getStartMarker(),i=e.getX()+e.getWidth(),t.x<i&&(t.x=i)),{x:t.x,y:this._group.getAbsolutePosition().y}};Je.prototype.addToLayer=function(t){t.add(this._group)};Je.prototype.fitToView=function(){this._marker.fitToView()};Je.prototype.getSegment=function(){return this._segment};Je.prototype.getX=function(){return this._group.getX()};Je.prototype.getWidth=function(){return this._group.getWidth()};Je.prototype.isStartMarker=function(){return this._startMarker};Je.prototype.setX=function(t){this._group.setX(t)};Je.prototype.timeUpdated=function(t){this._marker.timeUpdated&&this._marker.timeUpdated(t)};Je.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};function Pe(t){this._color=t.color;var e={};if(li(t.color))e.fill=t.color;else if(Ns(t.color)){var i=t.view._height*(t.color.linearGradientStart/100),n=t.view._height*(t.color.linearGradientEnd/100);e.fillLinearGradientStartPointY=i,e.fillLinearGradientEndPointY=n,e.fillLinearGradientColorStops=[0,t.color.linearGradientColorStops[0],1,t.color.linearGradientColorStops[1]]}else throw new TypeError("Unknown type for color property");this._shape=new Re.Shape(e),this._view=t.view,this._segment=t.segment,this._shape.sceneFunc(this._sceneFunc.bind(this)),this._shape.hitFunc(this._waveformShapeHitFunc.bind(this))}Pe.prototype.setSegment=function(t){this._segment=t};Pe.prototype.setWaveformColor=function(t){if(li(t))this._shape.fill(t),this._shape.fillLinearGradientStartPointY(null),this._shape.fillLinearGradientEndPointY(null),this._shape.fillLinearGradientColorStops(null);else if(Ns(t)){this._shape.fill(null);var e=this._view._height*(t.linearGradientStart/100),i=this._view._height*(t.linearGradientEnd/100);this._shape.fillLinearGradientStartPointY(e),this._shape.fillLinearGradientEndPointY(i),this._shape.fillLinearGradientColorStops([0,t.linearGradientColorStops[0],1,t.linearGradientColorStops[1]])}else throw new TypeError("Unknown type for color property")};Pe.prototype.fitToView=function(){this.setWaveformColor(this._color)};Pe.prototype._sceneFunc=function(t){var e=this._view.getFrameOffset(),i=this._view.getWidth(),n=this._view.getHeight();this._drawWaveform(t,this._view.getWaveformData(),e,this._segment?this._view.timeToPixels(this._segment.startTime):e,this._segment?this._view.timeToPixels(this._segment.endTime):e+i,i,n)};Pe.prototype._drawWaveform=function(t,e,i,n,s,r,a){n<i&&(n=i);var o=i+r;s>o&&(s=o),s>e.length-1&&(s=e.length-1);for(var l=e.channels,h=0,c=Math.floor(a/l),d=0;d<l;d++)d===l-1&&(c=a-(l-1)*c),this._drawChannel(t,e.channel(d),i,n,s,h,c),h+=c};Pe.prototype._drawChannel=function(t,e,i,n,s,r,a){var o,l,h=this._view.getAmplitudeScale(),c,d;for(t.beginPath(),o=n;o<=s;o++)l=e.min_sample(o),c=o-i+.5,d=r+Pe.scaleY(l,a,h)+.5,t.lineTo(c,d);for(o=s;o>=n;o--)l=e.max_sample(o),c=o-i+.5,d=r+Pe.scaleY(l,a,h)+1,t.lineTo(c,d);t.closePath(),t.fillShape(this._shape)};Pe.prototype._waveformShapeHitFunc=function(t){if(!!this._segment){var e=this._view.getFrameOffset(),i=this._view.getWidth(),n=this._view.getHeight(),s=this._view.timeToPixels(this._segment.startTime),r=this._view.timeToPixels(this._segment.endTime),a=10,o=n-2*a;o<0&&(o=0);var l=s-e,h=r-s;l<0&&(h-=-l,l=0),l+h>i&&(h-=l+h-i),t.beginPath(),t.rect(l,a,h,o),t.closePath(),t.fillStrokeShape(this._shape)}};Pe.prototype.addToLayer=function(t){t.add(this._shape)};Pe.prototype.destroy=function(){this._shape.destroy(),this._shape=null};Pe.prototype.on=function(t,e){this._shape.on(t,e)};Pe.scaleY=function(t,e,i){var n=-(e-1)*(t*i+128)/255+(e-1);return fi(Math.floor(n),0,e-1)};var Ja="sans-serif",Qa=10,eo="normal";function Ne(t,e,i,n){this._segment=t,this._peaks=e,this._layer=i,this._view=n,this._label=null,this._startMarker=null,this._endMarker=null,this._color=t.color,this._waveformShape=new Pe({color:t.color,view:n,segment:t}),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onClick=this._onClick.bind(this),this._onDblClick=this._onDblClick.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._waveformShape.on("mouseenter",this._onMouseEnter),this._waveformShape.on("mouseleave",this._onMouseLeave),this._waveformShape.on("click",this._onClick),this._waveformShape.on("dblclick",this._onDblClick),this._waveformShape.on("contextmenu",this._onContextMenu),this._onSegmentHandleDrag=this._onSegmentHandleDrag.bind(this),this._onSegmentHandleDragStart=this._onSegmentHandleDragStart.bind(this),this._onSegmentHandleDragEnd=this._onSegmentHandleDragEnd.bind(this),this._label=this._peaks.options.createSegmentLabel({segment:t,view:this._view.getName(),layer:this._layer,fontFamily:this._peaks.options.fontFamily,fontSize:this._peaks.options.fontSize,fontStyle:this._peaks.options.fontStyle}),this._label&&this._label.hide(),this._createMarkers()}Ne.prototype.updatePosition=function(){var t=this._view.timeToPixels(this._segment.startTime),e=this._view.timeToPixels(this._segment.endTime),i=this._view.getFrameOffset(),n=t-i,s=e-i,r=this.getStartMarker();r&&r.setX(n-r.getWidth()),r=this.getEndMarker(),r&&r.setX(s)};Ne.prototype.getSegment=function(){return this._segment};Ne.prototype.getStartMarker=function(){return this._startMarker};Ne.prototype.getEndMarker=function(){return this._endMarker};Ne.prototype.addToLayer=function(t){this._waveformShape.addToLayer(t),this._label&&t.add(this._label),this._startMarker&&this._startMarker.addToLayer(t),this._endMarker&&this._endMarker.addToLayer(t)};Ne.prototype._createMarkers=function(){var t=this._layer.isEditingEnabled()&&this._segment.editable;if(!!t){var e=this._peaks.options.createSegmentMarker({segment:this._segment,draggable:t,startMarker:!0,color:this._peaks.options.segmentStartMarkerColor,fontFamily:this._peaks.options.fontFamily||Ja,fontSize:this._peaks.options.fontSize||Qa,fontStyle:this._peaks.options.fontStyle||eo,layer:this._layer,view:this._view.getName()});e&&(this._startMarker=new Je({segment:this._segment,segmentShape:this,draggable:t,startMarker:!0,marker:e,onDrag:this._onSegmentHandleDrag,onDragStart:this._onSegmentHandleDragStart,onDragEnd:this._onSegmentHandleDragEnd}));var i=this._peaks.options.createSegmentMarker({segment:this._segment,draggable:t,startMarker:!1,color:this._peaks.options.segmentEndMarkerColor,fontFamily:this._peaks.options.fontFamily||Ja,fontSize:this._peaks.options.fontSize||Qa,fontStyle:this._peaks.options.fontStyle||eo,layer:this._layer,view:this._view.getName()});i&&(this._endMarker=new Je({segment:this._segment,segmentShape:this,draggable:t,startMarker:!1,marker:i,onDrag:this._onSegmentHandleDrag,onDragStart:this._onSegmentHandleDragStart,onDragEnd:this._onSegmentHandleDragEnd}))}};Ne.prototype._onMouseEnter=function(t){this._label&&(this._label.moveToTop(),this._label.show()),this._peaks.emit("segments.mouseenter",{segment:this._segment,evt:t.evt})};Ne.prototype._onMouseLeave=function(t){this._label&&this._label.hide(),this._peaks.emit("segments.mouseleave",{segment:this._segment,evt:t.evt})};Ne.prototype._onClick=function(t){this._peaks.emit("segments.click",{segment:this._segment,evt:t.evt})};Ne.prototype._onDblClick=function(t){this._peaks.emit("segments.dblclick",{segment:this._segment,evt:t.evt})};Ne.prototype._onContextMenu=function(t){this._peaks.emit("segments.contextmenu",{segment:this._segment,evt:t.evt})};Ne.prototype._onSegmentHandleDrag=function(t,e){var i=this._view.getWidth(),n=e.isStartMarker(),s=this._startMarker.getX(),r=this._endMarker.getX();if(n&&s>=0){var a=s+this._startMarker.getWidth();this._segment._setStartTime(this._view.pixelOffsetToTime(a)),e.timeUpdated(this._segment.startTime)}if(!n&&r<i){var o=r;this._segment._setEndTime(this._view.pixelOffsetToTime(o)),e.timeUpdated(this._segment.endTime)}this._peaks.emit("segments.dragged",{segment:this._segment,startMarker:n,evt:t.evt})};Ne.prototype._onSegmentHandleDragStart=function(t,e){var i=e.isStartMarker();this._peaks.emit("segments.dragstart",{segment:this._segment,startMarker:i,evt:t.evt})};Ne.prototype._onSegmentHandleDragEnd=function(t,e){var i=e.isStartMarker();this._peaks.emit("segments.dragend",{segment:this._segment,startMarker:i,evt:t.evt})};Ne.prototype.fitToView=function(){this._startMarker&&this._startMarker.fitToView(),this._endMarker&&this._endMarker.fitToView(),this._waveformShape.setWaveformColor(this._color)};Ne.prototype.destroy=function(){this._waveformShape.destroy(),this._label&&this._label.destroy(),this._startMarker&&this._startMarker.destroy(),this._endMarker&&this._endMarker.destroy()};function Ce(t,e,i){this._peaks=t,this._view=e,this._allowEditing=i,this._segmentShapes={},this._layer=new Re.Layer,this._onSegmentsUpdate=this._onSegmentsUpdate.bind(this),this._onSegmentsAdd=this._onSegmentsAdd.bind(this),this._onSegmentsRemove=this._onSegmentsRemove.bind(this),this._onSegmentsRemoveAll=this._onSegmentsRemoveAll.bind(this),this._onSegmentsDragged=this._onSegmentsDragged.bind(this),this._peaks.on("segments.update",this._onSegmentsUpdate),this._peaks.on("segments.add",this._onSegmentsAdd),this._peaks.on("segments.remove",this._onSegmentsRemove),this._peaks.on("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.on("segments.dragged",this._onSegmentsDragged)}Ce.prototype.addToStage=function(t){t.add(this._layer)};Ce.prototype.enableEditing=function(t){this._allowEditing=t};Ce.prototype.isEditingEnabled=function(){return this._allowEditing};Ce.prototype.formatTime=function(t){return this._view.formatTime(t)};Ce.prototype._onSegmentsUpdate=function(t){var e=!1,i=this._segmentShapes[t.id],n=this._view.getStartTime(),s=this._view.getEndTime();i&&(this._removeSegment(t),e=!0),t.isVisible(n,s)&&(this._addSegmentShape(t),e=!0),e&&this.updateSegments(n,s)};Ce.prototype._onSegmentsAdd=function(t){var e=this,i=e._view.getStartTime(),n=e._view.getEndTime();t.forEach(function(s){s.isVisible(i,n)&&e._addSegmentShape(s)}),e.updateSegments(i,n)};Ce.prototype._onSegmentsRemove=function(t){var e=this;t.forEach(function(i){e._removeSegment(i)})};Ce.prototype._onSegmentsRemoveAll=function(){this._layer.removeChildren(),this._segmentShapes={}};Ce.prototype._onSegmentsDragged=function(t){this._updateSegment(t.segment)};Ce.prototype._createSegmentShape=function(t){return new Ne(t,this._peaks,this,this._view)};Ce.prototype._addSegmentShape=function(t){var e=this._createSegmentShape(t);return e.addToLayer(this._layer),this._segmentShapes[t.id]=e,e};Ce.prototype.updateSegments=function(t,e){var i=this._peaks.segments.find(t,e),n=i.length;i.forEach(this._updateSegment.bind(this)),n+=this._removeInvisibleSegments(t,e),n>0&&this._layer.draw()};Ce.prototype._updateSegment=function(t){var e=this._findOrAddSegmentShape(t);e.updatePosition()};Ce.prototype._findOrAddSegmentShape=function(t){var e=this._segmentShapes[t.id];return e||(e=this._addSegmentShape(t)),e};Ce.prototype._removeInvisibleSegments=function(t,e){var i=0;for(var n in this._segmentShapes)if(le(this._segmentShapes,n)){var s=this._segmentShapes[n].getSegment();s.isVisible(t,e)||(this._removeSegment(s),i++)}return i};Ce.prototype._removeSegment=function(t){var e=this._segmentShapes[t.id];e&&(e.destroy(),delete this._segmentShapes[t.id])};Ce.prototype.setVisible=function(t){this._layer.setVisible(t)};Ce.prototype.destroy=function(){this._peaks.off("segments.update",this._onSegmentsUpdate),this._peaks.off("segments.add",this._onSegmentsAdd),this._peaks.off("segments.remove",this._onSegmentsRemove),this._peaks.off("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.off("segments.dragged",this._onSegmentsDragged)};Ce.prototype.fitToView=function(){for(var t in this._segmentShapes)if(le(this._segmentShapes,t)){var e=this._segmentShapes[t];e.fitToView()}};Ce.prototype.draw=function(){this._layer.draw()};Ce.prototype.getHeight=function(){return this._layer.getHeight()};function jt(t,e){var i=this;i._axisGridlineColor=e.axisGridlineColor,i._axisLabelColor=e.axisLabelColor,i._showAxisLabels=e.showAxisLabels,e.formatAxisTime?i._formatAxisTime=e.formatAxisTime:i._formatAxisTime=function(n){return Ur(n,0)},i._axisLabelFont=jt._buildFontString(e.fontFamily,e.fontSize,e.fontStyle),i._axisShape=new Re.Shape({sceneFunc:function(s){i._drawAxis(s,t)}})}jt._buildFontString=function(t,e,i){return e||(e=11),t||(t="sans-serif"),i||(i="normal"),i+" "+e+"px "+t};jt.prototype.addToLayer=function(t){t.add(this._axisShape)};jt.prototype.showAxisLabels=function(t){this._showAxisLabels=t};jt.prototype._getAxisLabelScale=function(t){for(var e=1,i=[1,2,5,10,20,30],n=60,s=0,r;;){r=e*i[s];var a=t.timeToPixels(r);if(a<n)++s===i.length&&(e*=60,s=0);else break}return r};jt.prototype._drawAxis=function(t,e){var i=e.getStartTime(),n=10,s=this._getAxisLabelScale(e),r=xf(i,s),a=r-i,o=e.timeToPixels(a);t.setAttr("strokeStyle",this._axisGridlineColor),t.setAttr("lineWidth",1),t.setAttr("font",this._axisLabelFont),t.setAttr("fillStyle",this._axisLabelColor),t.setAttr("textAlign","left"),t.setAttr("textBaseline","bottom");for(var l=r,h,c=e.getWidth(),d=e.getHeight();h=o+e.timeToPixels(l-r),!(h>=c);){if(t.beginPath(),t.moveTo(h+.5,0),t.lineTo(h+.5,0+n),t.moveTo(h+.5,d),t.lineTo(h+.5,d-n),t.stroke(),this._showAxisLabels){var f=this._formatAxisTime(l),v=t.measureText(f).width,x=h-v/2,C=d-1-n;x>=0&&t.fillText(f,x,C)}l+=s}};function q(t,e,i){var n=this;if(n._originalWaveformData=t,n._container=e,n._peaks=i,n._options=i.options,n._viewOptions=i.options.overview,n._onTimeUpdate=n._onTimeUpdate.bind(this),n._onPlaying=n._onPlaying.bind(this),n._onPause=n._onPause.bind(this),n._onZoomviewDisplaying=n._onZoomviewDisplaying.bind(this),n._onWindowResize=n._onWindowResize.bind(this),i.on("player.timeupdate",n._onTimeUpdate),i.on("player.playing",n._onPlaying),i.on("player.pause",n._onPause),i.on("zoomview.displaying",n._onZoomviewDisplaying),i.on("window_resize",n._onWindowResize),n._amplitudeScale=1,n._timeLabelPrecision=n._viewOptions.timeLabelPrecision,n._enableSeek=!0,n._viewOptions.formatPlayheadTime?n._formatPlayheadTime=n._viewOptions.formatPlayheadTime:n._formatPlayheadTime=function(r){return Ur(r,n._timeLabelPrecision)},n._width=e.clientWidth,n._height=e.clientHeight,n._data=t,n._width!==0)try{n._data=t.resample({width:n._width})}catch{}Re.showWarnings=!1,n._resizeTimeoutId=null,n._stage=new Re.Stage({container:e,width:n._width,height:n._height}),n._waveformColor=n._viewOptions.waveformColor,n._playedWaveformColor=n._viewOptions.playedWaveformColor,n._createWaveform(),n._segmentsLayer=new Ce(i,n,!1),n._segmentsLayer.addToStage(n._stage),n._pointsLayer=new ce(i,n,!1),n._pointsLayer.addToStage(n._stage),n._highlightLayer=new $t(n,n._viewOptions),n._highlightLayer.addToStage(n._stage),n._createAxisLabels(),n._playheadLayer=new We({player:n._peaks.player,view:n,showPlayheadTime:n._viewOptions.showPlayheadTime,playheadColor:n._viewOptions.playheadColor,playheadTextColor:n._viewOptions.playheadTextColor,playheadFontFamily:n._viewOptions.fontFamily,playheadFontSize:n._viewOptions.fontSize,playheadFontStyle:n._viewOptions.fontStyle}),n._playheadLayer.addToStage(n._stage);var s=n._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(s),n._createMouseDragHandler(),n._onClick=n._onClick.bind(this),n._onDblClick=n._onDblClick.bind(this),n._onContextMenu=n._onContextMenu.bind(this),n._stage.on("click",n._onClick),n._stage.on("dblclick",n._onDblClick),n._stage.on("contextmenu",n._onContextMenu)}q.prototype._createMouseDragHandler=function(){var t=this;t._mouseDragHandler=new gi(t._stage,{onMouseDown:function(i){this._seek(i)},onMouseMove:function(i){this._seek(i)},_seek:function(i){if(!!t._enableSeek){i=fi(i,0,t._width);var n=t.pixelsToTime(i),s=t._getDuration();n>s&&(n=s),t._playheadLayer.updatePlayheadTime(n),t._peaks.player.seek(n)}}})};q.prototype.enableSeek=function(t){this._enableSeek=t};q.prototype._onClick=function(t){this._clickHandler(t,"overview.click")};q.prototype._onDblClick=function(t){this._clickHandler(t,"overview.dblclick")};q.prototype._onContextMenu=function(t){this._clickHandler(t,"overview.contextmenu")};q.prototype._clickHandler=function(t,e){var i=t.evt.layerX,n=this.pixelsToTime(i);this._peaks.emit(e,{time:n,evt:t.evt})};q.prototype.getName=function(){return"overview"};q.prototype._onTimeUpdate=function(t){this._playheadLayer.updatePlayheadTime(t)};q.prototype._onPlaying=function(t){this._playheadLayer.updatePlayheadTime(t)};q.prototype._onPause=function(t){this._playheadLayer.stop(t)};q.prototype._onZoomviewDisplaying=function(t,e){this.showHighlight(t,e)};q.prototype.showHighlight=function(t,e){this._highlightLayer.showHighlight(t,e)};q.prototype._onWindowResize=function(){var t=this;t._resizeTimeoutId&&(clearTimeout(t._resizeTimeoutId),t._resizeTimeoutId=null),t._container.clientWidth!==0&&(t._width=t._container.clientWidth,t._stage.setWidth(t._width),t._resizeTimeoutId=setTimeout(function(){t._width=t._container.clientWidth,t._data=t._originalWaveformData.resample({width:t._width}),t._stage.setWidth(t._width),t._updateWaveform()},500))};q.prototype.setWaveformData=function(t){this._originalWaveformData=t,this._width!==0?this._data=t.resample({width:this._width}):this._data=t,this._updateWaveform()};q.prototype.playheadPosChanged=function(t){this._playedWaveformShape&&(this._playedSegment.endTime=t,this._unplayedSegment.startTime=t,this._waveformLayer.draw())};q.prototype.timeToPixels=function(t){return Math.floor(t*this._data.sample_rate/this._data.scale)};q.prototype.pixelsToTime=function(t){return t*this._data.scale/this._data.sample_rate};q.prototype.pixelOffsetToTime=q.prototype.pixelsToTime;q.prototype.getFrameOffset=function(){return 0};q.prototype.getStartTime=function(){return 0};q.prototype.getEndTime=function(){return this._getDuration()};q.prototype.getWidth=function(){return this._width};q.prototype.getHeight=function(){return this._height};q.prototype._getDuration=function(){return this._peaks.player.getDuration()};q.prototype.setAmplitudeScale=function(t){if(!fs(t)||!Nl(t))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=t,this._waveformLayer.draw(),this._segmentsLayer.draw()};q.prototype.getAmplitudeScale=function(){return this._amplitudeScale};q.prototype.getWaveformData=function(){return this._data};q.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new Pe({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var t=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:t},this._unplayedSegment={startTime:t,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new Pe({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};q.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};q.prototype._createWaveform=function(){this._waveformLayer=new Re.Layer({listening:!1}),this._createWaveformShapes(),this._stage.add(this._waveformLayer)};q.prototype._createAxisLabels=function(){this._axisLayer=new Re.Layer({listening:!1}),this._axis=new jt(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};q.prototype.removeHighlightRect=function(){this._highlightLayer.removeHighlight()};q.prototype._updateWaveform=function(){this._waveformLayer.draw(),this._axisLayer.draw();var t=this._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(t),this._highlightLayer.updateHighlight();var e=0,i=this.pixelsToTime(this._width);this._pointsLayer.updatePoints(e,i),this._segmentsLayer.updateSegments(e,i)};q.prototype.setWaveformColor=function(t){this._waveformColor=t,this._waveformShape.setWaveformColor(t)};q.prototype.setPlayedWaveformColor=function(t){this._playedWaveformColor=t,t?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(t)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};q.prototype.showPlayheadTime=function(t){this._playheadLayer.showPlayheadTime(t)};q.prototype.setTimeLabelPrecision=function(t){this._timeLabelPrecision=t,this._playheadLayer.updatePlayheadText()};q.prototype.formatTime=function(t){return this._formatPlayheadTime(t)};q.prototype.showAxisLabels=function(t){this._axis.showAxisLabels(t),this._axisLayer.draw()};q.prototype.enableMarkerEditing=function(t){this._segmentsLayer.enableEditing(t),this._pointsLayer.enableEditing(t)};q.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var t=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.setWidth(this._width);try{this._data=this._originalWaveformData.resample({width:this._width}),t=!0}catch{}}this._height=this._container.clientHeight,this._stage.setHeight(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer.fitToView(),this._pointsLayer.fitToView(),this._highlightLayer.fitToView(),t&&this._updateWaveform(),this._stage.draw()}};q.prototype.destroy=function(){this._resizeTimeoutId&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=null),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("zoomview.displaying",this._onZoomviewDisplaying),this._peaks.off("window_resize",this._onWindowResize),this._playheadLayer.destroy(),this._segmentsLayer.destroy(),this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function V(t,e,i){var n=this;n._container=e,n._peaks=i,n._options=i.options,n._viewOptions=n._options.zoomview,n._enableWaveformCache=n._options.waveformCache,n._originalWaveformData=t,n._initWaveformCache(),n._onTimeUpdate=n._onTimeUpdate.bind(n),n._onPlaying=n._onPlaying.bind(n),n._onPause=n._onPause.bind(n),n._onWindowResize=n._onWindowResize.bind(n),n._onKeyboardLeft=n._onKeyboardLeft.bind(n),n._onKeyboardRight=n._onKeyboardRight.bind(n),n._onKeyboardShiftLeft=n._onKeyboardShiftLeft.bind(n),n._onKeyboardShiftRight=n._onKeyboardShiftRight.bind(n),n._peaks.on("player.timeupdate",n._onTimeUpdate),n._peaks.on("player.playing",n._onPlaying),n._peaks.on("player.pause",n._onPause),n._peaks.on("window_resize",n._onWindowResize),n._peaks.on("keyboard.left",n._onKeyboardLeft),n._peaks.on("keyboard.right",n._onKeyboardRight),n._peaks.on("keyboard.shift_left",n._onKeyboardShiftLeft),n._peaks.on("keyboard.shift_right",n._onKeyboardShiftRight),n._enableAutoScroll=!0,n._amplitudeScale=1,n._timeLabelPrecision=n._viewOptions.timeLabelPrecision,n._enableSeek=!0,n._viewOptions.formatPlayheadTime?n._formatPlayheadTime=n._viewOptions.formatPlayheadTime:n._formatPlayheadTime=function(a){return Ur(a,n._timeLabelPrecision)},n._playheadClickTolerance=n._viewOptions.playheadClickTolerance,n._data=null,n._pixelLength=0;var s=i.zoom.getZoomLevel();n._zoomLevelAuto=!1,n._zoomLevelSeconds=null,n._resizeTimeoutId=null,n._resampleData({scale:s}),n._width=e.clientWidth,n._height=e.clientHeight,n._frameOffset=0,n._stage=new Re.Stage({container:e,width:n._width,height:n._height}),n._waveformColor=n._viewOptions.waveformColor,n._playedWaveformColor=n._viewOptions.playedWaveformColor,n._createWaveform(),n._segmentsLayer=new Ce(i,n,!0),n._segmentsLayer.addToStage(n._stage),n._pointsLayer=new ce(i,n,!0),n._pointsLayer.addToStage(n._stage),n._createAxisLabels(),n._playheadLayer=new We({player:n._peaks.player,view:n,showPlayheadTime:n._viewOptions.showPlayheadTime,playheadColor:n._viewOptions.playheadColor,playheadTextColor:n._viewOptions.playheadTextColor,playheadFontFamily:n._viewOptions.fontFamily,playheadFontSize:n._viewOptions.fontSize,playheadFontStyle:n._viewOptions.fontStyle}),n._playheadLayer.addToStage(n._stage);var r=n._peaks.player.getCurrentTime();n._syncPlayhead(r),n._createMouseDragHandler(),n._onWheel=n._onWheel.bind(n),n._onWheelCaptureVerticalScroll=n._onWheelCaptureVerticalScroll.bind(n),n.setWheelMode(n._viewOptions.wheelMode),n._onClick=n._onClick.bind(this),n._onDblClick=n._onDblClick.bind(this),n._onContextMenu=n._onContextMenu.bind(this),n._stage.on("click",n._onClick),n._stage.on("dblclick",n._onDblClick),n._stage.on("contextmenu",n._onContextMenu)}V.prototype._initWaveformCache=function(){this._enableWaveformCache&&(this._waveformData=new Map,this._waveformData.set(this._originalWaveformData.scale,this._originalWaveformData),this._waveformScales=[this._originalWaveformData.scale])};V.prototype._createMouseDragHandler=function(){var t=this;t._mouseDragHandler=new gi(t._stage,{onMouseDown:function(i){this._seeking=!1;var n=t._playheadLayer.getPlayheadOffset();t._enableSeek&&Math.abs(i-n)<=t._playheadClickTolerance&&(this._seeking=!0),this._seeking?this._seek(i):(this.initialFrameOffset=t._frameOffset,this.mouseDownX=i)},onMouseMove:function(i){if(this._seeking)this._seek(i);else{var n=this.mouseDownX-i,s=this.initialFrameOffset+n;s!==this.initialFrameOffset&&t._updateWaveform(s)}},onMouseUp:function(){if(!this._seeking&&t._enableSeek&&!t._mouseDragHandler.isDragging()){var i=t.pixelOffsetToTime(this.mouseDownX),n=t._getDuration();i>n&&(i=n),t._playheadLayer.updatePlayheadTime(i),t._peaks.player.seek(i)}},_seek:function(i){i=fi(i,0,t._width);var n=t.pixelsToTime(i+t._frameOffset),s=t._getDuration();n>s&&(n=s),t._playheadLayer.updatePlayheadTime(n),t._peaks.player.seek(n)}})};V.prototype.enableSeek=function(t){this._enableSeek=t};V.prototype._onClick=function(t){this._clickHandler(t,"zoomview.click")};V.prototype._onDblClick=function(t){this._clickHandler(t,"zoomview.dblclick")};V.prototype._onContextMenu=function(t){this._clickHandler(t,"zoomview.contextmenu")};V.prototype._clickHandler=function(t,e){var i=t.evt.layerX,n=this.pixelOffsetToTime(i);this._peaks.emit(e,{time:n,evt:t.evt})};V.prototype.setWheelMode=function(t,e){if(e||(e={}),t!==this._wheelMode||e.captureVerticalScroll!==this._captureVerticalScroll)switch(this._stage.off("wheel"),this._wheelMode=t,this._captureVerticalScroll=e.captureVerticalScroll,t){case"scroll":e.captureVerticalScroll?this._stage.on("wheel",this._onWheelCaptureVerticalScroll):this._stage.on("wheel",this._onWheel);break}};V.prototype._onWheel=function(t){var e=t.evt,i;if(e.shiftKey)if(e.deltaY!==0)i=e.deltaY;else if(e.deltaX!==0)i=e.deltaX;else return;else{if(Math.abs(e.deltaX)<Math.abs(e.deltaY))return;i=e.deltaX}e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._width),e.preventDefault();var n=fi(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this._updateWaveform(n)};V.prototype._onWheelCaptureVerticalScroll=function(t){var e=t.evt,i=Math.abs(e.deltaX)<Math.abs(e.deltaY)?e.deltaY:e.deltaX;e.preventDefault();var n=fi(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this._updateWaveform(n)};V.prototype.getName=function(){return"zoomview"};V.prototype._onTimeUpdate=function(t){this._mouseDragHandler.isDragging()||this._syncPlayhead(t)};V.prototype._onPlaying=function(t){this._playheadLayer.updatePlayheadTime(t)};V.prototype._onPause=function(t){this._playheadLayer.stop(t)};V.prototype._onWindowResize=function(){var t=this,e=t._container.clientWidth;t._zoomLevelAuto?(t._resizeTimeoutId&&(clearTimeout(t._resizeTimeoutId),t._resizeTimeoutId=null),e!==0&&(t._width=e,t._stage.width(e),t._resizeTimeoutId=setTimeout(function(){t._width=e,t._data=t._originalWaveformData.resample(e),t._stage.width(e),t._updateWaveform(t._frameOffset)},500))):(t._width=e,t._stage.width(e),t._updateWaveform(t._frameOffset))};V.prototype._onKeyboardLeft=function(){this._keyboardScroll(-1,!1)};V.prototype._onKeyboardRight=function(){this._keyboardScroll(1,!1)};V.prototype._onKeyboardShiftLeft=function(){this._keyboardScroll(-1,!0)};V.prototype._onKeyboardShiftRight=function(){this._keyboardScroll(1,!0)};V.prototype._keyboardScroll=function(t,e){var i;e?i=t*this._width:i=t*this.timeToPixels(this._options.nudgeIncrement),this.scrollWaveform({pixels:i})};V.prototype.setWaveformData=function(t){this._originalWaveformData=t,this._initWaveformCache()};V.prototype.playheadPosChanged=function(t){this._playedWaveformShape&&(this._playedSegment.endTime=t,this._unplayedSegment.startTime=t,this._drawWaveformLayer())};V.prototype._syncPlayhead=function(t){if(this._playheadLayer.updatePlayheadTime(t),this._enableAutoScroll){var e=this.timeToPixels(t),i=this._frameOffset+this._width-100;(e>=i||e<this._frameOffset)&&(this._frameOffset=e-100,this._frameOffset<0&&(this._frameOffset=0),this._updateWaveform(this._frameOffset))}};V.prototype._getScale=function(t){return t*this._data.sample_rate/this._width};function jf(t){return le(t,"scale")&&t.scale==="auto"||le(t,"seconds")&&t.seconds==="auto"}V.prototype.setZoom=function(t){var e;if(jf(t)){var i=this._peaks.player.getDuration();if(!zt(i))return!1;this._zoomLevelAuto=!0,this._zoomLevelSeconds=null,e=this._getScale(i)}else{if(le(t,"scale"))this._zoomLevelSeconds=null,e=t.scale;else if(le(t,"seconds")){if(!zt(t.seconds))return!1;this._zoomLevelSeconds=t.seconds,e=this._getScale(t.seconds)}this._zoomLevelAuto=!1}e<this._originalWaveformData.scale&&(this._peaks._logger("peaks.zoomview.setZoom(): zoom level must be at least "+this._originalWaveformData.scale),e=this._originalWaveformData.scale);var n=this._peaks.player.getCurrentTime(),s,r=this._playheadLayer.getPlayheadOffset();r>=0&&r<this._width?s=n:(r=Math.floor(this._width/2),s=this.pixelOffsetToTime(r));var a=this._scale;this._resampleData({scale:e});var o=this.timeToPixels(s);return this._frameOffset=o-r,this._updateWaveform(this._frameOffset),this._playheadLayer.zoomLevelChanged(),this._playheadLayer.updatePlayheadTime(n),this._peaks.emit("zoom.update",e,a),!0};V.prototype._resampleData=function(t){var e=t.scale;if(this._enableWaveformCache){if(!this._waveformData.has(e)){for(var i=this._originalWaveformData,n=0;n<this._waveformScales.length&&this._waveformScales[n]<e;n++)i=this._waveformData.get(this._waveformScales[n]);this._waveformData.set(e,i.resample(t)),this._waveformScales.push(e),this._waveformScales.sort(function(s,r){return s-r})}this._data=this._waveformData.get(e)}else this._data=this._originalWaveformData.resample(t);this._scale=this._data.scale,this._pixelLength=this._data.length};V.prototype.getStartTime=function(){return this.pixelOffsetToTime(0)};V.prototype.getEndTime=function(){return this.pixelOffsetToTime(this._width)};V.prototype.setStartTime=function(t){t<0&&(t=0),this._zoomLevelAuto&&(t=0),this._updateWaveform(this.timeToPixels(t))};V.prototype.timeToPixels=function(t){return Math.floor(t*this._data.sample_rate/this._data.scale)};V.prototype.pixelsToTime=function(t){return t*this._data.scale/this._data.sample_rate};V.prototype.pixelOffsetToTime=function(t){var e=this._frameOffset+t;return e*this._data.scale/this._data.sample_rate};V.prototype.getFrameOffset=function(){return this._frameOffset};V.prototype.getWidth=function(){return this._width};V.prototype.getHeight=function(){return this._height};V.prototype._getDuration=function(){return this._peaks.player.getDuration()};V.prototype.setAmplitudeScale=function(t){if(!fs(t)||!Nl(t))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=t,this._drawWaveformLayer(),this._segmentsLayer.draw()};V.prototype.getAmplitudeScale=function(){return this._amplitudeScale};V.prototype.getWaveformData=function(){return this._data};V.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new Pe({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var t=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:t},this._unplayedSegment={startTime:t,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new Pe({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};V.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};V.prototype._createWaveform=function(){this._waveformLayer=new Re.Layer({listening:!1}),this._createWaveformShapes(),this._stage.add(this._waveformLayer),this._peaks.emit("zoomview.displaying",0,this.getEndTime())};V.prototype._createAxisLabels=function(){this._axisLayer=new Re.Layer({listening:!1}),this._axis=new jt(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};V.prototype.scrollWaveform=function(t){var e;if(le(t,"pixels"))e=Math.floor(t.pixels);else if(le(t,"seconds"))e=this.timeToPixels(t.seconds);else throw new TypeError("view.scrollWaveform(): Missing umber of pixels or seconds");this._updateWaveform(this._frameOffset+e)};V.prototype._updateWaveform=function(t){var e;this._pixelLength<this._width?(t=0,e=this._width):e=this._pixelLength-this._width,t=fi(t,0,e),this._frameOffset=t;var i=this._playheadLayer.getPlayheadPixel();this._playheadLayer.updatePlayheadTime(this.pixelsToTime(i)),this._drawWaveformLayer(),this._axisLayer.draw();var n=this.getStartTime(),s=this.getEndTime();this._pointsLayer.updatePoints(n,s),this._segmentsLayer.updateSegments(n,s),this._peaks.emit("zoomview.displaying",n,s)};V.prototype._drawWaveformLayer=function(){this._waveformLayer.draw()};V.prototype.setWaveformColor=function(t){this._waveformColor=t,this._waveformShape.setWaveformColor(t)};V.prototype.setPlayedWaveformColor=function(t){this._playedWaveformColor=t,t?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(t)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};V.prototype.showPlayheadTime=function(t){this._playheadLayer.showPlayheadTime(t)};V.prototype.setTimeLabelPrecision=function(t){this._timeLabelPrecision=t,this._playheadLayer.updatePlayheadText()};V.prototype.formatTime=function(t){return this._formatPlayheadTime(t)};V.prototype.showAxisLabels=function(t){this._axis.showAxisLabels(t),this._axisLayer.draw()};V.prototype.enableAutoScroll=function(t){this._enableAutoScroll=t};V.prototype.enableMarkerEditing=function(t){this._segmentsLayer.enableEditing(t),this._pointsLayer.enableEditing(t)};V.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var t=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.width(this._width);var e=!1,i;if(this._zoomLevelAuto?(e=!0,i={width:this._width}):this._zoomLevelSeconds!==null&&(e=!0,i={scale:this._getScale(this._zoomLevelSeconds)}),e)try{this._resampleData(i),t=!0}catch{}}this._height=this._container.clientHeight,this._stage.height(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer.fitToView(),this._pointsLayer.fitToView(),t&&this._updateWaveform(this._frameOffset),this._stage.draw()}};V.prototype.destroy=function(){this._resizeTimeoutId&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=null),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("window_resize",this._onWindowResize),this._peaks.off("keyboard.left",this._onKeyboardLeft),this._peaks.off("keyboard.right",this._onKeyboardRight),this._peaks.off("keyboard.shift_left",this._onKeyboardShiftLeft),this._peaks.off("keyboard.shift_right",this._onKeyboardShiftRight),this._playheadLayer.destroy(),this._segmentsLayer.destroy(),this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function _i(t){this._peaks=t,this._overview=null,this._zoomview=null}_i.prototype.createOverview=function(t){if(this._overview)return this._overview;var e=this._peaks.getWaveformData();return this._overview=new q(e,t,this._peaks),this._zoomview&&this._overview.showHighlight(this._zoomview.getStartTime(),this._zoomview.getEndTime()),this._overview};_i.prototype.createZoomview=function(t){if(this._zoomview)return this._zoomview;var e=this._peaks.getWaveformData();return this._zoomview=new V(e,t,this._peaks),this._zoomview};_i.prototype.destroyOverview=function(){!this._overview||!this._zoomview||(this._overview.destroy(),this._overview=null)};_i.prototype.destroyZoomview=function(){!this._zoomview||!this._overview||(this._zoomview.destroy(),this._zoomview=null,this._overview.removeHighlightRect())};_i.prototype.destroy=function(){this._overview&&(this._overview.destroy(),this._overview=null),this._zoomview&&(this._zoomview.destroy(),this._zoomview=null)};_i.prototype.getView=function(t){if(yt(t))return this._overview&&this._zoomview?null:this._overview?this._overview:this._zoomview?this._zoomview:null;switch(t){case"overview":return this._overview;case"zoomview":return this._zoomview;default:return null}};function mi(t,e){this._peaks=t,this._zoomLevels=e,this._zoomLevelIndex=0}mi.prototype.setZoomLevels=function(t){this._zoomLevels=t,this.setZoom(0,!0)};mi.prototype.zoomIn=function(){this.setZoom(this._zoomLevelIndex-1)};mi.prototype.zoomOut=function(){this.setZoom(this._zoomLevelIndex+1)};mi.prototype.setZoom=function(t,e){if(t>=this._zoomLevels.length&&(t=this._zoomLevels.length-1),t<0&&(t=0),!(!e&&t===this._zoomLevelIndex)){this._zoomLevelIndex=t;var i=this._peaks.views.getView("zoomview");!i||i.setZoom({scale:this._zoomLevels[t]})}};mi.prototype.getZoom=function(){return this._zoomLevelIndex};mi.prototype.getZoomLevel=function(){return this._zoomLevels[this._zoomLevelIndex]};var to="withCredentials"in new XMLHttpRequest;function It(t){this._peaks=t}It.prototype.init=function(t,e){if(t.dataUri&&(t.webAudio||t.audioContext)||t.waveformData&&(t.webAudio||t.audioContext)||t.dataUri&&t.waveformData){e(new TypeError("Peaks.init(): You may only pass one source (webAudio, dataUri, or waveformData) to render waveform data."));return}if(t.audioContext&&(this._peaks._logger("Peaks.init(): The audioContext option is deprecated, please pass a webAudio object instead"),t.webAudio={audioContext:t.audioContext}),t.dataUri)return this._getRemoteWaveformData(t,e);if(t.waveformData)return this._buildWaveformFromLocalData(t,e);if(t.webAudio)return t.webAudio.audioBuffer?this._buildWaveformDataFromAudioBuffer(t,e):this._buildWaveformDataUsingWebAudio(t,e);e(new Error("Peaks.init(): You must pass an audioContext, or dataUri, or waveformData to render waveform data"))};It.prototype._getRemoteWaveformData=function(t,e){var i=this,n=null,s=null,r;if(Hi(t.dataUri))n=t.dataUri;else if(li(t.dataUri))n={},n[t.dataUriDefaultFormat||"json"]=t.dataUri;else{e(new TypeError("Peaks.init(): The dataUri option must be an object"));return}if(["ArrayBuffer","JSON"].some(function(o){if(window[o])return s=o.toLowerCase(),r=n[s],Boolean(r)}),!r){e(new Error("Peaks.init(): Unable to determine a compatible dataUri format for this browser"));return}var a=i._createXHR(r,s,t.withCredentials,function(o){if(this.readyState===4){if(this.status!==200){e(new Error("Unable to fetch remote data. HTTP status "+this.status));return}var l=it.create(o.target.response);if(l.channels!==1&&l.channels!==2){e(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(l.bits!==8){e(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}e(null,l)}},function(){e(new Error("XHR Failed"))});a.send()};It.prototype._buildWaveformFromLocalData=function(t,e){var i=null,n=null;if(Hi(t.waveformData))i=t.waveformData;else{e(new Error("Peaks.init(): The waveformData option must be an object"));return}if(Hi(i.json)?n=i.json:Ef(i.arraybuffer)&&(n=i.arraybuffer),!n){e(new Error("Peaks.init(): Unable to determine a compatible waveformData format"));return}try{var s=it.create(n);if(s.channels!==1&&s.channels!==2){e(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(s.bits!==8){e(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}e(null,s)}catch(r){e(r)}};It.prototype._buildWaveformDataUsingWebAudio=function(t,e){var i=this,n=window.AudioContext||window.webkitAudioContext;if(!(t.webAudio.audioContext instanceof n)){e(new TypeError("Peaks.init(): The webAudio.audioContext option must be a valid AudioContext"));return}var s=t.webAudio;s.scale!==t.zoomLevels[0]&&(s.scale=t.zoomLevels[0]);var r=i._peaks.options.mediaElement.currentSrc;r?i._requestAudioAndBuildWaveformData(r,s,t.withCredentials,e):i._peaks.once("player.canplay",function(){i._requestAudioAndBuildWaveformData(i._peaks.options.mediaElement.currentSrc,s,t.withCredentials,e)})};It.prototype._buildWaveformDataFromAudioBuffer=function(t,e){var i=t.webAudio;i.scale!==t.zoomLevels[0]&&(i.scale=t.zoomLevels[0]);var n={audio_buffer:i.audioBuffer,split_channels:i.multiChannel,scale:i.scale};it.createFromAudio(n,e)};It.prototype._requestAudioAndBuildWaveformData=function(t,e,i,n){var s=this;if(!t){s._peaks._logger("Peaks.init(): The mediaElement src is invalid");return}var r=s._createXHR(t,"arraybuffer",i,function(a){if(this.readyState===4){if(this.status!==200){n(new Error("Unable to fetch remote data. HTTP status "+this.status));return}var o={audio_context:e.audioContext,array_buffer:a.target.response,split_channels:e.multiChannel,scale:e.scale};it.createFromAudio(o,n)}},function(){n(new Error("XHR Failed"))});r.send()};It.prototype._createXHR=function(t,e,i,n,s){var r=new XMLHttpRequest;if(r.open("GET",t,!0),to)try{r.responseType=e}catch{}return r.onload=n,r.onerror=s,to&&i&&(r.withCredentials=!0),r};function ct(){return Dl.call(this),this.options={zoomLevels:[512,1024,2048,4096],waveformCache:!0,mediaElement:null,mediaUrl:null,dataUri:null,dataUriDefaultFormat:"json",withCredentials:!1,waveformData:null,webAudio:null,nudgeIncrement:1,segmentStartMarkerColor:"#aaaaaa",segmentEndMarkerColor:"#aaaaaa",randomizeSegmentColor:!0,segmentColor:"#ff851b",pointMarkerColor:"#39cccc",createSegmentMarker:Bf,createSegmentLabel:zf,createPointMarker:Uf,logger:console.error.bind(console)},this}ct.prototype=Object.create(Dl.prototype);var gs={playheadColor:"#111111",playheadTextColor:"#aaaaaa",axisGridlineColor:"#cccccc",showAxisLabels:!0,axisLabelColor:"#aaaaaa",fontFamily:"sans-serif",fontSize:11,fontStyle:"normal",timeLabelPrecision:2},io={playheadClickTolerance:3,waveformColor:"rgba(0, 225, 128, 1)",wheelMode:"none"},no={waveformColor:"rgba(0, 0, 0, 0.2)",highlightColor:"#aaaaaa",highlightStrokeColor:"transparent",highlightOpacity:.3,highlightOffset:11,highlightCornerRadius:2};function Kf(t){var e={};t.containers&&t.containers.overview&&(e.container=t.containers.overview),t.overviewWaveformColor&&(e.waveformColor=t.overviewWaveformColor),t.overviewHighlightOffset&&(e.highlightOffset=t.overviewHighlightOffset),t.overviewHighlightColor&&(e.highlightColor=t.overviewHighlightColor),t.overview&&t.overview.showPlayheadTime&&(e.showPlayheadTime=t.overview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","highlightColor","highlightStrokeColor","highlightOpacity","highlightCornerRadius","highlightOffset"];return i.forEach(function(n){t.overview&&le(t.overview,n)?e[n]=t.overview[n]:le(t,n)?e[n]=t[n]:le(e,n)||(le(no,n)?e[n]=no[n]:le(gs,n)&&(e[n]=gs[n]))}),e}function Zf(t){var e={};t.containers&&t.containers.zoomview&&(e.container=t.containers.zoomview),t.zoomWaveformColor&&(e.waveformColor=t.zoomWaveformColor),t.showPlayheadTime?e.showPlayheadTime=t.showPlayheadTime:t.zoomview&&t.zoomview.showPlayheadTime&&(e.showPlayheadTime=t.zoomview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","playheadClickTolerance","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","wheelMode"];return i.forEach(function(n){t.zoomview&&le(t.zoomview,n)?e[n]=t.zoomview[n]:le(t,n)?e[n]=t[n]:le(e,n)||(le(io,n)?e[n]=io[n]:le(gs,n)&&(e[n]=gs[n]))}),e}function qf(t,e){for(var i in e)le(e,i)&&le(t,i)&&(t[i]=e[i]);return t}ct.init=function(t,e){var i=new ct,n=i._setOptions(t);if(n){e(n);return}var s=i.options.zoomview.container,r=i.options.overview.container;if(!Za(s)&&!Za(r)){e(new TypeError("Peaks.init(): The zoomview and/or overview container options must be valid HTML elements"));return}if(s&&(s.clientWidth<=0||s.clientHeight<=0)){e(new Error("Peaks.init(): Please ensure that the zoomview container is visible and has non-zero width and height"));return}if(r&&(r.clientWidth<=0||r.clientHeight<=0)){e(new Error("Peaks.init(): Please ensure that the overview container is visible and has non-zero width and height"));return}t.keyboard&&(i._keyboardHandler=new Xr(i));var a=t.player?t.player:new nt(i.options.mediaElement);i.player=new Qe(i,a),i.segments=new De(i),i.points=new Ve(i),i.zoom=new mi(i,i.options.zoomLevels),i.views=new _i(i);var o=new It(i);a.init(i).then(function(){o.init(i.options,function(l,h){if(l){e&&e(l);return}i._waveformData=h,r&&i.views.createOverview(r),s&&i.views.createZoomview(s),i._addWindowResizeHandler(),t.segments&&i.segments.add(t.segments),t.points&&i.points.add(t.points),t.emitCueEvents&&(i._cueEmitter=new dt(i)),setTimeout(function(){i.emit("peaks.ready")},0),e(null,i)})}).catch(function(l){e&&e(l)})};ct.prototype._setOptions=function(t){if(!Hi(t))return new TypeError("Peaks.init(): The options parameter should be an object");if(!t.player){if(!t.mediaElement)return new Error("Peaks.init(): Missing mediaElement option");if(!(t.mediaElement instanceof HTMLMediaElement))return new TypeError("Peaks.init(): The mediaElement option should be an HTMLMediaElement")}if(t.container)return new Error("Peaks.init(): The container option has been removed, please use containers instead");if(t.logger&&!Af(t.logger))return new TypeError("Peaks.init(): The logger option should be a function");if(t.segments&&!Array.isArray(t.segments))return new TypeError("Peaks.init(): options.segments must be an array of segment objects");if(t.points&&!Array.isArray(t.points))return new TypeError("Peaks.init(): options.points must be an array of point objects");if(qf(this.options,t),this.options.overview=Kf(t),this.options.zoomview=Zf(t),Array.isArray(this.options.zoomLevels)){if(this.options.zoomLevels.length===0)return new Error("Peaks.init(): The zoomLevels array must not be empty");if(!kf(this.options.zoomLevels))return new Error("Peaks.init(): The zoomLevels array must be sorted in ascending order")}else return new TypeError("Peaks.init(): The zoomLevels option should be an array");this._logger=this.options.logger};ct.prototype.setSource=function(t,e){var i=this;this.player._setSource(t).then(function(){t.zoomLevels||(t.zoomLevels=i.options.zoomLevels);var n=new It(i);n.init(t,function(s,r){if(s){e(s);return}i._waveformData=r,["overview","zoomview"].forEach(function(a){var o=i.views.getView(a);o&&o.setWaveformData(r)}),i.zoom.setZoomLevels(t.zoomLevels),e()})}).catch(function(n){e(n)})};ct.prototype.getWaveformData=function(){return this._waveformData};ct.prototype._addWindowResizeHandler=function(){this._onResize=this._onResize.bind(this),window.addEventListener("resize",this._onResize)};ct.prototype._onResize=function(){this.emit("window_resize")};ct.prototype._removeWindowResizeHandler=function(){window.removeEventListener("resize",this._onResize)};ct.prototype.destroy=function(){this._removeWindowResizeHandler(),this._keyboardHandler&&this._keyboardHandler.destroy(),this.views&&this.views.destroy(),this.player&&this.player.destroy(),this._cueEmitter&&this._cueEmitter.destroy()};const Jf=["src"],Qf={class:"peaks-controls"},ep=wt({__name:"AudioPeaks",props:{src:{},zoomviewElementId:{},zoomviewElement:{},overviewElementId:{},overviewElement:{},mediaElementId:{},mediaElement:{},options:{}},emits:["error"],setup(t,{expose:e,emit:i}){const n=t,s=_t(void 0),r=_t(null),a=_t(null),o=_t(null),l=_t(null),h=_t(null),c=_t(null),d=_t(void 0);e({peaksInstance:s}),$o(()=>{f()}),jo(()=>{v()});function f(){console.debug("AudioPeaks::createPeaksInstance:options:",n.options);const D=x(n.overviewElement,n.overviewElementId,r,a,"div"),w=x(n.zoomviewElement,n.zoomviewElementId,o,l,"div"),F=x(n.mediaElement,n.mediaElementId,h,c,"audio");n.options&&(n.options.containers={overview:D,zoomview:w},n.options.mediaElement=F);const L=n.options?n.options:{containers:{overview:D,zoomview:w},mediaElement:F,webAudio:{audioContext:new AudioContext},zoomLevels:[256,512,1024,2048,4096]};ct.init(L,function(Z,ie){Z&&(console.error(Z),i("error",Z)),s.value=ie,d.value=ie==null?void 0:ie.zoom.getZoom()})}function v(){var D;(D=s.value)==null||D.destroy()}function x(D,w,F,L,Z){if(D)return console.debug("AudioPeaks::Found elm: ",D),D;if(w)return console.debug("AudioPeaks::Found element by id: ",w),document.getElementById(""+w);const ie=F.value;if(ie)return console.debug("AudioPeaks::Found element by Ref: ",ie),ie;const ye=L.value;if(ye){const J=ye.getElementsByTagName(Z)[0];if(J)return console.debug("AudioPeaks::Found element by first in slot: ",J),J}}function C(){var D,w;(D=s.value)==null||D.zoom.zoomIn(),d.value=(w=s.value)==null?void 0:w.zoom.getZoom()}function _(){var D,w;(D=s.value)==null||D.zoom.zoomOut(),d.value=(w=s.value)==null?void 0:w.zoom.getZoom()}return(D,w)=>(be(),ke("div",null,[g("div",{ref_key:"overviewSlot",ref:a},[!n.overviewElementId&&!n.overviewElement?Dn(D.$slots,"overview",{key:0},()=>[g("div",{class:"peaks-overview",ref_key:"overview",ref:r},null,512)],!0):ln("",!0)],512),g("div",{ref_key:"zoomviewSlot",ref:l},[!n.zoomviewElementId&&!n.zoomviewElement?Dn(D.$slots,"zoomview",{key:0},()=>[g("div",{class:"peaks-zoomview",ref_key:"zoomview",ref:o},null,512)],!0):ln("",!0)],512),g("div",{ref_key:"audioSlot",ref:c},[!n.mediaElementId&&!n.mediaElement?Dn(D.$slots,"default",{key:0},()=>[g("audio",{class:"peaks-audio",ref_key:"audio",ref:h,controls:""},[g("source",{src:D.src},null,8,Jf)],512)],!0):ln("",!0)],512),Dn(D.$slots,"controls",{},()=>[g("div",Qf,[g("button",{onClick:w[0]||(w[0]=F=>C())},"Zoom in"),Se("\xA0 "),g("button",{onClick:w[1]||(w[1]=F=>_())},"Zoom out"),Se("\xA0 "),g("span",null,"Zoom level: "+Tr(d.value),1)])],!0)]))}});const ai=ci(ep,[["__scopeId","data-v-0f594c68"]]),tp=g("p",null,[Se("vue-peaks provides three modes of operation: "),g("ul",null,[g("li",null,[g("b",null,"Simple mode"),Se(": just set the media URL, and all views are automatically rendered by default")]),g("li",null,[g("b",null,"Slot mode"),Se(": the media element and additional views are provided using named slots")]),g("li",null,[g("b",null,"External mode"),Se(": the media element and additional views are referenced by id or HTML element references ")])])],-1),ip=g("h4",{class:"title is-4"},'Just using a media source URL ("simple" mode)',-1),np={class:"columns is-desktop"},sp={class:"column"},rp=g("p",null,[Se(" By default, the "),g("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaks.vue"},"AudioPeaks Vue component"),Se(" template has a new audio element, with the given source URL, and both view panes (overview and zoom, which are rendered with a default size) and a controls pane. A new audio context is created and used to compute the waveform. ")],-1),ap={class:"column"},op={class:"box"},lp=g("h4",{class:"title is-4"},'Providing a media element ("slot" mode)',-1),hp={class:"columns is-desktop"},cp=g("div",{class:"column"},[g("p",null," To provide your own media element, just place it inside the AudioPeaks element (a.k.a. the slot). Vue-peaks will use the first audio element in the slot. A new audio context is created and used to compute the waveform. ")],-1),dp={class:"column"},up={class:"column is-narrow"},fp={class:"box"},pp=g("span",{class:"tag is-danger is-large is-multiline"},"You can also add additional HTML content.",-1),gp=g("audio",{controls:"",style:{width:"100%"}},[g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),_p=g("h4",{class:"title is-4"},'Using a specified media element ("external" mode)',-1),mp={class:"columns is-desktop"},vp=g("div",{class:"column"},[g("p",null," If you already have an existing media element, you can reference it by it's (unique) id, or as an HTMLMediaElement object. A new audio context is created and used to compute the waveform. "),g("p",null," There are also properties available for overview area and the zoom view area. ")],-1),yp={class:"column"},bp={class:"column is-narrow"},wp={class:"box"},Cp=g("audio",{controls:"",id:"externalMediaElement"},[g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),Sp=g("div",null,[g("span",{class:"tag is-danger is-large"}," Using the external media element above.")],-1),Tp=wt({__name:"ExampleWithTheBasics",setup(t){return(e,i)=>{const n=At("highlightjs");return be(),ke($e,null,[tp,ip,g("div",np,[g("div",sp,[rp,K(n,{language:"vue-typescript",code:"import AudioPeaks from 'vue-peaks/src/components/AudioPeaks.vue';"}),K(n,{language:"vue-template",code:"<AudioPeaks src='https://domain/file.mp3' />"})]),g("div",ap,[g("div",op,[K(ai,{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})])])]),lp,g("div",hp,[cp,g("div",dp,[K(n,{language:"vue-template",code:`<AudioPeaks>
  <span>You can also add additional HTML content.</span>
  <audio controls style='width: 100%;'>
    <source src='https://domain/file.mp3' />
  </audio>
</AudioPeaks>`})]),g("div",up,[g("div",fp,[K(ai,null,{default:Ze(()=>[pp,gp]),_:1})])])]),_p,g("div",mp,[vp,g("div",yp,[K(n,{language:"vue-template",code:`<audio controls id='externalMediaElement'>
  <source src='https://domain/file.mp3' />
</audio>
<div><span class='tag is-danger is-large'>
    Using the external media element above.</span></div>
<AudioPeaks mediaElementId='externalMediaElement'>
</AudioPeaks>`})]),g("div",bp,[g("div",wp,[Cp,Sp,K(ai,{mediaElementId:"externalMediaElement"})])])])],64)}}}),xp={class:"columns is-desktop"},kp=Vt('<div class="column"><p> To fully customize the appearance and behavior, the Peaks.js <a href="https://github.com/bbc/peaks.js#Configuration">configuration options</a> can be provided. </p><p> Note, that you should omit the the <span class="code">containers.overview</span>, <span class="code">containers.zoomview</span> and <span class="code">mediaElement</span> options, since these are set internally, depending on the view mode (explained with the basic examples). </p><p>The options allow you for example to <ul><li>customize the waveform styles</li><li>define scrolling behavior</li><li>use precomputed waveform data</li></ul></p></div>',1),Ep={class:"column"},Ap={class:"column"},Pp={class:"box"},Ip=g("audio",{controls:""},[g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),Mp=g("template",null,null,-1),Lp=wt({__name:"ExampleUsingPeaksOptions",setup(t){const e={overview:{waveformColor:"#3298dc",playedWaveformColor:"#238cd1",highlightColor:"hsl(206, 70%, 96%)",highlightOffset:0,axisGridlineColor:"hsl(0, 0%, 29%)",axisLabelColor:"hsl(0, 0%, 29%)",showPlayheadTime:!1},zoomview:{waveformColor:"#f1b70e",playedWaveformColor:"#d9a50d",axisGridlineColor:"hsl(0, 0%, 29%)",axisLabelColor:"hsl(0, 0%, 29%)",playheadTextColor:"#e43725",showPlayheadTime:!0},webAudio:{audioContext:new AudioContext},zoomLevels:[256],playheadColor:"#e43725"};return(i,n)=>{const s=At("highlightjs");return be(),ke("div",xp,[kp,g("div",Ep,[K(s,{language:"vue-typescript",code:`/** The configuration options 
* @remarks The colors are taken from a Bulma color scheme.
*/
const options: PeaksOptions = {
  overview: {
    /* container is handled separately by AudioPeaks */
    waveformColor: 'hsl(204, 86%, 53%)',
    playedWaveformColor: 'hsl(204, 71%, 39%)',
    highlightColor: 'hsl(206, 70%, 96%)',
    highlightOffset: 0,
    axisGridlineColor: 'hsl(0, 0%, 29%)',
    axisLabelColor: 'hsl(0, 0%, 29%)',
  },
  zoomview: {
    /* container is handled separately by AudioPeaks */
    waveformColor: 'hsl(48, 71%, 48%)',
    playedWaveformColor: 'hsl(48, 53%, 31%)',
    axisGridlineColor: 'hsl(0, 0%, 29%)',
    axisLabelColor: 'hsl(0, 0%, 29%)',
  },
  /* mediaElement is handled separately by AudioPeaks */
  webAudio: { audioContext: new AudioContext() },
  zoomLevels: [256],
  playheadColor: 'hsl(348, 100%, 61%)'
}`}),K(s,{language:"vue-template",code:`<AudioPeaks :options='options'>
  <audio controls>
    <source src='https://domain/file.mp3' />
  </audio>
  <template #controls><template />
    <!-- Using an empty template on a slot 
         prevents the default content -->
  </template>
</AudioPeaks>`})]),g("div",Ap,[g("div",Pp,[K(ai,{options:e},{controls:Ze(()=>[Mp]),default:Ze(()=>[Ip]),_:1})])])])}}}),vi=t=>(Wo("data-v-b3ef7b4c"),t=t(),Bo(),t),Op={class:"widget"},Rp=["disabled"],Dp={key:0,style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Np=vi(()=>g("path",{fill:"currentColor",d:"M14,19H18V5H14M6,19H10V5H6V19Z"},null,-1)),Hp=[Np],Fp={key:1,style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Gp=vi(()=>g("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"},null,-1)),Wp=[Gp],Bp=["disabled"],zp={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Up=vi(()=>g("path",{fill:"currentColor",d:"M14.55 20C15 20.76 15.5 21.44 15.91 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V10.22C19.5 10.08 19 10 18.5 10C18.33 10 18.17 10 18 10.03V4H13V12L10.5 9.75L8 12V4H6V20H14.55M22 15.5C22 18.1 18.5 22 18.5 22S15 18.1 15 15.5C15 13.6 16.6 12 18.5 12S22 13.6 22 15.5M19.7 15.6C19.7 15 19.1 14.4 18.5 14.4S17.3 14.9 17.3 15.6C17.3 16.2 17.8 16.8 18.5 16.8S19.8 16.2 19.7 15.6Z"},null,-1)),Vp=[Up],Xp=["disabled"],Yp={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},$p=vi(()=>g("path",{fill:"currentColor",d:"M13.09 20C13.21 20.72 13.46 21.39 13.81 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V13.09C19.67 13.04 19.34 13 19 13C18.66 13 18.33 13.04 18 13.09V4H13V12L10.5 9.75L8 12V4H6V20H13.09M17 16V22L22 19L17 16Z"},null,-1)),jp=[$p],Kp=vi(()=>g("template",null,null,-1)),Zp=["src"],qp=vi(()=>g("template",null,null,-1)),Jp={class:"item peaks-overview",id:"widgetOverview"},Qp=["title"],eg={class:"spin",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},tg=vi(()=>g("path",{fill:"currentColor",d:"M12 19C13.1 19 14 19.9 14 21S13.1 23 12 23 10 22.1 10 21 10.9 19 12 19M12 1C13.1 1 14 1.9 14 3S13.1 5 12 5 10 4.1 10 3 10.9 1 12 1M6 16C7.1 16 8 16.9 8 18S7.1 20 6 20 4 19.1 4 18 4.9 16 6 16M3 10C4.1 10 5 10.9 5 12S4.1 14 3 14 1 13.1 1 12 1.9 10 3 10M6 4C7.1 4 8 4.9 8 6S7.1 8 6 8 4 7.1 4 6 4.9 4 6 4M18 16C19.1 16 20 16.9 20 18S19.1 20 18 20 16 19.1 16 18 16.9 16 18 16M21 10C22.1 10 23 10.9 23 12S22.1 14 21 14 19 13.1 19 12 19.9 10 21 10M18 4C19.1 4 20 4.9 20 6S19.1 8 18 8 16 7.1 16 6 16.9 4 18 4Z"},null,-1)),ig=[tg],ng={key:1},sg={key:2,class:"has-text-danger"},rg=wt({__name:"AudioPeaksWidget",props:{src:{}},setup(t){const e=t,i=_t(),n=ki(()=>{var c;return(c=i.value)==null?void 0:c.peaksInstance}),s=_t(null),r=hi({isPlaying:!1,canPlay:!1,bookmark:0,lastErrorMessage:""}),a={overview:{waveformColor:"#2ecc71",playedWaveformColor:"#29b765",showAxisLabels:!1,axisGridlineColor:"hsl(0, 0%, 100%)",playheadTextColor:"#e43725",showPlayheadTime:!0},showPlayheadTime:!0,webAudio:{audioContext:new AudioContext},playheadColor:"#e43725"};function o(){var c,d;r.isPlaying=!r.isPlaying,r.isPlaying?(c=s.value)==null||c.play():(d=s.value)==null||d.pause()}function l(){var d,f;const c=(d=n.value)==null?void 0:d.player.getCurrentTime();c&&((f=n.value)==null||f.points.add({time:c,editable:!0,labelText:"Bookmark",color:"#000000"}),r.bookmark=c)}function h(){var c;(c=n.value)==null||c.player.seek(r.bookmark)}return(c,d)=>(be(),ke("div",Op,[g("button",{class:"item",onClick:d[0]||(d[0]=f=>o()),disabled:!r.canPlay},[r.isPlaying?(be(),ke("svg",Dp,Hp)):(be(),ke("svg",Fp,Wp))],8,Rp),g("button",{class:"item",onClick:d[1]||(d[1]=f=>l()),disabled:!r.canPlay,title:"set bookmark"},[(be(),ke("svg",zp,Vp))],8,Bp),g("button",{class:"item",onClick:d[2]||(d[2]=f=>h()),disabled:!r.bookmark,title:"seek bookmark"},[(be(),ke("svg",Yp,jp))],8,Xp),K(ai,{overviewElementId:"widgetOverview",ref_key:"audioPeaks",ref:i,options:a,onError:d[4]||(d[4]=f=>r.lastErrorMessage=f.message)},{zoomview:Ze(()=>[Kp]),default:Ze(()=>[g("audio",{ref_key:"audio",ref:s,onCanplay:d[3]||(d[3]=()=>{r.canPlay=!0})},[g("source",{src:e.src},null,8,Zp)],544)]),controls:Ze(()=>[qp]),_:1},512),g("div",Jp,[e.src?(be(),ke("div",{key:0,title:`Loading and rendering from ${e.src}`},[(be(),ke("svg",eg,ig))],8,Qp)):(be(),ke("span",ng,"no media available")),r.lastErrorMessage?(be(),ke("span",sg,Tr(r.lastErrorMessage),1)):ln("",!0)])]))}});const ag=ci(rg,[["__scopeId","data-v-b3ef7b4c"]]),og={class:"columns"},lg=g("div",{class:"column"},[g("p",null," This is a showcase for a simple snippets player. The player is available with vue-peaks as ready-made component, which you can use as-is or adapt it to your needs. ")],-1),hg={class:"column"},cg={class:"column"},dg={class:"box"},ug={class:"field"},fg={class:"control"},pg={class:"columns"},gg={class:"column"},_g=g("p",null,[Se("For your reference, here's the complete Widget SFC (as available from "),g("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaksWidget.vue"},"GitHub"),Se(")")],-1),mg=wt({__name:"DemoWidget",setup(t){const e=hi({url:""});return(i,n)=>{const s=At("highlightjs");return be(),ke($e,null,[g("div",og,[lg,g("div",hg,[K(s,{language:"vue-typescript",code:`import AudioPeaksWidget 
from 'vue-peaks/src/components/AudioPeaksWidget.vue';
const state = reactive({ url: '' });`}),K(s,{language:"vue-template",code:`<input type='url' 
       v-model='state.url' 
       placeholder='Paste an URL to a media file' />
<!-- The :key property makes sure that the component 
     is re-rendered on every URL change, causing
     a re-render of the waveform -->       
<AudioPeaksWidget :src='state.url' 
                  :key='state.url'>
</AudioPeaksWidget>`})]),g("div",cg,[g("div",dg,[g("div",ug,[g("div",fg,[Vo(g("input",{class:"input",type:"url","onUpdate:modelValue":n[0]||(n[0]=r=>e.url=r),placeholder:"Paste an URL to a media file"},null,512),[[Id,e.url]])])]),(be(),Ps(ag,{src:e.url,key:e.url},null,8,["src"]))])])]),g("div",pg,[g("div",gg,[_g,K(s,{language:"vue-sfc",code:`<script setup lang='ts'>
import type { PeaksOptions } from 'peaks.js';
import { computed, reactive, shallowRef } from 'vue';
import AudioPeaks from './AudioPeaks.vue';

/** Reference to the AudioPeaks component */
const audioPeaks = shallowRef<InstanceType<typeof AudioPeaks>>()

/** Accessor to the peaks instance from the AudioPeaks component
 * @remarks Allows access to the peaks.js instance to call various functions on the API.
 */
const peaksInstance = computed(() => audioPeaks.value?.peaksInstance);
const audio = shallowRef<HTMLAudioElement | null>(null);
const state = reactive({ isPlaying: false, canPlay: false, bookmark: 0, lastErrorMessage: '' });

const props = defineProps<{
  /** The media source URL
   */
  src?: string;
}>();

/** The configuration options
 */
const options: PeaksOptions = {
  overview: {
    /* The container div is provided and handled internally by AudioPeaks */
    waveformColor: '#2ecc71',
    playedWaveformColor: '#29b765',
    showAxisLabels: false,
    axisGridlineColor: 'hsl(0, 0%, 100%)',
    playheadTextColor: '#e43725',
    showPlayheadTime: true
  },
  showPlayheadTime: true,
  /* The widget does not use a zoom area */

  /* The mediaElement is provided and handled internally by AudioPeaks */
  webAudio: { audioContext: new AudioContext() },
  playheadColor: '#e43725',
};



/** Toggles playback
 * @devdoc Directly uses the audio element instead of the peaks.js player API 
 * to allow control even when the waveform is not yet ready.
 */
function togglePlayback() {
  state.isPlaying = !state.isPlaying;
  if (state.isPlaying) {
    audio.value?.play();
  } else {
    audio.value?.pause();
  }
}

/** Sets a bookmark at the current position
 */
function setBookmark() {
  const currentTime = peaksInstance.value?.player.getCurrentTime();
  if (currentTime) {
    peaksInstance.value?.points.add({
      time: currentTime,
      editable: true,
      labelText: 'Bookmark',
      color: '#000000'
    });
    state.bookmark = currentTime;
  }
}

/** Seeks to the stored bookmark
 */
function seekBookmark() {
  peaksInstance.value?.player.seek(state.bookmark);
}
<\/script>
<template>
  <div class='widget'>
    <button class='item' @click='togglePlayback()' :disabled='!state.canPlay'>
      <!-- pause icon -->
      <svg v-if='state.isPlaying' style='width: 24px; height: 24px' viewBox='0 0 24 24'>
        <path fill='currentColor' d='M14,19H18V5H14M6,19H10V5H6V19Z' />
      </svg>
      <!-- play icon -->
      <svg v-else style='width: 24px; height: 24px' viewBox='0 0 24 24'>
        <path fill='currentColor' d='M8,5.14V19.14L19,12.14L8,5.14Z' />
      </svg>
    </button>
    <button class='item' @click='setBookmark()' :disabled='!state.canPlay' title='set bookmark'>
      <!-- bookmark icon -->
      <svg style='width: 24px; height: 24px' viewBox='0 0 24 24'>
        <path fill='currentColor'
          d='M14.55 20C15 20.76 15.5 21.44 15.91 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V10.22C19.5 10.08 19 10 18.5 10C18.33 10 18.17 10 18 10.03V4H13V12L10.5 9.75L8 12V4H6V20H14.55M22 15.5C22 18.1 18.5 22 18.5 22S15 18.1 15 15.5C15 13.6 16.6 12 18.5 12S22 13.6 22 15.5M19.7 15.6C19.7 15 19.1 14.4 18.5 14.4S17.3 14.9 17.3 15.6C17.3 16.2 17.8 16.8 18.5 16.8S19.8 16.2 19.7 15.6Z' />
      </svg>
    </button>
    <button class='item' @click='seekBookmark()' :disabled='!state.bookmark' title='seek bookmark'>
      <!-- bookmark seek icon -->
      <svg style='width: 24px; height: 24px' viewBox='0 0 24 24'>
        <path fill='currentColor'
          d='M13.09 20C13.21 20.72 13.46 21.39 13.81 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V13.09C19.67 13.04 19.34 13 19 13C18.66 13 18.33 13.04 18 13.09V4H13V12L10.5 9.75L8 12V4H6V20H13.09M17 16V22L22 19L17 16Z' />
      </svg>
    </button>
    <AudioPeaks overviewElementId='widgetOverview' ref='audioPeaks' :options='options'
      @error='(err) => state.lastErrorMessage = err.message'>
      <template #zoomview>
        <template />
      </template>
      <template #default>
        <audio ref='audio' @canplay='
          () => {
            state.canPlay = true;
          }
        '>
          <source :src='props.src' />
        </audio>
      </template>
      <template #controls>
        <template />
      </template>
    </AudioPeaks>
    <div class='item peaks-overview' id='widgetOverview'>
      <div v-if='props.src' :title='\`Loading and rendering from \${props.src}\`'>
        <!-- spinner icon -->
        <svg class='spin' style='width: 24px; height: 24px' viewBox='0 0 24 24'>
          <path fill='currentColor'
            d='M12 19C13.1 19 14 19.9 14 21S13.1 23 12 23 10 22.1 10 21 10.9 19 12 19M12 1C13.1 1 14 1.9 14 3S13.1 5 12 5 10 4.1 10 3 10.9 1 12 1M6 16C7.1 16 8 16.9 8 18S7.1 20 6 20 4 19.1 4 18 4.9 16 6 16M3 10C4.1 10 5 10.9 5 12S4.1 14 3 14 1 13.1 1 12 1.9 10 3 10M6 4C7.1 4 8 4.9 8 6S7.1 8 6 8 4 7.1 4 6 4.9 4 6 4M18 16C19.1 16 20 16.9 20 18S19.1 20 18 20 16 19.1 16 18 16.9 16 18 16M21 10C22.1 10 23 10.9 23 12S22.1 14 21 14 19 13.1 19 12 19.9 10 21 10M18 4C19.1 4 20 4.9 20 6S19.1 8 18 8 16 7.1 16 6 16.9 4 18 4Z' />
        </svg>
      </div>
      <span v-else>no media available</span>
      <span v-if='state.lastErrorMessage' class='has-text-danger'>{{state.lastErrorMessage}}</span>
    </div>
  </div>
</template>
<style scoped>
.widget {
  height: 48px;
  align-items: center;
  display: flex;
  flex-wrap: nowrap;
  justify-content: flex-start;
}

.item {
  height: 48px;
  display: flex;
  justify-content: center;
  align-items: center;
  border: 1px solid var(--color-border);
  background: var(--color-background);
  border-radius: 8px;
  cursor: pointer;
  padding-left: 1em;
  padding-right: 1em;
  text-align: center;
}

/** The overview item should use all available space, including in the item itself */
.item.peaks-overview {
  flex-grow: 1;
  padding-left: 0;
  padding-right: 0;
}

.widget .item:not(:last-child) {
  border-bottom-right-radius: 0;
  border-top-right-radius: 0;
  margin-right: -1px;
}

.widget .item:not(:first-child) {
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(359deg);
  }
}

.spin {
  animation: spin 6s linear infinite;
}
</style>`})])])],64)}}}),vg={class:"columns"},yg={class:"column"},bg=g("p",null,[Se("You might need to access the peaks.js instance to call various functions on their extensive "),g("a",{href:"https://github.com/bbc/peaks.js#api>"},"API"),Se(".")],-1),wg=g("p",null," In the hosting component, get a reference to the AudioPeaks child component and, for convenience, a directly computed property to the actual peaks.js instance: ",-1),Cg=g("p",null," Now you can access the instance and it's methods by using the reference, like in this example: ",-1),Sg=g("p",null," Remember, that the instance is available only after the child has been mounted and peaks.js has been initialized. ",-1),Tg=wt({__name:"AccessingThePeaksInstance",setup(t){return hi({url:""}),(e,i)=>{const n=At("highlightjs");return be(),ke("div",vg,[g("div",yg,[bg,wg,g("p",null,[K(n,{language:"vue-typescript",code:`/** Reference to the AudioPeaks component */
const audioPeaks = shallowRef<InstanceType<typeof AudioPeaks>>()

/** Accessor to the peaks instance from the AudioPeaks component
 * @remarks Allows access to the peaks.js instance 
 * to call various functions on the API.
 */
const peaksInstance = computed(() => audioPeaks.value?.peaksInstance);`})]),Cg,g("p",null,[K(n,{language:"vue-typescript",code:`/** Sets a bookmark at the current position
 */
function setBookmark() {
  const currentTime = peaksInstance.value?.player.getCurrentTime();
  if (currentTime) {
    peaksInstance.value?.points.add({
      time: currentTime
    });
    state.bookmark = currentTime;
  }
}`})]),Sg])])}}}),xg={class:"columns is-desktop"},kg=Vt('<div class="column"><p> AudioPeaks currently does not support reactivity for the options. Still, you can use Vue&#39;s reactivity on the component itself. You can for example: </p><p><ul><li>Conditionally render the component (by using Vue&#39;s built-in <span class="code">v-if</span> directive). This also releases memory used. </li><li>Replace the media source by setting the <span class="code">src</span> attribute of the audio element. When you also set the <span class="code">:key</span> property to a new value, the component re-renders. <br>This is called the key-changing technique, and is required to trigger an update of the waveform.</li></ul></p></div>',1),Eg={class:"column is-narrow"},Ag={class:"box"},Pg={class:"field"},Ig=g("label",{class:"label is-multiline"},"Create and destroy an AudioPeaks instance:",-1),Mg={class:"control"},Lg={class:"field"},Og=g("label",{class:"label is-multiline"},"Change the media URL (triggers re-rendering).",-1),Rg={class:"control"},Dg={class:"select is-danger"},Ng=g("option",{value:""},"-select option-",-1),Hg=g("option",{value:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"},"An MP3 music file ",-1),Fg=g("option",{value:"https://suterma.github.io/vue-peaks/lidija_roos-decisions.ogg"},"An OGG music file ",-1),Gg=g("option",{value:"https://twit.cachefly.net/audio/sn/sn0886/sn0886.mp3"},"Security Now! Podcast, Episode #886 (112 min, 55.5MB, MP3)",-1),Wg=[Ng,Hg,Fg,Gg],Bg=["src"],zg=g("template",null,null,-1),Ug=g("template",null,null,-1),Vg={class:"column"},Xg=wt({__name:"ExampleUsingReactivity",setup(t){const e=hi({isRendered:!0,mediaSource:""});function i(){const n=e.isRendered;console.log("CurrentState",n),e.isRendered=!n}return(n,s)=>{const r=At("highlightjs");return be(),ke("div",xg,[kg,g("div",Eg,[g("div",Ag,[g("div",Pg,[Ig,g("div",Mg,[g("button",{onClick:s[0]||(s[0]=a=>i()),class:"button is-danger"},[g("span",null,Tr(e.isRendered?"Destroy":"Render"),1)])])]),g("div",Lg,[Og,g("div",Rg,[g("div",Dg,[Vo(g("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>e.mediaSource=a),class:"highlight"},Wg,512),[[Md,e.mediaSource]])])])]),e.isRendered?(be(),Ps(ai,{key:e.mediaSource},{zoomview:Ze(()=>[zg]),controls:Ze(()=>[Ug]),default:Ze(()=>[g("audio",{controls:"",src:e.mediaSource},null,8,Bg)]),_:1})):ln("",!0)])]),g("div",Vg,[K(r,{language:"vue-template",code:`<div class='field'>
  <label class='label'>Example button to create
    and destroy an AudioPeaks instance:</label>
  <div class='control'>
    <button @click='toggleRendering()' class='button  is-danger'>
      <span>{{ state.isRendered ? 'Destroy' : 'Render' }}</span>
    </button>
  </div>
</div>
<div class='field'>
  <label class='label'>Example menu to change the media URL,
    with automatic re-rendering of the
    component.</label>
  <div class='control'>
    <div class='select is-danger'>
      <select v-model='state.mediaSource' class='highlight'>
        <option value=''>-select option-</option>
        <option value='https://example.com/file1.mp3'>
          An MP3 music file
        </option>
        <option value='https://example.com/file2.ogg'>
          An OGG music file
        </option>
        <option value='https://example.com/file3.mp3'>
          Podcast
        </option>
      </select>
    </div>
  </div>
</div>
<AudioPeaks v-if='state.isRendered' :key='state.mediaSource'>
  <audio controls :src='state.mediaSource'></audio>
  <template #zoomview>
    <template />
  </template>
  <template #controls>
    <template />
  </template>
</AudioPeaks>`})])])}}}),Yg={class:"columns is-desktop"},$g=Vt('<div class="column"><p> To provide your own layout, you can also use the <a href="https://vuejs.org/guide/components/slots.html#named-slots">named slots</a>: <li><span class="code">#overview</span></li><li><span class="code">#zoomview</span></li><li><span class="code">#audio</span> (default)</li><li><span class="code">#controls</span></li></p><p>This allows you for example to <ul><li>layout elements differently</li><li>not render (instead of just not show) elements</li><li>have a completely custom media element</li></ul> You can use any of the media element modes with named slots. Use <span class="code">$refs</span> to access the relevant HTML elements.</p><p>You can use a different mode for each slot, thus mixing the &quot;slot&quot; mode with the &quot;external&quot; mode in the same component.</p></div>',1),jg={class:"column"},Kg={class:"column is-narrow",style:{"max-width":"400px"}},Zg={class:"box"},qg=g("div",{style:{height:"50px"}},null,-1),Jg=g("span",{class:"tag is-danger is-large"}," Some slot content here.",-1),Qg=g("span",{class:"tag is-danger is-large is-multiline"}," In this example, the audio control is not shown, but some custom buttons instead:",-1),e_={ref:"audio"},t_=g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"},null,-1),i_=[t_],n_=g("template",null,null,-1),s_=g("span",{class:"tag is-danger is-large is-multiline"}," No zoom controls are shown, by providing an empty template to the named controls slot.",-1),r_=wt({__name:"ExampleUsingSlots",setup(t){return(e,i)=>{const n=At("highlightjs");return be(),ke("div",Yg,[$g,g("div",jg,[K(n,{language:"vue-template",code:`<AudioPeaks>
  <template #overview>
    <div style='height: 50px;'></div>
    <span class='tag is-danger is-large'>
      Some slot content here.</span>
  </template>
  <template #default>
    <span class='tag is-danger is-large is-multiline'>
      In this example, the audio control is not shown,
      but some custom
      buttons instead:</span>
    <audio ref='audio'>
      <source src='https://domain/file.mp3' />
    </audio>
    <button @click='($refs.audio as HTMLAudioElement).play()'>
      Play
    </button>\xA0
    <button @click='($refs.audio as HTMLAudioElement).pause()'>
      Pause
    </button>
  </template>
  <template #controls>
    <template />
  </template>
</AudioPeaks>
<span class='tag is-danger is-large is-multiline'>
  No zoom controls are shown, by providing an empty template
  to the named controls slot.</span>`})]),g("div",Kg,[g("div",Zg,[K(ai,null,{overview:Ze(()=>[qg,Jg]),default:Ze(()=>[Qg,g("audio",e_,i_,512),g("button",{onClick:i[0]||(i[0]=s=>e.$refs.audio.play())}," Play "),Se("\xA0 "),g("button",{onClick:i[1]||(i[1]=s=>e.$refs.audio.pause())}," Pause ")]),controls:Ze(()=>[n_]),_:1}),s_])])])}}}),a_={},o_={class:"columns"},l_=Vt('<div class="column"><p> vue-peaks aims to simplify the use of <a target="_blank" href="https://github.com/bbc/peaks.js/">peaks.js</a> in a <a target="_blank" href=" https://vuejs.org/">Vue3</a> environment. It provides a <a target="_blank" href="    https://vuejs.org/guide/scaling-up/sfc.html">Single File Component (SFC)</a>, <span class="code">AudioPeaks</span>. </p><p> Explore the below examples or see the <a target="_blank" href="https://github.com/suterma/vue-peaks#vue-peaks">vue-peaks GitHub repository</a>. </p></div>',1),h_={class:"column"},c_=g("p",null,[Se(" Installing vue-peaks also installs "),g("a",{target:"_blank",href:"https://github.com/bbc/peaks.js/"},"peaks.js"),Se(" as a dependency. However, peaks.js uses "),g("a",{target:"_blank",href:"https://konvajs.org/"},"Konva"),Se(" and "),g("a",{target:"_blank",href:"https://github.com/bbc/waveform-data.js"},"waveform-data"),Se(" as peer dependencies, so you must also install those modules. ")],-1);function d_(t,e){const i=At("highlightjs");return be(),ke("div",o_,[l_,g("div",h_,[g("p",null,[K(i,{language:"bash",code:`npm install vue-peaks
# peer dependencies of peaks.js
npm install konva
npm install waveform-data`})]),c_])])}const u_=ci(a_,[["render",d_]]),f_={},p_=Vt('<p>This project uses</p><ul><li><a href="https://github.com/bbc/peaks.js/" target="_blank">peaks.js</a>, a client-side JavaScript component to display and interact with audio waveforms in the browser. (Released under the LGPL-3.0 license, by the British Broadcasting Corporation and contributors) </li><li><a href="https://vuejs.org/" target="_blank">Vue.js</a>, the progressive JavaScript framework. (Released under the MIT License, Copyright \xA9 2014-2021 Evan You) </li><li><a href="https://bulma.io/" target="_blank">Bulma</a>, the modern CSS framework that just works. (Released under the MIT License, by Jeremy Thomas) </li><li><a href="https://jenil.github.io/bulmaswatch/" target="_blank">Bulmaswatch</a>, free themes for Bulma. (Released under the MIT License, by Jenil Gogari) </li><li><a href="https://materialdesignicons.com/" target="_blank">Material Design Icons</a>, the original. Following Google&#39;s Material Design guidelines for system icons. (Icons released under the Apache 2.0 License, by pictogrammers.com) </li><li><a href="https://jestjs.io/" target="_blank"> Jest</a>, a delightful JavaScript Testing Framework. (Released under the MIT License, by Facebook) </li><li> Music from the Album &quot;Not For Sale&quot; by Lidija Roos (Released to the public, by Lidija Roos) </li><li><a href="https://github.com/highlightjs/vue-plugin" target="_blank">@highlightjs/vue-plugin</a>, provides a highlightjs component for use in your Vue.js 3 applications. (Released under the BSD-3-Clause license, by the highlight.js team) </li><li><a href="https://github.com/microsoft/rushstack/tree/main/eslint/eslint-patch" target="_blank">@rushstack/eslint-patch</a>, a patch that improves how ESLint loads plugins when working in a monorepo with a reusable toolchain. (Released under the MIT License, by Microsoft)</li><li><a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank">@types/jsdom, @types/node</a>, the repository for high quality TypeScript type definitions. (Released under the MIT License, by various contributors)</li><li><a href="https://github.com/vitejs/vite" target="_blank">vite, vitest, @vitejs/plugin-vue</a>, next Generation Frontend Tooling. (Released under the MIT License, by the vite team) </li><li><a href="https://github.com/eslint/eslint" target="_blank">eslint</a>, a tool for identifying and reporting on patterns found in ECMAScript/JavaScript code. (Released under the MIT License, by the eslint team) </li><li><a href="https://github.com/jsdom/jsdom" target="_blank">jsdom</a>, a pure-JavaScript implementation of many web standards. (Released under the MIT License, by the jsdom team) </li><li><a href="https://github.com/mysticatea/npm-run-all" target="_blank">npm-run-all</a>, a CLI tool to run multiple npm-scripts in parallel or sequential. (Released under the MIT License, by Toru Nagashima) </li><li><a href="https://github.com/prettier/prettier" target="_blank">prettier</a>, an opinionated Code Formatter. (Released under the MIT License, by the prettier team) </li><li><a href="https://github.com/Microsoft/TypeScript" target="_blank">typescript</a>, a language for application-scale JavaScript. (Released under the Apache-2.0 license, by Microsoft) </li><li><a href="https://github.com/johnsoncodehk/volar" target="_blank">vue-tsc</a>, high-performance tooling for Vue. (Released under the MIT License, by Johnson Chu) </li></ul><p>Initial code is taken from</p><ul><li><a href="https://github.com/candeogi/peaks-vue-demo" target="_blank">peaks-vue-demo</a>, by Giovanni Candeo (MIT-licensed) </li><li><a href="https://github.com/thom4parisot/vue-waveform-template" target="_blank">vue-waveform-template</a>, by Thomas Parisot (MIT-licensed) </li></ul>',4);function g_(t,e){return p_}const __=ci(f_,[["render",g_]]),m_={},v_={class:"columns"},y_=g("div",{class:"column"},[g("p",null,[Se(" Vue-peaks offers it's own properties for customization. Plus you can configure the underlying peaks.js instance via the options property (of type "),g("span",{class:"code"},"PeaksOptions"),Se("). ")])],-1),b_={class:"column"};function w_(t,e){const i=At("highlightjs");return be(),ke("div",v_,[y_,g("div",b_,[K(i,{language:"vue-typescript",code:`const props = defineProps<{
  /** The audio source URL (for the 'simple' mode)
   * @remarks This URL is to be used internally with the default media slot
   * (no slot template or external media element id is expected)
   */
  src?: string;
  /** The unique identifier of an external zoomview element to use.
   * @remarks Allows the use of an external zoomview element.
   * (no slot template is expected or used for the zoomview)
   */
  zoomviewElementId?: string;
  /** The zoomview element to use.
   * @remarks Allows the use of an external zoomview element.
   * (no slot template is expected or used for the zoomview)
   */
  zoomviewElement?: HTMLDivElement;
  /** The unique identifier of an external overview element to use.
   * @remarks Allows the use of an external overview element.
   * (no slot template is expected or used for the overview)
   */
  overviewElementId?: string;
  /** The overview element to use.
   * @remarks Allows the use of an external overview element.
   * (no slot template is expected or used for the overview)
   */
  overviewElement?: HTMLDivElement;
  /** The unique identifier of an external media element to use. 
   * (for the 'external' mode)
   * @remarks Allows the use of an external media element.
   * (no slot template or audio source URL is expected)
   */
  mediaElementId?: string;
  /** The external media element to use. (for the 'external' mode)
   * @remarks Allows the use of an external media element.
   * (no slot template or audio source URL is expected)
   */
  mediaElement?: HTMLMediaElement;
  /** The peaks options to use.
   * @remarks The element references to the overview, zoomview and media element
   * should not be provided, because these are handled internally by AudioPeaks.
   * This removes the burden of management of the Vue ref lifecycle from the user.
   * @devdoc Refs to HTML elements can only be accessed after mount.
   * See https://vuejs.org/guide/essentials/template-refs.html#accessing-the-refs
   */
  options?: PeaksOptions;
}>();`})])])}const C_=ci(m_,[["render",w_]]),Mt=t=>(Wo("data-v-e1b58338"),t=t(),Bo(),t),S_=Vt('<section class="hero is-light" data-v-e1b58338><div class="hero-body has-text-centered" data-v-e1b58338><img alt="Vue logo" class="logo" src="'+Nd+'" width="125" height="125" data-v-e1b58338><h1 class="title is-1" data-v-e1b58338>vue-peaks</h1><h2 class="subtitle is-3" data-v-e1b58338> A lightweight Vue wrapper around the <a target="_blank" href="https://github.com/bbc/peaks.js/" data-v-e1b58338>bbc/peaks.js</a> audio waveform UI component. </h2></div></section>',1),T_={class:"section"},x_={class:"no-container"},k_={class:"columns"},E_=Vt('<div class="column is-2" data-v-e1b58338><aside class="is-medium menu" data-v-e1b58338><p class="menu-label" data-v-e1b58338> Topics </p><ul class="menu-list" data-v-e1b58338><li data-v-e1b58338><a href="#basic-examples" data-v-e1b58338> Basic examples</a></li><li data-v-e1b58338><a href="#available-properties" data-v-e1b58338> Properties</a></li><li data-v-e1b58338><a href="#setting-styles" data-v-e1b58338>Setting styles</a></li><li data-v-e1b58338><a href="#using-slots" data-v-e1b58338>Using slots</a></li><li data-v-e1b58338><a href="#using-options" data-v-e1b58338>Options</a></li><li data-v-e1b58338><a href="#accessing-instance" data-v-e1b58338>Accessing the instance</a></li><li data-v-e1b58338><a href="#using-reactivity" data-v-e1b58338>Using reactivity</a></li><li data-v-e1b58338><a href="#player-widget" data-v-e1b58338>A widget</a></li><li data-v-e1b58338><a href="#credits" data-v-e1b58338>Credits</a></li></ul></aside></div>',1),A_={class:"column is-10"},P_={class:"content"},I_={class:"example"},M_=Mt(()=>g("h3",{id:"basic-examples",class:"title is-3"},"Basic examples",-1)),L_={class:"example"},O_=Mt(()=>g("h3",{id:"available-properties",class:"title is-3"},"Available properties",-1)),R_={class:"example"},D_=Mt(()=>g("h3",{id:"setting-styles",class:"title is-3"},"Setting styles",-1)),N_={class:"example"},H_=Mt(()=>g("h3",{id:"using-slots",class:"title is-3"},"Using slots for custom views",-1)),F_={class:"example"},G_=Mt(()=>g("h3",{id:"using-options",class:"title is-3"},"Using peaks.js configuration options ",-1)),W_={class:"example"},B_=Mt(()=>g("h3",{id:"accessing-instance",class:"title is-3"}," Accessing the peaks.js instance ",-1)),z_=Mt(()=>g("h3",{id:"using-reactivity",class:"title is-3"},"Using reactivity",-1)),U_={class:"example"},V_=Mt(()=>g("h3",{id:"player-widget",class:"title is-3"},"A waveform player widget",-1)),X_={class:"example"},Y_=Mt(()=>g("h3",{id:"credits",class:"title is-3"},"Credits",-1)),$_={class:"example"},j_=Vt('<footer class="footer" data-v-e1b58338><section class="section" data-v-e1b58338><div class="container has-text-centered" data-v-e1b58338><p data-v-e1b58338><a href="https://github.com/suterma/vue-peaks" data-v-e1b58338>vue-peaks</a> is created with love by <a href="https://marcelsuter.ch" data-v-e1b58338>Marcel Suter</a> for the <a href="http://replayer.app" data-v-e1b58338>Replayer</a> project. </p></div></section></footer>',1),K_=wt({__name:"App",setup(t){return(e,i)=>(be(),ke($e,null,[S_,g("section",T_,[g("div",x_,[g("div",k_,[E_,g("div",A_,[g("div",P_,[g("article",I_,[K(u_)]),M_,g("article",L_,[K(Tp)]),O_,g("article",R_,[K(C_)]),D_,g("article",N_,[K(zd)]),H_,g("article",F_,[K(r_)]),G_,g("article",W_,[K(Lp)]),B_,g("article",null,[K(Tg)]),z_,g("article",U_,[K(Xg)]),V_,g("article",X_,[K(mg)]),Y_,g("article",$_,[K(__)])])])])])]),j_],64))}});const Z_=ci(K_,[["__scopeId","data-v-e1b58338"]]);function Xl(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const i=t[e],n=typeof i;(n==="object"||n==="function")&&!Object.isFrozen(i)&&Xl(i)}),t}class so{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function Yl(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Nt(t,...e){const i=Object.create(null);for(const n in t)i[n]=t[n];return e.forEach(function(n){for(const s in n)i[s]=n[s]}),i}const q_="</span>",ro=t=>!!t.scope,J_=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const i=t.split(".");return[`${e}${i.shift()}`,...i.map((n,s)=>`${n}${"_".repeat(s+1)}`)].join(" ")}return`${e}${t}`};class Q_{constructor(e,i){this.buffer="",this.classPrefix=i.classPrefix,e.walk(this)}addText(e){this.buffer+=Yl(e)}openNode(e){if(!ro(e))return;const i=J_(e.scope,{prefix:this.classPrefix});this.span(i)}closeNode(e){!ro(e)||(this.buffer+=q_)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const ao=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class Yr{constructor(){this.rootNode=ao(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const i=ao({scope:e});this.add(i),this.stack.push(i)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,i){return typeof i=="string"?e.addText(i):i.children&&(e.openNode(i),i.children.forEach(n=>this._walk(e,n)),e.closeNode(i)),e}static _collapse(e){typeof e!="string"&&(!e.children||(e.children.every(i=>typeof i=="string")?e.children=[e.children.join("")]:e.children.forEach(i=>{Yr._collapse(i)})))}}class em extends Yr{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,i){const n=e.root;i&&(n.scope=`language:${i}`),this.add(n)}toHTML(){return new Q_(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function Cn(t){return t?typeof t=="string"?t:t.source:null}function $l(t){return yi("(?=",t,")")}function tm(t){return yi("(?:",t,")*")}function im(t){return yi("(?:",t,")?")}function yi(...t){return t.map(i=>Cn(i)).join("")}function nm(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function $r(...t){return"("+(nm(t).capture?"":"?:")+t.map(n=>Cn(n)).join("|")+")"}function jl(t){return new RegExp(t.toString()+"|").exec("").length-1}function sm(t,e){const i=t&&t.exec(e);return i&&i.index===0}const rm=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function jr(t,{joinWith:e}){let i=0;return t.map(n=>{i+=1;const s=i;let r=Cn(n),a="";for(;r.length>0;){const o=rm.exec(r);if(!o){a+=r;break}a+=r.substring(0,o.index),r=r.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?a+="\\"+String(Number(o[1])+s):(a+=o[0],o[0]==="("&&i++)}return a}).map(n=>`(${n})`).join(e)}const am=/\b\B/,Kl="[a-zA-Z]\\w*",Kr="[a-zA-Z_]\\w*",Zl="\\b\\d+(\\.\\d+)?",ql="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Jl="\\b(0b[01]+)",om="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",lm=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=yi(e,/.*\b/,t.binary,/\b.*/)),Nt({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(i,n)=>{i.index!==0&&n.ignoreMatch()}},t)},Sn={begin:"\\\\[\\s\\S]",relevance:0},hm={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Sn]},cm={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Sn]},dm={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Ws=function(t,e,i={}){const n=Nt({scope:"comment",begin:t,end:e,contains:[]},i);n.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=$r("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return n.contains.push({begin:yi(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),n},um=Ws("//","$"),fm=Ws("/\\*","\\*/"),pm=Ws("#","$"),gm={scope:"number",begin:Zl,relevance:0},_m={scope:"number",begin:ql,relevance:0},mm={scope:"number",begin:Jl,relevance:0},vm={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[Sn,{begin:/\[/,end:/\]/,relevance:0,contains:[Sn]}]}]},ym={scope:"title",begin:Kl,relevance:0},bm={scope:"title",begin:Kr,relevance:0},wm={begin:"\\.\\s*"+Kr,relevance:0},Cm=function(t){return Object.assign(t,{"on:begin":(e,i)=>{i.data._beginMatch=e[1]},"on:end":(e,i)=>{i.data._beginMatch!==e[1]&&i.ignoreMatch()}})};var jn=Object.freeze({__proto__:null,MATCH_NOTHING_RE:am,IDENT_RE:Kl,UNDERSCORE_IDENT_RE:Kr,NUMBER_RE:Zl,C_NUMBER_RE:ql,BINARY_NUMBER_RE:Jl,RE_STARTERS_RE:om,SHEBANG:lm,BACKSLASH_ESCAPE:Sn,APOS_STRING_MODE:hm,QUOTE_STRING_MODE:cm,PHRASAL_WORDS_MODE:dm,COMMENT:Ws,C_LINE_COMMENT_MODE:um,C_BLOCK_COMMENT_MODE:fm,HASH_COMMENT_MODE:pm,NUMBER_MODE:gm,C_NUMBER_MODE:_m,BINARY_NUMBER_MODE:mm,REGEXP_MODE:vm,TITLE_MODE:ym,UNDERSCORE_TITLE_MODE:bm,METHOD_GUARD:wm,END_SAME_AS_BEGIN:Cm});function Sm(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function Tm(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function xm(t,e){!e||!t.beginKeywords||(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=Sm,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function km(t,e){!Array.isArray(t.illegal)||(t.illegal=$r(...t.illegal))}function Em(t,e){if(!!t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function Am(t,e){t.relevance===void 0&&(t.relevance=1)}const Pm=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const i=Object.assign({},t);Object.keys(t).forEach(n=>{delete t[n]}),t.keywords=i.keywords,t.begin=yi(i.beforeMatch,$l(i.begin)),t.starts={relevance:0,contains:[Object.assign(i,{endsParent:!0})]},t.relevance=0,delete i.beforeMatch},Im=["of","and","for","in","not","or","if","then","parent","list","value"],Mm="keyword";function Ql(t,e,i=Mm){const n=Object.create(null);return typeof t=="string"?s(i,t.split(" ")):Array.isArray(t)?s(i,t):Object.keys(t).forEach(function(r){Object.assign(n,Ql(t[r],e,r))}),n;function s(r,a){e&&(a=a.map(o=>o.toLowerCase())),a.forEach(function(o){const l=o.split("|");n[l[0]]=[r,Lm(l[0],l[1])]})}}function Lm(t,e){return e?Number(e):Om(t)?0:1}function Om(t){return Im.includes(t.toLowerCase())}const oo={},oi=t=>{console.error(t)},lo=(t,...e)=>{console.log(`WARN: ${t}`,...e)},xi=(t,e)=>{oo[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),oo[`${t}/${e}`]=!0)},_s=new Error;function eh(t,e,{key:i}){let n=0;const s=t[i],r={},a={};for(let o=1;o<=e.length;o++)a[o+n]=s[o],r[o+n]=!0,n+=jl(e[o-1]);t[i]=a,t[i]._emit=r,t[i]._multi=!0}function Rm(t){if(!!Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw oi("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),_s;if(typeof t.beginScope!="object"||t.beginScope===null)throw oi("beginScope must be object"),_s;eh(t,t.begin,{key:"beginScope"}),t.begin=jr(t.begin,{joinWith:""})}}function Dm(t){if(!!Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw oi("skip, excludeEnd, returnEnd not compatible with endScope: {}"),_s;if(typeof t.endScope!="object"||t.endScope===null)throw oi("endScope must be object"),_s;eh(t,t.end,{key:"endScope"}),t.end=jr(t.end,{joinWith:""})}}function Nm(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function Hm(t){Nm(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),Rm(t),Dm(t)}function Fm(t){function e(a,o){return new RegExp(Cn(a),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(o?"g":""))}class i{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,o]),this.matchAt+=jl(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(l=>l[1]);this.matcherRe=e(jr(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(o);if(!l)return null;const h=l.findIndex((d,f)=>f>0&&d!==void 0),c=this.matchIndexes[h];return l.splice(0,h),Object.assign(l,c)}}class n{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const l=new i;return this.rules.slice(o).forEach(([h,c])=>l.addRule(h,c)),l.compile(),this.multiRegexes[o]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,l){this.rules.push([o,l]),l.type==="begin"&&this.count++}exec(o){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let h=l.exec(o);if(this.resumingScanAtSamePosition()&&!(h&&h.index===this.lastIndex)){const c=this.getMatcher(0);c.lastIndex=this.lastIndex+1,h=c.exec(o)}return h&&(this.regexIndex+=h.position+1,this.regexIndex===this.count&&this.considerAll()),h}}function s(a){const o=new n;return a.contains.forEach(l=>o.addRule(l.begin,{rule:l,type:"begin"})),a.terminatorEnd&&o.addRule(a.terminatorEnd,{type:"end"}),a.illegal&&o.addRule(a.illegal,{type:"illegal"}),o}function r(a,o){const l=a;if(a.isCompiled)return l;[Tm,Em,Hm,Pm].forEach(c=>c(a,o)),t.compilerExtensions.forEach(c=>c(a,o)),a.__beforeBegin=null,[xm,km,Am].forEach(c=>c(a,o)),a.isCompiled=!0;let h=null;return typeof a.keywords=="object"&&a.keywords.$pattern&&(a.keywords=Object.assign({},a.keywords),h=a.keywords.$pattern,delete a.keywords.$pattern),h=h||/\w+/,a.keywords&&(a.keywords=Ql(a.keywords,t.case_insensitive)),l.keywordPatternRe=e(h,!0),o&&(a.begin||(a.begin=/\B|\b/),l.beginRe=e(l.begin),!a.end&&!a.endsWithParent&&(a.end=/\B|\b/),a.end&&(l.endRe=e(l.end)),l.terminatorEnd=Cn(l.end)||"",a.endsWithParent&&o.terminatorEnd&&(l.terminatorEnd+=(a.end?"|":"")+o.terminatorEnd)),a.illegal&&(l.illegalRe=e(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(c){return Gm(c==="self"?a:c)})),a.contains.forEach(function(c){r(c,l)}),a.starts&&r(a.starts,o),l.matcher=s(l),l}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=Nt(t.classNameAliases||{}),r(t)}function th(t){return t?t.endsWithParent||th(t.starts):!1}function Gm(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return Nt(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:th(t)?Nt(t,{starts:t.starts?Nt(t.starts):null}):Object.isFrozen(t)?Nt(t):t}var Wm="11.8.0";class Bm extends Error{constructor(e,i){super(e),this.name="HTMLInjectionError",this.html=i}}const er=Yl,ho=Nt,co=Symbol("nomatch"),zm=7,ih=function(t){const e=Object.create(null),i=Object.create(null),n=[];let s=!0;const r="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:em};function l(k){return o.noHighlightRe.test(k)}function h(k){let I=k.className+" ";I+=k.parentNode?k.parentNode.className:"";const Y=o.languageDetectRe.exec(I);if(Y){const ne=ue(Y[1]);return ne||(lo(r.replace("{}",Y[1])),lo("Falling back to no-highlight mode for this block.",k)),ne?Y[1]:"no-highlight"}return I.split(/\s+/).find(ne=>l(ne)||ue(ne))}function c(k,I,Y){let ne="",ae="";typeof I=="object"?(ne=k,Y=I.ignoreIllegals,ae=I.language):(xi("10.7.0","highlight(lang, code, ...args) has been deprecated."),xi("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ae=k,ne=I),Y===void 0&&(Y=!0);const ge={code:ne,language:ae};st("before:highlight",ge);const Xe=ge.result?ge.result:d(ge.language,ge.code,Y);return Xe.code=ge.code,st("after:highlight",Xe),Xe}function d(k,I,Y,ne){const ae=Object.create(null);function ge(P,M){return P.keywords[M]}function Xe(){if(!y.keywords){T.addText(H);return}let P=0;y.keywordPatternRe.lastIndex=0;let M=y.keywordPatternRe.exec(H),z="";for(;M;){z+=H.substring(P,M.index);const Q=S.case_insensitive?M[0].toLowerCase():M[0],we=ge(y,Q);if(we){const[et,Zt]=we;if(T.addText(z),z="",ae[Q]=(ae[Q]||0)+1,ae[Q]<=zm&&(W+=Zt),et.startsWith("_"))z+=M[0];else{const An=S.classNameAliases[et]||et;xe(M[0],An)}}else z+=M[0];P=y.keywordPatternRe.lastIndex,M=y.keywordPatternRe.exec(H)}z+=H.substring(P),T.addText(z)}function bi(){if(H==="")return;let P=null;if(typeof y.subLanguage=="string"){if(!e[y.subLanguage]){T.addText(H);return}P=d(y.subLanguage,H,!0,N[y.subLanguage]),N[y.subLanguage]=P._top}else P=v(H,y.subLanguage.length?y.subLanguage:null);y.relevance>0&&(W+=P.relevance),T.__addSublanguage(P._emitter,P.language)}function ze(){y.subLanguage!=null?bi():Xe(),H=""}function xe(P,M){P!==""&&(T.startScope(M),T.addText(P),T.endScope())}function Kt(P,M){let z=1;const Q=M.length-1;for(;z<=Q;){if(!P._emit[z]){z++;continue}const we=S.classNameAliases[P[z]]||P[z],et=M[z];we?xe(et,we):(H=et,Xe(),H=""),z++}}function Xi(P,M){return P.scope&&typeof P.scope=="string"&&T.openNode(S.classNameAliases[P.scope]||P.scope),P.beginScope&&(P.beginScope._wrap?(xe(H,S.classNameAliases[P.beginScope._wrap]||P.beginScope._wrap),H=""):P.beginScope._multi&&(Kt(P.beginScope,M),H="")),y=Object.create(P,{parent:{value:y}}),y}function St(P,M,z){let Q=sm(P.endRe,z);if(Q){if(P["on:end"]){const we=new so(P);P["on:end"](M,we),we.isMatchIgnored&&(Q=!1)}if(Q){for(;P.endsParent&&P.parent;)P=P.parent;return P}}if(P.endsWithParent)return St(P.parent,M,z)}function Yi(P){return y.matcher.regexIndex===0?(H+=P[0],1):(te=!0,0)}function $i(P){const M=P[0],z=P.rule,Q=new so(z),we=[z.__beforeBegin,z["on:begin"]];for(const et of we)if(!!et&&(et(P,Q),Q.isMatchIgnored))return Yi(M);return z.skip?H+=M:(z.excludeBegin&&(H+=M),ze(),!z.returnBegin&&!z.excludeBegin&&(H=M)),Xi(z,P),z.returnBegin?0:M.length}function u(P){const M=P[0],z=I.substring(P.index),Q=St(y,P,z);if(!Q)return co;const we=y;y.endScope&&y.endScope._wrap?(ze(),xe(M,y.endScope._wrap)):y.endScope&&y.endScope._multi?(ze(),Kt(y.endScope,P)):we.skip?H+=M:(we.returnEnd||we.excludeEnd||(H+=M),ze(),we.excludeEnd&&(H=M));do y.scope&&T.closeNode(),!y.skip&&!y.subLanguage&&(W+=y.relevance),y=y.parent;while(y!==Q.parent);return Q.starts&&Xi(Q.starts,P),we.returnEnd?0:M.length}function p(){const P=[];for(let M=y;M!==S;M=M.parent)M.scope&&P.unshift(M.scope);P.forEach(M=>T.openNode(M))}let b={};function A(P,M){const z=M&&M[0];if(H+=P,z==null)return ze(),0;if(b.type==="begin"&&M.type==="end"&&b.index===M.index&&z===""){if(H+=I.slice(M.index,M.index+1),!s){const Q=new Error(`0 width match regex (${k})`);throw Q.languageName=k,Q.badRule=b.rule,Q}return 1}if(b=M,M.type==="begin")return $i(M);if(M.type==="illegal"&&!Y){const Q=new Error('Illegal lexeme "'+z+'" for mode "'+(y.scope||"<unnamed>")+'"');throw Q.mode=y,Q}else if(M.type==="end"){const Q=u(M);if(Q!==co)return Q}if(M.type==="illegal"&&z==="")return 1;if(j>1e5&&j>M.index*3)throw new Error("potential infinite loop, way more iterations than matches");return H+=z,z.length}const S=ue(k);if(!S)throw oi(r.replace("{}",k)),new Error('Unknown language: "'+k+'"');const O=Fm(S);let G="",y=ne||O;const N={},T=new o.__emitter(o);p();let H="",W=0,B=0,j=0,te=!1;try{if(S.__emitTokens)S.__emitTokens(I,T);else{for(y.matcher.considerAll();;){j++,te?te=!1:y.matcher.considerAll(),y.matcher.lastIndex=B;const P=y.matcher.exec(I);if(!P)break;const M=I.substring(B,P.index),z=A(M,P);B=P.index+z}A(I.substring(B))}return T.finalize(),G=T.toHTML(),{language:k,value:G,relevance:W,illegal:!1,_emitter:T,_top:y}}catch(P){if(P.message&&P.message.includes("Illegal"))return{language:k,value:er(I),illegal:!0,relevance:0,_illegalBy:{message:P.message,index:B,context:I.slice(B-100,B+100),mode:P.mode,resultSoFar:G},_emitter:T};if(s)return{language:k,value:er(I),illegal:!1,relevance:0,errorRaised:P,_emitter:T,_top:y};throw P}}function f(k){const I={value:er(k),illegal:!1,relevance:0,_top:a,_emitter:new o.__emitter(o)};return I._emitter.addText(k),I}function v(k,I){I=I||o.languages||Object.keys(e);const Y=f(k),ne=I.filter(ue).filter(Ae).map(ze=>d(ze,k,!1));ne.unshift(Y);const ae=ne.sort((ze,xe)=>{if(ze.relevance!==xe.relevance)return xe.relevance-ze.relevance;if(ze.language&&xe.language){if(ue(ze.language).supersetOf===xe.language)return 1;if(ue(xe.language).supersetOf===ze.language)return-1}return 0}),[ge,Xe]=ae,bi=ge;return bi.secondBest=Xe,bi}function x(k,I,Y){const ne=I&&i[I]||Y;k.classList.add("hljs"),k.classList.add(`language-${ne}`)}function C(k){let I=null;const Y=h(k);if(l(Y))return;if(st("before:highlightElement",{el:k,language:Y}),k.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(k)),o.throwUnescapedHTML))throw new Bm("One of your code blocks includes unescaped HTML.",k.innerHTML);I=k;const ne=I.textContent,ae=Y?c(ne,{language:Y,ignoreIllegals:!0}):v(ne);k.innerHTML=ae.value,x(k,Y,ae.language),k.result={language:ae.language,re:ae.relevance,relevance:ae.relevance},ae.secondBest&&(k.secondBest={language:ae.secondBest.language,relevance:ae.secondBest.relevance}),st("after:highlightElement",{el:k,result:ae,text:ne})}function _(k){o=ho(o,k)}const D=()=>{L(),xi("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function w(){L(),xi("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let F=!1;function L(){if(document.readyState==="loading"){F=!0;return}document.querySelectorAll(o.cssSelector).forEach(C)}function Z(){F&&L()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",Z,!1);function ie(k,I){let Y=null;try{Y=I(t)}catch(ne){if(oi("Language definition for '{}' could not be registered.".replace("{}",k)),s)oi(ne);else throw ne;Y=a}Y.name||(Y.name=k),e[k]=Y,Y.rawDefinition=I.bind(null,t),Y.aliases&&fe(Y.aliases,{languageName:k})}function ye(k){delete e[k];for(const I of Object.keys(i))i[I]===k&&delete i[I]}function J(){return Object.keys(e)}function ue(k){return k=(k||"").toLowerCase(),e[k]||e[i[k]]}function fe(k,{languageName:I}){typeof k=="string"&&(k=[k]),k.forEach(Y=>{i[Y.toLowerCase()]=I})}function Ae(k){const I=ue(k);return I&&!I.disableAutodetect}function Be(k){k["before:highlightBlock"]&&!k["before:highlightElement"]&&(k["before:highlightElement"]=I=>{k["before:highlightBlock"](Object.assign({block:I.el},I))}),k["after:highlightBlock"]&&!k["after:highlightElement"]&&(k["after:highlightElement"]=I=>{k["after:highlightBlock"](Object.assign({block:I.el},I))})}function Le(k){Be(k),n.push(k)}function ft(k){const I=n.indexOf(k);I!==-1&&n.splice(I,1)}function st(k,I){const Y=k;n.forEach(function(ne){ne[Y]&&ne[Y](I)})}function pe(k){return xi("10.7.0","highlightBlock will be removed entirely in v12.0"),xi("10.7.0","Please use highlightElement now."),C(k)}Object.assign(t,{highlight:c,highlightAuto:v,highlightAll:L,highlightElement:C,highlightBlock:pe,configure:_,initHighlighting:D,initHighlightingOnLoad:w,registerLanguage:ie,unregisterLanguage:ye,listLanguages:J,getLanguage:ue,registerAliases:fe,autoDetection:Ae,inherit:ho,addPlugin:Le,removePlugin:ft}),t.debugMode=function(){s=!1},t.safeMode=function(){s=!0},t.versionString=Wm,t.regex={concat:yi,lookahead:$l,either:$r,optional:im,anyNumberOfTimes:tm};for(const k in jn)typeof jn[k]=="object"&&Xl(jn[k]);return Object.assign(t,jn),t},Fi=ih({});Fi.newInstance=()=>ih({});var Um=Fi;Fi.HighlightJS=Fi;Fi.default=Fi;const Gt=Um,ms="[A-Za-z$_][0-9A-Za-z$_]*",nh=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],sh=["true","false","null","undefined","NaN","Infinity"],rh=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ah=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],oh=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],lh=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],hh=[].concat(oh,rh,ah);function Vm(t){const e=t.regex,i=(I,{after:Y})=>{const ne="</"+I[0].slice(1);return I.input.indexOf(ne,Y)!==-1},n=ms,s={begin:"<>",end:"</>"},r=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(I,Y)=>{const ne=I[0].length+I.index,ae=I.input[ne];if(ae==="<"||ae===","){Y.ignoreMatch();return}ae===">"&&(i(I,{after:ne})||Y.ignoreMatch());let ge;const Xe=I.input.substring(ne);if(ge=Xe.match(/^\s*=/)){Y.ignoreMatch();return}if((ge=Xe.match(/^\s+extends\s+/))&&ge.index===0){Y.ignoreMatch();return}}},o={$pattern:ms,keyword:nh,literal:sh,built_in:hh,"variable.language":lh},l="[0-9](_?[0-9])*",h=`\\.(${l})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${c})((${h})|\\.)?|(${h}))[eE][+-]?(${l})\\b`},{begin:`\\b(${c})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},f={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},v={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"xml"}},x={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"css"}},C={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"graphql"}},_={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,f]},w={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},F=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,v,x,C,_,{match:/\$\d+/},d];f.contains=F.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(F)});const L=[].concat(w,f.contains),Z=L.concat([{begin:/\(/,end:/\)/,keywords:o,contains:["self"].concat(L)}]),ie={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:Z},ye={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,e.concat(n,"(",e.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},J={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...rh,...ah]}},ue={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},fe={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[ie],illegal:/%/},Ae={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function Be(I){return e.concat("(?!",I.join("|"),")")}const Le={match:e.concat(/\b/,Be([...oh,"super","import"]),n,e.lookahead(/\(/)),className:"title.function",relevance:0},ft={begin:e.concat(/\./,e.lookahead(e.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},st={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},ie]},pe="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",k={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(pe)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[ie]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:Z,CLASS_REFERENCE:J},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),ue,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,v,x,C,_,w,{match:/\$\d+/},d,J,{className:"attr",begin:n+e.lookahead(":"),relevance:0},k,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[w,t.REGEXP_MODE,{className:"function",begin:pe,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:Z}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:r},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},fe,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[ie,t.inherit(t.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},ft,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[ie]},Le,Ae,ye,st,{match:/\$[(.]/}]}}function Xm(t){const e=Vm(t),i=ms,n=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[e.exports.CLASS_REFERENCE]},r={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:n},contains:[e.exports.CLASS_REFERENCE]},a={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},o=["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"],l={$pattern:ms,keyword:nh.concat(o),literal:sh,built_in:hh.concat(n),"variable.language":lh},h={className:"meta",begin:"@"+i},c=(f,v,x)=>{const C=f.contains.findIndex(_=>_.label===v);if(C===-1)throw new Error("can not find mode to replace");f.contains.splice(C,1,x)};Object.assign(e.keywords,l),e.exports.PARAMS_CONTAINS.push(h),e.contains=e.contains.concat([h,s,r]),c(e,"shebang",t.SHEBANG()),c(e,"use_strict",a);const d=e.contains.find(f=>f.label==="func.def");return d.relevance=0,Object.assign(e,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),e}function ch(t){const e=t.regex,i=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),n=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},r={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},a=t.inherit(r,{begin:/\(/,end:/\)/}),o=t.inherit(t.APOS_STRING_MODE,{className:"string"}),l=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:n,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[r,l,o,a,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[r,a,l,o]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(i,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:i,relevance:0,starts:h}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(i,/>/))),contains:[{className:"name",begin:i,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function Ym(t){const e=t.regex,i={},n={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[i]}]};Object.assign(i,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},n]});const s={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},r={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,i,s]};s.contains.push(a);const o={className:"",begin:/\\"/},l={className:"string",begin:/'/,end:/'/},h={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,i]},c=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],d=t.SHEBANG({binary:`(${c.join("|")})`,relevance:10}),f={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},v=["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],x=["true","false"],C={match:/(\/[a-z._-]+)+/},_=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],D=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias"],w=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],F=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:v,literal:x,built_in:[..._,...D,"set","shopt",...w,...F]},contains:[d,t.SHEBANG(),f,h,t.HASH_COMMENT_MODE,r,C,a,o,l,i]}}const $m=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),jm=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Km=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],Zm=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],qm=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],Jm=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function Qm(t){const e=t.regex,i=$m(t),n={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",r=/@-?\w[\w]*(-\w+)*/,a="[a-zA-Z-][a-zA-Z0-9_-]*",o=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[i.BLOCK_COMMENT,n,i.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+a,relevance:0},i.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+Zm.join("|")+")"},{begin:":(:)?("+qm.join("|")+")"}]},i.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Jm.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[i.BLOCK_COMMENT,i.HEXCOLOR,i.IMPORTANT,i.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},i.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:r},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:Km.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,i.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+jm.join("|")+")\\b"}]}}var uo=wt({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(t){var e=tc(t.language);qn(function(){return t.language},function(s){e.value=s});var i=ki(function(){return t.autodetect||!e.value}),n=ki(function(){return!i.value&&!Gt.getLanguage(e.value)});return{className:ki(function(){return n.value?"":"hljs "+e.value}),highlightedCode:ki(function(){var s;if(n.value)return console.warn('The language "'+e.value+'" you specified could not be found.'),t.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(i.value){var r=Gt.highlightAuto(t.code);return e.value=(s=r.language)!==null&&s!==void 0?s:"",r.value}return(r=Gt.highlight(t.code,{language:e.value,ignoreIllegals:t.ignoreIllegals})).value})}},render:function(){return wa("pre",{},[wa("code",{class:this.className,innerHTML:this.highlightedCode})])}}),ev={install:function(t){t.component("highlightjs",uo)},component:uo};Gt.registerLanguage("vue-typescript",Xm);Gt.registerLanguage("vue-template",ch);Gt.registerLanguage("vue-sfc",ch);Gt.registerLanguage("bash",Ym);Gt.registerLanguage("css",Qm);Rd(Z_).use(ev).mount("#app");
//# sourceMappingURL=index.043f3984.js.map
