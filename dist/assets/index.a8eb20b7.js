(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function Wr(e,t){const i=Object.create(null),n=e.split(",");for(let s=0;s<n.length;s++)i[n[s]]=!0;return t?s=>!!i[s.toLowerCase()]:s=>!!i[s]}const Ie={},Hi=[],St=()=>{},xh=()=>!1,Ah=/^on[^a-z]/,As=e=>Ah.test(e),Gr=e=>e.startsWith("onUpdate:"),ze=Object.assign,Ur=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Ph=Object.prototype.hasOwnProperty,ye=(e,t)=>Ph.call(e,t),re=Array.isArray,Vi=e=>On(e)==="[object Map]",Ps=e=>On(e)==="[object Set]",Ca=e=>On(e)==="[object Date]",ge=e=>typeof e=="function",$e=e=>typeof e=="string",bn=e=>typeof e=="symbol",Me=e=>e!==null&&typeof e=="object",Ro=e=>Me(e)&&ge(e.then)&&ge(e.catch),Fo=Object.prototype.toString,On=e=>Fo.call(e),Ih=e=>On(e).slice(8,-1),No=e=>On(e)==="[object Object]",Hr=e=>$e(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,rs=Wr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Is=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Mh=/-(\w)/g,Dt=Is(e=>e.replace(Mh,(t,i)=>i?i.toUpperCase():"")),Oh=/\B([A-Z])/g,Zi=Is(e=>e.replace(Oh,"-$1").toLowerCase()),Ms=Is(e=>e.charAt(0).toUpperCase()+e.slice(1)),rr=Is(e=>e?`on${Ms(e)}`:""),wn=(e,t)=>!Object.is(e,t),as=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},us=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},fs=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ta;const mr=()=>Ta||(Ta=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Os(e){if(re(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=$e(n)?Fh(n):Os(n);if(s)for(const r in s)t[r]=s[r]}return t}else{if($e(e))return e;if(Me(e))return e}}const Dh=/;(?![^(]*\))/g,Lh=/:([^]+)/,Rh=/\/\*[^]*?\*\//g;function Fh(e){const t={};return e.replace(Rh,"").split(Dh).forEach(i=>{if(i){const n=i.split(Lh);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Vr(e){let t="";if($e(e))t=e;else if(re(e))for(let i=0;i<e.length;i++){const n=Vr(e[i]);n&&(t+=n+" ")}else if(Me(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Nh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bh=Wr(Nh);function Bo(e){return!!e||e===""}function Wh(e,t){if(e.length!==t.length)return!1;let i=!0;for(let n=0;i&&n<e.length;n++)i=Ds(e[n],t[n]);return i}function Ds(e,t){if(e===t)return!0;let i=Ca(e),n=Ca(t);if(i||n)return i&&n?e.getTime()===t.getTime():!1;if(i=bn(e),n=bn(t),i||n)return e===t;if(i=re(e),n=re(t),i||n)return i&&n?Wh(e,t):!1;if(i=Me(e),n=Me(t),i||n){if(!i||!n)return!1;const s=Object.keys(e).length,r=Object.keys(t).length;if(s!==r)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!Ds(e[a],t[a]))return!1}}return String(e)===String(t)}function Gh(e,t){return e.findIndex(i=>Ds(i,t))}const zr=e=>$e(e)?e:e==null?"":re(e)||Me(e)&&(e.toString===Fo||!ge(e.toString))?JSON.stringify(e,Wo,2):String(e),Wo=(e,t)=>t&&t.__v_isRef?Wo(e,t.value):Vi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[n,s])=>(i[`${n} =>`]=s,i),{})}:Ps(t)?{[`Set(${t.size})`]:[...t.values()]}:Me(t)&&!re(t)&&!No(t)?String(t):t;let lt;class Uh{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=lt,!t&&lt&&(this.index=(lt.scopes||(lt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const i=lt;try{return lt=this,t()}finally{lt=i}}}on(){lt=this}off(){lt=this.parent}stop(t){if(this._active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Hh(e,t=lt){t&&t.active&&t.effects.push(e)}function Go(){return lt}function Vh(e){lt&&lt.cleanups.push(e)}const $r=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Uo=e=>(e.w&ii)>0,Ho=e=>(e.n&ii)>0,zh=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ii},$h=e=>{const{deps:t}=e;if(t.length){let i=0;for(let n=0;n<t.length;n++){const s=t[n];Uo(s)&&!Ho(s)?s.delete(e):t[i++]=s,s.w&=~ii,s.n&=~ii}t.length=i}},vr=new WeakMap;let ln=0,ii=1;const yr=30;let vt;const Si=Symbol(""),br=Symbol("");class Xr{constructor(t,i=null,n){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Hh(this,n)}run(){if(!this.active)return this.fn();let t=vt,i=Qt;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=vt,vt=this,Qt=!0,ii=1<<++ln,ln<=yr?zh(this):Ea(this),this.fn()}finally{ln<=yr&&$h(this),ii=1<<--ln,vt=this.parent,Qt=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){vt===this?this.deferStop=!0:this.active&&(Ea(this),this.onStop&&this.onStop(),this.active=!1)}}function Ea(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let Qt=!0;const Vo=[];function qi(){Vo.push(Qt),Qt=!1}function Ji(){const e=Vo.pop();Qt=e===void 0?!0:e}function st(e,t,i){if(Qt&&vt){let n=vr.get(e);n||vr.set(e,n=new Map);let s=n.get(i);s||n.set(i,s=$r()),zo(s)}}function zo(e,t){let i=!1;ln<=yr?Ho(e)||(e.n|=ii,i=!Uo(e)):i=!e.has(vt),i&&(e.add(vt),vt.deps.push(e))}function Ht(e,t,i,n,s,r){const a=vr.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(i==="length"&&re(e)){const l=Number(n);a.forEach((h,d)=>{(d==="length"||d>=l)&&o.push(h)})}else switch(i!==void 0&&o.push(a.get(i)),t){case"add":re(e)?Hr(i)&&o.push(a.get("length")):(o.push(a.get(Si)),Vi(e)&&o.push(a.get(br)));break;case"delete":re(e)||(o.push(a.get(Si)),Vi(e)&&o.push(a.get(br)));break;case"set":Vi(e)&&o.push(a.get(Si));break}if(o.length===1)o[0]&&wr(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);wr($r(l))}}function wr(e,t){const i=re(e)?e:[...e];for(const n of i)n.computed&&ka(n);for(const n of i)n.computed||ka(n)}function ka(e,t){(e!==vt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Xh=Wr("__proto__,__v_isRef,__isVue"),$o=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(bn)),jh=jr(),Kh=jr(!1,!0),Yh=jr(!0),xa=Zh();function Zh(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const n=Se(this);for(let r=0,a=this.length;r<a;r++)st(n,"get",r+"");const s=n[t](...i);return s===-1||s===!1?n[t](...i.map(Se)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){qi();const n=Se(this)[t].apply(this,i);return Ji(),n}}),e}function qh(e){const t=Se(this);return st(t,"has",e),t.hasOwnProperty(e)}function jr(e=!1,t=!1){return function(n,s,r){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&r===(e?t?fc:Zo:t?Yo:Ko).get(n))return n;const a=re(n);if(!e){if(a&&ye(xa,s))return Reflect.get(xa,s,r);if(s==="hasOwnProperty")return qh}const o=Reflect.get(n,s,r);return(bn(s)?$o.has(s):Xh(s))||(e||st(n,"get",s),t)?o:qe(o)?a&&Hr(s)?o:o.value:Me(o)?e?qo(o):Ai(o):o}}const Jh=Xo(),Qh=Xo(!0);function Xo(e=!1){return function(i,n,s,r){let a=i[n];if(Xi(a)&&qe(a)&&!qe(s))return!1;if(!e&&(!gs(s)&&!Xi(s)&&(a=Se(a),s=Se(s)),!re(i)&&qe(a)&&!qe(s)))return a.value=s,!0;const o=re(i)&&Hr(n)?Number(n)<i.length:ye(i,n),l=Reflect.set(i,n,s,r);return i===Se(r)&&(o?wn(s,a)&&Ht(i,"set",n,s):Ht(i,"add",n,s)),l}}function ec(e,t){const i=ye(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&Ht(e,"delete",t,void 0),n}function tc(e,t){const i=Reflect.has(e,t);return(!bn(t)||!$o.has(t))&&st(e,"has",t),i}function ic(e){return st(e,"iterate",re(e)?"length":Si),Reflect.ownKeys(e)}const jo={get:jh,set:Jh,deleteProperty:ec,has:tc,ownKeys:ic},nc={get:Yh,set(e,t){return!0},deleteProperty(e,t){return!0}},sc=ze({},jo,{get:Kh,set:Qh}),Kr=e=>e,Ls=e=>Reflect.getPrototypeOf(e);function zn(e,t,i=!1,n=!1){e=e.__v_raw;const s=Se(e),r=Se(t);i||(t!==r&&st(s,"get",t),st(s,"get",r));const{has:a}=Ls(s),o=n?Kr:i?qr:Sn;if(a.call(s,t))return o(e.get(t));if(a.call(s,r))return o(e.get(r));e!==s&&e.get(t)}function $n(e,t=!1){const i=this.__v_raw,n=Se(i),s=Se(e);return t||(e!==s&&st(n,"has",e),st(n,"has",s)),e===s?i.has(e):i.has(e)||i.has(s)}function Xn(e,t=!1){return e=e.__v_raw,!t&&st(Se(e),"iterate",Si),Reflect.get(e,"size",e)}function Aa(e){e=Se(e);const t=Se(this);return Ls(t).has.call(t,e)||(t.add(e),Ht(t,"add",e,e)),this}function Pa(e,t){t=Se(t);const i=Se(this),{has:n,get:s}=Ls(i);let r=n.call(i,e);r||(e=Se(e),r=n.call(i,e));const a=s.call(i,e);return i.set(e,t),r?wn(t,a)&&Ht(i,"set",e,t):Ht(i,"add",e,t),this}function Ia(e){const t=Se(this),{has:i,get:n}=Ls(t);let s=i.call(t,e);s||(e=Se(e),s=i.call(t,e)),n&&n.call(t,e);const r=t.delete(e);return s&&Ht(t,"delete",e,void 0),r}function Ma(){const e=Se(this),t=e.size!==0,i=e.clear();return t&&Ht(e,"clear",void 0,void 0),i}function jn(e,t){return function(n,s){const r=this,a=r.__v_raw,o=Se(a),l=t?Kr:e?qr:Sn;return!e&&st(o,"iterate",Si),a.forEach((h,d)=>n.call(s,l(h),l(d),r))}}function Kn(e,t,i){return function(...n){const s=this.__v_raw,r=Se(s),a=Vi(r),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=s[e](...n),d=i?Kr:t?qr:Sn;return!t&&st(r,"iterate",l?br:Si),{next(){const{value:f,done:y}=h.next();return y?{value:f,done:y}:{value:o?[d(f[0]),d(f[1])]:d(f),done:y}},[Symbol.iterator](){return this}}}}function Yt(e){return function(...t){return e==="delete"?!1:this}}function rc(){const e={get(r){return zn(this,r)},get size(){return Xn(this)},has:$n,add:Aa,set:Pa,delete:Ia,clear:Ma,forEach:jn(!1,!1)},t={get(r){return zn(this,r,!1,!0)},get size(){return Xn(this)},has:$n,add:Aa,set:Pa,delete:Ia,clear:Ma,forEach:jn(!1,!0)},i={get(r){return zn(this,r,!0)},get size(){return Xn(this,!0)},has(r){return $n.call(this,r,!0)},add:Yt("add"),set:Yt("set"),delete:Yt("delete"),clear:Yt("clear"),forEach:jn(!0,!1)},n={get(r){return zn(this,r,!0,!0)},get size(){return Xn(this,!0)},has(r){return $n.call(this,r,!0)},add:Yt("add"),set:Yt("set"),delete:Yt("delete"),clear:Yt("clear"),forEach:jn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Kn(r,!1,!1),i[r]=Kn(r,!0,!1),t[r]=Kn(r,!1,!0),n[r]=Kn(r,!0,!0)}),[e,i,t,n]}const[ac,oc,lc,hc]=rc();function Yr(e,t){const i=t?e?hc:lc:e?oc:ac;return(n,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(ye(i,s)&&s in n?i:n,s,r)}const cc={get:Yr(!1,!1)},dc={get:Yr(!1,!0)},uc={get:Yr(!0,!1)},Ko=new WeakMap,Yo=new WeakMap,Zo=new WeakMap,fc=new WeakMap;function gc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function pc(e){return e.__v_skip||!Object.isExtensible(e)?0:gc(Ih(e))}function Ai(e){return Xi(e)?e:Zr(e,!1,jo,cc,Ko)}function _c(e){return Zr(e,!1,sc,dc,Yo)}function qo(e){return Zr(e,!0,nc,uc,Zo)}function Zr(e,t,i,n,s){if(!Me(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const a=pc(e);if(a===0)return e;const o=new Proxy(e,a===2?n:i);return s.set(e,o),o}function zi(e){return Xi(e)?zi(e.__v_raw):!!(e&&e.__v_isReactive)}function Xi(e){return!!(e&&e.__v_isReadonly)}function gs(e){return!!(e&&e.__v_isShallow)}function Jo(e){return zi(e)||Xi(e)}function Se(e){const t=e&&e.__v_raw;return t?Se(t):e}function Qo(e){return us(e,"__v_skip",!0),e}const Sn=e=>Me(e)?Ai(e):e,qr=e=>Me(e)?qo(e):e;function el(e){Qt&&vt&&(e=Se(e),zo(e.dep||(e.dep=$r())))}function tl(e,t){e=Se(e);const i=e.dep;i&&wr(i)}function qe(e){return!!(e&&e.__v_isRef===!0)}function Rs(e){return il(e,!1)}function mt(e){return il(e,!0)}function il(e,t){return qe(e)?e:new mc(e,t)}class mc{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:Se(t),this._value=i?t:Sn(t)}get value(){return el(this),this._value}set value(t){const i=this.__v_isShallow||gs(t)||Xi(t);t=i?t:Se(t),wn(t,this._rawValue)&&(this._rawValue=t,this._value=i?t:Sn(t),tl(this))}}function nl(e){return qe(e)?e.value:e}const vc={get:(e,t,i)=>nl(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const s=e[t];return qe(s)&&!qe(i)?(s.value=i,!0):Reflect.set(e,t,i,n)}};function sl(e){return zi(e)?e:new Proxy(e,vc)}class yc{constructor(t,i,n,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Xr(t,()=>{this._dirty||(this._dirty=!0,tl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const t=Se(this);return el(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function bc(e,t,i=!1){let n,s;const r=ge(e);return r?(n=e,s=St):(n=e.get,s=e.set),new yc(n,s,r||!s,i)}function ei(e,t,i,n){let s;try{s=n?e(...n):e()}catch(r){Fs(r,t,i)}return s}function Ct(e,t,i,n){if(ge(e)){const r=ei(e,t,i,n);return r&&Ro(r)&&r.catch(a=>{Fs(a,t,i)}),r}const s=[];for(let r=0;r<e.length;r++)s.push(Ct(e[r],t,i,n));return s}function Fs(e,t,i,n=!0){const s=t?t.vnode:null;if(t){let r=t.parent;const a=t.proxy,o=i;for(;r;){const h=r.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,a,o)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){ei(l,null,10,[e,a,o]);return}}wc(e,i,s,n)}function wc(e,t,i,n=!0){console.error(e)}let Cn=!1,Sr=!1;const Ze=[];let Mt=0;const $i=[];let Gt=null,vi=0;const rl=Promise.resolve();let Jr=null;function Sc(e){const t=Jr||rl;return e?t.then(this?e.bind(this):e):t}function Cc(e){let t=Mt+1,i=Ze.length;for(;t<i;){const n=t+i>>>1;Tn(Ze[n])<e?t=n+1:i=n}return t}function Qr(e){(!Ze.length||!Ze.includes(e,Cn&&e.allowRecurse?Mt+1:Mt))&&(e.id==null?Ze.push(e):Ze.splice(Cc(e.id),0,e),al())}function al(){!Cn&&!Sr&&(Sr=!0,Jr=rl.then(ll))}function Tc(e){const t=Ze.indexOf(e);t>Mt&&Ze.splice(t,1)}function Ec(e){re(e)?$i.push(...e):(!Gt||!Gt.includes(e,e.allowRecurse?vi+1:vi))&&$i.push(e),al()}function Oa(e,t=Cn?Mt+1:0){for(;t<Ze.length;t++){const i=Ze[t];i&&i.pre&&(Ze.splice(t,1),t--,i())}}function ol(e){if($i.length){const t=[...new Set($i)];if($i.length=0,Gt){Gt.push(...t);return}for(Gt=t,Gt.sort((i,n)=>Tn(i)-Tn(n)),vi=0;vi<Gt.length;vi++)Gt[vi]();Gt=null,vi=0}}const Tn=e=>e.id==null?1/0:e.id,kc=(e,t)=>{const i=Tn(e)-Tn(t);if(i===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return i};function ll(e){Sr=!1,Cn=!0,Ze.sort(kc);const t=St;try{for(Mt=0;Mt<Ze.length;Mt++){const i=Ze[Mt];i&&i.active!==!1&&ei(i,null,14)}}finally{Mt=0,Ze.length=0,ol(),Cn=!1,Jr=null,(Ze.length||$i.length)&&ll()}}function xc(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||Ie;let s=i;const r=t.startsWith("update:"),a=r&&t.slice(7);if(a&&a in n){const d=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:y}=n[d]||Ie;y&&(s=i.map(g=>$e(g)?g.trim():g)),f&&(s=i.map(fs))}let o,l=n[o=rr(t)]||n[o=rr(Dt(t))];!l&&r&&(l=n[o=rr(Zi(t))]),l&&Ct(l,e,6,s);const h=n[o+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Ct(h,e,6,s)}}function hl(e,t,i=!1){const n=t.emitsCache,s=n.get(e);if(s!==void 0)return s;const r=e.emits;let a={},o=!1;if(!ge(e)){const l=h=>{const d=hl(h,t,!0);d&&(o=!0,ze(a,d))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!o?(Me(e)&&n.set(e,null),null):(re(r)?r.forEach(l=>a[l]=null):ze(a,r),Me(e)&&n.set(e,a),a)}function Ns(e,t){return!e||!As(t)?!1:(t=t.slice(2).replace(/Once$/,""),ye(e,t[0].toLowerCase()+t.slice(1))||ye(e,Zi(t))||ye(e,t))}let Xe=null,Bs=null;function ps(e){const t=Xe;return Xe=e,Bs=e&&e.type.__scopeId||null,t}function ea(e){Bs=e}function ta(){Bs=null}function et(e,t=Xe,i){if(!t||e._n)return e;const n=(...s)=>{n._d&&Va(-1);const r=ps(t);let a;try{a=e(...s)}finally{ps(r),n._d&&Va(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function ar(e){const{type:t,vnode:i,proxy:n,withProxy:s,props:r,propsOptions:[a],slots:o,attrs:l,emit:h,render:d,renderCache:f,data:y,setupState:g,ctx:_,inheritAttrs:b}=e;let v,A;const E=ps(e);try{if(i.shapeFlag&4){const u=s||n;v=It(d.call(u,u,f,r,g,y,_)),A=l}else{const u=t;v=It(u.length>1?u(r,{attrs:l,slots:o,emit:h}):u(r,null)),A=t.props?l:Ac(l)}}catch(u){fn.length=0,Fs(u,e,1),v=ne(ni)}let c=v;if(A&&b!==!1){const u=Object.keys(A),{shapeFlag:C}=c;u.length&&C&7&&(a&&u.some(Gr)&&(A=Pc(A,a)),c=ji(c,A))}return i.dirs&&(c=ji(c),c.dirs=c.dirs?c.dirs.concat(i.dirs):i.dirs),i.transition&&(c.transition=i.transition),v=c,ps(E),v}const Ac=e=>{let t;for(const i in e)(i==="class"||i==="style"||As(i))&&((t||(t={}))[i]=e[i]);return t},Pc=(e,t)=>{const i={};for(const n in e)(!Gr(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function Ic(e,t,i){const{props:n,children:s,component:r}=e,{props:a,children:o,patchFlag:l}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?Da(n,a,h):!!a;if(l&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const y=d[f];if(a[y]!==n[y]&&!Ns(h,y))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?Da(n,a,h):!0:!!a;return!1}function Da(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(t[r]!==e[r]&&!Ns(i,r))return!0}return!1}function Mc({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const Oc=e=>e.__isSuspense;function Dc(e,t){t&&t.pendingBranch?re(e)?t.effects.push(...e):t.effects.push(e):Ec(e)}function Lc(e,t){return ia(e,null,{flush:"post"})}const Yn={};function Ci(e,t,i){return ia(e,t,i)}function ia(e,t,{immediate:i,deep:n,flush:s,onTrack:r,onTrigger:a}=Ie){var o;const l=Go()===((o=Ve)==null?void 0:o.scope)?Ve:null;let h,d=!1,f=!1;if(qe(e)?(h=()=>e.value,d=gs(e)):zi(e)?(h=()=>e,n=!0):re(e)?(f=!0,d=e.some(u=>zi(u)||gs(u)),h=()=>e.map(u=>{if(qe(u))return u.value;if(zi(u))return wi(u);if(ge(u))return ei(u,l,2)})):ge(e)?t?h=()=>ei(e,l,2):h=()=>{if(!(l&&l.isUnmounted))return y&&y(),Ct(e,l,3,[g])}:h=St,t&&n){const u=h;h=()=>wi(u())}let y,g=u=>{y=E.onStop=()=>{ei(u,l,4)}},_;if(kn)if(g=St,t?i&&Ct(t,l,3,[h(),f?[]:void 0,g]):h(),s==="sync"){const u=kd();_=u.__watcherHandles||(u.__watcherHandles=[])}else return St;let b=f?new Array(e.length).fill(Yn):Yn;const v=()=>{if(!!E.active)if(t){const u=E.run();(n||d||(f?u.some((C,k)=>wn(C,b[k])):wn(u,b)))&&(y&&y(),Ct(t,l,3,[u,b===Yn?void 0:f&&b[0]===Yn?[]:b,g]),b=u)}else E.run()};v.allowRecurse=!!t;let A;s==="sync"?A=v:s==="post"?A=()=>nt(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),A=()=>Qr(v));const E=new Xr(h,A);t?i?v():b=E.run():s==="post"?nt(E.run.bind(E),l&&l.suspense):E.run();const c=()=>{E.stop(),l&&l.scope&&Ur(l.scope.effects,E)};return _&&_.push(c),c}function Rc(e,t,i){const n=this.proxy,s=$e(e)?e.includes(".")?cl(n,e):()=>n[e]:e.bind(n,n);let r;ge(t)?r=t:(r=t.handler,i=t);const a=Ve;Ki(this);const o=ia(s,r.bind(n),i);return a?Ki(a):Ti(),o}function cl(e,t){const i=t.split(".");return()=>{let n=e;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}function wi(e,t){if(!Me(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),qe(e))wi(e.value,t);else if(re(e))for(let i=0;i<e.length;i++)wi(e[i],t);else if(Ps(e)||Vi(e))e.forEach(i=>{wi(i,t)});else if(No(e))for(const i in e)wi(e[i],t);return e}function Cr(e,t){const i=Xe;if(i===null)return e;const n=zs(i)||i.proxy,s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[a,o,l,h=Ie]=t[r];a&&(ge(a)&&(a={mounted:a,updated:a}),a.deep&&wi(o),s.push({dir:a,instance:n,value:o,oldValue:void 0,arg:l,modifiers:h}))}return e}function gi(e,t,i,n){const s=e.dirs,r=t&&t.dirs;for(let a=0;a<s.length;a++){const o=s[a];r&&(o.oldValue=r[a].value);let l=o.dir[n];l&&(qi(),Ct(l,i,8,[e.el,o,e,t]),Ji())}}function Et(e,t){return ge(e)?(()=>ze({name:e.name},t,{setup:e}))():e}const cn=e=>!!e.type.__asyncLoader,dl=e=>e.type.__isKeepAlive;function Fc(e,t){ul(e,"a",t)}function Nc(e,t){ul(e,"da",t)}function ul(e,t,i=Ve){const n=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Ws(t,n,i),i){let s=i.parent;for(;s&&s.parent;)dl(s.parent.vnode)&&Bc(n,t,i,s),s=s.parent}}function Bc(e,t,i,n){const s=Ws(t,e,n,!0);na(()=>{Ur(n[t],s)},i)}function Ws(e,t,i=Ve,n=!1){if(i){const s=i[e]||(i[e]=[]),r=t.__weh||(t.__weh=(...a)=>{if(i.isUnmounted)return;qi(),Ki(i);const o=Ct(t,i,e,a);return Ti(),Ji(),o});return n?s.unshift(r):s.push(r),r}}const Vt=e=>(t,i=Ve)=>(!kn||e==="sp")&&Ws(e,(...n)=>t(...n),i),Wc=Vt("bm"),Gs=Vt("m"),Gc=Vt("bu"),Uc=Vt("u"),fl=Vt("bum"),na=Vt("um"),Hc=Vt("sp"),Vc=Vt("rtg"),zc=Vt("rtc");function $c(e,t=Ve){Ws("ec",e,t)}const gl="components";function Lt(e,t){return jc(gl,e,!0,t)||e}const Xc=Symbol.for("v-ndc");function jc(e,t,i=!0,n=!1){const s=Xe||Ve;if(s){const r=s.type;if(e===gl){const o=Cd(r,!1);if(o&&(o===t||o===Dt(t)||o===Ms(Dt(t))))return r}const a=La(s[e]||r[e],t)||La(s.appContext[e],t);return!a&&n?r:a}}function La(e,t){return e&&(e[t]||e[Dt(t)]||e[Ms(Dt(t))])}function Zn(e,t,i={},n,s){if(Xe.isCE||Xe.parent&&cn(Xe.parent)&&Xe.parent.isCE)return t!=="default"&&(i.name=t),ne("slot",i,n&&n());let r=e[t];r&&r._c&&(r._d=!1),ke();const a=r&&pl(r(i)),o=Hs(Ye,{key:i.key||a&&a.key||`_${t}`},a||(n?n():[]),a&&e._===1?64:-2);return!s&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),r&&r._c&&(r._d=!0),o}function pl(e){return e.some(t=>vs(t)?!(t.type===ni||t.type===Ye&&!pl(t.children)):!0)?e:null}const Tr=e=>e?xl(e)?zs(e)||e.proxy:Tr(e.parent):null,dn=ze(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Tr(e.parent),$root:e=>Tr(e.root),$emit:e=>e.emit,$options:e=>sa(e),$forceUpdate:e=>e.f||(e.f=()=>Qr(e.update)),$nextTick:e=>e.n||(e.n=Sc.bind(e.proxy)),$watch:e=>Rc.bind(e)}),or=(e,t)=>e!==Ie&&!e.__isScriptSetup&&ye(e,t),Kc={get({_:e},t){const{ctx:i,setupState:n,data:s,props:r,accessCache:a,type:o,appContext:l}=e;let h;if(t[0]!=="$"){const g=a[t];if(g!==void 0)switch(g){case 1:return n[t];case 2:return s[t];case 4:return i[t];case 3:return r[t]}else{if(or(n,t))return a[t]=1,n[t];if(s!==Ie&&ye(s,t))return a[t]=2,s[t];if((h=e.propsOptions[0])&&ye(h,t))return a[t]=3,r[t];if(i!==Ie&&ye(i,t))return a[t]=4,i[t];Er&&(a[t]=0)}}const d=dn[t];let f,y;if(d)return t==="$attrs"&&st(e,"get",t),d(e);if((f=o.__cssModules)&&(f=f[t]))return f;if(i!==Ie&&ye(i,t))return a[t]=4,i[t];if(y=l.config.globalProperties,ye(y,t))return y[t]},set({_:e},t,i){const{data:n,setupState:s,ctx:r}=e;return or(s,t)?(s[t]=i,!0):n!==Ie&&ye(n,t)?(n[t]=i,!0):ye(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:s,propsOptions:r}},a){let o;return!!i[a]||e!==Ie&&ye(e,a)||or(t,a)||(o=r[0])&&ye(o,a)||ye(n,a)||ye(dn,a)||ye(s.config.globalProperties,a)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:ye(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function Ra(e){return re(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let Er=!0;function Yc(e){const t=sa(e),i=e.proxy,n=e.ctx;Er=!1,t.beforeCreate&&Fa(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:a,watch:o,provide:l,inject:h,created:d,beforeMount:f,mounted:y,beforeUpdate:g,updated:_,activated:b,deactivated:v,beforeDestroy:A,beforeUnmount:E,destroyed:c,unmounted:u,render:C,renderTracked:k,renderTriggered:F,errorCaptured:S,serverPrefetch:W,expose:x,inheritAttrs:N,components:Y,directives:X,filters:te}=t;if(h&&Zc(h,n,null),a)for(const O in a){const R=a[O];ge(R)&&(n[O]=R.bind(i))}if(s){const O=s.call(i,i);Me(O)&&(e.data=Ai(O))}if(Er=!0,r)for(const O in r){const R=r[O],j=ge(R)?R.bind(i,i):ge(R.get)?R.get.bind(i,i):St,ie=!ge(R)&&ge(R.set)?R.set.bind(i):St,ee=bt({get:j,set:ie});Object.defineProperty(n,O,{enumerable:!0,configurable:!0,get:()=>ee.value,set:ue=>ee.value=ue})}if(o)for(const O in o)_l(o[O],n,i,O);if(l){const O=ge(l)?l.call(i):l;Reflect.ownKeys(O).forEach(R=>{id(R,O[R])})}d&&Fa(d,e,"c");function de(O,R){re(R)?R.forEach(j=>O(j.bind(i))):R&&O(R.bind(i))}if(de(Wc,f),de(Gs,y),de(Gc,g),de(Uc,_),de(Fc,b),de(Nc,v),de($c,S),de(zc,k),de(Vc,F),de(fl,E),de(na,u),de(Hc,W),re(x))if(x.length){const O=e.exposed||(e.exposed={});x.forEach(R=>{Object.defineProperty(O,R,{get:()=>i[R],set:j=>i[R]=j})})}else e.exposed||(e.exposed={});C&&e.render===St&&(e.render=C),N!=null&&(e.inheritAttrs=N),Y&&(e.components=Y),X&&(e.directives=X)}function Zc(e,t,i=St){re(e)&&(e=kr(e));for(const n in e){const s=e[n];let r;Me(s)?"default"in s?r=os(s.from||n,s.default,!0):r=os(s.from||n):r=os(s),qe(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[n]=r}}function Fa(e,t,i){Ct(re(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function _l(e,t,i,n){const s=n.includes(".")?cl(i,n):()=>i[n];if($e(e)){const r=t[e];ge(r)&&Ci(s,r)}else if(ge(e))Ci(s,e.bind(i));else if(Me(e))if(re(e))e.forEach(r=>_l(r,t,i,n));else{const r=ge(e.handler)?e.handler.bind(i):t[e.handler];ge(r)&&Ci(s,r,e)}}function sa(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,o=r.get(t);let l;return o?l=o:!s.length&&!i&&!n?l=t:(l={},s.length&&s.forEach(h=>_s(l,h,a,!0)),_s(l,t,a)),Me(t)&&r.set(t,l),l}function _s(e,t,i,n=!1){const{mixins:s,extends:r}=t;r&&_s(e,r,i,!0),s&&s.forEach(a=>_s(e,a,i,!0));for(const a in t)if(!(n&&a==="expose")){const o=qc[a]||i&&i[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const qc={data:Na,props:Ba,emits:Ba,methods:hn,computed:hn,beforeCreate:Qe,created:Qe,beforeMount:Qe,mounted:Qe,beforeUpdate:Qe,updated:Qe,beforeDestroy:Qe,beforeUnmount:Qe,destroyed:Qe,unmounted:Qe,activated:Qe,deactivated:Qe,errorCaptured:Qe,serverPrefetch:Qe,components:hn,directives:hn,watch:Qc,provide:Na,inject:Jc};function Na(e,t){return t?e?function(){return ze(ge(e)?e.call(this,this):e,ge(t)?t.call(this,this):t)}:t:e}function Jc(e,t){return hn(kr(e),kr(t))}function kr(e){if(re(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Qe(e,t){return e?[...new Set([].concat(e,t))]:t}function hn(e,t){return e?ze(Object.create(null),e,t):t}function Ba(e,t){return e?re(e)&&re(t)?[...new Set([...e,...t])]:ze(Object.create(null),Ra(e),Ra(t!=null?t:{})):t}function Qc(e,t){if(!e)return t;if(!t)return e;const i=ze(Object.create(null),e);for(const n in t)i[n]=Qe(e[n],t[n]);return i}function ml(){return{app:null,config:{isNativeTag:xh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ed=0;function td(e,t){return function(n,s=null){ge(n)||(n=ze({},n)),s!=null&&!Me(s)&&(s=null);const r=ml(),a=new Set;let o=!1;const l=r.app={_uid:ed++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:xd,get config(){return r.config},set config(h){},use(h,...d){return a.has(h)||(h&&ge(h.install)?(a.add(h),h.install(l,...d)):ge(h)&&(a.add(h),h(l,...d))),l},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),l},component(h,d){return d?(r.components[h]=d,l):r.components[h]},directive(h,d){return d?(r.directives[h]=d,l):r.directives[h]},mount(h,d,f){if(!o){const y=ne(n,s);return y.appContext=r,d&&t?t(y,h):e(y,h,f),o=!0,l._container=h,h.__vue_app__=l,zs(y.component)||y.component.proxy}},unmount(){o&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,d){return r.provides[h]=d,l},runWithContext(h){ms=l;try{return h()}finally{ms=null}}};return l}}let ms=null;function id(e,t){if(Ve){let i=Ve.provides;const n=Ve.parent&&Ve.parent.provides;n===i&&(i=Ve.provides=Object.create(n)),i[e]=t}}function os(e,t,i=!1){const n=Ve||Xe;if(n||ms){const s=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:ms._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return i&&ge(t)?t.call(n&&n.proxy):t}}function nd(e,t,i,n=!1){const s={},r={};us(r,Vs,1),e.propsDefaults=Object.create(null),vl(e,t,s,r);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);i?e.props=n?s:_c(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function sd(e,t,i,n){const{props:s,attrs:r,vnode:{patchFlag:a}}=e,o=Se(s),[l]=e.propsOptions;let h=!1;if((n||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let y=d[f];if(Ns(e.emitsOptions,y))continue;const g=t[y];if(l)if(ye(r,y))g!==r[y]&&(r[y]=g,h=!0);else{const _=Dt(y);s[_]=xr(l,o,_,g,e,!1)}else g!==r[y]&&(r[y]=g,h=!0)}}}else{vl(e,t,s,r)&&(h=!0);let d;for(const f in o)(!t||!ye(t,f)&&((d=Zi(f))===f||!ye(t,d)))&&(l?i&&(i[f]!==void 0||i[d]!==void 0)&&(s[f]=xr(l,o,f,void 0,e,!0)):delete s[f]);if(r!==o)for(const f in r)(!t||!ye(t,f)&&!0)&&(delete r[f],h=!0)}h&&Ht(e,"set","$attrs")}function vl(e,t,i,n){const[s,r]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(rs(l))continue;const h=t[l];let d;s&&ye(s,d=Dt(l))?!r||!r.includes(d)?i[d]=h:(o||(o={}))[d]=h:Ns(e.emitsOptions,l)||(!(l in n)||h!==n[l])&&(n[l]=h,a=!0)}if(r){const l=Se(i),h=o||Ie;for(let d=0;d<r.length;d++){const f=r[d];i[f]=xr(s,l,f,h[f],e,!ye(h,f))}}return a}function xr(e,t,i,n,s,r){const a=e[i];if(a!=null){const o=ye(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&ge(l)){const{propsDefaults:h}=s;i in h?n=h[i]:(Ki(s),n=h[i]=l.call(null,t),Ti())}else n=l}a[0]&&(r&&!o?n=!1:a[1]&&(n===""||n===Zi(i))&&(n=!0))}return n}function yl(e,t,i=!1){const n=t.propsCache,s=n.get(e);if(s)return s;const r=e.props,a={},o=[];let l=!1;if(!ge(e)){const d=f=>{l=!0;const[y,g]=yl(f,t,!0);ze(a,y),g&&o.push(...g)};!i&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!r&&!l)return Me(e)&&n.set(e,Hi),Hi;if(re(r))for(let d=0;d<r.length;d++){const f=Dt(r[d]);Wa(f)&&(a[f]=Ie)}else if(r)for(const d in r){const f=Dt(d);if(Wa(f)){const y=r[d],g=a[f]=re(y)||ge(y)?{type:y}:ze({},y);if(g){const _=Ha(Boolean,g.type),b=Ha(String,g.type);g[0]=_>-1,g[1]=b<0||_<b,(_>-1||ye(g,"default"))&&o.push(f)}}}const h=[a,o];return Me(e)&&n.set(e,h),h}function Wa(e){return e[0]!=="$"}function Ga(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Ua(e,t){return Ga(e)===Ga(t)}function Ha(e,t){return re(t)?t.findIndex(i=>Ua(i,e)):ge(t)&&Ua(t,e)?0:-1}const bl=e=>e[0]==="_"||e==="$stable",ra=e=>re(e)?e.map(It):[It(e)],rd=(e,t,i)=>{if(t._n)return t;const n=et((...s)=>ra(t(...s)),i);return n._c=!1,n},wl=(e,t,i)=>{const n=e._ctx;for(const s in e){if(bl(s))continue;const r=e[s];if(ge(r))t[s]=rd(s,r,n);else if(r!=null){const a=ra(r);t[s]=()=>a}}},Sl=(e,t)=>{const i=ra(t);e.slots.default=()=>i},ad=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=Se(t),us(t,"_",i)):wl(t,e.slots={})}else e.slots={},t&&Sl(e,t);us(e.slots,Vs,1)},od=(e,t,i)=>{const{vnode:n,slots:s}=e;let r=!0,a=Ie;if(n.shapeFlag&32){const o=t._;o?i&&o===1?r=!1:(ze(s,t),!i&&o===1&&delete s._):(r=!t.$stable,wl(t,s)),a=t}else t&&(Sl(e,t),a={default:1});if(r)for(const o in s)!bl(o)&&!(o in a)&&delete s[o]};function Ar(e,t,i,n,s=!1){if(re(e)){e.forEach((y,g)=>Ar(y,t&&(re(t)?t[g]:t),i,n,s));return}if(cn(n)&&!s)return;const r=n.shapeFlag&4?zs(n.component)||n.component.proxy:n.el,a=s?null:r,{i:o,r:l}=e,h=t&&t.r,d=o.refs===Ie?o.refs={}:o.refs,f=o.setupState;if(h!=null&&h!==l&&($e(h)?(d[h]=null,ye(f,h)&&(f[h]=null)):qe(h)&&(h.value=null)),ge(l))ei(l,o,12,[a,d]);else{const y=$e(l),g=qe(l);if(y||g){const _=()=>{if(e.f){const b=y?ye(f,l)?f[l]:d[l]:l.value;s?re(b)&&Ur(b,r):re(b)?b.includes(r)||b.push(r):y?(d[l]=[r],ye(f,l)&&(f[l]=d[l])):(l.value=[r],e.k&&(d[e.k]=l.value))}else y?(d[l]=a,ye(f,l)&&(f[l]=a)):g&&(l.value=a,e.k&&(d[e.k]=a))};a?(_.id=-1,nt(_,i)):_()}}}const nt=Dc;function ld(e){return hd(e)}function hd(e,t){const i=mr();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:a,createText:o,createComment:l,setText:h,setElementText:d,parentNode:f,nextSibling:y,setScopeId:g=St,insertStaticContent:_}=e,b=(p,w,P,I=null,D=null,G=null,V=!1,M=null,z=!!w.dynamicChildren)=>{if(p===w)return;p&&!an(p,w)&&(I=T(p),ue(p,D,G,!0),p=null),w.patchFlag===-2&&(z=!1,w.dynamicChildren=null);const{type:L,ref:$,shapeFlag:q}=w;switch(L){case Us:v(p,w,P,I);break;case ni:A(p,w,P,I);break;case un:p==null&&E(w,P,I,V);break;case Ye:Y(p,w,P,I,D,G,V,M,z);break;default:q&1?C(p,w,P,I,D,G,V,M,z):q&6?X(p,w,P,I,D,G,V,M,z):(q&64||q&128)&&L.process(p,w,P,I,D,G,V,M,z,Z)}$!=null&&D&&Ar($,p&&p.ref,G,w||p,!w)},v=(p,w,P,I)=>{if(p==null)n(w.el=o(w.children),P,I);else{const D=w.el=p.el;w.children!==p.children&&h(D,w.children)}},A=(p,w,P,I)=>{p==null?n(w.el=l(w.children||""),P,I):w.el=p.el},E=(p,w,P,I)=>{[p.el,p.anchor]=_(p.children,w,P,I,p.el,p.anchor)},c=({el:p,anchor:w},P,I)=>{let D;for(;p&&p!==w;)D=y(p),n(p,P,I),p=D;n(w,P,I)},u=({el:p,anchor:w})=>{let P;for(;p&&p!==w;)P=y(p),s(p),p=P;s(w)},C=(p,w,P,I,D,G,V,M,z)=>{V=V||w.type==="svg",p==null?k(w,P,I,D,G,V,M,z):W(p,w,D,G,V,M,z)},k=(p,w,P,I,D,G,V,M)=>{let z,L;const{type:$,props:q,shapeFlag:J,transition:oe,dirs:pe}=p;if(z=p.el=a(p.type,G,q&&q.is,q),J&8?d(z,p.children):J&16&&S(p.children,z,null,I,D,G&&$!=="foreignObject",V,M),pe&&gi(p,null,I,"created"),F(z,p,p.scopeId,V,I),q){for(const H in q)H!=="value"&&!rs(H)&&r(z,H,null,q[H],G,p.children,I,D,me);"value"in q&&r(z,"value",null,q.value),(L=q.onVnodeBeforeMount)&&Pt(L,I,p)}pe&&gi(p,null,I,"beforeMount");const B=(!D||D&&!D.pendingBranch)&&oe&&!oe.persisted;B&&oe.beforeEnter(z),n(z,w,P),((L=q&&q.onVnodeMounted)||B||pe)&&nt(()=>{L&&Pt(L,I,p),B&&oe.enter(z),pe&&gi(p,null,I,"mounted")},D)},F=(p,w,P,I,D)=>{if(P&&g(p,P),I)for(let G=0;G<I.length;G++)g(p,I[G]);if(D){let G=D.subTree;if(w===G){const V=D.vnode;F(p,V,V.scopeId,V.slotScopeIds,D.parent)}}},S=(p,w,P,I,D,G,V,M,z=0)=>{for(let L=z;L<p.length;L++){const $=p[L]=M?qt(p[L]):It(p[L]);b(null,$,w,P,I,D,G,V,M)}},W=(p,w,P,I,D,G,V)=>{const M=w.el=p.el;let{patchFlag:z,dynamicChildren:L,dirs:$}=w;z|=p.patchFlag&16;const q=p.props||Ie,J=w.props||Ie;let oe;P&&pi(P,!1),(oe=J.onVnodeBeforeUpdate)&&Pt(oe,P,w,p),$&&gi(w,p,P,"beforeUpdate"),P&&pi(P,!0);const pe=D&&w.type!=="foreignObject";if(L?x(p.dynamicChildren,L,M,P,I,pe,G):V||R(p,w,M,null,P,I,pe,G,!1),z>0){if(z&16)N(M,w,q,J,P,I,D);else if(z&2&&q.class!==J.class&&r(M,"class",null,J.class,D),z&4&&r(M,"style",q.style,J.style,D),z&8){const B=w.dynamicProps;for(let H=0;H<B.length;H++){const Q=B[H],fe=q[Q],De=J[Q];(De!==fe||Q==="value")&&r(M,Q,fe,De,D,p.children,P,I,me)}}z&1&&p.children!==w.children&&d(M,w.children)}else!V&&L==null&&N(M,w,q,J,P,I,D);((oe=J.onVnodeUpdated)||$)&&nt(()=>{oe&&Pt(oe,P,w,p),$&&gi(w,p,P,"updated")},I)},x=(p,w,P,I,D,G,V)=>{for(let M=0;M<w.length;M++){const z=p[M],L=w[M],$=z.el&&(z.type===Ye||!an(z,L)||z.shapeFlag&70)?f(z.el):P;b(z,L,$,null,I,D,G,V,!0)}},N=(p,w,P,I,D,G,V)=>{if(P!==I){if(P!==Ie)for(const M in P)!rs(M)&&!(M in I)&&r(p,M,P[M],null,V,w.children,D,G,me);for(const M in I){if(rs(M))continue;const z=I[M],L=P[M];z!==L&&M!=="value"&&r(p,M,L,z,V,w.children,D,G,me)}"value"in I&&r(p,"value",P.value,I.value)}},Y=(p,w,P,I,D,G,V,M,z)=>{const L=w.el=p?p.el:o(""),$=w.anchor=p?p.anchor:o("");let{patchFlag:q,dynamicChildren:J,slotScopeIds:oe}=w;oe&&(M=M?M.concat(oe):oe),p==null?(n(L,P,I),n($,P,I),S(w.children,P,$,D,G,V,M,z)):q>0&&q&64&&J&&p.dynamicChildren?(x(p.dynamicChildren,J,P,D,G,V,M),(w.key!=null||D&&w===D.subTree)&&Cl(p,w,!0)):R(p,w,P,$,D,G,V,M,z)},X=(p,w,P,I,D,G,V,M,z)=>{w.slotScopeIds=M,p==null?w.shapeFlag&512?D.ctx.activate(w,P,I,V,z):te(w,P,I,D,G,V,z):le(p,w,z)},te=(p,w,P,I,D,G,V)=>{const M=p.component=vd(p,I,D);if(dl(p)&&(M.ctx.renderer=Z),yd(M),M.asyncDep){if(D&&D.registerDep(M,de),!p.el){const z=M.subTree=ne(ni);A(null,z,w,P)}return}de(M,p,w,P,D,G,V)},le=(p,w,P)=>{const I=w.component=p.component;if(Ic(p,w,P))if(I.asyncDep&&!I.asyncResolved){O(I,w,P);return}else I.next=w,Tc(I.update),I.update();else w.el=p.el,I.vnode=w},de=(p,w,P,I,D,G,V)=>{const M=()=>{if(p.isMounted){let{next:$,bu:q,u:J,parent:oe,vnode:pe}=p,B=$,H;pi(p,!1),$?($.el=pe.el,O(p,$,V)):$=pe,q&&as(q),(H=$.props&&$.props.onVnodeBeforeUpdate)&&Pt(H,oe,$,pe),pi(p,!0);const Q=ar(p),fe=p.subTree;p.subTree=Q,b(fe,Q,f(fe.el),T(fe),p,D,G),$.el=Q.el,B===null&&Mc(p,Q.el),J&&nt(J,D),(H=$.props&&$.props.onVnodeUpdated)&&nt(()=>Pt(H,oe,$,pe),D)}else{let $;const{el:q,props:J}=w,{bm:oe,m:pe,parent:B}=p,H=cn(w);if(pi(p,!1),oe&&as(oe),!H&&($=J&&J.onVnodeBeforeMount)&&Pt($,B,w),pi(p,!0),q&&ve){const Q=()=>{p.subTree=ar(p),ve(q,p.subTree,p,D,null)};H?w.type.__asyncLoader().then(()=>!p.isUnmounted&&Q()):Q()}else{const Q=p.subTree=ar(p);b(null,Q,P,I,p,D,G),w.el=Q.el}if(pe&&nt(pe,D),!H&&($=J&&J.onVnodeMounted)){const Q=w;nt(()=>Pt($,B,Q),D)}(w.shapeFlag&256||B&&cn(B.vnode)&&B.vnode.shapeFlag&256)&&p.a&&nt(p.a,D),p.isMounted=!0,w=P=I=null}},z=p.effect=new Xr(M,()=>Qr(L),p.scope),L=p.update=()=>z.run();L.id=p.uid,pi(p,!0),L()},O=(p,w,P)=>{w.component=p;const I=p.vnode.props;p.vnode=w,p.next=null,sd(p,w.props,I,P),od(p,w.children,P),qi(),Oa(),Ji()},R=(p,w,P,I,D,G,V,M,z=!1)=>{const L=p&&p.children,$=p?p.shapeFlag:0,q=w.children,{patchFlag:J,shapeFlag:oe}=w;if(J>0){if(J&128){ie(L,q,P,I,D,G,V,M,z);return}else if(J&256){j(L,q,P,I,D,G,V,M,z);return}}oe&8?($&16&&me(L,D,G),q!==L&&d(P,q)):$&16?oe&16?ie(L,q,P,I,D,G,V,M,z):me(L,D,G,!0):($&8&&d(P,""),oe&16&&S(q,P,I,D,G,V,M,z))},j=(p,w,P,I,D,G,V,M,z)=>{p=p||Hi,w=w||Hi;const L=p.length,$=w.length,q=Math.min(L,$);let J;for(J=0;J<q;J++){const oe=w[J]=z?qt(w[J]):It(w[J]);b(p[J],oe,P,null,D,G,V,M,z)}L>$?me(p,D,G,!0,!1,q):S(w,P,I,D,G,V,M,z,q)},ie=(p,w,P,I,D,G,V,M,z)=>{let L=0;const $=w.length;let q=p.length-1,J=$-1;for(;L<=q&&L<=J;){const oe=p[L],pe=w[L]=z?qt(w[L]):It(w[L]);if(an(oe,pe))b(oe,pe,P,null,D,G,V,M,z);else break;L++}for(;L<=q&&L<=J;){const oe=p[q],pe=w[J]=z?qt(w[J]):It(w[J]);if(an(oe,pe))b(oe,pe,P,null,D,G,V,M,z);else break;q--,J--}if(L>q){if(L<=J){const oe=J+1,pe=oe<$?w[oe].el:I;for(;L<=J;)b(null,w[L]=z?qt(w[L]):It(w[L]),P,pe,D,G,V,M,z),L++}}else if(L>J)for(;L<=q;)ue(p[L],D,G,!0),L++;else{const oe=L,pe=L,B=new Map;for(L=pe;L<=J;L++){const ot=w[L]=z?qt(w[L]):It(w[L]);ot.key!=null&&B.set(ot.key,L)}let H,Q=0;const fe=J-pe+1;let De=!1,dt=0;const fi=new Array(fe);for(L=0;L<fe;L++)fi[L]=0;for(L=oe;L<=q;L++){const ot=p[L];if(Q>=fe){ue(ot,D,G,!0);continue}let At;if(ot.key!=null)At=B.get(ot.key);else for(H=pe;H<=J;H++)if(fi[H-pe]===0&&an(ot,w[H])){At=H;break}At===void 0?ue(ot,D,G,!0):(fi[At-pe]=L+1,At>=dt?dt=At:De=!0,b(ot,w[At],P,null,D,G,V,M,z),Q++)}const Vn=De?cd(fi):Hi;for(H=Vn.length-1,L=fe-1;L>=0;L--){const ot=pe+L,At=w[ot],Sa=ot+1<$?w[ot+1].el:I;fi[L]===0?b(null,At,P,Sa,D,G,V,M,z):De&&(H<0||L!==Vn[H]?ee(At,P,Sa,2):H--)}}},ee=(p,w,P,I,D=null)=>{const{el:G,type:V,transition:M,children:z,shapeFlag:L}=p;if(L&6){ee(p.component.subTree,w,P,I);return}if(L&128){p.suspense.move(w,P,I);return}if(L&64){V.move(p,w,P,Z);return}if(V===Ye){n(G,w,P);for(let q=0;q<z.length;q++)ee(z[q],w,P,I);n(p.anchor,w,P);return}if(V===un){c(p,w,P);return}if(I!==2&&L&1&&M)if(I===0)M.beforeEnter(G),n(G,w,P),nt(()=>M.enter(G),D);else{const{leave:q,delayLeave:J,afterLeave:oe}=M,pe=()=>n(G,w,P),B=()=>{q(G,()=>{pe(),oe&&oe()})};J?J(G,pe,B):B()}else n(G,w,P)},ue=(p,w,P,I=!1,D=!1)=>{const{type:G,props:V,ref:M,children:z,dynamicChildren:L,shapeFlag:$,patchFlag:q,dirs:J}=p;if(M!=null&&Ar(M,null,P,p,!0),$&256){w.ctx.deactivate(p);return}const oe=$&1&&J,pe=!cn(p);let B;if(pe&&(B=V&&V.onVnodeBeforeUnmount)&&Pt(B,w,p),$&6)Pe(p.component,P,I);else{if($&128){p.suspense.unmount(P,I);return}oe&&gi(p,null,w,"beforeUnmount"),$&64?p.type.remove(p,w,P,D,Z,I):L&&(G!==Ye||q>0&&q&64)?me(L,w,P,!1,!0):(G===Ye&&q&384||!D&&$&16)&&me(z,w,P),I&&we(p)}(pe&&(B=V&&V.onVnodeUnmounted)||oe)&&nt(()=>{B&&Pt(B,w,p),oe&&gi(p,null,w,"unmounted")},P)},we=p=>{const{type:w,el:P,anchor:I,transition:D}=p;if(w===Ye){Oe(P,I);return}if(w===un){u(p);return}const G=()=>{s(P),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(p.shapeFlag&1&&D&&!D.persisted){const{leave:V,delayLeave:M}=D,z=()=>V(P,G);M?M(p.el,G,z):z()}else G()},Oe=(p,w)=>{let P;for(;p!==w;)P=y(p),s(p),p=P;s(w)},Pe=(p,w,P)=>{const{bum:I,scope:D,update:G,subTree:V,um:M}=p;I&&as(I),D.stop(),G&&(G.active=!1,ue(V,p,w,P)),M&&nt(M,w),nt(()=>{p.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},me=(p,w,P,I=!1,D=!1,G=0)=>{for(let V=G;V<p.length;V++)ue(p[V],w,P,I,D)},T=p=>p.shapeFlag&6?T(p.component.subTree):p.shapeFlag&128?p.suspense.next():y(p.anchor||p.el),U=(p,w,P)=>{p==null?w._vnode&&ue(w._vnode,null,null,!0):b(w._vnode||null,p,w,null,null,null,P),Oa(),ol(),w._vnode=p},Z={p:b,um:ue,m:ee,r:we,mt:te,mc:S,pc:R,pbc:x,n:T,o:e};let Te,ve;return t&&([Te,ve]=t(Z)),{render:U,hydrate:Te,createApp:td(U,Te)}}function pi({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function Cl(e,t,i=!1){const n=e.children,s=t.children;if(re(n)&&re(s))for(let r=0;r<n.length;r++){const a=n[r];let o=s[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[r]=qt(s[r]),o.el=a.el),i||Cl(a,o)),o.type===Us&&(o.el=a.el)}}function cd(e){const t=e.slice(),i=[0];let n,s,r,a,o;const l=e.length;for(n=0;n<l;n++){const h=e[n];if(h!==0){if(s=i[i.length-1],e[s]<h){t[n]=s,i.push(n);continue}for(r=0,a=i.length-1;r<a;)o=r+a>>1,e[i[o]]<h?r=o+1:a=o;h<e[i[r]]&&(r>0&&(t[n]=i[r-1]),i[r]=n)}}for(r=i.length,a=i[r-1];r-- >0;)i[r]=a,a=t[a];return i}const dd=e=>e.__isTeleport,Ye=Symbol.for("v-fgt"),Us=Symbol.for("v-txt"),ni=Symbol.for("v-cmt"),un=Symbol.for("v-stc"),fn=[];let yt=null;function ke(e=!1){fn.push(yt=e?null:[])}function ud(){fn.pop(),yt=fn[fn.length-1]||null}let En=1;function Va(e){En+=e}function Tl(e){return e.dynamicChildren=En>0?yt||Hi:null,ud(),En>0&&yt&&yt.push(e),e}function Le(e,t,i,n,s,r){return Tl(m(e,t,i,n,s,r,!0))}function Hs(e,t,i,n,s){return Tl(ne(e,t,i,n,s,!0))}function vs(e){return e?e.__v_isVNode===!0:!1}function an(e,t){return e.type===t.type&&e.key===t.key}const Vs="__vInternal",El=({key:e})=>e!=null?e:null,ls=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?$e(e)||qe(e)||ge(e)?{i:Xe,r:e,k:t,f:!!i}:e:null);function m(e,t=null,i=null,n=0,s=null,r=e===Ye?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&El(t),ref:t&&ls(t),scopeId:Bs,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Xe};return o?(aa(l,i),r&128&&e.normalize(l)):i&&(l.shapeFlag|=$e(i)?8:16),En>0&&!a&&yt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&yt.push(l),l}const ne=fd;function fd(e,t=null,i=null,n=0,s=null,r=!1){if((!e||e===Xc)&&(e=ni),vs(e)){const o=ji(e,t,!0);return i&&aa(o,i),En>0&&!r&&yt&&(o.shapeFlag&6?yt[yt.indexOf(e)]=o:yt.push(o)),o.patchFlag|=-2,o}if(Td(e)&&(e=e.__vccOpts),t){t=gd(t);let{class:o,style:l}=t;o&&!$e(o)&&(t.class=Vr(o)),Me(l)&&(Jo(l)&&!re(l)&&(l=ze({},l)),t.style=Os(l))}const a=$e(e)?1:Oc(e)?128:dd(e)?64:Me(e)?4:ge(e)?2:0;return m(e,t,i,n,s,a,r,!0)}function gd(e){return e?Jo(e)||Vs in e?ze({},e):e:null}function ji(e,t,i=!1){const{props:n,ref:s,patchFlag:r,children:a}=e,o=t?pd(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&El(o),ref:t&&t.ref?i&&s?re(s)?s.concat(ls(t)):[s,ls(t)]:ls(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ye?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ji(e.ssContent),ssFallback:e.ssFallback&&ji(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function ce(e=" ",t=0){return ne(Us,null,e,t)}function zt(e,t){const i=ne(un,null,e);return i.staticCount=t,i}function gn(e="",t=!1){return t?(ke(),Hs(ni,null,e)):ne(ni,null,e)}function It(e){return e==null||typeof e=="boolean"?ne(ni):re(e)?ne(Ye,null,e.slice()):typeof e=="object"?qt(e):ne(Us,null,String(e))}function qt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ji(e)}function aa(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(re(t))i=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),aa(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!(Vs in t)?t._ctx=Xe:s===3&&Xe&&(Xe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ge(t)?(t={default:t,_ctx:Xe},i=32):(t=String(t),n&64?(i=16,t=[ce(t)]):i=8);e.children=t,e.shapeFlag|=i}function pd(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=Vr([t.class,n.class]));else if(s==="style")t.style=Os([t.style,n.style]);else if(As(s)){const r=t[s],a=n[s];a&&r!==a&&!(re(r)&&r.includes(a))&&(t[s]=r?[].concat(r,a):a)}else s!==""&&(t[s]=n[s])}return t}function Pt(e,t,i,n=null){Ct(e,t,7,[i,n])}const _d=ml();let md=0;function vd(e,t,i){const n=e.type,s=(t?t.appContext:e.appContext)||_d,r={uid:md++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Uh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:yl(n,s),emitsOptions:hl(n,s),emit:null,emitted:null,propsDefaults:Ie,inheritAttrs:n.inheritAttrs,ctx:Ie,data:Ie,props:Ie,attrs:Ie,slots:Ie,refs:Ie,setupState:Ie,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=xc.bind(null,r),e.ce&&e.ce(r),r}let Ve=null;const kl=()=>Ve||Xe;let oa,Ni,za="__VUE_INSTANCE_SETTERS__";(Ni=mr()[za])||(Ni=mr()[za]=[]),Ni.push(e=>Ve=e),oa=e=>{Ni.length>1?Ni.forEach(t=>t(e)):Ni[0](e)};const Ki=e=>{oa(e),e.scope.on()},Ti=()=>{Ve&&Ve.scope.off(),oa(null)};function xl(e){return e.vnode.shapeFlag&4}let kn=!1;function yd(e,t=!1){kn=t;const{props:i,children:n}=e.vnode,s=xl(e);nd(e,i,s,t),ad(e,n);const r=s?bd(e,t):void 0;return kn=!1,r}function bd(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=Qo(new Proxy(e.ctx,Kc));const{setup:n}=i;if(n){const s=e.setupContext=n.length>1?Sd(e):null;Ki(e),qi();const r=ei(n,e,0,[e.props,s]);if(Ji(),Ti(),Ro(r)){if(r.then(Ti,Ti),t)return r.then(a=>{$a(e,a,t)}).catch(a=>{Fs(a,e,0)});e.asyncDep=r}else $a(e,r,t)}else Al(e,t)}function $a(e,t,i){ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Me(t)&&(e.setupState=sl(t)),Al(e,i)}let Xa;function Al(e,t,i){const n=e.type;if(!e.render){if(!t&&Xa&&!n.render){const s=n.template||sa(e).template;if(s){const{isCustomElement:r,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=n,h=ze(ze({isCustomElement:r,delimiters:o},a),l);n.render=Xa(s,h)}}e.render=n.render||St}Ki(e),qi(),Yc(e),Ji(),Ti()}function wd(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,i){return st(e,"get","$attrs"),t[i]}}))}function Sd(e){const t=i=>{e.exposed=i||{}};return{get attrs(){return wd(e)},slots:e.slots,emit:e.emit,expose:t}}function zs(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(sl(Qo(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in dn)return dn[i](e)},has(t,i){return i in t||i in dn}}))}function Cd(e,t=!0){return ge(e)?e.displayName||e.name:e.name||t&&e.__name}function Td(e){return ge(e)&&"__vccOpts"in e}const bt=(e,t)=>bc(e,t,kn);function ja(e,t,i){const n=arguments.length;return n===2?Me(t)&&!re(t)?vs(t)?ne(e,null,[t]):ne(e,t):ne(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&vs(i)&&(i=[i]),ne(e,t,i))}const Ed=Symbol.for("v-scx"),kd=()=>os(Ed),xd="3.3.4",Ad="http://www.w3.org/2000/svg",yi=typeof document<"u"?document:null,Ka=yi&&yi.createElement("template"),Pd={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const s=t?yi.createElementNS(Ad,e):yi.createElement(e,i?{is:i}:void 0);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>yi.createTextNode(e),createComment:e=>yi.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>yi.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,s,r){const a=i?i.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{Ka.innerHTML=n?`<svg>${e}</svg>`:e;const o=Ka.content;if(n){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,i)}return[a?a.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function Id(e,t,i){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function Md(e,t,i){const n=e.style,s=$e(i);if(i&&!s){if(t&&!$e(t))for(const r in t)i[r]==null&&Pr(n,r,"");for(const r in i)Pr(n,r,i[r])}else{const r=n.display;s?t!==i&&(n.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=r)}}const Ya=/\s*!important$/;function Pr(e,t,i){if(re(i))i.forEach(n=>Pr(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=Od(e,t);Ya.test(i)?e.setProperty(Zi(n),i.replace(Ya,""),"important"):e[n]=i}}const Za=["Webkit","Moz","ms"],lr={};function Od(e,t){const i=lr[t];if(i)return i;let n=Dt(t);if(n!=="filter"&&n in e)return lr[t]=n;n=Ms(n);for(let s=0;s<Za.length;s++){const r=Za[s]+n;if(r in e)return lr[t]=r}return t}const qa="http://www.w3.org/1999/xlink";function Dd(e,t,i,n,s){if(n&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(qa,t.slice(6,t.length)):e.setAttributeNS(qa,t,i);else{const r=Bh(t);i==null||r&&!Bo(i)?e.removeAttribute(t):e.setAttribute(t,r?"":i)}}function Ld(e,t,i,n,s,r,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,s,r),e[t]=i==null?"":i;return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){e._value=i;const h=o==="OPTION"?e.getAttribute("value"):e.value,d=i==null?"":i;h!==d&&(e.value=d),i==null&&e.removeAttribute(t);return}let l=!1;if(i===""||i==null){const h=typeof e[t];h==="boolean"?i=Bo(i):i==null&&h==="string"?(i="",l=!0):h==="number"&&(i=0,l=!0)}try{e[t]=i}catch{}l&&e.removeAttribute(t)}function bi(e,t,i,n){e.addEventListener(t,i,n)}function Rd(e,t,i,n){e.removeEventListener(t,i,n)}function Fd(e,t,i,n,s=null){const r=e._vei||(e._vei={}),a=r[t];if(n&&a)a.value=n;else{const[o,l]=Nd(t);if(n){const h=r[t]=Gd(n,s);bi(e,o,h,l)}else a&&(Rd(e,o,a,l),r[t]=void 0)}}const Ja=/(?:Once|Passive|Capture)$/;function Nd(e){let t;if(Ja.test(e)){t={};let n;for(;n=e.match(Ja);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Zi(e.slice(2)),t]}let hr=0;const Bd=Promise.resolve(),Wd=()=>hr||(Bd.then(()=>hr=0),hr=Date.now());function Gd(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;Ct(Ud(n,i.value),t,5,[n])};return i.value=e,i.attached=Wd(),i}function Ud(e,t){if(re(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const Qa=/^on[a-z]/,Hd=(e,t,i,n,s=!1,r,a,o,l)=>{t==="class"?Id(e,n,s):t==="style"?Md(e,i,n):As(t)?Gr(t)||Fd(e,t,i,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Vd(e,t,n,s))?Ld(e,t,n,r,a,o,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Dd(e,t,n,s))};function Vd(e,t,i,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&Qa.test(t)&&ge(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Qa.test(t)&&$e(i)?!1:t in e}function zd(e){const t=kl();if(!t)return;const i=t.ut=(s=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(r=>Mr(r,s))},n=()=>{const s=e(t.proxy);Ir(t.subTree,s),i(s)};Lc(n),Gs(()=>{const s=new MutationObserver(n);s.observe(t.subTree.el.parentNode,{childList:!0}),na(()=>s.disconnect())})}function Ir(e,t){if(e.shapeFlag&128){const i=e.suspense;e=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{Ir(i.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Mr(e.el,t);else if(e.type===Ye)e.children.forEach(i=>Ir(i,t));else if(e.type===un){let{el:i,anchor:n}=e;for(;i&&(Mr(i,t),i!==n);)i=i.nextSibling}}function Mr(e,t){if(e.nodeType===1){const i=e.style;for(const n in t)i.setProperty(`--${n}`,t[n])}}const ys=e=>{const t=e.props["onUpdate:modelValue"]||!1;return re(t)?i=>as(t,i):t};function $d(e){e.target.composing=!0}function eo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Pl={created(e,{modifiers:{lazy:t,trim:i,number:n}},s){e._assign=ys(s);const r=n||s.props&&s.props.type==="number";bi(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;i&&(o=o.trim()),r&&(o=fs(o)),e._assign(o)}),i&&bi(e,"change",()=>{e.value=e.value.trim()}),t||(bi(e,"compositionstart",$d),bi(e,"compositionend",eo),bi(e,"change",eo))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:n,number:s}},r){if(e._assign=ys(r),e.composing||document.activeElement===e&&e.type!=="range"&&(i||n&&e.value.trim()===t||(s||e.type==="number")&&fs(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},Xd={deep:!0,created(e,{value:t,modifiers:{number:i}},n){const s=Ps(t);bi(e,"change",()=>{const r=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>i?fs(bs(a)):bs(a));e._assign(e.multiple?s?new Set(r):r:r[0])}),e._assign=ys(n)},mounted(e,{value:t}){to(e,t)},beforeUpdate(e,t,i){e._assign=ys(i)},updated(e,{value:t}){to(e,t)}};function to(e,t){const i=e.multiple;if(!(i&&!re(t)&&!Ps(t))){for(let n=0,s=e.options.length;n<s;n++){const r=e.options[n],a=bs(r);if(i)re(t)?r.selected=Gh(t,a)>-1:r.selected=t.has(a);else if(Ds(bs(r),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function bs(e){return"_value"in e?e._value:e.value}const jd=ze({patchProp:Hd},Pd);let io;function Kd(){return io||(io=ld(jd))}const Yd=(...e)=>{const t=Kd().createApp(...e),{mount:i}=t;return t.mount=n=>{const s=Zd(n);if(!s)return;const r=t._component;!ge(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const a=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function Zd(e){return $e(e)?document.querySelector(e):e}const qd="/vue-peaks/assets/peaks-logo.72e98b64.svg",Pi=(e,t)=>{const i=e.__vccOpts||e;for(const[n,s]of t)i[n]=s;return i},Jd={},Qd={class:"columns"},eu=m("div",{class:"column"},[m("p",null,[ce(" The "),m("span",{class:"code"},"AudioPeaks"),ce(" component has it's own CSS class, plus each generated pane (overview, zoomview, audio/video element, controls) also has a dedicated CSS class which you can select for your styles. Note however, that you can not style the waveforms themselves this way. ")]),m("p",null," To use the default style also for external or slotted panes, you need to set the corresponding classes yourself. "),m("p",null,"The following selectors are available:")],-1),tu={class:"column"};function iu(e,t){const i=Lt("highlightjs");return ke(),Le("div",Qd,[eu,m("div",tu,[ne(i,{language:"css",code:`div.peaks { 
    /* The div with the whole AudioPeaks component */ }
div.peaks-overview { 
    /* The div with the overview waveform */ }
div.peaks-zoomview { 
    /* The div with the zoom waveform */ }
div.peaks-controls { 
    /* The div with the zoom controls */ }
audio.peaks { 
    /* The audio element, when provided by vue-peaks 
       (in the 'simple' mode) */ }
video.peaks { 
    /* The video element, when provided by vue-peaks 
       (in the 'simple' mode) */ }
div.peaks-overview:empty,
div.peaks-zoomview:empty {       
    /* The overview and zommview pane, respectively, as long as data is loading.
    You can use this to show you own custom progress indication */ }
    `})])])}const nu=Pi(Jd,[["render",iu]]);function Il(e){return Go()?(Vh(e),!0):!1}function ws(e){return typeof e=="function"?e():nl(e)}const su=typeof window<"u"&&typeof document<"u",ru=e=>e!=null,pn=()=>{};function au(e,t){function i(...n){return new Promise((s,r)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(s).catch(r)})}return i}function ou(e,t={}){let i,n,s=pn;const r=o=>{clearTimeout(o),s(),s=pn};return o=>{const l=ws(e),h=ws(t.maxWait);return i&&r(i),l<=0||h!==void 0&&h<=0?(n&&(r(n),n=null),Promise.resolve(o())):new Promise((d,f)=>{s=t.rejectOnCancel?f:d,h&&!n&&(n=setTimeout(()=>{i&&r(i),n=null,d(o())},h)),i=setTimeout(()=>{n&&r(n),n=null,d(o())},l)})}}function lu(e,t=200,i={}){return au(ou(t,i),e)}function _n(e){var t;const i=ws(e);return(t=i==null?void 0:i.$el)!=null?t:i}const la=su?window:void 0;function hu(){const e=Rs(!1);return kl()&&Gs(()=>{e.value=!0}),e}function Ml(e){const t=hu();return bt(()=>(t.value,Boolean(e())))}function cu(e,t,i={}){const{window:n=la,...s}=i;let r;const a=Ml(()=>n&&"ResizeObserver"in n),o=()=>{r&&(r.disconnect(),r=void 0)},l=bt(()=>Array.isArray(e)?e.map(f=>_n(f)):[_n(e)]),h=Ci(l,f=>{if(o(),a.value&&n){r=new ResizeObserver(t);for(const y of f)y&&r.observe(y,s)}},{immediate:!0,flush:"post",deep:!0}),d=()=>{o(),h()};return Il(d),{isSupported:a,stop:d}}function du(e,t,i={}){const{root:n,rootMargin:s="0px",threshold:r=.1,window:a=la,immediate:o=!0}=i,l=Ml(()=>a&&"IntersectionObserver"in a),h=bt(()=>{const _=ws(e);return(Array.isArray(_)?_:[_]).map(_n).filter(ru)});let d=pn;const f=Rs(o),y=l.value?Ci(()=>[h.value,_n(n),f.value],([_,b])=>{if(d(),!f.value||!_.length)return;const v=new IntersectionObserver(t,{root:_n(b),rootMargin:s,threshold:r});_.forEach(A=>A&&v.observe(A)),d=()=>{v.disconnect(),d=pn}},{immediate:o,flush:"post"}):pn,g=()=>{d(),y(),f.value=!1};return Il(g),{isSupported:l,isActive:f,pause(){d(),f.value=!1},resume(){f.value=!0},stop:g}}function uu(e,{window:t=la,scrollTarget:i}={}){const n=Rs(!1);return du(e,([{isIntersecting:s}])=>{n.value=s},{root:i,window:t,threshold:0}),n}var no=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Or={exports:{}},Dr={},Be={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;var t=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof no<"u"?no:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.2.0",isBrowser:i(),isUnminified:/param/.test(function(s){}.toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const n=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})(Be);var je={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=Be;class i{constructor(u=[1,0,0,1,0,0]){this.dirty=!1,this.m=u&&u.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(u){u.m[0]=this.m[0],u.m[1]=this.m[1],u.m[2]=this.m[2],u.m[3]=this.m[3],u.m[4]=this.m[4],u.m[5]=this.m[5]}point(u){var C=this.m;return{x:C[0]*u.x+C[2]*u.y+C[4],y:C[1]*u.x+C[3]*u.y+C[5]}}translate(u,C){return this.m[4]+=this.m[0]*u+this.m[2]*C,this.m[5]+=this.m[1]*u+this.m[3]*C,this}scale(u,C){return this.m[0]*=u,this.m[1]*=u,this.m[2]*=C,this.m[3]*=C,this}rotate(u){var C=Math.cos(u),k=Math.sin(u),F=this.m[0]*C+this.m[2]*k,S=this.m[1]*C+this.m[3]*k,W=this.m[0]*-k+this.m[2]*C,x=this.m[1]*-k+this.m[3]*C;return this.m[0]=F,this.m[1]=S,this.m[2]=W,this.m[3]=x,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(u,C){var k=this.m[0]+this.m[2]*C,F=this.m[1]+this.m[3]*C,S=this.m[2]+this.m[0]*u,W=this.m[3]+this.m[1]*u;return this.m[0]=k,this.m[1]=F,this.m[2]=S,this.m[3]=W,this}multiply(u){var C=this.m[0]*u.m[0]+this.m[2]*u.m[1],k=this.m[1]*u.m[0]+this.m[3]*u.m[1],F=this.m[0]*u.m[2]+this.m[2]*u.m[3],S=this.m[1]*u.m[2]+this.m[3]*u.m[3],W=this.m[0]*u.m[4]+this.m[2]*u.m[5]+this.m[4],x=this.m[1]*u.m[4]+this.m[3]*u.m[5]+this.m[5];return this.m[0]=C,this.m[1]=k,this.m[2]=F,this.m[3]=S,this.m[4]=W,this.m[5]=x,this}invert(){var u=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*u,k=-this.m[1]*u,F=-this.m[2]*u,S=this.m[0]*u,W=u*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),x=u*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=k,this.m[2]=F,this.m[3]=S,this.m[4]=W,this.m[5]=x,this}getMatrix(){return this.m}decompose(){var u=this.m[0],C=this.m[1],k=this.m[2],F=this.m[3],S=this.m[4],W=this.m[5],x=u*F-C*k;let N={x:S,y:W,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(u!=0||C!=0){var Y=Math.sqrt(u*u+C*C);N.rotation=C>0?Math.acos(u/Y):-Math.acos(u/Y),N.scaleX=Y,N.scaleY=x/Y,N.skewX=(u*k+C*F)/x,N.skewY=0}else if(k!=0||F!=0){var X=Math.sqrt(k*k+F*F);N.rotation=Math.PI/2-(F>0?Math.acos(-k/X):-Math.acos(k/X)),N.scaleX=x/X,N.scaleY=X,N.skewX=0,N.skewY=(u*k+C*F)/x}return N.rotation=e.Util._getRotation(N.rotation),N}}e.Transform=i;var n="[object Array]",s="[object Number]",r="[object String]",a="[object Boolean]",o=Math.PI/180,l=180/Math.PI,h="#",d="",f="0",y="Konva warning: ",g="Konva error: ",_="rgb(",b={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,A=[];const E=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(c){setTimeout(c,60)};e.Util={_isElement(c){return!!(c&&c.nodeType==1)},_isFunction(c){return!!(c&&c.constructor&&c.call&&c.apply)},_isPlainObject(c){return!!c&&c.constructor===Object},_isArray(c){return Object.prototype.toString.call(c)===n},_isNumber(c){return Object.prototype.toString.call(c)===s&&!isNaN(c)&&isFinite(c)},_isString(c){return Object.prototype.toString.call(c)===r},_isBoolean(c){return Object.prototype.toString.call(c)===a},isObject(c){return c instanceof Object},isValidSelector(c){if(typeof c!="string")return!1;var u=c[0];return u==="#"||u==="."||u===u.toUpperCase()},_sign(c){return c===0||c>0?1:-1},requestAnimFrame(c){A.push(c),A.length===1&&E(function(){const u=A;A=[],u.forEach(function(C){C()})})},createCanvasElement(){var c=document.createElement("canvas");try{c.style=c.style||{}}catch{}return c},createImageElement(){return document.createElement("img")},_isInDocument(c){for(;c=c.parentNode;)if(c==document)return!0;return!1},_urlToImage(c,u){var C=e.Util.createImageElement();C.onload=function(){u(C)},C.src=c},_rgbToHex(c,u,C){return((1<<24)+(c<<16)+(u<<8)+C).toString(16).slice(1)},_hexToRgb(c){c=c.replace(h,d);var u=parseInt(c,16);return{r:u>>16&255,g:u>>8&255,b:u&255}},getRandomColor(){for(var c=(Math.random()*16777215<<0).toString(16);c.length<6;)c=f+c;return h+c},getRGB(c){var u;return c in b?(u=b[c],{r:u[0],g:u[1],b:u[2]}):c[0]===h?this._hexToRgb(c.substring(1)):c.substr(0,4)===_?(u=v.exec(c.replace(/ /g,"")),{r:parseInt(u[1],10),g:parseInt(u[2],10),b:parseInt(u[3],10)}):{r:0,g:0,b:0}},colorToRGBA(c){return c=c||"black",e.Util._namedColorToRBA(c)||e.Util._hex3ColorToRGBA(c)||e.Util._hex4ColorToRGBA(c)||e.Util._hex6ColorToRGBA(c)||e.Util._hex8ColorToRGBA(c)||e.Util._rgbColorToRGBA(c)||e.Util._rgbaColorToRGBA(c)||e.Util._hslColorToRGBA(c)},_namedColorToRBA(c){var u=b[c.toLowerCase()];return u?{r:u[0],g:u[1],b:u[2],a:1}:null},_rgbColorToRGBA(c){if(c.indexOf("rgb(")===0){c=c.match(/rgb\(([^)]+)\)/)[1];var u=c.split(/ *, */).map(Number);return{r:u[0],g:u[1],b:u[2],a:1}}},_rgbaColorToRGBA(c){if(c.indexOf("rgba(")===0){c=c.match(/rgba\(([^)]+)\)/)[1];var u=c.split(/ *, */).map((C,k)=>C.slice(-1)==="%"?k===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:u[0],g:u[1],b:u[2],a:u[3]}}},_hex8ColorToRGBA(c){if(c[0]==="#"&&c.length===9)return{r:parseInt(c.slice(1,3),16),g:parseInt(c.slice(3,5),16),b:parseInt(c.slice(5,7),16),a:parseInt(c.slice(7,9),16)/255}},_hex6ColorToRGBA(c){if(c[0]==="#"&&c.length===7)return{r:parseInt(c.slice(1,3),16),g:parseInt(c.slice(3,5),16),b:parseInt(c.slice(5,7),16),a:1}},_hex4ColorToRGBA(c){if(c[0]==="#"&&c.length===5)return{r:parseInt(c[1]+c[1],16),g:parseInt(c[2]+c[2],16),b:parseInt(c[3]+c[3],16),a:parseInt(c[4]+c[4],16)/255}},_hex3ColorToRGBA(c){if(c[0]==="#"&&c.length===4)return{r:parseInt(c[1]+c[1],16),g:parseInt(c[2]+c[2],16),b:parseInt(c[3]+c[3],16),a:1}},_hslColorToRGBA(c){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(c)){const[u,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(c),k=Number(C[0])/360,F=Number(C[1])/100,S=Number(C[2])/100;let W,x,N;if(F===0)return N=S*255,{r:Math.round(N),g:Math.round(N),b:Math.round(N),a:1};S<.5?W=S*(1+F):W=S+F-S*F;const Y=2*S-W,X=[0,0,0];for(let te=0;te<3;te++)x=k+1/3*-(te-1),x<0&&x++,x>1&&x--,6*x<1?N=Y+(W-Y)*6*x:2*x<1?N=W:3*x<2?N=Y+(W-Y)*(2/3-x)*6:N=Y,X[te]=N*255;return{r:Math.round(X[0]),g:Math.round(X[1]),b:Math.round(X[2]),a:1}}},haveIntersection(c,u){return!(u.x>c.x+c.width||u.x+u.width<c.x||u.y>c.y+c.height||u.y+u.height<c.y)},cloneObject(c){var u={};for(var C in c)this._isPlainObject(c[C])?u[C]=this.cloneObject(c[C]):this._isArray(c[C])?u[C]=this.cloneArray(c[C]):u[C]=c[C];return u},cloneArray(c){return c.slice(0)},degToRad(c){return c*o},radToDeg(c){return c*l},_degToRad(c){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(c)},_radToDeg(c){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(c)},_getRotation(c){return t.Konva.angleDeg?e.Util.radToDeg(c):c},_capitalize(c){return c.charAt(0).toUpperCase()+c.slice(1)},throw(c){throw new Error(g+c)},error(c){console.error(g+c)},warn(c){!t.Konva.showWarnings||console.warn(y+c)},each(c,u){for(var C in c)u(C,c[C])},_inRange(c,u,C){return u<=c&&c<C},_getProjectionToSegment(c,u,C,k,F,S){var W,x,N,Y=(c-C)*(c-C)+(u-k)*(u-k);if(Y==0)W=c,x=u,N=(F-C)*(F-C)+(S-k)*(S-k);else{var X=((F-c)*(C-c)+(S-u)*(k-u))/Y;X<0?(W=c,x=u,N=(c-F)*(c-F)+(u-S)*(u-S)):X>1?(W=C,x=k,N=(C-F)*(C-F)+(k-S)*(k-S)):(W=c+X*(C-c),x=u+X*(k-u),N=(W-F)*(W-F)+(x-S)*(x-S))}return[W,x,N]},_getProjectionToLine(c,u,C){var k=e.Util.cloneObject(c),F=Number.MAX_VALUE;return u.forEach(function(S,W){if(!(!C&&W===u.length-1)){var x=u[(W+1)%u.length],N=e.Util._getProjectionToSegment(S.x,S.y,x.x,x.y,c.x,c.y),Y=N[0],X=N[1],te=N[2];te<F&&(k.x=Y,k.y=X,F=te)}}),k},_prepareArrayForTween(c,u,C){var k,F=[],S=[];if(c.length>u.length){var W=u;u=c,c=W}for(k=0;k<c.length;k+=2)F.push({x:c[k],y:c[k+1]});for(k=0;k<u.length;k+=2)S.push({x:u[k],y:u[k+1]});var x=[];return S.forEach(function(N){var Y=e.Util._getProjectionToLine(N,F,C);x.push(Y.x),x.push(Y.y)}),x},_prepareToStringify(c){var u;c.visitedByCircularReferenceRemoval=!0;for(var C in c)if(!!(c.hasOwnProperty(C)&&c[C]&&typeof c[C]=="object")){if(u=Object.getOwnPropertyDescriptor(c,C),c[C].visitedByCircularReferenceRemoval||e.Util._isElement(c[C]))if(u.configurable)delete c[C];else return null;else if(e.Util._prepareToStringify(c[C])===null)if(u.configurable)delete c[C];else return null}return delete c.visitedByCircularReferenceRemoval,c},_assign(c,u){for(var C in u)c[C]=u[C];return c},_getFirstPointerId(c){return c.touches?c.changedTouches[0].identifier:c.pointerId||999},releaseCanvas(...c){!t.Konva.releaseCanvasOnDestroy||c.forEach(u=>{u.width=0,u.height=0})},drawRoundedRectPath(c,u,C,k){let F=0,S=0,W=0,x=0;typeof k=="number"?F=S=W=x=Math.min(k,u/2,C/2):(F=Math.min(k[0]||0,u/2,C/2),S=Math.min(k[1]||0,u/2,C/2),x=Math.min(k[2]||0,u/2,C/2),W=Math.min(k[3]||0,u/2,C/2)),c.moveTo(F,0),c.lineTo(u-S,0),c.arc(u-S,S,S,Math.PI*3/2,0,!1),c.lineTo(u,C-x),c.arc(u-x,C-x,x,0,Math.PI/2,!1),c.lineTo(W,C),c.arc(W,C-W,W,Math.PI/2,Math.PI,!1),c.lineTo(0,F),c.arc(F,F,F,Math.PI,Math.PI*3/2,!1)}}})(je);var oi={},Rt={},be={};Object.defineProperty(be,"__esModule",{value:!0});be.getComponentValidator=be.getBooleanValidator=be.getNumberArrayValidator=be.getFunctionValidator=be.getStringOrGradientValidator=be.getStringValidator=be.getNumberOrAutoValidator=be.getNumberOrArrayOfNumbersValidator=be.getNumberValidator=be.alphaComponent=be.RGBComponent=void 0;const $t=Be,Ne=je;function Xt(e){return Ne.Util._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||Ne.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function gu(e){return e>255?255:e<0?0:Math.round(e)}be.RGBComponent=gu;function pu(e){return e>1?1:e<1e-4?1e-4:e}be.alphaComponent=pu;function _u(){if($t.Konva.isUnminified)return function(e,t){return Ne.Util._isNumber(e)||Ne.Util.warn(Xt(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}be.getNumberValidator=_u;function mu(e){if($t.Konva.isUnminified)return function(t,i){let n=Ne.Util._isNumber(t),s=Ne.Util._isArray(t)&&t.length==e;return!n&&!s&&Ne.Util.warn(Xt(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}}be.getNumberOrArrayOfNumbersValidator=mu;function vu(){if($t.Konva.isUnminified)return function(e,t){var i=Ne.Util._isNumber(e),n=e==="auto";return i||n||Ne.Util.warn(Xt(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}be.getNumberOrAutoValidator=vu;function yu(){if($t.Konva.isUnminified)return function(e,t){return Ne.Util._isString(e)||Ne.Util.warn(Xt(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}be.getStringValidator=yu;function bu(){if($t.Konva.isUnminified)return function(e,t){const i=Ne.Util._isString(e),n=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return i||n||Ne.Util.warn(Xt(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}be.getStringOrGradientValidator=bu;function wu(){if($t.Konva.isUnminified)return function(e,t){return Ne.Util._isFunction(e)||Ne.Util.warn(Xt(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}}be.getFunctionValidator=wu;function Su(){if($t.Konva.isUnminified)return function(e,t){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&e instanceof i||(Ne.Util._isArray(e)?e.forEach(function(n){Ne.Util._isNumber(n)||Ne.Util.warn('"'+t+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):Ne.Util.warn(Xt(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}be.getNumberArrayValidator=Su;function Cu(){if($t.Konva.isUnminified)return function(e,t){var i=e===!0||e===!1;return i||Ne.Util.warn(Xt(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}be.getBooleanValidator=Cu;function Tu(e){if($t.Konva.isUnminified)return function(t,i){return t==null||Ne.Util.isObject(t)||Ne.Util.warn(Xt(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}be.getComponentValidator=Tu;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=je,i=be;var n="get",s="set";e.Factory={addGetterSetter(r,a,o,l,h){e.Factory.addGetter(r,a,o),e.Factory.addSetter(r,a,l,h),e.Factory.addOverloadedGetterSetter(r,a)},addGetter(r,a,o){var l=n+t.Util._capitalize(a);r.prototype[l]=r.prototype[l]||function(){var h=this.attrs[a];return h===void 0?o:h}},addSetter(r,a,o,l){var h=s+t.Util._capitalize(a);r.prototype[h]||e.Factory.overWriteSetter(r,a,o,l)},overWriteSetter(r,a,o,l){var h=s+t.Util._capitalize(a);r.prototype[h]=function(d){return o&&d!==void 0&&d!==null&&(d=o.call(this,d,a)),this._setAttr(a,d),l&&l.call(this),this}},addComponentsGetterSetter(r,a,o,l,h){var d=o.length,f=t.Util._capitalize,y=n+f(a),g=s+f(a),_,b;r.prototype[y]=function(){var A={};for(_=0;_<d;_++)b=o[_],A[b]=this.getAttr(a+f(b));return A};var v=(0,i.getComponentValidator)(o);r.prototype[g]=function(A){var E=this.attrs[a],c;l&&(A=l.call(this,A)),v&&v.call(this,A,a);for(c in A)!A.hasOwnProperty(c)||this._setAttr(a+f(c),A[c]);return A||o.forEach(u=>{this._setAttr(a+f(u),void 0)}),this._fireChangeEvent(a,E,A),h&&h.call(this),this},e.Factory.addOverloadedGetterSetter(r,a)},addOverloadedGetterSetter(r,a){var o=t.Util._capitalize(a),l=s+o,h=n+o;r.prototype[a]=function(){return arguments.length?(this[l](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(r,a,o,l){t.Util.error("Adding deprecated "+a);var h=n+t.Util._capitalize(a),d=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[h]=function(){t.Util.error(d);var f=this.attrs[a];return f===void 0?o:f},e.Factory.addSetter(r,a,l,function(){t.Util.error(d)}),e.Factory.addOverloadedGetterSetter(r,a)},backCompat(r,a){t.Util.each(a,function(o,l){var h=r.prototype[l],d=n+t.Util._capitalize(o),f=s+t.Util._capitalize(o);function y(){h.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}r.prototype[o]=y,r.prototype[d]=y,r.prototype[f]=y})},afterSetFilter(){this._filterUpToDate=!1}}})(Rt);var Tt={},Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.HitContext=Ut.SceneContext=Ut.Context=void 0;const Ol=je,Eu=Be;function ku(e){var t=[],i=e.length,n=Ol.Util,s,r;for(s=0;s<i;s++)r=e[s],n._isNumber(r)?r=Math.round(r*1e3)/1e3:n._isString(r)||(r=r+""),t.push(r);return t}var so=",",xu="(",Au=")",Pu="([",Iu="])",Mu=";",Ou="()",Du="=",ro=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Lu=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Ru=100;class $s{constructor(t){this.canvas=t,Eu.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,i){var n=this.traceArr,s=n.length,r="",a,o,l,h;for(a=0;a<s;a++)o=n[a],l=o.method,l?(h=o.args,r+=l,t?r+=Ou:Ol.Util._isArray(h[0])?r+=Pu+h.join(so)+Iu:(i&&(h=h.map(d=>typeof d=="number"?Math.floor(d):d)),r+=xu+h.join(so)+Au)):(r+=o.property,t||(r+=Du+o.val)),r+=Mu;return r}clearTrace(){this.traceArr=[]}_trace(t){var i=this.traceArr,n;i.push(t),n=i.length,n>=Ru&&i.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var i=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(t){const i=t.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(t){var i=t.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(t){const i=t.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(t,i){this._context[t]=i}arc(t,i,n,s,r,a){this._context.arc(t,i,n,s,r,a)}arcTo(t,i,n,s,r){this._context.arcTo(t,i,n,s,r)}beginPath(){this._context.beginPath()}bezierCurveTo(t,i,n,s,r,a){this._context.bezierCurveTo(t,i,n,s,r,a)}clearRect(t,i,n,s){this._context.clearRect(t,i,n,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,i){var n=arguments;if(n.length===2)return this._context.createImageData(t,i);if(n.length===1)return this._context.createImageData(t)}createLinearGradient(t,i,n,s){return this._context.createLinearGradient(t,i,n,s)}createPattern(t,i){return this._context.createPattern(t,i)}createRadialGradient(t,i,n,s,r,a){return this._context.createRadialGradient(t,i,n,s,r,a)}drawImage(t,i,n,s,r,a,o,l,h){var d=arguments,f=this._context;d.length===3?f.drawImage(t,i,n):d.length===5?f.drawImage(t,i,n,s,r):d.length===9&&f.drawImage(t,i,n,s,r,a,o,l,h)}ellipse(t,i,n,s,r,a,o,l){this._context.ellipse(t,i,n,s,r,a,o,l)}isPointInPath(t,i,n,s){return n?this._context.isPointInPath(n,t,i,s):this._context.isPointInPath(t,i,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,i,n,s){this._context.fillRect(t,i,n,s)}strokeRect(t,i,n,s){this._context.strokeRect(t,i,n,s)}fillText(t,i,n,s){s?this._context.fillText(t,i,n,s):this._context.fillText(t,i,n)}measureText(t){return this._context.measureText(t)}getImageData(t,i,n,s){return this._context.getImageData(t,i,n,s)}lineTo(t,i){this._context.lineTo(t,i)}moveTo(t,i){this._context.moveTo(t,i)}rect(t,i,n,s){this._context.rect(t,i,n,s)}putImageData(t,i,n){this._context.putImageData(t,i,n)}quadraticCurveTo(t,i,n,s){this._context.quadraticCurveTo(t,i,n,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,i){this._context.scale(t,i)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,i,n,s,r,a){this._context.setTransform(t,i,n,s,r,a)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,i,n,s){this._context.strokeText(t,i,n,s)}transform(t,i,n,s,r,a){this._context.transform(t,i,n,s,r,a)}translate(t,i){this._context.translate(t,i)}_enableTrace(){var t=this,i=ro.length,n=this.setAttr,s,r,a=function(o){var l=t[o],h;t[o]=function(){return r=ku(Array.prototype.slice.call(arguments,0)),h=l.apply(t,arguments),t._trace({method:o,args:r}),h}};for(s=0;s<i;s++)a(ro[s]);t.setAttr=function(){n.apply(t,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:o,val:l})}}_applyGlobalCompositeOperation(t){const i=t.attrs.globalCompositeOperation;var n=!i||i==="source-over";n||this.setAttr("globalCompositeOperation",i)}}Ut.Context=$s;Lu.forEach(function(e){Object.defineProperty($s.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class Fu extends $s{constructor(t,{willReadFrequently:i=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:i})}_fillColor(t){var i=t.fill();this.setAttr("fillStyle",i),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var i=t._getLinearGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fillRadialGradient(t){const i=t._getRadialGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fill(t){const i=t.fill(),n=t.getFillPriority();if(i&&n==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&n==="pattern"){this._fillPattern(t);return}const r=t.getFillLinearGradientColorStops();if(r&&n==="linear-gradient"){this._fillLinearGradient(t);return}const a=t.getFillRadialGradientColorStops();if(a&&n==="radial-gradient"){this._fillRadialGradient(t);return}i?this._fillColor(t):s?this._fillPattern(t):r?this._fillLinearGradient(t):a&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const i=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(i.x,i.y,n.x,n.y);if(s){for(var a=0;a<s.length;a+=2)r.addColorStop(s[a],s[a+1]);this.setAttr("strokeStyle",r)}}_stroke(t){var i=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();var s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var r=t.getStrokeLinearGradientColorStops();r?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}_applyShadow(t){var i,n,s,r=(i=t.getShadowRGBA())!==null&&i!==void 0?i:"black",a=(n=t.getShadowBlur())!==null&&n!==void 0?n:5,o=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},l=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),d=l.x*h,f=l.y*h;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",a*Math.min(Math.abs(d),Math.abs(f))),this.setAttr("shadowOffsetX",o.x*d),this.setAttr("shadowOffsetY",o.y*f)}}Ut.SceneContext=Fu;class Nu extends $s{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const r=t.getStrokeScaleEnabled();if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t);var n=t.hitStrokeWidth(),s=n==="auto"?t.strokeWidth():n;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),r||this.restore()}}}Ut.HitContext=Nu;Object.defineProperty(Tt,"__esModule",{value:!0});Tt.HitCanvas=Tt.SceneCanvas=Tt.Canvas=void 0;const Ss=je,Dl=Ut,Ll=Be,Bu=Rt,Wu=be;var qn;function Gu(){if(qn)return qn;var e=Ss.Util.createCanvasElement(),t=e.getContext("2d");return qn=function(){var i=Ll.Konva._global.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/n}(),Ss.Util.releaseCanvas(e),qn}class Xs{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var i=t||{},n=i.pixelRatio||Ll.Konva.pixelRatio||Gu();this.pixelRatio=n,this._canvas=Ss.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var i=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var i=this.pixelRatio,n=this.getContext()._context;n.scale(i,i)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var i=this.pixelRatio,n=this.getContext()._context;n.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,i){this.setWidth(t||0),this.setHeight(i||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch{try{return this._canvas.toDataURL()}catch(s){return Ss.Util.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Tt.Canvas=Xs;Bu.Factory.addGetterSetter(Xs,"pixelRatio",void 0,(0,Wu.getNumberValidator)());class Uu extends Xs{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new Dl.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}Tt.SceneCanvas=Uu;class Hu extends Xs{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new Dl.HitContext(this),this.setSize(t.width,t.height)}}Tt.HitCanvas=Hu;var js={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Be,i=je;e.DD={get isDragging(){var n=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){var n;return e.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];e.DD._dragElements.forEach((r,a)=>{const{node:o}=r,l=o.getStage();l.setPointersPositions(n),r.pointerId===void 0&&(r.pointerId=i.Util._getFirstPointerId(n));const h=l._changedPointerPositions.find(y=>y.id===r.pointerId);if(!!h){if(r.dragStatus!=="dragging"){var d=o.dragDistance(),f=Math.max(Math.abs(h.x-r.startPointerPos.x),Math.abs(h.y-r.startPointerPos.y));if(f<d||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,r),s.push(o)}}),s.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:n},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(r=>{const{node:a}=r,o=a.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(d=>d.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,r.dragStatus="stopped");const h=r.node.getLayer()||r.node instanceof t.Konva.Stage&&r.node;h&&s.indexOf(h)===-1&&s.push(h)}),s.forEach(r=>{r.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((s,r)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(r)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))})(js);Object.defineProperty(oi,"__esModule",{value:!0});oi.Node=void 0;const _e=je,Dn=Rt,Jn=Tt,_i=Be,ut=js,We=be;var hs="absoluteOpacity",Qn="allEventListeners",Wt="absoluteTransform",ao="absoluteScale",mi="canvas",Vu="Change",zu="children",$u="konva",Lr="listening",oo="mouseenter",lo="mouseleave",ho="set",co="Shape",cs=" ",uo="stage",Zt="transform",Xu="Stage",Rr="visible",ju=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(cs);let Ku=1;class he{constructor(t){this._id=Ku++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Zt||t===Wt)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,i){var n=this._cache.get(t),s=t===Zt||t===Wt,r=n===void 0||s&&n.dirty===!0;return r&&(n=i.call(this),this._cache.set(t,n)),n}_calculate(t,i,n){if(!this._attachedDepsListeners.get(t)){const s=i.map(r=>r+"Change.konva").join(cs);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}_getCanvasCache(){return this._cache.get(mi)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Wt&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(mi)){const{scene:t,filter:i,hit:n}=this._cache.get(mi);_e.Util.releaseCanvas(t,i,n),this._cache.delete(mi)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var i=t||{},n={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var s=Math.ceil(i.width||n.width),r=Math.ceil(i.height||n.height),a=i.pixelRatio,o=i.x===void 0?Math.floor(n.x):i.x,l=i.y===void 0?Math.floor(n.y):i.y,h=i.offset||0,d=i.drawBorder||!1,f=i.hitCanvasPixelRatio||1;if(!s||!r){_e.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}s+=h*2+1,r+=h*2+1,o-=h,l-=h;var y=new Jn.SceneCanvas({pixelRatio:a,width:s,height:r}),g=new Jn.SceneCanvas({pixelRatio:a,width:0,height:0,willReadFrequently:!0}),_=new Jn.HitCanvas({pixelRatio:f,width:s,height:r}),b=y.getContext(),v=_.getContext();return _.isCache=!0,y.isCache=!0,this._cache.delete(mi),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(y.getContext()._context.imageSmoothingEnabled=!1,g.getContext()._context.imageSmoothingEnabled=!1),b.save(),v.save(),b.translate(-o,-l),v.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(hs),this._clearSelfAndDescendantCache(ao),this.drawScene(y,this),this.drawHit(_,this),this._isUnderCache=!1,b.restore(),v.restore(),d&&(b.save(),b.beginPath(),b.rect(0,0,s,r),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(mi,{scene:y,filter:g,hit:_,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(mi)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,i){var n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s,r,a,o,l=this.getAbsoluteTransform(i);return n.forEach(function(h){var d=l.point(h);s===void 0&&(s=a=d.x,r=o=d.y),s=Math.min(s,d.x),r=Math.min(r,d.y),a=Math.max(a,d.x),o=Math.max(o,d.y)}),{x:s,y:r,width:a-s,height:o-r}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();t.translate(i.x,i.y);var n=this._getCachedSceneCanvas(),s=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/s,n.height/s),t.restore()}_drawCachedHitCanvas(t){var i=this._getCanvasCache(),n=i.hit;t.save(),t.translate(i.x,i.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t=this.filters(),i=this._getCanvasCache(),n=i.scene,s=i.filter,r=s.getContext(),a,o,l,h;if(t){if(!this._filterUpToDate){var d=n.pixelRatio;s.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio);try{for(a=t.length,r.clear(),r.drawImage(n._canvas,0,0,n.getWidth()/d,n.getHeight()/d),o=r.getImageData(0,0,s.getWidth(),s.getHeight()),l=0;l<a;l++){if(h=t[l],typeof h!="function"){_e.Util.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),r.putImageData(o,0,0)}}catch(f){_e.Util.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return n}on(t,i){if(this._cache&&this._cache.delete(Qn),arguments.length===3)return this._delegate.apply(this,arguments);var n=t.split(cs),s=n.length,r,a,o,l,h;for(r=0;r<s;r++)a=n[r],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:i});return this}off(t,i){var n=(t||"").split(cs),s=n.length,r,a,o,l,h,d;if(this._cache&&this._cache.delete(Qn),!t)for(a in this.eventListeners)this._off(a);for(r=0;r<s;r++)if(o=n[r],l=o.split("."),h=l[0],d=l[1],h)this.eventListeners[h]&&this._off(h,d,i);else for(a in this.eventListeners)this._off(a,d,i);return this}dispatchEvent(t){var i={target:this,type:t.type,evt:t};return this.fire(t.type,i),this}addEventListener(t,i){return this.on(t,function(n){i.call(this,n.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,i,n){var s=this;this.on(t,function(r){for(var a=r.target.findAncestors(i,!0,s),o=0;o<a.length;o++)r=_e.Util.cloneObject(r),r.currentTarget=a[o],n.call(a[o],r)})}remove(){return this.isDragging()&&this.stopDrag(),ut.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Wt),this._clearSelfAndDescendantCache(hs),this._clearSelfAndDescendantCache(ao),this._clearSelfAndDescendantCache(uo),this._clearSelfAndDescendantCache(Rr),this._clearSelfAndDescendantCache(Lr)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){var i="get"+_e.Util._capitalize(t);return _e.Util._isFunction(this[i])?this[i]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),i=[];t;)i.push(t),t=t.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var i,n;if(!t)return this;for(i in t)i!==zu&&(n=ho+_e.Util._capitalize(i),_e.Util._isFunction(this[n])?this[n](t[i]):this._setAttr(i,t[i]))}),this}isListening(){return this._getCache(Lr,this._isListening)}_isListening(t){if(!this.listening())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isListening(t):!0}isVisible(){return this._getCache(Rr,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isVisible(t):!0}shouldDrawHit(t,i=!1){if(t)return this._isVisible(t)&&this._isListening(t);var n=this.getLayer(),s=!1;ut.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===n)&&(s=!0)});var r=!i&&!_i.Konva.hitOnDragEnabled&&s;return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t=this.getDepth(),i=this,n=0,s,r,a,o;function l(h){for(s=[],r=h.length,a=0;a<r;a++)o=h[a],n++,o.nodeType!==co&&(s=s.concat(o.getChildren().slice())),o._id===i._id&&(a=r);s.length>0&&s[0].getDepth()<=t&&l(s)}return i.nodeType!==Xu&&l(i.getStage().getChildren()),n}getDepth(){for(var t=0,i=this.parent;i;)t++,i=i.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Zt),this._clearSelfAndDescendantCache(Wt)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(t)}getAbsolutePosition(t){let i=!1,n=this.parent;for(;n;){if(n.isCached()){i=!0;break}n=n.parent}i&&!t&&(t=!0);var s=this.getAbsoluteTransform(t).getMatrix(),r=new _e.Transform,a=this.offset();return r.m=s.slice(),r.translate(a.x,a.y),r.getTranslation()}setAbsolutePosition(t){var i=this._clearTransform();this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,this._clearCache(Zt);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(t.x,t.y),t={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(i),this.setPosition({x:t.x,y:t.y}),this._clearCache(Zt),this._clearSelfAndDescendantCache(Wt),this}_setTransform(t){var i;for(i in t)this.attrs[i]=t[i]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var i=t.x,n=t.y,s=this.x(),r=this.y();return i!==void 0&&(s+=i),n!==void 0&&(r+=n),this.setPosition({x:s,y:r}),this}_eachAncestorReverse(t,i){var n=[],s=this.getParent(),r,a;if(!(i&&i._id===this._id)){for(n.unshift(this);s&&(!i||s._id!==i._id);)n.unshift(s),s=s.parent;for(r=n.length,a=0;a<r;a++)t(n[a])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return _e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return _e.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return _e.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return _e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return _e.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&_e.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(hs,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),i=this.getParent();return i&&!i._isUnderCache&&(t*=i.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t={},i=this.getAttrs(),n,s,r,a,o;t.attrs={};for(n in i)s=i[n],o=_e.Util.isObject(s)&&!_e.Util._isPlainObject(s)&&!_e.Util._isArray(s),!o&&(r=typeof this[n]=="function"&&this[n],delete i[n],a=r?r.call(this):null,i[n]=s,a!==s&&(t.attrs[n]=s));return t.className=this.getClassName(),_e.Util._prepareToStringify(t)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,i,n){var s=[];i&&this._isMatch(t)&&s.push(this);for(var r=this.parent;r;){if(r===n)return s;r._isMatch(t)&&s.push(r),r=r.parent}return s}isAncestorOf(t){return!1}findAncestor(t,i,n){return this.findAncestors(t,i,n)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);var i=t.replace(/ /g,"").split(","),n=i.length,s,r;for(s=0;s<n;s++)if(r=i[s],_e.Util.isValidSelector(r)||(_e.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),_e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),_e.Util.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(uo,this._getStage)}_getStage(){var t=this.getParent();if(t)return t.getStage()}fire(t,i={},n){return i.target=i.target||this,n?this._fireAndBubble(t,i):this._fire(t,i),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Wt,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var i;if(t)return i=new _e.Transform,this._eachAncestorReverse(function(s){var r=s.transformsEnabled();r==="all"?i.multiply(s.getTransform()):r==="position"&&i.translate(s.x()-s.offsetX(),s.y()-s.offsetY())},t),i;i=this._cache.get(Wt)||new _e.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var n=this.transformsEnabled();if(n==="all")i.multiply(this.getTransform());else if(n==="position"){const s=this.attrs.x||0,r=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;i.translate(s-a,r-o)}return i.dirty=!1,i}getAbsoluteScale(t){for(var i=this;i;)i._isUnderCache&&(t=i),i=i.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Zt,this._getTransform)}_getTransform(){var t,i,n=this._cache.get(Zt)||new _e.Transform;n.reset();var s=this.x(),r=this.y(),a=_i.Konva.getAngle(this.rotation()),o=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,d=this.attrs.skewY||0,f=this.attrs.offsetX||0,y=this.attrs.offsetY||0;return(s!==0||r!==0)&&n.translate(s,r),a!==0&&n.rotate(a),(h!==0||d!==0)&&n.skew(h,d),(o!==1||l!==1)&&n.scale(o,l),(f!==0||y!==0)&&n.translate(-1*f,-1*y),n.dirty=!1,n}clone(t){var i=_e.Util.cloneObject(this.attrs),n,s,r,a,o;for(n in t)i[n]=t[n];var l=new this.constructor(i);for(n in this.eventListeners)for(s=this.eventListeners[n],r=s.length,a=0;a<r;a++)o=s[a],o.name.indexOf($u)<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(o));return l}_toKonvaCanvas(t){t=t||{};var i=this.getClientRect(),n=this.getStage(),s=t.x!==void 0?t.x:Math.floor(i.x),r=t.y!==void 0?t.y:Math.floor(i.y),a=t.pixelRatio||1,o=new Jn.SceneCanvas({width:t.width||Math.ceil(i.width)||(n?n.width():0),height:t.height||Math.ceil(i.height)||(n?n.height():0),pixelRatio:a}),l=o.getContext();return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(s||r)&&l.translate(-1*s,-1*r),this.drawScene(o),l.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};var i=t.mimeType||null,n=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(i,n);return t.callback&&t.callback(s),s}toImage(t){return new Promise((i,n)=>{try{const s=t==null?void 0:t.callback;s&&delete t.callback,_e.Util._urlToImage(this.toDataURL(t),function(r){i(r),s==null||s(r)})}catch(s){n(s)}})}toBlob(t){return new Promise((i,n)=>{try{const s=t==null?void 0:t.callback;s&&delete t.callback,this.toCanvas(t).toBlob(r=>{i(r),s==null||s(r)})}catch(s){n(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():_i.Konva.dragDistance}_off(t,i,n){var s=this.eventListeners[t],r,a,o;for(r=0;r<s.length;r++)if(a=s[r].name,o=s[r].handler,(a!=="konva"||i==="konva")&&(!i||a===i)&&(!n||n===o)){if(s.splice(r,1),s.length===0){delete this.eventListeners[t];break}r--}}_fireChangeEvent(t,i,n){this._fire(t+Vu,{oldVal:i,newVal:n})}addName(t){if(!this.hasName(t)){var i=this.name(),n=i?i+" "+t:t;this.name(n)}return this}hasName(t){if(!t)return!1;const i=this.name();if(!i)return!1;var n=(i||"").split(/\s/g);return n.indexOf(t)!==-1}removeName(t){var i=(this.name()||"").split(/\s/g),n=i.indexOf(t);return n!==-1&&(i.splice(n,1),this.name(i.join(" "))),this}setAttr(t,i){var n=this[ho+_e.Util._capitalize(t)];return _e.Util._isFunction(n)?n.call(this,i):this._setAttr(t,i),this}_requestDraw(){if(_i.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,i){var n=this.attrs[t];n===i&&!_e.Util.isObject(i)||(i==null?delete this.attrs[t]:this.attrs[t]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,i),this._requestDraw())}_setComponentAttr(t,i,n){var s;n!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][i]=n,this._fireChangeEvent(t,s,n))}_fireAndBubble(t,i,n){i&&this.nodeType===co&&(i.target=this);var s=(t===oo||t===lo)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n);if(!s){this._fire(t,i);var r=(t===oo||t===lo)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,i,n):this._fireAndBubble.call(this.parent,t,i))}}_getProtoListeners(t){var i,n,s;const r=(i=this._cache.get(Qn))!==null&&i!==void 0?i:{};let a=r==null?void 0:r[t];if(a===void 0){a=[];let o=Object.getPrototypeOf(this);for(;o;){const l=(s=(n=o.eventListeners)===null||n===void 0?void 0:n[t])!==null&&s!==void 0?s:[];a.push(...l),o=Object.getPrototypeOf(o)}r[t]=a,this._cache.set(Qn,r)}return a}_fire(t,i){i=i||{},i.currentTarget=this,i.type=t;const n=this._getProtoListeners(t);if(n)for(var s=0;s<n.length;s++)n[s].handler.call(this,i);const r=this.eventListeners[t];if(r)for(var s=0;s<r.length;s++)r[s].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var i=t?t.pointerId:void 0,n=this.getStage(),s=this.getAbsolutePosition(),r=n._getPointerById(i)||n._changedPointerPositions[0]||s;ut.DD._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-s.x,y:r.y-s.y},dragStatus:"ready",pointerId:i})}startDrag(t,i=!0){ut.DD._dragElements.has(this._id)||this._createDragElement(t);const n=ut.DD._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},i)}_setDragPosition(t,i){const n=this.getStage()._getPointerById(i.pointerId);if(!!n){var s={x:n.x-i.offset.x,y:n.y-i.offset.y},r=this.dragBoundFunc();if(r!==void 0){const a=r.call(this,s,t);a?s=a:_e.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}}stopDrag(t){const i=ut.DD._dragElements.get(this._id);i&&(i.dragStatus="stopped"),ut.DD._endDragBefore(t),ut.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=ut.DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var i=t.evt.button!==void 0,n=!i||_i.Konva.dragButtons.indexOf(t.evt.button)>=0;if(!!n&&!this.isDragging()){var s=!1;ut.DD._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(s=!0)}),s||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage();if(!t)return;const i=ut.DD._dragElements.get(this._id),n=i&&i.dragStatus==="dragging",s=i&&i.dragStatus==="ready";n?this.stopDrag():s&&ut.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const i=this.getStage();if(!i)return!1;const n={x:-t.x,y:-t.y,width:i.width()+2*t.x,height:i.height()+2*t.y};return _e.Util.haveIntersection(n,this.getClientRect())}static create(t,i){return _e.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,i)}static _createNode(t,i){var n=he.prototype.getClassName.call(t),s=t.children,r,a,o;i&&(t.attrs.container=i),_i.Konva[n]||(_e.Util.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const l=_i.Konva[n];if(r=new l(t.attrs),s)for(a=s.length,o=0;o<a;o++)r.add(he._createNode(s[o]));return r}}oi.Node=he;he.prototype.nodeType="Node";he.prototype._attrsAffectingSize=[];he.prototype.eventListeners={};he.prototype.on.call(he.prototype,ju,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Zt),this._clearSelfAndDescendantCache(Wt)});he.prototype.on.call(he.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Rr)});he.prototype.on.call(he.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Lr)});he.prototype.on.call(he.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(hs)});const xe=Dn.Factory.addGetterSetter;xe(he,"zIndex");xe(he,"absolutePosition");xe(he,"position");xe(he,"x",0,(0,We.getNumberValidator)());xe(he,"y",0,(0,We.getNumberValidator)());xe(he,"globalCompositeOperation","source-over",(0,We.getStringValidator)());xe(he,"opacity",1,(0,We.getNumberValidator)());xe(he,"name","",(0,We.getStringValidator)());xe(he,"id","",(0,We.getStringValidator)());xe(he,"rotation",0,(0,We.getNumberValidator)());Dn.Factory.addComponentsGetterSetter(he,"scale",["x","y"]);xe(he,"scaleX",1,(0,We.getNumberValidator)());xe(he,"scaleY",1,(0,We.getNumberValidator)());Dn.Factory.addComponentsGetterSetter(he,"skew",["x","y"]);xe(he,"skewX",0,(0,We.getNumberValidator)());xe(he,"skewY",0,(0,We.getNumberValidator)());Dn.Factory.addComponentsGetterSetter(he,"offset",["x","y"]);xe(he,"offsetX",0,(0,We.getNumberValidator)());xe(he,"offsetY",0,(0,We.getNumberValidator)());xe(he,"dragDistance",null,(0,We.getNumberValidator)());xe(he,"width",0,(0,We.getNumberValidator)());xe(he,"height",0,(0,We.getNumberValidator)());xe(he,"listening",!0,(0,We.getBooleanValidator)());xe(he,"preventDefault",!0,(0,We.getBooleanValidator)());xe(he,"filters",null,function(e){return this._filterUpToDate=!1,e});xe(he,"visible",!0,(0,We.getBooleanValidator)());xe(he,"transformsEnabled","all",(0,We.getStringValidator)());xe(he,"size");xe(he,"dragBoundFunc");xe(he,"draggable",!1,(0,We.getBooleanValidator)());Dn.Factory.backCompat(he,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.Container=void 0;const Qi=Rt,cr=oi,Ks=be;class Mi extends cr.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const i=this.children||[];var n=[];return i.forEach(function(s){t(s)&&n.push(s)}),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(var i=0;i<t.length;i++)this.add(t[i]);return this}const n=t[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var i=this._generalFind(t,!0);return i.length>0?i[0]:void 0}_generalFind(t,i){var n=[];return this._descendants(s=>{const r=s._isMatch(t);return r&&n.push(s),!!(r&&i)}),n}_descendants(t){let i=!1;const n=this.getChildren();for(const s of n){if(i=t(s),i)return!0;if(!!s.hasChildren()&&(i=s._descendants(t),i))return!0}return!1}toObject(){var t=cr.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(i=>{t.children.push(i.toObject())}),t}isAncestorOf(t){for(var i=t.getParent();i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(t){var i=cr.Node.prototype.clone.call(this,t);return this.getChildren().forEach(function(n){i.add(n.clone())}),i}getAllIntersections(t){var i=[];return this.find("Shape").forEach(function(n){n.isVisible()&&n.intersects(t)&&i.push(n)}),i}_clearSelfAndDescendantCache(t){var i;super._clearSelfAndDescendantCache(t),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(n){n._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(i,n){i.index=n}),this._requestDraw()}drawScene(t,i){var n=this.getLayer(),s=t||n&&n.getCanvas(),r=s&&s.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=s&&s.isCache;if(!this.isVisible()&&!l)return this;if(o){r.save();var h=this.getAbsoluteTransform(i).getMatrix();r.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(r),r.restore()}else this._drawChildren("drawScene",s,i);return this}drawHit(t,i){if(!this.shouldDrawHit(i))return this;var n=this.getLayer(),s=t||n&&n.hitCanvas,r=s&&s.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){r.save();var l=this.getAbsoluteTransform(i).getMatrix();r.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",s,i);return this}_drawChildren(t,i,n){var s,r=i&&i.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h=a&&o||l;const d=n===this;if(h){r.save();var f=this.getAbsoluteTransform(n),y=f.getMatrix();r.transform(y[0],y[1],y[2],y[3],y[4],y[5]),r.beginPath();let v;if(l)v=l.call(this,r,this);else{var g=this.clipX(),_=this.clipY();r.rect(g,_,a,o)}r.clip.apply(r,v),y=f.copy().invert().getMatrix(),r.transform(y[0],y[1],y[2],y[3],y[4],y[5])}var b=!d&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";b&&(r.save(),r._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(v){v[t](i,n)}),b&&r.restore(),h&&r.restore()}getClientRect(t){var i;t=t||{};var n=t.skipTransform,s=t.relativeTo,r,a,o,l,h={x:1/0,y:1/0,width:0,height:0},d=this;(i=this.children)===null||i===void 0||i.forEach(function(b){if(!!b.visible()){var v=b.getClientRect({relativeTo:d,skipShadow:t.skipShadow,skipStroke:t.skipStroke});v.width===0&&v.height===0||(r===void 0?(r=v.x,a=v.y,o=v.x+v.width,l=v.y+v.height):(r=Math.min(r,v.x),a=Math.min(a,v.y),o=Math.max(o,v.x+v.width),l=Math.max(l,v.y+v.height)))}});for(var f=this.find("Shape"),y=!1,g=0;g<f.length;g++){var _=f[g];if(_._isVisible(this)){y=!0;break}}return y&&r!==void 0?h={x:r,y:a,width:o-r,height:l-a}:h={x:0,y:0,width:0,height:0},n?h:this._transformedRect(h,s)}}Ii.Container=Mi;Qi.Factory.addComponentsGetterSetter(Mi,"clip",["x","y","width","height"]);Qi.Factory.addGetterSetter(Mi,"clipX",void 0,(0,Ks.getNumberValidator)());Qi.Factory.addGetterSetter(Mi,"clipY",void 0,(0,Ks.getNumberValidator)());Qi.Factory.addGetterSetter(Mi,"clipWidth",void 0,(0,Ks.getNumberValidator)());Qi.Factory.addGetterSetter(Mi,"clipHeight",void 0,(0,Ks.getNumberValidator)());Qi.Factory.addGetterSetter(Mi,"clipFunc");var Rl={},ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.releaseCapture=ht.setPointerCapture=ht.hasPointerCapture=ht.createEvent=ht.getCapturedShape=void 0;const Yu=Be,xn=new Map,Fl=Yu.Konva._global.PointerEvent!==void 0;function Zu(e){return xn.get(e)}ht.getCapturedShape=Zu;function ha(e){return{evt:e,pointerId:e.pointerId}}ht.createEvent=ha;function qu(e,t){return xn.get(e)===t}ht.hasPointerCapture=qu;function Ju(e,t){Nl(e),t.getStage()&&(xn.set(e,t),Fl&&t._fire("gotpointercapture",ha(new PointerEvent("gotpointercapture"))))}ht.setPointerCapture=Ju;function Nl(e,t){const i=xn.get(e);if(!i)return;const n=i.getStage();n&&n.content,xn.delete(e),Fl&&i._fire("lostpointercapture",ha(new PointerEvent("lostpointercapture")))}ht.releaseCapture=Nl;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=je,i=Rt,n=Ii,s=Be,r=Tt,a=js,o=Be,l=ht;var h="Stage",d="string",f="px",y="mouseout",g="mouseleave",_="mouseover",b="mouseenter",v="mousemove",A="mousedown",E="mouseup",c="pointermove",u="pointerdown",C="pointerup",k="pointercancel",F="lostpointercapture",S="pointerout",W="pointerleave",x="pointerover",N="pointerenter",Y="contextmenu",X="touchstart",te="touchend",le="touchmove",de="touchcancel",O="wheel",R=5,j=[[b,"_pointerenter"],[A,"_pointerdown"],[v,"_pointermove"],[E,"_pointerup"],[g,"_pointerleave"],[X,"_pointerdown"],[le,"_pointermove"],[te,"_pointerup"],[de,"_pointercancel"],[_,"_pointerover"],[O,"_wheel"],[Y,"_contextmenu"],[u,"_pointerdown"],[c,"_pointermove"],[C,"_pointerup"],[k,"_pointercancel"],[F,"_lostpointercapture"]];const ie={mouse:{[S]:y,[W]:g,[x]:_,[N]:b,[c]:v,[u]:A,[C]:E,[k]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[S]:"touchout",[W]:"touchleave",[x]:"touchover",[N]:"touchenter",[c]:le,[u]:X,[C]:te,[k]:de,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[S]:S,[W]:W,[x]:x,[N]:N,[c]:c,[u]:u,[C]:C,[k]:k,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ee=me=>me.indexOf("pointer")>=0?"pointer":me.indexOf("touch")>=0?"touch":"mouse",ue=me=>{const T=ee(me);if(T==="pointer")return s.Konva.pointerEventsEnabled&&ie.pointer;if(T==="touch")return ie.touch;if(T==="mouse")return ie.mouse};function we(me={}){return(me.clipFunc||me.clipWidth||me.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),me}const Oe="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class Pe extends n.Container{constructor(T){super(we(T)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{we(this.attrs)}),this._checkVisibility()}_validateAdd(T){const U=T.getType()==="Layer",Z=T.getType()==="FastLayer";U||Z||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const T=this.visible()?"":"none";this.content.style.display=T}setContainer(T){if(typeof T===d){if(T.charAt(0)==="."){var U=T.slice(1);T=document.getElementsByClassName(U)[0]}else{var Z;T.charAt(0)!=="#"?Z=T:Z=T.slice(1),T=document.getElementById(Z)}if(!T)throw"Can not find container in document with id "+Z}return this._setAttr("container",T),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),T.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var T=this.children,U=T.length,Z;for(Z=0;Z<U;Z++)T[Z].clear();return this}clone(T){return T||(T={}),T.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,T)}destroy(){super.destroy();var T=this.content;T&&t.Util._isInDocument(T)&&this.container().removeChild(T);var U=e.stages.indexOf(this);return U>-1&&e.stages.splice(U,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const T=this._pointerPositions[0]||this._changedPointerPositions[0];return T?{x:T.x,y:T.y}:(t.Util.warn(Oe),null)}_getPointerById(T){return this._pointerPositions.find(U=>U.id===T)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(T){T=T||{},T.x=T.x||0,T.y=T.y||0,T.width=T.width||this.width(),T.height=T.height||this.height();var U=new r.SceneCanvas({width:T.width,height:T.height,pixelRatio:T.pixelRatio||1}),Z=U.getContext()._context,Te=this.children;return(T.x||T.y)&&Z.translate(-1*T.x,-1*T.y),Te.forEach(function(ve){if(!!ve.isVisible()){var p=ve._toKonvaCanvas(T);Z.drawImage(p._canvas,T.x,T.y,p.getWidth()/p.getPixelRatio(),p.getHeight()/p.getPixelRatio())}}),U}getIntersection(T){if(!T)return null;var U=this.children,Z=U.length,Te=Z-1,ve;for(ve=Te;ve>=0;ve--){const p=U[ve].getIntersection(T);if(p)return p}return null}_resizeDOM(){var T=this.width(),U=this.height();this.content&&(this.content.style.width=T+f,this.content.style.height=U+f),this.bufferCanvas.setSize(T,U),this.bufferHitCanvas.setSize(T,U),this.children.forEach(Z=>{Z.setSize({width:T,height:U}),Z.draw()})}add(T,...U){if(arguments.length>1){for(var Z=0;Z<arguments.length;Z++)this.add(arguments[Z]);return this}super.add(T);var Te=this.children.length;return Te>R&&t.Util.warn("The stage has "+Te+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),T.setSize({width:this.width(),height:this.height()}),T.draw(),s.Konva.isBrowser&&this.content.appendChild(T.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(T){return l.hasPointerCapture(T,this)}setPointerCapture(T){l.setPointerCapture(T,this)}releaseCapture(T){l.releaseCapture(T,this)}getLayers(){return this.children}_bindContentEvents(){!s.Konva.isBrowser||j.forEach(([T,U])=>{this.content.addEventListener(T,Z=>{this[U](Z)},{passive:!1})})}_pointerenter(T){this.setPointersPositions(T);const U=ue(T.type);this._fire(U.pointerenter,{evt:T,target:this,currentTarget:this})}_pointerover(T){this.setPointersPositions(T);const U=ue(T.type);this._fire(U.pointerover,{evt:T,target:this,currentTarget:this})}_getTargetShape(T){let U=this[T+"targetShape"];return U&&!U.getStage()&&(U=null),U}_pointerleave(T){const U=ue(T.type),Z=ee(T.type);if(!!U){this.setPointersPositions(T);var Te=this._getTargetShape(Z),ve=!a.DD.isDragging||s.Konva.hitOnDragEnabled;Te&&ve?(Te._fireAndBubble(U.pointerout,{evt:T}),Te._fireAndBubble(U.pointerleave,{evt:T}),this._fire(U.pointerleave,{evt:T,target:this,currentTarget:this}),this[Z+"targetShape"]=null):ve&&(this._fire(U.pointerleave,{evt:T,target:this,currentTarget:this}),this._fire(U.pointerout,{evt:T,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(T){const U=ue(T.type),Z=ee(T.type);if(!!U){this.setPointersPositions(T);var Te=!1;this._changedPointerPositions.forEach(ve=>{var p=this.getIntersection(ve);if(a.DD.justDragged=!1,s.Konva["_"+Z+"ListenClick"]=!0,!(p&&p.isListening()))return;s.Konva.capturePointerEventsEnabled&&p.setPointerCapture(ve.id),this[Z+"ClickStartShape"]=p,p._fireAndBubble(U.pointerdown,{evt:T,pointerId:ve.id}),Te=!0;const P=T.type.indexOf("touch")>=0;p.preventDefault()&&T.cancelable&&P&&T.preventDefault()}),Te||this._fire(U.pointerdown,{evt:T,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(T){const U=ue(T.type),Z=ee(T.type);if(!U)return;a.DD.isDragging&&a.DD.node.preventDefault()&&T.cancelable&&T.preventDefault(),this.setPointersPositions(T);var Te=!a.DD.isDragging||s.Konva.hitOnDragEnabled;if(!Te)return;var ve={};let p=!1;var w=this._getTargetShape(Z);this._changedPointerPositions.forEach(P=>{const I=l.getCapturedShape(P.id)||this.getIntersection(P),D=P.id,G={evt:T,pointerId:D};var V=w!==I;if(V&&w&&(w._fireAndBubble(U.pointerout,Object.assign({},G),I),w._fireAndBubble(U.pointerleave,Object.assign({},G),I)),I){if(ve[I._id])return;ve[I._id]=!0}I&&I.isListening()?(p=!0,V&&(I._fireAndBubble(U.pointerover,Object.assign({},G),w),I._fireAndBubble(U.pointerenter,Object.assign({},G),w),this[Z+"targetShape"]=I),I._fireAndBubble(U.pointermove,Object.assign({},G))):w&&(this._fire(U.pointerover,{evt:T,target:this,currentTarget:this,pointerId:D}),this[Z+"targetShape"]=null)}),p||this._fire(U.pointermove,{evt:T,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(T){const U=ue(T.type),Z=ee(T.type);if(!U)return;this.setPointersPositions(T);const Te=this[Z+"ClickStartShape"],ve=this[Z+"ClickEndShape"];var p={};let w=!1;this._changedPointerPositions.forEach(P=>{const I=l.getCapturedShape(P.id)||this.getIntersection(P);if(I){if(I.releaseCapture(P.id),p[I._id])return;p[I._id]=!0}const D=P.id,G={evt:T,pointerId:D};let V=!1;s.Konva["_"+Z+"InDblClickWindow"]?(V=!0,clearTimeout(this[Z+"DblTimeout"])):a.DD.justDragged||(s.Konva["_"+Z+"InDblClickWindow"]=!0,clearTimeout(this[Z+"DblTimeout"])),this[Z+"DblTimeout"]=setTimeout(function(){s.Konva["_"+Z+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),I&&I.isListening()?(w=!0,this[Z+"ClickEndShape"]=I,I._fireAndBubble(U.pointerup,Object.assign({},G)),s.Konva["_"+Z+"ListenClick"]&&Te&&Te===I&&(I._fireAndBubble(U.pointerclick,Object.assign({},G)),V&&ve&&ve===I&&I._fireAndBubble(U.pointerdblclick,Object.assign({},G)))):(this[Z+"ClickEndShape"]=null,s.Konva["_"+Z+"ListenClick"]&&this._fire(U.pointerclick,{evt:T,target:this,currentTarget:this,pointerId:D}),V&&this._fire(U.pointerdblclick,{evt:T,target:this,currentTarget:this,pointerId:D}))}),w||this._fire(U.pointerup,{evt:T,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+Z+"ListenClick"]=!1,T.cancelable&&Z!=="touch"&&T.preventDefault()}_contextmenu(T){this.setPointersPositions(T);var U=this.getIntersection(this.getPointerPosition());U&&U.isListening()?U._fireAndBubble(Y,{evt:T}):this._fire(Y,{evt:T,target:this,currentTarget:this})}_wheel(T){this.setPointersPositions(T);var U=this.getIntersection(this.getPointerPosition());U&&U.isListening()?U._fireAndBubble(O,{evt:T}):this._fire(O,{evt:T,target:this,currentTarget:this})}_pointercancel(T){this.setPointersPositions(T);const U=l.getCapturedShape(T.pointerId)||this.getIntersection(this.getPointerPosition());U&&U._fireAndBubble(C,l.createEvent(T)),l.releaseCapture(T.pointerId)}_lostpointercapture(T){l.releaseCapture(T.pointerId)}setPointersPositions(T){var U=this._getContentPosition(),Z=null,Te=null;T=T||window.event,T.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(T.touches,ve=>{this._pointerPositions.push({id:ve.identifier,x:(ve.clientX-U.left)/U.scaleX,y:(ve.clientY-U.top)/U.scaleY})}),Array.prototype.forEach.call(T.changedTouches||T.touches,ve=>{this._changedPointerPositions.push({id:ve.identifier,x:(ve.clientX-U.left)/U.scaleX,y:(ve.clientY-U.top)/U.scaleY})})):(Z=(T.clientX-U.left)/U.scaleX,Te=(T.clientY-U.top)/U.scaleY,this.pointerPos={x:Z,y:Te},this._pointerPositions=[{x:Z,y:Te,id:t.Util._getFirstPointerId(T)}],this._changedPointerPositions=[{x:Z,y:Te,id:t.Util._getFirstPointerId(T)}])}_setPointerPosition(T){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(T)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var T=this.content.getBoundingClientRect();return{top:T.top,left:T.left,scaleX:T.width/this.content.clientWidth||1,scaleY:T.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!s.Konva.isBrowser){var T=this.container();if(!T)throw"Stage has no container. A container is required.";T.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),T.appendChild(this.content),this._resizeDOM()}}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(T){T.batchDraw()}),this}}e.Stage=Pe,Pe.prototype.nodeType=h,(0,o._registerNode)(Pe),i.Factory.addGetterSetter(Pe,"container")})(Rl);var Ln={},en={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=Be,i=je,n=Rt,s=oi,r=be,a=Be,o=ht;var l="hasShadow",h="shadowRGBA",d="patternImage",f="linearGradient",y="radialGradient";let g;function _(){return g||(g=i.Util.createCanvasElement().getContext("2d"),g)}e.shapes={};function b(W){const x=this.attrs.fillRule;x?W.fill(x):W.fill()}function v(W){W.stroke()}function A(W){W.fill()}function E(W){W.stroke()}function c(){this._clearCache(l)}function u(){this._clearCache(h)}function C(){this._clearCache(d)}function k(){this._clearCache(f)}function F(){this._clearCache(y)}class S extends s.Node{constructor(x){super(x);let N;for(;N=i.Util.getRandomColor(),!(N&&!(N in e.shapes)););this.colorKey=N,e.shapes[N]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var x=_();const N=x.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(N&&N.setTransform){const Y=new i.Transform;Y.translate(this.fillPatternX(),this.fillPatternY()),Y.rotate(t.Konva.getAngle(this.fillPatternRotation())),Y.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),Y.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const X=Y.getMatrix(),te=typeof DOMMatrix>"u"?{a:X[0],b:X[1],c:X[2],d:X[3],e:X[4],f:X[5]}:new DOMMatrix(X);N.setTransform(te)}return N}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){var x=this.fillLinearGradientColorStops();if(x){for(var N=_(),Y=this.fillLinearGradientStartPoint(),X=this.fillLinearGradientEndPoint(),te=N.createLinearGradient(Y.x,Y.y,X.x,X.y),le=0;le<x.length;le+=2)te.addColorStop(x[le],x[le+1]);return te}}_getRadialGradient(){return this._getCache(y,this.__getRadialGradient)}__getRadialGradient(){var x=this.fillRadialGradientColorStops();if(x){for(var N=_(),Y=this.fillRadialGradientStartPoint(),X=this.fillRadialGradientEndPoint(),te=N.createRadialGradient(Y.x,Y.y,this.fillRadialGradientStartRadius(),X.x,X.y,this.fillRadialGradientEndRadius()),le=0;le<x.length;le+=2)te.addColorStop(x[le],x[le+1]);return te}}getShadowRGBA(){return this._getCache(h,this._getShadowRGBA)}_getShadowRGBA(){if(!!this.hasShadow()){var x=i.Util.colorToRGBA(this.shadowColor());if(x)return"rgba("+x.r+","+x.g+","+x.b+","+x.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const x=this.hitStrokeWidth();return x==="auto"?this.hasStroke():this.strokeEnabled()&&!!x}intersects(x){var N=this.getStage(),Y=N.bufferHitCanvas,X;return Y.getContext().clear(),this.drawHit(Y,null,!0),X=Y.context.getImageData(Math.round(x.x),Math.round(x.y),1,1).data,X[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(x){var N;if(!this.getStage()||!((N=this.attrs.perfectDrawEnabled)!==null&&N!==void 0?N:!0))return!1;const X=x||this.hasFill(),te=this.hasStroke(),le=this.getAbsoluteOpacity()!==1;if(X&&te&&le)return!0;const de=this.hasShadow(),O=this.shadowForStrokeEnabled();return!!(X&&te&&de&&O)}setStrokeHitEnabled(x){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),x?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var x=this.size();return{x:this._centroid?-x.width/2:0,y:this._centroid?-x.height/2:0,width:x.width,height:x.height}}getClientRect(x={}){const N=x.skipTransform,Y=x.relativeTo,X=this.getSelfRect(),le=!x.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,de=X.width+le,O=X.height+le,R=!x.skipShadow&&this.hasShadow(),j=R?this.shadowOffsetX():0,ie=R?this.shadowOffsetY():0,ee=de+Math.abs(j),ue=O+Math.abs(ie),we=R&&this.shadowBlur()||0,Oe=ee+we*2,Pe=ue+we*2,me={width:Oe,height:Pe,x:-(le/2+we)+Math.min(j,0)+X.x,y:-(le/2+we)+Math.min(ie,0)+X.y};return N?me:this._transformedRect(me,Y)}drawScene(x,N){var Y=this.getLayer(),X=x||Y.getCanvas(),te=X.getContext(),le=this._getCanvasCache(),de=this.getSceneFunc(),O=this.hasShadow(),R,j,ie,ee=X.isCache,ue=N===this;if(!this.isVisible()&&!ue)return this;if(le){te.save();var we=this.getAbsoluteTransform(N).getMatrix();return te.transform(we[0],we[1],we[2],we[3],we[4],we[5]),this._drawCachedSceneCanvas(te),te.restore(),this}if(!de)return this;if(te.save(),this._useBufferCanvas()&&!ee){R=this.getStage(),j=R.bufferCanvas,ie=j.getContext(),ie.clear(),ie.save(),ie._applyLineJoin(this);var Oe=this.getAbsoluteTransform(N).getMatrix();ie.transform(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5]),de.call(this,ie,this),ie.restore();var Pe=j.pixelRatio;O&&te._applyShadow(this),te._applyOpacity(this),te._applyGlobalCompositeOperation(this),te.drawImage(j._canvas,0,0,j.width/Pe,j.height/Pe)}else{if(te._applyLineJoin(this),!ue){var Oe=this.getAbsoluteTransform(N).getMatrix();te.transform(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5]),te._applyOpacity(this),te._applyGlobalCompositeOperation(this)}O&&te._applyShadow(this),de.call(this,te,this)}return te.restore(),this}drawHit(x,N,Y=!1){if(!this.shouldDrawHit(N,Y))return this;var X=this.getLayer(),te=x||X.hitCanvas,le=te&&te.getContext(),de=this.hitFunc()||this.sceneFunc(),O=this._getCanvasCache(),R=O&&O.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),R){le.save();var j=this.getAbsoluteTransform(N).getMatrix();return le.transform(j[0],j[1],j[2],j[3],j[4],j[5]),this._drawCachedHitCanvas(le),le.restore(),this}if(!de)return this;if(le.save(),le._applyLineJoin(this),!(this===N)){var ee=this.getAbsoluteTransform(N).getMatrix();le.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5])}return de.call(this,le,this),le.restore(),this}drawHitFromCache(x=0){var N=this._getCanvasCache(),Y=this._getCachedSceneCanvas(),X=N.hit,te=X.getContext(),le=X.getWidth(),de=X.getHeight(),O,R,j,ie,ee,ue;te.clear(),te.drawImage(Y._canvas,0,0,le,de);try{for(O=te.getImageData(0,0,le,de),R=O.data,j=R.length,ie=i.Util._hexToRgb(this.colorKey),ee=0;ee<j;ee+=4)ue=R[ee+3],ue>x?(R[ee]=ie.r,R[ee+1]=ie.g,R[ee+2]=ie.b,R[ee+3]=255):R[ee+3]=0;te.putImageData(O,0,0)}catch(we){i.Util.error("Unable to draw hit graph from cached scene canvas. "+we.message)}return this}hasPointerCapture(x){return o.hasPointerCapture(x,this)}setPointerCapture(x){o.setPointerCapture(x,this)}releaseCapture(x){o.releaseCapture(x,this)}}e.Shape=S,S.prototype._fillFunc=b,S.prototype._strokeFunc=v,S.prototype._fillFuncHit=A,S.prototype._strokeFuncHit=E,S.prototype._centroid=!1,S.prototype.nodeType="Shape",(0,a._registerNode)(S),S.prototype.eventListeners={},S.prototype.on.call(S.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",c),S.prototype.on.call(S.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",u),S.prototype.on.call(S.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),S.prototype.on.call(S.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",k),S.prototype.on.call(S.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",F),n.Factory.addGetterSetter(S,"stroke",void 0,(0,r.getStringOrGradientValidator)()),n.Factory.addGetterSetter(S,"strokeWidth",2,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(S,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(S,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(S,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(S,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(S,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(S,"lineJoin"),n.Factory.addGetterSetter(S,"lineCap"),n.Factory.addGetterSetter(S,"sceneFunc"),n.Factory.addGetterSetter(S,"hitFunc"),n.Factory.addGetterSetter(S,"dash"),n.Factory.addGetterSetter(S,"dashOffset",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(S,"shadowColor",void 0,(0,r.getStringValidator)()),n.Factory.addGetterSetter(S,"shadowBlur",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(S,"shadowOpacity",1,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(S,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(S,"shadowOffsetX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(S,"shadowOffsetY",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(S,"fillPatternImage"),n.Factory.addGetterSetter(S,"fill",void 0,(0,r.getStringOrGradientValidator)()),n.Factory.addGetterSetter(S,"fillPatternX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(S,"fillPatternY",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(S,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(S,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(S,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(S,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(S,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(S,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(S,"fillEnabled",!0),n.Factory.addGetterSetter(S,"strokeEnabled",!0),n.Factory.addGetterSetter(S,"shadowEnabled",!0),n.Factory.addGetterSetter(S,"dashEnabled",!0),n.Factory.addGetterSetter(S,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(S,"fillPriority","color"),n.Factory.addComponentsGetterSetter(S,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(S,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(S,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(S,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(S,"fillPatternScaleX",1,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(S,"fillPatternScaleY",1,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(S,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(S,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(S,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(S,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(S,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(S,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(S,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(S,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(S,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(S,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(S,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(S,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(S,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(S,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(S,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(S,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(S,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(S,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(S,"fillPatternRotation",0),n.Factory.addGetterSetter(S,"fillRule",void 0,(0,r.getStringValidator)()),n.Factory.backCompat(S,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(en);Object.defineProperty(Ln,"__esModule",{value:!0});Ln.Layer=void 0;const Bt=je,dr=Ii,Bi=oi,ca=Rt,fo=Tt,Qu=be,ef=en,tf=Be;var nf="#",sf="beforeDraw",rf="draw",Bl=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],af=Bl.length;class tn extends dr.Container{constructor(t){super(t),this.canvas=new fo.SceneCanvas,this.hitCanvas=new fo.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),t<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[t+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Bi.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=Bi.Node.prototype.moveUp.call(this);if(!t)return!1;var i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Bi.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Bi.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return Bi.Node.prototype.remove.call(this),t&&t.parentNode&&Bt.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:i}){return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(t){var i=t.getType();i!=="Group"&&i!=="Shape"&&Bt.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Bi.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Bt.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Bt.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Bt.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var i=1,n=!1;;){for(let s=0;s<af;s++){const r=Bl[s],a=this._getIntersection({x:t.x+r.x*i,y:t.y+r.y*i}),o=a.shape;if(o)return o;if(n=!!a.antialiased,!a.antialiased)break}if(n)i+=1;else return null}}_getIntersection(t){const i=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,s=n[3];if(s===255){const r=Bt.Util._rgbToHex(n[0],n[1],n[2]),a=ef.shapes[nf+r];return a?{shape:a}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,i){var n=this.getLayer(),s=t||n&&n.getCanvas();return this._fire(sf,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),dr.Container.prototype.drawScene.call(this,s,i),this._fire(rf,{node:this}),this}drawHit(t,i){var n=this.getLayer(),s=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),dr.Container.prototype.drawHit.call(this,s,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){Bt.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return Bt.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,i=!!this.hitCanvas._canvas.parentNode;i?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Bt.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Ln.Layer=tn;tn.prototype.nodeType="Layer";(0,tf._registerNode)(tn);ca.Factory.addGetterSetter(tn,"imageSmoothingEnabled",!0);ca.Factory.addGetterSetter(tn,"clearBeforeDraw",!0);ca.Factory.addGetterSetter(tn,"hitGraphEnabled",!0,(0,Qu.getBooleanValidator)());var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.FastLayer=void 0;const of=je,lf=Ln,hf=Be;class da extends lf.Layer{constructor(t){super(t),this.listening(!1),of.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Ys.FastLayer=da;da.prototype.nodeType="FastLayer";(0,hf._registerNode)(da);var Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.Group=void 0;const cf=je,df=Ii,uf=Be;class ua extends df.Container{_validateAdd(t){var i=t.getType();i!=="Group"&&i!=="Shape"&&cf.Util.throw("You may only add groups and shapes to groups.")}}Zs.Group=ua;ua.prototype.nodeType="Group";(0,uf._registerNode)(ua);var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});var Wl=Rn.Animation=void 0;const ur=Be,go=je;var fr=function(){return ur.glob.performance&&ur.glob.performance.now?function(){return ur.glob.performance.now()}:function(){return new Date().getTime()}}();class Ot{constructor(t,i){this.id=Ot.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:fr(),frameRate:0},this.func=t,this.setLayers(i)}setLayers(t){var i=[];return t?t.length>0?i=t:i=[t]:i=[],this.layers=i,this}getLayers(){return this.layers}addLayer(t){var i=this.layers,n=i.length,s;for(s=0;s<n;s++)if(i[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){var t=Ot,i=t.animations,n=i.length,s;for(s=0;s<n;s++)if(i[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=fr(),Ot._addAnimation(this),this}stop(){return Ot._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){var i=t.id,n=this.animations,s=n.length,r;for(r=0;r<s;r++)if(n[r].id===i){this.animations.splice(r,1);break}}static _runFrames(){var t={},i=this.animations,n,s,r,a,o,l,h,d,f;for(a=0;a<i.length;a++)if(n=i[a],s=n.layers,r=n.func,n._updateFrameObject(fr()),l=s.length,r?f=r.call(n,n.frame)!==!1:f=!0,!!f)for(o=0;o<l;o++)h=s[o],h._id!==void 0&&(t[h._id]=h);for(d in t)!t.hasOwnProperty(d)||t[d].batchDraw()}static _animationLoop(){var t=Ot;t.animations.length?(t._runFrames(),go.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,go.Util.requestAnimFrame(this._animationLoop))}}Wl=Rn.Animation=Ot;Ot.animations=[];Ot.animIdCounter=0;Ot.animRunning=!1;var Gl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=je,i=Rn,n=oi,s=Be;var r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,o=2,l=3,h=0,d=["fill","stroke","shadowColor"];class f{constructor(_,b,v,A,E,c,u){this.prop=_,this.propFunc=b,this.begin=A,this._pos=A,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=u,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=E-this.begin,this.pause()}fire(_){var b=this[_];b&&b()}setTime(_){_>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():_<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=_,this.update())}getTime(){return this._time}setPosition(_){this.prevPos=this._pos,this.propFunc(_),this._pos=_}getPosition(_){return _===void 0&&(_=this._time),this.func(_,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(_){this.pause(),this._time=_,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var _=this.getTimer()-this._startTime;this.state===o?this.setTime(_):this.state===l&&this.setTime(this.duration-_)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class y{constructor(_){var b=this,v=_.node,A=v._id,E,c=_.easing||e.Easings.Linear,u=!!_.yoyo,C;typeof _.duration>"u"?E=.3:_.duration===0?E=.001:E=_.duration,this.node=v,this._id=h++;var k=v.getLayer()||(v instanceof s.Konva.Stage?v.getLayers():null);k||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){b.tween.onEnterFrame()},k),this.tween=new f(C,function(F){b._tweenFunc(F)},c,0,1,E*1e3,u),this._addListeners(),y.attrs[A]||(y.attrs[A]={}),y.attrs[A][this._id]||(y.attrs[A][this._id]={}),y.tweens[A]||(y.tweens[A]={});for(C in _)r[C]===void 0&&this._addAttr(C,_[C]);this.reset(),this.onFinish=_.onFinish,this.onReset=_.onReset,this.onUpdate=_.onUpdate}_addAttr(_,b){var v=this.node,A=v._id,E,c,u,C,k,F,S,W;if(u=y.tweens[A][_],u&&delete y.attrs[A][u][_],E=v.getAttr(_),t.Util._isArray(b))if(c=[],k=Math.max(b.length,E.length),_==="points"&&b.length!==E.length&&(b.length>E.length?(S=E,E=t.Util._prepareArrayForTween(E,b,v.closed())):(F=b,b=t.Util._prepareArrayForTween(b,E,v.closed()))),_.indexOf("fill")===0)for(C=0;C<k;C++)if(C%2===0)c.push(b[C]-E[C]);else{var x=t.Util.colorToRGBA(E[C]);W=t.Util.colorToRGBA(b[C]),E[C]=x,c.push({r:W.r-x.r,g:W.g-x.g,b:W.b-x.b,a:W.a-x.a})}else for(C=0;C<k;C++)c.push(b[C]-E[C]);else d.indexOf(_)!==-1?(E=t.Util.colorToRGBA(E),W=t.Util.colorToRGBA(b),c={r:W.r-E.r,g:W.g-E.g,b:W.b-E.b,a:W.a-E.a}):c=b-E;y.attrs[A][this._id][_]={start:E,diff:c,end:b,trueEnd:F,trueStart:S},y.tweens[A][_]=this._id}_tweenFunc(_){var b=this.node,v=y.attrs[b._id][this._id],A,E,c,u,C,k,F,S;for(A in v){if(E=v[A],c=E.start,u=E.diff,S=E.end,t.Util._isArray(c))if(C=[],F=Math.max(c.length,S.length),A.indexOf("fill")===0)for(k=0;k<F;k++)k%2===0?C.push((c[k]||0)+u[k]*_):C.push("rgba("+Math.round(c[k].r+u[k].r*_)+","+Math.round(c[k].g+u[k].g*_)+","+Math.round(c[k].b+u[k].b*_)+","+(c[k].a+u[k].a*_)+")");else for(k=0;k<F;k++)C.push((c[k]||0)+u[k]*_);else d.indexOf(A)!==-1?C="rgba("+Math.round(c.r+u.r*_)+","+Math.round(c.g+u.g*_)+","+Math.round(c.b+u.b*_)+","+(c.a+u.a*_)+")":C=c+u*_;b.setAttr(A,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var _=this.node,b=y.attrs[_._id][this._id];b.points&&b.points.trueEnd&&_.setAttr("points",b.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var _=this.node,b=y.attrs[_._id][this._id];b.points&&b.points.trueStart&&_.points(b.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(_){return this.tween.seek(_*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var _=this.node._id,b=this._id,v=y.tweens[_],A;this.pause();for(A in v)delete y.tweens[_][A];delete y.attrs[_][b]}}e.Tween=y,y.attrs={},y.tweens={},n.Node.prototype.to=function(g){var _=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),_&&_()};var b=new y(g);b.play()},e.Easings={BackEaseIn(g,_,b,v){var A=1.70158;return b*(g/=v)*g*((A+1)*g-A)+_},BackEaseOut(g,_,b,v){var A=1.70158;return b*((g=g/v-1)*g*((A+1)*g+A)+1)+_},BackEaseInOut(g,_,b,v){var A=1.70158;return(g/=v/2)<1?b/2*(g*g*(((A*=1.525)+1)*g-A))+_:b/2*((g-=2)*g*(((A*=1.525)+1)*g+A)+2)+_},ElasticEaseIn(g,_,b,v,A,E){var c=0;return g===0?_:(g/=v)===1?_+b:(E||(E=v*.3),!A||A<Math.abs(b)?(A=b,c=E/4):c=E/(2*Math.PI)*Math.asin(b/A),-(A*Math.pow(2,10*(g-=1))*Math.sin((g*v-c)*(2*Math.PI)/E))+_)},ElasticEaseOut(g,_,b,v,A,E){var c=0;return g===0?_:(g/=v)===1?_+b:(E||(E=v*.3),!A||A<Math.abs(b)?(A=b,c=E/4):c=E/(2*Math.PI)*Math.asin(b/A),A*Math.pow(2,-10*g)*Math.sin((g*v-c)*(2*Math.PI)/E)+b+_)},ElasticEaseInOut(g,_,b,v,A,E){var c=0;return g===0?_:(g/=v/2)===2?_+b:(E||(E=v*(.3*1.5)),!A||A<Math.abs(b)?(A=b,c=E/4):c=E/(2*Math.PI)*Math.asin(b/A),g<1?-.5*(A*Math.pow(2,10*(g-=1))*Math.sin((g*v-c)*(2*Math.PI)/E))+_:A*Math.pow(2,-10*(g-=1))*Math.sin((g*v-c)*(2*Math.PI)/E)*.5+b+_)},BounceEaseOut(g,_,b,v){return(g/=v)<1/2.75?b*(7.5625*g*g)+_:g<2/2.75?b*(7.5625*(g-=1.5/2.75)*g+.75)+_:g<2.5/2.75?b*(7.5625*(g-=2.25/2.75)*g+.9375)+_:b*(7.5625*(g-=2.625/2.75)*g+.984375)+_},BounceEaseIn(g,_,b,v){return b-e.Easings.BounceEaseOut(v-g,0,b,v)+_},BounceEaseInOut(g,_,b,v){return g<v/2?e.Easings.BounceEaseIn(g*2,0,b,v)*.5+_:e.Easings.BounceEaseOut(g*2-v,0,b,v)*.5+b*.5+_},EaseIn(g,_,b,v){return b*(g/=v)*g+_},EaseOut(g,_,b,v){return-b*(g/=v)*(g-2)+_},EaseInOut(g,_,b,v){return(g/=v/2)<1?b/2*g*g+_:-b/2*(--g*(g-2)-1)+_},StrongEaseIn(g,_,b,v){return b*(g/=v)*g*g*g*g+_},StrongEaseOut(g,_,b,v){return b*((g=g/v-1)*g*g*g*g+1)+_},StrongEaseInOut(g,_,b,v){return(g/=v/2)<1?b/2*g*g*g*g*g+_:b/2*((g-=2)*g*g*g*g+2)+_},Linear(g,_,b,v){return b*g/v+_}}})(Gl);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Be,i=je,n=oi,s=Ii,r=Rl,a=Ln,o=Ys,l=Zs,h=js,d=en,f=Rn,y=Gl,g=Ut,_=Tt;e.Konva=i.Util._assign(t.Konva,{Util:i.Util,Transform:i.Transform,Node:n.Node,Container:s.Container,Stage:r.Stage,stages:r.stages,Layer:a.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:h.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:y.Tween,Easings:y.Easings,Context:g.Context,Canvas:_.Canvas}),e.default=e.Konva})(Dr);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var i=Dr;Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return i.Konva}});const n=Dr;e.exports=n.Konva})(Or,Or.exports);const Re=fu(Or.exports);var fa={};Object.defineProperty(fa,"__esModule",{value:!0});var qs=fa.Line=void 0;const Js=Rt,ff=en,Ul=be,gf=Be;function Fr(e,t,i,n,s,r,a){var o=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2)),l=Math.sqrt(Math.pow(s-i,2)+Math.pow(r-n,2)),h=a*o/(o+l),d=a*l/(o+l),f=i-h*(s-e),y=n-h*(r-t),g=i+d*(s-e),_=n+d*(r-t);return[f,y,g,_]}function po(e,t){var i=e.length,n=[],s,r;for(s=2;s<i-2;s+=2)r=Fr(e[s-2],e[s-1],e[s],e[s+1],e[s+2],e[s+3],t),!isNaN(r[0])&&(n.push(r[0]),n.push(r[1]),n.push(e[s]),n.push(e[s+1]),n.push(r[2]),n.push(r[3]));return n}class li extends ff.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var i=this.points(),n=i.length,s=this.tension(),r=this.closed(),a=this.bezier(),o,l,h;if(!!n){if(t.beginPath(),t.moveTo(i[0],i[1]),s!==0&&n>4){for(o=this.getTensionPoints(),l=o.length,h=r?0:4,r||t.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)t.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);r||t.quadraticCurveTo(o[l-2],o[l-1],i[n-2],i[n-1])}else if(a)for(h=2;h<n;)t.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<n;h+=2)t.lineTo(i[h],i[h+1]);r?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():po(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),i=t.length,n=this.tension(),s=Fr(t[i-2],t[i-1],t[0],t[1],t[2],t[3],n),r=Fr(t[i-4],t[i-3],t[i-2],t[i-1],t[0],t[1],n),a=po(t,n),o=[s[2],s[3]].concat(a).concat([r[0],r[1],t[i-2],t[i-1],r[2],r[3],s[0],s[1],t[0],t[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();for(var i=t[0],n=t[0],s=t[1],r=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],i=Math.min(i,a),n=Math.max(n,a),s=Math.min(s,o),r=Math.max(r,o);return{x:i,y:s,width:n-i,height:r-s}}}qs=fa.Line=li;li.prototype.className="Line";li.prototype._attrsAffectingSize=["points","bezier","tension"];(0,gf._registerNode)(li);Js.Factory.addGetterSetter(li,"closed",!1);Js.Factory.addGetterSetter(li,"bezier",!1);Js.Factory.addGetterSetter(li,"tension",0,(0,Ul.getNumberValidator)());Js.Factory.addGetterSetter(li,"points",[],(0,Ul.getNumberArrayValidator)());var ga={};Object.defineProperty(ga,"__esModule",{value:!0});var nn=ga.Rect=void 0;const pf=Rt,_f=en,mf=Be,vf=je,yf=be;class Qs extends _f.Shape{_sceneFunc(t){var i=this.cornerRadius(),n=this.width(),s=this.height();t.beginPath(),i?vf.Util.drawRoundedRectPath(t,n,s,i):t.rect(0,0,n,s),t.closePath(),t.fillStrokeShape(this)}}nn=ga.Rect=Qs;Qs.prototype.className="Rect";(0,mf._registerNode)(Qs);pf.Factory.addGetterSetter(Qs,"cornerRadius",0,(0,yf.getNumberOrArrayOfNumbersValidator)(4));var An={};Object.defineProperty(An,"__esModule",{value:!0});var xi=An.Text=An.stringToArray=void 0;const Nr=je,tt=Rt,bf=en,hi=be,wf=Be;function Hl(e){return Array.from(e)}An.stringToArray=Hl;var Wi="auto",Sf="center",on="justify",Cf="Change.konva",Tf="2d",_o="-",Vl="left",Ef="text",kf="Text",xf="top",Af="bottom",mo="middle",zl="normal",Pf="px ",es=" ",If="right",Mf="word",Of="char",vo="none",gr="\u2026",$l=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Df=$l.length;function Lf(e){return e.split(",").map(t=>{t=t.trim();const i=t.indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return i&&!n&&(t=`"${t}"`),t}).join(", ")}var ts;function pr(){return ts||(ts=Nr.Util.createCanvasElement().getContext(Tf),ts)}function Rf(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Ff(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Nf(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class Ge extends bf.Shape{constructor(t){super(Nf(t)),this._partialTextX=0,this._partialTextY=0;for(var i=0;i<Df;i++)this.on($l[i]+Cf,this._setTextData);this._setTextData()}_sceneFunc(t){var i=this.textArr,n=i.length;if(!!this.text()){var s=this.padding(),r=this.fontSize(),a=this.lineHeight()*r,o=this.verticalAlign(),l=0,h=this.align(),d=this.getWidth(),f=this.letterSpacing(),y=this.fill(),g=this.textDecoration(),_=g.indexOf("underline")!==-1,b=g.indexOf("line-through")!==-1,v,A=0,A=a/2,E=0,c=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",mo),t.setAttr("textAlign",Vl),o===mo?l=(this.getHeight()-n*a-s*2)/2:o===Af&&(l=this.getHeight()-n*a-s*2),t.translate(s,l+s),v=0;v<n;v++){var E=0,c=0,u=i[v],C=u.text,k=u.width,F=u.lastInParagraph,S,W,x;if(t.save(),h===If?E+=d-k-s*2:h===Sf&&(E+=(d-k-s*2)/2),_){t.save(),t.beginPath(),t.moveTo(E,A+c+Math.round(r/2)),S=C.split(" ").length-1,W=S===0,x=h===on&&!F?d-s*2:k,t.lineTo(E+Math.round(x),A+c+Math.round(r/2)),t.lineWidth=r/15;const de=this._getLinearGradient();t.strokeStyle=de||y,t.stroke(),t.restore()}if(b){t.save(),t.beginPath(),t.moveTo(E,A+c),S=C.split(" ").length-1,W=S===0,x=h===on&&F&&!W?d-s*2:k,t.lineTo(E+Math.round(x),A+c),t.lineWidth=r/15;const de=this._getLinearGradient();t.strokeStyle=de||y,t.stroke(),t.restore()}if(f!==0||h===on){S=C.split(" ").length-1;for(var N=Hl(C),Y=0;Y<N.length;Y++){var X=N[Y];X===" "&&!F&&h===on&&(E+=(d-s*2-k)/S),this._partialTextX=E,this._partialTextY=A+c,this._partialText=X,t.fillStrokeShape(this),E+=this.measureSize(X).width+f}}else this._partialTextX=E,this._partialTextY=A+c,this._partialText=C,t.fillStrokeShape(this);t.restore(),n>1&&(A+=a)}}}_hitFunc(t){var i=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}setText(t){var i=Nr.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(Ef,i),this}getWidth(){var t=this.attrs.width===Wi||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var t=this.attrs.height===Wi||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Nr.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var i=pr(),n=this.fontSize(),s;return i.save(),i.font=this._getContextFont(),s=i.measureText(t),i.restore(),{width:s.width,height:n}}_getContextFont(){return this.fontStyle()+es+this.fontVariant()+es+(this.fontSize()+Pf)+Lf(this.fontFamily())}_addTextLine(t){this.align()===on&&(t=t.trim());var n=this._getTextWidth(t);return this.textArr.push({text:t,width:n,lastInParagraph:!1})}_getTextWidth(t){var i=this.letterSpacing(),n=t.length;return pr().measureText(t).width+(n?i*(n-1):0)}_setTextData(){var t=this.text().split(`
`),i=+this.fontSize(),n=0,s=this.lineHeight()*i,r=this.attrs.width,a=this.attrs.height,o=r!==Wi&&r!==void 0,l=a!==Wi&&a!==void 0,h=this.padding(),d=r-h*2,f=a-h*2,y=0,g=this.wrap(),_=g!==vo,b=g!==Of&&_,v=this.ellipsis();this.textArr=[],pr().font=this._getContextFont();for(var A=v?this._getTextWidth(gr):0,E=0,c=t.length;E<c;++E){var u=t[E],C=this._getTextWidth(u);if(o&&C>d)for(;u.length>0;){for(var k=0,F=u.length,S="",W=0;k<F;){var x=k+F>>>1,N=u.slice(0,x+1),Y=this._getTextWidth(N)+A;Y<=d?(k=x+1,S=N,W=Y):F=x}if(S){if(b){var X,te=u[S.length],le=te===es||te===_o;le&&W<=d?X=S.length:X=Math.max(S.lastIndexOf(es),S.lastIndexOf(_o))+1,X>0&&(k=X,S=S.slice(0,k),W=this._getTextWidth(S))}S=S.trimRight(),this._addTextLine(S),n=Math.max(n,W),y+=s;var de=this._shouldHandleEllipsis(y);if(de){this._tryToAddEllipsisToLastLine();break}if(u=u.slice(k),u=u.trimLeft(),u.length>0&&(C=this._getTextWidth(u),C<=d)){this._addTextLine(u),y+=s,n=Math.max(n,C);break}}else break}else this._addTextLine(u),y+=s,n=Math.max(n,C),this._shouldHandleEllipsis(y)&&E<c-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&y+s>f)break}this.textHeight=i,this.textWidth=n}_shouldHandleEllipsis(t){var i=+this.fontSize(),n=this.lineHeight()*i,s=this.attrs.height,r=s!==Wi&&s!==void 0,a=this.padding(),o=s-a*2,l=this.wrap(),h=l!==vo;return!h||r&&t+n>o}_tryToAddEllipsisToLastLine(){var t=this.attrs.width,i=t!==Wi&&t!==void 0,n=this.padding(),s=t-n*2,r=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(!(!a||!r)){if(i){var o=this._getTextWidth(a.text+gr)<s;o||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+gr)}}getStrokeScaleEnabled(){return!0}}xi=An.Text=Ge;Ge.prototype._fillFunc=Rf;Ge.prototype._strokeFunc=Ff;Ge.prototype.className=kf;Ge.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,wf._registerNode)(Ge);tt.Factory.overWriteSetter(Ge,"width",(0,hi.getNumberOrAutoValidator)());tt.Factory.overWriteSetter(Ge,"height",(0,hi.getNumberOrAutoValidator)());tt.Factory.addGetterSetter(Ge,"fontFamily","Arial");tt.Factory.addGetterSetter(Ge,"fontSize",12,(0,hi.getNumberValidator)());tt.Factory.addGetterSetter(Ge,"fontStyle",zl);tt.Factory.addGetterSetter(Ge,"fontVariant",zl);tt.Factory.addGetterSetter(Ge,"padding",0,(0,hi.getNumberValidator)());tt.Factory.addGetterSetter(Ge,"align",Vl);tt.Factory.addGetterSetter(Ge,"verticalAlign",xf);tt.Factory.addGetterSetter(Ge,"lineHeight",1,(0,hi.getNumberValidator)());tt.Factory.addGetterSetter(Ge,"wrap",Mf);tt.Factory.addGetterSetter(Ge,"ellipsis",!1,(0,hi.getBooleanValidator)());tt.Factory.addGetterSetter(Ge,"letterSpacing",0,(0,hi.getNumberValidator)());tt.Factory.addGetterSetter(Ge,"text","",(0,hi.getStringValidator)());tt.Factory.addGetterSetter(Ge,"textDecoration","");function Oi(e,t){this._waveformData=e,this._channelIndex=t}Oi.prototype.min_sample=function(e){var t=(e*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._at(t)};Oi.prototype.max_sample=function(e){var t=(e*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._at(t)};Oi.prototype.set_min_sample=function(e,t){var i=(e*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._set_at(i,t)};Oi.prototype.set_max_sample=function(e,t){var i=(e*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._set_at(i,t)};Oi.prototype.min_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2)};Oi.prototype.max_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2+1)};var Gi=127,is=-128;function Bf(e,t){var i=Math.floor(e/t),n=e-i*t;return n>0&&i++,i}function Wf(e){var t=e.scale,i=e.amplitude_scale,n=e.split_channels,s=e.length,r=e.sample_rate,a=e.channels.map(function(C){return new Float32Array(C)}),o=n?a.length:1,l=o===1?1:2,h=l===1?20:24,d=Bf(s,t),f=h+d*2*o,y=new ArrayBuffer(f),g=new DataView(y),_=0,b=h,v,A,E=new Array(o),c=new Array(o);for(v=0;v<o;v++)E[v]=1/0,c[v]=-1/0;for(g.setInt32(0,l,!0),g.setUint32(4,1,!0),g.setInt32(8,r,!0),g.setInt32(12,t,!0),g.setInt32(16,d,!0),l===2&&g.setInt32(20,o,!0),A=0;A<s;A++){var u=0;if(o===1){for(v=0;v<a.length;++v)u+=a[v][A];u=Math.floor(Gi*u*i/a.length),u<E[0]&&(E[0]=u,E[0]<is&&(E[0]=is)),u>c[0]&&(c[0]=u,c[0]>Gi&&(c[0]=Gi))}else for(v=0;v<o;++v)u=Math.floor(Gi*a[v][A]*i),u<E[v]&&(E[v]=u,E[v]<is&&(E[v]=is)),u>c[v]&&(c[v]=u,c[v]>Gi&&(c[v]=Gi));if(++_===t){for(v=0;v<o;v++)g.setInt8(b++,E[v]),g.setInt8(b++,c[v]),E[v]=1/0,c[v]=-1/0;_=0}}if(_>0)for(v=0;v<o;v++)g.setInt8(b++,E[v]),g.setInt8(b++,c[v]);return y}function mn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mn=function(t){return typeof t}:mn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(e)}function Gf(e){return e&&mn(e)==="object"&&"sample_rate"in e&&"samples_per_pixel"in e&&"bits"in e&&"length"in e&&"data"in e}function Uf(e){var t=e&&mn(e)==="object"&&"byteLength"in e;if(t){var i=new DataView(e),n=i.getInt32(0,!0);if(n!==1&&n!==2)throw new TypeError("WaveformData.create(): This waveform data version not supported")}return t}function Hf(e){var t=e.data,i=e.channels||1,n=24,s=e.bits===8?1:2,r=e.length*2*i;if(t.length!==r)throw new Error("WaveformData.create(): Length mismatch in JSON waveform data");var a=n+t.length*s,o=new ArrayBuffer(a),l=new DataView(o);l.setInt32(0,2,!0),l.setUint32(4,e.bits===8,!0),l.setInt32(8,e.sample_rate,!0),l.setInt32(12,e.samples_per_pixel,!0),l.setInt32(16,e.length,!0),l.setInt32(20,i,!0);var h=n,d;if(e.bits===8)for(d=0;d<t.length;d++)l.setInt8(h++,t[d],!0);else for(d=0;d<t.length;d++)l.setInt16(h,t[d],!0),h+=2;return o}function Vf(e,t){var i=atob(e);if(t){for(var n=new Uint8Array(i.length),s=0,r=i.length;s<r;++s)n[s]=i.charCodeAt(s);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}function zf(e,t,i){var n=t===void 0?null:t,s=i===void 0?!1:i,r=Vf(e,s),a=r.indexOf(`
`,10)+1,o=r.substring(a)+(n?"//# sourceMappingURL="+n:""),l=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(l)}function $f(e,t,i){var n;return function(r){return n=n||zf(e,t,i),new Worker(n,r)}}var Xf=$f("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogQXVkaW9CdWZmZXItYmFzZWQgV2F2ZWZvcm1EYXRhIGdlbmVyYXRvcgogICAqCiAgICogQWRhcHRlZCBmcm9tIEJsb2NrRmlsZTo6Q2FsY1N1bW1hcnkgaW4gQXVkYWNpdHksIHdpdGggcGVybWlzc2lvbi4KICAgKiBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9hdWRhY2l0eS9zb3VyY2UvYnJvd3NlL2F1ZGFjaXR5LXNyYy90cnVuay9zcmMvQmxvY2tGaWxlLmNwcAogICAqLwogIHZhciBJTlQ4X01BWCA9IDEyNzsKICB2YXIgSU5UOF9NSU4gPSAtMTI4OwoKICBmdW5jdGlvbiBjYWxjdWxhdGVXYXZlZm9ybURhdGFMZW5ndGgoYXVkaW9fc2FtcGxlX2NvdW50LCBzY2FsZSkgewogICAgdmFyIGRhdGFfbGVuZ3RoID0gTWF0aC5mbG9vcihhdWRpb19zYW1wbGVfY291bnQgLyBzY2FsZSk7CiAgICB2YXIgc2FtcGxlc19yZW1haW5pbmcgPSBhdWRpb19zYW1wbGVfY291bnQgLSBkYXRhX2xlbmd0aCAqIHNjYWxlOwoKICAgIGlmIChzYW1wbGVzX3JlbWFpbmluZyA+IDApIHsKICAgICAgZGF0YV9sZW5ndGgrKzsKICAgIH0KCiAgICByZXR1cm4gZGF0YV9sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBnZW5lcmF0ZVdhdmVmb3JtRGF0YShvcHRpb25zKSB7CiAgICB2YXIgc2NhbGUgPSBvcHRpb25zLnNjYWxlOwogICAgdmFyIGFtcGxpdHVkZV9zY2FsZSA9IG9wdGlvbnMuYW1wbGl0dWRlX3NjYWxlOwogICAgdmFyIHNwbGl0X2NoYW5uZWxzID0gb3B0aW9ucy5zcGxpdF9jaGFubmVsczsKICAgIHZhciBsZW5ndGggPSBvcHRpb25zLmxlbmd0aDsKICAgIHZhciBzYW1wbGVfcmF0ZSA9IG9wdGlvbnMuc2FtcGxlX3JhdGU7CiAgICB2YXIgY2hhbm5lbHMgPSBvcHRpb25zLmNoYW5uZWxzLm1hcChmdW5jdGlvbiAoY2hhbm5lbCkgewogICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShjaGFubmVsKTsKICAgIH0pOwogICAgdmFyIG91dHB1dF9jaGFubmVscyA9IHNwbGl0X2NoYW5uZWxzID8gY2hhbm5lbHMubGVuZ3RoIDogMTsKICAgIHZhciB2ZXJzaW9uID0gb3V0cHV0X2NoYW5uZWxzID09PSAxID8gMSA6IDI7CiAgICB2YXIgaGVhZGVyX3NpemUgPSB2ZXJzaW9uID09PSAxID8gMjAgOiAyNDsKICAgIHZhciBkYXRhX2xlbmd0aCA9IGNhbGN1bGF0ZVdhdmVmb3JtRGF0YUxlbmd0aChsZW5ndGgsIHNjYWxlKTsKICAgIHZhciB0b3RhbF9zaXplID0gaGVhZGVyX3NpemUgKyBkYXRhX2xlbmd0aCAqIDIgKiBvdXRwdXRfY2hhbm5lbHM7CiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRvdGFsX3NpemUpOwogICAgdmFyIGRhdGFfdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpOwogICAgdmFyIHNjYWxlX2NvdW50ZXIgPSAwOwogICAgdmFyIG9mZnNldCA9IGhlYWRlcl9zaXplOwogICAgdmFyIGNoYW5uZWwsIGk7CiAgICB2YXIgbWluX3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CiAgICB2YXIgbWF4X3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CgogICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICBtYXhfdmFsdWVbY2hhbm5lbF0gPSAtSW5maW5pdHk7CiAgICB9CgogICAgZGF0YV92aWV3LnNldEludDMyKDAsIHZlcnNpb24sIHRydWUpOyAvLyBWZXJzaW9uCgogICAgZGF0YV92aWV3LnNldFVpbnQzMig0LCAxLCB0cnVlKTsgLy8gSXMgOCBiaXQ/CgogICAgZGF0YV92aWV3LnNldEludDMyKDgsIHNhbXBsZV9yYXRlLCB0cnVlKTsgLy8gU2FtcGxlIHJhdGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTIsIHNjYWxlLCB0cnVlKTsgLy8gU2NhbGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTYsIGRhdGFfbGVuZ3RoLCB0cnVlKTsgLy8gTGVuZ3RoCgogICAgaWYgKHZlcnNpb24gPT09IDIpIHsKICAgICAgZGF0YV92aWV3LnNldEludDMyKDIwLCBvdXRwdXRfY2hhbm5lbHMsIHRydWUpOwogICAgfQoKICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgc2FtcGxlID0gMDsKCiAgICAgIGlmIChvdXRwdXRfY2hhbm5lbHMgPT09IDEpIHsKICAgICAgICBmb3IgKGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgY2hhbm5lbHMubGVuZ3RoOyArK2NoYW5uZWwpIHsKICAgICAgICAgIHNhbXBsZSArPSBjaGFubmVsc1tjaGFubmVsXVtpXTsKICAgICAgICB9CgogICAgICAgIHNhbXBsZSA9IE1hdGguZmxvb3IoSU5UOF9NQVggKiBzYW1wbGUgKiBhbXBsaXR1ZGVfc2NhbGUgLyBjaGFubmVscy5sZW5ndGgpOwoKICAgICAgICBpZiAoc2FtcGxlIDwgbWluX3ZhbHVlWzBdKSB7CiAgICAgICAgICBtaW5fdmFsdWVbMF0gPSBzYW1wbGU7CgogICAgICAgICAgaWYgKG1pbl92YWx1ZVswXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgIG1pbl92YWx1ZVswXSA9IElOVDhfTUlOOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHNhbXBsZSA+IG1heF92YWx1ZVswXSkgewogICAgICAgICAgbWF4X3ZhbHVlWzBdID0gc2FtcGxlOwoKICAgICAgICAgIGlmIChtYXhfdmFsdWVbMF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICBtYXhfdmFsdWVbMF0gPSBJTlQ4X01BWDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgKytjaGFubmVsKSB7CiAgICAgICAgICBzYW1wbGUgPSBNYXRoLmZsb29yKElOVDhfTUFYICogY2hhbm5lbHNbY2hhbm5lbF1baV0gKiBhbXBsaXR1ZGVfc2NhbGUpOwoKICAgICAgICAgIGlmIChzYW1wbGUgPCBtaW5fdmFsdWVbY2hhbm5lbF0pIHsKICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gc2FtcGxlOwoKICAgICAgICAgICAgaWYgKG1pbl92YWx1ZVtjaGFubmVsXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gSU5UOF9NSU47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2FtcGxlID4gbWF4X3ZhbHVlW2NoYW5uZWxdKSB7CiAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IHNhbXBsZTsKCiAgICAgICAgICAgIGlmIChtYXhfdmFsdWVbY2hhbm5lbF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IElOVDhfTUFYOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoKytzY2FsZV9jb3VudGVyID09PSBzY2FsZSkgewogICAgICAgIGZvciAoY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBvdXRwdXRfY2hhbm5lbHM7IGNoYW5uZWwrKykgewogICAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgICBkYXRhX3ZpZXcuc2V0SW50OChvZmZzZXQrKywgbWF4X3ZhbHVlW2NoYW5uZWxdKTsKICAgICAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICAgICAgbWF4X3ZhbHVlW2NoYW5uZWxdID0gLUluZmluaXR5OwogICAgICAgIH0KCiAgICAgICAgc2NhbGVfY291bnRlciA9IDA7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc2NhbGVfY291bnRlciA+IDApIHsKICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1heF92YWx1ZVtjaGFubmVsXSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnVmZmVyOwogIH0KCiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlKGV2dCkgewogICAgdmFyIGJ1ZmZlciA9IGdlbmVyYXRlV2F2ZWZvcm1EYXRhKGV2dC5kYXRhKTsgLy8gVHJhbnNmZXIgYnVmZmVyIHRvIHRoZSBjYWxsaW5nIHRocmVhZAoKICAgIHRoaXMucG9zdE1lc3NhZ2UoYnVmZmVyLCBbYnVmZmVyXSk7CiAgICB0aGlzLmNsb3NlKCk7CiAgfTsKCn0pKCk7Cgo=",null,!1);function gt(e){if(Gf(e)&&(e=Hf(e)),Uf(e)){this._data=new DataView(e),this._offset=this._version()===2?24:20,this._channels=[];for(var t=0;t<this.channels;t++)this._channels[t]=new Oi(this,t)}else throw new TypeError("WaveformData.create(): Unknown data format")}var ns={scale:512,amplitude_scale:1,split_channels:!1,disable_worker:!1};function jf(e){var t={scale:e.scale||ns.scale,amplitude_scale:e.amplitude_scale||ns.amplitude_scale,split_channels:e.split_channels||ns.split_channels,disable_worker:e.disable_worker||ns.disable_worker};return t}function Kf(e){for(var t=[],i=0;i<e.numberOfChannels;++i)t.push(e.getChannelData(i).buffer);return t}function Xl(e,t,i){var n=Kf(e);if(t.disable_worker){var s=Wf({scale:t.scale,amplitude_scale:t.amplitude_scale,split_channels:t.split_channels,length:e.length,sample_rate:e.sampleRate,channels:n});i(null,new gt(s),e)}else{var r=new Xf;r.onmessage=function(a){i(null,new gt(a.data),e)},r.postMessage({scale:t.scale,amplitude_scale:t.amplitude_scale,split_channels:t.split_channels,length:e.length,sample_rate:e.sampleRate,channels:n},n)}}function Yf(e,t,i,n){function s(r){r||(r=new DOMException("EncodingError")),n(r)}e.decodeAudioData(t,function(r){Xl(r,i,n)},s)}gt.create=function(t){return new gt(t)};gt.createFromAudio=function(e,t){var i=jf(e);if(e.audio_context&&e.array_buffer)return Yf(e.audio_context,e.array_buffer,i,t);if(e.audio_buffer)return Xl(e.audio_buffer,i,t);throw new TypeError("WaveformData.createFromAudio(): Pass either an AudioContext and ArrayBuffer, or an AudioBuffer object")};gt.prototype={resample:function(t){if(t.scale=typeof t.scale=="number"?t.scale:null,t.width=typeof t.width=="number"?t.width:null,t.width!=null&&t.width<=0)throw new RangeError("WaveformData.resample(): width should be a positive integer value");if(t.scale!=null&&t.scale<=0)throw new RangeError("WaveformData.resample(): scale should be a positive integer value");if(!t.scale&&!t.width)throw new Error("WaveformData.resample(): Missing scale or width option");var i=t.scale||Math.floor(this.duration*this.sample_rate/t.width),n=this.scale,s=this.length,r=s*this.scale,a=Math.ceil(r/i),o=24,l=this.bits===8?1:2,h=o+a*2*this.channels*l,d=new ArrayBuffer(h),f=new DataView(d);f.setInt32(0,2,!0),f.setUint32(4,this.bits===8,!0),f.setInt32(8,this.sample_rate,!0),f.setInt32(12,i,!0),f.setInt32(16,a,!0),f.setInt32(20,this.channels,!0);var y=new gt(d),g=0,_=0,b=this.channels,v=new Array(b),A=new Array(b),E;for(E=0;E<b;++E)s>0?(v[E]=this.channel(E).min_sample(g),A[E]=this.channel(E).max_sample(g)):(v[E]=0,A[E]=0);var c=this.bits===8?-128:-32768,u=this.bits===8?127:32767;if(i<n)throw new Error("WaveformData.resample(): Zoom level "+i+" too low, minimum: "+n);var C,k,F,S,W;function x(N){return Math.floor(N*i)}for(;g<s;){for(;Math.floor(x(_)/n)===g;){if(_>0)for(E=0;E<b;++E)y.channel(E).set_min_sample(_-1,v[E]),y.channel(E).set_max_sample(_-1,A[E]);if(W=g,_++,C=x(_),k=x(_-1),C!==k)for(E=0;E<b;++E)v[E]=u,A[E]=c}for(C=x(_),F=Math.floor(C/n),F>s&&(F=s);g<F;){for(E=0;E<b;++E)S=this.channel(E).min_sample(g),S<v[E]&&(v[E]=S),S=this.channel(E).max_sample(g),S>A[E]&&(A[E]=S);g++}}if(g!==W)for(E=0;E<b;++E)y.channel(E).set_min_sample(_-1,v[E]),y.channel(E).set_max_sample(_-1,A[E]);return y},concat:function(){var t=this,i=Array.prototype.slice.call(arguments);i.forEach(function(s){if(t.channels!==s.channels||t.sample_rate!==s.sample_rate||t.bits!==s.bits||t.scale!==s.scale)throw new Error("WaveformData.concat(): Waveforms are incompatible")});var n=this._concatBuffers.apply(this,i);return gt.create(n)},_concatBuffers:function(){var t=Array.prototype.slice.call(arguments),i=this._offset,n=i,s=0,r=[this].concat(t).map(function(_){return _._data.buffer}),a,o;for(a=0;a<r.length;a++){o=r[a];var l=new DataView(o).getInt32(16,!0);n+=o.byteLength-i,s+=l}var h=new ArrayBuffer(n),d=new DataView(r[0]),f=new DataView(h);for(a=0;a<i;a++)f.setUint8(a,d.getUint8(a));f.setInt32(16,s,!0);var y=0,g=new Uint8Array(h,i);for(a=0;a<r.length;a++)o=r[a],g.set(new Uint8Array(o,i),y),y+=o.byteLength-i;return h},_offsetValues:function(t,i,n){var s=[],r=this.channels;n+=t*r*2;for(var a=0;a<i;a++)s.push(this._at(a*r*2+n));return s},_version:function(){return this._data.getInt32(0,!0)},get length(){return this._data.getUint32(16,!0)},get bits(){var e=Boolean(this._data.getUint32(4,!0));return e?8:16},get duration(){return this.length*this.scale/this.sample_rate},get pixels_per_second(){return this.sample_rate/this.scale},get seconds_per_pixel(){return this.scale/this.sample_rate},get channels(){return this._version()===2?this._data.getInt32(20,!0):1},channel:function(t){if(t>=0&&t<this._channels.length)return this._channels[t];throw new RangeError("Invalid channel: "+t)},get sample_rate(){return this._data.getInt32(8,!0)},get scale(){return this._data.getInt32(12,!0)},_at:function(t){return this.bits===8?this._data.getInt8(this._offset+t):this._data.getInt16(this._offset+t*2,!0)},_set_at:function(t,i){return this.bits===8?this._data.setInt8(this._offset+t,i):this._data.setInt16(this._offset+t*2,i,!0)},at_time:function(t){return Math.floor(t*this.sample_rate/this.scale)},time:function(t){return t*this.scale/this.sample_rate},toJSON:function(){for(var t={version:2,channels:this.channels,sample_rate:this.sample_rate,samples_per_pixel:this.scale,bits:this.bits,length:this.length,data:[]},i=0;i<this.length;i++)for(var n=0;n<this.channels;n++)t.data.push(this.channel(n).min_sample(i)),t.data.push(this.channel(n).max_sample(i));return t},toArrayBuffer:function(){return this._data.buffer}};var jl={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function s(l,h,d){this.fn=l,this.context=h,this.once=d||!1}function r(l,h,d,f,y){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new s(d,f||l,y),_=i?i+h:h;return l._events[_]?l._events[_].fn?l._events[_]=[l._events[_],g]:l._events[_].push(g):(l._events[_]=g,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new n:delete l._events[h]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],d,f;if(this._eventsCount===0)return h;for(f in d=this._events)t.call(d,f)&&h.push(i?f.slice(1):f);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},o.prototype.listeners=function(h){var d=i?i+h:h,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var y=0,g=f.length,_=new Array(g);y<g;y++)_[y]=f[y].fn;return _},o.prototype.listenerCount=function(h){var d=i?i+h:h,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(h,d,f,y,g,_){var b=i?i+h:h;if(!this._events[b])return!1;var v=this._events[b],A=arguments.length,E,c;if(v.fn){switch(v.once&&this.removeListener(h,v.fn,void 0,!0),A){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,y),!0;case 5:return v.fn.call(v.context,d,f,y,g),!0;case 6:return v.fn.call(v.context,d,f,y,g,_),!0}for(c=1,E=new Array(A-1);c<A;c++)E[c-1]=arguments[c];v.fn.apply(v.context,E)}else{var u=v.length,C;for(c=0;c<u;c++)switch(v[c].once&&this.removeListener(h,v[c].fn,void 0,!0),A){case 1:v[c].fn.call(v[c].context);break;case 2:v[c].fn.call(v[c].context,d);break;case 3:v[c].fn.call(v[c].context,d,f);break;case 4:v[c].fn.call(v[c].context,d,f,y);break;default:if(!E)for(C=1,E=new Array(A-1);C<A;C++)E[C-1]=arguments[C];v[c].fn.apply(v[c].context,E)}}return!0},o.prototype.on=function(h,d,f){return r(this,h,d,f,!1)},o.prototype.once=function(h,d,f){return r(this,h,d,f,!0)},o.prototype.removeListener=function(h,d,f,y){var g=i?i+h:h;if(!this._events[g])return this;if(!d)return a(this,g),this;var _=this._events[g];if(_.fn)_.fn===d&&(!y||_.once)&&(!f||_.context===f)&&a(this,g);else{for(var b=0,v=[],A=_.length;b<A;b++)(_[b].fn!==d||y&&!_[b].once||f&&_[b].context!==f)&&v.push(_[b]);v.length?this._events[g]=v.length===1?v[0]:v:a(this,g)}return this},o.prototype.removeAllListeners=function(h){var d;return h?(d=i?i+h:h,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o})(jl);var Kl=jl.exports;function vn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vn=function(t){return typeof t}:vn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vn(e)}function Ue(e,t,i){this.time=e,this.type=t,this.id=i}Ue.POINT=0;Ue.SEGMENT_START=1;Ue.SEGMENT_END=2;Ue.sorter=function(e,t){return e.time-t.time};function yo(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e}function pa(e,t){var i=[],n=Math.floor(e%1*Math.pow(10,t)),s=Math.floor(e),r=Math.floor(s/60),a=Math.floor(r/60);a>0&&i.push(a),i.push(r%60),i.push(s%60);for(var o=0;o<i.length;o++)i[o]=yo(i[o],2);return i=i.join(":"),t>0&&(i+="."+yo(n,t)),i}function Zf(e,t){if(t===0)return 0;var i=1;e<0&&(i=-1,e=-e);var n=Math.ceil(e);return i*((n+t-1)/t|0)*t}function pt(e,t,i){return e<t?t:e>i?i:e}function se(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function yn(e,t){for(var i in t)se(t,i)&&(e[i]=t[i]);return e}function qf(e){if(e.length===0)return!0;for(var t=e[0],i=1;i<e.length;i++){if(t>=e[i])return!1;t=e[i]}return!0}function Cs(e){return typeof e=="number"}function Yl(e){return!(typeof e!="number"||e!==e||e===1/0||e===-1/0)}function si(e){return typeof e=="number"&&Number.isFinite(e)}function Pn(e){return e!==null&&vn(e)==="object"&&!Array.isArray(e)}function Ei(e){return typeof e=="string"}function Jf(e){return Object.prototype.toString.call(e).includes("ArrayBuffer")}function ft(e){return e==null}function Qf(e){return typeof e=="function"}function Zl(e){return e===!0||e===!1}function Br(e){return e instanceof HTMLElement}function eg(e){return Array.isArray(e)}function er(e){return Pn(e)&&se(e,"linearGradientStart")&&se(e,"linearGradientEnd")&&se(e,"linearGradientColorStops")&&Cs(e.linearGradientStart)&&Cs(e.linearGradientEnd)&&eg(e.linearGradientColorStops)&&e.linearGradientColorStops.length===2}function _a(e){for(;e.parent!==null;){if(e.parent instanceof Re.Layer)return e;e=e.parent}return null}var tg=/HeadlessChrome/.test(navigator.userAgent);function ig(){return tg||navigator.webdriver?!1:(typeof document>"u"?"undefined":vn(document))==="object"&&"visibilityState"in document&&document.visibilityState==="visible"}var ql=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,ng=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,ri={forward:{},reverse:{}},tr=0,Fn=1,Nn=2;ri.forward[Ue.POINT]=tr;ri.forward[Ue.SEGMENT_START]=Fn;ri.forward[Ue.SEGMENT_END]=Nn;ri.reverse[Ue.POINT]=tr;ri.reverse[Ue.SEGMENT_START]=Nn;ri.reverse[Ue.SEGMENT_END]=Fn;var ir={};ir[tr]="points.enter";ir[Fn]="segments.enter";ir[Nn]="segments.exit";var nr={};nr[tr]="point";nr[Fn]="segment";nr[Nn]="segment";function sg(e,t){switch(t.type){case Ue.POINT:return e.points.getPoint(t.id);case Ue.SEGMENT_START:case Ue.SEGMENT_END:return e.segments.getSegment(t.id);default:throw new Error("getPointOrSegment: id not found?")}}function kt(e){this._cues=[],this._peaks=e,this._previousTime=-1,this._updateCues=this._updateCues.bind(this),this._onPlaying=this._onPlaying.bind(this),this._onSeeked=this._onSeeked.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onAnimationFrame=this._onAnimationFrame.bind(this),this._rAFHandle=null,this._activeSegments={},this._attachEventHandlers()}kt.prototype._updateCues=function(){var e=this,t=e._peaks.points.getPoints(),i=e._peaks.segments.getSegments();e._cues.length=0,t.forEach(function(s){e._cues.push(new Ue(s.time,Ue.POINT,s.id))}),i.forEach(function(s){e._cues.push(new Ue(s.startTime,Ue.SEGMENT_START,s.id)),e._cues.push(new Ue(s.endTime,Ue.SEGMENT_END,s.id))}),e._cues.sort(Ue.sorter);var n=e._peaks.player.getCurrentTime();e._updateActiveSegments(n)};kt.prototype._onUpdate=function(e,t){var i=e>t,n,s,r;i?(n=0,s=this._cues.length,r=1):(n=this._cues.length-1,s=-1,r=-1);for(var a=n;i?a<s:a>s;a+=r){var o=this._cues[a];if(i?o.time>t:o.time<t){if(i?o.time>e:o.time<e)break;var l=sg(this._peaks,o),h=i?ri.forward[o.type]:ri.reverse[o.type];h===Fn?this._activeSegments[l.id]=l:h===Nn&&delete this._activeSegments[l.id];var d={time:e};d[nr[h]]=l,this._peaks.emit(ir[h],d)}}};kt.prototype._onTimeUpdate=function(e){ig()||(this._peaks.player.isPlaying()&&!this._peaks.player.isSeeking()&&this._onUpdate(e,this._previousTime),this._previousTime=e)};kt.prototype._onAnimationFrame=function(){var e=this._peaks.player.getCurrentTime();this._peaks.player.isSeeking()||this._onUpdate(e,this._previousTime),this._previousTime=e,this._peaks.player.isPlaying()&&(this._rAFHandle=ql(this._onAnimationFrame))};kt.prototype._onPlaying=function(){this._previousTime=this._peaks.player.getCurrentTime(),this._rAFHandle=ql(this._onAnimationFrame)};kt.prototype._onSeeked=function(e){this._previousTime=e,this._updateActiveSegments(e)};function rg(e){return function(i){return i.id===e}}kt.prototype._updateActiveSegments=function(e){var t=this,i=t._peaks.segments.getSegmentsAtTime(e);for(var n in t._activeSegments)if(se(t._activeSegments,n)){var s=i.find(rg(n));s||(t._peaks.emit("segments.exit",{segment:t._activeSegments[n],time:e}),delete t._activeSegments[n])}i.forEach(function(r){r.id in t._activeSegments||(t._activeSegments[r.id]=r,t._peaks.emit("segments.enter",{segment:r,time:e}))})};var Ts=["points.update","points.dragmove","points.add","points.remove","points.remove_all","segments.update","segments.dragged","segments.add","segments.remove","segments.remove_all"];kt.prototype._attachEventHandlers=function(){this._peaks.on("player.timeupdate",this._onTimeUpdate),this._peaks.on("player.playing",this._onPlaying),this._peaks.on("player.seeked",this._onSeeked);for(var e=0;e<Ts.length;e++)this._peaks.on(Ts[e],this._updateCues);this._updateCues()};kt.prototype._detachEventHandlers=function(){this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.seeked",this._onSeeked);for(var e=0;e<Ts.length;e++)this._peaks.off(Ts[e],this._updateCues)};kt.prototype.destroy=function(){this._rAFHandle&&(ng(this._rAFHandle),this._rAFHandle=null),this._detachEventHandlers(),this._previousTime=-1};var Jl=["id","pid","time","labelText","color","editable"],ag=["update","isVisible","peaks","pid"];function og(e,t){ft(e.labelText)&&(e.labelText=""),ft(e.editable)&&(e.editable=!1),ft(e.color)&&(e.color=t.pointMarkerColor)}function Ql(e,t){var i=t?"update()":"add()";if((!t||t&&se(e,"time"))&&!si(e.time))throw new TypeError("peaks.points."+i+": time should be a numeric value");if(e.time<0)throw new RangeError("peaks.points."+i+": time should not be negative");if(se(e,"labelText")&&!Ei(e.labelText))throw new TypeError("peaks.points."+i+": labelText must be a string");if(se(e,"editable")&&!Zl(e.editable))throw new TypeError("peaks.points."+i+": editable must be true or false");if(se(e,"color")&&!Ei(e.color)&&!er(e.color))throw new TypeError("peaks.points."+i+": color must be a string or a valid linear gradient object");ag.forEach(function(n){if(se(e,n))throw new Error("peaks.points."+i+": invalid option name: "+n)}),Jl.forEach(function(n){if(se(e,"_"+n))throw new Error("peaks.points."+i+": invalid option name: _"+n)})}function sn(e,t,i){this._peaks=e,this._pid=t,this._setUserData(i)}sn.prototype._setUserData=function(e){for(var t in e)se(e,t)&&(Jl.indexOf(t)===-1?this[t]=e[t]:this["_"+t]=e[t])};Object.defineProperties(sn.prototype,{id:{enumerable:!0,get:function(){return this._id}},pid:{enumerable:!0,get:function(){return this._pid}},time:{enumerable:!0,get:function(){return this._time}},labelText:{get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}});sn.prototype.update=function(e){if(Ql(e,!0),se(e,"id")){if(ft(e.id))throw new TypeError("point.update(): invalid id");this._peaks.points.updatePointId(this,e.id)}this._setUserData(e),this._peaks.emit("points.update",this,e)};sn.prototype.isVisible=function(e,t){return this.time>=e&&this.time<t};sn.prototype._setTime=function(e){this._time=e};function Ke(e){this._peaks=e,this._points=[],this._pointsById={},this._pointsByPid={},this._pointIdCounter=0,this._pointPid=0}Ke.prototype._getNextPointId=function(){return"peaks.point."+this._pointIdCounter++};Ke.prototype._getNextPid=function(){return this._pointPid++};Ke.prototype._addPoint=function(e){this._points.push(e),this._pointsById[e.id]=e,this._pointsByPid[e.pid]=e};Ke.prototype._createPoint=function(e){var t={};yn(t,e),ft(t.id)&&(t.id=this._getNextPointId());var i=this._getNextPid();return og(t,this._peaks.options),Ql(t,!1),new sn(this._peaks,i,t)};Ke.prototype.getPoints=function(){return this._points};Ke.prototype.getPoint=function(e){return this._pointsById[e]};Ke.prototype.find=function(e,t){return this._points.filter(function(i){return i.isVisible(e,t)})};Ke.prototype.add=function(){var e=this,t=Array.isArray(arguments[0]),i=t?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(n){var s=e._createPoint(n);if(se(e._pointsById,s.id))throw new Error("peaks.points.add(): duplicate id");return s}),i.forEach(function(n){e._addPoint(n)}),this._peaks.emit("points.add",{points:i}),t?i:i[0]};Ke.prototype.updatePointId=function(e,t){if(this._pointsById[e.id]){if(this._pointsById[t])throw new Error("point.update(): duplicate id");delete this._pointsById[e.id],this._pointsById[t]=e}};Ke.prototype._findPoint=function(e){for(var t=[],i=0,n=this._points.length;i<n;i++)e(this._points[i])&&t.push(i);return t};Ke.prototype._removeIndexes=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i]-t.length,s=this._points.splice(n,1)[0];delete this._pointsById[s.id],delete this._pointsByPid[s.pid],t.push(s)}return t};Ke.prototype._removePoints=function(e){var t=this._findPoint(e),i=this._removeIndexes(t);return this._peaks.emit("points.remove",{points:i}),i};Ke.prototype.remove=function(e){return this._removePoints(function(t){return t===e})};Ke.prototype.removeById=function(e){return this._removePoints(function(t){return t.id===e})};Ke.prototype.removeByTime=function(e){return this._removePoints(function(t){return t.time===e})};Ke.prototype.removeAll=function(){this._points=[],this._pointsById={},this._pointsByPid={},this._peaks.emit("points.remove_all")};var eh=["id","pid","startTime","endTime","labelText","color","borderColor","editable"],lg=["update","isVisible","peaks","pid"];function hg(e,t){ft(e.color)&&(t.overlay?e.color=t.overlayColor:e.color=t.waveformColor),ft(e.borderColor)&&(e.borderColor=t.overlayBorderColor),ft(e.labelText)&&(e.labelText=""),ft(e.editable)&&(e.editable=!1)}function th(e,t){var i=t?"update()":"add()";if(se(e,"startTime")&&!si(e.startTime))throw new TypeError("peaks.segments."+i+": startTime should be a valid number");if(se(e,"endTime")&&!si(e.endTime))throw new TypeError("peaks.segments."+i+": endTime should be a valid number");if(!t&&(!se(e,"startTime")||!se(e,"endTime")))throw new TypeError("peaks.segments."+i+": missing startTime or endTime");if(e.startTime<0)throw new RangeError("peaks.segments."+i+": startTime should not be negative");if(e.endTime<0)throw new RangeError("peaks.segments."+i+": endTime should not be negative");if(e.endTime<e.startTime)throw new RangeError("peaks.segments."+i+": endTime should not be less than startTime");if(se(e,"labelText")&&!Ei(e.labelText))throw new TypeError("peaks.segments."+i+": labelText must be a string");if(se(e,"editable")&&!Zl(e.editable))throw new TypeError("peaks.segments."+i+": editable must be true or false");if(se(e,"color")&&!Ei(e.color)&&!er(e.color))throw new TypeError("peaks.segments."+i+": color must be a string or a valid linear gradient object");if(se(e,"borderColor")&&!Ei(e.borderColor))throw new TypeError("peaks.segments."+i+": borderColor must be a string");lg.forEach(function(n){if(se(e,n))throw new Error("peaks.segments."+i+": invalid option name: "+n)}),eh.forEach(function(n){if(se(e,"_"+n))throw new Error("peaks.segments."+i+": invalid option name: _"+n)})}function Di(e,t,i){this._peaks=e,this._pid=t,this._id=i.id,this._startTime=i.startTime,this._endTime=i.endTime,this._labelText=i.labelText,this._color=i.color,this._borderColor=i.borderColor,this._editable=i.editable,this._setUserData(i)}Di.prototype._setUserData=function(e){for(var t in e)se(e,t)&&(eh.indexOf(t)===-1?this[t]=e[t]:this["_"+t]=e[t])};Object.defineProperties(Di.prototype,{id:{enumerable:!0,get:function(){return this._id}},pid:{enumerable:!0,get:function(){return this._pid}},startTime:{enumerable:!0,get:function(){return this._startTime}},endTime:{enumerable:!0,get:function(){return this._endTime}},labelText:{enumerable:!0,get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},borderColor:{enumerable:!0,get:function(){return this._borderColor}},editable:{enumerable:!0,get:function(){return this._editable}}});Di.prototype.update=function(e){if(th(e,!0),se(e,"id")){if(ft(e.id))throw new TypeError("segment.update(): invalid id");this._peaks.segments.updateSegmentId(this,e.id)}this._setUserData(e),this._peaks.emit("segments.update",this,e)};Di.prototype.isVisible=function(e,t){return this.startTime<t&&e<this.endTime};Di.prototype._setStartTime=function(e){this._startTime=e};Di.prototype._setEndTime=function(e){this._endTime=e};function Fe(e){this._peaks=e,this._segments=[],this._segmentsById={},this._segmentsByPid={},this._segmentIdCounter=0,this._segmentPid=0,this._isInserting=!1}Fe.prototype._getNextSegmentId=function(){return"peaks.segment."+this._segmentIdCounter++};Fe.prototype._getNextPid=function(){return this._segmentPid++};Fe.prototype._addSegment=function(e){this._segments.push(e),this._segmentsById[e.id]=e,this._segmentsByPid[e.pid]=e};Fe.prototype._createSegment=function(e){var t={};yn(t,e),ft(t.id)&&(t.id=this._getNextSegmentId());var i=this._getNextPid();return hg(t,this._peaks.options.segmentOptions),th(t,!1),new Di(this._peaks,i,t)};Fe.prototype.getSegments=function(){return this._segments};Fe.prototype.getSegment=function(e){return this._segmentsById[e]};Fe.prototype.getSegmentsAtTime=function(e){return this._segments.filter(function(t){return e>=t.startTime&&e<t.endTime})};Fe.prototype.find=function(e,t){return this._segments.filter(function(i){return i.isVisible(e,t)})};Fe.prototype._getSortedSegments=function(){return this._segments.slice().sort(function(e,t){return e.startTime-t.startTime})};Fe.prototype.findPreviousSegment=function(e){var t=this._getSortedSegments(),i=t.findIndex(function(n){return n.id===e.id});if(i!==-1)return t[i-1]};Fe.prototype.findNextSegment=function(e){var t=this._getSortedSegments(),i=t.findIndex(function(n){return n.id===e.id});if(i!==-1)return t[i+1]};Fe.prototype.add=function(){var e=this,t=Array.isArray(arguments[0]),i=t?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(n){var s=e._createSegment(n);if(se(e._segmentsById,s.id))throw new Error("peaks.segments.add(): duplicate id");return s}),i.forEach(function(n){e._addSegment(n)}),this._peaks.emit("segments.add",{segments:i,insert:this._isInserting}),t?i:i[0]};Fe.prototype.updateSegmentId=function(e,t){if(this._segmentsById[e.id]){if(this._segmentsById[t])throw new Error("segment.update(): duplicate id");delete this._segmentsById[e.id],this._segmentsById[t]=e}};Fe.prototype._findSegment=function(e){for(var t=[],i=0,n=this._segments.length;i<n;i++)e(this._segments[i])&&t.push(i);return t};Fe.prototype._removeIndexes=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i]-t.length,s=this._segments.splice(n,1)[0];delete this._segmentsById[s.id],delete this._segmentsByPid[s.pid],t.push(s)}return t};Fe.prototype._removeSegments=function(e){var t=this._findSegment(e),i=this._removeIndexes(t);return this._peaks.emit("segments.remove",{segments:i}),i};Fe.prototype.remove=function(e){return this._removeSegments(function(t){return t===e})};Fe.prototype.removeById=function(e){return this._removeSegments(function(t){return t.id===e})};Fe.prototype.removeByTime=function(e,t){t=typeof t=="number"?t:0;var i;return t>0?i=function(s){return s.startTime===e&&s.endTime===t}:i=function(s){return s.startTime===e},this._removeSegments(i)};Fe.prototype.removeAll=function(){this._segments=[],this._segmentsById={},this._segmentsByPid={},this._peaks.emit("segments.remove_all")};Fe.prototype.setInserting=function(e){this._isInserting=e};Fe.prototype.isInserting=function(){return this._isInserting};var cg=["OBJECT","TEXTAREA","INPUT","SELECT","OPTION"],ih=32,nh=9,sh=37,rh=39,dg=[ih,nh,sh,rh];function ma(e){this.eventEmitter=e,this._handleKeyEvent=this._handleKeyEvent.bind(this),document.addEventListener("keydown",this._handleKeyEvent),document.addEventListener("keypress",this._handleKeyEvent),document.addEventListener("keyup",this._handleKeyEvent)}ma.prototype._handleKeyEvent=function(t){if(cg.indexOf(t.target.nodeName)===-1){if(dg.indexOf(t.type)>-1&&t.preventDefault(),t.type==="keydown"||t.type==="keypress")switch(t.keyCode){case ih:this.eventEmitter.emit("keyboard.space");break;case nh:this.eventEmitter.emit("keyboard.tab");break}else if(t.type==="keyup")switch(t.keyCode){case sh:t.shiftKey?this.eventEmitter.emit("keyboard.shift_left"):this.eventEmitter.emit("keyboard.left");break;case rh:t.shiftKey?this.eventEmitter.emit("keyboard.shift_right"):this.eventEmitter.emit("keyboard.right");break}}};ma.prototype.destroy=function(){document.removeEventListener("keydown",this._handleKeyEvent),document.removeEventListener("keypress",this._handleKeyEvent),document.removeEventListener("keyup",this._handleKeyEvent)};function ug(e){return!!(e.src||e.querySelector("source"))}function _t(e){this._mediaElement=e}_t.prototype._addMediaListener=function(e,t){this._listeners.push({type:e,callback:t}),this._mediaElement.addEventListener(e,t)};_t.prototype.init=function(e){var t=this;return t._eventEmitter=e,t._listeners=[],t._duration=t.getDuration(),t._addMediaListener("timeupdate",function(){t._eventEmitter.emit("player.timeupdate",t.getCurrentTime())}),t._addMediaListener("playing",function(){t._eventEmitter.emit("player.playing",t.getCurrentTime())}),t._addMediaListener("pause",function(){t._eventEmitter.emit("player.pause",t.getCurrentTime())}),t._addMediaListener("ended",function(){t._eventEmitter.emit("player.ended")}),t._addMediaListener("seeked",function(){t._eventEmitter.emit("player.seeked",t.getCurrentTime())}),t._addMediaListener("canplay",function(){t._eventEmitter.emit("player.canplay")}),t._addMediaListener("error",function(i){t._eventEmitter.emit("player.error",i.target.error)}),t._interval=null,ug(t._mediaElement)?new Promise(function(i,n){function s(r){t._mediaElement.removeEventListener("loadedmetadata",s),t._mediaElement.removeEventListener("error",s),r.type==="loadedmetadata"?i():n(r.target.error)}t._mediaElement.readyState===HTMLMediaElement.HAVE_NOTHING?(t._mediaElement.addEventListener("loadedmetadata",s),t._mediaElement.addEventListener("error",s),t._mediaElement.load()):i()}):Promise.resolve()};_t.prototype.destroy=function(){for(var e=0;e<this._listeners.length;e++){var t=this._listeners[e];this._mediaElement.removeEventListener(t.type,t.callback)}this._listeners.length=0,this._mediaElement=null};_t.prototype.play=function(){return this._mediaElement.play()};_t.prototype.pause=function(){this._mediaElement.pause()};_t.prototype.isPlaying=function(){return!this._mediaElement.paused};_t.prototype.isSeeking=function(){return this._mediaElement.seeking};_t.prototype.getCurrentTime=function(){return this._mediaElement.currentTime};_t.prototype.getDuration=function(){return this._mediaElement.duration};_t.prototype.seek=function(e){this._mediaElement.currentTime=e};function Bn(e,t){this._eventEmitter=e,this._mediaElement=t,this._playerCanPlayHandler=this._playerCanPlayHandler.bind(this),this._playerErrorHandler=this._playerErrorHandler.bind(this)}Bn.prototype.setSource=function(e,t){var i=this;return i._options=e,i._callback=t,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),new Promise(function(n,s){i._resolve=n,i._reject=s,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),i._mediaElement.setAttribute("src",e.mediaUrl),i._mediaElement.readyState===HTMLMediaElement.HAVE_NOTHING&&i._mediaElement.load()})};Bn.prototype._reset=function(){this._eventEmitter.removeListener("player.canplay",this._playerCanPlayHandler),this._eventEmitter.removeListener("player.error",this._playerErrorHandler)};Bn.prototype._playerCanPlayHandler=function(){this._reset(),this._resolve()};Bn.prototype._playerErrorHandler=function(e){this._reset(),this._reject(e)};_t.prototype.setSource=function(e){if(!e.mediaUrl)return Promise.reject(new Error("peaks.setSource(): options must contain a mediaUrl when using mediaElement"));var t=new Bn(this._eventEmitter,this._mediaElement);return t.setSource(e)};function fg(e){for(var t=[],i=e;i;)Object.getOwnPropertyNames(i).forEach(function(n){t.push(n)}),i=Object.getPrototypeOf(i);return t}function gg(e){var t=["init","destroy","play","pause","isPlaying","isSeeking","getCurrentTime","getDuration","seek"],i=fg(e);t.forEach(function(n){if(!i.includes(n))throw new TypeError("Peaks.init(): Player method "+n+" is undefined");if(typeof e[n]!="function")throw new TypeError("Peaks.init(): Player method "+n+" is not a function")})}function ct(e,t){this._peaks=e,this._playingSegment=!1,this._segment=null,this._loop=!1,this._playSegmentTimerCallback=this._playSegmentTimerCallback.bind(this),gg(t),this._adapter=t}ct.prototype.init=function(){return this._adapter.init(this._peaks)};ct.prototype.destroy=function(){this._adapter.destroy()};ct.prototype.play=function(){return this._adapter.play()};ct.prototype.pause=function(){this._adapter.pause()};ct.prototype.isPlaying=function(){return this._adapter.isPlaying()};ct.prototype.isSeeking=function(){return this._adapter.isSeeking()};ct.prototype.getCurrentTime=function(){return this._adapter.getCurrentTime()};ct.prototype.getDuration=function(){return this._adapter.getDuration()};ct.prototype.seek=function(e){if(!si(e)){this._peaks._logger("peaks.player.seek(): parameter must be a valid time, in seconds");return}this._adapter.seek(e)};ct.prototype.playSegment=function(e,t){var i=this;return!e||!si(e.startTime)||!si(e.endTime)?Promise.reject(new Error("peaks.player.playSegment(): parameter must be a segment object")):(i._segment=e,i._loop=t,i.seek(e.startTime),i._peaks.once("player.playing",function(){i._playingSegment||(i._playingSegment=!0,window.requestAnimationFrame(i._playSegmentTimerCallback))}),i.play())};ct.prototype._playSegmentTimerCallback=function(){if(this.isPlaying()){if(this.getCurrentTime()>=this._segment.endTime)if(this._loop)this.seek(this._segment.startTime);else{this.pause(),this._peaks.emit("player.ended"),this._playingSegment=!1;return}}else{this._playingSegment=!1;return}window.requestAnimationFrame(this._playSegmentTimerCallback)};ct.prototype._setSource=function(e){return this._adapter.setSource(e)};function Wn(e){this._options=e,this._draggable=e.editable}Wn.prototype.init=function(e){var t=10,i=20,n=-(t/2)+.5;this._options.view==="zoomview"&&(this._label=new xi({x:2,y:0,text:this._options.point.labelText,textAlign:"left",fontFamily:this._options.fontFamily||"sans-serif",fontSize:this._options.fontSize||10,fontStyle:this._options.fontStyle||"normal",fill:"#000"})),this._handle=new nn({x:n,y:0,width:t,height:i,fill:this._options.color,visible:this._draggable}),this._line=new qs({x:0,y:0,stroke:this._options.color,strokeWidth:1}),this._time=new xi({x:-24,y:0,text:this._options.layer.formatTime(this._options.point.time),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._time.hide(),e.add(this._handle),e.add(this._line),this._label&&e.add(this._label),e.add(this._time),this.fitToView(),this.bindEventHandlers(e)};Wn.prototype.bindEventHandlers=function(e){var t=this;t._handle.on("mouseover touchstart",function(){t._draggable&&(t._time.setX(-24-t._time.getWidth()),t._time.show())}),t._handle.on("mouseout touchend",function(){t._draggable&&t._time.hide()}),e.on("dragstart",function(){t._time.setX(-24-t._time.getWidth()),t._time.show()}),e.on("dragend",function(){t._time.hide()})};Wn.prototype.fitToView=function(){var e=this._options.layer.getHeight();this._line.points([.5,0,.5,e]),this._label&&this._label.y(12),this._handle&&this._handle.y(e/2-10.5),this._time&&this._time.y(e/2-5)};Wn.prototype.update=function(e){e.time!==void 0&&this._time&&this._time.setText(this._options.layer.formatTime(e.time)),e.labelText!==void 0&&this._label&&this._label.text(e.labelText),e.color!==void 0&&(this._handle&&this._handle.fill(e.color),this._line.stroke(e.color)),e.editable!==void 0&&(this._draggable=e.editable,this._handle.visible(this._draggable))};function Gn(e){this._options=e,this._editable=e.editable}Gn.prototype.init=function(e){var t=10,i=20,n=-(t/2)+.5,s=this._options.startMarker?-24:24,r=this._options.startMarker?this._options.segment.startTime:this._options.segment.endTime;this._label=new xi({x:s,y:0,text:this._options.layer.formatTime(r),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center",visible:this._editable}),this._label.hide(),this._handle=new nn({x:n,y:0,width:t,height:i,fill:this._options.color,stroke:this._options.color,strokeWidth:1,visible:this._editable}),this._line=new qs({x:0,y:0,stroke:this._options.color,strokeWidth:1,visible:this._editable}),e.add(this._label),e.add(this._line),e.add(this._handle),this.fitToView(),this.bindEventHandlers(e)};Gn.prototype.bindEventHandlers=function(e){var t=this,i=t._options.startMarker?-24:24;e.on("dragstart",function(){t._options.startMarker&&t._label.setX(i-t._label.getWidth()),t._label.show()}),e.on("dragend",function(){t._label.hide()}),t._handle.on("mouseover touchstart",function(){t._options.startMarker&&t._label.setX(i-t._label.getWidth()),t._label.show()}),t._handle.on("mouseout touchend",function(){t._label.hide()})};Gn.prototype.fitToView=function(){var e=this._options.layer.getHeight();this._label.y(e/2-5),this._handle.y(e/2-10.5),this._line.points([.5,0,.5,e])};Gn.prototype.update=function(e){e.startTime!==void 0&&this._options.startMarker&&this._label.text(this._options.layer.formatTime(e.startTime)),e.endTime!==void 0&&!this._options.startMarker&&this._label.text(this._options.layer.formatTime(e.endTime)),e.editable!==void 0&&(this._editable=e.editable,this._label.visible(this._editable),this._handle.visible(this._editable),this._line.visible(this._editable))};function pg(e){return e.view==="zoomview"?new Gn(e):null}function _g(e){return new xi({x:12,y:12,text:e.segment.labelText,textAlign:"center",fontFamily:e.fontFamily||"sans-serif",fontSize:e.fontSize||12,fontStyle:e.fontStyle||"normal",fill:"#000"})}function mg(e){return new Wn(e)}function ci(e,t){this._view=e,this._offset=t.highlightOffset,this._color=t.highlightColor,this._layer=new Re.Layer({listening:!1}),this._highlightRect=null,this._startTime=null,this._endTime=null,this._strokeColor=t.highlightStrokeColor,this._opacity=t.highlightOpacity,this._cornerRadius=t.highlightCornerRadius}ci.prototype.addToStage=function(e){e.add(this._layer)};ci.prototype.showHighlight=function(e,t){this._highlightRect||this._createHighlightRect(e,t),this._update(e,t)};ci.prototype._update=function(e,t){this._startTime=e,this._endTime=t;var i=this._view.timeToPixels(e),n=this._view.timeToPixels(t);this._highlightRect.setAttrs({x:i,width:n-i})};ci.prototype._createHighlightRect=function(e,t){this._startTime=e,this._endTime=t;var i=this._view.timeToPixels(e),n=this._view.timeToPixels(t);this._highlightRect=new nn({x:i,y:0,width:n-i,height:0,stroke:this._strokeColor,strokeWidth:1,fill:this._color,opacity:this._opacity,cornerRadius:this._cornerRadius}),this.fitToView(),this._layer.add(this._highlightRect)};ci.prototype.removeHighlight=function(){this._highlightRect&&(this._highlightRect.destroy(),this._highlightRect=null)};ci.prototype.updateHighlight=function(){this._highlightRect&&this._update(this._startTime,this._endTime)};ci.prototype.fitToView=function(){if(this._highlightRect){var e=this._view.getHeight(),t=pt(this._offset,0,Math.floor(e/2));this._highlightRect.setAttrs({y:t,height:e-t*2})}};function it(e){this._player=e.player,this._view=e.view,this._playheadPixel=0,this._playheadLineAnimation=null,this._playheadVisible=!1,this._playheadColor=e.playheadColor,this._playheadTextColor=e.playheadTextColor,this._playheadFontFamily=e.playheadFontFamily,this._playheadFontSize=e.playheadFontSize,this._playheadFontStyle=e.playheadFontStyle,this._playheadLayer=new Re.Layer,this._createPlayhead(this._playheadColor),e.showPlayheadTime&&this._createPlayheadText(this._playheadTextColor),this.fitToView(),this.zoomLevelChanged()}it.prototype.addToStage=function(e){e.add(this._playheadLayer)};it.prototype.zoomLevelChanged=function(){var e=this._view.timeToPixels(1);if(this._useAnimation=e>=5,this._useAnimation)this._player.isPlaying()&&!this._playheadLineAnimation&&this._start();else if(this._playheadLineAnimation){var t=this._player.getCurrentTime();this.stop(t)}};it.prototype.fitToView=function(){var e=this._view.getHeight();this._playheadLine.points([.5,0,.5,e]),this._playheadText&&this._playheadText.y(12)};it.prototype._createPlayhead=function(e){this._playheadLine=new qs({stroke:e,strokeWidth:1}),this._playheadGroup=new Re.Group({x:0,y:0}),this._playheadGroup.add(this._playheadLine),this._playheadLayer.add(this._playheadGroup)};it.prototype._createPlayheadText=function(e){var t=this._player.getCurrentTime(),i=this._view.formatTime(t);this._playheadText=new xi({x:2,y:0,text:i,fontSize:this._playheadFontSize,fontFamily:this._playheadFontFamily,fontStyle:this._playheadFontStyle,fill:e,align:"right"}),this._playheadGroup.add(this._playheadText)};it.prototype.updatePlayheadTime=function(e){this._syncPlayhead(e),this._player.isPlaying()&&this._start()};it.prototype._syncPlayhead=function(e){var t=this._view.timeToPixels(e),i=this._view.getFrameOffset(),n=this._view.getWidth(),s=t>=i&&t<=i+n;if(this._playheadPixel=t,s){var r=this._playheadPixel-i;if(this._playheadVisible||(this._playheadVisible=!0,this._playheadGroup.show()),this._playheadGroup.setX(r),this._playheadText){var a=this._view.formatTime(e),o=this._playheadText.getTextWidth();this._playheadText.setText(a),o+r>n-2?this._playheadText.setX(-o-2):o+r<n&&this._playheadText.setX(2)}}else this._playheadVisible&&(this._playheadVisible=!1,this._playheadGroup.hide());this._view.playheadPosChanged&&this._view.playheadPosChanged(e)};it.prototype._start=function(){var e=this;if(e._playheadLineAnimation&&(e._playheadLineAnimation.stop(),e._playheadLineAnimation=null),!!e._useAnimation){var t=null;e._playheadLineAnimation=new Wl(function(){var i=e._player.getCurrentTime(),n=e._view.timeToPixels(i);n!==t&&(e._syncPlayhead(i),t=n)},e._playheadLayer),e._playheadLineAnimation.start()}};it.prototype.stop=function(e){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null),this._syncPlayhead(e)};it.prototype.getPlayheadPixel=function(){return this._playheadPixel};it.prototype.showPlayheadTime=function(e){e?this._playheadText||(this._createPlayheadText(this._playheadTextColor),this.fitToView()):this._playheadText&&(this._playheadText.remove(),this._playheadText.destroy(),this._playheadText=null)};it.prototype.updatePlayheadText=function(){if(this._playheadText){var e=this._player.getCurrentTime(),t=this._view.formatTime(e);this._playheadText.setText(t)}};it.prototype.destroy=function(){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null)};function xt(e){this._point=e.point,this._marker=e.marker,this._draggable=e.draggable,this._onDragStart=e.onDragStart,this._onDragMove=e.onDragMove,this._onDragEnd=e.onDragEnd,this._dragBoundFunc=e.dragBoundFunc,this._onMouseEnter=e.onMouseEnter,this._onMouseLeave=e.onMouseLeave,this._group=new Re.Group({name:"point-marker",point:this._point,draggable:this._draggable,dragBoundFunc:e.dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}xt.prototype._bindDefaultEventHandlers=function(){var e=this;e._group.on("dragstart",function(t){e._onDragStart(t,e._point)}),e._group.on("dragmove",function(t){e._onDragMove(t,e._point)}),e._group.on("dragend",function(t){e._onDragEnd(t,e._point)}),e._group.on("mouseenter",function(t){e._onMouseEnter(t,e._point)}),e._group.on("mouseleave",function(t){e._onMouseLeave(t,e._point)})};xt.prototype.addToLayer=function(e){e.add(this._group)};xt.prototype.fitToView=function(){this._marker.fitToView()};xt.prototype.getPoint=function(){return this._point};xt.prototype.getX=function(){return this._group.getX()};xt.prototype.setX=function(e){this._group.setX(e)};xt.prototype.getWidth=function(){return this._group.getWidth()};xt.prototype.getAbsolutePosition=function(){return this._group.getAbsolutePosition()};xt.prototype.update=function(e){e.editable!==void 0&&this._group.draggable(e.editable),this._marker.update&&this._marker.update(e)};xt.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};var vg="sans-serif",yg=10,bg="normal";function Ee(e,t,i){this._peaks=e,this._view=t,this._allowEditing=i,this._pointMarkers={},this._layer=new Re.Layer,this._onPointsDrag=this._onPointsDrag.bind(this),this._onPointMarkerDragStart=this._onPointMarkerDragStart.bind(this),this._onPointMarkerDragMove=this._onPointMarkerDragMove.bind(this),this._onPointMarkerDragEnd=this._onPointMarkerDragEnd.bind(this),this._pointMarkerDragBoundFunc=this._pointMarkerDragBoundFunc.bind(this),this._onPointMarkerMouseEnter=this._onPointMarkerMouseEnter.bind(this),this._onPointMarkerMouseLeave=this._onPointMarkerMouseLeave.bind(this),this._onPointsUpdate=this._onPointsUpdate.bind(this),this._onPointsAdd=this._onPointsAdd.bind(this),this._onPointsRemove=this._onPointsRemove.bind(this),this._onPointsRemoveAll=this._onPointsRemoveAll.bind(this),this._peaks.on("points.update",this._onPointsUpdate),this._peaks.on("points.add",this._onPointsAdd),this._peaks.on("points.remove",this._onPointsRemove),this._peaks.on("points.remove_all",this._onPointsRemoveAll),this._peaks.on("points.dragstart",this._onPointsDrag),this._peaks.on("points.dragmove",this._onPointsDrag),this._peaks.on("points.dragend",this._onPointsDrag)}Ee.prototype.addToStage=function(e){e.add(this._layer)};Ee.prototype.enableEditing=function(e){this._allowEditing=e};Ee.prototype.getPointMarker=function(e){return this._pointMarkers[e.pid]};Ee.prototype.formatTime=function(e){return this._view.formatTime(e)};Ee.prototype._onPointsUpdate=function(e,t){var i=this._view.getStartTime(),n=this._view.getEndTime(),s=this.getPointMarker(e),r=e.isVisible(i,n);if(s&&!r)this._removePoint(e);else if(!s&&r)this._updatePoint(e);else if(s&&r){if(se(t,"time")){var a=this._view.timeToPixels(e.time),o=a-this._view.getFrameOffset();s.setX(o)}s.update(t)}};Ee.prototype._onPointsAdd=function(e){var t=this,i=t._view.getStartTime(),n=t._view.getEndTime();e.points.forEach(function(s){s.isVisible(i,n)&&t._updatePoint(s)})};Ee.prototype._onPointsRemove=function(e){var t=this;e.points.forEach(function(i){t._removePoint(i)})};Ee.prototype._onPointsRemoveAll=function(){this._layer.removeChildren(),this._pointMarkers={}};Ee.prototype._createPointMarker=function(e){var t=this._allowEditing&&e.editable,i=this._peaks.options.createPointMarker({point:e,editable:t,color:e.color,fontFamily:this._peaks.options.fontFamily||vg,fontSize:this._peaks.options.fontSize||yg,fontStyle:this._peaks.options.fontStyle||bg,layer:this,view:this._view.getName()});return new xt({point:e,draggable:t,marker:i,onDragStart:this._onPointMarkerDragStart,onDragMove:this._onPointMarkerDragMove,onDragEnd:this._onPointMarkerDragEnd,dragBoundFunc:this._pointMarkerDragBoundFunc,onMouseEnter:this._onPointMarkerMouseEnter,onMouseLeave:this._onPointMarkerMouseLeave})};Ee.prototype.getHeight=function(){return this._view.getHeight()};Ee.prototype._addPointMarker=function(e){var t=this._createPointMarker(e);return this._pointMarkers[e.pid]=t,t.addToLayer(this._layer),t};Ee.prototype._onPointsDrag=function(e){var t=this._updatePoint(e.point);t.update({time:e.point.time})};Ee.prototype._onPointMarkerMouseEnter=function(e,t){this._peaks.emit("points.mouseenter",{point:t,evt:e.evt})};Ee.prototype._onPointMarkerMouseLeave=function(e,t){this._peaks.emit("points.mouseleave",{point:t,evt:e.evt})};Ee.prototype._onPointMarkerDragStart=function(e,t){this._dragPointMarker=this.getPointMarker(t),this._peaks.emit("points.dragstart",{point:t,evt:e.evt})};Ee.prototype._onPointMarkerDragMove=function(e,t){var i=this._pointMarkers[t.pid],n=i.getX(),s=n+i.getWidth();t._setTime(this._view.pixelOffsetToTime(s)),this._peaks.emit("points.dragmove",{point:t,evt:e.evt})};Ee.prototype._onPointMarkerDragEnd=function(e,t){this._dragPointMarker=null,this._peaks.emit("points.dragend",{point:t,evt:e.evt})};Ee.prototype._pointMarkerDragBoundFunc=function(e){return{x:pt(e.x,0,this._view.getWidth()),y:this._dragPointMarker.getAbsolutePosition().y}};Ee.prototype.updatePoints=function(e,t){var i=this._peaks.points.find(e,t);i.forEach(this._updatePoint.bind(this)),this._removeInvisiblePoints(e,t)};Ee.prototype._updatePoint=function(e){var t=this.getPointMarker(e);t||(t=this._addPointMarker(e));var i=this._view.timeToPixels(e.time),n=i-this._view.getFrameOffset();return t.setX(n),t};Ee.prototype._removeInvisiblePoints=function(e,t){for(var i in this._pointMarkers)if(se(this._pointMarkers,i)){var n=this._pointMarkers[i].getPoint();n.isVisible(e,t)||this._removePoint(n)}};Ee.prototype._removePoint=function(e){var t=this.getPointMarker(e);t&&(t.destroy(),delete this._pointMarkers[e.pid])};Ee.prototype.setVisible=function(e){this._layer.setVisible(e)};Ee.prototype.destroy=function(){this._peaks.off("points.update",this._onPointsUpdate),this._peaks.off("points.add",this._onPointsAdd),this._peaks.off("points.remove",this._onPointsRemove),this._peaks.off("points.remove_all",this._onPointsRemoveAll),this._peaks.off("points.dragstart",this._onPointsDrag),this._peaks.off("points.dragmove",this._onPointsDrag),this._peaks.off("points.dragend",this._onPointsDrag)};Ee.prototype.fitToView=function(){for(var e in this._pointMarkers)if(se(this._pointMarkers,e)){var t=this._pointMarkers[e];t.fitToView()}};Ee.prototype.draw=function(){this._layer.draw()};function Un(e){this._options=e}Un.prototype.init=function(e){var t=10,i=20,n=-(t/2)+.5,s=this._options.startMarker?-24:24,r=this._options.startMarker?this._options.segment.startTime:this._options.segment.endTime;this._label=new xi({x:s,y:0,text:this._options.layer.formatTime(r),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center",visible:!1}),this._handle=new nn({x:n,y:0,width:t,height:i}),e.add(this._label),e.add(this._handle),this.fitToView(),this.bindEventHandlers(e)};Un.prototype.bindEventHandlers=function(e){var t=this,i=t._options.startMarker?-24:24;e.on("dragstart",function(){t._options.startMarker&&t._label.setX(i-t._label.getWidth()),t._label.show()}),e.on("dragend",function(){t._label.hide()}),t._handle.on("mouseover touchstart",function(){t._options.startMarker&&t._label.setX(i-t._label.getWidth()),t._label.show(),document.body.style.cursor="ew-resize"}),t._handle.on("mouseout touchend",function(){t._label.hide(),document.body.style.cursor="default"})};Un.prototype.fitToView=function(){var e=this._options.layer.getHeight(),t=this._options.segmentOptions.overlayOffset,i=pt(0,e-2*t);this._label.y(e/2-5),this._handle.y(t),this._handle.height(i)};Un.prototype.update=function(e){e.startTime!==void 0&&this._options.startMarker&&this._label.text(this._options.layer.formatTime(e.startTime)),e.endTime!==void 0&&!this._options.startMarker&&this._label.text(this._options.layer.formatTime(e.endTime))};function Je(e){var t=this;t._segment=e.segment,t._marker=e.marker,t._segmentShape=e.segmentShape,t._editable=e.editable,t._startMarker=e.startMarker,t._onDragStart=e.onDragStart,t._onDragMove=e.onDragMove,t._onDragEnd=e.onDragEnd,t._group=new Re.Group({name:"segment-marker",segment:t._segment,draggable:t._editable,visible:t._editable,dragBoundFunc:function(n){return e.dragBoundFunc(t,n)}}),t._bindDefaultEventHandlers(),t._marker.init(t._group)}Je.prototype._bindDefaultEventHandlers=function(){var e=this;e._group.on("dragstart",function(t){e._onDragStart(e,t)}),e._group.on("dragmove",function(t){e._onDragMove(e,t)}),e._group.on("dragend",function(t){e._onDragEnd(e,t)})};Je.prototype.addToLayer=function(e){e.add(this._group)};Je.prototype.moveToTop=function(){this._group.moveToTop()};Je.prototype.fitToView=function(){this._marker.fitToView()};Je.prototype.getSegment=function(){return this._segment};Je.prototype.getX=function(){return this._group.getX()};Je.prototype.setX=function(e){this._group.setX(e)};Je.prototype.getWidth=function(){return this._group.getWidth()};Je.prototype.getAbsolutePosition=function(){return this._group.getAbsolutePosition()};Je.prototype.isStartMarker=function(){return this._startMarker};Je.prototype.update=function(e){e.editable!==void 0&&(this._group.visible(e.editable),this._group.draggable(e.editable)),this._marker.update&&this._marker.update(e)};Je.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};Je.prototype.startDrag=function(){this._group.startDrag()};Je.prototype.stopDrag=function(){this._group.stopDrag()};function He(e){this._color=e.color;var t={};if(Ei(e.color))t.fill=e.color;else if(er(e.color)){var i=e.view._height*(e.color.linearGradientStart/100),n=e.view._height*(e.color.linearGradientEnd/100);t.fillLinearGradientStartPointY=i,t.fillLinearGradientEndPointY=n,t.fillLinearGradientColorStops=[0,e.color.linearGradientColorStops[0],1,e.color.linearGradientColorStops[1]]}else throw new TypeError("Unknown type for color property");this._shape=new Re.Shape(t),this._view=e.view,this._segment=e.segment,this._shape.sceneFunc(this._sceneFunc.bind(this))}He.prototype.getX=function(){return this._shape.getX()};He.prototype.setX=function(e){return this._shape.setX(e)};He.prototype.setSegment=function(e){this._segment=e};He.prototype.setWaveformColor=function(e){if(Ei(e))this._shape.fill(e),this._shape.fillLinearGradientStartPointY(null),this._shape.fillLinearGradientEndPointY(null),this._shape.fillLinearGradientColorStops(null);else if(er(e)){this._shape.fill(null);var t=this._view._height*(e.linearGradientStart/100),i=this._view._height*(e.linearGradientEnd/100);this._shape.fillLinearGradientStartPointY(t),this._shape.fillLinearGradientEndPointY(i),this._shape.fillLinearGradientColorStops([0,e.linearGradientColorStops[0],1,e.linearGradientColorStops[1]])}else throw new TypeError("Unknown type for color property")};He.prototype.fitToView=function(){this.setWaveformColor(this._color)};He.prototype._sceneFunc=function(e){var t=this._view.getFrameOffset(),i=this._view.getWidth(),n=this._view.getHeight();this._drawWaveform(e,this._view.getWaveformData(),t,this._segment?this._view.timeToPixels(this._segment.startTime):t,this._segment?this._view.timeToPixels(this._segment.endTime):t+i,i,n)};He.prototype._drawWaveform=function(e,t,i,n,s,r,a){n<i&&(n=i);var o=i+r;s>o&&(s=o),s>t.length-1&&(s=t.length-1);for(var l=t.channels,h=0,d=Math.floor(a/l),f=0;f<l;f++)f===l-1&&(d=a-(l-1)*d),this._drawChannel(e,t.channel(f),i,n,s,h,d),h+=d};He.prototype._drawChannel=function(e,t,i,n,s,r,a){var o,l,h=this._view.getAmplitudeScale(),d,f;for(e.beginPath(),o=n;o<=s;o++)l=t.min_sample(o),d=o-i+.5,f=r+He.scaleY(l,a,h)+.5,e.lineTo(d,f);for(o=s;o>=n;o--)l=t.max_sample(o),d=o-i+.5,f=r+He.scaleY(l,a,h)+1,e.lineTo(d,f);e.closePath(),e.fillShape(this._shape)};He.prototype.addToLayer=function(e){e.add(this._shape)};He.prototype.destroy=function(){this._shape.destroy(),this._shape=null};He.prototype.on=function(e,t){this._shape.on(e,t)};He.prototype.off=function(e,t){this._shape.off(e,t)};He.scaleY=function(e,t,i){var n=-(t-1)*(e*i+128)/255+(t-1);return pt(Math.floor(n),0,t-1)};var bo="sans-serif",wo=10,So="normal";function Ce(e,t,i,n){this._segment=e,this._peaks=t,this._layer=i,this._view=n,this._label=null,this._startMarker=null,this._endMarker=null,this._color=e.color,this._borderColor=e.borderColor,this._draggable=this._segment.editable&&this._view.isSegmentDraggingEnabled(),this._dragging=!1;var s=n.getViewOptions().segmentOptions;this._overlayOffset=s.overlayOffset,s.overlay||(this._waveformShape=new He({color:e.color,view:n,segment:e})),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._dragBoundFunc=this._dragBoundFunc.bind(this),this._onSegmentDragStart=this._onSegmentDragStart.bind(this),this._onSegmentDragMove=this._onSegmentDragMove.bind(this),this._onSegmentDragEnd=this._onSegmentDragEnd.bind(this),this._onSegmentMarkerDragStart=this._onSegmentMarkerDragStart.bind(this),this._onSegmentMarkerDragMove=this._onSegmentMarkerDragMove.bind(this),this._onSegmentMarkerDragEnd=this._onSegmentMarkerDragEnd.bind(this),this._segmentMarkerDragBoundFunc=this._segmentMarkerDragBoundFunc.bind(this),this._label=this._peaks.options.createSegmentLabel({segment:e,view:this._view.getName(),layer:this._layer,fontFamily:this._peaks.options.fontFamily,fontSize:this._peaks.options.fontSize,fontStyle:this._peaks.options.fontStyle}),this._label&&this._label.hide();var r=this._view.timeToPixelOffset(this._segment.startTime),a=this._view.timeToPixelOffset(this._segment.endTime),o=pt(0,this._view.getHeight()-2*this._overlayOffset);this._overlay=new Re.Group({name:"segment-overlay",segment:this._segment,x:r,y:0,width:a-r,height:this._view.getHeight(),clipX:0,clipY:this._overlayOffset,clipWidth:a-r,clipHeight:o,draggable:this._draggable,dragBoundFunc:this._dragBoundFunc});var l,h,d,f,y;s.overlay&&(l=this._borderColor||s.overlayBorderColor,h=s.overlayBorderWidth,d=this._color||s.overlayColor,f=s.overlayOpacity,y=s.overlayCornerRadius),this._overlayRect=new Re.Rect({x:0,y:this._overlayOffset,width:a-r,stroke:l,strokeWidth:h,height:o,fill:d,opacity:f,cornerRadius:y}),this._overlay.add(this._overlayRect),s.overlay&&(this._overlayText=new Re.Text({x:0,y:this._overlayOffset,text:this._segment.labelText,fontFamily:s.overlayFontFamily,fontSize:s.overlayFontSize,fontStyle:s.overlayFontStyle,fill:s.overlayLabelColor,listening:!1,align:s.overlayLabelAlign,width:a-r,verticalAlign:s.overlayLabelVerticalAlign,height:o,padding:s.overlayLabelPadding}),this._overlay.add(this._overlayText)),this._overlay.on("mouseenter",this._onMouseEnter),this._overlay.on("mouseleave",this._onMouseLeave),this._overlay.on("mousedown",this._onMouseDown),this._overlay.on("mouseup",this._onMouseUp),this._draggable&&(this._overlay.on("dragstart",this._onSegmentDragStart),this._overlay.on("dragmove",this._onSegmentDragMove),this._overlay.on("dragend",this._onSegmentDragEnd)),this._createMarkers()}function wg(e){return new Un(e)}Ce.prototype._createMarkers=function(){var e=this._layer.isEditingEnabled()&&this._segment.editable,t=this._view.getViewOptions().segmentOptions,i=t.markers?this._peaks.options.createSegmentMarker:wg,n=i({segment:this._segment,editable:e,startMarker:!0,color:t.startMarkerColor,fontFamily:this._peaks.options.fontFamily||bo,fontSize:this._peaks.options.fontSize||wo,fontStyle:this._peaks.options.fontStyle||So,layer:this._layer,view:this._view.getName(),segmentOptions:this._view.getViewOptions().segmentOptions});n&&(this._startMarker=new Je({segment:this._segment,segmentShape:this,editable:e,startMarker:!0,marker:n,onDragStart:this._onSegmentMarkerDragStart,onDragMove:this._onSegmentMarkerDragMove,onDragEnd:this._onSegmentMarkerDragEnd,dragBoundFunc:this._segmentMarkerDragBoundFunc}));var s=i({segment:this._segment,editable:e,startMarker:!1,color:t.endMarkerColor,fontFamily:this._peaks.options.fontFamily||bo,fontSize:this._peaks.options.fontSize||wo,fontStyle:this._peaks.options.fontStyle||So,layer:this._layer,view:this._view.getName(),segmentOptions:this._view.getViewOptions().segmentOptions});s&&(this._endMarker=new Je({segment:this._segment,segmentShape:this,editable:e,startMarker:!1,marker:s,onDragStart:this._onSegmentMarkerDragStart,onDragMove:this._onSegmentMarkerDragMove,onDragEnd:this._onSegmentMarkerDragEnd,dragBoundFunc:this._segmentMarkerDragBoundFunc}))};Ce.prototype._dragBoundFunc=function(e){return{x:e.x,y:0}};Ce.prototype.update=function(e){var t=this._view.timeToPixelOffset(this._segment.startTime),i=this._view.timeToPixelOffset(this._segment.endTime),n=i-t,s;(s=this.getStartMarker())&&(s.setX(t-s.getWidth()),e&&s.update(e)),(s=this.getEndMarker())&&(s.setX(i),e&&s.update(e)),this._color=this._segment.color,this._borderColor=this._segment.bordercolor,this._overlayText&&this._overlayText.text(this._segment.labelText);var r=this._view.getViewOptions().segmentOptions;r.overlay?(this._color&&this._overlayRect.fill(this._color),this._borderColor&&this._overlayRect.stroke(this._borderColor)):this._waveformShape.setWaveformColor(this._segment.color),this._dragging||this._overlay&&(this._overlay.setAttrs({x:t,width:n,clipWidth:n<1?1:n}),this._overlayRect.setAttrs({x:0,width:n}),this._overlayText&&this._overlayText.setAttrs({width:n}))};Ce.prototype.getSegment=function(){return this._segment};Ce.prototype.getStartMarker=function(){return this._startMarker};Ce.prototype.getEndMarker=function(){return this._endMarker};Ce.prototype.addToLayer=function(e){this._waveformShape&&this._waveformShape.addToLayer(e),this._label&&e.add(this._label),this._overlay&&e.add(this._overlay),this._startMarker&&this._startMarker.addToLayer(e),this._endMarker&&this._endMarker.addToLayer(e)};Ce.prototype.isDragging=function(){return this._dragging};Ce.prototype._onMouseEnter=function(e){this._label&&(this._label.moveToTop(),this._label.show()),this._peaks.emit("segments.mouseenter",{segment:this._segment,evt:e.evt})};Ce.prototype._onMouseLeave=function(e){this._label&&this._label.hide(),this._peaks.emit("segments.mouseleave",{segment:this._segment,evt:e.evt})};Ce.prototype._onMouseDown=function(e){this._peaks.emit("segments.mousedown",{segment:this._segment,evt:e.evt})};Ce.prototype._onMouseUp=function(e){this._peaks.emit("segments.mouseup",{segment:this._segment,evt:e.evt})};Ce.prototype.segmentClicked=function(e,t){this._moveToTop(),this._peaks.emit("segments."+e,t)};Ce.prototype._moveToTop=function(){this._overlay.moveToTop(),this._layer.moveSegmentMarkersToTop()};Ce.prototype.enableSegmentDragging=function(e){!this._segment.editable||(!this._draggable&&e?(this._overlay.on("dragstart",this._onSegmentDragStart),this._overlay.on("dragmove",this._onSegmentDragMove),this._overlay.on("dragend",this._onSegmentDragEnd)):this._draggable&&!e&&(this._overlay.off("dragstart",this._onSegmentDragStart),this._overlay.off("dragmove",this._onSegmentDragMove),this._overlay.off("dragend",this._onSegmentDragEnd)),this._overlay.draggable(e),this._draggable=e)};Ce.prototype._setPreviousAndNextSegments=function(){this._view.getSegmentDragMode()!=="overlap"?(this._nextSegment=this._peaks.segments.findNextSegment(this._segment),this._previousSegment=this._peaks.segments.findPreviousSegment(this._segment)):(this._nextSegment=null,this._previousSegment=null)};Ce.prototype._onSegmentDragStart=function(e){this._setPreviousAndNextSegments(),this._dragging=!0,this._dragStartX=this._overlay.getX(),this._dragStartTime=this._segment.startTime,this._dragEndTime=this._segment.endTime,this._peaks.emit("segments.dragstart",{segment:this._segment,marker:!1,startMarker:!1,evt:e.evt})};Ce.prototype._onSegmentDragMove=function(e){var t=this._overlay.getX(),i=t-this._dragStartX,n=this._view.pixelsToTime(i),s=this._dragStartTime+n,r=this._dragEndTime+n,a=this._segment.endTime-this._segment.startTime,o,l=this._view.getMinSegmentDragWidth(),h=this._view.pixelsToTime(l),d=!1,f=!1;if(s<0&&(s=0,r=a,this._overlay.setX(this._view.timeToPixelOffset(s))),this._previousSegment){var y=this._view.timeToPixelOffset(this._previousSegment.endTime);if(s<this._previousSegment.endTime){if(o=this._view.getSegmentDragMode(),o==="no-overlap"||o==="compress"&&!this._previousSegment.editable)s=this._previousSegment.endTime,r=s+a,this._overlay.setX(y);else if(o==="compress"){var g=s,_=this._previousSegment.startTime+h;g<_&&(g=_,y=this._view.timeToPixelOffset(g),this._overlay.setX(y),s=g,r=s+a),this._previousSegment.update({endTime:g}),d=!0}}}if(this._nextSegment){var b=this._view.timeToPixelOffset(this._nextSegment.startTime);if(r>this._nextSegment.startTime){if(o=this._view.getSegmentDragMode(),o==="no-overlap"||o==="compress"&&!this._nextSegment.editable)r=this._nextSegment.startTime,s=r-a,this._overlay.setX(b-this._overlay.getWidth());else if(o==="compress"){var v=r,A=this._nextSegment.endTime-h;v>A&&(v=A,b=this._view.timeToPixelOffset(v),this._overlay.setX(b-this._overlay.getWidth()),r=v,s=r-a),this._nextSegment.update({startTime:v}),f=!0}}}this._segment._setStartTime(s),this._segment._setEndTime(r),this._peaks.emit("segments.dragged",{segment:this._segment,marker:!1,startMarker:!1,evt:e.evt}),d?this._peaks.emit("segments.dragged",{segment:this._previousSegment,marker:!1,startMarker:!1,evt:e.evt}):f&&this._peaks.emit("segments.dragged",{segment:this._nextSegment,marker:!1,startMarker:!1,evt:e.evt})};Ce.prototype._onSegmentDragEnd=function(e){this._dragging=!1,this._peaks.emit("segments.dragend",{segment:this._segment,marker:!1,startMarker:!1,evt:e.evt})};Ce.prototype.moveMarkersToTop=function(){this._startMarker&&this._startMarker.moveToTop(),this._endMarker&&this._endMarker.moveToTop()};Ce.prototype.startDrag=function(){this._endMarker&&this._endMarker.startDrag()};Ce.prototype.stopDrag=function(){this._endMarker&&this._endMarker.stopDrag()};Ce.prototype._onSegmentMarkerDragStart=function(e,t){this._setPreviousAndNextSegments(),this._moveToTop(),this._startMarkerX=this._startMarker.getX(),this._endMarkerX=this._endMarker.getX(),this._peaks.emit("segments.dragstart",{segment:this._segment,marker:!0,startMarker:e.isStartMarker(),evt:t.evt})};Ce.prototype._onSegmentMarkerDragMove=function(e,t){e.isStartMarker()?(this._segmentStartMarkerDragMove(e,t),e.update({startTime:this._segment.startTime})):(this._segmentEndMarkerDragMove(e,t),e.update({endTime:this._segment.endTime}))};function ah(e){return e.endTime-e.startTime}Ce.prototype._segmentStartMarkerDragMove=function(e,t){var i=this._view.getWidth(),n=this._startMarker.getX(),s=this._endMarker.getX(),r=this._view.pixelsToTime(50),a=this._view.getMinSegmentDragWidth(),o=this._endMarker.getX()-a;o>i&&(o=i);var l=!1,h=!1,d;if(this._previousSegment&&(d=this._view.timeToPixelOffset(this._previousSegment.endTime),l=d>=0),n>o)e.setX(o),this._overlay.clipWidth(o-s),a===0&&o<i?this._segment._setStartTime(this._segment.endTime):this._segment._setStartTime(this._view.pixelOffsetToTime(o));else if(this._previousSegment&&l){var f=this._view.getSegmentDragMode(),y=f==="no-overlap"||f==="compress"&&!this._previousSegment.editable,g=f==="compress"&&this._previousSegment.editable;if(n<=d){if(y)e.setX(d),this._overlay.clipWidth(d-s),this._segment._setStartTime(this._previousSegment.endTime);else if(g){var _=ah(this._previousSegment);_<r&&(r=_);var b=this._view.timeToPixelOffset(this._previousSegment.startTime+r);n<b&&(n=b),e.setX(n),this._overlay.clipWidth(s-n),this._segment._setStartTime(this._view.pixelOffsetToTime(n)),this._previousSegment.update({endTime:this._view.pixelOffsetToTime(n)}),h=!0}}else n<0&&(n=0),e.setX(n),this._overlay.clipWidth(s-n),this._segment._setStartTime(this._view.pixelOffsetToTime(n))}else n<0&&(n=0),e.setX(n),this._overlay.clipWidth(s-n),this._segment._setStartTime(this._view.pixelOffsetToTime(n));this._peaks.emit("segments.dragged",{segment:this._segment,marker:!0,startMarker:!0,evt:t.evt}),h&&this._peaks.emit("segments.dragged",{segment:this._previousSegment,marker:!0,startMarker:!1,evt:t.evt})};Ce.prototype._segmentEndMarkerDragMove=function(e,t){var i=this._view.getWidth(),n=this._startMarker.getX(),s=this._endMarker.getX(),r=this._view.pixelsToTime(50),a=this._view.getMinSegmentDragWidth(),o=this._startMarker.getX()+a;o<0&&(o=0);var l=!1,h=!1,d;if(this._nextSegment&&(d=this._view.timeToPixelOffset(this._nextSegment.startTime),l=d<i),s<o)e.setX(o),this._overlay.clipWidth(o-n),a===0&&o>0?this._segment._setEndTime(this._segment.startTime):this._segment._setEndTime(this._view.pixelOffsetToTime(o));else if(this._nextSegment&&l){var f=this._view.getSegmentDragMode(),y=f==="no-overlap"||f==="compress"&&!this._nextSegment.editable,g=f==="compress"&&this._nextSegment.editable;if(s>=d){if(y)e.setX(d),this._overlay.clipWidth(d-n),this._segment._setEndTime(this._nextSegment.startTime);else if(g){var _=ah(this._nextSegment);_<r&&(r=_);var b=this._view.timeToPixelOffset(this._nextSegment.endTime-r);s>b&&(s=b),e.setX(s),this._overlay.clipWidth(s-n),this._segment._setEndTime(this._view.pixelOffsetToTime(s)),this._nextSegment.update({startTime:this._view.pixelOffsetToTime(s)}),h=!0}}else s>i&&(s=i),e.setX(s),this._overlay.clipWidth(s-n),this._segment._setEndTime(this._view.pixelOffsetToTime(s))}else s>i&&(s=i),e.setX(s),this._overlay.clipWidth(s-n),this._segment._setEndTime(this._view.pixelOffsetToTime(s));this._peaks.emit("segments.dragged",{segment:this._segment,marker:!0,startMarker:!1,evt:t.evt}),h&&this._peaks.emit("segments.dragged",{segment:this._nextSegment,marker:!0,startMarker:!0,evt:t.evt})};Ce.prototype._onSegmentMarkerDragEnd=function(e,t){this._nextSegment=null,this._previousSegment=null;var i=e.isStartMarker();this._peaks.emit("segments.dragend",{segment:this._segment,marker:!0,startMarker:i,evt:t.evt})};Ce.prototype._segmentMarkerDragBoundFunc=function(e,t){return{x:t.x,y:e.getAbsolutePosition().y}};Ce.prototype.fitToView=function(){if(this._startMarker&&this._startMarker.fitToView(),this._endMarker&&this._endMarker.fitToView(),this._overlay){var e=this._view.getHeight(),t=pt(0,e-this._overlayOffset*2);this._overlay.setAttrs({y:0,height:e,clipY:this._overlayOffset,clipHeight:t}),this._overlayRect.setAttrs({y:this._overlayOffset,height:t}),this._overlayText&&this._overlayText.setAttrs({y:this._overlayOffset,height:t})}};Ce.prototype.destroy=function(){this._waveformShape&&this._waveformShape.destroy(),this._label&&this._label.destroy(),this._startMarker&&this._startMarker.destroy(),this._endMarker&&this._endMarker.destroy(),this._overlay&&this._overlay.destroy()};function Ae(e,t,i){this._peaks=e,this._view=t,this._allowEditing=i,this._segmentShapes={},this._layer=new Re.Layer,this._onSegmentsUpdate=this._onSegmentsUpdate.bind(this),this._onSegmentsAdd=this._onSegmentsAdd.bind(this),this._onSegmentsRemove=this._onSegmentsRemove.bind(this),this._onSegmentsRemoveAll=this._onSegmentsRemoveAll.bind(this),this._onSegmentsDragged=this._onSegmentsDragged.bind(this),this._peaks.on("segments.update",this._onSegmentsUpdate),this._peaks.on("segments.add",this._onSegmentsAdd),this._peaks.on("segments.remove",this._onSegmentsRemove),this._peaks.on("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.on("segments.dragged",this._onSegmentsDragged)}Ae.prototype.addToStage=function(e){e.add(this._layer)};Ae.prototype.enableEditing=function(e){this._allowEditing=e};Ae.prototype.isEditingEnabled=function(){return this._allowEditing};Ae.prototype.enableSegmentDragging=function(e){for(var t in this._segmentShapes)se(this._segmentShapes,t)&&this._segmentShapes[t].enableSegmentDragging(e)};Ae.prototype.getSegmentShape=function(e){return this._segmentShapes[e.pid]};Ae.prototype.formatTime=function(e){return this._view.formatTime(e)};Ae.prototype._onSegmentsUpdate=function(e,t){var i=this._view.getStartTime(),n=this._view.getEndTime(),s=this.getSegmentShape(e),r=e.isVisible(i,n);s&&!r?s.isDragging()||this._removeSegment(e):!s&&r?s=this._updateSegment(e):s&&r&&s.update(t)};Ae.prototype._onSegmentsAdd=function(e){var t=this,i=t._view.getStartTime(),n=t._view.getEndTime();e.segments.forEach(function(s){if(s.isVisible(i,n)){var r=t._addSegmentShape(s);r.update()}}),this.moveSegmentMarkersToTop()};Ae.prototype._onSegmentsRemove=function(e){var t=this;e.segments.forEach(function(i){t._removeSegment(i)})};Ae.prototype._onSegmentsRemoveAll=function(){this._layer.removeChildren(),this._segmentShapes={}};Ae.prototype._onSegmentsDragged=function(e){this._updateSegment(e.segment)};Ae.prototype._createSegmentShape=function(e){return new Ce(e,this._peaks,this,this._view)};Ae.prototype._addSegmentShape=function(e){var t=this._createSegmentShape(e);return t.addToLayer(this._layer),this._segmentShapes[e.pid]=t,t};Ae.prototype.updateSegments=function(e,t){var i=this._peaks.segments.find(e,t);i.forEach(this._updateSegment.bind(this)),this._removeInvisibleSegments(e,t)};Ae.prototype._updateSegment=function(e){var t=this.getSegmentShape(e);t||(t=this._addSegmentShape(e)),t.update()};Ae.prototype._removeInvisibleSegments=function(e,t){for(var i in this._segmentShapes)if(se(this._segmentShapes,i)){var n=this._segmentShapes[i].getSegment();n.isVisible(e,t)||this._removeSegment(n)}};Ae.prototype._removeSegment=function(e){var t=this._segmentShapes[e.pid];t&&(t.destroy(),delete this._segmentShapes[e.pid])};Ae.prototype.moveSegmentMarkersToTop=function(){for(var e in this._segmentShapes)se(this._segmentShapes,e)&&this._segmentShapes[e].moveMarkersToTop()};Ae.prototype.setVisible=function(e){this._layer.setVisible(e)};Ae.prototype.segmentClicked=function(e,t){var i=this._segmentShapes[t.segment.pid];i&&i.segmentClicked(e,t)};Ae.prototype.destroy=function(){this._peaks.off("segments.update",this._onSegmentsUpdate),this._peaks.off("segments.add",this._onSegmentsAdd),this._peaks.off("segments.remove",this._onSegmentsRemove),this._peaks.off("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.off("segments.dragged",this._onSegmentsDragged)};Ae.prototype.fitToView=function(){for(var e in this._segmentShapes)if(se(this._segmentShapes,e)){var t=this._segmentShapes[e];t.fitToView()}};Ae.prototype.draw=function(){this._layer.draw()};Ae.prototype.getHeight=function(){return this._layer.getHeight()};function di(e,t){var i=this;i._axisGridlineColor=t.axisGridlineColor,i._axisLabelColor=t.axisLabelColor,i._showAxisLabels=t.showAxisLabels,t.formatAxisTime?i._formatAxisTime=t.formatAxisTime:i._formatAxisTime=function(n){return pa(n,0)},i._axisLabelFont=di._buildFontString(t.fontFamily,t.fontSize,t.fontStyle),i._axisShape=new Re.Shape({sceneFunc:function(s){i._drawAxis(s,e)}})}di._buildFontString=function(e,t,i){return t||(t=11),e||(e="sans-serif"),i||(i="normal"),i+" "+t+"px "+e};di.prototype.addToLayer=function(e){e.add(this._axisShape)};di.prototype.showAxisLabels=function(e){this._showAxisLabels=e};di.prototype._getAxisLabelScale=function(e){for(var t=1,i=[1,2,5,10,20,30],n=60,s=0,r;;){r=t*i[s];var a=e.timeToPixels(r);if(a<n)++s===i.length&&(t*=60,s=0);else break}return r};di.prototype._drawAxis=function(e,t){var i=t.getStartTime(),n=10,s=this._getAxisLabelScale(t),r=Zf(i,s),a=r-i,o=t.timeToPixels(a);e.setAttr("strokeStyle",this._axisGridlineColor),e.setAttr("lineWidth",1),e.setAttr("font",this._axisLabelFont),e.setAttr("fillStyle",this._axisLabelColor),e.setAttr("textAlign","left"),e.setAttr("textBaseline","bottom");for(var l=t.getWidth(),h=t.getHeight(),d=r;;){var f=o+t.timeToPixels(d-r);if(f>=l)break;if(e.beginPath(),e.moveTo(f+.5,0),e.lineTo(f+.5,0+n),e.moveTo(f+.5,h),e.lineTo(f+.5,h-n),e.stroke(),this._showAxisLabels){var y=this._formatAxisTime(d),g=e.measureText(y).width,_=f-g/2,b=h-1-n;_>=0&&e.fillText(y,_,b)}d+=s}};function jt(e,t){this._stage=e,this._handlers=t,this._dragging=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseUp=this._mouseUp.bind(this),this._mouseMove=this._mouseMove.bind(this),this._stage.on("mousedown",this._mouseDown),this._stage.on("touchstart",this._mouseDown),this._lastMouseClientX=null}jt.prototype._mouseDown=function(e){var t=null;if(!(e.type==="mousedown"&&e.evt.button!==0)){var i=_a(e.target);if(i&&i.attrs.draggable){if(i.attrs.name==="point-marker"||i.attrs.name==="segment-marker")return;i.attrs.name==="segment-overlay"&&(t=i)}if(this._lastMouseClientX=Math.floor(e.type==="touchstart"?e.evt.touches[0].clientX:e.evt.clientX),this._handlers.onMouseDown){var n=this._getMousePosX(this._lastMouseClientX);this._handlers.onMouseDown(n,t)}window.addEventListener("mousemove",this._mouseMove,{capture:!1,passive:!0}),window.addEventListener("touchmove",this._mouseMove,{capture:!1,passive:!0}),window.addEventListener("mouseup",this._mouseUp,{capture:!1,passive:!0}),window.addEventListener("touchend",this._mouseUp,{capture:!1,passive:!0}),window.addEventListener("blur",this._mouseUp,{capture:!1,passive:!0})}};jt.prototype._mouseMove=function(e){var t=Math.floor(e.type==="touchmove"?e.changedTouches[0].clientX:e.clientX);if(t!==this._lastMouseClientX&&(this._lastMouseClientX=t,this._dragging=!0,this._handlers.onMouseMove)){var i=this._getMousePosX(t);this._handlers.onMouseMove(i)}};jt.prototype._mouseUp=function(e){var t;if(e.type==="touchend"?(t=Math.floor(e.changedTouches[0].clientX),e.cancelable&&e.preventDefault()):t=Math.floor(e.clientX),this._handlers.onMouseUp){var i=this._getMousePosX(t);this._handlers.onMouseUp(i)}window.removeEventListener("mousemove",this._mouseMove,{capture:!1}),window.removeEventListener("touchmove",this._mouseMove,{capture:!1}),window.removeEventListener("mouseup",this._mouseUp,{capture:!1}),window.removeEventListener("touchend",this._mouseUp,{capture:!1}),window.removeEventListener("blur",this._mouseUp,{capture:!1}),this._dragging=!1};jt.prototype._getMousePosX=function(e){var t=this._stage.getContainer().getBoundingClientRect();return e-t.left};jt.prototype.isDragging=function(){return this._dragging};jt.prototype.destroy=function(){this._stage.off("mousedown",this._mouseDown),this._stage.off("touchstart",this._mouseDown)};function Hn(e,t){this._peaks=e,this._view=t,this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._mouseDragHandler=new jt(t._stage,{onMouseDown:this._onMouseDown,onMouseMove:this._onMouseMove})}Hn.prototype._onMouseDown=function(e){this._seek(e)};Hn.prototype._onMouseMove=function(e){this._seek(e)};Hn.prototype._seek=function(e){if(!!this._view.isSeekEnabled()){e=pt(e,0,this._width);var t=this._view.pixelsToTime(e),i=this._peaks.player.getDuration();t>i&&(t=i),this._view.updatePlayheadTime(t),this._peaks.player.seek(t)}};Hn.prototype.destroy=function(){this._mouseDragHandler.destroy()};function ae(e,t,i){var n=this;n._originalWaveformData=e,n._container=t,n._peaks=i,n._options=i.options,n._viewOptions=i.options.overview,n._onTimeUpdate=n._onTimeUpdate.bind(this),n._onPlaying=n._onPlaying.bind(this),n._onPause=n._onPause.bind(this),n._onZoomviewDisplaying=n._onZoomviewDisplaying.bind(this),i.on("player.timeupdate",n._onTimeUpdate),i.on("player.playing",n._onPlaying),i.on("player.pause",n._onPause),i.on("zoomview.displaying",n._onZoomviewDisplaying),n._amplitudeScale=1,n._timeLabelPrecision=n._viewOptions.timeLabelPrecision,n._enableSeek=!0,n._viewOptions.formatPlayheadTime?n._formatPlayheadTime=n._viewOptions.formatPlayheadTime:n._formatPlayheadTime=function(r){return pa(r,n._timeLabelPrecision)},n._width=t.clientWidth,n._height=t.clientHeight,n._data=e,n._width!==0&&n._resampleAndSetWaveformData(e,n._width),Re.showWarnings=!1,n._stage=new Re.Stage({container:t,width:n._width,height:n._height}),n._waveformColor=n._viewOptions.waveformColor,n._playedWaveformColor=n._viewOptions.playedWaveformColor,n._createWaveform(),n._viewOptions.enableSegments&&(n._segmentsLayer=new Ae(i,n,!1),n._segmentsLayer.addToStage(n._stage)),n._viewOptions.enablePoints&&(n._pointsLayer=new Ee(i,n,!1),n._pointsLayer.addToStage(n._stage)),n._highlightLayer=new ci(n,n._viewOptions),n._highlightLayer.addToStage(n._stage),n._createAxisLabels(),n._playheadLayer=new it({player:n._peaks.player,view:n,showPlayheadTime:n._viewOptions.showPlayheadTime,playheadColor:n._viewOptions.playheadColor,playheadTextColor:n._viewOptions.playheadTextColor,playheadFontFamily:n._viewOptions.fontFamily,playheadFontSize:n._viewOptions.fontSize,playheadFontStyle:n._viewOptions.fontStyle}),n._playheadLayer.addToStage(n._stage);var s=n._peaks.player.getCurrentTime();n._playheadLayer.updatePlayheadTime(s),n._mouseDragHandler=new Hn(i,n),n._onClick=n._onClick.bind(n),n._onDblClick=n._onDblClick.bind(n),n._onContextMenu=n._onContextMenu.bind(n),n._stage.on("click",n._onClick),n._stage.on("dblclick",n._onDblClick),n._stage.on("contextmenu",n._onContextMenu)}ae.prototype.enableSeek=function(e){this._enableSeek=e};ae.prototype.isSeekEnabled=function(){return this._enableSeek};ae.prototype._onClick=function(e){this._clickHandler(e,"click")};ae.prototype._onDblClick=function(e){this._clickHandler(e,"dblclick")};ae.prototype._onContextMenu=function(e){this._clickHandler(e,"contextmenu")};ae.prototype._clickHandler=function(e,t){var i=!0;if(e.target!==this._stage){var n=_a(e.target);if(n){if(n.attrs.name==="point-marker"){var s=n.getAttr("point");s&&this._peaks.emit("points."+t,{point:s,evt:e.evt,preventViewEvent:function(){i=!1}})}else if(n.attrs.name==="segment-overlay"){var r=n.getAttr("segment");if(r){var a={segment:r,evt:e.evt,preventViewEvent:function(){i=!1}};this._segmentsLayer&&this._segmentsLayer.segmentClicked(t,a)}}}}if(i){var o=e.evt.layerX,l=this.pixelsToTime(o);this._peaks.emit("overview."+t,{time:l,evt:e.evt})}};ae.prototype.isSegmentDraggingEnabled=function(){return!1};ae.prototype.getName=function(){return"overview"};ae.prototype._onTimeUpdate=function(e){this._playheadLayer.updatePlayheadTime(e)};ae.prototype._onPlaying=function(e){this._playheadLayer.updatePlayheadTime(e)};ae.prototype._onPause=function(e){this._playheadLayer.stop(e)};ae.prototype._onZoomviewDisplaying=function(e,t){this.showHighlight(e,t)};ae.prototype.updatePlayheadTime=function(e){this._playheadLayer.updatePlayheadTime(e)};ae.prototype.showHighlight=function(e,t){this._highlightLayer.showHighlight(e,t)};ae.prototype.setWaveformData=function(e){this._originalWaveformData=e,this._width!==0?this._resampleAndSetWaveformData(e,this._width):this._data=e,this._updateWaveform()};ae.prototype._resampleAndSetWaveformData=function(e,t){try{return this._data=e.resample({width:t}),!0}catch{return this._data=e,!1}};ae.prototype.playheadPosChanged=function(e){this._playedWaveformShape&&(this._playedSegment.endTime=e,this._unplayedSegment.startTime=e,this._waveformLayer.draw())};ae.prototype.timeToPixels=function(e){return Math.floor(e*this._data.sample_rate/this._data.scale)};ae.prototype.timeToPixelOffset=ae.prototype.timeToPixels;ae.prototype.pixelsToTime=function(e){return e*this._data.scale/this._data.sample_rate};ae.prototype.pixelOffsetToTime=ae.prototype.pixelsToTime;ae.prototype.getFrameOffset=function(){return 0};ae.prototype.getStartTime=function(){return 0};ae.prototype.getEndTime=function(){return this._getDuration()};ae.prototype.getWidth=function(){return this._width};ae.prototype.getHeight=function(){return this._height};ae.prototype._getDuration=function(){return this._peaks.player.getDuration()};ae.prototype.setAmplitudeScale=function(e){if(!Cs(e)||!Yl(e))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=e,this._waveformLayer.draw(),this._segmentsLayer&&this._segmentsLayer.draw()};ae.prototype.getAmplitudeScale=function(){return this._amplitudeScale};ae.prototype.getWaveformData=function(){return this._data};ae.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new He({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var e=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:e},this._unplayedSegment={startTime:e,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new He({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};ae.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};ae.prototype._createWaveform=function(){this._waveformLayer=new Re.Layer({listening:!1}),this._createWaveformShapes(),this._stage.add(this._waveformLayer)};ae.prototype._createAxisLabels=function(){this._axisLayer=new Re.Layer({listening:!1}),this._axis=new di(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};ae.prototype.removeHighlightRect=function(){this._highlightLayer.removeHighlight()};ae.prototype._updateWaveform=function(){this._waveformLayer.draw(),this._axisLayer.draw();var e=this._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(e),this._highlightLayer.updateHighlight();var t=0,i=this.pixelsToTime(this._width);this._pointsLayer&&this._pointsLayer.updatePoints(t,i),this._segmentsLayer&&this._segmentsLayer.updateSegments(t,i)};ae.prototype.setWaveformColor=function(e){this._waveformColor=e,this._waveformShape.setWaveformColor(e)};ae.prototype.setPlayedWaveformColor=function(e){this._playedWaveformColor=e,e?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(e)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};ae.prototype.showPlayheadTime=function(e){this._playheadLayer.showPlayheadTime(e)};ae.prototype.setTimeLabelPrecision=function(e){this._timeLabelPrecision=e,this._playheadLayer.updatePlayheadText()};ae.prototype.formatTime=function(e){return this._formatPlayheadTime(e)};ae.prototype.showAxisLabels=function(e){this._axis.showAxisLabels(e),this._axisLayer.draw()};ae.prototype.enableMarkerEditing=function(e){this._segmentsLayer&&this._segmentsLayer.enableEditing(e),this._pointsLayer&&this._pointsLayer.enableEditing(e)};ae.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var e=!1;this._container.clientWidth!==this._width&&(this._width=this._container.clientWidth,this._stage.setWidth(this._width),this._resampleAndSetWaveformData(this._originalWaveformData,this._width)&&(e=!0)),this._container.clientHeight!==this._height&&(this._height=this._container.clientHeight,this._stage.setHeight(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer&&this._segmentsLayer.fitToView(),this._pointsLayer&&this._pointsLayer.fitToView(),this._highlightLayer.fitToView()),e&&this._updateWaveform()}};ae.prototype.getViewOptions=function(){return this._viewOptions};ae.prototype.destroy=function(){this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("zoomview.displaying",this._onZoomviewDisplaying),this._mouseDragHandler.destroy(),this._playheadLayer.destroy(),this._segmentsLayer&&this._segmentsLayer.destroy(),this._pointsLayer&&this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function rn(e,t){this._peaks=e,this._view=t,this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._mouseDragHandler=new jt(t._stage,{onMouseDown:this._onMouseDown,onMouseMove:this._onMouseMove,onMouseUp:this._onMouseUp})}rn.prototype.isDragging=function(){return this._mouseDragHandler.isDragging()};rn.prototype._onMouseDown=function(e,t){this._segment=t,this._segment&&(this._segmentIsDraggable=this._segment.draggable(),this._segment.draggable(!1));var i=this._view.pixelsToTime(e+this._view.getFrameOffset());this._peaks.segments.setInserting(!0),this._insertSegment=this._peaks.segments.add({startTime:i,endTime:i,editable:!0}),this._insertSegmentShape=this._view._segmentsLayer.getSegmentShape(this._insertSegment),this._insertSegmentShape&&(this._insertSegmentShape.moveMarkersToTop(),this._insertSegmentShape.startDrag())};rn.prototype._onMouseMove=function(){};rn.prototype._onMouseUp=function(){this._insertSegmentShape&&(this._insertSegmentShape.stopDrag(),this._insertSegmentShape=null),this._segment&&this._segmentIsDraggable&&this._segment.draggable(!0),this._peaks.emit("segments.insert",{segment:this._insertSegment}),this._peaks.segments.setInserting(!1)};rn.prototype.destroy=function(){this._mouseDragHandler.destroy()};function ui(e,t){this._peaks=e,this._view=t,this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._mouseDragHandler=new jt(t._stage,{onMouseDown:this._onMouseDown,onMouseMove:this._onMouseMove,onMouseUp:this._onMouseUp})}ui.prototype.isDragging=function(){return this._mouseDragHandler.isDragging()};ui.prototype._onMouseDown=function(e,t){this._segment=t,this._seeking=!1;var i=this._view.getPlayheadOffset();this._view.isSeekEnabled()&&Math.abs(e-i)<=this._view.getPlayheadClickTolerance()&&(this._seeking=!0,this._segment&&(this._segmentIsDraggable=this._segment.draggable(),this._segment.draggable(!1))),this._seeking?this._seek(e):(this._initialFrameOffset=this._view.getFrameOffset(),this._mouseDownX=e)};ui.prototype._onMouseMove=function(e){if(!(this._segment&&!this._seeking))if(this._seeking){e=pt(e,0,this._view.getWidth());var t=this._view.pixelsToTime(e+this._view.getFrameOffset());this._seek(t)}else{var i=this._mouseDownX-e,n=this._initialFrameOffset+i;n!==this._initialFrameOffset&&this._view.updateWaveform(n)}};ui.prototype._onMouseUp=function(){if(!this._seeking&&this._view._enableSeek&&!this._mouseDragHandler.isDragging()){var e=this._view.pixelOffsetToTime(this._mouseDownX);this._seek(e)}this._segment&&this._seeking&&this._segmentIsDraggable&&this._segment.draggable(!0)};ui.prototype._seek=function(e){var t=this._peaks.player.getDuration();e>t&&(e=t),this._view.updatePlayheadTime(e),this._peaks.player.seek(e)};ui.prototype.destroy=function(){this._mouseDragHandler.destroy()};function K(e,t,i){var n=this;n._container=t,n._peaks=i,n._options=i.options,n._viewOptions=n._options.zoomview,n._enableWaveformCache=n._options.waveformCache,n._originalWaveformData=e,n._initWaveformCache(),n._onTimeUpdate=n._onTimeUpdate.bind(n),n._onPlaying=n._onPlaying.bind(n),n._onPause=n._onPause.bind(n),n._onKeyboardLeft=n._onKeyboardLeft.bind(n),n._onKeyboardRight=n._onKeyboardRight.bind(n),n._onKeyboardShiftLeft=n._onKeyboardShiftLeft.bind(n),n._onKeyboardShiftRight=n._onKeyboardShiftRight.bind(n),n._peaks.on("player.timeupdate",n._onTimeUpdate),n._peaks.on("player.playing",n._onPlaying),n._peaks.on("player.pause",n._onPause),n._peaks.on("keyboard.left",n._onKeyboardLeft),n._peaks.on("keyboard.right",n._onKeyboardRight),n._peaks.on("keyboard.shift_left",n._onKeyboardShiftLeft),n._peaks.on("keyboard.shift_right",n._onKeyboardShiftRight),n._autoScroll=n._viewOptions.autoScroll,n._autoScrollOffset=n._viewOptions.autoScrollOffset,n._amplitudeScale=1,n._timeLabelPrecision=n._viewOptions.timeLabelPrecision,n._enableSeek=!0,n._enableSegmentDragging=!1,n._segmentDragMode="overlap",n._minSegmentDragWidth=0,n._insertSegmentShape=null,n._viewOptions.formatPlayheadTime?n._formatPlayheadTime=n._viewOptions.formatPlayheadTime:n._formatPlayheadTime=function(a){return pa(a,n._timeLabelPrecision)},n._playheadClickTolerance=n._viewOptions.playheadClickTolerance,n._data=null,n._pixelLength=0;var s=i.zoom.getZoomLevel();n._zoomLevelAuto=!1,n._zoomLevelSeconds=null,n._resampleData({scale:s}),n._width=t.clientWidth,n._height=t.clientHeight,n._frameOffset=0,n._stage=new Re.Stage({container:t,width:n._width,height:n._height}),n._waveformColor=n._viewOptions.waveformColor,n._playedWaveformColor=n._viewOptions.playedWaveformColor,n._createWaveform(),n._viewOptions.enableSegments&&(n._segmentsLayer=new Ae(i,n,!0),n._segmentsLayer.addToStage(n._stage)),n._viewOptions.enablePoints&&(n._pointsLayer=new Ee(i,n,!0),n._pointsLayer.addToStage(n._stage)),n._createAxisLabels(),n._playheadLayer=new it({player:n._peaks.player,view:n,showPlayheadTime:n._viewOptions.showPlayheadTime,playheadColor:n._viewOptions.playheadColor,playheadTextColor:n._viewOptions.playheadTextColor,playheadFontFamily:n._viewOptions.fontFamily,playheadFontSize:n._viewOptions.fontSize,playheadFontStyle:n._viewOptions.fontStyle}),n._playheadLayer.addToStage(n._stage);var r=n._peaks.player.getCurrentTime();n._syncPlayhead(r),n._mouseDragHandler=new ui(n._peaks,n),n._onWheel=n._onWheel.bind(n),n._onWheelCaptureVerticalScroll=n._onWheelCaptureVerticalScroll.bind(n),n.setWheelMode(n._viewOptions.wheelMode),n._onClick=n._onClick.bind(n),n._onDblClick=n._onDblClick.bind(n),n._onContextMenu=n._onContextMenu.bind(n),n._stage.on("click",n._onClick),n._stage.on("dblclick",n._onDblClick),n._stage.on("contextmenu",n._onContextMenu)}K.prototype._initWaveformCache=function(){this._enableWaveformCache&&(this._waveformData=new Map,this._waveformData.set(this._originalWaveformData.scale,this._originalWaveformData),this._waveformScales=[this._originalWaveformData.scale])};K.prototype.enableSeek=function(e){this._enableSeek=e};K.prototype.isSeekEnabled=function(){return this._enableSeek};K.prototype._onClick=function(e){this._clickHandler(e,"click")};K.prototype._onDblClick=function(e){this._clickHandler(e,"dblclick")};K.prototype._onContextMenu=function(e){this._clickHandler(e,"contextmenu")};K.prototype._clickHandler=function(e,t){var i=!0;if(e.target!==this._stage){var n=_a(e.target);if(n){if(n.attrs.name==="point-marker"){var s=n.getAttr("point");s&&this._peaks.emit("points."+t,{point:s,evt:e.evt,preventViewEvent:function(){i=!1}})}else if(n.attrs.name==="segment-overlay"){var r=n.getAttr("segment");if(r){var a={segment:r,evt:e.evt,preventViewEvent:function(){i=!1}};this._segmentsLayer&&this._segmentsLayer.segmentClicked(t,a)}}}}if(i){var o=e.evt.layerX,l=this.pixelOffsetToTime(o);this._peaks.emit("zoomview."+t,{time:l,evt:e.evt})}};K.prototype.setWheelMode=function(e,t){if(t||(t={}),e!==this._wheelMode||t.captureVerticalScroll!==this._captureVerticalScroll)switch(this._stage.off("wheel"),this._wheelMode=e,this._captureVerticalScroll=t.captureVerticalScroll,e){case"scroll":t.captureVerticalScroll?this._stage.on("wheel",this._onWheelCaptureVerticalScroll):this._stage.on("wheel",this._onWheel);break}};K.prototype._onWheel=function(e){var t=e.evt,i;if(t.shiftKey)if(t.deltaY!==0)i=t.deltaY;else if(t.deltaX!==0)i=t.deltaX;else return;else{if(Math.abs(t.deltaX)<Math.abs(t.deltaY))return;i=t.deltaX}t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._width),t.preventDefault();var n=pt(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this.updateWaveform(n)};K.prototype._onWheelCaptureVerticalScroll=function(e){var t=e.evt,i=Math.abs(t.deltaX)<Math.abs(t.deltaY)?t.deltaY:t.deltaX;t.preventDefault();var n=pt(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this.updateWaveform(n)};K.prototype.setWaveformDragMode=function(e){this._viewOptions.enableSegments&&(this._mouseDragHandler.destroy(),e==="insert-segment"?this._mouseDragHandler=new rn(this._peaks,this):this._mouseDragHandler=new ui(this._peaks,this))};K.prototype.enableSegmentDragging=function(e){this._enableSegmentDragging=e,this._segmentsLayer&&this._segmentsLayer.enableSegmentDragging(e)};K.prototype.isSegmentDraggingEnabled=function(){return this._enableSegmentDragging};K.prototype.setSegmentDragMode=function(e){this._segmentDragMode=e};K.prototype.getSegmentDragMode=function(){return this._segmentDragMode};K.prototype.getName=function(){return"zoomview"};K.prototype._onTimeUpdate=function(e){this._mouseDragHandler.isDragging()||this._syncPlayhead(e)};K.prototype._onPlaying=function(e){this._playheadLayer.updatePlayheadTime(e)};K.prototype._onPause=function(e){this._playheadLayer.stop(e)};K.prototype._onKeyboardLeft=function(){this._keyboardScroll(-1,!1)};K.prototype._onKeyboardRight=function(){this._keyboardScroll(1,!1)};K.prototype._onKeyboardShiftLeft=function(){this._keyboardScroll(-1,!0)};K.prototype._onKeyboardShiftRight=function(){this._keyboardScroll(1,!0)};K.prototype._keyboardScroll=function(e,t){var i;t?i=e*this._width:i=e*this.timeToPixels(this._options.nudgeIncrement),this.scrollWaveform({pixels:i})};K.prototype.setWaveformData=function(e){this._originalWaveformData=e,this._initWaveformCache()};K.prototype.getPlayheadOffset=function(){return this._playheadLayer.getPlayheadPixel()-this._frameOffset};K.prototype.getPlayheadClickTolerance=function(){return this._playheadClickTolerance};K.prototype.playheadPosChanged=function(e){this._playedWaveformShape&&(this._playedSegment.endTime=e,this._unplayedSegment.startTime=e,this._drawWaveformLayer())};K.prototype.updatePlayheadTime=function(e){this._playheadLayer.updatePlayheadTime(e)};K.prototype._syncPlayhead=function(e){if(this._playheadLayer.updatePlayheadTime(e),this._autoScroll){var t=this.timeToPixels(e),i=this._frameOffset+this._width-this._autoScrollOffset;(t>=i||t<this._frameOffset)&&(this._frameOffset=t-this._autoScrollOffset,this._frameOffset<0&&(this._frameOffset=0),this.updateWaveform(this._frameOffset))}};K.prototype._getScale=function(e){return e*this._data.sample_rate/this._width};function Sg(e){return se(e,"scale")&&e.scale==="auto"||se(e,"seconds")&&e.seconds==="auto"}K.prototype.setZoom=function(e){var t;if(Sg(e)){var i=this._peaks.player.getDuration();if(!si(i))return!1;this._zoomLevelAuto=!0,this._zoomLevelSeconds=null,t=this._getScale(i)}else{if(se(e,"scale"))this._zoomLevelSeconds=null,t=e.scale;else if(se(e,"seconds")){if(!si(e.seconds))return!1;this._zoomLevelSeconds=e.seconds,t=this._getScale(e.seconds)}this._zoomLevelAuto=!1}t<this._originalWaveformData.scale&&(this._peaks._logger("peaks.zoomview.setZoom(): zoom level must be at least "+this._originalWaveformData.scale),t=this._originalWaveformData.scale);var n=this._peaks.player.getCurrentTime(),s,r=this.getPlayheadOffset();r>=0&&r<this._width?s=n:(r=Math.floor(this._width/2),s=this.pixelOffsetToTime(r));var a=this._scale;this._resampleData({scale:t});var o=this.timeToPixels(s);return this._frameOffset=o-r,this.updateWaveform(this._frameOffset),this._playheadLayer.zoomLevelChanged(),this._playheadLayer.updatePlayheadTime(n),this._peaks.emit("zoom.update",{currentZoom:t,previousZoom:a}),!0};K.prototype._resampleData=function(e){var t=e.scale;if(this._enableWaveformCache){if(!this._waveformData.has(t)){for(var i=this._originalWaveformData,n=0;n<this._waveformScales.length&&this._waveformScales[n]<t;n++)i=this._waveformData.get(this._waveformScales[n]);this._waveformData.set(t,i.resample(e)),this._waveformScales.push(t),this._waveformScales.sort(function(s,r){return s-r})}this._data=this._waveformData.get(t)}else this._data=this._originalWaveformData.resample(e);this._scale=this._data.scale,this._pixelLength=this._data.length};K.prototype.getStartTime=function(){return this.pixelOffsetToTime(0)};K.prototype.getEndTime=function(){return this.pixelOffsetToTime(this._width)};K.prototype.setStartTime=function(e){e<0&&(e=0),this._zoomLevelAuto&&(e=0),this.updateWaveform(this.timeToPixels(e))};K.prototype.timeToPixels=function(e){return Math.floor(e*this._data.sample_rate/this._data.scale)};K.prototype.pixelsToTime=function(e){return e*this._data.scale/this._data.sample_rate};K.prototype.pixelOffsetToTime=function(e){var t=this._frameOffset+e;return t*this._data.scale/this._data.sample_rate};K.prototype.timeToPixelOffset=function(e){return Math.floor(e*this._data.sample_rate/this._data.scale)-this._frameOffset};K.prototype.getFrameOffset=function(){return this._frameOffset};K.prototype.getWidth=function(){return this._width};K.prototype.getHeight=function(){return this._height};K.prototype.getPixelLength=function(){return this._pixelLength};K.prototype._getDuration=function(){return this._peaks.player.getDuration()};K.prototype.setAmplitudeScale=function(e){if(!Cs(e)||!Yl(e))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=e,this._drawWaveformLayer(),this._segmentsLayer&&this._segmentsLayer.draw()};K.prototype.getAmplitudeScale=function(){return this._amplitudeScale};K.prototype.getWaveformData=function(){return this._data};K.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new He({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var e=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:e},this._unplayedSegment={startTime:e,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new He({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};K.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};K.prototype._createWaveform=function(){this._waveformLayer=new Re.Layer({listening:!1}),this._createWaveformShapes(),this._stage.add(this._waveformLayer),this._peaks.emit("zoomview.displaying",0,this.getEndTime())};K.prototype._createAxisLabels=function(){this._axisLayer=new Re.Layer({listening:!1}),this._axis=new di(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};K.prototype.scrollWaveform=function(e){var t;if(se(e,"pixels"))t=Math.floor(e.pixels);else if(se(e,"seconds"))t=this.timeToPixels(e.seconds);else throw new TypeError("view.scrollWaveform(): Missing umber of pixels or seconds");this.updateWaveform(this._frameOffset+t)};K.prototype.updateWaveform=function(e){var t;this._pixelLength<this._width?(e=0,t=this._width):t=this._pixelLength-this._width,e=pt(e,0,t),this._frameOffset=e;var i=this._playheadLayer.getPlayheadPixel();this._playheadLayer.updatePlayheadTime(this.pixelsToTime(i)),this._drawWaveformLayer(),this._axisLayer.draw();var n=this.getStartTime(),s=this.getEndTime();this._pointsLayer&&this._pointsLayer.updatePoints(n,s),this._segmentsLayer&&this._segmentsLayer.updateSegments(n,s),this._peaks.emit("zoomview.displaying",n,s)};K.prototype._drawWaveformLayer=function(){this._waveformLayer.draw()};K.prototype.setWaveformColor=function(e){this._waveformColor=e,this._waveformShape.setWaveformColor(e)};K.prototype.setPlayedWaveformColor=function(e){this._playedWaveformColor=e,e?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(e)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};K.prototype.showPlayheadTime=function(e){this._playheadLayer.showPlayheadTime(e)};K.prototype.setTimeLabelPrecision=function(e){this._timeLabelPrecision=e,this._playheadLayer.updatePlayheadText()};K.prototype.formatTime=function(e){return this._formatPlayheadTime(e)};K.prototype.showAxisLabels=function(e){this._axis.showAxisLabels(e),this._axisLayer.draw()};K.prototype.enableAutoScroll=function(e,t){this._autoScroll=e,se(t,"offset")&&(this._autoScrollOffset=t.offset)};K.prototype.enableMarkerEditing=function(e){this._segmentsLayer&&this._segmentsLayer.enableEditing(e),this._pointsLayer&&this._pointsLayer.enableEditing(e)};K.prototype.getMinSegmentDragWidth=function(){return this._insertSegmentShape?0:this._minSegmentDragWidth};K.prototype.setMinSegmentDragWidth=function(e){this._minSegmentDragWidth=e};K.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var e=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.width(this._width);var t=!1,i;if(this._zoomLevelAuto?(t=!0,i={width:this._width}):this._zoomLevelSeconds!==null&&(t=!0,i={scale:this._getScale(this._zoomLevelSeconds)}),t)try{this._resampleData(i),e=!0}catch{}}this._container.clientHeight!==this._height&&(this._height=this._container.clientHeight,this._stage.height(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer&&this._segmentsLayer.fitToView(),this._pointsLayer&&this._pointsLayer.fitToView()),e&&this.updateWaveform(this._frameOffset)}};K.prototype.getStage=function(){return this._stage};K.prototype.getSegmentsLayer=function(){return this._segmentsLayer};K.prototype.getViewOptions=function(){return this._viewOptions};K.prototype.destroy=function(){this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("keyboard.left",this._onKeyboardLeft),this._peaks.off("keyboard.right",this._onKeyboardRight),this._peaks.off("keyboard.shift_left",this._onKeyboardShiftLeft),this._peaks.off("keyboard.shift_right",this._onKeyboardShiftRight),this._mouseDragHandler.destroy(),this._playheadLayer.destroy(),this._segmentsLayer&&this._segmentsLayer.destroy(),this._pointsLayer&&this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function rt(e,t,i){this._waveformData=e,this._container=t,this._peaks=i,this._options=i.options.scrollbar,this._zoomview=i.views.getView("zoomview"),this._dragBoundFunc=this._dragBoundFunc.bind(this),this._onScrollboxDragStart=this._onScrollboxDragStart.bind(this),this._onScrollboxDragMove=this._onScrollboxDragMove.bind(this),this._onScrollboxDragEnd=this._onScrollboxDragEnd.bind(this),this._onZoomviewDisplaying=this._onZoomviewDisplaying.bind(this),this._onScrollbarClick=this._onScrollbarClick.bind(this),i.on("zoomview.displaying",this._onZoomviewDisplaying),this._width=t.clientWidth,this._height=t.clientHeight,this._stage=new Re.Stage({container:t,width:this._width,height:this._height}),this._layer=new Re.Layer,this._stage.on("click",this._onScrollbarClick),this._stage.add(this._layer),this._color=this._options.color,this._scrollboxX=0,this._minScrollboxWidth=this._options.minWidth,this._offsetY=0,this._scrollbox=new Re.Group({draggable:!0,dragBoundFunc:this._dragBoundFunc}),this._scrollboxRect=new nn({x:this._scrollboxX,y:this._offsetY,width:0,height:this._height,fill:this._color}),this._scrollbox.add(this._scrollboxRect),this._setScrollboxWidth(),this._scrollbox.on("dragstart",this._onScrollboxDragStart),this._scrollbox.on("dragmove",this._onScrollboxDragMove),this._scrollbox.on("dragend",this._onScrollboxDragEnd),this._layer.add(this._scrollbox),this._layer.draw()}rt.prototype.setZoomview=function(e){this._zoomview=e,this._updateScrollbarWidthAndPosition()};rt.prototype._setScrollboxWidth=function(){this._zoomview?(this._scrollboxWidth=Math.floor(this._width*this._zoomview.pixelsToTime(this._zoomview.getWidth())/this._peaks.player.getDuration()),this._scrollboxWidth<this._minScrollboxWidth&&(this._scrollboxWidth=this._minScrollboxWidth)):this._scrollboxWidth=this._width,this._scrollboxRect.width(this._scrollboxWidth)};rt.prototype._getScrollbarRange=function(){return this._width-this._scrollboxWidth};rt.prototype._dragBoundFunc=function(e){return{x:e.x,y:0}};rt.prototype._onScrollboxDragStart=function(){this._dragging=!0};rt.prototype._onScrollboxDragEnd=function(){this._dragging=!1};rt.prototype._onScrollboxDragMove=function(){var e=this._getScrollbarRange(),t=pt(this._scrollbox.x(),0,e);this._scrollbox.x(t),t!==this._scrollboxX&&(this._scrollboxX=t,this._zoomview&&this._updateWaveform(t))};rt.prototype._onZoomviewDisplaying=function(){this._dragging||this._updateScrollbarWidthAndPosition()};rt.prototype._updateScrollbarWidthAndPosition=function(){if(this._setScrollboxWidth(),this._zoomview){var e=this._zoomview.getStartTime(),t=this._zoomview.getPixelLength()-this._zoomview.getWidth(),i=Math.floor(this._zoomview.timeToPixels(e)*this._getScrollbarRange()/t);this._scrollbox.x(i),this._layer.draw()}};rt.prototype._onScrollbarClick=function(e){if(e.target===this._stage&&this._zoomview){var t=Math.floor(e.evt.layerX-this._scrollboxWidth/2);t<0&&(t=0),this._updateWaveform(t)}};rt.prototype._updateWaveform=function(e){var t=Math.floor((this._zoomview.getPixelLength()-this._zoomview.getWidth())*e/this._getScrollbarRange());this._zoomview.updateWaveform(t)};rt.prototype.fitToContainer=function(){this._container.clientWidth===0&&this._container.clientHeight===0||(this._container.clientWidth!==this._width&&(this._width=this._container.clientWidth,this._stage.width(this._width),this._updateScrollbarWidthAndPosition()),this._height=this._container.clientHeight,this._stage.height(this._height))};rt.prototype.destroy=function(){this._layer.destroy(),this._stage.destroy(),this._stage=null};function Kt(e){this._peaks=e,this._overview=null,this._zoomview=null,this._scrollbar=null}Kt.prototype.createOverview=function(e){if(this._overview)return this._overview;var t=this._peaks.getWaveformData();return this._overview=new ae(t,e,this._peaks),this._zoomview&&this._overview.showHighlight(this._zoomview.getStartTime(),this._zoomview.getEndTime()),this._overview};Kt.prototype.createZoomview=function(e){if(this._zoomview)return this._zoomview;var t=this._peaks.getWaveformData();return this._zoomview=new K(t,e,this._peaks),this._scrollbar&&this._scrollbar.setZoomview(this._zoomview),this._zoomview};Kt.prototype.createScrollbar=function(e){var t=this._peaks.getWaveformData();return this._scrollbar=new rt(t,e,this._peaks),this._scrollbar};Kt.prototype.destroyOverview=function(){!this._overview||!this._zoomview||(this._overview.destroy(),this._overview=null)};Kt.prototype.destroyZoomview=function(){!this._zoomview||!this._overview||(this._zoomview.destroy(),this._zoomview=null,this._overview.removeHighlightRect())};Kt.prototype.destroy=function(){this._overview&&(this._overview.destroy(),this._overview=null),this._zoomview&&(this._zoomview.destroy(),this._zoomview=null),this._scrollbar&&(this._scrollbar.destroy(),this._scrollbar=null)};Kt.prototype.getView=function(e){if(ft(e))return this._overview&&this._zoomview?null:this._overview?this._overview:this._zoomview?this._zoomview:null;switch(e){case"overview":return this._overview;case"zoomview":return this._zoomview;default:return null}};Kt.prototype.getScrollbar=function(){return this._scrollbar};function Li(e,t){this._peaks=e,this._zoomLevels=t,this._zoomLevelIndex=0}Li.prototype.setZoomLevels=function(e){this._zoomLevels=e,this.setZoom(0,!0)};Li.prototype.zoomIn=function(){this.setZoom(this._zoomLevelIndex-1)};Li.prototype.zoomOut=function(){this.setZoom(this._zoomLevelIndex+1)};Li.prototype.setZoom=function(e,t){if(e>=this._zoomLevels.length&&(e=this._zoomLevels.length-1),e<0&&(e=0),!(!t&&e===this._zoomLevelIndex)){this._zoomLevelIndex=e;var i=this._peaks.views.getView("zoomview");!i||i.setZoom({scale:this._zoomLevels[e]})}};Li.prototype.getZoom=function(){return this._zoomLevelIndex};Li.prototype.getZoomLevel=function(){return this._zoomLevels[this._zoomLevelIndex]};var Co="withCredentials"in new XMLHttpRequest;function Ft(e){this._peaks=e}Ft.prototype.init=function(e,t){if(e.dataUri&&(e.webAudio||e.audioContext)||e.waveformData&&(e.webAudio||e.audioContext)||e.dataUri&&e.waveformData){t(new TypeError("Peaks.init(): You may only pass one source (webAudio, dataUri, or waveformData) to render waveform data."));return}if(e.audioContext&&(this._peaks._logger("Peaks.init(): The audioContext option is deprecated, please pass a webAudio object instead"),e.webAudio={audioContext:e.audioContext}),e.dataUri)return this._getRemoteWaveformData(e,t);if(e.waveformData)return this._buildWaveformFromLocalData(e,t);if(e.webAudio)return e.webAudio.audioBuffer?this._buildWaveformDataFromAudioBuffer(e,t):this._buildWaveformDataUsingWebAudio(e,t);t(new Error("Peaks.init(): You must pass an audioContext, or dataUri, or waveformData to render waveform data"))};Ft.prototype._getRemoteWaveformData=function(e,t){var i=this,n=null,s=null,r;if(Pn(e.dataUri))n=e.dataUri;else{t(new TypeError("Peaks.init(): The dataUri option must be an object"));return}if(["ArrayBuffer","JSON"].some(function(a){if(window[a])return s=a.toLowerCase(),r=n[s],Boolean(r)}),!r){t(new Error("Peaks.init(): Unable to determine a compatible dataUri format for this browser"));return}i._xhr=i._createXHR(r,s,e.withCredentials,function(a){if(this.readyState===4){if(this.status!==200){t(new Error("Unable to fetch remote data. HTTP status "+this.status));return}i._xhr=null;var o=gt.create(a.target.response);if(o.channels!==1&&o.channels!==2){t(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(o.bits!==8){t(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}t(null,o)}},function(){t(new Error("XHR failed"))},function(){t(new Error("XHR aborted"))}),i._xhr.send()};Ft.prototype._buildWaveformFromLocalData=function(e,t){var i=null,n=null;if(Pn(e.waveformData))i=e.waveformData;else{t(new Error("Peaks.init(): The waveformData option must be an object"));return}if(Pn(i.json)?n=i.json:Jf(i.arraybuffer)&&(n=i.arraybuffer),!n){t(new Error("Peaks.init(): Unable to determine a compatible waveformData format"));return}try{var s=gt.create(n);if(s.channels!==1&&s.channels!==2){t(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(s.bits!==8){t(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}t(null,s)}catch(r){t(r)}};Ft.prototype._buildWaveformDataUsingWebAudio=function(e,t){var i=this,n=window.AudioContext||window.webkitAudioContext;if(!(e.webAudio.audioContext instanceof n)){t(new TypeError("Peaks.init(): The webAudio.audioContext option must be a valid AudioContext"));return}var s=e.webAudio;s.scale!==e.zoomLevels[0]&&(s.scale=e.zoomLevels[0]);var r=i._peaks.options.mediaElement.currentSrc;r?i._requestAudioAndBuildWaveformData(r,s,e.withCredentials,t):i._peaks.once("player.canplay",function(){i._requestAudioAndBuildWaveformData(i._peaks.options.mediaElement.currentSrc,s,e.withCredentials,t)})};Ft.prototype._buildWaveformDataFromAudioBuffer=function(e,t){var i=e.webAudio;i.scale!==e.zoomLevels[0]&&(i.scale=e.zoomLevels[0]);var n={audio_buffer:i.audioBuffer,split_channels:i.multiChannel,scale:i.scale,disable_worker:!0};gt.createFromAudio(n,t)};Ft.prototype._requestAudioAndBuildWaveformData=function(e,t,i,n){var s=this;if(!e){s._peaks._logger("Peaks.init(): The mediaElement src is invalid");return}s._xhr=s._createXHR(e,"arraybuffer",i,function(r){if(this.readyState===4){if(this.status!==200){n(new Error("Unable to fetch remote data. HTTP status "+this.status));return}s._xhr=null;var a={audio_context:t.audioContext,array_buffer:r.target.response,split_channels:t.multiChannel,scale:t.scale};gt.createFromAudio(a,n)}},function(){n(new Error("XHR failed"))},function(){n(new Error("XHR aborted"))}),s._xhr.send()};Ft.prototype.abort=function(){this._xhr&&this._xhr.abort()};Ft.prototype._createXHR=function(e,t,i,n,s,r){var a=new XMLHttpRequest;if(a.open("GET",e,!0),Co)try{a.responseType=t}catch{}return a.onload=n,a.onerror=s,Co&&i&&(a.withCredentials=!0),a.addEventListener("abort",r),a};function ai(){return Kl.call(this),this.options={zoomLevels:[512,1024,2048,4096],waveformCache:!0,mediaElement:null,mediaUrl:null,dataUri:null,withCredentials:!1,waveformData:null,webAudio:null,nudgeIncrement:1,pointMarkerColor:"#39cccc",createSegmentMarker:pg,createSegmentLabel:_g,createPointMarker:mg,logger:console.error.bind(console)},this}ai.prototype=Object.create(Kl.prototype);var Es={playheadColor:"#111111",playheadTextColor:"#aaaaaa",axisGridlineColor:"#cccccc",showAxisLabels:!0,axisLabelColor:"#aaaaaa",fontFamily:"sans-serif",fontSize:11,fontStyle:"normal",timeLabelPrecision:2,enablePoints:!0,enableSegments:!0},To={playheadClickTolerance:3,waveformColor:"rgba(0, 225, 128, 1)",wheelMode:"none",autoScroll:!0,autoScrollOffset:100},Eo={waveformColor:"rgba(0, 0, 0, 0.2)",highlightColor:"#aaaaaa",highlightStrokeColor:"transparent",highlightOpacity:.3,highlightOffset:11,highlightCornerRadius:2},Cg={overlay:!1,markers:!0,startMarkerColor:"#aaaaaa",endMarkerColor:"#aaaaaa",waveformColor:"#0074d9",overlayColor:"#ff0000",overlayOpacity:.3,overlayBorderColor:"#ff0000",overlayBorderWidth:2,overlayCornerRadius:5,overlayOffset:25,overlayLabelAlign:"left",overlayLabelVerticalAlign:"top",overlayLabelPadding:8,overlayLabelColor:"#000000",overlayFontFamily:"sans-serif",overlayFontSize:12,overlayFontStyle:"normal"},Tg={color:"#888888",minWidth:50};function Eg(e){var t={};e.overview&&e.overview.showPlayheadTime&&(t.showPlayheadTime=e.overview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","highlightColor","highlightStrokeColor","highlightOpacity","highlightCornerRadius","highlightOffset","enablePoints","enableSegments"];return i.forEach(function(n){e.overview&&se(e.overview,n)?t[n]=e.overview[n]:se(e,n)?t[n]=e[n]:se(t,n)||(se(Eo,n)?t[n]=Eo[n]:se(Es,n)&&(t[n]=Es[n]))}),t}function kg(e){var t={};e.showPlayheadTime?t.showPlayheadTime=e.showPlayheadTime:e.zoomview&&e.zoomview.showPlayheadTime&&(t.showPlayheadTime=e.zoomview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","playheadClickTolerance","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","wheelMode","autoScroll","autoScrollOffset","enablePoints","enableSegments"];return i.forEach(function(n){e.zoomview&&se(e.zoomview,n)?t[n]=e.zoomview[n]:se(e,n)?t[n]=e[n]:se(t,n)||(se(To,n)?t[n]=To[n]:se(Es,n)&&(t[n]=Es[n]))}),t}function xg(e){if(!se(e,"scrollbar"))return null;var t={},i=["container","color","minWidth"];return i.forEach(function(n){se(e.scrollbar,n)?t[n]=e.scrollbar[n]:t[n]=Tg[n]}),t}function ds(e,t){for(var i in t)se(t,i)&&se(e,i)&&(e[i]=t[i]);return e}function Ag(e,t){e.segmentOptions={},yn(e.segmentOptions,Cg),t.segmentOptions&&ds(e.segmentOptions,t.segmentOptions),e.zoomview.segmentOptions={},yn(e.zoomview.segmentOptions,e.segmentOptions),t.zoomview&&t.zoomview.segmentOptions&&ds(e.zoomview.segmentOptions,t.zoomview.segmentOptions),e.overview.segmentOptions={},yn(e.overview.segmentOptions,e.segmentOptions),t.overview&&t.overview.segmentOptions&&ds(e.overview.segmentOptions,t.overview.segmentOptions)}function ko(e){var t=e.zoomview.container,i=e.overview.container;if(!Br(t)&&!Br(i))return new TypeError("Peaks.init(): The zoomview and/or overview container options must be valid HTML elements");if(t&&(t.clientWidth<=0||t.clientHeight<=0))return new Error("Peaks.init(): Please ensure that the zoomview container is visible and has non-zero width and height");if(i&&(i.clientWidth<=0||i.clientHeight<=0))return new Error("Peaks.init(): Please ensure that the overview container is visible and has non-zero width and height")}ai.init=function(e,t){var i=new ai,n=i._setOptions(e);if(n){t(n);return}if(n=ko(i.options),n){t(n);return}var s=null;if(i.options.scrollbar){if(s=i.options.scrollbar.container,!Br(s)){t(new TypeError("Peaks.init(): The scrollbar container option must be a valid HTML element"));return}if(s.clientWidth<=0){t(new TypeError("Peaks.init(): Please ensure that the scrollbar container is visible and has non-zero width"));return}}e.keyboard&&(i._keyboardHandler=new ma(i));var r=e.player?e.player:new _t(i.options.mediaElement);return i.player=new ct(i,r),i.segments=new Fe(i),i.points=new Ke(i),i.zoom=new Li(i,i.options.zoomLevels),i.views=new Kt(i),i._waveformBuilder=new Ft(i),i.player.init(i).then(function(){i._waveformBuilder.init(i.options,function(a,o){if(a){t&&t(a);return}if(a=ko(i.options),a){t&&t(a);return}i._waveformBuilder=null,i._waveformData=o;var l=i.options.zoomview.container,h=i.options.overview.container;h&&i.views.createOverview(h),l&&i.views.createZoomview(l),s&&i.views.createScrollbar(s),e.segments&&i.segments.add(e.segments),e.points&&i.points.add(e.points),e.emitCueEvents&&(i._cueEmitter=new kt(i)),setTimeout(function(){i.emit("peaks.ready")},0),t(null,i)})}).catch(function(a){t&&t(a)}),i};ai.prototype._setOptions=function(e){if(!Pn(e))return new TypeError("Peaks.init(): The options parameter should be an object");if(!e.player){if(!e.mediaElement)return new Error("Peaks.init(): Missing mediaElement option");if(!(e.mediaElement instanceof HTMLMediaElement))return new TypeError("Peaks.init(): The mediaElement option should be an HTMLMediaElement")}if(e.logger&&!Qf(e.logger))return new TypeError("Peaks.init(): The logger option should be a function");if(e.segments&&!Array.isArray(e.segments))return new TypeError("Peaks.init(): options.segments must be an array of segment objects");if(e.points&&!Array.isArray(e.points))return new TypeError("Peaks.init(): options.points must be an array of point objects");if(ds(this.options,e),this.options.overview=Eg(e),this.options.zoomview=kg(e),this.options.scrollbar=xg(e),Ag(this.options,e),Array.isArray(this.options.zoomLevels)){if(this.options.zoomLevels.length===0)return new Error("Peaks.init(): The zoomLevels array must not be empty");if(!qf(this.options.zoomLevels))return new Error("Peaks.init(): The zoomLevels array must be sorted in ascending order")}else return new TypeError("Peaks.init(): The zoomLevels option should be an array");this._logger=this.options.logger};ai.prototype.setSource=function(e,t){var i=this;i.player._setSource(e).then(function(){e.zoomLevels||(e.zoomLevels=i.options.zoomLevels),i._waveformBuilder=new Ft(i),i._waveformBuilder.init(e,function(n,s){if(n){t(n);return}i._waveformBuilder=null,i._waveformData=s,["overview","zoomview"].forEach(function(r){var a=i.views.getView(r);a&&a.setWaveformData(s)}),i.zoom.setZoomLevels(e.zoomLevels),t()})}).catch(function(n){t(n)})};ai.prototype.getWaveformData=function(){return this._waveformData};ai.prototype.destroy=function(){this._waveformBuilder&&this._waveformBuilder.abort(),this._keyboardHandler&&this._keyboardHandler.destroy(),this.views&&this.views.destroy(),this.player&&this.player.destroy(),this._cueEmitter&&this._cueEmitter.destroy()};const Pg=["src"],Ig=["src"],Mg={class:"peaks-controls"},Og=300,wt=Et({__name:"AudioPeaks",props:{src:{},video:{type:Boolean},eager:{type:Boolean},zoomviewElementId:{},zoomviewElement:{},overviewElementId:{},overviewElement:{},mediaElementId:{},mediaElement:{},options:{}},emits:["error"],setup(e,{expose:t,emit:i}){const n=e;zd(k=>({"4b433cd3":C.value,a0323a98:u.value}));const s=mt(void 0),r=mt(null),a=mt(null),o=mt(null),l=mt(null),h=mt(null),d=mt(null),f=mt(null),y=mt(void 0);t({peaksInstance:s}),Gs(()=>{n.eager&&_()}),fl(()=>{b()});const g=uu(r);Ci(g,async()=>{!n.eager&&g.value==!0&&s.value==null&&_()},{immediate:!0});function _(){console.debug("AudioPeaks::createPeaksInstance:options:",n.options);const k=A(n.overviewElement,n.overviewElementId,a,o,"div"),F=A(n.zoomviewElement,n.zoomviewElementId,l,h,"div"),S=A(n.mediaElement,n.mediaElementId,d,f,"audio,video");n.options&&(n.options.zoomview?n.options.zoomview.container=F:n.options.zoomview={container:F},n.options.overview?n.options.overview.container=k:n.options.overview={container:k},n.options.mediaElement=S);const W=n.options?n.options:{overview:{container:k},zoomview:{container:F},mediaElement:S,webAudio:{audioContext:new AudioContext},zoomLevels:[256,512,1024,2048,4096]};ai.init(W,function(x,N){x&&(console.error(x),i("error",x)),s.value=N,y.value=N==null?void 0:N.zoom.getZoom()})}function b(){var k;(k=s.value)==null||k.destroy()}cu(r,()=>{v()});const v=lu(()=>{var S,W;console.debug("AudioPeaks::debouncedOverviewResize");const k=(S=s.value)==null?void 0:S.views.getView("overview");k==null||k.fitToContainer();const F=(W=s.value)==null?void 0:W.views.getView("zoomview");F==null||F.fitToContainer()},Og);function A(k,F,S,W,x){if(k)return console.debug("AudioPeaks::Found elm: ",k),k;if(F)return console.debug("AudioPeaks::Found element by id: ",F),document.getElementById(""+F);const N=S.value;if(N)return console.debug("AudioPeaks::Found element by Ref: ",N),N;const Y=W.value;if(Y){const X=Y.querySelector(x);if(X)return console.debug("AudioPeaks::Found element by first in slot: ",X),X}}function E(){var k,F;(k=s.value)==null||k.zoom.zoomIn(),y.value=(F=s.value)==null?void 0:F.zoom.getZoom()}function c(){var k,F;(k=s.value)==null||k.zoom.zoomOut(),y.value=(F=s.value)==null?void 0:F.zoom.getZoom()}const u=bt(()=>{var k,F,S;return(S=(F=(k=n.options)==null?void 0:k.zoomview)==null?void 0:F.waveformColor)!=null?S:"rgba(0, 225, 128, 1)"}),C=bt(()=>{var k,F,S;return(S=(F=(k=n.options)==null?void 0:k.overview)==null?void 0:F.waveformColor)!=null?S:"rgba(0, 0, 0, 0.2)"});return(k,F)=>(ke(),Le("div",{ref_key:"audioPeaks",ref:r,class:"peaks"},[m("div",{ref_key:"overviewSlot",ref:o},[!n.overviewElementId&&!n.overviewElement?Zn(k.$slots,"overview",{key:0},()=>[m("div",{class:"peaks-overview",ref_key:"overview",ref:a},null,512)]):gn("",!0)],512),m("div",{ref_key:"zoomviewSlot",ref:h},[!n.zoomviewElementId&&!n.zoomviewElement?Zn(k.$slots,"zoomview",{key:0},()=>[m("div",{class:"peaks-zoomview",ref_key:"zoomview",ref:l},null,512)]):gn("",!0)],512),m("div",{ref_key:"mediaSlot",ref:f},[!n.mediaElementId&&!n.mediaElement?Zn(k.$slots,"default",{key:0},()=>[k.video?(ke(),Le("video",{key:0,class:"peaks",ref_key:"media",ref:d,controls:""},[m("source",{src:k.src},null,8,Pg),ce(" Your browser does not support the video element. ")],512)):(ke(),Le("audio",{key:1,class:"peaks peaks-audio",ref_key:"media",ref:d,controls:""},[m("source",{src:k.src},null,8,Ig),ce(" Your browser does not support the audio element. ")],512))]):gn("",!0)],512),Zn(k.$slots,"controls",{},()=>[m("div",Mg,[m("button",{onClick:F[0]||(F[0]=S=>E())},"Zoom in"),ce("\xA0 "),m("button",{onClick:F[1]||(F[1]=S=>c())},"Zoom out"),ce("\xA0 "),m("span",null,"Zoom level: "+zr(y.value),1)])])],512))}});const Dg=m("p",null,[ce("vue-peaks provides three modes of operation: "),m("ul",null,[m("li",null,[m("b",null,"Simple mode"),ce(": just set the media URL, and all views are automatically rendered by default")]),m("li",null,[m("b",null,"Slot mode"),ce(": the media element and additional views are provided using named slots")]),m("li",null,[m("b",null,"External mode"),ce(": the media element and additional views are referenced by id or HTML element references ")])])],-1),Lg=m("p",null," First, import the Single File Component (SFC): ",-1),Rg=m("h4",{class:"title is-4"},"Simple mode",-1),Fg={class:"columns is-desktop"},Ng={class:"column"},Bg=m("p",null,[ce(" By default, the "),m("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaks.vue"},"AudioPeaks Vue component"),ce(" template creates a new audio element, with the given source URL, and both view panes (overview and zoom, which are rendered with a default size) and a controls pane. A new audio context is created and used to compute the waveform. ")],-1),Wg={class:"column"},Gg={class:"box"},Ug=m("h4",{class:"title is-4"},"Slot mode",-1),Hg={class:"columns is-desktop"},Vg=m("div",{class:"column"},[m("p",null,[ce(" To provide your own media element, just place it inside the "),m("span",{class:"code"},"AudioPeaks"),ce(" element (a.k.a. the slot). Vue-peaks will use the first media element in the slot. A new audio context is created and used to compute the waveform. ")])],-1),zg={class:"column"},$g={class:"column is-narrow"},Xg={class:"box"},jg=m("span",{class:"tag is-danger is-multiline"},"You can also add additional HTML content.",-1),Kg=m("audio",{controls:""},[m("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),Yg=m("h4",{class:"title is-4"},"External mode",-1),Zg=m("h5",{class:"title is-5"},"External media element only",-1),qg={class:"columns is-desktop"},Jg=m("div",{class:"column"},[m("p",null," If you already have an existing media element, you can reference it by it's (unique) id, or as an HTMLMediaElement object. A new audio context is created and used to compute the waveform. ")],-1),Qg={class:"column"},ep={class:"column is-narrow"},tp={class:"box"},ip=m("audio",{controls:"",id:"externalMediaElement"},[m("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),np=m("div",null,[m("span",{class:"tag is-danger"}," Using the external media element above.")],-1),sp=m("h5",{class:"title is-5"},"Having all elements externally",-1),rp={class:"columns is-desktop"},ap=m("div",{class:"column"},[m("p",null," There are also properties available for an external overview area and an external zoom view area. "),m("p",null," Note however, that the default styles and the progress indication are not applied to any external HTML elements. ")],-1),op={class:"column"},lp={class:"column is-narrow"},hp={class:"box"},cp=zt('<div id="externalBasicOverviewDivId">External overview</div><div id="externalBasicZoomviewDivId">External zoomview</div><audio controls id="externalBasicMediaElement"><source src="https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"></audio><div><span class="tag is-danger"> Using the external overview, zoomview and audio element above.</span></div>',4),dp=m("template",null,null,-1),up=Et({__name:"ExampleWithTheBasics",setup(e){return(t,i)=>{const n=Lt("highlightjs");return ke(),Le(Ye,null,[Dg,Lg,ne(n,{language:"vue-typescript",code:"import AudioPeaks from 'vue-peaks/src/components/AudioPeaks.vue';"}),Rg,m("div",Fg,[m("div",Ng,[Bg,ne(n,{language:"vue-template",code:"<AudioPeaks src='https://domain/file.mp3' />"})]),m("div",Wg,[m("div",Gg,[ne(wt,{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})])])]),Ug,m("div",Hg,[Vg,m("div",zg,[ne(n,{language:"vue-template",code:`<AudioPeaks>
  <span>You can also add additional HTML content.</span>
  <audio controls>
    <source src='https://domain/file.mp3' />
  </audio>
</AudioPeaks>`})]),m("div",$g,[m("div",Xg,[ne(wt,null,{default:et(()=>[jg,Kg]),_:1})])])]),Yg,Zg,m("div",qg,[Jg,m("div",Qg,[ne(n,{language:"vue-template",code:`<audio controls id='externalMediaElement'>
  <source src='https://domain/file.mp3' />
</audio>
<div><span class='tag is-danger'>
    Using the external media element above.</span></div>
<AudioPeaks mediaElementId='externalMediaElement'>
</AudioPeaks>`})]),m("div",ep,[m("div",tp,[ip,np,ne(wt,{mediaElementId:"externalMediaElement"})])])]),sp,m("div",rp,[ap,m("div",op,[ne(n,{language:"vue-template",code:`<div id='externalBasicOverviewDivId'>External overview</div>
<div id='externalBasicZoomviewDivId'>External zoomview</div>
<audio controls id='externalBasicMediaElement'>
  <source src='https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3' />
</audio>        
<div><span class='tag is-danger'>
    Using the external overview, zoomview and audio element above.</span></div>
<AudioPeaks 
  overviewElementId='externalBasicOverviewDivId'
  zoomviewElementId='externalBasicZoomviewDivId'
  mediaElementId='externalBasicMediaElement'
  >
  <template #controls>
    <template />
  </template>
</AudioPeaks>`})]),m("div",lp,[m("div",hp,[cp,ne(wt,{mediaElementId:"externalBasicMediaElement",overviewElementId:"externalBasicOverviewDivId",zoomviewElementId:"externalBasicZoomviewDivId"},{controls:et(()=>[dp]),_:1})])])])],64)}}}),at=e=>(ea("data-v-87040083"),e=e(),ta(),e),fp=at(()=>m("p",null," vue-peaks also supports video, as peaks.js does. These examples expand on the above examples, with a focus on video content. ",-1)),gp=at(()=>m("h4",{class:"title is-4"},"Simple mode (with video)",-1)),pp={class:"columns is-desktop"},_p={class:"column"},mp=at(()=>m("p",null,[ce(" By default, the "),m("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaks.vue"},"AudioPeaks Vue component"),ce(" template creates a new audio element. While this works for the audio part of video content, you can specify that the used HTML media element actually is a video element: ")],-1)),vp={class:"column"},yp={class:"box"},bp=at(()=>m("p",null,[ce(" Voyage of Discovery (Source: "),m("a",{href:"https://solarsystem.nasa.gov/resources/317/voyage-of-discovery/?category=planets_saturn"},"NASA)"),ce(", 12.3 MB (video/webm) ")],-1)),wp=at(()=>m("h4",{class:"title is-4"},"Slot mode (with video)",-1)),Sp={class:"columns is-desktop"},Cp={class:"column"},Tp=at(()=>m("p",null,[ce(" No difference to audio here, just place your video element inside the "),m("span",{class:"code"},"AudioPeaks"),ce(" element using the default slot. ")],-1)),Ep=at(()=>m("p",null,[ce(" Note that the default slot is still named "),m("span",{class:"code"},"#audio"),ce(", in case you want to use it for customization. ")],-1)),kp={class:"columns is-desktop"},xp={class:"column"},Ap={class:"box"},Pp=at(()=>m("p",null,[ce(" Cassini's High-Flying, Ring-Grazing Orbits (Source: "),m("a",{href:"https://solarsystem.nasa.gov/resources/17561/cassinis-high-flying-ring-grazing-orbits/?category=videos"},"NASA / Jet Propulsion Laboratory - Caltech)"),ce(", 27.1 MB (video/ogg) ")],-1)),Ip=at(()=>m("video",{controls:"",style:{width:"100%"}},[m("source",{src:"https://solarsystem.nasa.gov/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBbDFmIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--971840d1ebc56d50fc897c92adb1b8d7f8aad71e/JPL-20161121-CASSINf-0001-720.ogv?disposition=inline"})],-1)),Mp=at(()=>m("h4",{class:"title is-4"},"External mode (with video)",-1)),Op={class:"columns is-desktop"},Dp={class:"column"},Lp=at(()=>m("p",null," As with audio, you can reference your existing video element by it's (unique) id, or as an HTMLMediaElement object. ",-1)),Rp={class:"column is-narrow"},Fp={class:"box"},Np=at(()=>m("p",null,[ce(" Where is the Edge of the Solar System? (Source: "),m("a",{href:"https://solarsystem.nasa.gov/resources/17561/cassinis-high-flying-ring-grazing-orbits/?category=videos"},"NASA's Goddard Space Flight Center)"),ce(", 28.8 MB (video/mp4) ")],-1)),Bp=at(()=>m("video",{controls:"",id:"externalVideoElement"},[m("source",{src:"https://solarsystem.nasa.gov/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBczlnIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--8e7fbe9534876dd62ed8e8eec07a33197beab17a/12639_EdgeofSolarSystem_Final_24fps_v02_VX-718267_appletv_subtitles.m4v?disposition=inline"})],-1)),Wp=at(()=>m("div",null,[m("span",{class:"tag is-danger"}," Using the external video element above.")],-1)),Gp=Et({__name:"ExampleUsingVideo",setup(e){return(t,i)=>{const n=Lt("highlightjs");return ke(),Le(Ye,null,[fp,gp,m("div",pp,[m("div",_p,[mp,ne(n,{language:"vue-template",code:"<AudioPeaks video src='https://domain/video-file.mp4' />"})]),m("div",vp,[m("div",yp,[bp,ne(wt,{video:"",src:"https://solarsystem.nasa.gov/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBcHRYIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--c6d603ff2a89b19ebdd89842ff2e35911e2ca2a2/-home-www-videos-voyager-20130912d-discovery20110428-640.webm?disposition=inline"})])])]),wp,m("div",Sp,[m("div",Cp,[Tp,ne(n,{language:"vue-template",code:`<AudioPeaks>
  <video controls>
    <source src='https://domain/video-file.mp4' />
  </video>
</AudioPeaks>`}),Ep]),m("div",kp,[m("div",xp,[m("div",Ap,[Pp,ne(wt,null,{default:et(()=>[Ip]),_:1})])])])]),Mp,m("div",Op,[m("div",Dp,[Lp,ne(n,{language:"vue-template",code:`<audio controls id='externalVideoElement'>
  <source src='https://domain/video-file.mp4' />
</audio>
<div><span class='tag is-danger'>
    Using the external media element above.</span></div>
<AudioPeaks mediaElementId='externalVideoElement'>
</AudioPeaks>`})]),m("div",Rp,[m("div",Fp,[Np,Bp,Wp,ne(wt,{mediaElementId:"externalVideoElement"})])])])],64)}}});const Up=Pi(Gp,[["__scopeId","data-v-87040083"]]),Hp={class:"columns is-desktop"},Vp=zt('<div class="column"><p> To fully customize the appearance and behavior, the Peaks.js <a href="https://github.com/bbc/peaks.js/blob/master/doc/API.md#configuration">configuration options</a> can be provided. </p><p> Note, that you should omit the the <span class="code">zoomview.container</span>, <span class="code">overview.container</span> and <span class="code">mediaElement</span> options, since these are already handled internally, depending on the view mode (see explanation with the basic examples). </p><p>The options allow you for example to <ul><li>customize the waveform styles</li><li>define scrolling behavior</li><li>use precomputed waveform data</li></ul></p></div>',1),zp={class:"column"},$p={class:"column"},Xp={class:"box"},jp=m("audio",{controls:""},[m("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),Kp=m("template",null,null,-1),Yp=Et({__name:"ExampleUsingPeaksOptions",setup(e){const t={overview:{waveformColor:"#3298dc",playedWaveformColor:"#238cd1",highlightColor:"hsl(206, 70%, 96%)",highlightOffset:0,axisGridlineColor:"hsl(0, 0%, 29%)",axisLabelColor:"hsl(0, 0%, 29%)",showPlayheadTime:!1},zoomview:{waveformColor:"#f1b70e",playedWaveformColor:"#d9a50d",axisGridlineColor:"hsl(0, 0%, 29%)",axisLabelColor:"hsl(0, 0%, 29%)",playheadTextColor:"#e43725",showPlayheadTime:!0},webAudio:{audioContext:new AudioContext},zoomLevels:[256],playheadColor:"#e43725"};return(i,n)=>{const s=Lt("highlightjs");return ke(),Le("div",Hp,[Vp,m("div",zp,[ne(s,{language:"vue-typescript",code:`/** The configuration options 
* @remarks The colors are taken from a Bulma color scheme.
*/
const options: PeaksOptions = {
  overview: {
    /* container is handled separately by AudioPeaks */
    waveformColor: 'hsl(204, 86%, 53%)',
    playedWaveformColor: 'hsl(204, 71%, 39%)',
    highlightColor: 'hsl(206, 70%, 96%)',
    highlightOffset: 0,
    axisGridlineColor: 'hsl(0, 0%, 29%)',
    axisLabelColor: 'hsl(0, 0%, 29%)',
  },
  zoomview: {
    /* container is handled separately by AudioPeaks */
    waveformColor: 'hsl(48, 71%, 48%)',
    playedWaveformColor: 'hsl(48, 53%, 31%)',
    axisGridlineColor: 'hsl(0, 0%, 29%)',
    axisLabelColor: 'hsl(0, 0%, 29%)',
  },
  /* mediaElement is handled separately by AudioPeaks */
  webAudio: { audioContext: new AudioContext() },
  zoomLevels: [256],
  playheadColor: 'hsl(348, 100%, 61%)'
}`}),ne(s,{language:"vue-template",code:`<AudioPeaks :options='options'>
  <audio controls>
    <source src='https://domain/file.mp3' />
  </audio>
  <template #controls><template />
    <!-- Using an empty template on a slot 
         prevents the default content -->
  </template>
</AudioPeaks>`})]),m("div",$p,[m("div",Xp,[ne(wt,{options:t},{controls:et(()=>[Kp]),default:et(()=>[jp]),_:1})])])])}}}),Ri=e=>(ea("data-v-b3ef7b4c"),e=e(),ta(),e),Zp={class:"widget"},qp=["disabled"],Jp={key:0,style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Qp=Ri(()=>m("path",{fill:"currentColor",d:"M14,19H18V5H14M6,19H10V5H6V19Z"},null,-1)),e_=[Qp],t_={key:1,style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},i_=Ri(()=>m("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"},null,-1)),n_=[i_],s_=["disabled"],r_={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},a_=Ri(()=>m("path",{fill:"currentColor",d:"M14.55 20C15 20.76 15.5 21.44 15.91 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V10.22C19.5 10.08 19 10 18.5 10C18.33 10 18.17 10 18 10.03V4H13V12L10.5 9.75L8 12V4H6V20H14.55M22 15.5C22 18.1 18.5 22 18.5 22S15 18.1 15 15.5C15 13.6 16.6 12 18.5 12S22 13.6 22 15.5M19.7 15.6C19.7 15 19.1 14.4 18.5 14.4S17.3 14.9 17.3 15.6C17.3 16.2 17.8 16.8 18.5 16.8S19.8 16.2 19.7 15.6Z"},null,-1)),o_=[a_],l_=["disabled"],h_={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},c_=Ri(()=>m("path",{fill:"currentColor",d:"M13.09 20C13.21 20.72 13.46 21.39 13.81 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V13.09C19.67 13.04 19.34 13 19 13C18.66 13 18.33 13.04 18 13.09V4H13V12L10.5 9.75L8 12V4H6V20H13.09M17 16V22L22 19L17 16Z"},null,-1)),d_=[c_],u_=Ri(()=>m("template",null,null,-1)),f_=["src"],g_=Ri(()=>m("template",null,null,-1)),p_={class:"item peaks-overview",id:"widgetOverview"},__=["title"],m_={class:"spin",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},v_=Ri(()=>m("path",{fill:"currentColor",d:"M12 19C13.1 19 14 19.9 14 21S13.1 23 12 23 10 22.1 10 21 10.9 19 12 19M12 1C13.1 1 14 1.9 14 3S13.1 5 12 5 10 4.1 10 3 10.9 1 12 1M6 16C7.1 16 8 16.9 8 18S7.1 20 6 20 4 19.1 4 18 4.9 16 6 16M3 10C4.1 10 5 10.9 5 12S4.1 14 3 14 1 13.1 1 12 1.9 10 3 10M6 4C7.1 4 8 4.9 8 6S7.1 8 6 8 4 7.1 4 6 4.9 4 6 4M18 16C19.1 16 20 16.9 20 18S19.1 20 18 20 16 19.1 16 18 16.9 16 18 16M21 10C22.1 10 23 10.9 23 12S22.1 14 21 14 19 13.1 19 12 19.9 10 21 10M18 4C19.1 4 20 4.9 20 6S19.1 8 18 8 16 7.1 16 6 16.9 4 18 4Z"},null,-1)),y_=[v_],b_={key:1},w_={key:2,class:"has-text-danger"},S_=Et({__name:"AudioPeaksWidget",props:{src:{}},setup(e){const t=e,i=mt(),n=bt(()=>{var d;return(d=i.value)==null?void 0:d.peaksInstance}),s=mt(null),r=Ai({isPlaying:!1,canPlay:!1,bookmark:0,lastErrorMessage:""}),a={overview:{waveformColor:"#2ecc71",playedWaveformColor:"#29b765",showAxisLabels:!1,axisGridlineColor:"hsl(0, 0%, 100%)",playheadTextColor:"#e43725",showPlayheadTime:!0},showPlayheadTime:!0,webAudio:{audioContext:new AudioContext},playheadColor:"#e43725"};function o(){var d,f;r.isPlaying=!r.isPlaying,r.isPlaying?(d=s.value)==null||d.play():(f=s.value)==null||f.pause()}function l(){var f,y;const d=(f=n.value)==null?void 0:f.player.getCurrentTime();d&&((y=n.value)==null||y.points.add({time:d,editable:!0,labelText:"Bookmark",color:"#000000"}),r.bookmark=d)}function h(){var d;(d=n.value)==null||d.player.seek(r.bookmark)}return(d,f)=>(ke(),Le("div",Zp,[m("button",{class:"item",onClick:f[0]||(f[0]=y=>o()),disabled:!r.canPlay},[r.isPlaying?(ke(),Le("svg",Jp,e_)):(ke(),Le("svg",t_,n_))],8,qp),m("button",{class:"item",onClick:f[1]||(f[1]=y=>l()),disabled:!r.canPlay,title:"set bookmark"},[(ke(),Le("svg",r_,o_))],8,s_),m("button",{class:"item",onClick:f[2]||(f[2]=y=>h()),disabled:!r.bookmark,title:"seek bookmark"},[(ke(),Le("svg",h_,d_))],8,l_),ne(wt,{overviewElementId:"widgetOverview",ref_key:"audioPeaks",ref:i,options:a,onError:f[4]||(f[4]=y=>r.lastErrorMessage=y.message)},{zoomview:et(()=>[u_]),default:et(()=>[m("audio",{ref_key:"audio",ref:s,onCanplay:f[3]||(f[3]=()=>{r.canPlay=!0})},[m("source",{src:t.src},null,8,f_)],544)]),controls:et(()=>[g_]),_:1},512),m("div",p_,[t.src?(ke(),Le("div",{key:0,title:`Loading and rendering from ${t.src}`},[(ke(),Le("svg",m_,y_))],8,__)):(ke(),Le("span",b_,"no media available")),r.lastErrorMessage?(ke(),Le("span",w_,zr(r.lastErrorMessage),1)):gn("",!0)])]))}});const C_=Pi(S_,[["__scopeId","data-v-b3ef7b4c"]]),T_={class:"columns"},E_=m("div",{class:"column"},[m("p",null,[ce(" This is a showcase for a simple media player. It's available with vue-peaks as ready-made component, "),m("span",{class:"code"},"AudioPeaksWidget.vue"),ce(", which you can use as-is or adapt to your needs. ")])],-1),k_={class:"column"},x_={class:"column"},A_={class:"box"},P_={class:"field"},I_={class:"control"},M_=m("div",{class:"columns"},[m("div",{class:"column"},[m("p",null,[ce(" You can find the complete "),m("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaksWidget.vue"},"Widget SFC source code on GitHub"),ce(". ")])])],-1),O_=Et({__name:"DemoWidget",setup(e){const t=Ai({url:""});return(i,n)=>{const s=Lt("highlightjs");return ke(),Le(Ye,null,[m("div",T_,[E_,m("div",k_,[ne(s,{language:"vue-typescript",code:`import AudioPeaksWidget 
from 'vue-peaks/src/components/AudioPeaksWidget.vue';
const state = reactive({ url: '' });`}),ne(s,{language:"vue-template",code:`<input type='url' 
       v-model='state.url' 
       placeholder='Paste an URL to a media file' />
<!-- The :key property makes sure that the component 
     is re-rendered on every URL change, causing
     a re-render of the waveform -->       
<AudioPeaksWidget :src='state.url' 
                  :key='state.url'>
</AudioPeaksWidget>`})]),m("div",x_,[m("div",A_,[m("div",P_,[m("div",I_,[Cr(m("input",{class:"input",type:"url","onUpdate:modelValue":n[0]||(n[0]=r=>t.url=r),placeholder:"Paste an URL to a media file"},null,512),[[Pl,t.url]])])]),(ke(),Hs(C_,{src:t.url,key:t.url},null,8,["src"]))])])]),M_],64)}}}),D_={class:"columns"},L_={class:"column"},R_=m("p",null,[ce("You might need to access the peaks.js instance to call various functions on their extensive "),m("a",{href:"https://github.com/bbc/peaks.js#api>"},"API"),ce(".")],-1),F_=m("p",null," In the hosting component, get a reference to the AudioPeaks child component and, for convenience, a directly computed property to the actual peaks.js instance: ",-1),N_=m("p",null," Now you can access the instance and it's methods by using the reference, like in this example: ",-1),B_=m("p",null," Remember, that the instance is available only after the child has been mounted and peaks.js has been initialized. ",-1),W_=Et({__name:"AccessingThePeaksInstance",setup(e){return Ai({url:""}),(t,i)=>{const n=Lt("highlightjs");return ke(),Le("div",D_,[m("div",L_,[R_,F_,m("p",null,[ne(n,{language:"vue-typescript",code:`/** Reference to the AudioPeaks component */
const audioPeaks = shallowRef<InstanceType<typeof AudioPeaks>>()

/** Accessor to the peaks instance from the AudioPeaks component
 * @remarks Allows access to the peaks.js instance 
 * to call various functions on the API.
 */
const peaksInstance = computed(() => audioPeaks.value?.peaksInstance);`})]),N_,m("p",null,[ne(n,{language:"vue-typescript",code:`/** Sets a bookmark at the current position
 */
function setBookmark() {
  const currentTime = peaksInstance.value?.player.getCurrentTime();
  if (currentTime) {
    peaksInstance.value?.points.add({
      time: currentTime
    });
    state.bookmark = currentTime;
  }
}`})]),B_])])}}}),G_={class:"columns is-desktop"},U_={class:"column"},H_={class:"box"},V_={class:"field"},z_=m("label",{class:"label is-multiline"},"Create and destroy an AudioPeaks instance:",-1),$_={class:"control"},X_={class:"field"},j_=m("label",{class:"label is-multiline"},"Change the media URL (triggers re-rendering).",-1),K_={class:"control"},Y_={class:"select is-danger"},Z_=m("option",{value:""},"none",-1),q_=m("option",{value:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"},"An MP3 music file ",-1),J_=m("option",{value:"https://suterma.github.io/vue-peaks/lidija_roos-decisions.ogg"},"An OGG music file ",-1),Q_=m("option",{value:"https://twit.cachefly.net/audio/sn/sn0886/sn0886.mp3"},"Security Now! Podcast, Episode #886 (112 min, 55.5MB, MP3)",-1),em=[Z_,q_,J_,Q_],tm={class:"field"},im=m("label",{class:"label is-multiline"},"Change the size (triggers re-drawing).",-1),nm={class:"control"},sm=["src"],rm=m("template",null,null,-1),am=m("template",null,null,-1),om=zt('<p> AudioPeaks currently does not support reactivity for the options. Still, you can use Vue&#39;s reactivity on the component itself. You can for example: </p><p><ul><li>Conditionally render the component (by using Vue&#39;s built-in <span class="code">v-if</span> directive). This also releases memory used. </li><li>Replace the media source by setting the <span class="code">src</span> attribute of the audio element. When you also set the <span class="code">:key</span> property to a new value, the component re-renders. <br>This is called the key-changing technique, and is required to trigger an update of the waveform.</li></ul></p><p> Note that media elements with an empty <span class="code">src</span> attribute cause a <span class="code">MediaError</span>. If this is a concern to you, use the <span class="code">v-if</span> directive to conditionally only render the element on non-emtpy URL values. </p>',3),lm={class:"column"},hm=m("p",null,[ce(' vue-peaks internally handles resizing of the contained overview and zoomview areas. If you, in the "external mode", have an external zoomview or overview area that are resizing completely independent from the '),m("span",{class:"code"},"AudioPeaks"),ce(" instance, please handle their resizing according to the "),m("a",{href:"https://github.com/bbc/peaks.js/blob/master/doc/API.md#viewfittocontainer"}," peaks.js API docs about resizing"),ce(". ")],-1),cm=Et({__name:"ExampleUsingReactivity",setup(e){const t=Ai({isRendered:!0,mediaSource:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3",peaksWidth:50});function i(){const n=t.isRendered;console.log("CurrentState",n),t.isRendered=!n}return(n,s)=>{const r=Lt("highlightjs");return ke(),Le("div",G_,[m("div",U_,[m("div",H_,[m("div",V_,[z_,m("div",$_,[m("button",{onClick:s[0]||(s[0]=a=>i()),class:"button is-danger"},[m("span",null,zr(t.isRendered?"Destroy":"Render"),1)])])]),m("div",X_,[j_,m("div",K_,[m("div",Y_,[Cr(m("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.mediaSource=a),class:"highlight"},em,512),[[Xd,t.mediaSource]])])])]),m("div",tm,[im,m("div",nm,[Cr(m("input",{id:"peaksWidthSlider",class:"slider is-fullwidth is-danger is-circle",step:"1",min:"0",max:"100","onUpdate:modelValue":s[2]||(s[2]=a=>t.peaksWidth=a),type:"range"},null,512),[[Pl,t.peaksWidth]])])]),t.isRendered?(ke(),Hs(wt,{key:t.mediaSource,style:Os({width:t.peaksWidth+"%"})},{zoomview:et(()=>[rm]),controls:et(()=>[am]),default:et(()=>[m("audio",{controls:"",src:t.mediaSource},null,8,sm)]),_:1},8,["style"])):gn("",!0)]),om]),m("div",lm,[ne(r,{language:"vue-template",code:`<AudioPeaks v-if='state.isRendered' :key='state.mediaSource' :style='{ width: state.peaksWidth + '%' }'>
  <audio controls :src='state.mediaSource'></audio>
  <template #zoomview>
	<template />
  </template>
  <template #controls>
	<template />
  </template>
</AudioPeaks>`}),hm])])}}}),dm={class:"columns is-desktop"},um=zt('<div class="column"><p> To provide your own layout, you can also use the <a href="https://vuejs.org/guide/components/slots.html#named-slots">named slots</a>: <li><span class="code">#overview</span></li><li><span class="code">#zoomview</span></li><li><span class="code">#audio</span> (default)</li><li><span class="code">#controls</span></li></p><p>This allows you for example to <ul><li>layout elements differently</li><li>not render (instead of just not show) elements</li><li>have a completely custom media element</li></ul> You can use any of the media element modes with named slots. Use <span class="code">$refs</span> to access the relevant HTML elements.</p><p>You can use a different mode for each slot, thus mixing the &quot;slot&quot; mode with the &quot;external&quot; mode in the same component instance.</p></div>',1),fm={class:"column"},gm={class:"column is-narrow",style:{"max-width":"400px"}},pm={class:"box"},_m=m("div",{class:"peaks-overview",style:{height:"50px"}},null,-1),mm=m("span",{class:"tag is-danger"}," Some slot content here.",-1),vm=m("span",{class:"tag is-danger is-multiline"}," In this example, the audio control is not shown, but some custom buttons instead:",-1),ym={ref:"audio"},bm=m("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"},null,-1),wm=[bm],Sm=m("template",null,null,-1),Cm=m("span",{class:"tag is-danger is-multiline"}," No zoom controls are shown, by providing an empty template to the named controls slot.",-1),Tm=Et({__name:"ExampleUsingSlots",setup(e){return(t,i)=>{const n=Lt("highlightjs");return ke(),Le("div",dm,[um,m("div",fm,[ne(n,{language:"vue-template",code:`<AudioPeaks>
  <template #overview>
    <div style='height: 50px;'></div>
    <span class='tag is-danger'>
      Some slot content here.</span>
  </template>
  <template #default>
    <span class='tag is-danger is-multiline'>
      In this example, the audio control is not shown,
      but some custom
      buttons instead:</span>
    <audio ref='audio'>
      <source src='https://domain/file.mp3' />
    </audio>
    <button @click='($refs.audio as HTMLAudioElement).play()'>
      Play
    </button>\xA0
    <button @click='($refs.audio as HTMLAudioElement).pause()'>
      Pause
    </button>
  </template>
  <template #controls>
    <template />
  </template>
</AudioPeaks>
<span class='tag is-danger is-multiline'>
  No zoom controls are shown, by providing an empty template
  to the named controls slot.</span>`})]),m("div",gm,[m("div",pm,[ne(wt,null,{overview:et(()=>[_m,mm]),default:et(()=>[vm,m("audio",ym,wm,512),m("button",{onClick:i[0]||(i[0]=s=>t.$refs.audio.play())}," Play "),ce("\xA0 "),m("button",{onClick:i[1]||(i[1]=s=>t.$refs.audio.pause())}," Pause ")]),controls:et(()=>[Sm]),_:1}),Cm])])])}}}),Em={},km={class:"columns"},xm=zt('<div class="column"><p> vue-peaks aims to simplify the use of <a target="_blank" href="https://github.com/bbc/peaks.js/">peaks.js</a> in a <a target="_blank" href=" https://vuejs.org/">Vue3</a> environment. It provides a <a target="_blank" href="    https://vuejs.org/guide/scaling-up/sfc.html">Single File Component (SFC)</a>, <span class="code">AudioPeaks</span>. </p><p> Explore the below examples or see the <a target="_blank" href="https://github.com/suterma/vue-peaks#vue-peaks">vue-peaks GitHub repository</a>. </p></div>',1),Am={class:"column"},Pm=m("p",null,[ce(" Installing vue-peaks also installs "),m("a",{target:"_blank",href:"https://github.com/bbc/peaks.js/"},"peaks.js (version 3)"),ce(" as a dependency. Additionally, peaks.js uses "),m("a",{target:"_blank",href:"https://konvajs.org/"},"Konva (version 8 or 9)"),ce(" and "),m("a",{target:"_blank",href:"https://github.com/bbc/waveform-data.js"},"waveform-data (version 4)"),ce(" as peer dependencies; these will get installed with vue-peaks, if not already available. ")],-1);function Im(e,t){const i=Lt("highlightjs");return ke(),Le("div",km,[xm,m("div",Am,[m("p",null,[ne(i,{language:"bash",code:"npm install vue-peaks --save"})]),Pm])])}const Mm=Pi(Em,[["render",Im]]),Om={},Dm=zt('<p>This project uses</p><ul><li><a href="https://github.com/bbc/peaks.js/" target="_blank">peaks.js</a>, a client-side JavaScript component to display and interact with audio waveforms in the browser. (Released under the LGPL-3.0 license, by the British Broadcasting Corporation and contributors) </li><li><a href="https://vuejs.org/" target="_blank">Vue.js</a>, the progressive JavaScript framework. (Released under the MIT License, Copyright \xA9 2014-2021 Evan You) </li><li><a href="https://bulma.io/" target="_blank">Bulma</a>, the modern CSS framework that just works. (Released under the MIT License, by Jeremy Thomas) </li><li><a href="https://jenil.github.io/bulmaswatch/" target="_blank">Bulmaswatch</a>, free themes for Bulma. (Released under the MIT License, by Jenil Gogari) </li><li><a href="https://materialdesignicons.com/" target="_blank">Material Design Icons</a>, the original. Following Google&#39;s Material Design guidelines for system icons. (Icons released under the Apache 2.0 License, by pictogrammers.com) </li><li><a href="https://jestjs.io/" target="_blank"> Jest</a>, a delightful JavaScript Testing Framework. (Released under the MIT License, by Facebook) </li><li> Music from the Album &quot;Not For Sale&quot; by Lidija Roos (Released to the public, by Lidija Roos) </li><li><a href="https://github.com/highlightjs/vue-plugin" target="_blank">@highlightjs/vue-plugin</a>, provides a highlightjs component for use in your Vue.js 3 applications. (Released under the BSD-3-Clause license, by the highlight.js team) </li><li><a href="https://github.com/microsoft/rushstack/tree/main/eslint/eslint-patch" target="_blank">@rushstack/eslint-patch</a>, a patch that improves how ESLint loads plugins when working in a monorepo with a reusable toolchain. (Released under the MIT License, by Microsoft) </li><li><a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank">@types/jsdom, @types/node</a>, the repository for high quality TypeScript type definitions. (Released under the MIT License, by various contributors) </li><li><a href="https://github.com/vitejs/vite" target="_blank">vite, vitest, @vitejs/plugin-vue</a>, next Generation Frontend Tooling. (Released under the MIT License, by the vite team) </li><li><a href="https://github.com/eslint/eslint" target="_blank">eslint</a>, a tool for identifying and reporting on patterns found in ECMAScript/JavaScript code. (Released under the MIT License, by the eslint team) </li><li><a href="https://github.com/jsdom/jsdom" target="_blank">jsdom</a>, a pure-JavaScript implementation of many web standards. (Released under the MIT License, by the jsdom team) </li><li><a href="https://github.com/mysticatea/npm-run-all" target="_blank">npm-run-all</a>, a CLI tool to run multiple npm-scripts in parallel or sequential. (Released under the MIT License, by Toru Nagashima) </li><li><a href="https://github.com/prettier/prettier" target="_blank">prettier</a>, an opinionated Code Formatter. (Released under the MIT License, by the prettier team) </li><li><a href="https://github.com/Microsoft/TypeScript" target="_blank">typescript</a>, a language for application-scale JavaScript. (Released under the Apache-2.0 license, by Microsoft) </li><li><a href="https://github.com/johnsoncodehk/volar" target="_blank">vue-tsc</a>, high-performance tooling for Vue. (Released under the MIT License, by Johnson Chu) </li><li><a href="https://vueuse.org/" target="_blank">VueUse</a>, a Collection of essential Vue Composition Utilities (Released under the MIT License, by the VueUse team) </li><li><a href="https://github.com/Wikiki/bulma-slider" target="_blank">bulma-slider</a>, Bulma&#39;s extension to display sliders (Released under the MIT License, by Wikiki) </li></ul><p>Initial code is taken from</p><ul><li><a href="https://github.com/candeogi/peaks-vue-demo" target="_blank">peaks-vue-demo</a>, by Giovanni Candeo (MIT-licensed) </li><li><a href="https://github.com/thom4parisot/vue-waveform-template" target="_blank">vue-waveform-template</a>, by Thomas Parisot (MIT-licensed) </li></ul>',4);function Lm(e,t){return Dm}const Rm=Pi(Om,[["render",Lm]]),Fm={},Nm={class:"columns"},Bm=m("div",{class:"column"},[m("p",null,[ce(" Vue-peaks offers it's own properties for customization. Plus, you can configure the underlying peaks.js instance via the options property (of type "),m("span",{class:"code"},"PeaksOptions"),ce("). ")]),m("p",null,[ce(" Read more about each property directly in the "),m("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaks.vue#L9"},"source code comments"),ce(". ")])],-1),Wm={class:"column",style:{"overflow-x":"auto"}};function Gm(e,t){const i=Lt("highlightjs");return ke(),Le("div",Nm,[Bm,m("div",Wm,[ne(i,{language:"vue-typescript",code:`src?: string;
video?: boolean;
eager?: boolean;
zoomviewElementId?: string;
zoomviewElement?: HTMLDivElement;
overviewElementId?: string;
overviewElement?: HTMLDivElement;
mediaElementId?: string;
mediaElement?: HTMLMediaElement;
options?: PeaksOptions;`})])])}const Um=Pi(Fm,[["render",Gm]]),Nt=e=>(ea("data-v-b5403f72"),e=e(),ta(),e),Hm=zt('<section class="hero is-light" data-v-b5403f72><div class="hero-body has-text-centered" data-v-b5403f72><img alt="Vue logo" class="logo" src="'+qd+'" width="125" height="125" data-v-b5403f72><h1 class="title is-1" data-v-b5403f72>vue-peaks</h1><h2 class="subtitle is-3" data-v-b5403f72> A lightweight Vue wrapper around the <a target="_blank" href="https://github.com/bbc/peaks.js/" data-v-b5403f72>bbc/peaks.js</a> audio waveform UI component. </h2></div></section>',1),Vm={class:"section"},zm={class:"no-container"},$m={class:"columns"},Xm=zt('<div class="column is-2" data-v-b5403f72><aside class="is-medium menu" data-v-b5403f72><p class="menu-label" data-v-b5403f72>Topics</p><ul class="menu-list" data-v-b5403f72><li data-v-b5403f72><a href="#basic-examples" data-v-b5403f72> Basic examples</a></li><li data-v-b5403f72><a href="#available-properties" data-v-b5403f72> Properties</a></li><li data-v-b5403f72><a href="#setting-styles" data-v-b5403f72>Setting styles</a></li><li data-v-b5403f72><a href="#using-slots" data-v-b5403f72>Using slots</a></li><li data-v-b5403f72><a href="#using-options" data-v-b5403f72>Options</a></li><li data-v-b5403f72><a href="#accessing-instance" data-v-b5403f72>Accessing the instance</a></li><li data-v-b5403f72><a href="#using-reactivity" data-v-b5403f72>Using reactivity</a></li><li data-v-b5403f72><a href="#player-widget" data-v-b5403f72>A widget</a></li><li data-v-b5403f72><a href="#using-video" data-v-b5403f72>Using video</a></li><li data-v-b5403f72><a href="#credits" data-v-b5403f72>Credits</a></li></ul></aside></div>',1),jm={class:"column is-10"},Km={class:"content"},Ym={class:"example"},Zm=Nt(()=>m("h3",{id:"basic-examples",class:"title is-3"}," Basic examples ",-1)),qm={class:"example"},Jm=Nt(()=>m("h3",{id:"available-properties",class:"title is-3"}," Available properties ",-1)),Qm={class:"example"},ev=Nt(()=>m("h3",{id:"setting-styles",class:"title is-3"}," Setting styles ",-1)),tv={class:"example"},iv=Nt(()=>m("h3",{id:"using-slots",class:"title is-3"}," Using slots for custom views ",-1)),nv={class:"example"},sv=Nt(()=>m("h3",{id:"using-options",class:"title is-3"}," Using peaks.js configuration options ",-1)),rv={class:"example"},av=Nt(()=>m("h3",{id:"accessing-instance",class:"title is-3"}," Accessing the peaks.js instance ",-1)),ov=Nt(()=>m("h3",{id:"using-reactivity",class:"title is-3"}," Using reactivity ",-1)),lv={class:"example"},hv=Nt(()=>m("h3",{id:"player-widget",class:"title is-3"}," A waveform player widget ",-1)),cv={class:"example"},dv=Nt(()=>m("h3",{id:"using-video",class:"title is-3"}," Using video ",-1)),uv={class:"example"},fv=Nt(()=>m("h3",{id:"credits",class:"title is-3"}," Credits ",-1)),gv={class:"example"},pv=zt('<footer class="footer" data-v-b5403f72><section class="section" data-v-b5403f72><div class="container has-text-centered" data-v-b5403f72><p data-v-b5403f72><a href="https://github.com/suterma/vue-peaks" data-v-b5403f72>vue-peaks</a> is created with love by <a href="https://marcelsuter.ch" data-v-b5403f72>Marcel Suter</a> for the <a href="http://replayer.app" data-v-b5403f72>Replayer</a> project. </p></div></section></footer>',1),_v=Et({__name:"App",setup(e){return(t,i)=>(ke(),Le(Ye,null,[Hm,m("section",Vm,[m("div",zm,[m("div",$m,[Xm,m("div",jm,[m("div",Km,[m("article",Ym,[ne(Mm)]),Zm,m("article",qm,[ne(up)]),Jm,m("article",Qm,[ne(Um)]),ev,m("article",tv,[ne(nu)]),iv,m("article",nv,[ne(Tm)]),sv,m("article",rv,[ne(Yp)]),av,m("article",null,[ne(W_)]),ov,m("article",lv,[ne(cm)]),hv,m("article",cv,[ne(O_)]),dv,m("article",uv,[ne(Up)]),fv,m("article",gv,[ne(Rm)])])])])])]),pv],64))}});const mv=Pi(_v,[["__scopeId","data-v-b5403f72"]]);function oh(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const i=e[t],n=typeof i;(n==="object"||n==="function")&&!Object.isFrozen(i)&&oh(i)}),e}class xo{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function lh(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Jt(e,...t){const i=Object.create(null);for(const n in e)i[n]=e[n];return t.forEach(function(n){for(const s in n)i[s]=n[s]}),i}const vv="</span>",Ao=e=>!!e.scope,yv=(e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const i=e.split(".");return[`${t}${i.shift()}`,...i.map((n,s)=>`${n}${"_".repeat(s+1)}`)].join(" ")}return`${t}${e}`};class bv{constructor(t,i){this.buffer="",this.classPrefix=i.classPrefix,t.walk(this)}addText(t){this.buffer+=lh(t)}openNode(t){if(!Ao(t))return;const i=yv(t.scope,{prefix:this.classPrefix});this.span(i)}closeNode(t){!Ao(t)||(this.buffer+=vv)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const Po=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class va{constructor(){this.rootNode=Po(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const i=Po({scope:t});this.add(i),this.stack.push(i)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,i){return typeof i=="string"?t.addText(i):i.children&&(t.openNode(i),i.children.forEach(n=>this._walk(t,n)),t.closeNode(i)),t}static _collapse(t){typeof t!="string"&&(!t.children||(t.children.every(i=>typeof i=="string")?t.children=[t.children.join("")]:t.children.forEach(i=>{va._collapse(i)})))}}class wv extends va{constructor(t){super(),this.options=t}addText(t){t!==""&&this.add(t)}startScope(t){this.openNode(t)}endScope(){this.closeNode()}__addSublanguage(t,i){const n=t.root;i&&(n.scope=`language:${i}`),this.add(n)}toHTML(){return new bv(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function In(e){return e?typeof e=="string"?e:e.source:null}function hh(e){return Fi("(?=",e,")")}function Sv(e){return Fi("(?:",e,")*")}function Cv(e){return Fi("(?:",e,")?")}function Fi(...e){return e.map(i=>In(i)).join("")}function Tv(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function ya(...e){return"("+(Tv(e).capture?"":"?:")+e.map(n=>In(n)).join("|")+")"}function ch(e){return new RegExp(e.toString()+"|").exec("").length-1}function Ev(e,t){const i=e&&e.exec(t);return i&&i.index===0}const kv=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function ba(e,{joinWith:t}){let i=0;return e.map(n=>{i+=1;const s=i;let r=In(n),a="";for(;r.length>0;){const o=kv.exec(r);if(!o){a+=r;break}a+=r.substring(0,o.index),r=r.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?a+="\\"+String(Number(o[1])+s):(a+=o[0],o[0]==="("&&i++)}return a}).map(n=>`(${n})`).join(t)}const xv=/\b\B/,dh="[a-zA-Z]\\w*",wa="[a-zA-Z_]\\w*",uh="\\b\\d+(\\.\\d+)?",fh="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",gh="\\b(0b[01]+)",Av="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Pv=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=Fi(t,/.*\b/,e.binary,/\b.*/)),Jt({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(i,n)=>{i.index!==0&&n.ignoreMatch()}},e)},Mn={begin:"\\\\[\\s\\S]",relevance:0},Iv={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Mn]},Mv={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Mn]},Ov={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},sr=function(e,t,i={}){const n=Jt({scope:"comment",begin:e,end:t,contains:[]},i);n.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=ya("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return n.contains.push({begin:Fi(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),n},Dv=sr("//","$"),Lv=sr("/\\*","\\*/"),Rv=sr("#","$"),Fv={scope:"number",begin:uh,relevance:0},Nv={scope:"number",begin:fh,relevance:0},Bv={scope:"number",begin:gh,relevance:0},Wv={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[Mn,{begin:/\[/,end:/\]/,relevance:0,contains:[Mn]}]}]},Gv={scope:"title",begin:dh,relevance:0},Uv={scope:"title",begin:wa,relevance:0},Hv={begin:"\\.\\s*"+wa,relevance:0},Vv=function(e){return Object.assign(e,{"on:begin":(t,i)=>{i.data._beginMatch=t[1]},"on:end":(t,i)=>{i.data._beginMatch!==t[1]&&i.ignoreMatch()}})};var ss=Object.freeze({__proto__:null,MATCH_NOTHING_RE:xv,IDENT_RE:dh,UNDERSCORE_IDENT_RE:wa,NUMBER_RE:uh,C_NUMBER_RE:fh,BINARY_NUMBER_RE:gh,RE_STARTERS_RE:Av,SHEBANG:Pv,BACKSLASH_ESCAPE:Mn,APOS_STRING_MODE:Iv,QUOTE_STRING_MODE:Mv,PHRASAL_WORDS_MODE:Ov,COMMENT:sr,C_LINE_COMMENT_MODE:Dv,C_BLOCK_COMMENT_MODE:Lv,HASH_COMMENT_MODE:Rv,NUMBER_MODE:Fv,C_NUMBER_MODE:Nv,BINARY_NUMBER_MODE:Bv,REGEXP_MODE:Wv,TITLE_MODE:Gv,UNDERSCORE_TITLE_MODE:Uv,METHOD_GUARD:Hv,END_SAME_AS_BEGIN:Vv});function zv(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function $v(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function Xv(e,t){!t||!e.beginKeywords||(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=zv,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function jv(e,t){!Array.isArray(e.illegal)||(e.illegal=ya(...e.illegal))}function Kv(e,t){if(!!e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function Yv(e,t){e.relevance===void 0&&(e.relevance=1)}const Zv=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const i=Object.assign({},e);Object.keys(e).forEach(n=>{delete e[n]}),e.keywords=i.keywords,e.begin=Fi(i.beforeMatch,hh(i.begin)),e.starts={relevance:0,contains:[Object.assign(i,{endsParent:!0})]},e.relevance=0,delete i.beforeMatch},qv=["of","and","for","in","not","or","if","then","parent","list","value"],Jv="keyword";function ph(e,t,i=Jv){const n=Object.create(null);return typeof e=="string"?s(i,e.split(" ")):Array.isArray(e)?s(i,e):Object.keys(e).forEach(function(r){Object.assign(n,ph(e[r],t,r))}),n;function s(r,a){t&&(a=a.map(o=>o.toLowerCase())),a.forEach(function(o){const l=o.split("|");n[l[0]]=[r,Qv(l[0],l[1])]})}}function Qv(e,t){return t?Number(t):ey(e)?0:1}function ey(e){return qv.includes(e.toLowerCase())}const Io={},ki=e=>{console.error(e)},Mo=(e,...t)=>{console.log(`WARN: ${e}`,...t)},Ui=(e,t)=>{Io[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),Io[`${e}/${t}`]=!0)},ks=new Error;function _h(e,t,{key:i}){let n=0;const s=e[i],r={},a={};for(let o=1;o<=t.length;o++)a[o+n]=s[o],r[o+n]=!0,n+=ch(t[o-1]);e[i]=a,e[i]._emit=r,e[i]._multi=!0}function ty(e){if(!!Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw ki("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ks;if(typeof e.beginScope!="object"||e.beginScope===null)throw ki("beginScope must be object"),ks;_h(e,e.begin,{key:"beginScope"}),e.begin=ba(e.begin,{joinWith:""})}}function iy(e){if(!!Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw ki("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ks;if(typeof e.endScope!="object"||e.endScope===null)throw ki("endScope must be object"),ks;_h(e,e.end,{key:"endScope"}),e.end=ba(e.end,{joinWith:""})}}function ny(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function sy(e){ny(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),ty(e),iy(e)}function ry(e){function t(a,o){return new RegExp(In(a),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(o?"g":""))}class i{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,o]),this.matchAt+=ch(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(l=>l[1]);this.matcherRe=t(ba(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(o);if(!l)return null;const h=l.findIndex((f,y)=>y>0&&f!==void 0),d=this.matchIndexes[h];return l.splice(0,h),Object.assign(l,d)}}class n{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const l=new i;return this.rules.slice(o).forEach(([h,d])=>l.addRule(h,d)),l.compile(),this.multiRegexes[o]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,l){this.rules.push([o,l]),l.type==="begin"&&this.count++}exec(o){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let h=l.exec(o);if(this.resumingScanAtSamePosition()&&!(h&&h.index===this.lastIndex)){const d=this.getMatcher(0);d.lastIndex=this.lastIndex+1,h=d.exec(o)}return h&&(this.regexIndex+=h.position+1,this.regexIndex===this.count&&this.considerAll()),h}}function s(a){const o=new n;return a.contains.forEach(l=>o.addRule(l.begin,{rule:l,type:"begin"})),a.terminatorEnd&&o.addRule(a.terminatorEnd,{type:"end"}),a.illegal&&o.addRule(a.illegal,{type:"illegal"}),o}function r(a,o){const l=a;if(a.isCompiled)return l;[$v,Kv,sy,Zv].forEach(d=>d(a,o)),e.compilerExtensions.forEach(d=>d(a,o)),a.__beforeBegin=null,[Xv,jv,Yv].forEach(d=>d(a,o)),a.isCompiled=!0;let h=null;return typeof a.keywords=="object"&&a.keywords.$pattern&&(a.keywords=Object.assign({},a.keywords),h=a.keywords.$pattern,delete a.keywords.$pattern),h=h||/\w+/,a.keywords&&(a.keywords=ph(a.keywords,e.case_insensitive)),l.keywordPatternRe=t(h,!0),o&&(a.begin||(a.begin=/\B|\b/),l.beginRe=t(l.begin),!a.end&&!a.endsWithParent&&(a.end=/\B|\b/),a.end&&(l.endRe=t(l.end)),l.terminatorEnd=In(l.end)||"",a.endsWithParent&&o.terminatorEnd&&(l.terminatorEnd+=(a.end?"|":"")+o.terminatorEnd)),a.illegal&&(l.illegalRe=t(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(d){return ay(d==="self"?a:d)})),a.contains.forEach(function(d){r(d,l)}),a.starts&&r(a.starts,o),l.matcher=s(l),l}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=Jt(e.classNameAliases||{}),r(e)}function mh(e){return e?e.endsWithParent||mh(e.starts):!1}function ay(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return Jt(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:mh(e)?Jt(e,{starts:e.starts?Jt(e.starts):null}):Object.isFrozen(e)?Jt(e):e}var oy="11.8.0";class ly extends Error{constructor(t,i){super(t),this.name="HTMLInjectionError",this.html=i}}const _r=lh,Oo=Jt,Do=Symbol("nomatch"),hy=7,vh=function(e){const t=Object.create(null),i=Object.create(null),n=[];let s=!0;const r="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:wv};function l(O){return o.noHighlightRe.test(O)}function h(O){let R=O.className+" ";R+=O.parentNode?O.parentNode.className:"";const j=o.languageDetectRe.exec(R);if(j){const ie=W(j[1]);return ie||(Mo(r.replace("{}",j[1])),Mo("Falling back to no-highlight mode for this block.",O)),ie?j[1]:"no-highlight"}return R.split(/\s+/).find(ie=>l(ie)||W(ie))}function d(O,R,j){let ie="",ee="";typeof R=="object"?(ie=O,j=R.ignoreIllegals,ee=R.language):(Ui("10.7.0","highlight(lang, code, ...args) has been deprecated."),Ui("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ee=O,ie=R),j===void 0&&(j=!0);const ue={code:ie,language:ee};le("before:highlight",ue);const we=ue.result?ue.result:f(ue.language,ue.code,j);return we.code=ue.code,le("after:highlight",we),we}function f(O,R,j,ie){const ee=Object.create(null);function ue(B,H){return B.keywords[H]}function we(){if(!M.keywords){L.addText($);return}let B=0;M.keywordPatternRe.lastIndex=0;let H=M.keywordPatternRe.exec($),Q="";for(;H;){Q+=$.substring(B,H.index);const fe=D.case_insensitive?H[0].toLowerCase():H[0],De=ue(M,fe);if(De){const[dt,fi]=De;if(L.addText(Q),Q="",ee[fe]=(ee[fe]||0)+1,ee[fe]<=hy&&(q+=fi),dt.startsWith("_"))Q+=H[0];else{const Vn=D.classNameAliases[dt]||dt;me(H[0],Vn)}}else Q+=H[0];B=M.keywordPatternRe.lastIndex,H=M.keywordPatternRe.exec($)}Q+=$.substring(B),L.addText(Q)}function Oe(){if($==="")return;let B=null;if(typeof M.subLanguage=="string"){if(!t[M.subLanguage]){L.addText($);return}B=f(M.subLanguage,$,!0,z[M.subLanguage]),z[M.subLanguage]=B._top}else B=g($,M.subLanguage.length?M.subLanguage:null);M.relevance>0&&(q+=B.relevance),L.__addSublanguage(B._emitter,B.language)}function Pe(){M.subLanguage!=null?Oe():we(),$=""}function me(B,H){B!==""&&(L.startScope(H),L.addText(B),L.endScope())}function T(B,H){let Q=1;const fe=H.length-1;for(;Q<=fe;){if(!B._emit[Q]){Q++;continue}const De=D.classNameAliases[B[Q]]||B[Q],dt=H[Q];De?me(dt,De):($=dt,we(),$=""),Q++}}function U(B,H){return B.scope&&typeof B.scope=="string"&&L.openNode(D.classNameAliases[B.scope]||B.scope),B.beginScope&&(B.beginScope._wrap?(me($,D.classNameAliases[B.beginScope._wrap]||B.beginScope._wrap),$=""):B.beginScope._multi&&(T(B.beginScope,H),$="")),M=Object.create(B,{parent:{value:M}}),M}function Z(B,H,Q){let fe=Ev(B.endRe,Q);if(fe){if(B["on:end"]){const De=new xo(B);B["on:end"](H,De),De.isMatchIgnored&&(fe=!1)}if(fe){for(;B.endsParent&&B.parent;)B=B.parent;return B}}if(B.endsWithParent)return Z(B.parent,H,Q)}function Te(B){return M.matcher.regexIndex===0?($+=B[0],1):(pe=!0,0)}function ve(B){const H=B[0],Q=B.rule,fe=new xo(Q),De=[Q.__beforeBegin,Q["on:begin"]];for(const dt of De)if(!!dt&&(dt(B,fe),fe.isMatchIgnored))return Te(H);return Q.skip?$+=H:(Q.excludeBegin&&($+=H),Pe(),!Q.returnBegin&&!Q.excludeBegin&&($=H)),U(Q,B),Q.returnBegin?0:H.length}function p(B){const H=B[0],Q=R.substring(B.index),fe=Z(M,B,Q);if(!fe)return Do;const De=M;M.endScope&&M.endScope._wrap?(Pe(),me(H,M.endScope._wrap)):M.endScope&&M.endScope._multi?(Pe(),T(M.endScope,B)):De.skip?$+=H:(De.returnEnd||De.excludeEnd||($+=H),Pe(),De.excludeEnd&&($=H));do M.scope&&L.closeNode(),!M.skip&&!M.subLanguage&&(q+=M.relevance),M=M.parent;while(M!==fe.parent);return fe.starts&&U(fe.starts,B),De.returnEnd?0:H.length}function w(){const B=[];for(let H=M;H!==D;H=H.parent)H.scope&&B.unshift(H.scope);B.forEach(H=>L.openNode(H))}let P={};function I(B,H){const Q=H&&H[0];if($+=B,Q==null)return Pe(),0;if(P.type==="begin"&&H.type==="end"&&P.index===H.index&&Q===""){if($+=R.slice(H.index,H.index+1),!s){const fe=new Error(`0 width match regex (${O})`);throw fe.languageName=O,fe.badRule=P.rule,fe}return 1}if(P=H,H.type==="begin")return ve(H);if(H.type==="illegal"&&!j){const fe=new Error('Illegal lexeme "'+Q+'" for mode "'+(M.scope||"<unnamed>")+'"');throw fe.mode=M,fe}else if(H.type==="end"){const fe=p(H);if(fe!==Do)return fe}if(H.type==="illegal"&&Q==="")return 1;if(oe>1e5&&oe>H.index*3)throw new Error("potential infinite loop, way more iterations than matches");return $+=Q,Q.length}const D=W(O);if(!D)throw ki(r.replace("{}",O)),new Error('Unknown language: "'+O+'"');const G=ry(D);let V="",M=ie||G;const z={},L=new o.__emitter(o);w();let $="",q=0,J=0,oe=0,pe=!1;try{if(D.__emitTokens)D.__emitTokens(R,L);else{for(M.matcher.considerAll();;){oe++,pe?pe=!1:M.matcher.considerAll(),M.matcher.lastIndex=J;const B=M.matcher.exec(R);if(!B)break;const H=R.substring(J,B.index),Q=I(H,B);J=B.index+Q}I(R.substring(J))}return L.finalize(),V=L.toHTML(),{language:O,value:V,relevance:q,illegal:!1,_emitter:L,_top:M}}catch(B){if(B.message&&B.message.includes("Illegal"))return{language:O,value:_r(R),illegal:!0,relevance:0,_illegalBy:{message:B.message,index:J,context:R.slice(J-100,J+100),mode:B.mode,resultSoFar:V},_emitter:L};if(s)return{language:O,value:_r(R),illegal:!1,relevance:0,errorRaised:B,_emitter:L,_top:M};throw B}}function y(O){const R={value:_r(O),illegal:!1,relevance:0,_top:a,_emitter:new o.__emitter(o)};return R._emitter.addText(O),R}function g(O,R){R=R||o.languages||Object.keys(t);const j=y(O),ie=R.filter(W).filter(N).map(Pe=>f(Pe,O,!1));ie.unshift(j);const ee=ie.sort((Pe,me)=>{if(Pe.relevance!==me.relevance)return me.relevance-Pe.relevance;if(Pe.language&&me.language){if(W(Pe.language).supersetOf===me.language)return 1;if(W(me.language).supersetOf===Pe.language)return-1}return 0}),[ue,we]=ee,Oe=ue;return Oe.secondBest=we,Oe}function _(O,R,j){const ie=R&&i[R]||j;O.classList.add("hljs"),O.classList.add(`language-${ie}`)}function b(O){let R=null;const j=h(O);if(l(j))return;if(le("before:highlightElement",{el:O,language:j}),O.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(O)),o.throwUnescapedHTML))throw new ly("One of your code blocks includes unescaped HTML.",O.innerHTML);R=O;const ie=R.textContent,ee=j?d(ie,{language:j,ignoreIllegals:!0}):g(ie);O.innerHTML=ee.value,_(O,j,ee.language),O.result={language:ee.language,re:ee.relevance,relevance:ee.relevance},ee.secondBest&&(O.secondBest={language:ee.secondBest.language,relevance:ee.secondBest.relevance}),le("after:highlightElement",{el:O,result:ee,text:ie})}function v(O){o=Oo(o,O)}const A=()=>{u(),Ui("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function E(){u(),Ui("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let c=!1;function u(){if(document.readyState==="loading"){c=!0;return}document.querySelectorAll(o.cssSelector).forEach(b)}function C(){c&&u()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",C,!1);function k(O,R){let j=null;try{j=R(e)}catch(ie){if(ki("Language definition for '{}' could not be registered.".replace("{}",O)),s)ki(ie);else throw ie;j=a}j.name||(j.name=O),t[O]=j,j.rawDefinition=R.bind(null,e),j.aliases&&x(j.aliases,{languageName:O})}function F(O){delete t[O];for(const R of Object.keys(i))i[R]===O&&delete i[R]}function S(){return Object.keys(t)}function W(O){return O=(O||"").toLowerCase(),t[O]||t[i[O]]}function x(O,{languageName:R}){typeof O=="string"&&(O=[O]),O.forEach(j=>{i[j.toLowerCase()]=R})}function N(O){const R=W(O);return R&&!R.disableAutodetect}function Y(O){O["before:highlightBlock"]&&!O["before:highlightElement"]&&(O["before:highlightElement"]=R=>{O["before:highlightBlock"](Object.assign({block:R.el},R))}),O["after:highlightBlock"]&&!O["after:highlightElement"]&&(O["after:highlightElement"]=R=>{O["after:highlightBlock"](Object.assign({block:R.el},R))})}function X(O){Y(O),n.push(O)}function te(O){const R=n.indexOf(O);R!==-1&&n.splice(R,1)}function le(O,R){const j=O;n.forEach(function(ie){ie[j]&&ie[j](R)})}function de(O){return Ui("10.7.0","highlightBlock will be removed entirely in v12.0"),Ui("10.7.0","Please use highlightElement now."),b(O)}Object.assign(e,{highlight:d,highlightAuto:g,highlightAll:u,highlightElement:b,highlightBlock:de,configure:v,initHighlighting:A,initHighlightingOnLoad:E,registerLanguage:k,unregisterLanguage:F,listLanguages:S,getLanguage:W,registerAliases:x,autoDetection:N,inherit:Oo,addPlugin:X,removePlugin:te}),e.debugMode=function(){s=!1},e.safeMode=function(){s=!0},e.versionString=oy,e.regex={concat:Fi,lookahead:hh,either:ya,optional:Cv,anyNumberOfTimes:Sv};for(const O in ss)typeof ss[O]=="object"&&oh(ss[O]);return Object.assign(e,ss),e},Yi=vh({});Yi.newInstance=()=>vh({});var cy=Yi;Yi.HighlightJS=Yi;Yi.default=Yi;const ti=cy,xs="[A-Za-z$_][0-9A-Za-z$_]*",yh=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],bh=["true","false","null","undefined","NaN","Infinity"],wh=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Sh=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Ch=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Th=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],Eh=[].concat(Ch,wh,Sh);function dy(e){const t=e.regex,i=(R,{after:j})=>{const ie="</"+R[0].slice(1);return R.input.indexOf(ie,j)!==-1},n=xs,s={begin:"<>",end:"</>"},r=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(R,j)=>{const ie=R[0].length+R.index,ee=R.input[ie];if(ee==="<"||ee===","){j.ignoreMatch();return}ee===">"&&(i(R,{after:ie})||j.ignoreMatch());let ue;const we=R.input.substring(ie);if(ue=we.match(/^\s*=/)){j.ignoreMatch();return}if((ue=we.match(/^\s+extends\s+/))&&ue.index===0){j.ignoreMatch();return}}},o={$pattern:xs,keyword:yh,literal:bh,built_in:Eh,"variable.language":Th},l="[0-9](_?[0-9])*",h=`\\.(${l})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${d})((${h})|\\.)?|(${h}))[eE][+-]?(${l})\\b`},{begin:`\\b(${d})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},y={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},g={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,y],subLanguage:"xml"}},_={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,y],subLanguage:"css"}},b={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,y],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,y]},E={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},c=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,_,b,v,{match:/\$\d+/},f];y.contains=c.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(c)});const u=[].concat(E,y.contains),C=u.concat([{begin:/\(/,end:/\)/,keywords:o,contains:["self"].concat(u)}]),k={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:C},F={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},S={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...wh,...Sh]}},W={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},x={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[k],illegal:/%/},N={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function Y(R){return t.concat("(?!",R.join("|"),")")}const X={match:t.concat(/\b/,Y([...Ch,"super","import"]),n,t.lookahead(/\(/)),className:"title.function",relevance:0},te={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},le={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},k]},de="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",O={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(de)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[k]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:C,CLASS_REFERENCE:S},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),W,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,_,b,v,E,{match:/\$\d+/},f,S,{className:"attr",begin:n+t.lookahead(":"),relevance:0},O,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[E,e.REGEXP_MODE,{className:"function",begin:de,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:C}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:r},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},x,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[k,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},te,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[k]},X,N,F,le,{match:/\$[(.]/}]}}function uy(e){const t=dy(e),i=xs,n=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[t.exports.CLASS_REFERENCE]},r={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:n},contains:[t.exports.CLASS_REFERENCE]},a={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},o=["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"],l={$pattern:xs,keyword:yh.concat(o),literal:bh,built_in:Eh.concat(n),"variable.language":Th},h={className:"meta",begin:"@"+i},d=(y,g,_)=>{const b=y.contains.findIndex(v=>v.label===g);if(b===-1)throw new Error("can not find mode to replace");y.contains.splice(b,1,_)};Object.assign(t.keywords,l),t.exports.PARAMS_CONTAINS.push(h),t.contains=t.contains.concat([h,s,r]),d(t,"shebang",e.SHEBANG()),d(t,"use_strict",a);const f=t.contains.find(y=>y.label==="func.def");return f.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t}function kh(e){const t=e.regex,i=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),n=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},r={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},a=e.inherit(r,{begin:/\(/,end:/\)/}),o=e.inherit(e.APOS_STRING_MODE,{className:"string"}),l=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:n,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[r,l,o,a,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[r,a,l,o]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(i,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:i,relevance:0,starts:h}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(i,/>/))),contains:[{className:"name",begin:i,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function fy(e){const t=e.regex,i={},n={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[i]}]};Object.assign(i,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},n]});const s={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},r={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,i,s]};s.contains.push(a);const o={className:"",begin:/\\"/},l={className:"string",begin:/'/,end:/'/},h={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,i]},d=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],f=e.SHEBANG({binary:`(${d.join("|")})`,relevance:10}),y={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},g=["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],_=["true","false"],b={match:/(\/[a-z._-]+)+/},v=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],A=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias"],E=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],c=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:g,literal:_,built_in:[...v,...A,"set","shopt",...E,...c]},contains:[f,e.SHEBANG(),y,h,e.HASH_COMMENT_MODE,r,b,a,o,l,i]}}const gy=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),py=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],_y=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],my=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],vy=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],yy=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function by(e){const t=e.regex,i=gy(e),n={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",r=/@-?\w[\w]*(-\w+)*/,a="[a-zA-Z-][a-zA-Z0-9_-]*",o=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[i.BLOCK_COMMENT,n,i.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+a,relevance:0},i.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+my.join("|")+")"},{begin:":(:)?("+vy.join("|")+")"}]},i.CSS_VARIABLE,{className:"attribute",begin:"\\b("+yy.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[i.BLOCK_COMMENT,i.HEXCOLOR,i.IMPORTANT,i.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},i.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:r},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:_y.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,i.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+py.join("|")+")\\b"}]}}var Lo=Et({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(e){var t=Rs(e.language);Ci(function(){return e.language},function(s){t.value=s});var i=bt(function(){return e.autodetect||!t.value}),n=bt(function(){return!i.value&&!ti.getLanguage(t.value)});return{className:bt(function(){return n.value?"":"hljs "+t.value}),highlightedCode:bt(function(){var s;if(n.value)return console.warn('The language "'+t.value+'" you specified could not be found.'),e.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(i.value){var r=ti.highlightAuto(e.code);return t.value=(s=r.language)!==null&&s!==void 0?s:"",r.value}return(r=ti.highlight(e.code,{language:t.value,ignoreIllegals:e.ignoreIllegals})).value})}},render:function(){return ja("pre",{},[ja("code",{class:this.className,innerHTML:this.highlightedCode})])}}),wy={install:function(e){e.component("highlightjs",Lo)},component:Lo};ti.registerLanguage("vue-typescript",uy);ti.registerLanguage("vue-template",kh);ti.registerLanguage("vue-sfc",kh);ti.registerLanguage("bash",fy);ti.registerLanguage("css",by);Yd(mv).use(wy).mount("#app");
//# sourceMappingURL=index.a8eb20b7.js.map
