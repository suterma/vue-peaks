(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();function ds(t,e){const i=Object.create(null),n=t.split(",");for(let r=0;r<n.length;r++)i[n[r]]=!0;return e?r=>!!i[r.toLowerCase()]:r=>!!i[r]}const oh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lh=ds(oh);function oo(t){return!!t||t===""}function us(t){if(j(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],r=Pe(n)?dh(n):us(n);if(r)for(const s in r)e[s]=r[s]}return e}else{if(Pe(t))return t;if(fe(t))return t}}const hh=/;(?![^(]*\))/g,ch=/:(.+)/;function dh(t){const e={};return t.split(hh).forEach(i=>{if(i){const n=i.split(ch);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function fs(t){let e="";if(Pe(t))e=t;else if(j(t))for(let i=0;i<t.length;i++){const n=fs(t[i]);n&&(e+=n+" ")}else if(fe(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}function uh(t,e){if(t.length!==e.length)return!1;let i=!0;for(let n=0;i&&n<t.length;n++)i=fr(t[n],e[n]);return i}function fr(t,e){if(t===e)return!0;let i=js(t),n=js(e);if(i||n)return i&&n?t.getTime()===e.getTime():!1;if(i=hn(t),n=hn(e),i||n)return t===e;if(i=j(t),n=j(e),i||n)return i&&n?uh(t,e):!1;if(i=fe(t),n=fe(e),i||n){if(!i||!n)return!1;const r=Object.keys(t).length,s=Object.keys(e).length;if(r!==s)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!fr(t[a],e[a]))return!1}}return String(t)===String(e)}function fh(t,e){return t.findIndex(i=>fr(i,e))}const ps=t=>Pe(t)?t:t==null?"":j(t)||fe(t)&&(t.toString===co||!Q(t.toString))?JSON.stringify(t,lo,2):String(t),lo=(t,e)=>e&&e.__v_isRef?lo(t,e.value):Ei(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,r])=>(i[`${n} =>`]=r,i),{})}:gr(e)?{[`Set(${e.size})`]:[...e.values()]}:fe(e)&&!j(e)&&!uo(e)?String(e):e,de={},ki=[],st=()=>{},ph=()=>!1,gh=/^on[^a-z]/,pr=t=>gh.test(t),gs=t=>t.startsWith("onUpdate:"),Ge=Object.assign,_s=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},_h=Object.prototype.hasOwnProperty,ne=(t,e)=>_h.call(t,e),j=Array.isArray,Ei=t=>bn(t)==="[object Map]",gr=t=>bn(t)==="[object Set]",js=t=>bn(t)==="[object Date]",Q=t=>typeof t=="function",Pe=t=>typeof t=="string",hn=t=>typeof t=="symbol",fe=t=>t!==null&&typeof t=="object",ho=t=>fe(t)&&Q(t.then)&&Q(t.catch),co=Object.prototype.toString,bn=t=>co.call(t),mh=t=>bn(t).slice(8,-1),uo=t=>bn(t)==="[object Object]",ms=t=>Pe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Xn=ds(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_r=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},vh=/-(\w)/g,yt=_r(t=>t.replace(vh,(e,i)=>i?i.toUpperCase():"")),yh=/\B([A-Z])/g,Ni=_r(t=>t.replace(yh,"-$1").toLowerCase()),mr=_r(t=>t.charAt(0).toUpperCase()+t.slice(1)),Dr=_r(t=>t?`on${mr(t)}`:""),cn=(t,e)=>!Object.is(t,e),Yn=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},Qn=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},er=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ks;const bh=()=>Ks||(Ks=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let pt;class wh{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&pt&&(this.parent=pt,this.index=(pt.scopes||(pt.scopes=[])).push(this)-1)}run(e){if(this.active){const i=pt;try{return pt=this,e()}finally{pt=i}}}on(){pt=this}off(){pt=this.parent}stop(e){if(this.active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function Ch(t,e=pt){e&&e.active&&e.effects.push(t)}const vs=t=>{const e=new Set(t);return e.w=0,e.n=0,e},fo=t=>(t.w&Wt)>0,po=t=>(t.n&Wt)>0,Sh=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Wt},xh=t=>{const{deps:e}=t;if(e.length){let i=0;for(let n=0;n<e.length;n++){const r=e[n];fo(r)&&!po(r)?r.delete(t):e[i++]=r,r.w&=~Wt,r.n&=~Wt}e.length=i}},jr=new WeakMap;let Ki=0,Wt=1;const Kr=30;let nt;const ti=Symbol(""),Zr=Symbol("");class ys{constructor(e,i=null,n){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Ch(this,n)}run(){if(!this.active)return this.fn();let e=nt,i=Ft;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=nt,nt=this,Ft=!0,Wt=1<<++Ki,Ki<=Kr?Sh(this):Zs(this),this.fn()}finally{Ki<=Kr&&xh(this),Wt=1<<--Ki,nt=this.parent,Ft=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){nt===this?this.deferStop=!0:this.active&&(Zs(this),this.onStop&&this.onStop(),this.active=!1)}}function Zs(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let Ft=!0;const go=[];function Fi(){go.push(Ft),Ft=!1}function Hi(){const t=go.pop();Ft=t===void 0?!0:t}function Ke(t,e,i){if(Ft&&nt){let n=jr.get(t);n||jr.set(t,n=new Map);let r=n.get(i);r||n.set(i,r=vs()),_o(r)}}function _o(t,e){let i=!1;Ki<=Kr?po(t)||(t.n|=Wt,i=!fo(t)):i=!t.has(nt),i&&(t.add(nt),nt.deps.push(t))}function xt(t,e,i,n,r,s){const a=jr.get(t);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(i==="length"&&j(t))a.forEach((l,h)=>{(h==="length"||h>=n)&&o.push(l)});else switch(i!==void 0&&o.push(a.get(i)),e){case"add":j(t)?ms(i)&&o.push(a.get("length")):(o.push(a.get(ti)),Ei(t)&&o.push(a.get(Zr)));break;case"delete":j(t)||(o.push(a.get(ti)),Ei(t)&&o.push(a.get(Zr)));break;case"set":Ei(t)&&o.push(a.get(ti));break}if(o.length===1)o[0]&&qr(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);qr(vs(l))}}function qr(t,e){const i=j(t)?t:[...t];for(const n of i)n.computed&&qs(n);for(const n of i)n.computed||qs(n)}function qs(t,e){(t!==nt||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Th=ds("__proto__,__v_isRef,__isVue"),mo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(hn)),kh=bs(),Eh=bs(!1,!0),Ah=bs(!0),Js=Ph();function Ph(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const n=le(this);for(let s=0,a=this.length;s<a;s++)Ke(n,"get",s+"");const r=n[e](...i);return r===-1||r===!1?n[e](...i.map(le)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){Fi();const n=le(this)[e].apply(this,i);return Hi(),n}}),t}function bs(t=!1,e=!1){return function(n,r,s){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&s===(t?e?Xh:Co:e?wo:bo).get(n))return n;const a=j(n);if(!t&&a&&ne(Js,r))return Reflect.get(Js,r,s);const o=Reflect.get(n,r,s);return(hn(r)?mo.has(r):Th(r))||(t||Ke(n,"get",r),e)?o:Ne(o)?a&&ms(r)?o:o.value:fe(o)?t?So(o):oi(o):o}}const Ih=vo(),Mh=vo(!0);function vo(t=!1){return function(i,n,r,s){let a=i[n];if(Li(a)&&Ne(a)&&!Ne(r))return!1;if(!t&&(!tr(r)&&!Li(r)&&(a=le(a),r=le(r)),!j(i)&&Ne(a)&&!Ne(r)))return a.value=r,!0;const o=j(i)&&ms(n)?Number(n)<i.length:ne(i,n),l=Reflect.set(i,n,r,s);return i===le(s)&&(o?cn(r,a)&&xt(i,"set",n,r):xt(i,"add",n,r)),l}}function Lh(t,e){const i=ne(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&i&&xt(t,"delete",e,void 0),n}function Oh(t,e){const i=Reflect.has(t,e);return(!hn(e)||!mo.has(e))&&Ke(t,"has",e),i}function Rh(t){return Ke(t,"iterate",j(t)?"length":ti),Reflect.ownKeys(t)}const yo={get:kh,set:Ih,deleteProperty:Lh,has:Oh,ownKeys:Rh},Dh={get:Ah,set(t,e){return!0},deleteProperty(t,e){return!0}},Nh=Ge({},yo,{get:Eh,set:Mh}),ws=t=>t,vr=t=>Reflect.getPrototypeOf(t);function kn(t,e,i=!1,n=!1){t=t.__v_raw;const r=le(t),s=le(e);i||(e!==s&&Ke(r,"get",e),Ke(r,"get",s));const{has:a}=vr(r),o=n?ws:i?xs:dn;if(a.call(r,e))return o(t.get(e));if(a.call(r,s))return o(t.get(s));t!==r&&t.get(e)}function En(t,e=!1){const i=this.__v_raw,n=le(i),r=le(t);return e||(t!==r&&Ke(n,"has",t),Ke(n,"has",r)),t===r?i.has(t):i.has(t)||i.has(r)}function An(t,e=!1){return t=t.__v_raw,!e&&Ke(le(t),"iterate",ti),Reflect.get(t,"size",t)}function Qs(t){t=le(t);const e=le(this);return vr(e).has.call(e,t)||(e.add(t),xt(e,"add",t,t)),this}function ea(t,e){e=le(e);const i=le(this),{has:n,get:r}=vr(i);let s=n.call(i,t);s||(t=le(t),s=n.call(i,t));const a=r.call(i,t);return i.set(t,e),s?cn(e,a)&&xt(i,"set",t,e):xt(i,"add",t,e),this}function ta(t){const e=le(this),{has:i,get:n}=vr(e);let r=i.call(e,t);r||(t=le(t),r=i.call(e,t)),n&&n.call(e,t);const s=e.delete(t);return r&&xt(e,"delete",t,void 0),s}function ia(){const t=le(this),e=t.size!==0,i=t.clear();return e&&xt(t,"clear",void 0,void 0),i}function Pn(t,e){return function(n,r){const s=this,a=s.__v_raw,o=le(a),l=e?ws:t?xs:dn;return!t&&Ke(o,"iterate",ti),a.forEach((h,c)=>n.call(r,l(h),l(c),s))}}function In(t,e,i){return function(...n){const r=this.__v_raw,s=le(r),a=Ei(s),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,h=r[t](...n),c=i?ws:e?xs:dn;return!e&&Ke(s,"iterate",l?Zr:ti),{next(){const{value:d,done:f}=h.next();return f?{value:d,done:f}:{value:o?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Lt(t){return function(...e){return t==="delete"?!1:this}}function Fh(){const t={get(s){return kn(this,s)},get size(){return An(this)},has:En,add:Qs,set:ea,delete:ta,clear:ia,forEach:Pn(!1,!1)},e={get(s){return kn(this,s,!1,!0)},get size(){return An(this)},has:En,add:Qs,set:ea,delete:ta,clear:ia,forEach:Pn(!1,!0)},i={get(s){return kn(this,s,!0)},get size(){return An(this,!0)},has(s){return En.call(this,s,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:Pn(!0,!1)},n={get(s){return kn(this,s,!0,!0)},get size(){return An(this,!0)},has(s){return En.call(this,s,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:Pn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=In(s,!1,!1),i[s]=In(s,!0,!1),e[s]=In(s,!1,!0),n[s]=In(s,!0,!0)}),[t,i,e,n]}const[Hh,Wh,Gh,Bh]=Fh();function Cs(t,e){const i=e?t?Bh:Gh:t?Wh:Hh;return(n,r,s)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(ne(i,r)&&r in n?i:n,r,s)}const zh={get:Cs(!1,!1)},Uh={get:Cs(!1,!0)},Vh={get:Cs(!0,!1)},bo=new WeakMap,wo=new WeakMap,Co=new WeakMap,Xh=new WeakMap;function Yh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $h(t){return t.__v_skip||!Object.isExtensible(t)?0:Yh(mh(t))}function oi(t){return Li(t)?t:Ss(t,!1,yo,zh,bo)}function jh(t){return Ss(t,!1,Nh,Uh,wo)}function So(t){return Ss(t,!0,Dh,Vh,Co)}function Ss(t,e,i,n,r){if(!fe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=r.get(t);if(s)return s;const a=$h(t);if(a===0)return t;const o=new Proxy(t,a===2?n:i);return r.set(t,o),o}function Ai(t){return Li(t)?Ai(t.__v_raw):!!(t&&t.__v_isReactive)}function Li(t){return!!(t&&t.__v_isReadonly)}function tr(t){return!!(t&&t.__v_isShallow)}function xo(t){return Ai(t)||Li(t)}function le(t){const e=t&&t.__v_raw;return e?le(e):t}function To(t){return Qn(t,"__v_skip",!0),t}const dn=t=>fe(t)?oi(t):t,xs=t=>fe(t)?So(t):t;function ko(t){Ft&&nt&&(t=le(t),_o(t.dep||(t.dep=vs())))}function Eo(t,e){t=le(t),t.dep&&qr(t.dep)}function Ne(t){return!!(t&&t.__v_isRef===!0)}function Kh(t){return Ao(t,!1)}function gt(t){return Ao(t,!0)}function Ao(t,e){return Ne(t)?t:new Zh(t,e)}class Zh{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:le(e),this._value=i?e:dn(e)}get value(){return ko(this),this._value}set value(e){const i=this.__v_isShallow||tr(e)||Li(e);e=i?e:le(e),cn(e,this._rawValue)&&(this._rawValue=e,this._value=i?e:dn(e),Eo(this))}}function Po(t){return Ne(t)?t.value:t}const qh={get:(t,e,i)=>Po(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const r=t[e];return Ne(r)&&!Ne(i)?(r.value=i,!0):Reflect.set(t,e,i,n)}};function Io(t){return Ai(t)?t:new Proxy(t,qh)}var Mo;class Jh{constructor(e,i,n,r){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[Mo]=!1,this._dirty=!0,this.effect=new ys(e,()=>{this._dirty||(this._dirty=!0,Eo(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=le(this);return ko(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}Mo="__v_isReadonly";function Qh(t,e,i=!1){let n,r;const s=Q(t);return s?(n=t,r=st):(n=t.get,r=t.set),new Jh(n,r,s||!r,i)}function Ht(t,e,i,n){let r;try{r=n?t(...n):t()}catch(s){yr(s,e,i)}return r}function at(t,e,i,n){if(Q(t)){const s=Ht(t,e,i,n);return s&&ho(s)&&s.catch(a=>{yr(a,e,i)}),s}const r=[];for(let s=0;s<t.length;s++)r.push(at(t[s],e,i,n));return r}function yr(t,e,i,n=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,o=i;for(;s;){const h=s.ec;if(h){for(let c=0;c<h.length;c++)if(h[c](t,a,o)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Ht(l,null,10,[t,a,o]);return}}ec(t,i,r,n)}function ec(t,e,i,n=!0){console.error(t)}let un=!1,Jr=!1;const De=[];let mt=0;const Pi=[];let St=null,qt=0;const Lo=Promise.resolve();let Ts=null;function tc(t){const e=Ts||Lo;return t?e.then(this?t.bind(this):t):e}function ic(t){let e=mt+1,i=De.length;for(;e<i;){const n=e+i>>>1;fn(De[n])<t?e=n+1:i=n}return e}function ks(t){(!De.length||!De.includes(t,un&&t.allowRecurse?mt+1:mt))&&(t.id==null?De.push(t):De.splice(ic(t.id),0,t),Oo())}function Oo(){!un&&!Jr&&(Jr=!0,Ts=Lo.then(Do))}function nc(t){const e=De.indexOf(t);e>mt&&De.splice(e,1)}function rc(t){j(t)?Pi.push(...t):(!St||!St.includes(t,t.allowRecurse?qt+1:qt))&&Pi.push(t),Oo()}function na(t,e=un?mt+1:0){for(;e<De.length;e++){const i=De[e];i&&i.pre&&(De.splice(e,1),e--,i())}}function Ro(t){if(Pi.length){const e=[...new Set(Pi)];if(Pi.length=0,St){St.push(...e);return}for(St=e,St.sort((i,n)=>fn(i)-fn(n)),qt=0;qt<St.length;qt++)St[qt]();St=null,qt=0}}const fn=t=>t.id==null?1/0:t.id,sc=(t,e)=>{const i=fn(t)-fn(e);if(i===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function Do(t){Jr=!1,un=!0,De.sort(sc);const e=st;try{for(mt=0;mt<De.length;mt++){const i=De[mt];i&&i.active!==!1&&Ht(i,null,14)}}finally{mt=0,De.length=0,Ro(),un=!1,Ts=null,(De.length||Pi.length)&&Do()}}function ac(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||de;let r=i;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in n){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:d,trim:f}=n[c]||de;f&&(r=i.map(y=>y.trim())),d&&(r=i.map(er))}let o,l=n[o=Dr(e)]||n[o=Dr(yt(e))];!l&&s&&(l=n[o=Dr(Ni(e))]),l&&at(l,t,6,r);const h=n[o+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,at(h,t,6,r)}}function No(t,e,i=!1){const n=e.emitsCache,r=n.get(t);if(r!==void 0)return r;const s=t.emits;let a={},o=!1;if(!Q(t)){const l=h=>{const c=No(h,e,!0);c&&(o=!0,Ge(a,c))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!o?(fe(t)&&n.set(t,null),null):(j(s)?s.forEach(l=>a[l]=null):Ge(a,s),fe(t)&&n.set(t,a),a)}function br(t,e){return!t||!pr(e)?!1:(e=e.slice(2).replace(/Once$/,""),ne(t,e[0].toLowerCase()+e.slice(1))||ne(t,Ni(e))||ne(t,e))}let We=null,wr=null;function ir(t){const e=We;return We=t,wr=t&&t.type.__scopeId||null,e}function Fo(t){wr=t}function Ho(){wr=null}function $e(t,e=We,i){if(!e||t._n)return t;const n=(...r)=>{n._d&&fa(-1);const s=ir(e),a=t(...r);return ir(s),n._d&&fa(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function Nr(t){const{type:e,vnode:i,proxy:n,withProxy:r,props:s,propsOptions:[a],slots:o,attrs:l,emit:h,render:c,renderCache:d,data:f,setupState:y,ctx:C,inheritAttrs:I}=t;let _,M;const x=ir(t);try{if(i.shapeFlag&4){const B=r||n;_=_t(c.call(B,B,d,s,y,f,C)),M=l}else{const B=e;_=_t(B.length>1?B(s,{attrs:l,slots:o,emit:h}):B(s,null)),M=e.props?l:oc(l)}}catch(B){tn.length=0,yr(B,t,1),_=$(Gt)}let F=_;if(M&&I!==!1){const B=Object.keys(M),{shapeFlag:K}=F;B.length&&K&7&&(a&&B.some(gs)&&(M=lc(M,a)),F=Oi(F,M))}return i.dirs&&(F=Oi(F),F.dirs=F.dirs?F.dirs.concat(i.dirs):i.dirs),i.transition&&(F.transition=i.transition),_=F,ir(x),_}const oc=t=>{let e;for(const i in t)(i==="class"||i==="style"||pr(i))&&((e||(e={}))[i]=t[i]);return e},lc=(t,e)=>{const i={};for(const n in t)(!gs(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function hc(t,e,i){const{props:n,children:r,component:s}=t,{props:a,children:o,patchFlag:l}=e,h=s.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?ra(n,a,h):!!a;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(a[f]!==n[f]&&!br(h,f))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?ra(n,a,h):!0:!!a;return!1}function ra(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const s=n[r];if(e[s]!==t[s]&&!br(i,s))return!0}return!1}function cc({vnode:t,parent:e},i){for(;e&&e.subTree===t;)(t=e.vnode).el=i,e=e.parent}const dc=t=>t.__isSuspense;function uc(t,e){e&&e.pendingBranch?j(t)?e.effects.push(...t):e.effects.push(t):rc(t)}function fc(t,e){if(Ee){let i=Ee.provides;const n=Ee.parent&&Ee.parent.provides;n===i&&(i=Ee.provides=Object.create(n)),i[t]=e}}function Fr(t,e,i=!1){const n=Ee||We;if(n){const r=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return i&&Q(e)?e.call(n.proxy):e}}const sa={};function $n(t,e,i){return Wo(t,e,i)}function Wo(t,e,{immediate:i,deep:n,flush:r,onTrack:s,onTrigger:a}=de){const o=Ee;let l,h=!1,c=!1;if(Ne(t)?(l=()=>t.value,h=tr(t)):Ai(t)?(l=()=>t,n=!0):j(t)?(c=!0,h=t.some(M=>Ai(M)||tr(M)),l=()=>t.map(M=>{if(Ne(M))return M.value;if(Ai(M))return ei(M);if(Q(M))return Ht(M,o,2)})):Q(t)?e?l=()=>Ht(t,o,2):l=()=>{if(!(o&&o.isUnmounted))return d&&d(),at(t,o,3,[f])}:l=st,e&&n){const M=l;l=()=>ei(M())}let d,f=M=>{d=_.onStop=()=>{Ht(M,o,4)}};if(gn)return f=st,e?i&&at(e,o,3,[l(),c?[]:void 0,f]):l(),st;let y=c?[]:sa;const C=()=>{if(!!_.active)if(e){const M=_.run();(n||h||(c?M.some((x,F)=>cn(x,y[F])):cn(M,y)))&&(d&&d(),at(e,o,3,[M,y===sa?void 0:y,f]),y=M)}else _.run()};C.allowRecurse=!!e;let I;r==="sync"?I=C:r==="post"?I=()=>ze(C,o&&o.suspense):(C.pre=!0,o&&(C.id=o.uid),I=()=>ks(C));const _=new ys(l,I);return e?i?C():y=_.run():r==="post"?ze(_.run.bind(_),o&&o.suspense):_.run(),()=>{_.stop(),o&&o.scope&&_s(o.scope.effects,_)}}function pc(t,e,i){const n=this.proxy,r=Pe(t)?t.includes(".")?Go(n,t):()=>n[t]:t.bind(n,n);let s;Q(e)?s=e:(s=e.handler,i=e);const a=Ee;Ri(this);const o=Wo(r,s.bind(n),i);return a?Ri(a):ii(),o}function Go(t,e){const i=e.split(".");return()=>{let n=t;for(let r=0;r<i.length&&n;r++)n=n[i[r]];return n}}function ei(t,e){if(!fe(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Ne(t))ei(t.value,e);else if(j(t))for(let i=0;i<t.length;i++)ei(t[i],e);else if(gr(t)||Ei(t))t.forEach(i=>{ei(i,e)});else if(uo(t))for(const i in t)ei(t[i],e);return t}function bt(t){return Q(t)?{setup:t,name:t.name}:t}const en=t=>!!t.type.__asyncLoader,Bo=t=>t.type.__isKeepAlive;function gc(t,e){zo(t,"a",e)}function _c(t,e){zo(t,"da",e)}function zo(t,e,i=Ee){const n=t.__wdc||(t.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Cr(e,n,i),i){let r=i.parent;for(;r&&r.parent;)Bo(r.parent.vnode)&&mc(n,e,i,r),r=r.parent}}function mc(t,e,i,n){const r=Cr(e,t,n,!0);Xo(()=>{_s(n[e],r)},i)}function Cr(t,e,i=Ee,n=!1){if(i){const r=i[t]||(i[t]=[]),s=e.__weh||(e.__weh=(...a)=>{if(i.isUnmounted)return;Fi(),Ri(i);const o=at(e,i,t,a);return ii(),Hi(),o});return n?r.unshift(s):r.push(s),s}}const Tt=t=>(e,i=Ee)=>(!gn||t==="sp")&&Cr(t,e,i),vc=Tt("bm"),Uo=Tt("m"),yc=Tt("bu"),bc=Tt("u"),Vo=Tt("bum"),Xo=Tt("um"),wc=Tt("sp"),Cc=Tt("rtg"),Sc=Tt("rtc");function xc(t,e=Ee){Cr("ec",t,e)}function Yo(t,e){const i=We;if(i===null)return t;const n=Tr(i)||i.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[a,o,l,h=de]=e[s];Q(a)&&(a={mounted:a,updated:a}),a.deep&&ei(o),r.push({dir:a,instance:n,value:o,oldValue:void 0,arg:l,modifiers:h})}return t}function jt(t,e,i,n){const r=t.dirs,s=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];s&&(o.oldValue=s[a].value);let l=o.dir[n];l&&(Fi(),at(l,i,8,[t.el,o,t,e]),Hi())}}const $o="components";function Ut(t,e){return kc($o,t,!0,e)||t}const Tc=Symbol();function kc(t,e,i=!0,n=!1){const r=We||Ee;if(r){const s=r.type;if(t===$o){const o=td(s,!1);if(o&&(o===e||o===yt(e)||o===mr(yt(e))))return s}const a=aa(r[t]||s[t],e)||aa(r.appContext[t],e);return!a&&n?s:a}}function aa(t,e){return t&&(t[e]||t[yt(e)]||t[mr(yt(e))])}function Mn(t,e,i={},n,r){if(We.isCE||We.parent&&en(We.parent)&&We.parent.isCE)return $("slot",e==="default"?null:{name:e},n&&n());let s=t[e];s&&s._c&&(s._d=!1),me();const a=s&&jo(s(i)),o=Sr(Ue,{key:i.key||a&&a.key||`_${e}`},a||(n?n():[]),a&&t._===1?64:-2);return!r&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function jo(t){return t.some(e=>sr(e)?!(e.type===Gt||e.type===Ue&&!jo(e.children)):!0)?t:null}const Qr=t=>t?sl(t)?Tr(t)||t.proxy:Qr(t.parent):null,nr=Ge(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Qr(t.parent),$root:t=>Qr(t.root),$emit:t=>t.emit,$options:t=>Es(t),$forceUpdate:t=>t.f||(t.f=()=>ks(t.update)),$nextTick:t=>t.n||(t.n=tc.bind(t.proxy)),$watch:t=>pc.bind(t)}),Ec={get({_:t},e){const{ctx:i,setupState:n,data:r,props:s,accessCache:a,type:o,appContext:l}=t;let h;if(e[0]!=="$"){const y=a[e];if(y!==void 0)switch(y){case 1:return n[e];case 2:return r[e];case 4:return i[e];case 3:return s[e]}else{if(n!==de&&ne(n,e))return a[e]=1,n[e];if(r!==de&&ne(r,e))return a[e]=2,r[e];if((h=t.propsOptions[0])&&ne(h,e))return a[e]=3,s[e];if(i!==de&&ne(i,e))return a[e]=4,i[e];es&&(a[e]=0)}}const c=nr[e];let d,f;if(c)return e==="$attrs"&&Ke(t,"get",e),c(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(i!==de&&ne(i,e))return a[e]=4,i[e];if(f=l.config.globalProperties,ne(f,e))return f[e]},set({_:t},e,i){const{data:n,setupState:r,ctx:s}=t;return r!==de&&ne(r,e)?(r[e]=i,!0):n!==de&&ne(n,e)?(n[e]=i,!0):ne(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:r,propsOptions:s}},a){let o;return!!i[a]||t!==de&&ne(t,a)||e!==de&&ne(e,a)||(o=s[0])&&ne(o,a)||ne(n,a)||ne(nr,a)||ne(r.config.globalProperties,a)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:ne(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};let es=!0;function Ac(t){const e=Es(t),i=t.proxy,n=t.ctx;es=!1,e.beforeCreate&&oa(e.beforeCreate,t,"bc");const{data:r,computed:s,methods:a,watch:o,provide:l,inject:h,created:c,beforeMount:d,mounted:f,beforeUpdate:y,updated:C,activated:I,deactivated:_,beforeDestroy:M,beforeUnmount:x,destroyed:F,unmounted:B,render:K,renderTracked:re,renderTriggered:ge,errorCaptured:ee,serverPrefetch:ae,expose:_e,inheritAttrs:xe,components:Le,directives:ke,filters:Je}=e;if(h&&Pc(h,n,null,t.appContext.config.unwrapInjectedRef),a)for(const R in a){const W=a[R];Q(W)&&(n[R]=W.bind(i))}if(r){const R=r.call(i,i);fe(R)&&(t.data=oi(R))}if(es=!0,s)for(const R in s){const W=s[R],J=Q(W)?W.bind(i,i):Q(W.get)?W.get.bind(i,i):st,ce=!Q(W)&&Q(W.set)?W.set.bind(i):st,be=xi({get:J,set:ce});Object.defineProperty(n,R,{enumerable:!0,configurable:!0,get:()=>be.value,set:Oe=>be.value=Oe})}if(o)for(const R in o)Ko(o[R],n,i,R);if(l){const R=Q(l)?l.call(i):l;Reflect.ownKeys(R).forEach(W=>{fc(W,R[W])})}c&&oa(c,t,"c");function A(R,W){j(W)?W.forEach(J=>R(J.bind(i))):W&&R(W.bind(i))}if(A(vc,d),A(Uo,f),A(yc,y),A(bc,C),A(gc,I),A(_c,_),A(xc,ee),A(Sc,re),A(Cc,ge),A(Vo,x),A(Xo,B),A(wc,ae),j(_e))if(_e.length){const R=t.exposed||(t.exposed={});_e.forEach(W=>{Object.defineProperty(R,W,{get:()=>i[W],set:J=>i[W]=J})})}else t.exposed||(t.exposed={});K&&t.render===st&&(t.render=K),xe!=null&&(t.inheritAttrs=xe),Le&&(t.components=Le),ke&&(t.directives=ke)}function Pc(t,e,i=st,n=!1){j(t)&&(t=ts(t));for(const r in t){const s=t[r];let a;fe(s)?"default"in s?a=Fr(s.from||r,s.default,!0):a=Fr(s.from||r):a=Fr(s),Ne(a)&&n?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[r]=a}}function oa(t,e,i){at(j(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function Ko(t,e,i,n){const r=n.includes(".")?Go(i,n):()=>i[n];if(Pe(t)){const s=e[t];Q(s)&&$n(r,s)}else if(Q(t))$n(r,t.bind(i));else if(fe(t))if(j(t))t.forEach(s=>Ko(s,e,i,n));else{const s=Q(t.handler)?t.handler.bind(i):e[t.handler];Q(s)&&$n(r,s,t)}}function Es(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let l;return o?l=o:!r.length&&!i&&!n?l=e:(l={},r.length&&r.forEach(h=>rr(l,h,a,!0)),rr(l,e,a)),fe(e)&&s.set(e,l),l}function rr(t,e,i,n=!1){const{mixins:r,extends:s}=e;s&&rr(t,s,i,!0),r&&r.forEach(a=>rr(t,a,i,!0));for(const a in e)if(!(n&&a==="expose")){const o=Ic[a]||i&&i[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Ic={data:la,props:Zt,emits:Zt,methods:Zt,computed:Zt,beforeCreate:He,created:He,beforeMount:He,mounted:He,beforeUpdate:He,updated:He,beforeDestroy:He,beforeUnmount:He,destroyed:He,unmounted:He,activated:He,deactivated:He,errorCaptured:He,serverPrefetch:He,components:Zt,directives:Zt,watch:Lc,provide:la,inject:Mc};function la(t,e){return e?t?function(){return Ge(Q(t)?t.call(this,this):t,Q(e)?e.call(this,this):e)}:e:t}function Mc(t,e){return Zt(ts(t),ts(e))}function ts(t){if(j(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function He(t,e){return t?[...new Set([].concat(t,e))]:e}function Zt(t,e){return t?Ge(Ge(Object.create(null),t),e):e}function Lc(t,e){if(!t)return e;if(!e)return t;const i=Ge(Object.create(null),t);for(const n in e)i[n]=He(t[n],e[n]);return i}function Oc(t,e,i,n=!1){const r={},s={};Qn(s,xr,1),t.propsDefaults=Object.create(null),Zo(t,e,r,s);for(const a in t.propsOptions[0])a in r||(r[a]=void 0);i?t.props=n?r:jh(r):t.type.props?t.props=r:t.props=s,t.attrs=s}function Rc(t,e,i,n){const{props:r,attrs:s,vnode:{patchFlag:a}}=t,o=le(r),[l]=t.propsOptions;let h=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(br(t.emitsOptions,f))continue;const y=e[f];if(l)if(ne(s,f))y!==s[f]&&(s[f]=y,h=!0);else{const C=yt(f);r[C]=is(l,o,C,y,t,!1)}else y!==s[f]&&(s[f]=y,h=!0)}}}else{Zo(t,e,r,s)&&(h=!0);let c;for(const d in o)(!e||!ne(e,d)&&((c=Ni(d))===d||!ne(e,c)))&&(l?i&&(i[d]!==void 0||i[c]!==void 0)&&(r[d]=is(l,o,d,void 0,t,!0)):delete r[d]);if(s!==o)for(const d in s)(!e||!ne(e,d)&&!0)&&(delete s[d],h=!0)}h&&xt(t,"set","$attrs")}function Zo(t,e,i,n){const[r,s]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Xn(l))continue;const h=e[l];let c;r&&ne(r,c=yt(l))?!s||!s.includes(c)?i[c]=h:(o||(o={}))[c]=h:br(t.emitsOptions,l)||(!(l in n)||h!==n[l])&&(n[l]=h,a=!0)}if(s){const l=le(i),h=o||de;for(let c=0;c<s.length;c++){const d=s[c];i[d]=is(r,l,d,h[d],t,!ne(h,d))}}return a}function is(t,e,i,n,r,s){const a=t[i];if(a!=null){const o=ne(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&Q(l)){const{propsDefaults:h}=r;i in h?n=h[i]:(Ri(r),n=h[i]=l.call(null,e),ii())}else n=l}a[0]&&(s&&!o?n=!1:a[1]&&(n===""||n===Ni(i))&&(n=!0))}return n}function qo(t,e,i=!1){const n=e.propsCache,r=n.get(t);if(r)return r;const s=t.props,a={},o=[];let l=!1;if(!Q(t)){const c=d=>{l=!0;const[f,y]=qo(d,e,!0);Ge(a,f),y&&o.push(...y)};!i&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return fe(t)&&n.set(t,ki),ki;if(j(s))for(let c=0;c<s.length;c++){const d=yt(s[c]);ha(d)&&(a[d]=de)}else if(s)for(const c in s){const d=yt(c);if(ha(d)){const f=s[c],y=a[d]=j(f)||Q(f)?{type:f}:f;if(y){const C=ua(Boolean,y.type),I=ua(String,y.type);y[0]=C>-1,y[1]=I<0||C<I,(C>-1||ne(y,"default"))&&o.push(d)}}}const h=[a,o];return fe(t)&&n.set(t,h),h}function ha(t){return t[0]!=="$"}function ca(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function da(t,e){return ca(t)===ca(e)}function ua(t,e){return j(e)?e.findIndex(i=>da(i,t)):Q(e)&&da(e,t)?0:-1}const Jo=t=>t[0]==="_"||t==="$stable",As=t=>j(t)?t.map(_t):[_t(t)],Dc=(t,e,i)=>{if(e._n)return e;const n=$e((...r)=>As(e(...r)),i);return n._c=!1,n},Qo=(t,e,i)=>{const n=t._ctx;for(const r in t){if(Jo(r))continue;const s=t[r];if(Q(s))e[r]=Dc(r,s,n);else if(s!=null){const a=As(s);e[r]=()=>a}}},el=(t,e)=>{const i=As(e);t.slots.default=()=>i},Nc=(t,e)=>{if(t.vnode.shapeFlag&32){const i=e._;i?(t.slots=le(e),Qn(e,"_",i)):Qo(e,t.slots={})}else t.slots={},e&&el(t,e);Qn(t.slots,xr,1)},Fc=(t,e,i)=>{const{vnode:n,slots:r}=t;let s=!0,a=de;if(n.shapeFlag&32){const o=e._;o?i&&o===1?s=!1:(Ge(r,e),!i&&o===1&&delete r._):(s=!e.$stable,Qo(e,r)),a=e}else e&&(el(t,e),a={default:1});if(s)for(const o in r)!Jo(o)&&!(o in a)&&delete r[o]};function tl(){return{app:null,config:{isNativeTag:ph,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Hc=0;function Wc(t,e){return function(n,r=null){Q(n)||(n=Object.assign({},n)),r!=null&&!fe(r)&&(r=null);const s=tl(),a=new Set;let o=!1;const l=s.app={_uid:Hc++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:nd,get config(){return s.config},set config(h){},use(h,...c){return a.has(h)||(h&&Q(h.install)?(a.add(h),h.install(l,...c)):Q(h)&&(a.add(h),h(l,...c))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,c){return c?(s.components[h]=c,l):s.components[h]},directive(h,c){return c?(s.directives[h]=c,l):s.directives[h]},mount(h,c,d){if(!o){const f=$(n,r);return f.appContext=s,c&&e?e(f,h):t(f,h,d),o=!0,l._container=h,h.__vue_app__=l,Tr(f.component)||f.component.proxy}},unmount(){o&&(t(null,l._container),delete l._container.__vue_app__)},provide(h,c){return s.provides[h]=c,l}};return l}}function ns(t,e,i,n,r=!1){if(j(t)){t.forEach((f,y)=>ns(f,e&&(j(e)?e[y]:e),i,n,r));return}if(en(n)&&!r)return;const s=n.shapeFlag&4?Tr(n.component)||n.component.proxy:n.el,a=r?null:s,{i:o,r:l}=t,h=e&&e.r,c=o.refs===de?o.refs={}:o.refs,d=o.setupState;if(h!=null&&h!==l&&(Pe(h)?(c[h]=null,ne(d,h)&&(d[h]=null)):Ne(h)&&(h.value=null)),Q(l))Ht(l,o,12,[a,c]);else{const f=Pe(l),y=Ne(l);if(f||y){const C=()=>{if(t.f){const I=f?c[l]:l.value;r?j(I)&&_s(I,s):j(I)?I.includes(s)||I.push(s):f?(c[l]=[s],ne(d,l)&&(d[l]=c[l])):(l.value=[s],t.k&&(c[t.k]=l.value))}else f?(c[l]=a,ne(d,l)&&(d[l]=a)):y&&(l.value=a,t.k&&(c[t.k]=a))};a?(C.id=-1,ze(C,i)):C()}}}const ze=uc;function Gc(t){return Bc(t)}function Bc(t,e){const i=bh();i.__VUE__=!0;const{insert:n,remove:r,patchProp:s,createElement:a,createText:o,createComment:l,setText:h,setElementText:c,parentNode:d,nextSibling:f,setScopeId:y=st,cloneNode:C,insertStaticContent:I}=t,_=(u,p,b,T=null,m=null,O=null,L=!1,S=null,D=!!p.dynamicChildren)=>{if(u===p)return;u&&!Vi(u,p)&&(T=yi(u),Ve(u,m,O,!0),u=null),p.patchFlag===-2&&(D=!1,p.dynamicChildren=null);const{type:E,ref:U,shapeFlag:G}=p;switch(E){case Ps:M(u,p,b,T);break;case Gt:x(u,p,b,T);break;case jn:u==null&&F(p,b,T,L);break;case Ue:ke(u,p,b,T,m,O,L,S,D);break;default:G&1?re(u,p,b,T,m,O,L,S,D):G&6?Je(u,p,b,T,m,O,L,S,D):(G&64||G&128)&&E.process(u,p,b,T,m,O,L,S,D,Pt)}U!=null&&m&&ns(U,u&&u.ref,O,p||u,!p)},M=(u,p,b,T)=>{if(u==null)n(p.el=o(p.children),b,T);else{const m=p.el=u.el;p.children!==u.children&&h(m,p.children)}},x=(u,p,b,T)=>{u==null?n(p.el=l(p.children||""),b,T):p.el=u.el},F=(u,p,b,T)=>{[u.el,u.anchor]=I(u.children,p,b,T,u.el,u.anchor)},B=({el:u,anchor:p},b,T)=>{let m;for(;u&&u!==p;)m=f(u),n(u,b,T),u=m;n(p,b,T)},K=({el:u,anchor:p})=>{let b;for(;u&&u!==p;)b=f(u),r(u),u=b;r(p)},re=(u,p,b,T,m,O,L,S,D)=>{L=L||p.type==="svg",u==null?ge(p,b,T,m,O,L,S,D):_e(u,p,m,O,L,S,D)},ge=(u,p,b,T,m,O,L,S)=>{let D,E;const{type:U,props:G,shapeFlag:w,transition:P,patchFlag:H,dirs:V}=u;if(u.el&&C!==void 0&&H===-1)D=u.el=C(u.el);else{if(D=u.el=a(u.type,O,G&&G.is,G),w&8?c(D,u.children):w&16&&ae(u.children,D,null,T,m,O&&U!=="foreignObject",L,S),V&&jt(u,null,T,"created"),G){for(const te in G)te!=="value"&&!Xn(te)&&s(D,te,null,G[te],O,u.children,T,m,Qe);"value"in G&&s(D,"value",null,G.value),(E=G.onVnodeBeforeMount)&&ft(E,T,u)}ee(D,u,u.scopeId,L,T)}V&&jt(u,null,T,"beforeMount");const Z=(!m||m&&!m.pendingBranch)&&P&&!P.persisted;Z&&P.beforeEnter(D),n(D,p,b),((E=G&&G.onVnodeMounted)||Z||V)&&ze(()=>{E&&ft(E,T,u),Z&&P.enter(D),V&&jt(u,null,T,"mounted")},m)},ee=(u,p,b,T,m)=>{if(b&&y(u,b),T)for(let O=0;O<T.length;O++)y(u,T[O]);if(m){let O=m.subTree;if(p===O){const L=m.vnode;ee(u,L,L.scopeId,L.slotScopeIds,m.parent)}}},ae=(u,p,b,T,m,O,L,S,D=0)=>{for(let E=D;E<u.length;E++){const U=u[E]=S?Rt(u[E]):_t(u[E]);_(null,U,p,b,T,m,O,L,S)}},_e=(u,p,b,T,m,O,L)=>{const S=p.el=u.el;let{patchFlag:D,dynamicChildren:E,dirs:U}=p;D|=u.patchFlag&16;const G=u.props||de,w=p.props||de;let P;b&&Kt(b,!1),(P=w.onVnodeBeforeUpdate)&&ft(P,b,p,u),U&&jt(p,u,b,"beforeUpdate"),b&&Kt(b,!0);const H=m&&p.type!=="foreignObject";if(E?xe(u.dynamicChildren,E,S,b,T,H,O):L||J(u,p,S,null,b,T,H,O,!1),D>0){if(D&16)Le(S,p,G,w,b,T,m);else if(D&2&&G.class!==w.class&&s(S,"class",null,w.class,m),D&4&&s(S,"style",G.style,w.style,m),D&8){const V=p.dynamicProps;for(let Z=0;Z<V.length;Z++){const te=V[Z],Xe=G[te],Mt=w[te];(Mt!==Xe||te==="value")&&s(S,te,Xe,Mt,m,u.children,b,T,Qe)}}D&1&&u.children!==p.children&&c(S,p.children)}else!L&&E==null&&Le(S,p,G,w,b,T,m);((P=w.onVnodeUpdated)||U)&&ze(()=>{P&&ft(P,b,p,u),U&&jt(p,u,b,"updated")},T)},xe=(u,p,b,T,m,O,L)=>{for(let S=0;S<p.length;S++){const D=u[S],E=p[S],U=D.el&&(D.type===Ue||!Vi(D,E)||D.shapeFlag&70)?d(D.el):b;_(D,E,U,null,T,m,O,L,!0)}},Le=(u,p,b,T,m,O,L)=>{if(b!==T){for(const S in T){if(Xn(S))continue;const D=T[S],E=b[S];D!==E&&S!=="value"&&s(u,S,E,D,L,p.children,m,O,Qe)}if(b!==de)for(const S in b)!Xn(S)&&!(S in T)&&s(u,S,b[S],null,L,p.children,m,O,Qe);"value"in T&&s(u,"value",b.value,T.value)}},ke=(u,p,b,T,m,O,L,S,D)=>{const E=p.el=u?u.el:o(""),U=p.anchor=u?u.anchor:o("");let{patchFlag:G,dynamicChildren:w,slotScopeIds:P}=p;P&&(S=S?S.concat(P):P),u==null?(n(E,b,T),n(U,b,T),ae(p.children,b,U,m,O,L,S,D)):G>0&&G&64&&w&&u.dynamicChildren?(xe(u.dynamicChildren,w,b,m,O,L,S),(p.key!=null||m&&p===m.subTree)&&il(u,p,!0)):J(u,p,b,U,m,O,L,S,D)},Je=(u,p,b,T,m,O,L,S,D)=>{p.slotScopeIds=S,u==null?p.shapeFlag&512?m.ctx.activate(p,b,T,L,D):ct(p,b,T,m,O,L,D):A(u,p,D)},ct=(u,p,b,T,m,O,L)=>{const S=u.component=Zc(u,T,m);if(Bo(u)&&(S.ctx.renderer=Pt),qc(S),S.asyncDep){if(m&&m.registerDep(S,R),!u.el){const D=S.subTree=$(Gt);x(null,D,p,b)}return}R(S,u,p,b,m,O,L)},A=(u,p,b)=>{const T=p.component=u.component;if(hc(u,p,b))if(T.asyncDep&&!T.asyncResolved){W(T,p,b);return}else T.next=p,nc(T.update),T.update();else p.el=u.el,T.vnode=p},R=(u,p,b,T,m,O,L)=>{const S=()=>{if(u.isMounted){let{next:U,bu:G,u:w,parent:P,vnode:H}=u,V=U,Z;Kt(u,!1),U?(U.el=H.el,W(u,U,L)):U=H,G&&Yn(G),(Z=U.props&&U.props.onVnodeBeforeUpdate)&&ft(Z,P,U,H),Kt(u,!0);const te=Nr(u),Xe=u.subTree;u.subTree=te,_(Xe,te,d(Xe.el),yi(Xe),u,m,O),U.el=te.el,V===null&&cc(u,te.el),w&&ze(w,m),(Z=U.props&&U.props.onVnodeUpdated)&&ze(()=>ft(Z,P,U,H),m)}else{let U;const{el:G,props:w}=p,{bm:P,m:H,parent:V}=u,Z=en(p);if(Kt(u,!1),P&&Yn(P),!Z&&(U=w&&w.onVnodeBeforeMount)&&ft(U,V,p),Kt(u,!0),G&&It){const te=()=>{u.subTree=Nr(u),It(G,u.subTree,u,m,null)};Z?p.type.__asyncLoader().then(()=>!u.isUnmounted&&te()):te()}else{const te=u.subTree=Nr(u);_(null,te,b,T,u,m,O),p.el=te.el}if(H&&ze(H,m),!Z&&(U=w&&w.onVnodeMounted)){const te=p;ze(()=>ft(U,V,te),m)}(p.shapeFlag&256||V&&en(V.vnode)&&V.vnode.shapeFlag&256)&&u.a&&ze(u.a,m),u.isMounted=!0,p=b=T=null}},D=u.effect=new ys(S,()=>ks(E),u.scope),E=u.update=()=>D.run();E.id=u.uid,Kt(u,!0),E()},W=(u,p,b)=>{p.component=u;const T=u.vnode.props;u.vnode=p,u.next=null,Rc(u,p.props,T,b),Fc(u,p.children,b),Fi(),na(),Hi()},J=(u,p,b,T,m,O,L,S,D=!1)=>{const E=u&&u.children,U=u?u.shapeFlag:0,G=p.children,{patchFlag:w,shapeFlag:P}=p;if(w>0){if(w&128){be(E,G,b,T,m,O,L,S,D);return}else if(w&256){ce(E,G,b,T,m,O,L,S,D);return}}P&8?(U&16&&Qe(E,m,O),G!==E&&c(b,G)):U&16?P&16?be(E,G,b,T,m,O,L,S,D):Qe(E,m,O,!0):(U&8&&c(b,""),P&16&&ae(G,b,T,m,O,L,S,D))},ce=(u,p,b,T,m,O,L,S,D)=>{u=u||ki,p=p||ki;const E=u.length,U=p.length,G=Math.min(E,U);let w;for(w=0;w<G;w++){const P=p[w]=D?Rt(p[w]):_t(p[w]);_(u[w],P,b,null,m,O,L,S,D)}E>U?Qe(u,m,O,!0,!1,G):ae(p,b,T,m,O,L,S,D,G)},be=(u,p,b,T,m,O,L,S,D)=>{let E=0;const U=p.length;let G=u.length-1,w=U-1;for(;E<=G&&E<=w;){const P=u[E],H=p[E]=D?Rt(p[E]):_t(p[E]);if(Vi(P,H))_(P,H,b,null,m,O,L,S,D);else break;E++}for(;E<=G&&E<=w;){const P=u[G],H=p[w]=D?Rt(p[w]):_t(p[w]);if(Vi(P,H))_(P,H,b,null,m,O,L,S,D);else break;G--,w--}if(E>G){if(E<=w){const P=w+1,H=P<U?p[P].el:T;for(;E<=w;)_(null,p[E]=D?Rt(p[E]):_t(p[E]),b,H,m,O,L,S,D),E++}}else if(E>w)for(;E<=G;)Ve(u[E],m,O,!0),E++;else{const P=E,H=E,V=new Map;for(E=H;E<=w;E++){const Ye=p[E]=D?Rt(p[E]):_t(p[E]);Ye.key!=null&&V.set(Ye.key,E)}let Z,te=0;const Xe=w-H+1;let Mt=!1,Xs=0;const Ui=new Array(Xe);for(E=0;E<Xe;E++)Ui[E]=0;for(E=P;E<=G;E++){const Ye=u[E];if(te>=Xe){Ve(Ye,m,O,!0);continue}let ut;if(Ye.key!=null)ut=V.get(Ye.key);else for(Z=H;Z<=w;Z++)if(Ui[Z-H]===0&&Vi(Ye,p[Z])){ut=Z;break}ut===void 0?Ve(Ye,m,O,!0):(Ui[ut-H]=E+1,ut>=Xs?Xs=ut:Mt=!0,_(Ye,p[ut],b,null,m,O,L,S,D),te++)}const Ys=Mt?zc(Ui):ki;for(Z=Ys.length-1,E=Xe-1;E>=0;E--){const Ye=H+E,ut=p[Ye],$s=Ye+1<U?p[Ye+1].el:T;Ui[E]===0?_(null,ut,b,$s,m,O,L,S,D):Mt&&(Z<0||E!==Ys[Z]?Oe(ut,b,$s,2):Z--)}}},Oe=(u,p,b,T,m=null)=>{const{el:O,type:L,transition:S,children:D,shapeFlag:E}=u;if(E&6){Oe(u.component.subTree,p,b,T);return}if(E&128){u.suspense.move(p,b,T);return}if(E&64){L.move(u,p,b,Pt);return}if(L===Ue){n(O,p,b);for(let G=0;G<D.length;G++)Oe(D[G],p,b,T);n(u.anchor,p,b);return}if(L===jn){B(u,p,b);return}if(T!==2&&E&1&&S)if(T===0)S.beforeEnter(O),n(O,p,b),ze(()=>S.enter(O),m);else{const{leave:G,delayLeave:w,afterLeave:P}=S,H=()=>n(O,p,b),V=()=>{G(O,()=>{H(),P&&P()})};w?w(O,H,V):V()}else n(O,p,b)},Ve=(u,p,b,T=!1,m=!1)=>{const{type:O,props:L,ref:S,children:D,dynamicChildren:E,shapeFlag:U,patchFlag:G,dirs:w}=u;if(S!=null&&ns(S,null,b,u,!0),U&256){p.ctx.deactivate(u);return}const P=U&1&&w,H=!en(u);let V;if(H&&(V=L&&L.onVnodeBeforeUnmount)&&ft(V,p,u),U&6)xn(u.component,b,T);else{if(U&128){u.suspense.unmount(b,T);return}P&&jt(u,null,p,"beforeUnmount"),U&64?u.type.remove(u,p,b,m,Pt,T):E&&(O!==Ue||G>0&&G&64)?Qe(E,p,b,!1,!0):(O===Ue&&G&384||!m&&U&16)&&Qe(D,p,b),T&&Re(u)}(H&&(V=L&&L.onVnodeUnmounted)||P)&&ze(()=>{V&&ft(V,p,u),P&&jt(u,null,p,"unmounted")},b)},Re=u=>{const{type:p,el:b,anchor:T,transition:m}=u;if(p===Ue){dt(b,T);return}if(p===jn){K(u);return}const O=()=>{r(b),m&&!m.persisted&&m.afterLeave&&m.afterLeave()};if(u.shapeFlag&1&&m&&!m.persisted){const{leave:L,delayLeave:S}=m,D=()=>L(b,O);S?S(u.el,O,D):D()}else O()},dt=(u,p)=>{let b;for(;u!==p;)b=f(u),r(u),u=b;r(p)},xn=(u,p,b)=>{const{bum:T,scope:m,update:O,subTree:L,um:S}=u;T&&Yn(T),m.stop(),O&&(O.active=!1,Ve(L,u,p,b)),S&&ze(S,p),ze(()=>{u.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&u.asyncDep&&!u.asyncResolved&&u.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Qe=(u,p,b,T=!1,m=!1,O=0)=>{for(let L=O;L<u.length;L++)Ve(u[L],p,b,T,m)},yi=u=>u.shapeFlag&6?yi(u.component.subTree):u.shapeFlag&128?u.suspense.next():f(u.anchor||u.el),Tn=(u,p,b)=>{u==null?p._vnode&&Ve(p._vnode,null,null,!0):_(p._vnode||null,u,p,null,null,null,b),na(),Ro(),p._vnode=u},Pt={p:_,um:Ve,m:Oe,r:Re,mt:ct,mc:ae,pc:J,pbc:xe,n:yi,o:t};let zi,It;return e&&([zi,It]=e(Pt)),{render:Tn,hydrate:zi,createApp:Wc(Tn,zi)}}function Kt({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function il(t,e,i=!1){const n=t.children,r=e.children;if(j(n)&&j(r))for(let s=0;s<n.length;s++){const a=n[s];let o=r[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[s]=Rt(r[s]),o.el=a.el),i||il(a,o))}}function zc(t){const e=t.slice(),i=[0];let n,r,s,a,o;const l=t.length;for(n=0;n<l;n++){const h=t[n];if(h!==0){if(r=i[i.length-1],t[r]<h){e[n]=r,i.push(n);continue}for(s=0,a=i.length-1;s<a;)o=s+a>>1,t[i[o]]<h?s=o+1:a=o;h<t[i[s]]&&(s>0&&(e[n]=i[s-1]),i[s]=n)}}for(s=i.length,a=i[s-1];s-- >0;)i[s]=a,a=e[a];return i}const Uc=t=>t.__isTeleport,Ue=Symbol(void 0),Ps=Symbol(void 0),Gt=Symbol(void 0),jn=Symbol(void 0),tn=[];let rt=null;function me(t=!1){tn.push(rt=t?null:[])}function Vc(){tn.pop(),rt=tn[tn.length-1]||null}let pn=1;function fa(t){pn+=t}function nl(t){return t.dynamicChildren=pn>0?rt||ki:null,Vc(),pn>0&&rt&&rt.push(t),t}function we(t,e,i,n,r,s){return nl(g(t,e,i,n,r,s,!0))}function Sr(t,e,i,n,r){return nl($(t,e,i,n,r,!0))}function sr(t){return t?t.__v_isVNode===!0:!1}function Vi(t,e){return t.type===e.type&&t.key===e.key}const xr="__vInternal",rl=({key:t})=>t!=null?t:null,Kn=({ref:t,ref_key:e,ref_for:i})=>t!=null?Pe(t)||Ne(t)||Q(t)?{i:We,r:t,k:e,f:!!i}:t:null;function g(t,e=null,i=null,n=0,r=null,s=t===Ue?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&rl(e),ref:e&&Kn(e),scopeId:wr,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null};return o?(Is(l,i),s&128&&t.normalize(l)):i&&(l.shapeFlag|=Pe(i)?8:16),pn>0&&!a&&rt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&rt.push(l),l}const $=Xc;function Xc(t,e=null,i=null,n=0,r=null,s=!1){if((!t||t===Tc)&&(t=Gt),sr(t)){const o=Oi(t,e,!0);return i&&Is(o,i),pn>0&&!s&&rt&&(o.shapeFlag&6?rt[rt.indexOf(t)]=o:rt.push(o)),o.patchFlag|=-2,o}if(id(t)&&(t=t.__vccOpts),e){e=Yc(e);let{class:o,style:l}=e;o&&!Pe(o)&&(e.class=fs(o)),fe(l)&&(xo(l)&&!j(l)&&(l=Ge({},l)),e.style=us(l))}const a=Pe(t)?1:dc(t)?128:Uc(t)?64:fe(t)?4:Q(t)?2:0;return g(t,e,i,n,r,a,s,!0)}function Yc(t){return t?xo(t)||xr in t?Ge({},t):t:null}function Oi(t,e,i=!1){const{props:n,ref:r,patchFlag:s,children:a}=t,o=e?$c(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&rl(o),ref:e&&e.ref?i&&r?j(r)?r.concat(Kn(e)):[r,Kn(e)]:Kn(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ue?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Oi(t.ssContent),ssFallback:t.ssFallback&&Oi(t.ssFallback),el:t.el,anchor:t.anchor}}function Se(t=" ",e=0){return $(Ps,null,t,e)}function li(t,e){const i=$(jn,null,t);return i.staticCount=e,i}function nn(t="",e=!1){return e?(me(),Sr(Gt,null,t)):$(Gt,null,t)}function _t(t){return t==null||typeof t=="boolean"?$(Gt):j(t)?$(Ue,null,t.slice()):typeof t=="object"?Rt(t):$(Ps,null,String(t))}function Rt(t){return t.el===null||t.memo?t:Oi(t)}function Is(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(j(e))i=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Is(t,r()),r._c&&(r._d=!0));return}else{i=32;const r=e._;!r&&!(xr in e)?e._ctx=We:r===3&&We&&(We.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Q(e)?(e={default:e,_ctx:We},i=32):(e=String(e),n&64?(i=16,e=[Se(e)]):i=8);t.children=e,t.shapeFlag|=i}function $c(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=fs([e.class,n.class]));else if(r==="style")e.style=us([e.style,n.style]);else if(pr(r)){const s=e[r],a=n[r];a&&s!==a&&!(j(s)&&s.includes(a))&&(e[r]=s?[].concat(s,a):a)}else r!==""&&(e[r]=n[r])}return e}function ft(t,e,i,n=null){at(t,e,7,[i,n])}const jc=tl();let Kc=0;function Zc(t,e,i){const n=t.type,r=(e?e.appContext:t.appContext)||jc,s={uid:Kc++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new wh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qo(n,r),emitsOptions:No(n,r),emit:null,emitted:null,propsDefaults:de,inheritAttrs:n.inheritAttrs,ctx:de,data:de,props:de,attrs:de,slots:de,refs:de,setupState:de,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=ac.bind(null,s),t.ce&&t.ce(s),s}let Ee=null;const Ri=t=>{Ee=t,t.scope.on()},ii=()=>{Ee&&Ee.scope.off(),Ee=null};function sl(t){return t.vnode.shapeFlag&4}let gn=!1;function qc(t,e=!1){gn=e;const{props:i,children:n}=t.vnode,r=sl(t);Oc(t,i,r,e),Nc(t,n);const s=r?Jc(t,e):void 0;return gn=!1,s}function Jc(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=To(new Proxy(t.ctx,Ec));const{setup:n}=i;if(n){const r=t.setupContext=n.length>1?ed(t):null;Ri(t),Fi();const s=Ht(n,t,0,[t.props,r]);if(Hi(),ii(),ho(s)){if(s.then(ii,ii),e)return s.then(a=>{pa(t,a,e)}).catch(a=>{yr(a,t,0)});t.asyncDep=s}else pa(t,s,e)}else al(t,e)}function pa(t,e,i){Q(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:fe(e)&&(t.setupState=Io(e)),al(t,i)}let ga;function al(t,e,i){const n=t.type;if(!t.render){if(!e&&ga&&!n.render){const r=n.template||Es(t).template;if(r){const{isCustomElement:s,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,h=Ge(Ge({isCustomElement:s,delimiters:o},a),l);n.render=ga(r,h)}}t.render=n.render||st}Ri(t),Fi(),Ac(t),Hi(),ii()}function Qc(t){return new Proxy(t.attrs,{get(e,i){return Ke(t,"get","$attrs"),e[i]}})}function ed(t){const e=n=>{t.exposed=n||{}};let i;return{get attrs(){return i||(i=Qc(t))},slots:t.slots,emit:t.emit,expose:e}}function Tr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Io(To(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in nr)return nr[i](t)}}))}function td(t,e=!0){return Q(t)?t.displayName||t.name:t.name||e&&t.__name}function id(t){return Q(t)&&"__vccOpts"in t}const xi=(t,e)=>Qh(t,e,gn);function _a(t,e,i){const n=arguments.length;return n===2?fe(e)&&!j(e)?sr(e)?$(t,null,[e]):$(t,e):$(t,null,e):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&sr(i)&&(i=[i]),$(t,e,i))}const nd="3.2.39",rd="http://www.w3.org/2000/svg",Jt=typeof document<"u"?document:null,ma=Jt&&Jt.createElement("template"),sd={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const r=e?Jt.createElementNS(rd,t):Jt.createElement(t,i?{is:i}:void 0);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>Jt.createTextNode(t),createComment:t=>Jt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Jt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,i,n,r,s){const a=i?i.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),i),!(r===s||!(r=r.nextSibling)););else{ma.innerHTML=n?`<svg>${t}</svg>`:t;const o=ma.content;if(n){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,i)}return[a?a.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function ad(t,e,i){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}function od(t,e,i){const n=t.style,r=Pe(i);if(i&&!r){for(const s in i)rs(n,s,i[s]);if(e&&!Pe(e))for(const s in e)i[s]==null&&rs(n,s,"")}else{const s=n.display;r?e!==i&&(n.cssText=i):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=s)}}const va=/\s*!important$/;function rs(t,e,i){if(j(i))i.forEach(n=>rs(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=ld(t,e);va.test(i)?t.setProperty(Ni(n),i.replace(va,""),"important"):t[n]=i}}const ya=["Webkit","Moz","ms"],Hr={};function ld(t,e){const i=Hr[e];if(i)return i;let n=yt(e);if(n!=="filter"&&n in t)return Hr[e]=n;n=mr(n);for(let r=0;r<ya.length;r++){const s=ya[r]+n;if(s in t)return Hr[e]=s}return e}const ba="http://www.w3.org/1999/xlink";function hd(t,e,i,n,r){if(n&&e.startsWith("xlink:"))i==null?t.removeAttributeNS(ba,e.slice(6,e.length)):t.setAttributeNS(ba,e,i);else{const s=lh(e);i==null||s&&!oo(i)?t.removeAttribute(e):t.setAttribute(e,s?"":i)}}function cd(t,e,i,n,r,s,a){if(e==="innerHTML"||e==="textContent"){n&&a(n,r,s),t[e]=i==null?"":i;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=i;const l=i==null?"":i;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),i==null&&t.removeAttribute(e);return}let o=!1;if(i===""||i==null){const l=typeof t[e];l==="boolean"?i=oo(i):i==null&&l==="string"?(i="",o=!0):l==="number"&&(i=0,o=!0)}try{t[e]=i}catch{}o&&t.removeAttribute(e)}const[ol,dd]=(()=>{let t=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const i=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(i&&Number(i[1])<=53)}return[t,e]})();let ss=0;const ud=Promise.resolve(),fd=()=>{ss=0},pd=()=>ss||(ud.then(fd),ss=ol());function Qt(t,e,i,n){t.addEventListener(e,i,n)}function gd(t,e,i,n){t.removeEventListener(e,i,n)}function _d(t,e,i,n,r=null){const s=t._vei||(t._vei={}),a=s[e];if(n&&a)a.value=n;else{const[o,l]=md(e);if(n){const h=s[e]=vd(n,r);Qt(t,o,h,l)}else a&&(gd(t,o,a,l),s[e]=void 0)}}const wa=/(?:Once|Passive|Capture)$/;function md(t){let e;if(wa.test(t)){e={};let n;for(;n=t.match(wa);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ni(t.slice(2)),e]}function vd(t,e){const i=n=>{const r=n.timeStamp||ol();(dd||r>=i.attached-1)&&at(yd(n,i.value),e,5,[n])};return i.value=t,i.attached=pd(),i}function yd(t,e){if(j(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const Ca=/^on[a-z]/,bd=(t,e,i,n,r=!1,s,a,o,l)=>{e==="class"?ad(t,n,r):e==="style"?od(t,i,n):pr(e)?gs(e)||_d(t,e,i,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):wd(t,e,n,r))?cd(t,e,n,s,a,o,l):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),hd(t,e,n,r))};function wd(t,e,i,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&Ca.test(e)&&Q(i)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Ca.test(e)&&Pe(i)?!1:e in t}const ar=t=>{const e=t.props["onUpdate:modelValue"]||!1;return j(e)?i=>Yn(e,i):e};function Cd(t){t.target.composing=!0}function Sa(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Sd={created(t,{modifiers:{lazy:e,trim:i,number:n}},r){t._assign=ar(r);const s=n||r.props&&r.props.type==="number";Qt(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;i&&(o=o.trim()),s&&(o=er(o)),t._assign(o)}),i&&Qt(t,"change",()=>{t.value=t.value.trim()}),e||(Qt(t,"compositionstart",Cd),Qt(t,"compositionend",Sa),Qt(t,"change",Sa))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:i,trim:n,number:r}},s){if(t._assign=ar(s),t.composing||document.activeElement===t&&t.type!=="range"&&(i||n&&t.value.trim()===e||(r||t.type==="number")&&er(t.value)===e))return;const a=e==null?"":e;t.value!==a&&(t.value=a)}},xd={deep:!0,created(t,{value:e,modifiers:{number:i}},n){const r=gr(e);Qt(t,"change",()=>{const s=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>i?er(or(a)):or(a));t._assign(t.multiple?r?new Set(s):s:s[0])}),t._assign=ar(n)},mounted(t,{value:e}){xa(t,e)},beforeUpdate(t,e,i){t._assign=ar(i)},updated(t,{value:e}){xa(t,e)}};function xa(t,e){const i=t.multiple;if(!(i&&!j(e)&&!gr(e))){for(let n=0,r=t.options.length;n<r;n++){const s=t.options[n],a=or(s);if(i)j(e)?s.selected=fh(e,a)>-1:s.selected=e.has(a);else if(fr(or(s),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function or(t){return"_value"in t?t._value:t.value}const Td=Ge({patchProp:bd},sd);let Ta;function kd(){return Ta||(Ta=Gc(Td))}const Ed=(...t)=>{const e=kd().createApp(...t),{mount:i}=e;return e.mount=n=>{const r=Ad(n);if(!r)return;const s=e._component;!Q(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const a=i(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e};function Ad(t){return Pe(t)?document.querySelector(t):t}const Pd="/vue-peaks/assets/peaks-logo.72e98b64.svg",hi=(t,e)=>{const i=t.__vccOpts||t;for(const[n,r]of e)i[n]=r;return i},Id={},Md={class:"columns"},Ld=g("div",{class:"column"},[g("p",null,[Se(" Each pane (overview, zoomview, audio, controls) has "),g("b",null," a dedicated CSS class"),Se(" which you can use to select for your styles. Note however, that you can not style the waveforms themselves this way. ")]),g("p",null," The following selectors are available: ")],-1),Od={class:"column"};function Rd(t,e){const i=Ut("highlightjs");return me(),we("div",Md,[Ld,g("div",Od,[$(i,{language:"css",code:`div.peaks-overview { 
    /* The div with the overview waveform */ }
div.peaks-zoomview { 
    /* The div with the zoom waveform */ }
div.peaks-controls { 
    /* The div with the zoom controls */ }
audio.peaks-audio { 
    /* The audio control, when provided by vue-peaks 
       (in the 'simple' mode) */ }`})])])}const Dd=hi(Id,[["render",Rd]]);var Nd=Math.PI/180;function Fd(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Ii=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Y={_global:Ii,version:"8.3.12",isBrowser:Fd(),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle(t){return Y.angleDeg?t*Nd:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Y.DD.isDragging},isDragReady(){return!!Y.DD.node},document:Ii.document,_injectGlobal(t){Ii.Konva=t}},Vt=t=>{Y[t.prototype.getClassName()]=t};Y._injectGlobal(Y);class Dt{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Dt(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var i=this.m;return{x:i[0]*e.x+i[2]*e.y+i[4],y:i[1]*e.x+i[3]*e.y+i[5]}}translate(e,i){return this.m[4]+=this.m[0]*e+this.m[2]*i,this.m[5]+=this.m[1]*e+this.m[3]*i,this}scale(e,i){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=i,this.m[3]*=i,this}rotate(e){var i=Math.cos(e),n=Math.sin(e),r=this.m[0]*i+this.m[2]*n,s=this.m[1]*i+this.m[3]*n,a=this.m[0]*-n+this.m[2]*i,o=this.m[1]*-n+this.m[3]*i;return this.m[0]=r,this.m[1]=s,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,i){var n=this.m[0]+this.m[2]*i,r=this.m[1]+this.m[3]*i,s=this.m[2]+this.m[0]*e,a=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=r,this.m[2]=s,this.m[3]=a,this}multiply(e){var i=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=i,this.m[1]=n,this.m[2]=r,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*e,n=-this.m[1]*e,r=-this.m[2]*e,s=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=n,this.m[2]=r,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}decompose(){var e=this.m[0],i=this.m[1],n=this.m[2],r=this.m[3],s=this.m[4],a=this.m[5],o=e*r-i*n;let l={x:s,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||i!=0){var h=Math.sqrt(e*e+i*i);l.rotation=i>0?Math.acos(e/h):-Math.acos(e/h),l.scaleX=h,l.scaleY=o/h,l.skewX=(e*n+i*r)/o,l.skewY=0}else if(n!=0||r!=0){var c=Math.sqrt(n*n+r*r);l.rotation=Math.PI/2-(r>0?Math.acos(-n/c):-Math.acos(n/c)),l.scaleX=o/c,l.scaleY=c,l.skewX=0,l.skewY=(e*n+i*r)/o}return l.rotation=v._getRotation(l.rotation),l}}var Hd="[object Array]",Wd="[object Number]",Gd="[object String]",Bd="[object Boolean]",zd=Math.PI/180,Ud=180/Math.PI,Wr="#",Vd="",Xd="0",Yd="Konva warning: ",ka="Konva error: ",$d="rgb(",Gr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},jd=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Ln=[];const Kd=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)},v={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===Hd},_isNumber(t){return Object.prototype.toString.call(t)===Wd&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===Gd},_isBoolean(t){return Object.prototype.toString.call(t)===Bd},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;var e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){Ln.push(t),Ln.length===1&&Kd(function(){const e=Ln;Ln=[],e.forEach(function(i){i()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var i=v.createImageElement();i.onload=function(){e(i)},i.src=t},_rgbToHex(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb(t){t=t.replace(Wr,Vd);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var t=(Math.random()*16777215<<0).toString(16);t.length<6;)t=Xd+t;return Wr+t},getRGB(t){var e;return t in Gr?(e=Gr[t],{r:e[0],g:e[1],b:e[2]}):t[0]===Wr?this._hexToRgb(t.substring(1)):t.substr(0,4)===$d?(e=jd.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",v._namedColorToRBA(t)||v._hex3ColorToRGBA(t)||v._hex6ColorToRGBA(t)||v._rgbColorToRGBA(t)||v._rgbaColorToRGBA(t)||v._hslColorToRGBA(t)},_namedColorToRBA(t){var e=Gr[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map((i,n)=>i.slice(-1)==="%"?n===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),n=Number(i[0])/360,r=Number(i[1])/100,s=Number(i[2])/100;let a,o,l;if(r===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?a=s*(1+r):a=s+r-s*r;const h=2*s-a,c=[0,0,0];for(let d=0;d<3;d++)o=n+1/3*-(d-1),o<0&&o++,o>1&&o--,6*o<1?l=h+(a-h)*6*o:2*o<1?l=a:3*o<2?l=h+(a-h)*(2/3-o)*6:l=h,c[d]=l*255;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){var e={};for(var i in t)this._isPlainObject(t[i])?e[i]=this.cloneObject(t[i]):this._isArray(t[i])?e[i]=this.cloneArray(t[i]):e[i]=t[i];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*zd},radToDeg(t){return t*Ud},_degToRad(t){return v.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),v.degToRad(t)},_radToDeg(t){return v.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),v.radToDeg(t)},_getRotation(t){return Y.angleDeg?v.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(ka+t)},error(t){console.error(ka+t)},warn(t){!Y.showWarnings||console.warn(Yd+t)},each(t,e){for(var i in t)e(i,t[i])},_inRange(t,e,i){return e<=t&&t<i},_getProjectionToSegment(t,e,i,n,r,s){var a,o,l,h=(t-i)*(t-i)+(e-n)*(e-n);if(h==0)a=t,o=e,l=(r-i)*(r-i)+(s-n)*(s-n);else{var c=((r-t)*(i-t)+(s-e)*(n-e))/h;c<0?(a=t,o=e,l=(t-r)*(t-r)+(e-s)*(e-s)):c>1?(a=i,o=n,l=(i-r)*(i-r)+(n-s)*(n-s)):(a=t+c*(i-t),o=e+c*(n-e),l=(a-r)*(a-r)+(o-s)*(o-s))}return[a,o,l]},_getProjectionToLine(t,e,i){var n=v.cloneObject(t),r=Number.MAX_VALUE;return e.forEach(function(s,a){if(!(!i&&a===e.length-1)){var o=e[(a+1)%e.length],l=v._getProjectionToSegment(s.x,s.y,o.x,o.y,t.x,t.y),h=l[0],c=l[1],d=l[2];d<r&&(n.x=h,n.y=c,r=d)}}),n},_prepareArrayForTween(t,e,i){var n,r=[],s=[];if(t.length>e.length){var a=e;e=t,t=a}for(n=0;n<t.length;n+=2)r.push({x:t[n],y:t[n+1]});for(n=0;n<e.length;n+=2)s.push({x:e[n],y:e[n+1]});var o=[];return s.forEach(function(l){var h=v._getProjectionToLine(l,r,i);o.push(h.x),o.push(h.y)}),o},_prepareToStringify(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var i in t)if(!!(t.hasOwnProperty(i)&&t[i]&&typeof t[i]=="object")){if(e=Object.getOwnPropertyDescriptor(t,i),t[i].visitedByCircularReferenceRemoval||v._isElement(t[i]))if(e.configurable)delete t[i];else return null;else if(v._prepareToStringify(t[i])===null)if(e.configurable)delete t[i];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var i in e)t[i]=e[i];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999}};function Xt(t){return v._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||v._isBoolean(t)?t:Object.prototype.toString.call(t)}function ie(){if(Y.isUnminified)return function(t,e){return v._isNumber(t)||v.warn(Xt(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function Zd(t){if(Y.isUnminified)return function(e,i){let n=v._isNumber(e),r=v._isArray(e)&&e.length==t;return!n&&!r&&v.warn(Xt(e)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function Ms(){if(Y.isUnminified)return function(t,e){var i=v._isNumber(t),n=t==="auto";return i||n||v.warn(Xt(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function Wi(){if(Y.isUnminified)return function(t,e){return v._isString(t)||v.warn(Xt(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function ll(){if(Y.isUnminified)return function(t,e){const i=v._isString(t),n=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return i||n||v.warn(Xt(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function qd(){if(Y.isUnminified)return function(t,e){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&t instanceof i||(v._isArray(t)?t.forEach(function(n){v._isNumber(n)||v.warn('"'+e+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):v.warn(Xt(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function kt(){if(Y.isUnminified)return function(t,e){var i=t===!0||t===!1;return i||v.warn(Xt(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function Jd(t){if(Y.isUnminified)return function(e,i){return e==null||v.isObject(e)||v.warn(Xt(e)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+t),e}}var Xi="get",Yi="set";const k={addGetterSetter(t,e,i,n,r){k.addGetter(t,e,i),k.addSetter(t,e,n,r),k.addOverloadedGetterSetter(t,e)},addGetter(t,e,i){var n=Xi+v._capitalize(e);t.prototype[n]=t.prototype[n]||function(){var r=this.attrs[e];return r===void 0?i:r}},addSetter(t,e,i,n){var r=Yi+v._capitalize(e);t.prototype[r]||k.overWriteSetter(t,e,i,n)},overWriteSetter(t,e,i,n){var r=Yi+v._capitalize(e);t.prototype[r]=function(s){return i&&s!==void 0&&s!==null&&(s=i.call(this,s,e)),this._setAttr(e,s),n&&n.call(this),this}},addComponentsGetterSetter(t,e,i,n,r){var s=i.length,a=v._capitalize,o=Xi+a(e),l=Yi+a(e),h,c;t.prototype[o]=function(){var f={};for(h=0;h<s;h++)c=i[h],f[c]=this.getAttr(e+a(c));return f};var d=Jd(i);t.prototype[l]=function(f){var y=this.attrs[e],C;n&&(f=n.call(this,f)),d&&d.call(this,f,e);for(C in f)!f.hasOwnProperty(C)||this._setAttr(e+a(C),f[C]);return f||i.forEach(I=>{this._setAttr(e+a(I),void 0)}),this._fireChangeEvent(e,y,f),r&&r.call(this),this},k.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var i=v._capitalize(e),n=Yi+i,r=Xi+i;t.prototype[e]=function(){return arguments.length?(this[n](arguments[0]),this):this[r]()}},addDeprecatedGetterSetter(t,e,i,n){v.error("Adding deprecated "+e);var r=Xi+v._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[r]=function(){v.error(s);var a=this.attrs[e];return a===void 0?i:a},k.addSetter(t,e,n,function(){v.error(s)}),k.addOverloadedGetterSetter(t,e)},backCompat(t,e){v.each(e,function(i,n){var r=t.prototype[n],s=Xi+v._capitalize(i),a=Yi+v._capitalize(i);function o(){r.apply(this,arguments),v.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[i]=o,t.prototype[s]=o,t.prototype[a]=o})},afterSetFilter(){this._filterUpToDate=!1}};function Qd(t){var e=[],i=t.length,n=v,r,s;for(r=0;r<i;r++)s=t[r],n._isNumber(s)?s=Math.round(s*1e3)/1e3:n._isString(s)||(s=s+""),e.push(s);return e}var Ea=",",eu="(",tu=")",iu="([",nu="])",ru=";",su="()",au="=",Aa=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],ou=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const lu=100;class kr{constructor(e){this.canvas=e,this._context=e._canvas.getContext("2d"),Y.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,i){var n=this.traceArr,r=n.length,s="",a,o,l,h;for(a=0;a<r;a++)o=n[a],l=o.method,l?(h=o.args,s+=l,e?s+=su:v._isArray(h[0])?s+=iu+h.join(Ea)+nu:(i&&(h=h.map(c=>typeof c=="number"?Math.floor(c):c)),s+=eu+h.join(Ea)+tu)):(s+=o.property,e||(s+=au+o.val)),s+=ru;return s}clearTrace(){this.traceArr=[]}_trace(e){var i=this.traceArr,n;i.push(e),n=i.length,n>=lu&&i.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var i=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(e){var i=e.getLineCap();i&&this.setAttr("lineCap",i)}_applyOpacity(e){var i=e.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(e){var i=e.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(e,i){this._context[e]=i}arc(e,i,n,r,s,a){this._context.arc(e,i,n,r,s,a)}arcTo(e,i,n,r,s){this._context.arcTo(e,i,n,r,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,i,n,r,s,a){this._context.bezierCurveTo(e,i,n,r,s,a)}clearRect(e,i,n,r){this._context.clearRect(e,i,n,r)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,i){var n=arguments;if(n.length===2)return this._context.createImageData(e,i);if(n.length===1)return this._context.createImageData(e)}createLinearGradient(e,i,n,r){return this._context.createLinearGradient(e,i,n,r)}createPattern(e,i){return this._context.createPattern(e,i)}createRadialGradient(e,i,n,r,s,a){return this._context.createRadialGradient(e,i,n,r,s,a)}drawImage(e,i,n,r,s,a,o,l,h){var c=arguments,d=this._context;c.length===3?d.drawImage(e,i,n):c.length===5?d.drawImage(e,i,n,r,s):c.length===9&&d.drawImage(e,i,n,r,s,a,o,l,h)}ellipse(e,i,n,r,s,a,o,l){this._context.ellipse(e,i,n,r,s,a,o,l)}isPointInPath(e,i){return this._context.isPointInPath(e,i)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,i,n,r){this._context.fillRect(e,i,n,r)}strokeRect(e,i,n,r){this._context.strokeRect(e,i,n,r)}fillText(e,i,n,r){r?this._context.fillText(e,i,n,r):this._context.fillText(e,i,n)}measureText(e){return this._context.measureText(e)}getImageData(e,i,n,r){return this._context.getImageData(e,i,n,r)}lineTo(e,i){this._context.lineTo(e,i)}moveTo(e,i){this._context.moveTo(e,i)}rect(e,i,n,r){this._context.rect(e,i,n,r)}putImageData(e,i,n){this._context.putImageData(e,i,n)}quadraticCurveTo(e,i,n,r){this._context.quadraticCurveTo(e,i,n,r)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,i){this._context.scale(e,i)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,i,n,r,s,a){this._context.setTransform(e,i,n,r,s,a)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,i,n,r){this._context.strokeText(e,i,n,r)}transform(e,i,n,r,s,a){this._context.transform(e,i,n,r,s,a)}translate(e,i){this._context.translate(e,i)}_enableTrace(){var e=this,i=Aa.length,n=this.setAttr,r,s,a=function(o){var l=e[o],h;e[o]=function(){return s=Qd(Array.prototype.slice.call(arguments,0)),h=l.apply(e,arguments),e._trace({method:o,args:s}),h}};for(r=0;r<i;r++)a(Aa[r]);e.setAttr=function(){n.apply(e,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:o,val:l})}}_applyGlobalCompositeOperation(e){const i=e.attrs.globalCompositeOperation;var n=!i||i==="source-over";n||this.setAttr("globalCompositeOperation",i)}}ou.forEach(function(t){Object.defineProperty(kr.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class hu extends kr{_fillColor(e){var i=e.fill();this.setAttr("fillStyle",i),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var i=e._getLinearGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fillRadialGradient(e){var i=e._getRadialGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fill(e){var i=e.fill(),n=e.getFillPriority();if(i&&n==="color"){this._fillColor(e);return}var r=e.getFillPatternImage();if(r&&n==="pattern"){this._fillPattern(e);return}var s=e.getFillLinearGradientColorStops();if(s&&n==="linear-gradient"){this._fillLinearGradient(e);return}var a=e.getFillRadialGradientColorStops();if(a&&n==="radial-gradient"){this._fillRadialGradient(e);return}i?this._fillColor(e):r?this._fillPattern(e):s?this._fillLinearGradient(e):a&&this._fillRadialGradient(e)}_strokeLinearGradient(e){var i=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),r=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(i.x,i.y,n.x,n.y);if(r){for(var a=0;a<r.length;a+=2)s.addColorStop(r[a],r[a+1]);this.setAttr("strokeStyle",s)}}_stroke(e){var i=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(e),i&&e.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=e.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var i,n,r,s=(i=e.getShadowRGBA())!==null&&i!==void 0?i:"black",a=(n=e.getShadowBlur())!==null&&n!==void 0?n:5,o=(r=e.getShadowOffset())!==null&&r!==void 0?r:{x:0,y:0},l=e.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=l.x*h,d=l.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*d)}}class cu extends kr{_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){var i=e.getStrokeScaleEnabled();if(!i){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),s=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}}var On;function du(){if(On)return On;var t=v.createCanvasElement(),e=t.getContext("2d");return On=function(){var i=Y._global.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/n}(),On}class Er{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var i=e||{},n=i.pixelRatio||Y.pixelRatio||du();this.pixelRatio=n,this._canvas=v.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var i=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var i=this.pixelRatio,n=this.getContext()._context;n.scale(i,i)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var i=this.pixelRatio,n=this.getContext()._context;n.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,i){this.setWidth(e||0),this.setHeight(i||0)}toDataURL(e,i){try{return this._canvas.toDataURL(e,i)}catch{try{return this._canvas.toDataURL()}catch(r){return v.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}k.addGetterSetter(Er,"pixelRatio",void 0,ie());class Mi extends Er{constructor(e={width:0,height:0}){super(e),this.context=new hu(this),this.setSize(e.width,e.height)}}class Ls extends Er{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new cu(this),this.setSize(e.width,e.height)}}const se={get isDragging(){var t=!1;return se._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return se._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const e=[];se._dragElements.forEach((i,n)=>{const{node:r}=i,s=r.getStage();s.setPointersPositions(t),i.pointerId===void 0&&(i.pointerId=v._getFirstPointerId(t));const a=s._changedPointerPositions.find(h=>h.id===i.pointerId);if(!!a){if(i.dragStatus!=="dragging"){var o=r.dragDistance(),l=Math.max(Math.abs(a.x-i.startPointerPos.x),Math.abs(a.y-i.startPointerPos.y));if(l<o||(r.startDrag({evt:t}),!r.isDragging()))return}r._setDragPosition(t,i),e.push(r)}}),e.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:t},!0)})},_endDragBefore(t){const e=[];se._dragElements.forEach(i=>{const{node:n}=i,r=n.getStage();if(t&&r.setPointersPositions(t),!r._changedPointerPositions.find(o=>o.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(se.justDragged=!0,Y._mouseListenClick=!1,Y._touchListenClick=!1,Y._pointerListenClick=!1,i.dragStatus="stopped");const a=i.node.getLayer()||i.node instanceof Y.Stage&&i.node;a&&e.indexOf(a)===-1&&e.push(a)}),e.forEach(i=>{i.draw()})},_endDragAfter(t){se._dragElements.forEach((e,i)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&se._dragElements.delete(i)})}};Y.isBrowser&&(window.addEventListener("mouseup",se._endDragBefore,!0),window.addEventListener("touchend",se._endDragBefore,!0),window.addEventListener("mousemove",se._drag),window.addEventListener("touchmove",se._drag),window.addEventListener("mouseup",se._endDragAfter,!1),window.addEventListener("touchend",se._endDragAfter,!1));var Zn="absoluteOpacity",Rn="allEventListeners",Ct="absoluteTransform",Pa="absoluteScale",$i="canvas",uu="Change",fu="children",pu="konva",as="listening",Ia="mouseenter",Ma="mouseleave",La="set",Oa="Shape",qn=" ",Ra="stage",Ot="transform",gu="Stage",os="visible",_u=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(qn);let mu=1;class z{constructor(e){this._id=mu++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Ot||e===Ct)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,i){var n=this._cache.get(e),r=e===Ot||e===Ct,s=n===void 0||r&&n.dirty===!0;return s&&(n=i.call(this),this._cache.set(e,n)),n}_calculate(e,i,n){if(!this._attachedDepsListeners.get(e)){const r=i.map(s=>s+"Change.konva").join(qn);this.on(r,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get($i)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Ct&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete($i),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var i=e||{},n={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var r=Math.ceil(i.width||n.width),s=Math.ceil(i.height||n.height),a=i.pixelRatio,o=i.x===void 0?Math.floor(n.x):i.x,l=i.y===void 0?Math.floor(n.y):i.y,h=i.offset||0,c=i.drawBorder||!1,d=i.hitCanvasPixelRatio||1;if(!r||!s){v.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}r+=h*2+1,s+=h*2+1,o-=h,l-=h;var f=new Mi({pixelRatio:a,width:r,height:s}),y=new Mi({pixelRatio:a,width:0,height:0}),C=new Ls({pixelRatio:d,width:r,height:s}),I=f.getContext(),_=C.getContext();return C.isCache=!0,f.isCache=!0,this._cache.delete($i),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(f.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1),I.save(),_.save(),I.translate(-o,-l),_.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Zn),this._clearSelfAndDescendantCache(Pa),this.drawScene(f,this),this.drawHit(C,this),this._isUnderCache=!1,I.restore(),_.restore(),c&&(I.save(),I.beginPath(),I.rect(0,0,r,s),I.closePath(),I.setAttr("strokeStyle","red"),I.setAttr("lineWidth",5),I.stroke(),I.restore()),this._cache.set($i,{scene:f,filter:y,hit:C,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has($i)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,i){var n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],r,s,a,o,l=this.getAbsoluteTransform(i);return n.forEach(function(h){var c=l.point(h);r===void 0&&(r=a=c.x,s=o=c.y),r=Math.min(r,c.x),s=Math.min(s,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),{x:r,y:s,width:a-r,height:o-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();e.translate(i.x,i.y);var n=this._getCachedSceneCanvas(),r=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/r,n.height/r),e.restore()}_drawCachedHitCanvas(e){var i=this._getCanvasCache(),n=i.hit;e.save(),e.translate(i.x,i.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),i=this._getCanvasCache(),n=i.scene,r=i.filter,s=r.getContext(),a,o,l,h;if(e){if(!this._filterUpToDate){var c=n.pixelRatio;r.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio);try{for(a=e.length,s.clear(),s.drawImage(n._canvas,0,0,n.getWidth()/c,n.getHeight()/c),o=s.getImageData(0,0,r.getWidth(),r.getHeight()),l=0;l<a;l++){if(h=e[l],typeof h!="function"){v.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),s.putImageData(o,0,0)}}catch(d){v.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return r}return n}on(e,i){if(this._cache&&this._cache.delete(Rn),arguments.length===3)return this._delegate.apply(this,arguments);var n=e.split(qn),r=n.length,s,a,o,l,h;for(s=0;s<r;s++)a=n[s],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:i});return this}off(e,i){var n=(e||"").split(qn),r=n.length,s,a,o,l,h,c;if(this._cache&&this._cache.delete(Rn),!e)for(a in this.eventListeners)this._off(a);for(s=0;s<r;s++)if(o=n[s],l=o.split("."),h=l[0],c=l[1],h)this.eventListeners[h]&&this._off(h,c,i);else for(a in this.eventListeners)this._off(a,c,i);return this}dispatchEvent(e){var i={target:this,type:e.type,evt:e};return this.fire(e.type,i),this}addEventListener(e,i){return this.on(e,function(n){i.call(this,n.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,i,n){var r=this;this.on(e,function(s){for(var a=s.target.findAncestors(i,!0,r),o=0;o<a.length;o++)s=v.cloneObject(s),s.currentTarget=a[o],n.call(a[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),se._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Ct),this._clearSelfAndDescendantCache(Zn),this._clearSelfAndDescendantCache(Pa),this._clearSelfAndDescendantCache(Ra),this._clearSelfAndDescendantCache(os),this._clearSelfAndDescendantCache(as)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(e){var i="get"+v._capitalize(e);return v._isFunction(this[i])?this[i]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),i=[];e;)i.push(e),e=e.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var i,n;if(!e)return this;for(i in e)i!==fu&&(n=La+v._capitalize(i),v._isFunction(this[n])?this[n](e[i]):this._setAttr(i,e[i]))}),this}isListening(){return this._getCache(as,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(os,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,i=!1){if(e)return this._isVisible(e)&&this._isListening(e);var n=this.getLayer(),r=!1;se._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===n)&&(r=!0)});var s=!i&&!Y.hitOnDragEnabled&&r;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),i=this,n=0,r,s,a,o;function l(h){for(r=[],s=h.length,a=0;a<s;a++)o=h[a],n++,o.nodeType!==Oa&&(r=r.concat(o.getChildren().slice())),o._id===i._id&&(a=s);r.length>0&&r[0].getDepth()<=e&&l(r)}return i.nodeType!==gu&&l(i.getStage().getChildren()),n}getDepth(){for(var e=0,i=this.parent;i;)e++,i=i.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Ot),this._clearSelfAndDescendantCache(Ct)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(e){let i=!1,n=this.parent;for(;n;){if(n.isCached()){i=!0;break}n=n.parent}i&&!e&&(e=!0);var r=this.getAbsoluteTransform(e).getMatrix(),s=new Dt,a=this.offset();return s.m=r.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(e){var i=this._clearTransform();this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,this._clearCache(Ot);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(e.x,e.y),e={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(Ot),this._clearSelfAndDescendantCache(Ct),this}_setTransform(e){var i;for(i in e)this.attrs[i]=e[i]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var i=e.x,n=e.y,r=this.x(),s=this.y();return i!==void 0&&(r+=i),n!==void 0&&(s+=n),this.setPosition({x:r,y:s}),this}_eachAncestorReverse(e,i){var n=[],r=this.getParent(),s,a;if(!(i&&i._id===this._id)){for(n.unshift(this);r&&(!i||r._id!==i._id);)n.unshift(r),r=r.parent;for(s=n.length,a=0;a<s;a++)e(n[a])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return v.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return v.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return v.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return v.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return v.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&v.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Zn,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),i=this.getParent();return i&&!i._isUnderCache&&(e*=i.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},i=this.getAttrs(),n,r,s,a,o;e.attrs={};for(n in i)r=i[n],o=v.isObject(r)&&!v._isPlainObject(r)&&!v._isArray(r),!o&&(s=typeof this[n]=="function"&&this[n],delete i[n],a=s?s.call(this):null,i[n]=r,a!==r&&(e.attrs[n]=r));return e.className=this.getClassName(),v._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,i,n){var r=[];i&&this._isMatch(e)&&r.push(this);for(var s=this.parent;s;){if(s===n)return r;s._isMatch(e)&&r.push(s),s=s.parent}return r}isAncestorOf(e){return!1}findAncestor(e,i,n){return this.findAncestors(e,i,n)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var i=e.replace(/ /g,"").split(","),n=i.length,r,s;for(r=0;r<n;r++)if(s=i[r],v.isValidSelector(s)||(v.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),v.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),v.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(Ra,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,i={},n){return i.target=i.target||this,n?this._fireAndBubble(e,i):this._fire(e,i),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Ct,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var i;if(e)return i=new Dt,this._eachAncestorReverse(function(r){var s=r.transformsEnabled();s==="all"?i.multiply(r.getTransform()):s==="position"&&i.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},e),i;i=this._cache.get(Ct)||new Dt,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var n=this.transformsEnabled();if(n==="all")i.multiply(this.getTransform());else if(n==="position"){const r=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;i.translate(r-a,s-o)}return i.dirty=!1,i}getAbsoluteScale(e){for(var i=this;i;)i._isUnderCache&&(e=i),i=i.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Ot,this._getTransform)}_getTransform(){var e,i,n=this._cache.get(Ot)||new Dt;n.reset();var r=this.x(),s=this.y(),a=Y.getAngle(this.rotation()),o=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,d=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return(r!==0||s!==0)&&n.translate(r,s),a!==0&&n.rotate(a),(h!==0||c!==0)&&n.skew(h,c),(o!==1||l!==1)&&n.scale(o,l),(d!==0||f!==0)&&n.translate(-1*d,-1*f),n.dirty=!1,n}clone(e){var i=v.cloneObject(this.attrs),n,r,s,a,o;for(n in e)i[n]=e[n];var l=new this.constructor(i);for(n in this.eventListeners)for(r=this.eventListeners[n],s=r.length,a=0;a<s;a++)o=r[a],o.name.indexOf(pu)<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(o));return l}_toKonvaCanvas(e){e=e||{};var i=this.getClientRect(),n=this.getStage(),r=e.x!==void 0?e.x:Math.floor(i.x),s=e.y!==void 0?e.y:Math.floor(i.y),a=e.pixelRatio||1,o=new Mi({width:e.width||Math.ceil(i.width)||(n?n.width():0),height:e.height||Math.ceil(i.height)||(n?n.height():0),pixelRatio:a}),l=o.getContext();return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(r||s)&&l.translate(-1*r,-1*s),this.drawScene(o),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var i=e.mimeType||null,n=e.quality||null,r=this._toKonvaCanvas(e).toDataURL(i,n);return e.callback&&e.callback(r),r}toImage(e){return new Promise((i,n)=>{try{const r=e==null?void 0:e.callback;r&&delete e.callback,v._urlToImage(this.toDataURL(e),function(s){i(s),r==null||r(s)})}catch(r){n(r)}})}toBlob(e){return new Promise((i,n)=>{try{const r=e==null?void 0:e.callback;r&&delete e.callback,this.toCanvas(e).toBlob(s=>{i(s),r==null||r(s)})}catch(r){n(r)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Y.dragDistance}_off(e,i,n){var r=this.eventListeners[e],s,a,o;for(s=0;s<r.length;s++)if(a=r[s].name,o=r[s].handler,(a!=="konva"||i==="konva")&&(!i||a===i)&&(!n||n===o)){if(r.splice(s,1),r.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,i,n){this._fire(e+uu,{oldVal:i,newVal:n})}addName(e){if(!this.hasName(e)){var i=this.name(),n=i?i+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const i=this.name();if(!i)return!1;var n=(i||"").split(/\s/g);return n.indexOf(e)!==-1}removeName(e){var i=(this.name()||"").split(/\s/g),n=i.indexOf(e);return n!==-1&&(i.splice(n,1),this.name(i.join(" "))),this}setAttr(e,i){var n=this[La+v._capitalize(e)];return v._isFunction(n)?n.call(this,i):this._setAttr(e,i),this}_requestDraw(){if(Y.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,i){var n=this.attrs[e];n===i&&!v.isObject(i)||(i==null?delete this.attrs[e]:this.attrs[e]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,i),this._requestDraw())}_setComponentAttr(e,i,n){var r;n!==void 0&&(r=this.attrs[e],r||(this.attrs[e]=this.getAttr(e)),this.attrs[e][i]=n,this._fireChangeEvent(e,r,n))}_fireAndBubble(e,i,n){i&&this.nodeType===Oa&&(i.target=this);var r=(e===Ia||e===Ma)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n);if(!r){this._fire(e,i);var s=(e===Ia||e===Ma)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!s&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,i,n):this._fireAndBubble.call(this.parent,e,i))}}_getProtoListeners(e){let i=this._cache.get(Rn);if(!i){i={};let r=Object.getPrototypeOf(this);for(;r;){if(!r.eventListeners){r=Object.getPrototypeOf(r);continue}for(var n in r.eventListeners){const s=r.eventListeners[n],a=i[n]||[];i[n]=s.concat(a)}r=Object.getPrototypeOf(r)}this._cache.set(Rn,i)}return i[e]}_fire(e,i){i=i||{},i.currentTarget=this,i.type=e;const n=this._getProtoListeners(e);if(n)for(var r=0;r<n.length;r++)n[r].handler.call(this,i);const s=this.eventListeners[e];if(s)for(var r=0;r<s.length;r++)s[r].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var i=e?e.pointerId:void 0,n=this.getStage(),r=this.getAbsolutePosition(),s=n._getPointerById(i)||n._changedPointerPositions[0]||r;se._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-r.x,y:s.y-r.y},dragStatus:"ready",pointerId:i})}startDrag(e,i=!0){se._dragElements.has(this._id)||this._createDragElement(e);const n=se._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},i)}_setDragPosition(e,i){const n=this.getStage()._getPointerById(i.pointerId);if(!!n){var r={x:n.x-i.offset.x,y:n.y-i.offset.y},s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,r,e);a?r=a:v.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==r.x||this._lastPos.y!==r.y)&&(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}}stopDrag(e){const i=se._dragElements.get(this._id);i&&(i.dragStatus="stopped"),se._endDragBefore(e),se._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=se._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var i=e.evt.button!==void 0,n=!i||Y.dragButtons.indexOf(e.evt.button)>=0;if(!!n&&!this.isDragging()){var r=!1;se._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(r=!0)}),r||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const i=se._dragElements.get(this._id),n=i&&i.dragStatus==="dragging",r=i&&i.dragStatus==="ready";n?this.stopDrag():r&&se._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const i=this.getStage();if(!i)return!1;const n={x:-e.x,y:-e.y,width:i.width()+2*e.x,height:i.height()+2*e.y};return v.haveIntersection(n,this.getClientRect())}static create(e,i){return v._isString(e)&&(e=JSON.parse(e)),this._createNode(e,i)}static _createNode(e,i){var n=z.prototype.getClassName.call(e),r=e.children,s,a,o;i&&(e.attrs.container=i),Y[n]||(v.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const l=Y[n];if(s=new l(e.attrs),r)for(a=r.length,o=0;o<a;o++)s.add(z._createNode(r[o]));return s}}z.prototype.nodeType="Node";z.prototype._attrsAffectingSize=[];z.prototype.eventListeners={};z.prototype.on.call(z.prototype,_u,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Ot),this._clearSelfAndDescendantCache(Ct)});z.prototype.on.call(z.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(os)});z.prototype.on.call(z.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(as)});z.prototype.on.call(z.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Zn)});const ue=k.addGetterSetter;ue(z,"zIndex");ue(z,"absolutePosition");ue(z,"position");ue(z,"x",0,ie());ue(z,"y",0,ie());ue(z,"globalCompositeOperation","source-over",Wi());ue(z,"opacity",1,ie());ue(z,"name","",Wi());ue(z,"id","",Wi());ue(z,"rotation",0,ie());k.addComponentsGetterSetter(z,"scale",["x","y"]);ue(z,"scaleX",1,ie());ue(z,"scaleY",1,ie());k.addComponentsGetterSetter(z,"skew",["x","y"]);ue(z,"skewX",0,ie());ue(z,"skewY",0,ie());k.addComponentsGetterSetter(z,"offset",["x","y"]);ue(z,"offsetX",0,ie());ue(z,"offsetY",0,ie());ue(z,"dragDistance",null,ie());ue(z,"width",0,ie());ue(z,"height",0,ie());ue(z,"listening",!0,kt());ue(z,"preventDefault",!0,kt());ue(z,"filters",null,function(t){return this._filterUpToDate=!1,t});ue(z,"visible",!0,kt());ue(z,"transformsEnabled","all",Wi());ue(z,"size");ue(z,"dragBoundFunc");ue(z,"draggable",!1,kt());k.backCompat(z,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});const _n=new Map,hl=Y._global.PointerEvent!==void 0;function Br(t){return _n.get(t)}function Os(t){return{evt:t,pointerId:t.pointerId}}function cl(t,e){return _n.get(t)===e}function dl(t,e){rn(t),e.getStage()&&(_n.set(t,e),hl&&e._fire("gotpointercapture",Os(new PointerEvent("gotpointercapture"))))}function rn(t,e){const i=_n.get(t);if(!i)return;const n=i.getStage();n&&n.content,_n.delete(t),hl&&i._fire("lostpointercapture",Os(new PointerEvent("lostpointercapture")))}var ul="hasShadow",fl="shadowRGBA",pl="patternImage",gl="linearGradient",_l="radialGradient";let Dn;function zr(){return Dn||(Dn=v.createCanvasElement().getContext("2d"),Dn)}const sn={};function vu(t){t.fill()}function yu(t){t.stroke()}function bu(t){t.fill()}function wu(t){t.stroke()}function Cu(){this._clearCache(ul)}function Su(){this._clearCache(fl)}function xu(){this._clearCache(pl)}function Tu(){this._clearCache(gl)}function ku(){this._clearCache(_l)}class N extends z{constructor(e){super(e);let i;for(;i=v.getRandomColor(),!(i&&!(i in sn)););this.colorKey=i,sn[i]=this}getContext(){return v.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return v.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(ul,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(pl,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=zr();const i=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const n=new Dt;n.translate(this.fillPatternX(),this.fillPatternY()),n.rotate(Y.getAngle(this.fillPatternRotation())),n.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),n.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const r=n.getMatrix(),s=typeof DOMMatrix>"u"?{a:r[0],b:r[1],c:r[2],d:r[3],e:r[4],f:r[5]}:new DOMMatrix(r);i.setTransform(s)}return i}}_getLinearGradient(){return this._getCache(gl,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var i=zr(),n=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),s=i.createLinearGradient(n.x,n.y,r.x,r.y),a=0;a<e.length;a+=2)s.addColorStop(e[a],e[a+1]);return s}}_getRadialGradient(){return this._getCache(_l,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var i=zr(),n=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),s=i.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius()),a=0;a<e.length;a+=2)s.addColorStop(e[a],e[a+1]);return s}}getShadowRGBA(){return this._getCache(fl,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=v.colorToRGBA(this.shadowColor());return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var i=this.getStage(),n=i.bufferHitCanvas,r;return n.getContext().clear(),this.drawHit(n,null,!0),r=n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,r[3]>0}destroy(){return z.prototype.destroy.call(this),delete sn[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var i;if(!this.getStage()||!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const r=e||this.hasFill(),s=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(r&&s&&a)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(r&&s&&o&&l)}setStrokeHitEnabled(e){v.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const i=e.skipTransform,n=e.relativeTo,r=this.getSelfRect(),a=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=r.width+a,l=r.height+a,h=!e.skipShadow&&this.hasShadow(),c=h?this.shadowOffsetX():0,d=h?this.shadowOffsetY():0,f=o+Math.abs(c),y=l+Math.abs(d),C=h&&this.shadowBlur()||0,I=f+C*2,_=y+C*2,M={width:I,height:_,x:-(a/2+C)+Math.min(c,0)+r.x,y:-(a/2+C)+Math.min(d,0)+r.y};return i?M:this._transformedRect(M,n)}drawScene(e,i){var n=this.getLayer(),r=e||n.getCanvas(),s=r.getContext(),a=this._getCanvasCache(),o=this.getSceneFunc(),l=this.hasShadow(),h,c,d,f=r.isCache,y=i===this;if(!this.isVisible()&&!y)return this;if(a){s.save();var C=this.getAbsoluteTransform(i).getMatrix();return s.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!o)return this;if(s.save(),this._useBufferCanvas()&&!f){h=this.getStage(),c=h.bufferCanvas,d=c.getContext(),d.clear(),d.save(),d._applyLineJoin(this);var I=this.getAbsoluteTransform(i).getMatrix();d.transform(I[0],I[1],I[2],I[3],I[4],I[5]),o.call(this,d,this),d.restore();var _=c.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(c._canvas,0,0,c.width/_,c.height/_)}else{if(s._applyLineJoin(this),!y){var I=this.getAbsoluteTransform(i).getMatrix();s.transform(I[0],I[1],I[2],I[3],I[4],I[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),o.call(this,s,this)}return s.restore(),this}drawHit(e,i,n=!1){if(!this.shouldDrawHit(i,n))return this;var r=this.getLayer(),s=e||r.hitCanvas,a=s&&s.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||v.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();var c=this.getAbsoluteTransform(i).getMatrix();return a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),!(this===i)){var f=this.getAbsoluteTransform(i).getMatrix();a.transform(f[0],f[1],f[2],f[3],f[4],f[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(e=0){var i=this._getCanvasCache(),n=this._getCachedSceneCanvas(),r=i.hit,s=r.getContext(),a=r.getWidth(),o=r.getHeight(),l,h,c,d,f,y;s.clear(),s.drawImage(n._canvas,0,0,a,o);try{for(l=s.getImageData(0,0,a,o),h=l.data,c=h.length,d=v._hexToRgb(this.colorKey),f=0;f<c;f+=4)y=h[f+3],y>e?(h[f]=d.r,h[f+1]=d.g,h[f+2]=d.b,h[f+3]=255):h[f+3]=0;s.putImageData(l,0,0)}catch(C){v.error("Unable to draw hit graph from cached scene canvas. "+C.message)}return this}hasPointerCapture(e){return cl(e,this)}setPointerCapture(e){dl(e,this)}releaseCapture(e){rn(e)}}N.prototype._fillFunc=vu;N.prototype._strokeFunc=yu;N.prototype._fillFuncHit=bu;N.prototype._strokeFuncHit=wu;N.prototype._centroid=!1;N.prototype.nodeType="Shape";Vt(N);N.prototype.eventListeners={};N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Cu);N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Su);N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",xu);N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Tu);N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",ku);k.addGetterSetter(N,"stroke",void 0,ll());k.addGetterSetter(N,"strokeWidth",2,ie());k.addGetterSetter(N,"fillAfterStrokeEnabled",!1);k.addGetterSetter(N,"hitStrokeWidth","auto",Ms());k.addGetterSetter(N,"strokeHitEnabled",!0,kt());k.addGetterSetter(N,"perfectDrawEnabled",!0,kt());k.addGetterSetter(N,"shadowForStrokeEnabled",!0,kt());k.addGetterSetter(N,"lineJoin");k.addGetterSetter(N,"lineCap");k.addGetterSetter(N,"sceneFunc");k.addGetterSetter(N,"hitFunc");k.addGetterSetter(N,"dash");k.addGetterSetter(N,"dashOffset",0,ie());k.addGetterSetter(N,"shadowColor",void 0,Wi());k.addGetterSetter(N,"shadowBlur",0,ie());k.addGetterSetter(N,"shadowOpacity",1,ie());k.addComponentsGetterSetter(N,"shadowOffset",["x","y"]);k.addGetterSetter(N,"shadowOffsetX",0,ie());k.addGetterSetter(N,"shadowOffsetY",0,ie());k.addGetterSetter(N,"fillPatternImage");k.addGetterSetter(N,"fill",void 0,ll());k.addGetterSetter(N,"fillPatternX",0,ie());k.addGetterSetter(N,"fillPatternY",0,ie());k.addGetterSetter(N,"fillLinearGradientColorStops");k.addGetterSetter(N,"strokeLinearGradientColorStops");k.addGetterSetter(N,"fillRadialGradientStartRadius",0);k.addGetterSetter(N,"fillRadialGradientEndRadius",0);k.addGetterSetter(N,"fillRadialGradientColorStops");k.addGetterSetter(N,"fillPatternRepeat","repeat");k.addGetterSetter(N,"fillEnabled",!0);k.addGetterSetter(N,"strokeEnabled",!0);k.addGetterSetter(N,"shadowEnabled",!0);k.addGetterSetter(N,"dashEnabled",!0);k.addGetterSetter(N,"strokeScaleEnabled",!0);k.addGetterSetter(N,"fillPriority","color");k.addComponentsGetterSetter(N,"fillPatternOffset",["x","y"]);k.addGetterSetter(N,"fillPatternOffsetX",0,ie());k.addGetterSetter(N,"fillPatternOffsetY",0,ie());k.addComponentsGetterSetter(N,"fillPatternScale",["x","y"]);k.addGetterSetter(N,"fillPatternScaleX",1,ie());k.addGetterSetter(N,"fillPatternScaleY",1,ie());k.addComponentsGetterSetter(N,"fillLinearGradientStartPoint",["x","y"]);k.addComponentsGetterSetter(N,"strokeLinearGradientStartPoint",["x","y"]);k.addGetterSetter(N,"fillLinearGradientStartPointX",0);k.addGetterSetter(N,"strokeLinearGradientStartPointX",0);k.addGetterSetter(N,"fillLinearGradientStartPointY",0);k.addGetterSetter(N,"strokeLinearGradientStartPointY",0);k.addComponentsGetterSetter(N,"fillLinearGradientEndPoint",["x","y"]);k.addComponentsGetterSetter(N,"strokeLinearGradientEndPoint",["x","y"]);k.addGetterSetter(N,"fillLinearGradientEndPointX",0);k.addGetterSetter(N,"strokeLinearGradientEndPointX",0);k.addGetterSetter(N,"fillLinearGradientEndPointY",0);k.addGetterSetter(N,"strokeLinearGradientEndPointY",0);k.addComponentsGetterSetter(N,"fillRadialGradientStartPoint",["x","y"]);k.addGetterSetter(N,"fillRadialGradientStartPointX",0);k.addGetterSetter(N,"fillRadialGradientStartPointY",0);k.addComponentsGetterSetter(N,"fillRadialGradientEndPoint",["x","y"]);k.addGetterSetter(N,"fillRadialGradientEndPointX",0);k.addGetterSetter(N,"fillRadialGradientEndPointY",0);k.addGetterSetter(N,"fillPatternRotation",0);k.backCompat(N,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});function ls(t,e,i,n,r,s,a){var o=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),l=Math.sqrt(Math.pow(r-i,2)+Math.pow(s-n,2)),h=a*o/(o+l),c=a*l/(o+l),d=i-h*(r-t),f=n-h*(s-e),y=i+c*(r-t),C=n+c*(s-e);return[d,f,y,C]}function Da(t,e){var i=t.length,n=[],r,s;for(r=2;r<i-2;r+=2)s=ls(t[r-2],t[r-1],t[r],t[r+1],t[r+2],t[r+3],e),!isNaN(s[0])&&(n.push(s[0]),n.push(s[1]),n.push(t[r]),n.push(t[r+1]),n.push(s[2]),n.push(s[3]));return n}class wt extends N{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var i=this.points(),n=i.length,r=this.tension(),s=this.closed(),a=this.bezier(),o,l,h;if(!!n){if(e.beginPath(),e.moveTo(i[0],i[1]),r!==0&&n>4){for(o=this.getTensionPoints(),l=o.length,h=s?0:4,s||e.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)e.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);s||e.quadraticCurveTo(o[l-2],o[l-1],i[n-2],i[n-1])}else if(a)for(h=2;h<n;)e.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<n;h+=2)e.lineTo(i[h],i[h+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Da(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),i=e.length,n=this.tension(),r=ls(e[i-2],e[i-1],e[0],e[1],e[2],e[3],n),s=ls(e[i-4],e[i-3],e[i-2],e[i-1],e[0],e[1],n),a=Da(e,n),o=[r[2],r[3]].concat(a).concat([s[0],s[1],e[i-2],e[i-1],s[2],s[3],r[0],r[1],e[0],e[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var i=e[0],n=e[0],r=e[1],s=e[1],a,o,l=0;l<e.length/2;l++)a=e[l*2],o=e[l*2+1],i=Math.min(i,a),n=Math.max(n,a),r=Math.min(r,o),s=Math.max(s,o);return{x:i,y:r,width:n-i,height:s-r}}}wt.prototype.className="Line";wt.prototype._attrsAffectingSize=["points","bezier","tension"];Vt(wt);k.addGetterSetter(wt,"closed",!1);k.addGetterSetter(wt,"bezier",!1);k.addGetterSetter(wt,"tension",0,ie());k.addGetterSetter(wt,"points",[],qd());class Gi extends N{_sceneFunc(e){var i=this.cornerRadius(),n=this.width(),r=this.height();if(e.beginPath(),!i)e.rect(0,0,n,r);else{let s=0,a=0,o=0,l=0;typeof i=="number"?s=a=o=l=Math.min(i,n/2,r/2):(s=Math.min(i[0]||0,n/2,r/2),a=Math.min(i[1]||0,n/2,r/2),l=Math.min(i[2]||0,n/2,r/2),o=Math.min(i[3]||0,n/2,r/2)),e.moveTo(s,0),e.lineTo(n-a,0),e.arc(n-a,a,a,Math.PI*3/2,0,!1),e.lineTo(n,r-l),e.arc(n-l,r-l,l,0,Math.PI/2,!1),e.lineTo(o,r),e.arc(o,r-o,o,Math.PI/2,Math.PI,!1),e.lineTo(0,s),e.arc(s,s,s,Math.PI,Math.PI*3/2,!1)}e.closePath(),e.fillStrokeShape(this)}}Gi.prototype.className="Rect";Vt(Gi);k.addGetterSetter(Gi,"cornerRadius",0,Zd(4));function Eu(t){return Array.from(t)}var bi="auto",Au="center",ji="justify",Pu="Change.konva",Iu="2d",Na="-",ml="left",Mu="text",Lu="Text",Ou="top",Ru="bottom",Fa="middle",vl="normal",Du="px ",Nn=" ",Nu="right",Fu="word",Hu="char",Ha="none",Ur="\u2026",yl=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Wu=yl.length;function Gu(t){return t.split(",").map(e=>{e=e.trim();const i=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return i&&!n&&(e=`"${e}"`),e}).join(", ")}var Fn;function Vr(){return Fn||(Fn=v.createCanvasElement().getContext(Iu),Fn)}function Bu(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function zu(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Uu(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class pe extends N{constructor(e){super(Uu(e)),this._partialTextX=0,this._partialTextY=0;for(var i=0;i<Wu;i++)this.on(yl[i]+Pu,this._setTextData);this._setTextData()}_sceneFunc(e){var i=this.textArr,n=i.length;if(!!this.text()){var r=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,o=this.verticalAlign(),l=0,h=this.align(),c=this.getWidth(),d=this.letterSpacing(),f=this.fill(),y=this.textDecoration(),C=y.indexOf("underline")!==-1,I=y.indexOf("line-through")!==-1,_,M=0,M=a/2,x=0,F=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",Fa),e.setAttr("textAlign",ml),o===Fa?l=(this.getHeight()-n*a-r*2)/2:o===Ru&&(l=this.getHeight()-n*a-r*2),e.translate(r,l+r),_=0;_<n;_++){var x=0,F=0,B=i[_],K=B.text,re=B.width,ge=B.lastInParagraph,ee,ae,_e;if(e.save(),h===Nu?x+=c-re-r*2:h===Au&&(x+=(c-re-r*2)/2),C&&(e.save(),e.beginPath(),e.moveTo(x,M+F+Math.round(s/2)),ee=K.split(" ").length-1,ae=ee===0,_e=h===ji&&ge&&!ae?c-r*2:re,e.lineTo(x+Math.round(_e),M+F+Math.round(s/2)),e.lineWidth=s/15,e.strokeStyle=f,e.stroke(),e.restore()),I&&(e.save(),e.beginPath(),e.moveTo(x,M+F),ee=K.split(" ").length-1,ae=ee===0,_e=h===ji&&ge&&!ae?c-r*2:re,e.lineTo(x+Math.round(_e),M+F),e.lineWidth=s/15,e.strokeStyle=f,e.stroke(),e.restore()),d!==0||h===ji){ee=K.split(" ").length-1;for(var xe=Eu(K),Le=0;Le<xe.length;Le++){var ke=xe[Le];ke===" "&&!ge&&h===ji&&(x+=(c-r*2-re)/ee),this._partialTextX=x,this._partialTextY=M+F,this._partialText=ke,e.fillStrokeShape(this),x+=this.measureSize(ke).width+d}}else this._partialTextX=x,this._partialTextY=M+F,this._partialText=K,e.fillStrokeShape(this);e.restore(),n>1&&(M+=a)}}}_hitFunc(e){var i=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,i,n),e.closePath(),e.fillStrokeShape(this)}setText(e){var i=v._isString(e)?e:e==null?"":e+"";return this._setAttr(Mu,i),this}getWidth(){var e=this.attrs.width===bi||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===bi||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return v.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var i=Vr(),n=this.fontSize(),r;return i.save(),i.font=this._getContextFont(),r=i.measureText(e),i.restore(),{width:r.width,height:n}}_getContextFont(){return this.fontStyle()+Nn+this.fontVariant()+Nn+(this.fontSize()+Du)+Gu(this.fontFamily())}_addTextLine(e){this.align()===ji&&(e=e.trim());var i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){var i=this.letterSpacing(),n=e.length;return Vr().measureText(e).width+(n?i*(n-1):0)}_setTextData(){var e=this.text().split(`
`),i=+this.fontSize(),n=0,r=this.lineHeight()*i,s=this.attrs.width,a=this.attrs.height,o=s!==bi&&s!==void 0,l=a!==bi&&a!==void 0,h=this.padding(),c=s-h*2,d=a-h*2,f=0,y=this.wrap(),C=y!==Ha,I=y!==Hu&&C,_=this.ellipsis();this.textArr=[],Vr().font=this._getContextFont();for(var M=_?this._getTextWidth(Ur):0,x=0,F=e.length;x<F;++x){var B=e[x],K=this._getTextWidth(B);if(o&&K>c)for(;B.length>0;){for(var re=0,ge=B.length,ee="",ae=0;re<ge;){var _e=re+ge>>>1,xe=B.slice(0,_e+1),Le=this._getTextWidth(xe)+M;Le<=c?(re=_e+1,ee=xe,ae=Le):ge=_e}if(ee){if(I){var ke,Je=B[ee.length],ct=Je===Nn||Je===Na;ct&&ae<=c?ke=ee.length:ke=Math.max(ee.lastIndexOf(Nn),ee.lastIndexOf(Na))+1,ke>0&&(re=ke,ee=ee.slice(0,re),ae=this._getTextWidth(ee))}ee=ee.trimRight(),this._addTextLine(ee),n=Math.max(n,ae),f+=r;var A=this._shouldHandleEllipsis(f);if(A){this._tryToAddEllipsisToLastLine();break}if(B=B.slice(re),B=B.trimLeft(),B.length>0&&(K=this._getTextWidth(B),K<=c)){this._addTextLine(B),f+=r,n=Math.max(n,K);break}}else break}else this._addTextLine(B),f+=r,n=Math.max(n,K),this._shouldHandleEllipsis(f)&&x<F-1&&this._tryToAddEllipsisToLastLine();if(l&&f+r>d)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=i,this.textWidth=n}_shouldHandleEllipsis(e){var i=+this.fontSize(),n=this.lineHeight()*i,r=this.attrs.height,s=r!==bi&&r!==void 0,a=this.padding(),o=r-a*2,l=this.wrap(),h=l!==Ha;return!h||s&&e+n>o}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,i=e!==bi&&e!==void 0,n=this.padding(),r=e-n*2,s=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(!(!a||!s)){if(i){var o=this._getTextWidth(a.text+Ur)<r;o||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+Ur)}}getStrokeScaleEnabled(){return!0}}pe.prototype._fillFunc=Bu;pe.prototype._strokeFunc=zu;pe.prototype.className=Lu;pe.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Vt(pe);k.overWriteSetter(pe,"width",Ms());k.overWriteSetter(pe,"height",Ms());k.addGetterSetter(pe,"fontFamily","Arial");k.addGetterSetter(pe,"fontSize",12,ie());k.addGetterSetter(pe,"fontStyle",vl);k.addGetterSetter(pe,"fontVariant",vl);k.addGetterSetter(pe,"padding",0,ie());k.addGetterSetter(pe,"align",ml);k.addGetterSetter(pe,"verticalAlign",Ou);k.addGetterSetter(pe,"lineHeight",1,ie());k.addGetterSetter(pe,"wrap",Fu);k.addGetterSetter(pe,"ellipsis",!1,kt());k.addGetterSetter(pe,"letterSpacing",0,ie());k.addGetterSetter(pe,"text","",Wi());k.addGetterSetter(pe,"textDecoration","");class je extends z{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const i=this.children||[];var n=[];return i.forEach(function(r){e(r)&&n.push(r)}),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}var n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var i=this._generalFind(e,!0);return i.length>0?i[0]:void 0}_generalFind(e,i){var n=[];return this._descendants(r=>{const s=r._isMatch(e);return s&&n.push(r),!!(s&&i)}),n}_descendants(e){let i=!1;const n=this.getChildren();for(const r of n){if(i=e(r),i)return!0;if(!!r.hasChildren()&&(i=r._descendants(e),i))return!0}return!1}toObject(){var e=z.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(i=>{e.children.push(i.toObject())}),e}isAncestorOf(e){for(var i=e.getParent();i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(e){var i=z.prototype.clone.call(this,e);return this.getChildren().forEach(function(n){i.add(n.clone())}),i}getAllIntersections(e){var i=[];return this.find("Shape").forEach(function(n){n.isVisible()&&n.intersects(e)&&i.push(n)}),i}_clearSelfAndDescendantCache(e){var i;super._clearSelfAndDescendantCache(e),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(n){n._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(i,n){i.index=n}),this._requestDraw()}drawScene(e,i){var n=this.getLayer(),r=e||n&&n.getCanvas(),s=r&&r.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=r&&r.isCache;if(!this.isVisible()&&!l)return this;if(o){s.save();var h=this.getAbsoluteTransform(i).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",r,i);return this}drawHit(e,i){if(!this.shouldDrawHit(i))return this;var n=this.getLayer(),r=e||n&&n.hitCanvas,s=r&&r.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){s.save();var l=this.getAbsoluteTransform(i).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",r,i);return this}_drawChildren(e,i,n){var r,s=i&&i.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h=a&&o||l;const c=n===this;if(h){s.save();var d=this.getAbsoluteTransform(n),f=d.getMatrix();if(s.transform(f[0],f[1],f[2],f[3],f[4],f[5]),s.beginPath(),l)l.call(this,s,this);else{var y=this.clipX(),C=this.clipY();s.rect(y,C,a,o)}s.clip(),f=d.copy().invert().getMatrix(),s.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var I=!c&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";I&&(s.save(),s._applyGlobalCompositeOperation(this)),(r=this.children)===null||r===void 0||r.forEach(function(_){_[e](i,n)}),I&&s.restore(),h&&s.restore()}getClientRect(e){var i;e=e||{};var n=e.skipTransform,r=e.relativeTo,s,a,o,l,h={x:1/0,y:1/0,width:0,height:0},c=this;(i=this.children)===null||i===void 0||i.forEach(function(I){if(!!I.visible()){var _=I.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});_.width===0&&_.height===0||(s===void 0?(s=_.x,a=_.y,o=_.x+_.width,l=_.y+_.height):(s=Math.min(s,_.x),a=Math.min(a,_.y),o=Math.max(o,_.x+_.width),l=Math.max(l,_.y+_.height)))}});for(var d=this.find("Shape"),f=!1,y=0;y<d.length;y++){var C=d[y];if(C._isVisible(this)){f=!0;break}}return f&&s!==void 0?h={x:s,y:a,width:o-s,height:l-a}:h={x:0,y:0,width:0,height:0},n?h:this._transformedRect(h,r)}}k.addComponentsGetterSetter(je,"clip",["x","y","width","height"]);k.addGetterSetter(je,"clipX",void 0,ie());k.addGetterSetter(je,"clipY",void 0,ie());k.addGetterSetter(je,"clipWidth",void 0,ie());k.addGetterSetter(je,"clipHeight",void 0,ie());k.addGetterSetter(je,"clipFunc");var Vu="Stage",Xu="string",Wa="px",Yu="mouseout",bl="mouseleave",wl="mouseover",Cl="mouseenter",Sl="mousemove",xl="mousedown",Tl="mouseup",Zi="pointermove",qi="pointerdown",Ti="pointerup",Ji="pointercancel",$u="lostpointercapture",Hn="pointerout",Wn="pointerleave",Gn="pointerover",Bn="pointerenter",hs="contextmenu",kl="touchstart",El="touchend",Al="touchmove",Pl="touchcancel",cs="wheel",ju=5,Ku=[[Cl,"_pointerenter"],[xl,"_pointerdown"],[Sl,"_pointermove"],[Tl,"_pointerup"],[bl,"_pointerleave"],[kl,"_pointerdown"],[Al,"_pointermove"],[El,"_pointerup"],[Pl,"_pointercancel"],[wl,"_pointerover"],[cs,"_wheel"],[hs,"_contextmenu"],[qi,"_pointerdown"],[Zi,"_pointermove"],[Ti,"_pointerup"],[Ji,"_pointercancel"],[$u,"_lostpointercapture"]];const Xr={mouse:{[Hn]:Yu,[Wn]:bl,[Gn]:wl,[Bn]:Cl,[Zi]:Sl,[qi]:xl,[Ti]:Tl,[Ji]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Hn]:"touchout",[Wn]:"touchleave",[Gn]:"touchover",[Bn]:"touchenter",[Zi]:Al,[qi]:kl,[Ti]:El,[Ji]:Pl,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Hn]:Hn,[Wn]:Wn,[Gn]:Gn,[Bn]:Bn,[Zi]:Zi,[qi]:qi,[Ti]:Ti,[Ji]:Ji,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Qi=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",wi=t=>{const e=Qi(t);if(e==="pointer")return Y.pointerEventsEnabled&&Xr.pointer;if(e==="touch")return Xr.touch;if(e==="mouse")return Xr.mouse};function Ga(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&v.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const Zu="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Jn=[];class Ar extends je{constructor(e){super(Ga(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Jn.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Ga(this.attrs)}),this._checkVisibility()}_validateAdd(e){const i=e.getType()==="Layer",n=e.getType()==="FastLayer";i||n||v.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===Xu){if(e.charAt(0)==="."){var i=e.slice(1);e=document.getElementsByClassName(i)[0]}else{var n;e.charAt(0)!=="#"?n=e:n=e.slice(1),e=document.getElementById(n)}if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,i=e.length,n;for(n=0;n<i;n++)e[n].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),je.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&v._isInDocument(e)&&this.container().removeChild(e);var i=Jn.indexOf(this);return i>-1&&Jn.splice(i,1),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(v.warn(Zu),null)}_getPointerById(e){return this._pointerPositions.find(i=>i.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var i=new Mi({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=i.getContext()._context,r=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),r.forEach(function(s){if(!!s.isVisible()){var a=s._toKonvaCanvas(e);n.drawImage(a._canvas,e.x,e.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}}),i}getIntersection(e){if(!e)return null;var i=this.children,n=i.length,r=n-1,s;for(s=r;s>=0;s--){const a=i[s].getIntersection(e);if(a)return a}return null}_resizeDOM(){var e=this.width(),i=this.height();this.content&&(this.content.style.width=e+Wa,this.content.style.height=i+Wa),this.bufferCanvas.setSize(e,i),this.bufferHitCanvas.setSize(e,i),this.children.forEach(n=>{n.setSize({width:e,height:i}),n.draw()})}add(e,...i){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(e);var r=this.children.length;return r>ju&&v.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),Y.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return cl(e,this)}setPointerCapture(e){dl(e,this)}releaseCapture(e){rn(e)}getLayers(){return this.children}_bindContentEvents(){!Y.isBrowser||Ku.forEach(([e,i])=>{this.content.addEventListener(e,n=>{this[i](n)})})}_pointerenter(e){this.setPointersPositions(e);const i=wi(e.type);this._fire(i.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const i=wi(e.type);this._fire(i.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let i=this[e+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(e){const i=wi(e.type),n=Qi(e.type);if(!!i){this.setPointersPositions(e);var r=this._getTargetShape(n),s=!se.isDragging||Y.hitOnDragEnabled;r&&s?(r._fireAndBubble(i.pointerout,{evt:e}),r._fireAndBubble(i.pointerleave,{evt:e}),this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):s&&(this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const i=wi(e.type),n=Qi(e.type);if(!!i){this.setPointersPositions(e);var r=!1;this._changedPointerPositions.forEach(s=>{var a=this.getIntersection(s);if(se.justDragged=!1,Y["_"+n+"ListenClick"]=!0,!(a&&a.isListening()))return;Y.capturePointerEventsEnabled&&a.setPointerCapture(s.id),this[n+"ClickStartShape"]=a,a._fireAndBubble(i.pointerdown,{evt:e,pointerId:s.id}),r=!0;const l=e.type.indexOf("touch")>=0;a.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),r||this._fire(i.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const i=wi(e.type),n=Qi(e.type);if(!i)return;se.isDragging&&se.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var r=!se.isDragging||Y.hitOnDragEnabled;if(!r)return;var s={};let a=!1;var o=this._getTargetShape(n);this._changedPointerPositions.forEach(l=>{const h=Br(l.id)||this.getIntersection(l),c=l.id,d={evt:e,pointerId:c};var f=o!==h;if(f&&o&&(o._fireAndBubble(i.pointerout,Object.assign({},d),h),o._fireAndBubble(i.pointerleave,Object.assign({},d),h)),h){if(s[h._id])return;s[h._id]=!0}h&&h.isListening()?(a=!0,f&&(h._fireAndBubble(i.pointerover,Object.assign({},d),o),h._fireAndBubble(i.pointerenter,Object.assign({},d),o),this[n+"targetShape"]=h),h._fireAndBubble(i.pointermove,Object.assign({},d))):o&&(this._fire(i.pointerover,{evt:e,target:this,currentTarget:this,pointerId:c}),this[n+"targetShape"]=null)}),a||this._fire(i.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const i=wi(e.type),n=Qi(e.type);if(!i)return;this.setPointersPositions(e);const r=this[n+"ClickStartShape"],s=this[n+"ClickEndShape"];var a={};let o=!1;this._changedPointerPositions.forEach(l=>{const h=Br(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),a[h._id])return;a[h._id]=!0}const c=l.id,d={evt:e,pointerId:c};let f=!1;Y["_"+n+"InDblClickWindow"]?(f=!0,clearTimeout(this[n+"DblTimeout"])):se.justDragged||(Y["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){Y["_"+n+"InDblClickWindow"]=!1},Y.dblClickWindow),h&&h.isListening()?(o=!0,this[n+"ClickEndShape"]=h,h._fireAndBubble(i.pointerup,Object.assign({},d)),Y["_"+n+"ListenClick"]&&r&&r===h&&(h._fireAndBubble(i.pointerclick,Object.assign({},d)),f&&s&&s===h&&h._fireAndBubble(i.pointerdblclick,Object.assign({},d)))):(this[n+"ClickEndShape"]=null,Y["_"+n+"ListenClick"]&&this._fire(i.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:c}),f&&this._fire(i.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:c}))}),o||this._fire(i.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Y["_"+n+"ListenClick"]=!1,e.cancelable&&n!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(hs,{evt:e}):this._fire(hs,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(cs,{evt:e}):this._fire(cs,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const i=Br(e.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(Ti,Os(e)),rn(e.pointerId)}_lostpointercapture(e){rn(e.pointerId)}setPointersPositions(e){var i=this._getContentPosition(),n=null,r=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})})):(n=(e.clientX-i.left)/i.scaleX,r=(e.clientY-i.top)/i.scaleY,this.pointerPos={x:n,y:r},this._pointerPositions=[{x:n,y:r,id:v._getFirstPointerId(e)}],this._changedPointerPositions=[{x:n,y:r,id:v._getFirstPointerId(e)}])}_setPointerPosition(e){v.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Mi({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Ls({pixelRatio:1,width:this.width(),height:this.height()}),!!Y.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return v.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}Ar.prototype.nodeType=Vu;Vt(Ar);k.addGetterSetter(Ar,"container");var qu="#",Ju="beforeDraw",Qu="draw",Il=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],ef=Il.length;class ci extends je{constructor(e){super(e),this.canvas=new Mi,this.hitCanvas=new Ls({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),e<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[e+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){z.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=z.prototype.moveUp.call(this);if(!e)return!1;var i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(z.prototype.moveDown.call(this)){var e=this.getStage();if(e){var i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(z.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return z.prototype.remove.call(this),e&&e.parentNode&&v._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:i}){return this.canvas.setSize(e,i),this.hitCanvas.setSize(e,i),this._setSmoothEnabled(),this}_validateAdd(e){var i=e.getType();i!=="Group"&&i!=="Shape"&&v.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),z.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){v.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){v.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,v.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var i=1,n=!1;;){for(let r=0;r<ef;r++){const s=Il[r],a=this._getIntersection({x:e.x+s.x*i,y:e.y+s.y*i}),o=a.shape;if(o)return o;if(n=!!a.antialiased,!a.antialiased)break}if(n)i+=1;else return null}}_getIntersection(e){const i=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*i),Math.round(e.y*i),1,1).data,r=n[3];if(r===255){const s=v._rgbToHex(n[0],n[1],n[2]),a=sn[qu+s];return a?{shape:a}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(e,i){var n=this.getLayer(),r=e||n&&n.getCanvas();return this._fire(Ju,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),je.prototype.drawScene.call(this,r,i),this._fire(Qu,{node:this}),this}drawHit(e,i){var n=this.getLayer(),r=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),je.prototype.drawHit.call(this,r,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){v.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return v.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,i=!!this.hitCanvas._canvas.parentNode;i?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}}ci.prototype.nodeType="Layer";Vt(ci);k.addGetterSetter(ci,"imageSmoothingEnabled",!0);k.addGetterSetter(ci,"clearBeforeDraw",!0);k.addGetterSetter(ci,"hitGraphEnabled",!0,kt());class Rs extends ci{constructor(e){super(e),this.listening(!1),v.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Rs.prototype.nodeType="FastLayer";Vt(Rs);class Ds extends je{_validateAdd(e){var i=e.getType();i!=="Group"&&i!=="Shape"&&v.throw("You may only add groups and shapes to groups.")}}Ds.prototype.nodeType="Group";Vt(Ds);var Yr=function(){return Ii.performance&&Ii.performance.now?function(){return Ii.performance.now()}:function(){return new Date().getTime()}}();class et{constructor(e,i){this.id=et.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Yr(),frameRate:0},this.func=e,this.setLayers(i)}setLayers(e){var i=[];return e?e.length>0?i=e:i=[e]:i=[],this.layers=i,this}getLayers(){return this.layers}addLayer(e){var i=this.layers,n=i.length,r;for(r=0;r<n;r++)if(i[r]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=et,i=e.animations,n=i.length,r;for(r=0;r<n;r++)if(i[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Yr(),et._addAnimation(this),this}stop(){return et._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var i=e.id,n=this.animations,r=n.length,s;for(s=0;s<r;s++)if(n[s].id===i){this.animations.splice(s,1);break}}static _runFrames(){var e={},i=this.animations,n,r,s,a,o,l,h,c,d;for(a=0;a<i.length;a++)if(n=i[a],r=n.layers,s=n.func,n._updateFrameObject(Yr()),l=r.length,s?d=s.call(n,n.frame)!==!1:d=!0,!!d)for(o=0;o<l;o++)h=r[o],h._id!==void 0&&(e[h._id]=h);for(c in e)!e.hasOwnProperty(c)||e[c].batchDraw()}static _animationLoop(){var e=et;e.animations.length?(e._runFrames(),v.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,v.requestAnimFrame(this._animationLoop))}}et.animations=[];et.animIdCounter=0;et.animRunning=!1;var tf={node:1,duration:1,easing:1,onFinish:1,yoyo:1},nf=1,Ba=2,za=3,rf=0,Ua=["fill","stroke","shadowColor"];class sf{constructor(e,i,n,r,s,a,o){this.prop=e,this.propFunc=i,this.begin=r,this._pos=r,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=s-this.begin,this.pause()}fire(e){var i=this[e];i&&i()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=Ba,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=za,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===Ba?this.setTime(e):this.state===za&&this.setTime(this.duration-e)}pause(){this.state=nf,this.fire("onPause")}getTimer(){return new Date().getTime()}}class ye{constructor(e){var i=this,n=e.node,r=n._id,s,a=e.easing||an.Linear,o=!!e.yoyo,l;typeof e.duration>"u"?s=.3:e.duration===0?s=.001:s=e.duration,this.node=n,this._id=rf++;var h=n.getLayer()||(n instanceof Y.Stage?n.getLayers():null);h||v.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new et(function(){i.tween.onEnterFrame()},h),this.tween=new sf(l,function(c){i._tweenFunc(c)},a,0,1,s*1e3,o),this._addListeners(),ye.attrs[r]||(ye.attrs[r]={}),ye.attrs[r][this._id]||(ye.attrs[r][this._id]={}),ye.tweens[r]||(ye.tweens[r]={});for(l in e)tf[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,i){var n=this.node,r=n._id,s,a,o,l,h,c,d,f;if(o=ye.tweens[r][e],o&&delete ye.attrs[r][o][e],s=n.getAttr(e),v._isArray(i))if(a=[],h=Math.max(i.length,s.length),e==="points"&&i.length!==s.length&&(i.length>s.length?(d=s,s=v._prepareArrayForTween(s,i,n.closed())):(c=i,i=v._prepareArrayForTween(i,s,n.closed()))),e.indexOf("fill")===0)for(l=0;l<h;l++)if(l%2===0)a.push(i[l]-s[l]);else{var y=v.colorToRGBA(s[l]);f=v.colorToRGBA(i[l]),s[l]=y,a.push({r:f.r-y.r,g:f.g-y.g,b:f.b-y.b,a:f.a-y.a})}else for(l=0;l<h;l++)a.push(i[l]-s[l]);else Ua.indexOf(e)!==-1?(s=v.colorToRGBA(s),f=v.colorToRGBA(i),a={r:f.r-s.r,g:f.g-s.g,b:f.b-s.b,a:f.a-s.a}):a=i-s;ye.attrs[r][this._id][e]={start:s,diff:a,end:i,trueEnd:c,trueStart:d},ye.tweens[r][e]=this._id}_tweenFunc(e){var i=this.node,n=ye.attrs[i._id][this._id],r,s,a,o,l,h,c,d;for(r in n){if(s=n[r],a=s.start,o=s.diff,d=s.end,v._isArray(a))if(l=[],c=Math.max(a.length,d.length),r.indexOf("fill")===0)for(h=0;h<c;h++)h%2===0?l.push((a[h]||0)+o[h]*e):l.push("rgba("+Math.round(a[h].r+o[h].r*e)+","+Math.round(a[h].g+o[h].g*e)+","+Math.round(a[h].b+o[h].b*e)+","+(a[h].a+o[h].a*e)+")");else for(h=0;h<c;h++)l.push((a[h]||0)+o[h]*e);else Ua.indexOf(r)!==-1?l="rgba("+Math.round(a.r+o.r*e)+","+Math.round(a.g+o.g*e)+","+Math.round(a.b+o.b*e)+","+(a.a+o.a*e)+")":l=a+o*e;i.setAttr(r,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,i=ye.attrs[e._id][this._id];i.points&&i.points.trueEnd&&e.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,i=ye.attrs[e._id][this._id];i.points&&i.points.trueStart&&e.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,i=this._id,n=ye.tweens[e],r;this.pause();for(r in n)delete ye.tweens[e][r];delete ye.attrs[e][i]}}ye.attrs={};ye.tweens={};z.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var i=new ye(t);i.play()};const an={BackEaseIn(t,e,i,n){var r=1.70158;return i*(t/=n)*t*((r+1)*t-r)+e},BackEaseOut(t,e,i,n){var r=1.70158;return i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},BackEaseInOut(t,e,i,n){var r=1.70158;return(t/=n/2)<1?i/2*(t*t*(((r*=1.525)+1)*t-r))+e:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},ElasticEaseIn(t,e,i,n,r,s){var a=0;return t===0?e:(t/=n)===1?e+i:(s||(s=n*.3),!r||r<Math.abs(i)?(r=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/r),-(r*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/s))+e)},ElasticEaseOut(t,e,i,n,r,s){var a=0;return t===0?e:(t/=n)===1?e+i:(s||(s=n*.3),!r||r<Math.abs(i)?(r=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/r),r*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/s)+i+e)},ElasticEaseInOut(t,e,i,n,r,s){var a=0;return t===0?e:(t/=n/2)===2?e+i:(s||(s=n*(.3*1.5)),!r||r<Math.abs(i)?(r=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/r),t<1?-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/s))+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/s)*.5+i+e)},BounceEaseOut(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,i,n){return i-an.BounceEaseOut(n-t,0,i,n)+e},BounceEaseInOut(t,e,i,n){return t<n/2?an.BounceEaseIn(t*2,0,i,n)*.5+e:an.BounceEaseOut(t*2-n,0,i,n)*.5+i*.5+e},EaseIn(t,e,i,n){return i*(t/=n)*t+e},EaseOut(t,e,i,n){return-i*(t/=n)*(t-2)+e},EaseInOut(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,i,n){return i*(t/=n)*t*t*t*t+e},StrongEaseOut(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,i,n){return i*t/n+e}},Ae=v._assign(Y,{Util:v,Transform:Dt,Node:z,Container:je,Stage:Ar,stages:Jn,Layer:ci,FastLayer:Rs,Group:Ds,DD:se,Shape:N,shapes:sn,Animation:et,Tween:ye,Easings:an,Context:kr,Canvas:Er});function di(t,e){this._waveformData=t,this._channelIndex=e}di.prototype.min_sample=function(t){var e=(t*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._at(e)};di.prototype.max_sample=function(t){var e=(t*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._at(e)};di.prototype.set_min_sample=function(t,e){var i=(t*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._set_at(i,e)};di.prototype.set_max_sample=function(t,e){var i=(t*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._set_at(i,e)};di.prototype.min_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2)};di.prototype.max_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2+1)};var Ci=127,zn=-128;function af(t,e){var i=Math.floor(t/e),n=t-i*e;return n>0&&i++,i}function of(t){var e=t.scale,i=t.amplitude_scale,n=t.split_channels,r=t.length,s=t.sample_rate,a=t.channels.map(function(K){return new Float32Array(K)}),o=n?a.length:1,l=o===1?1:2,h=l===1?20:24,c=af(r,e),d=h+c*2*o,f=new ArrayBuffer(d),y=new DataView(f),C=0,I=h,_,M,x=new Array(o),F=new Array(o);for(_=0;_<o;_++)x[_]=1/0,F[_]=-1/0;for(y.setInt32(0,l,!0),y.setUint32(4,1,!0),y.setInt32(8,s,!0),y.setInt32(12,e,!0),y.setInt32(16,c,!0),l===2&&y.setInt32(20,o,!0),M=0;M<r;M++){var B=0;if(o===1){for(_=0;_<a.length;++_)B+=a[_][M];B=Math.floor(Ci*B*i/a.length),B<x[0]&&(x[0]=B,x[0]<zn&&(x[0]=zn)),B>F[0]&&(F[0]=B,F[0]>Ci&&(F[0]=Ci))}else for(_=0;_<o;++_)B=Math.floor(Ci*a[_][M]*i),B<x[_]&&(x[_]=B,x[_]<zn&&(x[_]=zn)),B>F[_]&&(F[_]=B,F[_]>Ci&&(F[_]=Ci));if(++C===e){for(_=0;_<o;_++)y.setInt8(I++,x[_]),y.setInt8(I++,F[_]),x[_]=1/0,F[_]=-1/0;C=0}}if(C>0)for(_=0;_<o;_++)y.setInt8(I++,x[_]),y.setInt8(I++,F[_]);return f}function on(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?on=function(e){return typeof e}:on=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(t)}function lf(t){return t&&on(t)==="object"&&"sample_rate"in t&&"samples_per_pixel"in t&&"bits"in t&&"length"in t&&"data"in t}function hf(t){var e=t&&on(t)==="object"&&"byteLength"in t;if(e){var i=new DataView(t),n=i.getInt32(0,!0);if(n!==1&&n!==2)throw new TypeError("WaveformData.create(): This waveform data version not supported")}return e}function cf(t){var e=t.data,i=t.channels||1,n=24,r=t.bits===8?1:2,s=t.length*2*i;if(e.length!==s)throw new Error("WaveformData.create(): Length mismatch in JSON waveform data");var a=n+e.length*r,o=new ArrayBuffer(a),l=new DataView(o);l.setInt32(0,2,!0),l.setUint32(4,t.bits===8,!0),l.setInt32(8,t.sample_rate,!0),l.setInt32(12,t.samples_per_pixel,!0),l.setInt32(16,t.length,!0),l.setInt32(20,i,!0);var h=n,c;if(t.bits===8)for(c=0;c<e.length;c++)l.setInt8(h++,e[c],!0);else for(c=0;c<e.length;c++)l.setInt16(h,e[c],!0),h+=2;return o}function df(t,e){var i=atob(t);if(e){for(var n=new Uint8Array(i.length),r=0,s=i.length;r<s;++r)n[r]=i.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}function uf(t,e,i){var n=e===void 0?null:e,r=i===void 0?!1:i,s=df(t,r),a=s.indexOf(`
`,10)+1,o=s.substring(a)+(n?"//# sourceMappingURL="+n:""),l=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(l)}function ff(t,e,i){var n;return function(s){return n=n||uf(t,e,i),new Worker(n,s)}}var pf=ff("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogQXVkaW9CdWZmZXItYmFzZWQgV2F2ZWZvcm1EYXRhIGdlbmVyYXRvcgogICAqCiAgICogQWRhcHRlZCBmcm9tIEJsb2NrRmlsZTo6Q2FsY1N1bW1hcnkgaW4gQXVkYWNpdHksIHdpdGggcGVybWlzc2lvbi4KICAgKiBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9hdWRhY2l0eS9zb3VyY2UvYnJvd3NlL2F1ZGFjaXR5LXNyYy90cnVuay9zcmMvQmxvY2tGaWxlLmNwcAogICAqLwogIHZhciBJTlQ4X01BWCA9IDEyNzsKICB2YXIgSU5UOF9NSU4gPSAtMTI4OwoKICBmdW5jdGlvbiBjYWxjdWxhdGVXYXZlZm9ybURhdGFMZW5ndGgoYXVkaW9fc2FtcGxlX2NvdW50LCBzY2FsZSkgewogICAgdmFyIGRhdGFfbGVuZ3RoID0gTWF0aC5mbG9vcihhdWRpb19zYW1wbGVfY291bnQgLyBzY2FsZSk7CiAgICB2YXIgc2FtcGxlc19yZW1haW5pbmcgPSBhdWRpb19zYW1wbGVfY291bnQgLSBkYXRhX2xlbmd0aCAqIHNjYWxlOwoKICAgIGlmIChzYW1wbGVzX3JlbWFpbmluZyA+IDApIHsKICAgICAgZGF0YV9sZW5ndGgrKzsKICAgIH0KCiAgICByZXR1cm4gZGF0YV9sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBnZW5lcmF0ZVdhdmVmb3JtRGF0YShvcHRpb25zKSB7CiAgICB2YXIgc2NhbGUgPSBvcHRpb25zLnNjYWxlOwogICAgdmFyIGFtcGxpdHVkZV9zY2FsZSA9IG9wdGlvbnMuYW1wbGl0dWRlX3NjYWxlOwogICAgdmFyIHNwbGl0X2NoYW5uZWxzID0gb3B0aW9ucy5zcGxpdF9jaGFubmVsczsKICAgIHZhciBsZW5ndGggPSBvcHRpb25zLmxlbmd0aDsKICAgIHZhciBzYW1wbGVfcmF0ZSA9IG9wdGlvbnMuc2FtcGxlX3JhdGU7CiAgICB2YXIgY2hhbm5lbHMgPSBvcHRpb25zLmNoYW5uZWxzLm1hcChmdW5jdGlvbiAoY2hhbm5lbCkgewogICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShjaGFubmVsKTsKICAgIH0pOwogICAgdmFyIG91dHB1dF9jaGFubmVscyA9IHNwbGl0X2NoYW5uZWxzID8gY2hhbm5lbHMubGVuZ3RoIDogMTsKICAgIHZhciB2ZXJzaW9uID0gb3V0cHV0X2NoYW5uZWxzID09PSAxID8gMSA6IDI7CiAgICB2YXIgaGVhZGVyX3NpemUgPSB2ZXJzaW9uID09PSAxID8gMjAgOiAyNDsKICAgIHZhciBkYXRhX2xlbmd0aCA9IGNhbGN1bGF0ZVdhdmVmb3JtRGF0YUxlbmd0aChsZW5ndGgsIHNjYWxlKTsKICAgIHZhciB0b3RhbF9zaXplID0gaGVhZGVyX3NpemUgKyBkYXRhX2xlbmd0aCAqIDIgKiBvdXRwdXRfY2hhbm5lbHM7CiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRvdGFsX3NpemUpOwogICAgdmFyIGRhdGFfdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpOwogICAgdmFyIHNjYWxlX2NvdW50ZXIgPSAwOwogICAgdmFyIG9mZnNldCA9IGhlYWRlcl9zaXplOwogICAgdmFyIGNoYW5uZWwsIGk7CiAgICB2YXIgbWluX3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CiAgICB2YXIgbWF4X3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CgogICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICBtYXhfdmFsdWVbY2hhbm5lbF0gPSAtSW5maW5pdHk7CiAgICB9CgogICAgZGF0YV92aWV3LnNldEludDMyKDAsIHZlcnNpb24sIHRydWUpOyAvLyBWZXJzaW9uCgogICAgZGF0YV92aWV3LnNldFVpbnQzMig0LCAxLCB0cnVlKTsgLy8gSXMgOCBiaXQ/CgogICAgZGF0YV92aWV3LnNldEludDMyKDgsIHNhbXBsZV9yYXRlLCB0cnVlKTsgLy8gU2FtcGxlIHJhdGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTIsIHNjYWxlLCB0cnVlKTsgLy8gU2NhbGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTYsIGRhdGFfbGVuZ3RoLCB0cnVlKTsgLy8gTGVuZ3RoCgogICAgaWYgKHZlcnNpb24gPT09IDIpIHsKICAgICAgZGF0YV92aWV3LnNldEludDMyKDIwLCBvdXRwdXRfY2hhbm5lbHMsIHRydWUpOwogICAgfQoKICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgc2FtcGxlID0gMDsKCiAgICAgIGlmIChvdXRwdXRfY2hhbm5lbHMgPT09IDEpIHsKICAgICAgICBmb3IgKGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgY2hhbm5lbHMubGVuZ3RoOyArK2NoYW5uZWwpIHsKICAgICAgICAgIHNhbXBsZSArPSBjaGFubmVsc1tjaGFubmVsXVtpXTsKICAgICAgICB9CgogICAgICAgIHNhbXBsZSA9IE1hdGguZmxvb3IoSU5UOF9NQVggKiBzYW1wbGUgKiBhbXBsaXR1ZGVfc2NhbGUgLyBjaGFubmVscy5sZW5ndGgpOwoKICAgICAgICBpZiAoc2FtcGxlIDwgbWluX3ZhbHVlWzBdKSB7CiAgICAgICAgICBtaW5fdmFsdWVbMF0gPSBzYW1wbGU7CgogICAgICAgICAgaWYgKG1pbl92YWx1ZVswXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgIG1pbl92YWx1ZVswXSA9IElOVDhfTUlOOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHNhbXBsZSA+IG1heF92YWx1ZVswXSkgewogICAgICAgICAgbWF4X3ZhbHVlWzBdID0gc2FtcGxlOwoKICAgICAgICAgIGlmIChtYXhfdmFsdWVbMF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICBtYXhfdmFsdWVbMF0gPSBJTlQ4X01BWDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgKytjaGFubmVsKSB7CiAgICAgICAgICBzYW1wbGUgPSBNYXRoLmZsb29yKElOVDhfTUFYICogY2hhbm5lbHNbY2hhbm5lbF1baV0gKiBhbXBsaXR1ZGVfc2NhbGUpOwoKICAgICAgICAgIGlmIChzYW1wbGUgPCBtaW5fdmFsdWVbY2hhbm5lbF0pIHsKICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gc2FtcGxlOwoKICAgICAgICAgICAgaWYgKG1pbl92YWx1ZVtjaGFubmVsXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gSU5UOF9NSU47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2FtcGxlID4gbWF4X3ZhbHVlW2NoYW5uZWxdKSB7CiAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IHNhbXBsZTsKCiAgICAgICAgICAgIGlmIChtYXhfdmFsdWVbY2hhbm5lbF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IElOVDhfTUFYOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoKytzY2FsZV9jb3VudGVyID09PSBzY2FsZSkgewogICAgICAgIGZvciAoY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBvdXRwdXRfY2hhbm5lbHM7IGNoYW5uZWwrKykgewogICAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgICBkYXRhX3ZpZXcuc2V0SW50OChvZmZzZXQrKywgbWF4X3ZhbHVlW2NoYW5uZWxdKTsKICAgICAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICAgICAgbWF4X3ZhbHVlW2NoYW5uZWxdID0gLUluZmluaXR5OwogICAgICAgIH0KCiAgICAgICAgc2NhbGVfY291bnRlciA9IDA7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc2NhbGVfY291bnRlciA+IDApIHsKICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1heF92YWx1ZVtjaGFubmVsXSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnVmZmVyOwogIH0KCiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlKGV2dCkgewogICAgdmFyIGJ1ZmZlciA9IGdlbmVyYXRlV2F2ZWZvcm1EYXRhKGV2dC5kYXRhKTsgLy8gVHJhbnNmZXIgYnVmZmVyIHRvIHRoZSBjYWxsaW5nIHRocmVhZAoKICAgIHRoaXMucG9zdE1lc3NhZ2UoYnVmZmVyLCBbYnVmZmVyXSk7CiAgICB0aGlzLmNsb3NlKCk7CiAgfTsKCn0pKCk7Cgo=",null,!1);function tt(t){if(lf(t)&&(t=cf(t)),hf(t)){this._data=new DataView(t),this._offset=this._version()===2?24:20,this._channels=[];for(var e=0;e<this.channels;e++)this._channels[e]=new di(this,e)}else throw new TypeError("WaveformData.create(): Unknown data format")}var Un={scale:512,amplitude_scale:1,split_channels:!1,disable_worker:!1};function gf(t){var e={scale:t.scale||Un.scale,amplitude_scale:t.amplitude_scale||Un.amplitude_scale,split_channels:t.split_channels||Un.split_channels,disable_worker:t.disable_worker||Un.disable_worker};return e}function _f(t){for(var e=[],i=0;i<t.numberOfChannels;++i)e.push(t.getChannelData(i).buffer);return e}function Ml(t,e,i){var n=_f(t);if(e.disable_worker){var r=of({scale:e.scale,amplitude_scale:e.amplitude_scale,split_channels:e.split_channels,length:t.length,sample_rate:t.sampleRate,channels:n});i(null,new tt(r),t)}else{var s=new pf;s.onmessage=function(a){i(null,new tt(a.data),t)},s.postMessage({scale:e.scale,amplitude_scale:e.amplitude_scale,split_channels:e.split_channels,length:t.length,sample_rate:t.sampleRate,channels:n},n)}}function mf(t,e,i,n){function r(s){s||(s=new DOMException("EncodingError")),n(s)}t.decodeAudioData(e,function(s){Ml(s,i,n)},r)}tt.create=function(e){return new tt(e)};tt.createFromAudio=function(t,e){var i=gf(t);if(t.audio_context&&t.array_buffer)return mf(t.audio_context,t.array_buffer,i,e);if(t.audio_buffer)return Ml(t.audio_buffer,i,e);throw new TypeError("WaveformData.createFromAudio(): Pass either an AudioContext and ArrayBuffer, or an AudioBuffer object")};tt.prototype={resample:function(e){if(e.scale=typeof e.scale=="number"?e.scale:null,e.width=typeof e.width=="number"?e.width:null,e.width!=null&&e.width<=0)throw new RangeError("WaveformData.resample(): width should be a positive integer value");if(e.scale!=null&&e.scale<=0)throw new RangeError("WaveformData.resample(): scale should be a positive integer value");if(!e.scale&&!e.width)throw new Error("WaveformData.resample(): Missing scale or width option");var i=e.scale||Math.floor(this.duration*this.sample_rate/e.width),n=this.scale,r=this.length,s=r*this.scale,a=Math.ceil(s/i),o=24,l=this.bits===8?1:2,h=o+a*2*this.channels*l,c=new ArrayBuffer(h),d=new DataView(c);d.setInt32(0,2,!0),d.setUint32(4,this.bits===8,!0),d.setInt32(8,this.sample_rate,!0),d.setInt32(12,i,!0),d.setInt32(16,a,!0),d.setInt32(20,this.channels,!0);var f=new tt(c),y=0,C=0,I=this.channels,_=new Array(I),M=new Array(I),x;for(x=0;x<I;++x)r>0?(_[x]=this.channel(x).min_sample(y),M[x]=this.channel(x).max_sample(y)):(_[x]=0,M[x]=0);var F=this.bits===8?-128:-32768,B=this.bits===8?127:32767;if(i<n)throw new Error("WaveformData.resample(): Zoom level "+i+" too low, minimum: "+n);var K,re,ge,ee,ae;function _e(xe){return Math.floor(xe*i)}for(;y<r;){for(;Math.floor(_e(C)/n)===y;){if(C>0)for(x=0;x<I;++x)f.channel(x).set_min_sample(C-1,_[x]),f.channel(x).set_max_sample(C-1,M[x]);if(ae=y,C++,K=_e(C),re=_e(C-1),K!==re)for(x=0;x<I;++x)_[x]=B,M[x]=F}for(K=_e(C),ge=Math.floor(K/n),ge>r&&(ge=r);y<ge;){for(x=0;x<I;++x)ee=this.channel(x).min_sample(y),ee<_[x]&&(_[x]=ee),ee=this.channel(x).max_sample(y),ee>M[x]&&(M[x]=ee);y++}}if(y!==ae)for(x=0;x<I;++x)f.channel(x).set_min_sample(C-1,_[x]),f.channel(x).set_max_sample(C-1,M[x]);return f},concat:function(){var e=this,i=Array.prototype.slice.call(arguments);i.forEach(function(r){if(e.channels!==r.channels||e.sample_rate!==r.sample_rate||e.bits!==r.bits||e.scale!==r.scale)throw new Error("WaveformData.concat(): Waveforms are incompatible")});var n=this._concatBuffers.apply(this,i);return tt.create(n)},_concatBuffers:function(){var e=Array.prototype.slice.call(arguments),i=this._offset,n=i,r=0,s=[this].concat(e).map(function(C){return C._data.buffer}),a,o;for(a=0;a<s.length;a++){o=s[a];var l=new DataView(o).getInt32(16,!0);n+=o.byteLength-i,r+=l}var h=new ArrayBuffer(n),c=new DataView(s[0]),d=new DataView(h);for(a=0;a<i;a++)d.setUint8(a,c.getUint8(a));d.setInt32(16,r,!0);var f=0,y=new Uint8Array(h,i);for(a=0;a<s.length;a++)o=s[a],y.set(new Uint8Array(o,i),f),f+=o.byteLength-i;return h},_offsetValues:function(e,i,n){var r=[],s=this.channels;n+=e*s*2;for(var a=0;a<i;a++)r.push(this._at(a*s*2+n));return r},_version:function(){return this._data.getInt32(0,!0)},get length(){return this._data.getUint32(16,!0)},get bits(){var t=Boolean(this._data.getUint32(4,!0));return t?8:16},get duration(){return this.length*this.scale/this.sample_rate},get pixels_per_second(){return this.sample_rate/this.scale},get seconds_per_pixel(){return this.scale/this.sample_rate},get channels(){return this._version()===2?this._data.getInt32(20,!0):1},channel:function(e){if(e>=0&&e<this._channels.length)return this._channels[e];throw new RangeError("Invalid channel: "+e)},get sample_rate(){return this._data.getInt32(8,!0)},get scale(){return this._data.getInt32(12,!0)},_at:function(e){return this.bits===8?this._data.getInt8(this._offset+e):this._data.getInt16(this._offset+e*2,!0)},_set_at:function(e,i){return this.bits===8?this._data.setInt8(this._offset+e,i):this._data.setInt16(this._offset+e*2,i,!0)},at_time:function(e){return Math.floor(e*this.sample_rate/this.scale)},time:function(e){return e*this.scale/this.sample_rate},toJSON:function(){for(var e={version:2,channels:this.channels,sample_rate:this.sample_rate,samples_per_pixel:this.scale,bits:this.bits,length:this.length,data:[]},i=0;i<this.length;i++)for(var n=0;n<this.channels;n++)e.data.push(this.channel(n).min_sample(i)),e.data.push(this.channel(n).max_sample(i));return e},toArrayBuffer:function(){return this._data.buffer}};var Ll={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function r(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function s(l,h,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var y=new r(c,d||l,f),C=i?i+h:h;return l._events[C]?l._events[C].fn?l._events[C]=[l._events[C],y]:l._events[C].push(y):(l._events[C]=y,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new n:delete l._events[h]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],c,d;if(this._eventsCount===0)return h;for(d in c=this._events)e.call(c,d)&&h.push(i?d.slice(1):d);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},o.prototype.listeners=function(h){var c=i?i+h:h,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,y=d.length,C=new Array(y);f<y;f++)C[f]=d[f].fn;return C},o.prototype.listenerCount=function(h){var c=i?i+h:h,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(h,c,d,f,y,C){var I=i?i+h:h;if(!this._events[I])return!1;var _=this._events[I],M=arguments.length,x,F;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),M){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,c),!0;case 3:return _.fn.call(_.context,c,d),!0;case 4:return _.fn.call(_.context,c,d,f),!0;case 5:return _.fn.call(_.context,c,d,f,y),!0;case 6:return _.fn.call(_.context,c,d,f,y,C),!0}for(F=1,x=new Array(M-1);F<M;F++)x[F-1]=arguments[F];_.fn.apply(_.context,x)}else{var B=_.length,K;for(F=0;F<B;F++)switch(_[F].once&&this.removeListener(h,_[F].fn,void 0,!0),M){case 1:_[F].fn.call(_[F].context);break;case 2:_[F].fn.call(_[F].context,c);break;case 3:_[F].fn.call(_[F].context,c,d);break;case 4:_[F].fn.call(_[F].context,c,d,f);break;default:if(!x)for(K=1,x=new Array(M-1);K<M;K++)x[K-1]=arguments[K];_[F].fn.apply(_[F].context,x)}}return!0},o.prototype.on=function(h,c,d){return s(this,h,c,d,!1)},o.prototype.once=function(h,c,d){return s(this,h,c,d,!0)},o.prototype.removeListener=function(h,c,d,f){var y=i?i+h:h;if(!this._events[y])return this;if(!c)return a(this,y),this;var C=this._events[y];if(C.fn)C.fn===c&&(!f||C.once)&&(!d||C.context===d)&&a(this,y);else{for(var I=0,_=[],M=C.length;I<M;I++)(C[I].fn!==c||f&&!C[I].once||d&&C[I].context!==d)&&_.push(C[I]);_.length?this._events[y]=_.length===1?_[0]:_:a(this,y)}return this},o.prototype.removeAllListeners=function(h){var c;return h?(c=i?i+h:h,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o})(Ll);var Ol=Ll.exports;function ln(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ln=function(e){return typeof e}:ln=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(t)}function Ce(t,e,i){this.time=t,this.type=e,this.id=i}Ce.POINT=0;Ce.SEGMENT_START=1;Ce.SEGMENT_END=2;Ce.sorter=function(t,e){return t.time-e.time};function Va(t,e){for(t=t.toString();t.length<e;)t="0"+t;return t}function Ns(t,e){var i=[],n=Math.floor(t%1*Math.pow(10,e)),r=Math.floor(t),s=Math.floor(r/60),a=Math.floor(s/60);a>0&&i.push(a),i.push(s%60),i.push(r%60);for(var o=0;o<i.length;o++)i[o]=Va(i[o],2);return i=i.join(":"),e>0&&(i+="."+Va(n,e)),i}function vf(t,e){if(e===0)return 0;var i=1;t<0&&(i=-1,t=-t);var n=Math.ceil(t);return i*((n+e-1)/e|0)*e}function ui(t,e,i){return t<e?e:t>i?i:t}function oe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Pr(t,e){for(var i in e)oe(e,i)&&(t[i]=e[i]);return t}function yf(t){if(t.length===0)return!0;for(var e=t[0],i=1;i<t.length;i++){if(e>=t[i])return!1;e=t[i]}return!0}function lr(t){return typeof t=="number"}function Rl(t){return!(typeof t!="number"||t!==t||t===1/0||t===-1/0)}function Bt(t){return typeof t=="number"&&Number.isFinite(t)}function Di(t){return t!==null&&ln(t)==="object"&&!Array.isArray(t)}function ai(t){return typeof t=="string"}function bf(t){return Object.prototype.toString.call(t).includes("ArrayBuffer")}function vt(t){return t==null}function wf(t){return typeof t=="function"}function Dl(t){return t===!0||t===!1}function Xa(t){return t instanceof HTMLElement}function Cf(t){return Array.isArray(t)}function Ir(t){return Di(t)&&oe(t,"linearGradientStart")&&oe(t,"linearGradientEnd")&&oe(t,"linearGradientColorStops")&&lr(t.linearGradientStart)&&lr(t.linearGradientEnd)&&Cf(t.linearGradientColorStops)&&t.linearGradientColorStops.length===2}var Sf=/HeadlessChrome/.test(navigator.userAgent);function xf(){return Sf||navigator.webdriver?!1:(typeof document>"u"?"undefined":ln(document))==="object"&&"visibilityState"in document&&document.visibilityState==="visible"}var Nl=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Tf=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,zt={forward:{},reverse:{}},Fs=0,Mr=1,Lr=2;zt.forward[Ce.POINT]=Fs;zt.forward[Ce.SEGMENT_START]=Mr;zt.forward[Ce.SEGMENT_END]=Lr;zt.reverse[Ce.POINT]=Fs;zt.reverse[Ce.SEGMENT_START]=Lr;zt.reverse[Ce.SEGMENT_END]=Mr;var Or={};Or[Fs]="points.enter";Or[Mr]="segments.enter";Or[Lr]="segments.exit";function kf(t,e){switch(e.type){case Ce.POINT:return t.points.getPoint(e.id);case Ce.SEGMENT_START:case Ce.SEGMENT_END:return t.segments.getSegment(e.id);default:throw new Error("getPointOrSegment: id not found?")}}function lt(t){this._cues=[],this._peaks=t,this._previousTime=-1,this._updateCues=this._updateCues.bind(this),this._onPlaying=this.onPlaying.bind(this),this._onSeeked=this.onSeeked.bind(this),this._onTimeUpdate=this.onTimeUpdate.bind(this),this._onAnimationFrame=this.onAnimationFrame.bind(this),this._rAFHandle=null,this._activeSegments={},this._attachEventHandlers()}lt.prototype._updateCues=function(){var t=this,e=t._peaks.points.getPoints(),i=t._peaks.segments.getSegments();t._cues.length=0,e.forEach(function(r){t._cues.push(new Ce(r.time,Ce.POINT,r.id))}),i.forEach(function(r){t._cues.push(new Ce(r.startTime,Ce.SEGMENT_START,r.id)),t._cues.push(new Ce(r.endTime,Ce.SEGMENT_END,r.id))}),t._cues.sort(Ce.sorter);var n=t._peaks.player.getCurrentTime();t._updateActiveSegments(n)};lt.prototype._onUpdate=function(t,e){var i=t>e,n,r,s;i?(n=0,r=this._cues.length,s=1):(n=this._cues.length-1,r=-1,s=-1);for(var a=n;i?a<r:a>r;a+=s){var o=this._cues[a];if(i?o.time>e:o.time<e){if(i?o.time>t:o.time<t)break;var l=kf(this._peaks,o),h=i?zt.forward[o.type]:zt.reverse[o.type];h===Mr?this._activeSegments[l.id]=l:h===Lr&&delete this._activeSegments[l.id],this._peaks.emit(Or[h],l)}}};lt.prototype.onTimeUpdate=function(t){xf()||(this._peaks.player.isPlaying()&&!this._peaks.player.isSeeking()&&this._onUpdate(t,this._previousTime),this._previousTime=t)};lt.prototype.onAnimationFrame=function(){var t=this._peaks.player.getCurrentTime();this._peaks.player.isSeeking()||this._onUpdate(t,this._previousTime),this._previousTime=t,this._peaks.player.isPlaying()&&(this._rAFHandle=Nl(this._onAnimationFrame))};lt.prototype.onPlaying=function(){this._previousTime=this._peaks.player.getCurrentTime(),this._rAFHandle=Nl(this._onAnimationFrame)};lt.prototype.onSeeked=function(t){this._previousTime=t,this._updateActiveSegments(t)};function Ef(t){return function(i){return i.id===t}}lt.prototype._updateActiveSegments=function(t){var e=this,i=e._peaks.segments.getSegmentsAtTime(t);for(var n in e._activeSegments)if(oe(e._activeSegments,n)){var r=i.find(Ef(n));r||(e._peaks.emit("segments.exit",e._activeSegments[n]),delete e._activeSegments[n])}i.forEach(function(s){s.id in e._activeSegments||(e._activeSegments[s.id]=s,e._peaks.emit("segments.enter",s))})};var hr=Array("points.update","points.dragmove","points.add","points.remove","points.remove_all","segments.update","segments.dragged","segments.add","segments.remove","segments.remove_all");lt.prototype._attachEventHandlers=function(){this._peaks.on("player.timeupdate",this._onTimeUpdate),this._peaks.on("player.playing",this._onPlaying),this._peaks.on("player.seeked",this._onSeeked);for(var t=0;t<hr.length;t++)this._peaks.on(hr[t],this._updateCues);this._updateCues()};lt.prototype._detachEventHandlers=function(){this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.seeked",this._onSeeked);for(var t=0;t<hr.length;t++)this._peaks.off(hr[t],this._updateCues)};lt.prototype.destroy=function(){this._rAFHandle&&(Tf(this._rAFHandle),this._rAFHandle=null),this._detachEventHandlers(),this._previousTime=-1};var Af=["peaks","id","time","labelText","color","editable"];function Fl(t,e){if(!Bt(t.time))throw new TypeError("peaks.points."+e+": time should be a numeric value");if(t.time<0)throw new RangeError("peaks.points."+e+": time should not be negative");if(vt(t.labelText))t.labelText="";else if(!ai(t.labelText))throw new TypeError("peaks.points."+e+": labelText must be a string");if(!Dl(t.editable))throw new TypeError("peaks.points."+e+": editable must be true or false");if(t.color&&!ai(t.color)&&!Ir(t.color))throw new TypeError("peaks.points."+e+": color must be a string or a valid linear gradient object")}function Bi(t){Fl(t,"add()"),this._peaks=t.peaks,this._id=t.id,this._time=t.time,this._labelText=t.labelText,this._color=t.color,this._editable=t.editable,this._setUserData(t)}Bi.prototype._setUserData=function(t){for(var e in t)oe(t,e)&&Af.indexOf(e)===-1&&(this[e]=t[e])};Object.defineProperties(Bi.prototype,{id:{enumerable:!0,get:function(){return this._id}},time:{enumerable:!0,get:function(){return this._time}},labelText:{get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}});Bi.prototype.update=function(t){var e={time:this.time,labelText:this.labelText,color:this.color,editable:this.editable};Pr(e,t),Fl(e,"update()"),this._time=e.time,this._labelText=e.labelText,this._color=e.color,this._editable=e.editable,this._setUserData(t),this._peaks.emit("points.update",this)};Bi.prototype.isVisible=function(t,e){return this.time>=t&&this.time<e};Bi.prototype._setTime=function(t){this._time=t};function Be(t){this._peaks=t,this._points=[],this._pointsById={},this._pointIdCounter=0}Be.prototype._getNextPointId=function(){return"peaks.point."+this._pointIdCounter++};Be.prototype._addPoint=function(t){this._points.push(t),this._pointsById[t.id]=t};Be.prototype._createPoint=function(t){var e={peaks:this._peaks};return Pr(e,t),vt(e.id)&&(e.id=this._getNextPointId()),vt(e.labelText)&&(e.labelText=""),vt(e.editable)&&(e.editable=!1),new Bi(e)};Be.prototype.getPoints=function(){return this._points};Be.prototype.getPoint=function(t){return this._pointsById[t]||null};Be.prototype.find=function(t,e){return this._points.filter(function(i){return i.isVisible(t,e)})};Be.prototype.add=function(){var t=this,e=Array.isArray(arguments[0]),i=e?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(n){var r=t._createPoint(n);if(oe(t._pointsById,r.id))throw new Error("peaks.points.add(): duplicate id");return r}),i.forEach(function(n){t._addPoint(n)}),this._peaks.emit("points.add",i),e?i:i[0]};Be.prototype._findPoint=function(t){for(var e=[],i=0,n=this._points.length;i<n;i++)t(this._points[i])&&e.push(i);return e};Be.prototype._removeIndexes=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i]-e.length,r=this._points.splice(n,1)[0];delete this._pointsById[r.id],e.push(r)}return e};Be.prototype._removePoints=function(t){var e=this._findPoint(t),i=this._removeIndexes(e);return this._peaks.emit("points.remove",i),i};Be.prototype.remove=function(t){return this._removePoints(function(e){return e===t})};Be.prototype.removeById=function(t){return this._removePoints(function(e){return e.id===t})};Be.prototype.removeByTime=function(t){return this._removePoints(function(e){return e.time===t})};Be.prototype.removeAll=function(){this._points=[],this._pointsById={},this._peaks.emit("points.remove_all")};var Pf=["peaks","id","startTime","endTime","labelText","color","editable"];function Hl(t,e){if(!Bt(t.startTime))throw new TypeError("peaks.segments."+e+": startTime should be a valid number");if(!Bt(t.endTime))throw new TypeError("peaks.segments."+e+": endTime should be a valid number");if(t.startTime<0)throw new RangeError("peaks.segments."+e+": startTime should not be negative");if(t.endTime<0)throw new RangeError("peaks.segments."+e+": endTime should not be negative");if(t.endTime<t.startTime)throw new RangeError("peaks.segments."+e+": endTime should not be less than startTime");if(vt(t.labelText))t.labelText="";else if(!ai(t.labelText))throw new TypeError("peaks.segments."+e+": labelText must be a string");if(!Dl(t.editable))throw new TypeError("peaks.segments."+e+": editable must be true or false");if(t.color&&!ai(t.color)&&!Ir(t.color))throw new TypeError("peaks.segments."+e+": color must be a string or a valid linear gradient object")}function fi(t){Hl(t,"add()"),this._peaks=t.peaks,this._id=t.id,this._startTime=t.startTime,this._endTime=t.endTime,this._labelText=t.labelText,this._color=t.color,this._editable=t.editable,this._setUserData(t)}fi.prototype._setUserData=function(t){for(var e in t)oe(t,e)&&Pf.indexOf(e)===-1&&(this[e]=t[e])};Object.defineProperties(fi.prototype,{id:{enumerable:!0,get:function(){return this._id}},startTime:{enumerable:!0,get:function(){return this._startTime}},endTime:{enumerable:!0,get:function(){return this._endTime}},labelText:{enumerable:!0,get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}});fi.prototype.update=function(t){var e={startTime:this.startTime,endTime:this.endTime,labelText:this.labelText,color:this.color,editable:this.editable};Pr(e,t),Hl(e,"update()"),this._startTime=e.startTime,this._endTime=e.endTime,this._labelText=e.labelText,this._color=e.color,this._editable=e.editable,this._setUserData(t),this._peaks.emit("segments.update",this)};fi.prototype.isVisible=function(t,e){return this.startTime<e&&t<this.endTime};fi.prototype._setStartTime=function(t){this._startTime=t};fi.prototype._setEndTime=function(t){this._endTime=t};function Ie(t){this._peaks=t,this._segments=[],this._segmentsById={},this._segmentIdCounter=0,this._colorIndex=0}Ie.prototype._getNextSegmentId=function(){return"peaks.segment."+this._segmentIdCounter++};var Ya=["#001f3f","#0074d9","#7fdbff","#39cccc","#ffdc00","#ff851b","#ff4136","#85144b","#f012be","#b10dc9"];Ie.prototype._getSegmentColor=function(){return this._peaks.options.randomizeSegmentColor?(++this._colorIndex===Ya.length&&(this._colorIndex=0),Ya[this._colorIndex]):this._peaks.options.segmentColor};Ie.prototype._addSegment=function(t){this._segments.push(t),this._segmentsById[t.id]=t};Ie.prototype._createSegment=function(t){if(!Di(t))throw new TypeError("peaks.segments.add(): expected a Segment object parameter");var e={peaks:this._peaks};return Pr(e,t),vt(e.id)&&(e.id=this._getNextSegmentId()),vt(e.color)&&(e.color=this._getSegmentColor()),vt(e.labelText)&&(e.labelText=""),vt(e.editable)&&(e.editable=!1),new fi(e)};Ie.prototype.getSegments=function(){return this._segments};Ie.prototype.getSegment=function(t){return this._segmentsById[t]||null};Ie.prototype.getSegmentsAtTime=function(t){return this._segments.filter(function(e){return t>=e.startTime&&t<e.endTime})};Ie.prototype.find=function(t,e){return this._segments.filter(function(i){return i.isVisible(t,e)})};Ie.prototype.add=function(){var t=this,e=Array.isArray(arguments[0]),i=e?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(n){var r=t._createSegment(n);if(oe(t._segmentsById,r.id))throw new Error("peaks.segments.add(): duplicate id");return r}),i.forEach(function(n){t._addSegment(n)}),this._peaks.emit("segments.add",i),e?i:i[0]};Ie.prototype._findSegment=function(t){for(var e=[],i=0,n=this._segments.length;i<n;i++)t(this._segments[i])&&e.push(i);return e};Ie.prototype._removeIndexes=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i]-e.length,r=this._segments.splice(n,1)[0];delete this._segmentsById[r.id],e.push(r)}return e};Ie.prototype._removeSegments=function(t){var e=this._findSegment(t),i=this._removeIndexes(e);return this._peaks.emit("segments.remove",i),i};Ie.prototype.remove=function(t){return this._removeSegments(function(e){return e===t})};Ie.prototype.removeById=function(t){return this._removeSegments(function(e){return e.id===t})};Ie.prototype.removeByTime=function(t,e){e=typeof e=="number"?e:0;var i;return e>0?i=function(r){return r.startTime===t&&r.endTime===e}:i=function(r){return r.startTime===t},this._removeSegments(i)};Ie.prototype.removeAll=function(){this._segments=[],this._segmentsById={},this._peaks.emit("segments.remove_all")};var If=["OBJECT","TEXTAREA","INPUT","SELECT","OPTION"],Wl=32,Gl=9,Bl=37,zl=39,Mf=[Wl,Gl,Bl,zl];function Hs(t){this.eventEmitter=t,this._handleKeyEvent=this._handleKeyEvent.bind(this),document.addEventListener("keydown",this._handleKeyEvent),document.addEventListener("keypress",this._handleKeyEvent),document.addEventListener("keyup",this._handleKeyEvent)}Hs.prototype._handleKeyEvent=function(e){if(If.indexOf(e.target.nodeName)===-1){if(Mf.indexOf(e.type)>-1&&e.preventDefault(),e.type==="keydown"||e.type==="keypress")switch(e.keyCode){case Wl:this.eventEmitter.emit("keyboard.space");break;case Gl:this.eventEmitter.emit("keyboard.tab");break}else if(e.type==="keyup")switch(e.keyCode){case Bl:e.shiftKey?this.eventEmitter.emit("keyboard.shift_left"):this.eventEmitter.emit("keyboard.left");break;case zl:e.shiftKey?this.eventEmitter.emit("keyboard.shift_right"):this.eventEmitter.emit("keyboard.right");break}}};Hs.prototype.destroy=function(){document.removeEventListener("keydown",this._handleKeyEvent),document.removeEventListener("keypress",this._handleKeyEvent),document.removeEventListener("keyup",this._handleKeyEvent)};function it(t){this._mediaElement=t}it.prototype._addMediaListener=function(t,e){this._listeners.push({type:t,callback:e}),this._mediaElement.addEventListener(t,e)};it.prototype.init=function(t){var e=this;return e._eventEmitter=t,e._listeners=[],e._duration=e.getDuration(),e._addMediaListener("timeupdate",function(){e._eventEmitter.emit("player.timeupdate",e.getCurrentTime())}),e._addMediaListener("playing",function(){e._eventEmitter.emit("player.playing",e.getCurrentTime())}),e._addMediaListener("pause",function(){e._eventEmitter.emit("player.pause",e.getCurrentTime())}),e._addMediaListener("ended",function(){e._eventEmitter.emit("player.ended")}),e._addMediaListener("seeked",function(){e._eventEmitter.emit("player.seeked",e.getCurrentTime())}),e._addMediaListener("canplay",function(){e._eventEmitter.emit("player.canplay")}),e._addMediaListener("error",function(i){e._eventEmitter.emit("player.error",i.target.error)}),e._interval=null,new Promise(function(i,n){function r(s){e._mediaElement.removeEventListener("loadedmetadata",r),e._mediaElement.removeEventListener("error",r),s.type==="loadedmetadata"?i():n(s.target.error)}e._mediaElement.readyState===HTMLMediaElement.HAVE_NOTHING?(e._mediaElement.addEventListener("loadedmetadata",r),e._mediaElement.addEventListener("error",r),e._mediaElement.load()):i()})};it.prototype.destroy=function(){for(var t=0;t<this._listeners.length;t++){var e=this._listeners[t];this._mediaElement.removeEventListener(e.type,e.callback)}this._listeners.length=0,this._mediaElement=null};it.prototype.play=function(){return this._mediaElement.play()};it.prototype.pause=function(){this._mediaElement.pause()};it.prototype.isPlaying=function(){return!this._mediaElement.paused};it.prototype.isSeeking=function(){return this._mediaElement.seeking};it.prototype.getCurrentTime=function(){return this._mediaElement.currentTime};it.prototype.getDuration=function(){return this._mediaElement.duration};it.prototype.seek=function(t){this._mediaElement.currentTime=t};function wn(t,e){this._eventEmitter=t,this._mediaElement=e,this._playerCanPlayHandler=this._playerCanPlayHandler.bind(this),this._playerErrorHandler=this._playerErrorHandler.bind(this)}wn.prototype.setSource=function(t,e){var i=this;return i._options=t,i._callback=e,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),new Promise(function(n,r){i._resolve=n,i._reject=r,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),i._mediaElement.setAttribute("src",t.mediaUrl)})};wn.prototype._reset=function(){this._eventEmitter.removeListener("player.canplay",this._playerCanPlayHandler),this._eventEmitter.removeListener("player.error",this._playerErrorHandler)};wn.prototype._playerCanPlayHandler=function(){this._reset(),this._resolve()};wn.prototype._playerErrorHandler=function(t){this._reset(),this._reject(t)};it.prototype.setSource=function(t){if(!t.mediaUrl)return Promise.reject(new Error("peaks.setSource(): options must contain a mediaUrl when using mediaElement"));var e=new wn(this._eventEmitter,this._mediaElement);return e.setSource(t)};function Lf(t){for(var e=[],i=t;i;)Object.getOwnPropertyNames(i).forEach(function(n){e.push(n)}),i=Object.getPrototypeOf(i);return e}function Of(t){var e=["init","destroy","play","pause","isPlaying","isSeeking","getCurrentTime","getDuration","seek"],i=Lf(t);e.forEach(function(n){if(!i.includes(n))throw new TypeError("Peaks.init(): Player method "+n+" is undefined");if(typeof t[n]!="function")throw new TypeError("Peaks.init(): Player method "+n+" is not a function")})}function qe(t,e){this._peaks=t,this._playingSegment=!1,this._segment=null,this._loop=!1,this._playSegmentTimerCallback=this._playSegmentTimerCallback.bind(this),Of(e),this._adapter=e}qe.prototype.init=function(){return this._adapter.init(this._peaks)};qe.prototype.destroy=function(){this._adapter.destroy()};qe.prototype.play=function(){return this._adapter.play()};qe.prototype.pause=function(){this._adapter.pause()};qe.prototype.isPlaying=function(){return this._adapter.isPlaying()};qe.prototype.isSeeking=function(){return this._adapter.isSeeking()};qe.prototype.getCurrentTime=function(){return this._adapter.getCurrentTime()};qe.prototype.getDuration=function(){return this._adapter.getDuration()};qe.prototype.seek=function(t){if(!Bt(t)){this._peaks._logger("peaks.player.seek(): parameter must be a valid time, in seconds");return}this._adapter.seek(t)};qe.prototype.playSegment=function(t,e){var i=this;return!t||!Bt(t.startTime)||!Bt(t.endTime)?Promise.reject(new Error("peaks.player.playSegment(): parameter must be a segment object")):(i._segment=t,i._loop=e,i.seek(t.startTime),i._peaks.once("player.playing",function(){i._playingSegment||(i._playingSegment=!0,window.requestAnimationFrame(i._playSegmentTimerCallback))}),i.play())};qe.prototype._playSegmentTimerCallback=function(){if(this.isPlaying()){if(this.getCurrentTime()>=this._segment.endTime)if(this._loop)this.seek(this._segment.startTime);else{this.pause(),this._peaks.emit("player.ended"),this._playingSegment=!1;return}}else{this._playingSegment=!1;return}window.requestAnimationFrame(this._playSegmentTimerCallback)};qe.prototype._setSource=function(t){return this._adapter.setSource(t)};function Cn(t){this._options=t}Cn.prototype.init=function(t){var e=10,i=20,n=-(e/2)+.5;this._options.view==="zoomview"&&(this._label=new pe({x:2,y:0,text:this._options.point.labelText,textAlign:"left",fontFamily:this._options.fontFamily||"sans-serif",fontSize:this._options.fontSize||10,fontStyle:this._options.fontStyle||"normal",fill:"#000"})),this._options.draggable&&(this._handle=new Gi({x:n,y:0,width:e,height:i,fill:this._options.color})),this._line=new wt({x:0,y:0,stroke:this._options.color,strokeWidth:1}),this._handle&&(this._time=new pe({x:-24,y:0,text:this._options.layer.formatTime(this._options.point.time),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._time.hide()),this._handle&&t.add(this._handle),t.add(this._line),this._label&&t.add(this._label),this._time&&t.add(this._time),this.fitToView(),this.bindEventHandlers(t)};Cn.prototype.bindEventHandlers=function(t){var e=this;e._handle&&(e._handle.on("mouseover touchstart",function(){e._time.setX(-24-e._time.getWidth()),e._time.show()}),e._handle.on("mouseout touchend",function(){e._time.hide()}),t.on("dragstart",function(){e._time.setX(-24-e._time.getWidth()),e._time.show()}),t.on("dragend",function(){e._time.hide()}))};Cn.prototype.fitToView=function(){var t=this._options.layer.getHeight();this._line.points([.5,0,.5,t]),this._label&&this._label.y(12),this._handle&&this._handle.y(t/2-10.5),this._time&&this._time.y(t/2-5)};Cn.prototype.timeUpdated=function(t){this._time&&this._time.setText(this._options.layer.formatTime(t))};function Sn(t){this._options=t}Sn.prototype.init=function(t){var e=10,i=20,n=-(e/2)+.5,r=this._options.startMarker?-24:24,s=this._options.startMarker?this._options.segment.startTime:this._options.segment.endTime;this._label=new pe({x:r,y:0,text:this._options.layer.formatTime(s),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._label.hide(),this._handle=new Gi({x:n,y:0,width:e,height:i,fill:this._options.color,stroke:this._options.color,strokeWidth:1}),this._line=new wt({x:0,y:0,stroke:this._options.color,strokeWidth:1}),t.add(this._label),t.add(this._line),t.add(this._handle),this.fitToView(),this.bindEventHandlers(t)};Sn.prototype.bindEventHandlers=function(t){var e=this,i=e._options.startMarker?-24:24;e._options.draggable&&(t.on("dragstart",function(){e._options.startMarker&&e._label.setX(i-e._label.getWidth()),e._label.show()}),t.on("dragend",function(){e._label.hide()})),e._handle.on("mouseover touchstart",function(){e._options.startMarker&&e._label.setX(i-e._label.getWidth()),e._label.show()}),e._handle.on("mouseout touchend",function(){e._label.hide()})};Sn.prototype.fitToView=function(){var t=this._options.layer.getHeight();this._label.y(t/2-5),this._handle.y(t/2-10.5),this._line.points([.5,0,.5,t])};Sn.prototype.timeUpdated=function(t){this._label.setText(this._options.layer.formatTime(t))};function Rf(t){return t.view==="zoomview"?new Sn(t):null}function Df(t){return new pe({x:12,y:12,text:t.segment.labelText,textAlign:"center",fontFamily:t.fontFamily||"sans-serif",fontSize:t.fontSize||12,fontStyle:t.fontStyle||"normal",fill:"#000"})}function Nf(t){return new Cn(t)}function Yt(t,e,i){this._view=t,this._offset=e,this._color=i,this._layer=new Ae.Layer({listening:!1}),this._highlightRect=null,this._startTime=null,this._endTime=null}Yt.prototype.addToStage=function(t){t.add(this._layer)};Yt.prototype.showHighlight=function(t,e){this._highlightRect||this._createHighlightRect(t,e),this._update(t,e)};Yt.prototype._update=function(t,e){this._startTime=t,this._endTime=e;var i=this._view.timeToPixels(t),n=this._view.timeToPixels(e);this._highlightRect.setAttrs({x:i,width:n-i})};Yt.prototype._createHighlightRect=function(t,e){this._startTime=t,this._endTime=e;var i=this._view.timeToPixels(t),n=this._view.timeToPixels(e);this._highlightRect=new Gi({x:i,y:0,width:n-i,stroke:this._color,strokeWidth:1,height:0,fill:this._color,opacity:.3,cornerRadius:2}),this.fitToView(),this._layer.add(this._highlightRect)};Yt.prototype.removeHighlight=function(){this._highlightRect&&(this._highlightRect.destroy(),this._highlightRect=null)};Yt.prototype.updateHighlight=function(){this._highlightRect&&this._update(this._startTime,this._endTime)};Yt.prototype.fitToView=function(){if(this._highlightRect){var t=this._view.getHeight(),e=ui(this._offset,0,Math.floor(t/2));this._highlightRect.setAttrs({y:e,height:t-e*2})}};function Ff(t){for(;t.parent!==null;){if(t.parent instanceof Ae.Layer)return t;t=t.parent}return null}function pi(t,e){this._stage=t,this._handlers=e,this._dragging=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseUp=this._mouseUp.bind(this),this._mouseMove=this._mouseMove.bind(this),this._stage.on("mousedown",this._mouseDown),this._stage.on("touchstart",this._mouseDown),this._lastMouseClientX=null}pi.prototype._mouseDown=function(t){if(!(t.type==="mousedown"&&t.evt.button!==0)){var e=Ff(t.target);if(!(e&&e.attrs.draggable)){if(this._lastMouseClientX=Math.floor(t.type==="touchstart"?t.evt.touches[0].clientX:t.evt.clientX),this._handlers.onMouseDown){var i=this._getMousePosX(this._lastMouseClientX);this._handlers.onMouseDown(i)}window.addEventListener("mousemove",this._mouseMove,!1),window.addEventListener("touchmove",this._mouseMove,!1),window.addEventListener("mouseup",this._mouseUp,!1),window.addEventListener("touchend",this._mouseUp,!1),window.addEventListener("blur",this._mouseUp,!1)}}};pi.prototype._mouseMove=function(t){var e=Math.floor(t.type==="touchmove"?t.changedTouches[0].clientX:t.clientX);if(e!==this._lastMouseClientX&&(this._lastMouseClientX=e,this._dragging=!0,this._handlers.onMouseMove)){var i=this._getMousePosX(e);this._handlers.onMouseMove(i)}};pi.prototype._mouseUp=function(t){var e;if(t.type==="touchend"?(e=Math.floor(t.changedTouches[0].clientX),t.cancelable&&t.preventDefault()):e=Math.floor(t.clientX),this._handlers.onMouseUp){var i=this._getMousePosX(e);this._handlers.onMouseUp(i)}window.removeEventListener("mousemove",this._mouseMove,!1),window.removeEventListener("touchmove",this._mouseMove,!1),window.removeEventListener("mouseup",this._mouseUp,!1),window.removeEventListener("touchend",this._mouseUp,!1),window.removeEventListener("blur",this._mouseUp,!1),this._dragging=!1};pi.prototype._getMousePosX=function(t){var e=this._stage.getContainer().getBoundingClientRect();return t-e.left};pi.prototype.isDragging=function(){return this._dragging};function Fe(t){this._player=t.player,this._view=t.view,this._playheadPixel=0,this._playheadLineAnimation=null,this._playheadVisible=!1,this._playheadColor=t.playheadColor,this._playheadTextColor=t.playheadTextColor,this._playheadFontFamily=t.playheadFontFamily,this._playheadFontSize=t.playheadFontSize,this._playheadFontStyle=t.playheadFontStyle,this._playheadLayer=new Ae.Layer,this._createPlayhead(this._playheadColor),t.showPlayheadTime&&this._createPlayheadText(this._playheadTextColor),this.fitToView(),this.zoomLevelChanged()}Fe.prototype.addToStage=function(t){t.add(this._playheadLayer)};Fe.prototype.zoomLevelChanged=function(){var t=this._view.timeToPixels(1),e;this._useAnimation=t>=5,this._useAnimation?this._player.isPlaying()&&!this._playheadLineAnimation&&this._start():this._playheadLineAnimation&&(e=this._player.getCurrentTime(),this.stop(e))};Fe.prototype.fitToView=function(){var t=this._view.getHeight();this._playheadLine.points([.5,0,.5,t]),this._playheadText&&this._playheadText.y(12)};Fe.prototype._createPlayhead=function(t){this._playheadLine=new wt({stroke:t,strokeWidth:1}),this._playheadGroup=new Ae.Group({x:0,y:0}),this._playheadGroup.add(this._playheadLine),this._playheadLayer.add(this._playheadGroup)};Fe.prototype._createPlayheadText=function(t){var e=this._player.getCurrentTime(),i=this._view.formatTime(e);this._playheadText=new pe({x:2,y:0,text:i,fontSize:this._playheadFontSize,fontFamily:this._playheadFontFamily,fontStyle:this._playheadFontStyle,fill:t,align:"right"}),this._playheadGroup.add(this._playheadText)};Fe.prototype.updatePlayheadTime=function(t){this._syncPlayhead(t),this._player.isPlaying()&&this._start()};Fe.prototype._syncPlayhead=function(t){var e=this._view.timeToPixels(t),i=this._view.getFrameOffset(),n=this._view.getWidth(),r=e>=i&&e<=i+n;if(this._playheadPixel=e,r){var s=this._playheadPixel-i;if(this._playheadVisible||(this._playheadVisible=!0,this._playheadGroup.show()),this._playheadGroup.setX(s),this._playheadText){var a=this._view.formatTime(t),o=this._playheadText.getTextWidth();this._playheadText.setText(a),o+s>n-2?this._playheadText.setX(-o-2):o+s<n&&this._playheadText.setX(2)}}else this._playheadVisible&&(this._playheadVisible=!1,this._playheadGroup.hide());this._view.playheadPosChanged&&this._view.playheadPosChanged(t)};Fe.prototype._start=function(){var t=this;if(t._playheadLineAnimation&&(t._playheadLineAnimation.stop(),t._playheadLineAnimation=null),!!t._useAnimation){var e=null;t._playheadLineAnimation=new et(function(){var i=t._player.getCurrentTime(),n=t._view.timeToPixels(i);n!==e&&(t._syncPlayhead(i),e=n)},t._playheadLayer),t._playheadLineAnimation.start()}};Fe.prototype.stop=function(t){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null),this._syncPlayhead(t)};Fe.prototype.getPlayheadOffset=function(){return this._playheadPixel-this._view.getFrameOffset()};Fe.prototype.getPlayheadPixel=function(){return this._playheadPixel};Fe.prototype.showPlayheadTime=function(t){t?this._playheadText||(this._createPlayheadText(this._playheadTextColor),this.fitToView()):this._playheadText&&(this._playheadText.remove(),this._playheadText.destroy(),this._playheadText=null)};Fe.prototype.updatePlayheadText=function(){if(this._playheadText){var t=this._player.getCurrentTime(),e=this._view.formatTime(t);this._playheadText.setText(e)}};Fe.prototype.destroy=function(){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null)};function ht(t){this._point=t.point,this._marker=t.marker,this._draggable=t.draggable,this._onClick=t.onClick,this._onDblClick=t.onDblClick,this._onDragStart=t.onDragStart,this._onDragMove=t.onDragMove,this._onDragEnd=t.onDragEnd,this._onMouseEnter=t.onMouseEnter,this._onMouseLeave=t.onMouseLeave,this._onContextMenu=t.onContextMenu,this._dragBoundFunc=this._dragBoundFunc.bind(this),this._group=new Ae.Group({draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}ht.prototype._bindDefaultEventHandlers=function(){var t=this;t._group.on("dragstart",function(e){t._onDragStart(e,t._point)}),t._group.on("dragmove",function(e){t._onDragMove(e,t._point)}),t._group.on("dragend",function(e){t._onDragEnd(e,t._point)}),t._group.on("click",function(e){t._onClick(e,t._point)}),t._group.on("dblclick",function(e){t._onDblClick(e,t._point)}),t._group.on("mouseenter",function(e){t._onMouseEnter(e,t._point)}),t._group.on("mouseleave",function(e){t._onMouseLeave(e,t._point)}),t._group.on("contextmenu",function(e){t._onContextMenu(e,t._point)})};ht.prototype._dragBoundFunc=function(t){return{x:t.x,y:this._group.getAbsolutePosition().y}};ht.prototype.addToLayer=function(t){t.add(this._group)};ht.prototype.fitToView=function(){this._marker.fitToView()};ht.prototype.getPoint=function(){return this._point};ht.prototype.getX=function(){return this._group.getX()};ht.prototype.getWidth=function(){return this._group.getWidth()};ht.prototype.setX=function(t){this._group.setX(t)};ht.prototype.timeUpdated=function(t){this._marker.timeUpdated&&this._marker.timeUpdated(t)};ht.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};var Hf="sans-serif",Wf=10,Gf="normal";function he(t,e,i){this._peaks=t,this._view=e,this._allowEditing=i,this._pointMarkers={},this._layer=new Ae.Layer,this._onPointsDrag=this._onPointsDrag.bind(this),this._onPointHandleClick=this._onPointHandleClick.bind(this),this._onPointHandleDblClick=this._onPointHandleDblClick.bind(this),this._onPointHandleDragStart=this._onPointHandleDragStart.bind(this),this._onPointHandleDragMove=this._onPointHandleDragMove.bind(this),this._onPointHandleDragEnd=this._onPointHandleDragEnd.bind(this),this._onPointHandleMouseEnter=this._onPointHandleMouseEnter.bind(this),this._onPointHandleMouseLeave=this._onPointHandleMouseLeave.bind(this),this._onPointHandleContextMenu=this._onPointHandleContextMenu.bind(this),this._onPointsUpdate=this._onPointsUpdate.bind(this),this._onPointsAdd=this._onPointsAdd.bind(this),this._onPointsRemove=this._onPointsRemove.bind(this),this._onPointsRemoveAll=this._onPointsRemoveAll.bind(this),this._peaks.on("points.update",this._onPointsUpdate),this._peaks.on("points.add",this._onPointsAdd),this._peaks.on("points.remove",this._onPointsRemove),this._peaks.on("points.remove_all",this._onPointsRemoveAll),this._peaks.on("points.dragstart",this._onPointsDrag),this._peaks.on("points.dragmove",this._onPointsDrag),this._peaks.on("points.dragend",this._onPointsDrag)}he.prototype.addToStage=function(t){t.add(this._layer)};he.prototype.enableEditing=function(t){this._allowEditing=t};he.prototype.formatTime=function(t){return this._view.formatTime(t)};he.prototype._onPointsUpdate=function(t){var e=this._view.getStartTime(),i=this._view.getEndTime();this._removePoint(t),t.isVisible(e,i)&&this._addPointMarker(t),this.updatePoints(e,i)};he.prototype._onPointsAdd=function(t){var e=this,i=e._view.getStartTime(),n=e._view.getEndTime();t.forEach(function(r){r.isVisible(i,n)&&e._addPointMarker(r)}),e.updatePoints(i,n)};he.prototype._onPointsRemove=function(t){var e=this;t.forEach(function(i){e._removePoint(i)})};he.prototype._onPointsRemoveAll=function(){this._layer.removeChildren(),this._pointMarkers={}};he.prototype._onPointsDrag=function(t){this._updatePoint(t.point)};he.prototype._createPointMarker=function(t){var e=this._allowEditing&&t.editable,i=this._peaks.options.createPointMarker({point:t,draggable:e,color:t.color?t.color:this._peaks.options.pointMarkerColor,fontFamily:this._peaks.options.fontFamily||Hf,fontSize:this._peaks.options.fontSize||Wf,fontStyle:this._peaks.options.fontStyle||Gf,layer:this,view:this._view.getName()});return new ht({point:t,draggable:e,marker:i,onClick:this._onPointHandleClick,onDblClick:this._onPointHandleDblClick,onDragStart:this._onPointHandleDragStart,onDragMove:this._onPointHandleDragMove,onDragEnd:this._onPointHandleDragEnd,onMouseEnter:this._onPointHandleMouseEnter,onMouseLeave:this._onPointHandleMouseLeave,onContextMenu:this._onPointHandleContextMenu})};he.prototype.getHeight=function(){return this._view.getHeight()};he.prototype._addPointMarker=function(t){var e=this._createPointMarker(t);return this._pointMarkers[t.id]=e,e.addToLayer(this._layer),e};he.prototype._onPointHandleDragMove=function(t,e){var i=this._pointMarkers[e.id],n=i.getX();if(n>=0&&n<this._view.getWidth()){var r=n+i.getWidth();e._setTime(this._view.pixelOffsetToTime(r)),i.timeUpdated(e.time)}this._peaks.emit("points.dragmove",{point:e,evt:t.evt})};he.prototype._onPointHandleMouseEnter=function(t,e){this._peaks.emit("points.mouseenter",{point:e,evt:t.evt})};he.prototype._onPointHandleMouseLeave=function(t,e){this._peaks.emit("points.mouseleave",{point:e,evt:t.evt})};he.prototype._onPointHandleClick=function(t,e){this._peaks.emit("points.click",{point:e,evt:t.evt})};he.prototype._onPointHandleDblClick=function(t,e){this._peaks.emit("points.dblclick",{point:e,evt:t.evt})};he.prototype._onPointHandleDragStart=function(t,e){this._peaks.emit("points.dragstart",{point:e,evt:t.evt})};he.prototype._onPointHandleDragEnd=function(t,e){this._peaks.emit("points.dragend",{point:e,evt:t.evt})};he.prototype._onPointHandleContextMenu=function(t,e){this._peaks.emit("points.contextmenu",{point:e,evt:t.evt})};he.prototype.updatePoints=function(t,e){var i=this._peaks.points.find(t,e);i.forEach(this._updatePoint.bind(this)),this._removeInvisiblePoints(t,e)};he.prototype._updatePoint=function(t){var e=this._findOrAddPointMarker(t),i=this._view.timeToPixels(t.time),n=i-this._view.getFrameOffset();e.setX(n)};he.prototype._findOrAddPointMarker=function(t){var e=this._pointMarkers[t.id];return e||(e=this._addPointMarker(t)),e};he.prototype._removeInvisiblePoints=function(t,e){var i=0;for(var n in this._pointMarkers)if(oe(this._pointMarkers,n)){var r=this._pointMarkers[n].getPoint();r.isVisible(t,e)||(this._removePoint(r),i++)}return i};he.prototype._removePoint=function(t){var e=this._pointMarkers[t.id];e&&(e.destroy(),delete this._pointMarkers[t.id])};he.prototype.setVisible=function(t){this._layer.setVisible(t)};he.prototype.destroy=function(){this._peaks.off("points.update",this._onPointsUpdate),this._peaks.off("points.add",this._onPointsAdd),this._peaks.off("points.remove",this._onPointsRemove),this._peaks.off("points.remove_all",this._onPointsRemoveAll),this._peaks.off("points.dragstart",this._onPointsDrag),this._peaks.off("points.dragmove",this._onPointsDrag),this._peaks.off("points.dragend",this._onPointsDrag)};he.prototype.fitToView=function(){for(var t in this._pointMarkers)if(oe(this._pointMarkers,t)){var e=this._pointMarkers[t];e.fitToView()}};he.prototype.draw=function(){this._layer.draw()};function Ze(t){this._segment=t.segment,this._marker=t.marker,this._segmentShape=t.segmentShape,this._draggable=t.draggable,this._startMarker=t.startMarker,this._onDrag=t.onDrag,this._onDragStart=t.onDragStart,this._onDragEnd=t.onDragEnd,this._dragBoundFunc=this._dragBoundFunc.bind(this),this._group=new Ae.Group({draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}Ze.prototype._bindDefaultEventHandlers=function(){var t=this;t._draggable&&(t._group.on("dragmove",function(e){t._onDrag(e,t)}),t._group.on("dragstart",function(e){t._onDragStart(e,t)}),t._group.on("dragend",function(e){t._onDragEnd(e,t)}))};Ze.prototype._dragBoundFunc=function(t){var e,i;return this._startMarker?(e=this._segmentShape.getEndMarker(),i=e.getX()-e.getWidth(),t.x>i&&(t.x=i)):(e=this._segmentShape.getStartMarker(),i=e.getX()+e.getWidth(),t.x<i&&(t.x=i)),{x:t.x,y:this._group.getAbsolutePosition().y}};Ze.prototype.addToLayer=function(t){t.add(this._group)};Ze.prototype.fitToView=function(){this._marker.fitToView()};Ze.prototype.getSegment=function(){return this._segment};Ze.prototype.getX=function(){return this._group.getX()};Ze.prototype.getWidth=function(){return this._group.getWidth()};Ze.prototype.isStartMarker=function(){return this._startMarker};Ze.prototype.setX=function(t){this._group.setX(t)};Ze.prototype.timeUpdated=function(t){this._marker.timeUpdated&&this._marker.timeUpdated(t)};Ze.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};function Te(t){this._color=t.color;var e={};if(ai(t.color))e.fill=t.color;else if(Ir(t.color)){var i=t.view._height*(t.color.linearGradientStart/100),n=t.view._height*(t.color.linearGradientEnd/100);e.fillLinearGradientStartPointY=i,e.fillLinearGradientEndPointY=n,e.fillLinearGradientColorStops=[0,t.color.linearGradientColorStops[0],1,t.color.linearGradientColorStops[1]]}else throw new TypeError("Unknown type for color property");this._shape=new Ae.Shape(e),this._view=t.view,this._segment=t.segment,this._shape.sceneFunc(this._sceneFunc.bind(this)),this._shape.hitFunc(this._waveformShapeHitFunc.bind(this))}Te.prototype.setSegment=function(t){this._segment=t};Te.prototype.setWaveformColor=function(t){if(ai(t))this._shape.fill(t),this._shape.fillLinearGradientStartPointY(null),this._shape.fillLinearGradientEndPointY(null),this._shape.fillLinearGradientColorStops(null);else if(Ir(t)){this._shape.fill(null);var e=this._view._height*(t.linearGradientStart/100),i=this._view._height*(t.linearGradientEnd/100);this._shape.fillLinearGradientStartPointY(e),this._shape.fillLinearGradientEndPointY(i),this._shape.fillLinearGradientColorStops([0,t.linearGradientColorStops[0],1,t.linearGradientColorStops[1]])}else throw new TypeError("Unknown type for color property")};Te.prototype.fitToView=function(){this.setWaveformColor(this._color)};Te.prototype._sceneFunc=function(t){var e=this._view.getFrameOffset(),i=this._view.getWidth(),n=this._view.getHeight();this._drawWaveform(t,this._view.getWaveformData(),e,this._segment?this._view.timeToPixels(this._segment.startTime):e,this._segment?this._view.timeToPixels(this._segment.endTime):e+i,i,n)};Te.prototype._drawWaveform=function(t,e,i,n,r,s,a){n<i&&(n=i);var o=i+s;r>o&&(r=o),r>e.length-1&&(r=e.length-1);for(var l=e.channels,h=0,c=Math.floor(a/l),d=0;d<l;d++)d===l-1&&(c=a-(l-1)*c),this._drawChannel(t,e.channel(d),i,n,r,h,c),h+=c};Te.prototype._drawChannel=function(t,e,i,n,r,s,a){var o,l,h=this._view.getAmplitudeScale(),c,d;for(t.beginPath(),o=n;o<=r;o++)l=e.min_sample(o),c=o-i+.5,d=s+Te.scaleY(l,a,h)+.5,t.lineTo(c,d);for(o=r;o>=n;o--)l=e.max_sample(o),c=o-i+.5,d=s+Te.scaleY(l,a,h)+1,t.lineTo(c,d);t.closePath(),t.fillShape(this._shape)};Te.prototype._waveformShapeHitFunc=function(t){if(!!this._segment){var e=this._view.getFrameOffset(),i=this._view.getWidth(),n=this._view.getHeight(),r=this._view.timeToPixels(this._segment.startTime),s=this._view.timeToPixels(this._segment.endTime),a=10,o=n-2*a;o<0&&(o=0);var l=r-e,h=s-r;l<0&&(h-=-l,l=0),l+h>i&&(h-=l+h-i),t.beginPath(),t.rect(l,a,h,o),t.closePath(),t.fillStrokeShape(this._shape)}};Te.prototype.addToLayer=function(t){t.add(this._shape)};Te.prototype.destroy=function(){this._shape.destroy(),this._shape=null};Te.prototype.on=function(t,e){this._shape.on(t,e)};Te.scaleY=function(t,e,i){var n=-(e-1)*(t*i+128)/255+(e-1);return ui(Math.floor(n),0,e-1)};var $a="sans-serif",ja=10,Ka="normal";function Me(t,e,i,n){this._segment=t,this._peaks=e,this._layer=i,this._view=n,this._label=null,this._startMarker=null,this._endMarker=null,this._color=t.color,this._waveformShape=new Te({color:t.color,view:n,segment:t}),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onClick=this._onClick.bind(this),this._onDblClick=this._onDblClick.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._waveformShape.on("mouseenter",this._onMouseEnter),this._waveformShape.on("mouseleave",this._onMouseLeave),this._waveformShape.on("click",this._onClick),this._waveformShape.on("dblclick",this._onDblClick),this._waveformShape.on("contextmenu",this._onContextMenu),this._onSegmentHandleDrag=this._onSegmentHandleDrag.bind(this),this._onSegmentHandleDragStart=this._onSegmentHandleDragStart.bind(this),this._onSegmentHandleDragEnd=this._onSegmentHandleDragEnd.bind(this),this._label=this._peaks.options.createSegmentLabel({segment:t,view:this._view.getName(),layer:this._layer,fontFamily:this._peaks.options.fontFamily,fontSize:this._peaks.options.fontSize,fontStyle:this._peaks.options.fontStyle}),this._label&&this._label.hide(),this._createMarkers()}Me.prototype.updatePosition=function(){var t=this._view.timeToPixels(this._segment.startTime),e=this._view.timeToPixels(this._segment.endTime),i=this._view.getFrameOffset(),n=t-i,r=e-i,s=this.getStartMarker();s&&s.setX(n-s.getWidth()),s=this.getEndMarker(),s&&s.setX(r)};Me.prototype.getSegment=function(){return this._segment};Me.prototype.getStartMarker=function(){return this._startMarker};Me.prototype.getEndMarker=function(){return this._endMarker};Me.prototype.addToLayer=function(t){this._waveformShape.addToLayer(t),this._label&&t.add(this._label),this._startMarker&&this._startMarker.addToLayer(t),this._endMarker&&this._endMarker.addToLayer(t)};Me.prototype._createMarkers=function(){var t=this._layer.isEditingEnabled()&&this._segment.editable;if(!!t){var e=this._peaks.options.createSegmentMarker({segment:this._segment,draggable:t,startMarker:!0,color:this._peaks.options.segmentStartMarkerColor,fontFamily:this._peaks.options.fontFamily||$a,fontSize:this._peaks.options.fontSize||ja,fontStyle:this._peaks.options.fontStyle||Ka,layer:this._layer,view:this._view.getName()});e&&(this._startMarker=new Ze({segment:this._segment,segmentShape:this,draggable:t,startMarker:!0,marker:e,onDrag:this._onSegmentHandleDrag,onDragStart:this._onSegmentHandleDragStart,onDragEnd:this._onSegmentHandleDragEnd}));var i=this._peaks.options.createSegmentMarker({segment:this._segment,draggable:t,startMarker:!1,color:this._peaks.options.segmentEndMarkerColor,fontFamily:this._peaks.options.fontFamily||$a,fontSize:this._peaks.options.fontSize||ja,fontStyle:this._peaks.options.fontStyle||Ka,layer:this._layer,view:this._view.getName()});i&&(this._endMarker=new Ze({segment:this._segment,segmentShape:this,draggable:t,startMarker:!1,marker:i,onDrag:this._onSegmentHandleDrag,onDragStart:this._onSegmentHandleDragStart,onDragEnd:this._onSegmentHandleDragEnd}))}};Me.prototype._onMouseEnter=function(t){this._label&&(this._label.moveToTop(),this._label.show()),this._peaks.emit("segments.mouseenter",{segment:this._segment,evt:t.evt})};Me.prototype._onMouseLeave=function(t){this._label&&this._label.hide(),this._peaks.emit("segments.mouseleave",{segment:this._segment,evt:t.evt})};Me.prototype._onClick=function(t){this._peaks.emit("segments.click",{segment:this._segment,evt:t.evt})};Me.prototype._onDblClick=function(t){this._peaks.emit("segments.dblclick",{segment:this._segment,evt:t.evt})};Me.prototype._onContextMenu=function(t){this._peaks.emit("segments.contextmenu",{segment:this._segment,evt:t.evt})};Me.prototype._onSegmentHandleDrag=function(t,e){var i=this._view.getWidth(),n=e.isStartMarker(),r=this._startMarker.getX(),s=this._endMarker.getX();if(n&&r>=0){var a=r+this._startMarker.getWidth();this._segment._setStartTime(this._view.pixelOffsetToTime(a)),e.timeUpdated(this._segment.startTime)}if(!n&&s<i){var o=s;this._segment._setEndTime(this._view.pixelOffsetToTime(o)),e.timeUpdated(this._segment.endTime)}this._peaks.emit("segments.dragged",{segment:this._segment,startMarker:n,evt:t.evt})};Me.prototype._onSegmentHandleDragStart=function(t,e){var i=e.isStartMarker();this._peaks.emit("segments.dragstart",{segment:this._segment,startMarker:i,evt:t.evt})};Me.prototype._onSegmentHandleDragEnd=function(t,e){var i=e.isStartMarker();this._peaks.emit("segments.dragend",{segment:this._segment,startMarker:i,evt:t.evt})};Me.prototype.fitToView=function(){this._startMarker&&this._startMarker.fitToView(),this._endMarker&&this._endMarker.fitToView(),this._waveformShape.setWaveformColor(this._color)};Me.prototype.destroy=function(){this._waveformShape.destroy(),this._label&&this._label.destroy(),this._startMarker&&this._startMarker.destroy(),this._endMarker&&this._endMarker.destroy()};function ve(t,e,i){this._peaks=t,this._view=e,this._allowEditing=i,this._segmentShapes={},this._layer=new Ae.Layer,this._onSegmentsUpdate=this._onSegmentsUpdate.bind(this),this._onSegmentsAdd=this._onSegmentsAdd.bind(this),this._onSegmentsRemove=this._onSegmentsRemove.bind(this),this._onSegmentsRemoveAll=this._onSegmentsRemoveAll.bind(this),this._onSegmentsDragged=this._onSegmentsDragged.bind(this),this._peaks.on("segments.update",this._onSegmentsUpdate),this._peaks.on("segments.add",this._onSegmentsAdd),this._peaks.on("segments.remove",this._onSegmentsRemove),this._peaks.on("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.on("segments.dragged",this._onSegmentsDragged)}ve.prototype.addToStage=function(t){t.add(this._layer)};ve.prototype.enableEditing=function(t){this._allowEditing=t};ve.prototype.isEditingEnabled=function(){return this._allowEditing};ve.prototype.formatTime=function(t){return this._view.formatTime(t)};ve.prototype._onSegmentsUpdate=function(t){var e=!1,i=this._segmentShapes[t.id],n=this._view.getStartTime(),r=this._view.getEndTime();i&&(this._removeSegment(t),e=!0),t.isVisible(n,r)&&(this._addSegmentShape(t),e=!0),e&&this.updateSegments(n,r)};ve.prototype._onSegmentsAdd=function(t){var e=this,i=e._view.getStartTime(),n=e._view.getEndTime();t.forEach(function(r){r.isVisible(i,n)&&e._addSegmentShape(r)}),e.updateSegments(i,n)};ve.prototype._onSegmentsRemove=function(t){var e=this;t.forEach(function(i){e._removeSegment(i)})};ve.prototype._onSegmentsRemoveAll=function(){this._layer.removeChildren(),this._segmentShapes={}};ve.prototype._onSegmentsDragged=function(t){this._updateSegment(t.segment)};ve.prototype._createSegmentShape=function(t){return new Me(t,this._peaks,this,this._view)};ve.prototype._addSegmentShape=function(t){var e=this._createSegmentShape(t);return e.addToLayer(this._layer),this._segmentShapes[t.id]=e,e};ve.prototype.updateSegments=function(t,e){var i=this._peaks.segments.find(t,e),n=i.length;i.forEach(this._updateSegment.bind(this)),n+=this._removeInvisibleSegments(t,e),n>0&&this._layer.draw()};ve.prototype._updateSegment=function(t){var e=this._findOrAddSegmentShape(t);e.updatePosition()};ve.prototype._findOrAddSegmentShape=function(t){var e=this._segmentShapes[t.id];return e||(e=this._addSegmentShape(t)),e};ve.prototype._removeInvisibleSegments=function(t,e){var i=0;for(var n in this._segmentShapes)if(oe(this._segmentShapes,n)){var r=this._segmentShapes[n].getSegment();r.isVisible(t,e)||(this._removeSegment(r),i++)}return i};ve.prototype._removeSegment=function(t){var e=this._segmentShapes[t.id];e&&(e.destroy(),delete this._segmentShapes[t.id])};ve.prototype.setVisible=function(t){this._layer.setVisible(t)};ve.prototype.destroy=function(){this._peaks.off("segments.update",this._onSegmentsUpdate),this._peaks.off("segments.add",this._onSegmentsAdd),this._peaks.off("segments.remove",this._onSegmentsRemove),this._peaks.off("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.off("segments.dragged",this._onSegmentsDragged)};ve.prototype.fitToView=function(){for(var t in this._segmentShapes)if(oe(this._segmentShapes,t)){var e=this._segmentShapes[t];e.fitToView()}};ve.prototype.draw=function(){this._layer.draw()};ve.prototype.getHeight=function(){return this._layer.getHeight()};function $t(t,e){var i=this;i._axisGridlineColor=e.axisGridlineColor,i._axisLabelColor=e.axisLabelColor,i._showAxisLabels=e.showAxisLabels,e.formatAxisTime?i._formatAxisTime=e.formatAxisTime:i._formatAxisTime=function(n){return Ns(n,0)},i._axisLabelFont=$t._buildFontString(e.fontFamily,e.fontSize,e.fontStyle),i._axisShape=new Ae.Shape({sceneFunc:function(r){i._drawAxis(r,t)}})}$t._buildFontString=function(t,e,i){return e||(e=11),t||(t="sans-serif"),i||(i="normal"),i+" "+e+"px "+t};$t.prototype.addToLayer=function(t){t.add(this._axisShape)};$t.prototype.showAxisLabels=function(t){this._showAxisLabels=t};$t.prototype._getAxisLabelScale=function(t){for(var e=1,i=[1,2,5,10,20,30],n=60,r=0,s;;){s=e*i[r];var a=t.timeToPixels(s);if(a<n)++r===i.length&&(e*=60,r=0);else break}return s};$t.prototype._drawAxis=function(t,e){var i=e.getStartTime(),n=10,r=this._getAxisLabelScale(e),s=vf(i,r),a=s-i,o=e.timeToPixels(a);t.setAttr("strokeStyle",this._axisGridlineColor),t.setAttr("lineWidth",1),t.setAttr("font",this._axisLabelFont),t.setAttr("fillStyle",this._axisLabelColor),t.setAttr("textAlign","left"),t.setAttr("textBaseline","bottom");for(var l=s,h,c=e.getWidth(),d=e.getHeight();h=o+e.timeToPixels(l-s),!(h>=c);){if(t.beginPath(),t.moveTo(h+.5,0),t.lineTo(h+.5,0+n),t.moveTo(h+.5,d),t.lineTo(h+.5,d-n),t.stroke(),this._showAxisLabels){var f=this._formatAxisTime(l),y=t.measureText(f).width,C=h-y/2,I=d-1-n;C>=0&&t.fillText(f,C,I)}l+=r}};function q(t,e,i){var n=this;if(n._originalWaveformData=t,n._container=e,n._peaks=i,n._options=i.options,n._viewOptions=i.options.overview,n._onTimeUpdate=n._onTimeUpdate.bind(this),n._onPlaying=n._onPlaying.bind(this),n._onPause=n._onPause.bind(this),n._onZoomviewDisplaying=n._onZoomviewDisplaying.bind(this),n._onWindowResize=n._onWindowResize.bind(this),i.on("player.timeupdate",n._onTimeUpdate),i.on("player.playing",n._onPlaying),i.on("player.pause",n._onPause),i.on("zoomview.displaying",n._onZoomviewDisplaying),i.on("window_resize",n._onWindowResize),n._amplitudeScale=1,n._timeLabelPrecision=n._viewOptions.timeLabelPrecision,n._enableSeek=!0,n._viewOptions.formatPlayheadTime?n._formatPlayheadTime=n._viewOptions.formatPlayheadTime:n._formatPlayheadTime=function(s){return Ns(s,n._timeLabelPrecision)},n._width=e.clientWidth,n._height=e.clientHeight,n._data=t,n._width!==0)try{n._data=t.resample({width:n._width})}catch{}Ae.showWarnings=!1,n._resizeTimeoutId=null,n._stage=new Ae.Stage({container:e,width:n._width,height:n._height}),n._waveformLayer=new Ae.Layer({listening:!1}),n._waveformColor=n._viewOptions.waveformColor,n._playedWaveformColor=n._viewOptions.playedWaveformColor,n._createWaveform(),n._segmentsLayer=new ve(i,n,!1),n._segmentsLayer.addToStage(n._stage),n._pointsLayer=new he(i,n,!1),n._pointsLayer.addToStage(n._stage),n._highlightLayer=new Yt(n,n._viewOptions.highlightOffset,n._viewOptions.highlightColor),n._highlightLayer.addToStage(n._stage),n._createAxisLabels(),n._playheadLayer=new Fe({player:n._peaks.player,view:n,showPlayheadTime:n._viewOptions.showPlayheadTime,playheadColor:n._viewOptions.playheadColor,playheadTextColor:n._viewOptions.playheadTextColor,playheadFontFamily:n._viewOptions.fontFamily,playheadFontSize:n._viewOptions.fontSize,playheadFontStyle:n._viewOptions.fontStyle}),n._playheadLayer.addToStage(n._stage);var r=n._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(r),n._createMouseDragHandler(),n._onClick=n._onClick.bind(this),n._onDblClick=n._onDblClick.bind(this),n._onContextMenu=n._onContextMenu.bind(this),n._stage.on("click",n._onClick),n._stage.on("dblclick",n._onDblClick),n._stage.on("contextmenu",n._onContextMenu)}q.prototype._createMouseDragHandler=function(){var t=this;t._mouseDragHandler=new pi(t._stage,{onMouseDown:function(i){this._seek(i)},onMouseMove:function(i){this._seek(i)},_seek:function(i){if(!!t._enableSeek){i=ui(i,0,t._width);var n=t.pixelsToTime(i),r=t._getDuration();n>r&&(n=r),t._playheadLayer.updatePlayheadTime(n),t._peaks.player.seek(n)}}})};q.prototype.enableSeek=function(t){this._enableSeek=t};q.prototype._onClick=function(t){this._clickHandler(t,"overview.click")};q.prototype._onDblClick=function(t){this._clickHandler(t,"overview.dblclick")};q.prototype._onContextMenu=function(t){this._clickHandler(t,"overview.contextmenu")};q.prototype._clickHandler=function(t,e){var i=t.evt.layerX,n=this.pixelsToTime(i);this._peaks.emit(e,{time:n,evt:t.evt})};q.prototype.getName=function(){return"overview"};q.prototype._onTimeUpdate=function(t){this._playheadLayer.updatePlayheadTime(t)};q.prototype._onPlaying=function(t){this._playheadLayer.updatePlayheadTime(t)};q.prototype._onPause=function(t){this._playheadLayer.stop(t)};q.prototype._onZoomviewDisplaying=function(t,e){this.showHighlight(t,e)};q.prototype.showHighlight=function(t,e){this._highlightLayer.showHighlight(t,e)};q.prototype._onWindowResize=function(){var t=this;t._resizeTimeoutId&&(clearTimeout(t._resizeTimeoutId),t._resizeTimeoutId=null),t._container.clientWidth!==0&&(t._width=t._container.clientWidth,t._stage.setWidth(t._width),t._resizeTimeoutId=setTimeout(function(){t._width=t._container.clientWidth,t._data=t._originalWaveformData.resample({width:t._width}),t._stage.setWidth(t._width),t._updateWaveform()},500))};q.prototype.setWaveformData=function(t){this._originalWaveformData=t,this._width!==0?this._data=t.resample({width:this._width}):this._data=t,this._updateWaveform()};q.prototype.playheadPosChanged=function(t){this._playedWaveformShape&&(this._playedSegment.endTime=t,this._unplayedSegment.startTime=t,this._waveformLayer.draw())};q.prototype.timeToPixels=function(t){return Math.floor(t*this._data.sample_rate/this._data.scale)};q.prototype.pixelsToTime=function(t){return t*this._data.scale/this._data.sample_rate};q.prototype.pixelOffsetToTime=q.prototype.pixelsToTime;q.prototype.getFrameOffset=function(){return 0};q.prototype.getStartTime=function(){return 0};q.prototype.getEndTime=function(){return this._getDuration()};q.prototype.getWidth=function(){return this._width};q.prototype.getHeight=function(){return this._height};q.prototype._getDuration=function(){return this._peaks.player.getDuration()};q.prototype.setAmplitudeScale=function(t){if(!lr(t)||!Rl(t))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=t,this._waveformLayer.draw(),this._segmentsLayer.draw()};q.prototype.getAmplitudeScale=function(){return this._amplitudeScale};q.prototype.getWaveformData=function(){return this._data};q.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new Te({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var t=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:t},this._unplayedSegment={startTime:t,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new Te({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};q.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};q.prototype._createWaveform=function(){this._createWaveformShapes(),this._stage.add(this._waveformLayer)};q.prototype._createAxisLabels=function(){this._axisLayer=new Ae.Layer({listening:!1}),this._axis=new $t(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};q.prototype.removeHighlightRect=function(){this._highlightLayer.removeHighlight()};q.prototype._updateWaveform=function(){this._waveformLayer.draw(),this._axisLayer.draw();var t=this._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(t),this._highlightLayer.updateHighlight();var e=0,i=this.pixelsToTime(this._width);this._pointsLayer.updatePoints(e,i),this._segmentsLayer.updateSegments(e,i)};q.prototype.setWaveformColor=function(t){this._waveformColor=t,this._waveformShape.setWaveformColor(t)};q.prototype.setPlayedWaveformColor=function(t){this._playedWaveformColor=t,t?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(t)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};q.prototype.showPlayheadTime=function(t){this._playheadLayer.showPlayheadTime(t)};q.prototype.setTimeLabelPrecision=function(t){this._timeLabelPrecision=t,this._playheadLayer.updatePlayheadText()};q.prototype.formatTime=function(t){return this._formatPlayheadTime(t)};q.prototype.showAxisLabels=function(t){this._axis.showAxisLabels(t),this._axisLayer.draw()};q.prototype.enableMarkerEditing=function(t){this._segmentsLayer.enableEditing(t),this._pointsLayer.enableEditing(t)};q.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var t=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.setWidth(this._width);try{this._data=this._originalWaveformData.resample({width:this._width}),t=!0}catch{}}this._height=this._container.clientHeight,this._stage.setHeight(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer.fitToView(),this._pointsLayer.fitToView(),this._highlightLayer.fitToView(),t&&this._updateWaveform(),this._stage.draw()}};q.prototype.destroy=function(){this._resizeTimeoutId&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=null),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("zoomview.displaying",this._onZoomviewDisplaying),this._peaks.off("window_resize",this._onWindowResize),this._playheadLayer.destroy(),this._segmentsLayer.destroy(),this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function X(t,e,i){var n=this;n._container=e,n._peaks=i,n._options=i.options,n._viewOptions=n._options.zoomview,n._enableWaveformCache=n._options.waveformCache,n._originalWaveformData=t,n._initWaveformCache(),n._onTimeUpdate=n._onTimeUpdate.bind(n),n._onPlaying=n._onPlaying.bind(n),n._onPause=n._onPause.bind(n),n._onWindowResize=n._onWindowResize.bind(n),n._onKeyboardLeft=n._onKeyboardLeft.bind(n),n._onKeyboardRight=n._onKeyboardRight.bind(n),n._onKeyboardShiftLeft=n._onKeyboardShiftLeft.bind(n),n._onKeyboardShiftRight=n._onKeyboardShiftRight.bind(n),n._peaks.on("player.timeupdate",n._onTimeUpdate),n._peaks.on("player.playing",n._onPlaying),n._peaks.on("player.pause",n._onPause),n._peaks.on("window_resize",n._onWindowResize),n._peaks.on("keyboard.left",n._onKeyboardLeft),n._peaks.on("keyboard.right",n._onKeyboardRight),n._peaks.on("keyboard.shift_left",n._onKeyboardShiftLeft),n._peaks.on("keyboard.shift_right",n._onKeyboardShiftRight),n._enableAutoScroll=!0,n._amplitudeScale=1,n._timeLabelPrecision=n._viewOptions.timeLabelPrecision,n._enableSeek=!0,n._viewOptions.formatPlayheadTime?n._formatPlayheadTime=n._viewOptions.formatPlayheadTime:n._formatPlayheadTime=function(a){return Ns(a,n._timeLabelPrecision)},n._playheadClickTolerance=n._viewOptions.playheadClickTolerance,n._data=null,n._pixelLength=0;var r=i.zoom.getZoomLevel();n._zoomLevelAuto=!1,n._zoomLevelSeconds=null,n._resizeTimeoutId=null,n._resampleData({scale:r}),n._width=e.clientWidth,n._height=e.clientHeight,n._frameOffset=0,n._stage=new Ae.Stage({container:e,width:n._width,height:n._height}),n._waveformLayer=new Ae.Layer({listening:!1}),n._waveformColor=n._viewOptions.waveformColor,n._playedWaveformColor=n._viewOptions.playedWaveformColor,n._createWaveform(),n._segmentsLayer=new ve(i,n,!0),n._segmentsLayer.addToStage(n._stage),n._pointsLayer=new he(i,n,!0),n._pointsLayer.addToStage(n._stage),n._createAxisLabels(),n._playheadLayer=new Fe({player:n._peaks.player,view:n,showPlayheadTime:n._viewOptions.showPlayheadTime,playheadColor:n._viewOptions.playheadColor,playheadTextColor:n._viewOptions.playheadTextColor,playheadFontFamily:n._viewOptions.fontFamily,playheadFontSize:n._viewOptions.fontSize,playheadFontStyle:n._viewOptions.fontStyle}),n._playheadLayer.addToStage(n._stage);var s=n._peaks.player.getCurrentTime();n._syncPlayhead(s),n._createMouseDragHandler(),n._onWheel=n._onWheel.bind(n),n._onWheelCaptureVerticalScroll=n._onWheelCaptureVerticalScroll.bind(n),n.setWheelMode(n._viewOptions.wheelMode),n._onClick=n._onClick.bind(this),n._onDblClick=n._onDblClick.bind(this),n._onContextMenu=n._onContextMenu.bind(this),n._stage.on("click",n._onClick),n._stage.on("dblclick",n._onDblClick),n._stage.on("contextmenu",n._onContextMenu)}X.prototype._initWaveformCache=function(){this._enableWaveformCache&&(this._waveformData=new Map,this._waveformData.set(this._originalWaveformData.scale,this._originalWaveformData),this._waveformScales=[this._originalWaveformData.scale])};X.prototype._createMouseDragHandler=function(){var t=this;t._mouseDragHandler=new pi(t._stage,{onMouseDown:function(i){this._seeking=!1;var n=t._playheadLayer.getPlayheadOffset();t._enableSeek&&Math.abs(i-n)<=t._playheadClickTolerance&&(this._seeking=!0),this._seeking?this._seek(i):(this.initialFrameOffset=t._frameOffset,this.mouseDownX=i)},onMouseMove:function(i){if(this._seeking)this._seek(i);else{var n=this.mouseDownX-i,r=this.initialFrameOffset+n;r!==this.initialFrameOffset&&t._updateWaveform(r)}},onMouseUp:function(){if(!this._seeking&&t._enableSeek&&!t._mouseDragHandler.isDragging()){var i=t.pixelOffsetToTime(this.mouseDownX),n=t._getDuration();i>n&&(i=n),t._playheadLayer.updatePlayheadTime(i),t._peaks.player.seek(i)}},_seek:function(i){i=ui(i,0,t._width);var n=t.pixelsToTime(i+t._frameOffset),r=t._getDuration();n>r&&(n=r),t._playheadLayer.updatePlayheadTime(n),t._peaks.player.seek(n)}})};X.prototype.enableSeek=function(t){this._enableSeek=t};X.prototype._onClick=function(t){this._clickHandler(t,"zoomview.click")};X.prototype._onDblClick=function(t){this._clickHandler(t,"zoomview.dblclick")};X.prototype._onContextMenu=function(t){this._clickHandler(t,"zoomview.contextmenu")};X.prototype._clickHandler=function(t,e){var i=t.evt.layerX,n=this.pixelOffsetToTime(i);this._peaks.emit(e,{time:n,evt:t.evt})};X.prototype.setWheelMode=function(t,e){if(e||(e={}),t!==this._wheelMode||e.captureVerticalScroll!==this._captureVerticalScroll)switch(this._stage.off("wheel"),this._wheelMode=t,this._captureVerticalScroll=e.captureVerticalScroll,t){case"scroll":e.captureVerticalScroll?this._stage.on("wheel",this._onWheelCaptureVerticalScroll):this._stage.on("wheel",this._onWheel);break}};X.prototype._onWheel=function(t){var e=t.evt,i;if(e.shiftKey)if(e.deltaY!==0)i=e.deltaY;else if(e.deltaX!==0)i=e.deltaX;else return;else{if(Math.abs(e.deltaX)<Math.abs(e.deltaY))return;i=e.deltaX}e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._width),e.preventDefault();var n=ui(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this._updateWaveform(n)};X.prototype._onWheelCaptureVerticalScroll=function(t){var e=t.evt,i=Math.abs(e.deltaX)<Math.abs(e.deltaY)?e.deltaY:e.deltaX;e.preventDefault();var n=ui(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this._updateWaveform(n)};X.prototype.getName=function(){return"zoomview"};X.prototype._onTimeUpdate=function(t){this._mouseDragHandler.isDragging()||this._syncPlayhead(t)};X.prototype._onPlaying=function(t){this._playheadLayer.updatePlayheadTime(t)};X.prototype._onPause=function(t){this._playheadLayer.stop(t)};X.prototype._onWindowResize=function(){var t=this,e=t._container.clientWidth;t._zoomLevelAuto?(t._resizeTimeoutId&&(clearTimeout(t._resizeTimeoutId),t._resizeTimeoutId=null),e!==0&&(t._width=e,t._stage.width(e),t._resizeTimeoutId=setTimeout(function(){t._width=e,t._data=t._originalWaveformData.resample(e),t._stage.width(e),t._updateWaveform(t._frameOffset)},500))):(t._width=e,t._stage.width(e),t._updateWaveform(t._frameOffset))};X.prototype._onKeyboardLeft=function(){this._keyboardScroll(-1,!1)};X.prototype._onKeyboardRight=function(){this._keyboardScroll(1,!1)};X.prototype._onKeyboardShiftLeft=function(){this._keyboardScroll(-1,!0)};X.prototype._onKeyboardShiftRight=function(){this._keyboardScroll(1,!0)};X.prototype._keyboardScroll=function(t,e){var i;e?i=t*this._width:i=t*this.timeToPixels(this._options.nudgeIncrement),this.scrollWaveform({pixels:i})};X.prototype.setWaveformData=function(t){this._originalWaveformData=t,this._initWaveformCache()};X.prototype.playheadPosChanged=function(t){this._playedWaveformShape&&(this._playedSegment.endTime=t,this._unplayedSegment.startTime=t,this._drawWaveformLayer())};X.prototype._syncPlayhead=function(t){if(this._playheadLayer.updatePlayheadTime(t),this._enableAutoScroll){var e=this.timeToPixels(t),i=this._frameOffset+this._width-100;(e>=i||e<this._frameOffset)&&(this._frameOffset=e-100,this._frameOffset<0&&(this._frameOffset=0),this._updateWaveform(this._frameOffset))}};X.prototype._getScale=function(t){return t*this._data.sample_rate/this._width};function Bf(t){return oe(t,"scale")&&t.scale==="auto"||oe(t,"seconds")&&t.seconds==="auto"}X.prototype.setZoom=function(t){var e;if(Bf(t)){var i=this._peaks.player.getDuration();if(!Bt(i))return!1;this._zoomLevelAuto=!0,this._zoomLevelSeconds=null,e=this._getScale(i)}else{if(oe(t,"scale"))this._zoomLevelSeconds=null,e=t.scale;else if(oe(t,"seconds")){if(!Bt(t.seconds))return!1;this._zoomLevelSeconds=t.seconds,e=this._getScale(t.seconds)}this._zoomLevelAuto=!1}e<this._originalWaveformData.scale&&(this._peaks._logger("peaks.zoomview.setZoom(): zoom level must be at least "+this._originalWaveformData.scale),e=this._originalWaveformData.scale);var n=this._peaks.player.getCurrentTime(),r,s=this._playheadLayer.getPlayheadOffset();s>=0&&s<this._width?r=n:(s=Math.floor(this._width/2),r=this.pixelOffsetToTime(s));var a=this._scale;this._resampleData({scale:e});var o=this.timeToPixels(r);return this._frameOffset=o-s,this._updateWaveform(this._frameOffset),this._playheadLayer.zoomLevelChanged(),this._playheadLayer.updatePlayheadTime(n),this._peaks.emit("zoom.update",e,a),!0};X.prototype._resampleData=function(t){var e=t.scale;if(this._enableWaveformCache){if(!this._waveformData.has(e)){for(var i=this._originalWaveformData,n=0;n<this._waveformScales.length&&this._waveformScales[n]<e;n++)i=this._waveformData.get(this._waveformScales[n]);this._waveformData.set(e,i.resample(t)),this._waveformScales.push(e),this._waveformScales.sort(function(r,s){return r-s})}this._data=this._waveformData.get(e)}else this._data=this._originalWaveformData.resample(t);this._scale=this._data.scale,this._pixelLength=this._data.length};X.prototype.getStartTime=function(){return this.pixelOffsetToTime(0)};X.prototype.getEndTime=function(){return this.pixelOffsetToTime(this._width)};X.prototype.setStartTime=function(t){t<0&&(t=0),this._zoomLevelAuto&&(t=0),this._updateWaveform(this.timeToPixels(t))};X.prototype.timeToPixels=function(t){return Math.floor(t*this._data.sample_rate/this._data.scale)};X.prototype.pixelsToTime=function(t){return t*this._data.scale/this._data.sample_rate};X.prototype.pixelOffsetToTime=function(t){var e=this._frameOffset+t;return e*this._data.scale/this._data.sample_rate};X.prototype.getFrameOffset=function(){return this._frameOffset};X.prototype.getWidth=function(){return this._width};X.prototype.getHeight=function(){return this._height};X.prototype._getDuration=function(){return this._peaks.player.getDuration()};X.prototype.setAmplitudeScale=function(t){if(!lr(t)||!Rl(t))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=t,this._drawWaveformLayer(),this._segmentsLayer.draw()};X.prototype.getAmplitudeScale=function(){return this._amplitudeScale};X.prototype.getWaveformData=function(){return this._data};X.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new Te({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var t=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:t},this._unplayedSegment={startTime:t,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new Te({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};X.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};X.prototype._createWaveform=function(){this._createWaveformShapes(),this._stage.add(this._waveformLayer),this._peaks.emit("zoomview.displaying",0,this.getEndTime())};X.prototype._createAxisLabels=function(){this._axisLayer=new Ae.Layer({listening:!1}),this._axis=new $t(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};X.prototype.scrollWaveform=function(t){var e;if(oe(t,"pixels"))e=Math.floor(t.pixels);else if(oe(t,"seconds"))e=this.timeToPixels(t.seconds);else throw new TypeError("view.scrollWaveform(): Missing umber of pixels or seconds");this._updateWaveform(this._frameOffset+e)};X.prototype._updateWaveform=function(t){var e;this._pixelLength<this._width?(t=0,e=this._width):e=this._pixelLength-this._width,t=ui(t,0,e),this._frameOffset=t;var i=this._playheadLayer.getPlayheadPixel();this._playheadLayer.updatePlayheadTime(this.pixelsToTime(i)),this._drawWaveformLayer(),this._axisLayer.draw();var n=this.getStartTime(),r=this.getEndTime();this._pointsLayer.updatePoints(n,r),this._segmentsLayer.updateSegments(n,r),this._peaks.emit("zoomview.displaying",n,r)};X.prototype._drawWaveformLayer=function(){this._waveformLayer.draw()};X.prototype.setWaveformColor=function(t){this._waveformColor=t,this._waveformShape.setWaveformColor(t)};X.prototype.setPlayedWaveformColor=function(t){this._playedWaveformColor=t,t?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(t)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};X.prototype.showPlayheadTime=function(t){this._playheadLayer.showPlayheadTime(t)};X.prototype.setTimeLabelPrecision=function(t){this._timeLabelPrecision=t,this._playheadLayer.updatePlayheadText()};X.prototype.formatTime=function(t){return this._formatPlayheadTime(t)};X.prototype.showAxisLabels=function(t){this._axis.showAxisLabels(t),this._axisLayer.draw()};X.prototype.enableAutoScroll=function(t){this._enableAutoScroll=t};X.prototype.enableMarkerEditing=function(t){this._segmentsLayer.enableEditing(t),this._pointsLayer.enableEditing(t)};X.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var t=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.width(this._width);var e=!1,i;if(this._zoomLevelAuto?(e=!0,i={width:this._width}):this._zoomLevelSeconds!==null&&(e=!0,i={scale:this._getScale(this._zoomLevelSeconds)}),e)try{this._resampleData(i),t=!0}catch{}}this._height=this._container.clientHeight,this._stage.height(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer.fitToView(),this._pointsLayer.fitToView(),t&&this._updateWaveform(this._frameOffset),this._stage.draw()}};X.prototype.destroy=function(){this._resizeTimeoutId&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=null),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("window_resize",this._onWindowResize),this._peaks.off("keyboard.left",this._onKeyboardLeft),this._peaks.off("keyboard.right",this._onKeyboardRight),this._peaks.off("keyboard.shift_left",this._onKeyboardShiftLeft),this._peaks.off("keyboard.shift_right",this._onKeyboardShiftRight),this._playheadLayer.destroy(),this._segmentsLayer.destroy(),this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function gi(t){this._peaks=t,this._overview=null,this._zoomview=null}gi.prototype.createOverview=function(t){if(this._overview)return this._overview;var e=this._peaks.getWaveformData();return this._overview=new q(e,t,this._peaks),this._zoomview&&this._overview.showHighlight(this._zoomview.getStartTime(),this._zoomview.getEndTime()),this._overview};gi.prototype.createZoomview=function(t){if(this._zoomview)return this._zoomview;var e=this._peaks.getWaveformData();return this._zoomview=new X(e,t,this._peaks),this._zoomview};gi.prototype.destroyOverview=function(){!this._overview||!this._zoomview||(this._overview.destroy(),this._overview=null)};gi.prototype.destroyZoomview=function(){!this._zoomview||!this._overview||(this._zoomview.destroy(),this._zoomview=null,this._overview.removeHighlightRect())};gi.prototype.destroy=function(){this._overview&&(this._overview.destroy(),this._overview=null),this._zoomview&&(this._zoomview.destroy(),this._zoomview=null)};gi.prototype.getView=function(t){if(vt(t))return this._overview&&this._zoomview?null:this._overview?this._overview:this._zoomview?this._zoomview:null;switch(t){case"overview":return this._overview;case"zoomview":return this._zoomview;default:return null}};function _i(t,e){this._peaks=t,this._zoomLevels=e,this._zoomLevelIndex=0}_i.prototype.setZoomLevels=function(t){this._zoomLevels=t,this.setZoom(0,!0)};_i.prototype.zoomIn=function(){this.setZoom(this._zoomLevelIndex-1)};_i.prototype.zoomOut=function(){this.setZoom(this._zoomLevelIndex+1)};_i.prototype.setZoom=function(t,e){if(t>=this._zoomLevels.length&&(t=this._zoomLevels.length-1),t<0&&(t=0),!(!e&&t===this._zoomLevelIndex)){this._zoomLevelIndex=t;var i=this._peaks.views.getView("zoomview");!i||i.setZoom({scale:this._zoomLevels[t]})}};_i.prototype.getZoom=function(){return this._zoomLevelIndex};_i.prototype.getZoomLevel=function(){return this._zoomLevels[this._zoomLevelIndex]};var Za="withCredentials"in new XMLHttpRequest;function Et(t){this._peaks=t}Et.prototype.init=function(t,e){if(t.dataUri&&(t.webAudio||t.audioContext)||t.waveformData&&(t.webAudio||t.audioContext)||t.dataUri&&t.waveformData){e(new TypeError("Peaks.init(): You may only pass one source (webAudio, dataUri, or waveformData) to render waveform data."));return}if(t.audioContext&&(this._peaks._logger("Peaks.init(): The audioContext option is deprecated, please pass a webAudio object instead"),t.webAudio={audioContext:t.audioContext}),t.dataUri)return this._getRemoteWaveformData(t,e);if(t.waveformData)return this._buildWaveformFromLocalData(t,e);if(t.webAudio)return t.webAudio.audioBuffer?this._buildWaveformDataFromAudioBuffer(t,e):this._buildWaveformDataUsingWebAudio(t,e);e(new Error("Peaks.init(): You must pass an audioContext, or dataUri, or waveformData to render waveform data"))};Et.prototype._getRemoteWaveformData=function(t,e){var i=this,n=null,r=null,s;if(Di(t.dataUri))n=t.dataUri;else if(ai(t.dataUri))n={},n[t.dataUriDefaultFormat||"json"]=t.dataUri;else{e(new TypeError("Peaks.init(): The dataUri option must be an object"));return}if(["ArrayBuffer","JSON"].some(function(o){if(window[o])return r=o.toLowerCase(),s=n[r],Boolean(s)}),!s){e(new Error("Peaks.init(): Unable to determine a compatible dataUri format for this browser"));return}var a=i._createXHR(s,r,t.withCredentials,function(o){if(this.readyState===4){if(this.status!==200){e(new Error("Unable to fetch remote data. HTTP status "+this.status));return}var l=tt.create(o.target.response);if(l.channels!==1&&l.channels!==2){e(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(l.bits!==8){e(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}e(null,l)}},function(){e(new Error("XHR Failed"))});a.send()};Et.prototype._buildWaveformFromLocalData=function(t,e){var i=null,n=null;if(Di(t.waveformData))i=t.waveformData;else{e(new Error("Peaks.init(): The waveformData option must be an object"));return}if(Di(i.json)?n=i.json:bf(i.arraybuffer)&&(n=i.arraybuffer),!n){e(new Error("Peaks.init(): Unable to determine a compatible waveformData format"));return}try{var r=tt.create(n);if(r.channels!==1&&r.channels!==2){e(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(r.bits!==8){e(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}e(null,r)}catch(s){e(s)}};Et.prototype._buildWaveformDataUsingWebAudio=function(t,e){var i=this,n=window.AudioContext||window.webkitAudioContext;if(!(t.webAudio.audioContext instanceof n)){e(new TypeError("Peaks.init(): The webAudio.audioContext option must be a valid AudioContext"));return}var r=t.webAudio;r.scale!==t.zoomLevels[0]&&(r.scale=t.zoomLevels[0]);var s=i._peaks.options.mediaElement.currentSrc;s?i._requestAudioAndBuildWaveformData(s,r,t.withCredentials,e):i._peaks.once("player.canplay",function(){i._requestAudioAndBuildWaveformData(i._peaks.options.mediaElement.currentSrc,r,t.withCredentials,e)})};Et.prototype._buildWaveformDataFromAudioBuffer=function(t,e){var i=t.webAudio;i.scale!==t.zoomLevels[0]&&(i.scale=t.zoomLevels[0]);var n={audio_buffer:i.audioBuffer,split_channels:i.multiChannel,scale:i.scale};tt.createFromAudio(n,e)};Et.prototype._requestAudioAndBuildWaveformData=function(t,e,i,n){var r=this;if(!t){r._peaks._logger("Peaks.init(): The mediaElement src is invalid");return}var s=r._createXHR(t,"arraybuffer",i,function(a){if(this.readyState===4){if(this.status!==200){n(new Error("Unable to fetch remote data. HTTP status "+this.status));return}var o={audio_context:e.audioContext,array_buffer:a.target.response,split_channels:e.multiChannel,scale:e.scale};tt.createFromAudio(o,n)}},function(){n(new Error("XHR Failed"))});s.send()};Et.prototype._createXHR=function(t,e,i,n,r){var s=new XMLHttpRequest;if(s.open("GET",t,!0),Za)try{s.responseType=e}catch{}return s.onload=n,s.onerror=r,Za&&i&&(s.withCredentials=!0),s};function ot(){return Ol.call(this),this.options={zoomLevels:[512,1024,2048,4096],waveformCache:!0,mediaElement:null,mediaUrl:null,dataUri:null,dataUriDefaultFormat:"json",withCredentials:!1,waveformData:null,webAudio:null,nudgeIncrement:1,segmentStartMarkerColor:"#aaaaaa",segmentEndMarkerColor:"#aaaaaa",randomizeSegmentColor:!0,segmentColor:"#ff851b",pointMarkerColor:"#39cccc",createSegmentMarker:Rf,createSegmentLabel:Df,createPointMarker:Nf,logger:console.error.bind(console)},this}ot.prototype=Object.create(Ol.prototype);var cr={playheadColor:"#111111",playheadTextColor:"#aaaaaa",axisGridlineColor:"#cccccc",showAxisLabels:!0,axisLabelColor:"#aaaaaa",fontFamily:"sans-serif",fontSize:11,fontStyle:"normal",timeLabelPrecision:2},qa={playheadClickTolerance:3,waveformColor:"rgba(0, 225, 128, 1)",wheelMode:"none"},Ja={waveformColor:"rgba(0, 0, 0, 0.2)",highlightColor:"#aaaaaa",highlightOffset:11};function zf(t){var e={};t.containers&&t.containers.overview&&(e.container=t.containers.overview),t.overviewWaveformColor&&(e.waveformColor=t.overviewWaveformColor),t.overviewHighlightOffset&&(e.highlightOffset=t.overviewHighlightOffset),t.overviewHighlightColor&&(e.highlightColor=t.overviewHighlightColor),t.overview&&t.overview.showPlayheadTime&&(e.showPlayheadTime=t.overview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","highlightColor","highlightOffset"];return i.forEach(function(n){t.overview&&oe(t.overview,n)?e[n]=t.overview[n]:oe(t,n)?e[n]=t[n]:oe(e,n)||(oe(Ja,n)?e[n]=Ja[n]:oe(cr,n)&&(e[n]=cr[n]))}),e}function Uf(t){var e={};t.containers&&t.containers.zoomview&&(e.container=t.containers.zoomview),t.zoomWaveformColor&&(e.waveformColor=t.zoomWaveformColor),t.showPlayheadTime?e.showPlayheadTime=t.showPlayheadTime:t.zoomview&&t.zoomview.showPlayheadTime&&(e.showPlayheadTime=t.zoomview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","playheadClickTolerance","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","wheelMode"];return i.forEach(function(n){t.zoomview&&oe(t.zoomview,n)?e[n]=t.zoomview[n]:oe(t,n)?e[n]=t[n]:oe(e,n)||(oe(qa,n)?e[n]=qa[n]:oe(cr,n)&&(e[n]=cr[n]))}),e}function Vf(t,e){for(var i in e)oe(e,i)&&oe(t,i)&&(t[i]=e[i]);return t}ot.init=function(t,e){var i=new ot,n=i._setOptions(t);if(n){e(n);return}var r=i.options.zoomview.container,s=i.options.overview.container;if(!Xa(r)&&!Xa(s)){e(new TypeError("Peaks.init(): The zoomview and/or overview container options must be valid HTML elements"));return}if(r&&(r.clientWidth<=0||r.clientHeight<=0)){e(new Error("Peaks.init(): Please ensure that the zoomview container is visible and has non-zero width and height"));return}if(s&&(s.clientWidth<=0||s.clientHeight<=0)){e(new Error("Peaks.init(): Please ensure that the overview container is visible and has non-zero width and height"));return}t.keyboard&&(i._keyboardHandler=new Hs(i));var a=t.player?t.player:new it(i.options.mediaElement);i.player=new qe(i,a),i.segments=new Ie(i),i.points=new Be(i),i.zoom=new _i(i,i.options.zoomLevels),i.views=new gi(i);var o=new Et(i);a.init(i).then(function(){o.init(i.options,function(l,h){if(l){e&&e(l);return}i._waveformData=h,s&&i.views.createOverview(s),r&&i.views.createZoomview(r),i._addWindowResizeHandler(),t.segments&&i.segments.add(t.segments),t.points&&i.points.add(t.points),t.emitCueEvents&&(i._cueEmitter=new lt(i)),setTimeout(function(){i.emit("peaks.ready")},0),e(null,i)})}).catch(function(l){e&&e(l)})};ot.prototype._setOptions=function(t){if(!Di(t))return new TypeError("Peaks.init(): The options parameter should be an object");if(!t.player){if(!t.mediaElement)return new Error("Peaks.init(): Missing mediaElement option");if(!(t.mediaElement instanceof HTMLMediaElement))return new TypeError("Peaks.init(): The mediaElement option should be an HTMLMediaElement")}if(t.container)return new Error("Peaks.init(): The container option has been removed, please use containers instead");if(t.logger&&!wf(t.logger))return new TypeError("Peaks.init(): The logger option should be a function");if(t.segments&&!Array.isArray(t.segments))return new TypeError("Peaks.init(): options.segments must be an array of segment objects");if(t.points&&!Array.isArray(t.points))return new TypeError("Peaks.init(): options.points must be an array of point objects");if(Vf(this.options,t),this.options.overview=zf(t),this.options.zoomview=Uf(t),Array.isArray(this.options.zoomLevels)){if(this.options.zoomLevels.length===0)return new Error("Peaks.init(): The zoomLevels array must not be empty");if(!yf(this.options.zoomLevels))return new Error("Peaks.init(): The zoomLevels array must be sorted in ascending order")}else return new TypeError("Peaks.init(): The zoomLevels option should be an array");this._logger=this.options.logger};ot.prototype.setSource=function(t,e){var i=this;this.player._setSource(t).then(function(){t.zoomLevels||(t.zoomLevels=i.options.zoomLevels);var n=new Et(i);n.init(t,function(r,s){if(r){e(r);return}i._waveformData=s,["overview","zoomview"].forEach(function(a){var o=i.views.getView(a);o&&o.setWaveformData(s)}),i.zoom.setZoomLevels(t.zoomLevels),e()})}).catch(function(n){e(n)})};ot.prototype.getWaveformData=function(){return this._waveformData};ot.prototype._addWindowResizeHandler=function(){this._onResize=this._onResize.bind(this),window.addEventListener("resize",this._onResize)};ot.prototype._onResize=function(){this.emit("window_resize")};ot.prototype._removeWindowResizeHandler=function(){window.removeEventListener("resize",this._onResize)};ot.prototype.destroy=function(){this._removeWindowResizeHandler(),this._keyboardHandler&&this._keyboardHandler.destroy(),this.views&&this.views.destroy(),this.player&&this.player.destroy(),this._cueEmitter&&this._cueEmitter.destroy()};const Xf=["src"],Yf={class:"peaks-controls"},$f=Se("\xA0 "),jf=Se("\xA0 "),Kf=bt({__name:"AudioPeaks",props:{src:null,zoomviewElementId:null,zoomviewElement:null,overviewElementId:null,overviewElement:null,mediaElementId:null,mediaElement:null,options:null},emits:["error"],setup(t,{expose:e,emit:i}){const n=t,r=gt(void 0),s=gt(null),a=gt(null),o=gt(null),l=gt(null),h=gt(null),c=gt(null),d=gt(void 0);e({peaksInstance:r}),Uo(()=>{f()}),Vo(()=>{y()});function f(){console.debug("AudioPeaks::createPeaksInstance:options:",n.options);const M=C(n.overviewElement,n.overviewElementId,s,a,"div"),x=C(n.zoomviewElement,n.zoomviewElementId,o,l,"div"),F=C(n.mediaElement,n.mediaElementId,h,c,"audio");n.options&&(n.options.containers={overview:M,zoomview:x},n.options.mediaElement=F);const B=n.options?n.options:{containers:{overview:M,zoomview:x},mediaElement:F,webAudio:{audioContext:new AudioContext},zoomLevels:[256,512,1024,2048,4096]};ot.init(B,function(K,re){K&&(console.error(K),i("error",K)),r.value=re,d.value=re==null?void 0:re.zoom.getZoom()})}function y(){var M;(M=r.value)==null||M.destroy()}function C(M,x,F,B,K){if(M)return console.debug("AudioPeaks::Found elm: ",M),M;if(x)return console.debug("AudioPeaks::Found element by id: ",x),document.getElementById(""+x);const re=F.value;if(re)return console.debug("AudioPeaks::Found element by Ref: ",re),re;const ge=B.value;if(ge){const ee=ge.getElementsByTagName(K)[0];if(ee)return console.debug("AudioPeaks::Found element by first in slot: ",ee),ee}}function I(){var M,x;(M=r.value)==null||M.zoom.zoomIn(),d.value=(x=r.value)==null?void 0:x.zoom.getZoom()}function _(){var M,x;(M=r.value)==null||M.zoom.zoomOut(),d.value=(x=r.value)==null?void 0:x.zoom.getZoom()}return(M,x)=>(me(),we("div",null,[g("div",{ref_key:"overviewSlot",ref:a},[!n.overviewElementId&&!n.overviewElement?Mn(M.$slots,"overview",{key:0},()=>[g("div",{class:"peaks-overview",ref_key:"overview",ref:s},null,512)],!0):nn("",!0)],512),g("div",{ref_key:"zoomviewSlot",ref:l},[!n.zoomviewElementId&&!n.zoomviewElement?Mn(M.$slots,"zoomview",{key:0},()=>[g("div",{class:"peaks-zoomview",ref_key:"zoomview",ref:o},null,512)],!0):nn("",!0)],512),g("div",{ref_key:"audioSlot",ref:c},[!n.mediaElementId&&!n.mediaElement?Mn(M.$slots,"default",{key:0},()=>[g("audio",{class:"peaks-audio",ref_key:"audio",ref:h,controls:""},[g("source",{src:t.src},null,8,Xf)],512)],!0):nn("",!0)],512),Mn(M.$slots,"controls",{},()=>[g("div",Yf,[g("button",{onClick:x[0]||(x[0]=F=>I())},"Zoom in"),$f,g("button",{onClick:x[1]||(x[1]=F=>_())},"Zoom out"),jf,g("span",null,"Zoom level: "+ps(Po(d)),1)])],!0)]))}});const ni=hi(Kf,[["__scopeId","data-v-f992becd"]]),Zf=g("p",null,[Se("vue-peaks provides three modes of operation: "),g("ul",null,[g("li",null,[g("b",null,"Simple mode"),Se(": just set the media URL, and all views are automatically rendered by default")]),g("li",null,[g("b",null,"Slot mode"),Se(": the media element and additional views are provided using named slots")]),g("li",null,[g("b",null,"External mode"),Se(": the media element and additional views are referenced by id or HTML element references ")])])],-1),qf=g("h4",{class:"title is-4"},'Just using a media source URL ("simple" mode)',-1),Jf={class:"columns is-desktop"},Qf={class:"column"},ep=g("p",null,[Se(" By default, the "),g("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaks.vue"},"AudioPeaks Vue component"),Se(" template has a new audio element, with the given source URL, and both view panes (overview and zoom, which are rendered with a default size) and a controls pane. A new audio context is created and used to compute the waveform. ")],-1),tp={class:"column"},ip={class:"box"},np=g("h4",{class:"title is-4"},'Providing a media element ("slot" mode)',-1),rp={class:"columns is-desktop"},sp=g("div",{class:"column"},[g("p",null," To provide your own media element, just place it inside the AudioPeaks element (a.k.a. the slot). Vue-peaks will use the first audio element in the slot. A new audio context is created and used to compute the waveform. ")],-1),ap={class:"column"},op={class:"column is-narrow"},lp={class:"box"},hp=g("span",{class:"tag is-danger is-large is-multiline"},"You can also add additional HTML content.",-1),cp=g("audio",{controls:"",style:{width:"100%"}},[g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),dp=g("h4",{class:"title is-4"},'Using a specified media element ("external" mode)',-1),up={class:"columns is-desktop"},fp=g("div",{class:"column"},[g("p",null," If you already have an existing media element, you can reference it by it's (unique) id, or as an HTMLMediaElement object. A new audio context is created and used to compute the waveform. "),g("p",null," There are also properties available for overview area and the zoom view area. ")],-1),pp={class:"column"},gp={class:"column is-narrow"},_p={class:"box"},mp=g("audio",{controls:"",id:"externalMediaElement"},[g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),vp=g("div",null,[g("span",{class:"tag is-danger is-large"}," Using the external media element above.")],-1),yp=bt({__name:"ExampleWithTheBasics",setup(t){return(e,i)=>{const n=Ut("highlightjs");return me(),we(Ue,null,[Zf,qf,g("div",Jf,[g("div",Qf,[ep,$(n,{language:"vue-typescript",code:"import AudioPeaks from 'vue-peaks/src/components/AudioPeaks.vue';"}),$(n,{language:"vue-template",code:"<AudioPeaks src='https://domain/file.mp3' />"})]),g("div",tp,[g("div",ip,[$(ni,{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})])])]),np,g("div",rp,[sp,g("div",ap,[$(n,{language:"vue-template",code:`<AudioPeaks>
  <span>You can also add additional HTML content.</span>
  <audio controls style='width: 100%;'>
    <source src='https://domain/file.mp3' />
  </audio>
</AudioPeaks>`})]),g("div",op,[g("div",lp,[$(ni,null,{default:$e(()=>[hp,cp]),_:1})])])]),dp,g("div",up,[fp,g("div",pp,[$(n,{language:"vue-template",code:`<audio controls id='externalMediaElement'>
  <source src='https://domain/file.mp3' />
</audio>
<div><span class='tag is-danger is-large'>
    Using the external media element above.</span></div>
<AudioPeaks mediaElementId='externalMediaElement'>
</AudioPeaks>`})]),g("div",gp,[g("div",_p,[mp,vp,$(ni,{mediaElementId:"externalMediaElement"})])])])],64)}}}),bp={class:"columns is-desktop"},wp=li('<div class="column"><p> To fully customize the appearance and behavior, the Peaks.js <a href="https://github.com/bbc/peaks.js#Configuration">configuration options</a> can be provided. </p><p> Note, that you should omit the the <span class="code">containers.overview</span>, <span class="code">containers.zoomview</span> and <span class="code">mediaElement</span> options, since these are set internally, depending on the view mode (explained with the basic examples). </p><p>The options allow you for example to <ul><li>customize the waveform styles</li><li>define scrolling behavior</li><li>use precomputed waveform data</li></ul></p></div>',1),Cp={class:"column"},Sp={class:"column"},xp={class:"box"},Tp=g("audio",{controls:""},[g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),kp=g("template",null,null,-1),Ep=bt({__name:"ExampleUsingPeaksOptions",setup(t){const e={overview:{waveformColor:"#3298dc",playedWaveformColor:"#238cd1",highlightColor:"hsl(206, 70%, 96%)",highlightOffset:0,axisGridlineColor:"hsl(0, 0%, 29%)",axisLabelColor:"hsl(0, 0%, 29%)",showPlayheadTime:!1},zoomview:{waveformColor:"#f1b70e",playedWaveformColor:"#d9a50d",axisGridlineColor:"hsl(0, 0%, 29%)",axisLabelColor:"hsl(0, 0%, 29%)",playheadTextColor:"#e43725",showPlayheadTime:!0},webAudio:{audioContext:new AudioContext},zoomLevels:[256],playheadColor:"#e43725"};return(i,n)=>{const r=Ut("highlightjs");return me(),we("div",bp,[wp,g("div",Cp,[$(r,{language:"vue-typescript",code:`/** The configuration options 
* @remarks The colors are taken from a Bulma color scheme.
*/
const options: PeaksOptions = {
  overview: {
    /* container is handled separately by AudioPeaks */
    waveformColor: 'hsl(204, 86%, 53%)',
    playedWaveformColor: 'hsl(204, 71%, 39%)',
    highlightColor: 'hsl(206, 70%, 96%)',
    highlightOffset: 0,
    axisGridlineColor: 'hsl(0, 0%, 29%)',
    axisLabelColor: 'hsl(0, 0%, 29%)',
  },
  zoomview: {
    /* container is handled separately by AudioPeaks */
    waveformColor: 'hsl(48, 71%, 48%)',
    playedWaveformColor: 'hsl(48, 53%, 31%)',
    axisGridlineColor: 'hsl(0, 0%, 29%)',
    axisLabelColor: 'hsl(0, 0%, 29%)',
  },
  /* mediaElement is handled separately by AudioPeaks */
  webAudio: { audioContext: new AudioContext() },
  zoomLevels: [256],
  playheadColor: 'hsl(348, 100%, 61%)'
}`}),$(r,{language:"vue-template",code:`<AudioPeaks :options='options'>
  <audio controls>
    <source src='https://domain/file.mp3' />
  </audio>
  <template #controls><template />
    <!-- Using an empty template on a slot 
         prevents the default content -->
  </template>
</AudioPeaks>`})]),g("div",Sp,[g("div",xp,[$(ni,{options:e},{controls:$e(()=>[kp]),default:$e(()=>[Tp]),_:1})])])])}}}),mi=t=>(Fo("data-v-b3ef7b4c"),t=t(),Ho(),t),Ap={class:"widget"},Pp=["disabled"],Ip={key:0,style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Mp=mi(()=>g("path",{fill:"currentColor",d:"M14,19H18V5H14M6,19H10V5H6V19Z"},null,-1)),Lp=[Mp],Op={key:1,style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Rp=mi(()=>g("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"},null,-1)),Dp=[Rp],Np=["disabled"],Fp={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Hp=mi(()=>g("path",{fill:"currentColor",d:"M14.55 20C15 20.76 15.5 21.44 15.91 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V10.22C19.5 10.08 19 10 18.5 10C18.33 10 18.17 10 18 10.03V4H13V12L10.5 9.75L8 12V4H6V20H14.55M22 15.5C22 18.1 18.5 22 18.5 22S15 18.1 15 15.5C15 13.6 16.6 12 18.5 12S22 13.6 22 15.5M19.7 15.6C19.7 15 19.1 14.4 18.5 14.4S17.3 14.9 17.3 15.6C17.3 16.2 17.8 16.8 18.5 16.8S19.8 16.2 19.7 15.6Z"},null,-1)),Wp=[Hp],Gp=["disabled"],Bp={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},zp=mi(()=>g("path",{fill:"currentColor",d:"M13.09 20C13.21 20.72 13.46 21.39 13.81 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V13.09C19.67 13.04 19.34 13 19 13C18.66 13 18.33 13.04 18 13.09V4H13V12L10.5 9.75L8 12V4H6V20H13.09M17 16V22L22 19L17 16Z"},null,-1)),Up=[zp],Vp=mi(()=>g("template",null,null,-1)),Xp=["src"],Yp=mi(()=>g("template",null,null,-1)),$p={class:"item peaks-overview",id:"widgetOverview"},jp=["title"],Kp={class:"spin",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Zp=mi(()=>g("path",{fill:"currentColor",d:"M12 19C13.1 19 14 19.9 14 21S13.1 23 12 23 10 22.1 10 21 10.9 19 12 19M12 1C13.1 1 14 1.9 14 3S13.1 5 12 5 10 4.1 10 3 10.9 1 12 1M6 16C7.1 16 8 16.9 8 18S7.1 20 6 20 4 19.1 4 18 4.9 16 6 16M3 10C4.1 10 5 10.9 5 12S4.1 14 3 14 1 13.1 1 12 1.9 10 3 10M6 4C7.1 4 8 4.9 8 6S7.1 8 6 8 4 7.1 4 6 4.9 4 6 4M18 16C19.1 16 20 16.9 20 18S19.1 20 18 20 16 19.1 16 18 16.9 16 18 16M21 10C22.1 10 23 10.9 23 12S22.1 14 21 14 19 13.1 19 12 19.9 10 21 10M18 4C19.1 4 20 4.9 20 6S19.1 8 18 8 16 7.1 16 6 16.9 4 18 4Z"},null,-1)),qp=[Zp],Jp={key:1},Qp={key:2,class:"has-text-danger"},eg=bt({__name:"AudioPeaksWidget",props:{src:null},setup(t){const e=t,i=gt(),n=xi(()=>{var c;return(c=i.value)==null?void 0:c.peaksInstance}),r=gt(null),s=oi({isPlaying:!1,canPlay:!1,bookmark:0,lastErrorMessage:""}),a={overview:{waveformColor:"#2ecc71",playedWaveformColor:"#29b765",showAxisLabels:!1,axisGridlineColor:"hsl(0, 0%, 100%)",playheadTextColor:"#e43725",showPlayheadTime:!0},showPlayheadTime:!0,webAudio:{audioContext:new AudioContext},playheadColor:"#e43725"};function o(){var c,d;s.isPlaying=!s.isPlaying,s.isPlaying?(c=r.value)==null||c.play():(d=r.value)==null||d.pause()}function l(){var d,f;const c=(d=n.value)==null?void 0:d.player.getCurrentTime();c&&((f=n.value)==null||f.points.add({time:c,editable:!0,labelText:"Bookmark",color:"#000000"}),s.bookmark=c)}function h(){var c;(c=n.value)==null||c.player.seek(s.bookmark)}return(c,d)=>(me(),we("div",Ap,[g("button",{class:"item",onClick:d[0]||(d[0]=f=>o()),disabled:!s.canPlay},[s.isPlaying?(me(),we("svg",Ip,Lp)):(me(),we("svg",Op,Dp))],8,Pp),g("button",{class:"item",onClick:d[1]||(d[1]=f=>l()),disabled:!s.canPlay,title:"set bookmark"},[(me(),we("svg",Fp,Wp))],8,Np),g("button",{class:"item",onClick:d[2]||(d[2]=f=>h()),disabled:!s.bookmark,title:"seek bookmark"},[(me(),we("svg",Bp,Up))],8,Gp),$(ni,{overviewElementId:"widgetOverview",ref_key:"audioPeaks",ref:i,options:a,onError:d[4]||(d[4]=f=>s.lastErrorMessage=f.message)},{zoomview:$e(()=>[Vp]),default:$e(()=>[g("audio",{ref_key:"audio",ref:r,onCanplay:d[3]||(d[3]=()=>{s.canPlay=!0})},[g("source",{src:e.src},null,8,Xp)],544)]),controls:$e(()=>[Yp]),_:1},512),g("div",$p,[e.src?(me(),we("div",{key:0,title:`Loading and rendering from ${e.src}`},[(me(),we("svg",Kp,qp))],8,jp)):(me(),we("span",Jp,"no media available")),s.lastErrorMessage?(me(),we("span",Qp,ps(s.lastErrorMessage),1)):nn("",!0)])]))}});const tg=hi(eg,[["__scopeId","data-v-b3ef7b4c"]]),ig={class:"columns"},ng=g("div",{class:"column"},[g("p",null," This is a showcase for a simple snippets player. The player is available with vue-peaks as ready-made component, which you can use as-is or adapt it to your needs. ")],-1),rg={class:"column"},sg={class:"column"},ag={class:"box"},og={class:"field"},lg={class:"control"},hg={class:"columns"},cg={class:"column"},dg=g("p",null,[Se("For your reference, here's the complete Widget SFC (as available from "),g("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaksWidget.vue"},"GitHub"),Se(")")],-1),ug=bt({__name:"DemoWidget",setup(t){const e=oi({url:""});return(i,n)=>{const r=Ut("highlightjs");return me(),we(Ue,null,[g("div",ig,[ng,g("div",rg,[$(r,{language:"vue-typescript",code:`import AudioPeaksWidget 
from 'vue-peaks/src/components/AudioPeaksWidget.vue';
const state = reactive({ url: '' });`}),$(r,{language:"vue-template",code:`<input type='url' 
       v-model='state.url' 
       placeholder='Paste an URL to a media file' />
<!-- The :key property makes sure that the component 
     is re-rendered on every URL change, causing
     a re-render of the waveform -->       
<AudioPeaksWidget :src='state.url' 
                  :key='state.url'>
</AudioPeaksWidget>`})]),g("div",sg,[g("div",ag,[g("div",og,[g("div",lg,[Yo(g("input",{class:"input",type:"url","onUpdate:modelValue":n[0]||(n[0]=s=>e.url=s),placeholder:"Paste an URL to a media file"},null,512),[[Sd,e.url]])])]),(me(),Sr(tg,{src:e.url,key:e.url},null,8,["src"]))])])]),g("div",hg,[g("div",cg,[dg,$(r,{language:"vue-sfc",code:`<script setup lang='ts'>
import type { PeaksOptions } from 'peaks.js';
import { computed, reactive, shallowRef } from 'vue';
import AudioPeaks from './AudioPeaks.vue';

/** Reference to the AudioPeaks component */
const audioPeaks = shallowRef<InstanceType<typeof AudioPeaks>>()

/** Accessor to the peaks instance from the AudioPeaks component
 * @remarks Allows access to the peaks.js instance to call various functions on the API.
 */
const peaksInstance = computed(() => audioPeaks.value?.peaksInstance);
const audio = shallowRef<HTMLAudioElement | null>(null);
const state = reactive({ isPlaying: false, canPlay: false, bookmark: 0, lastErrorMessage: '' });

const props = defineProps<{
  /** The media source URL
   */
  src?: string;
}>();

/** The configuration options
 */
const options: PeaksOptions = {
  overview: {
    /* The container div is provided and handled internally by AudioPeaks */
    waveformColor: '#2ecc71',
    playedWaveformColor: '#29b765',
    showAxisLabels: false,
    axisGridlineColor: 'hsl(0, 0%, 100%)',
    playheadTextColor: '#e43725',
    showPlayheadTime: true
  },
  showPlayheadTime: true,
  /* The widget does not use a zoom area */

  /* The mediaElement is provided and handled internally by AudioPeaks */
  webAudio: { audioContext: new AudioContext() },
  playheadColor: '#e43725',
};



/** Toggles playback
 * @devdoc Directly uses the audio element instead of the peaks.js player API 
 * to allow control even when the waveform is not yet ready.
 */
function togglePlayback() {
  state.isPlaying = !state.isPlaying;
  if (state.isPlaying) {
    audio.value?.play();
  } else {
    audio.value?.pause();
  }
}

/** Sets a bookmark at the current position
 */
function setBookmark() {
  const currentTime = peaksInstance.value?.player.getCurrentTime();
  if (currentTime) {
    peaksInstance.value?.points.add({
      time: currentTime,
      editable: true,
      labelText: 'Bookmark',
      color: '#000000'
    });
    state.bookmark = currentTime;
  }
}

/** Seeks to the stored bookmark
 */
function seekBookmark() {
  peaksInstance.value?.player.seek(state.bookmark);
}
<\/script>
<template>
  <div class='widget'>
    <button class='item' @click='togglePlayback()' :disabled='!state.canPlay'>
      <!-- pause icon -->
      <svg v-if='state.isPlaying' style='width: 24px; height: 24px' viewBox='0 0 24 24'>
        <path fill='currentColor' d='M14,19H18V5H14M6,19H10V5H6V19Z' />
      </svg>
      <!-- play icon -->
      <svg v-else style='width: 24px; height: 24px' viewBox='0 0 24 24'>
        <path fill='currentColor' d='M8,5.14V19.14L19,12.14L8,5.14Z' />
      </svg>
    </button>
    <button class='item' @click='setBookmark()' :disabled='!state.canPlay' title='set bookmark'>
      <!-- bookmark icon -->
      <svg style='width: 24px; height: 24px' viewBox='0 0 24 24'>
        <path fill='currentColor'
          d='M14.55 20C15 20.76 15.5 21.44 15.91 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V10.22C19.5 10.08 19 10 18.5 10C18.33 10 18.17 10 18 10.03V4H13V12L10.5 9.75L8 12V4H6V20H14.55M22 15.5C22 18.1 18.5 22 18.5 22S15 18.1 15 15.5C15 13.6 16.6 12 18.5 12S22 13.6 22 15.5M19.7 15.6C19.7 15 19.1 14.4 18.5 14.4S17.3 14.9 17.3 15.6C17.3 16.2 17.8 16.8 18.5 16.8S19.8 16.2 19.7 15.6Z' />
      </svg>
    </button>
    <button class='item' @click='seekBookmark()' :disabled='!state.bookmark' title='seek bookmark'>
      <!-- bookmark seek icon -->
      <svg style='width: 24px; height: 24px' viewBox='0 0 24 24'>
        <path fill='currentColor'
          d='M13.09 20C13.21 20.72 13.46 21.39 13.81 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V13.09C19.67 13.04 19.34 13 19 13C18.66 13 18.33 13.04 18 13.09V4H13V12L10.5 9.75L8 12V4H6V20H13.09M17 16V22L22 19L17 16Z' />
      </svg>
    </button>
    <AudioPeaks overviewElementId='widgetOverview' ref='audioPeaks' :options='options'
      @error='(err) => state.lastErrorMessage = err.message'>
      <template #zoomview>
        <template />
      </template>
      <template #default>
        <audio ref='audio' @canplay='
          () => {
            state.canPlay = true;
          }
        '>
          <source :src='props.src' />
        </audio>
      </template>
      <template #controls>
        <template />
      </template>
    </AudioPeaks>
    <div class='item peaks-overview' id='widgetOverview'>
      <div v-if='props.src' :title='\`Loading and rendering from \${props.src}\`'>
        <!-- spinner icon -->
        <svg class='spin' style='width: 24px; height: 24px' viewBox='0 0 24 24'>
          <path fill='currentColor'
            d='M12 19C13.1 19 14 19.9 14 21S13.1 23 12 23 10 22.1 10 21 10.9 19 12 19M12 1C13.1 1 14 1.9 14 3S13.1 5 12 5 10 4.1 10 3 10.9 1 12 1M6 16C7.1 16 8 16.9 8 18S7.1 20 6 20 4 19.1 4 18 4.9 16 6 16M3 10C4.1 10 5 10.9 5 12S4.1 14 3 14 1 13.1 1 12 1.9 10 3 10M6 4C7.1 4 8 4.9 8 6S7.1 8 6 8 4 7.1 4 6 4.9 4 6 4M18 16C19.1 16 20 16.9 20 18S19.1 20 18 20 16 19.1 16 18 16.9 16 18 16M21 10C22.1 10 23 10.9 23 12S22.1 14 21 14 19 13.1 19 12 19.9 10 21 10M18 4C19.1 4 20 4.9 20 6S19.1 8 18 8 16 7.1 16 6 16.9 4 18 4Z' />
        </svg>
      </div>
      <span v-else>no media available</span>
      <span v-if='state.lastErrorMessage' class='has-text-danger'>{{state.lastErrorMessage}}</span>
    </div>
  </div>
</template>
<style scoped>
.widget {
  height: 48px;
  align-items: center;
  display: flex;
  flex-wrap: nowrap;
  justify-content: flex-start;
}

.item {
  height: 48px;
  display: flex;
  justify-content: center;
  align-items: center;
  border: 1px solid var(--color-border);
  background: var(--color-background);
  border-radius: 8px;
  cursor: pointer;
  padding-left: 1em;
  padding-right: 1em;
  text-align: center;
}

/** The overview item should use all available space, including in the item itself */
.item.peaks-overview {
  flex-grow: 1;
  padding-left: 0;
  padding-right: 0;
}

.widget .item:not(:last-child) {
  border-bottom-right-radius: 0;
  border-top-right-radius: 0;
  margin-right: -1px;
}

.widget .item:not(:first-child) {
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(359deg);
  }
}

.spin {
  animation: spin 6s linear infinite;
}
</style>`})])])],64)}}}),fg={class:"columns"},pg={class:"column"},gg=g("p",null,[Se("You might need to access the peaks.js instance to call various functions on their extensive "),g("a",{href:"https://github.com/bbc/peaks.js#api>"},"API"),Se(".")],-1),_g=g("p",null," In the hosting component, get a reference to the AudioPeaks child component and, for convenience, a directly computed property to the actual peaks.js instance: ",-1),mg=g("p",null," Now you can access the instance and it's methods by using the reference, like in this example: ",-1),vg=g("p",null," Remember, that the instance is available only after the child has been mounted and peaks.js has been initialized. ",-1),yg=bt({__name:"AccessingThePeaksInstance",setup(t){return oi({url:""}),(e,i)=>{const n=Ut("highlightjs");return me(),we("div",fg,[g("div",pg,[gg,_g,g("p",null,[$(n,{language:"vue-typescript",code:`/** Reference to the AudioPeaks component */
const audioPeaks = shallowRef<InstanceType<typeof AudioPeaks>>()

/** Accessor to the peaks instance from the AudioPeaks component
 * @remarks Allows access to the peaks.js instance 
 * to call various functions on the API.
 */
const peaksInstance = computed(() => audioPeaks.value?.peaksInstance);`})]),mg,g("p",null,[$(n,{language:"vue-typescript",code:`/** Sets a bookmark at the current position
 */
function setBookmark() {
  const currentTime = peaksInstance.value?.player.getCurrentTime();
  if (currentTime) {
    peaksInstance.value?.points.add({
      time: currentTime
    });
    state.bookmark = currentTime;
  }
}`})]),vg])])}}}),bg={class:"columns is-desktop"},wg=li('<div class="column"><p> AudioPeaks currently does not support reactivity for the options. Still, you can use Vue&#39;s reactivity on the component itself. You can for example: </p><p><ul><li>Conditionally render the component (by using Vue&#39;s built-in <span class="code">v-if</span> directive). This also releases memory used. </li><li>Replace the media source by setting the <span class="code">src</span> attribute of the audio element. When you also set the <span class="code">:key</span> property to a new value, the component re-renders. <br>This is called the key-changing technique, and is required to trigger an update of the waveform.</li></ul></p></div>',1),Cg={class:"column is-narrow"},Sg={class:"box"},xg={class:"field"},Tg=g("label",{class:"label is-multiline"},"Create and destroy an AudioPeaks instance:",-1),kg={class:"control"},Eg={class:"field"},Ag=g("label",{class:"label is-multiline"},"Change the media URL (triggers re-rendering).",-1),Pg={class:"control"},Ig={class:"select is-danger"},Mg=g("option",{value:""},"-select option-",-1),Lg=g("option",{value:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"},"An MP3 music file ",-1),Og=g("option",{value:"https://suterma.github.io/vue-peaks/lidija_roos-decisions.ogg"},"An OGG music file ",-1),Rg=g("option",{value:"https://twit.cachefly.net/audio/sn/sn0886/sn0886.mp3"},"Security Now! Podcast, Episode #886 (112 min, 55.5MB, MP3)",-1),Dg=[Mg,Lg,Og,Rg],Ng=["src"],Fg=g("template",null,null,-1),Hg=g("template",null,null,-1),Wg={class:"column"},Gg=bt({__name:"ExampleUsingReactivity",setup(t){const e=oi({isRendered:!0,mediaSource:""});function i(){const n=e.isRendered;console.log("CurrentState",n),e.isRendered=!n}return(n,r)=>{const s=Ut("highlightjs");return me(),we("div",bg,[wg,g("div",Cg,[g("div",Sg,[g("div",xg,[Tg,g("div",kg,[g("button",{onClick:r[0]||(r[0]=a=>i()),class:"button is-danger"},[g("span",null,ps(e.isRendered?"Destroy":"Render"),1)])])]),g("div",Eg,[Ag,g("div",Pg,[g("div",Ig,[Yo(g("select",{"onUpdate:modelValue":r[1]||(r[1]=a=>e.mediaSource=a),class:"highlight"},Dg,512),[[xd,e.mediaSource]])])])]),e.isRendered?(me(),Sr(ni,{key:e.mediaSource},{zoomview:$e(()=>[Fg]),controls:$e(()=>[Hg]),default:$e(()=>[g("audio",{controls:"",src:e.mediaSource},null,8,Ng)]),_:1})):nn("",!0)])]),g("div",Wg,[$(s,{language:"vue-template",code:`<div class='field'>
  <label class='label'>Example button to create
    and destroy an AudioPeaks instance:</label>
  <div class='control'>
    <button @click='toggleRendering()' class='button  is-danger'>
      <span>{{ state.isRendered ? 'Destroy' : 'Render' }}</span>
    </button>
  </div>
</div>
<div class='field'>
  <label class='label'>Example menu to change the media URL,
    with automatic re-rendering of the
    component.</label>
  <div class='control'>
    <div class='select is-danger'>
      <select v-model='state.mediaSource' class='highlight'>
        <option value=''>-select option-</option>
        <option value='https://example.com/file1.mp3'>
          An MP3 music file
        </option>
        <option value='https://example.com/file2.ogg'>
          An OGG music file
        </option>
        <option value='https://example.com/file3.mp3'>
          Podcast
        </option>
      </select>
    </div>
  </div>
</div>
<AudioPeaks v-if='state.isRendered' :key='state.mediaSource'>
  <audio controls :src='state.mediaSource'></audio>
  <template #zoomview>
    <template />
  </template>
  <template #controls>
    <template />
  </template>
</AudioPeaks>`})])])}}}),Bg={class:"columns is-desktop"},zg=li('<div class="column"><p> To provide your own layout, you can also use the <a href="https://vuejs.org/guide/components/slots.html#named-slots">named slots</a>: <li><span class="code">#overview</span></li><li><span class="code">#zoomview</span></li><li><span class="code">#audio</span> (default)</li><li><span class="code">#controls</span></li></p><p>This allows you for example to <ul><li>layout elements differently</li><li>not render (instead of just not show) elements</li><li>have a completely custom media element</li></ul> You can use any of the media element modes with named slots. Use <span class="code">$refs</span> to access the relevant HTML elements.</p><p>You can use a different mode for each slot, thus mixing the &quot;slot&quot; mode with the &quot;external&quot; mode in the same component.</p></div>',1),Ug={class:"column"},Vg={class:"column is-narrow",style:{"max-width":"400px"}},Xg={class:"box"},Yg=g("div",{style:{height:"50px"}},null,-1),$g=g("span",{class:"tag is-danger is-large"}," Some slot content here.",-1),jg=g("span",{class:"tag is-danger is-large is-multiline"}," In this example, the audio control is not shown, but some custom buttons instead:",-1),Kg={ref:"audio"},Zg=g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"},null,-1),qg=[Zg],Jg=Se("\xA0 "),Qg=g("template",null,null,-1),e_=g("span",{class:"tag is-danger is-large is-multiline"}," No zoom controls are shown, by providing an empty template to the named controls slot.",-1),t_=bt({__name:"ExampleUsingSlots",setup(t){return(e,i)=>{const n=Ut("highlightjs");return me(),we("div",Bg,[zg,g("div",Ug,[$(n,{language:"vue-template",code:`<AudioPeaks>
  <template #overview>
    <div style='height: 50px;'></div>
    <span class='tag is-danger is-large'>
      Some slot content here.</span>
  </template>
  <template #default>
    <span class='tag is-danger is-large is-multiline'>
      In this example, the audio control is not shown,
      but some custom
      buttons instead:</span>
    <audio ref='audio'>
      <source src='https://domain/file.mp3' />
    </audio>
    <button @click='($refs.audio as HTMLAudioElement).play()'>
      Play
    </button>\xA0
    <button @click='($refs.audio as HTMLAudioElement).pause()'>
      Pause
    </button>
  </template>
  <template #controls>
    <template />
  </template>
</AudioPeaks>
<span class='tag is-danger is-large is-multiline'>
  No zoom controls are shown, by providing an empty template
  to the named controls slot.</span>`})]),g("div",Vg,[g("div",Xg,[$(ni,null,{overview:$e(()=>[Yg,$g]),default:$e(()=>[jg,g("audio",Kg,qg,512),g("button",{onClick:i[0]||(i[0]=r=>e.$refs.audio.play())}," Play "),Jg,g("button",{onClick:i[1]||(i[1]=r=>e.$refs.audio.pause())}," Pause ")]),controls:$e(()=>[Qg]),_:1}),e_])])])}}}),i_={},n_=Se(" This project aims to simplify the use of peaks.js in a Vue3 environment. Explore the below examples or see the "),r_=g("a",{target:"_blank",href:"https://github.com/suterma/vue-peaks#vue-peaks"},"vue-peaks documentation on GitHub",-1),s_=Se(". "),a_=[n_,r_,s_];function o_(t,e){return me(),we("p",null,a_)}const l_=hi(i_,[["render",o_]]),h_={},c_=li('<p>This project uses</p><ul><li><a href="https://vuejs.org/" target="_blank">Vue.js</a>, the progressive JavaScript framework. (Released under the MIT License, Copyright \xA9 2014-2021 Evan You) </li><li><a href="https://vuex.vuejs.org/" target="_blank">peaks.js</a>, a client-side JavaScript component to display and interact with audio waveforms in the browser. (Released under the LGPL-3.0 license, by the British Broadcasting Corporation and contributors) </li><li><a href="https://bulma.io/" target="_blank">Bulma</a>, the modern CSS framework that just works. (Released under the MIT License, by Jeremy Thomas) </li><li><a href="https://jenil.github.io/bulmaswatch/" target="_blank">Bulmaswatch</a>, free themes for Bulma. (Released under the MIT License, by Jenil Gogari) </li><li><a href="https://materialdesignicons.com/" target="_blank">Material Design Icons</a>, the original. Following Google&#39;s Material Design guidelines for system icons. (Icons released under the Apache 2.0 License, by pictogrammers.com) </li><li><a href="https://jestjs.io/" target="_blank"> Jest</a>, a delightful JavaScript Testing Framework. (Released under the MIT License, by Facebook) </li><li> Music from the Album &quot;Not For Sale&quot; by Lidija Roos (Released to the public, by Lidija Roos) </li></ul>',2);function d_(t,e){return c_}const u_=hi(h_,[["render",d_]]),f_={},p_={class:"columns"},g_=g("div",{class:"column"},[g("p",null,[Se(" Vue-peaks offers it's own properties for customization. Plus you can configure the underlying peaks.js instance via the options property (of type "),g("span",{class:"code"},"PeaksOptions"),Se("). ")])],-1),__={class:"column"};function m_(t,e){const i=Ut("highlightjs");return me(),we("div",p_,[g_,g("div",__,[$(i,{language:"vue-typescript",code:`const props = defineProps<{
  /** The audio source URL (for the 'simple' mode)
   * @remarks This URL is to be used internally with the default media slot
   * (no slot template or external media element id is expected)
   */
  src?: string;
  /** The unique identifier of an external zoomview element to use.
   * @remarks Allows the use of an external zoomview element.
   * (no slot template is expected or used for the zoomview)
   */
  zoomviewElementId?: string;
  /** The zoomview element to use.
   * @remarks Allows the use of an external zoomview element.
   * (no slot template is expected or used for the zoomview)
   */
  zoomviewElement?: HTMLDivElement;
  /** The unique identifier of an external overview element to use.
   * @remarks Allows the use of an external overview element.
   * (no slot template is expected or used for the overview)
   */
  overviewElementId?: string;
  /** The overview element to use.
   * @remarks Allows the use of an external overview element.
   * (no slot template is expected or used for the overview)
   */
  overviewElement?: HTMLDivElement;
  /** The unique identifier of an external media element to use. 
   * (for the 'external' mode)
   * @remarks Allows the use of an external media element.
   * (no slot template or audio source URL is expected)
   */
  mediaElementId?: string;
  /** The external media element to use. (for the 'external' mode)
   * @remarks Allows the use of an external media element.
   * (no slot template or audio source URL is expected)
   */
  mediaElement?: HTMLMediaElement;
  /** The peaks options to use.
   * @remarks The element references to the overview, zoomview and media element
   * should not be provided, because these are handled internally by AudioPeaks.
   * This removes the burden of management of the Vue ref lifecycle from the user.
   * @devdoc Refs to HTML elements can only be accessed after mount.
   * See https://vuejs.org/guide/essentials/template-refs.html#accessing-the-refs
   */
  options?: PeaksOptions;
}>();`})])])}const v_=hi(f_,[["render",m_]]),At=t=>(Fo("data-v-e1b58338"),t=t(),Ho(),t),y_=li('<section class="hero is-light" data-v-e1b58338><div class="hero-body has-text-centered" data-v-e1b58338><img alt="Vue logo" class="logo" src="'+Pd+'" width="125" height="125" data-v-e1b58338><h1 class="title is-1" data-v-e1b58338>vue-peaks</h1><h2 class="subtitle is-3" data-v-e1b58338> A lightweight Vue wrapper around the <a target="_blank" href="https://github.com/bbc/peaks.js/" data-v-e1b58338>bbc/peaks.js</a> audio waveform UI component. </h2></div></section>',1),b_={class:"section"},w_={class:"no-container"},C_={class:"columns"},S_=li('<div class="column is-2" data-v-e1b58338><aside class="is-medium menu" data-v-e1b58338><p class="menu-label" data-v-e1b58338> Topics </p><ul class="menu-list" data-v-e1b58338><li data-v-e1b58338><a href="#basic-examples" data-v-e1b58338> Basic examples</a></li><li data-v-e1b58338><a href="#available-properties" data-v-e1b58338> Properties</a></li><li data-v-e1b58338><a href="#setting-styles" data-v-e1b58338>Setting styles</a></li><li data-v-e1b58338><a href="#using-slots" data-v-e1b58338>Using slots</a></li><li data-v-e1b58338><a href="#using-options" data-v-e1b58338>Options</a></li><li data-v-e1b58338><a href="#accessing-instance" data-v-e1b58338>Accessing the instance</a></li><li data-v-e1b58338><a href="#using-reactivity" data-v-e1b58338>Using reactivity</a></li><li data-v-e1b58338><a href="#player-widget" data-v-e1b58338>A widget</a></li><li data-v-e1b58338><a href="#credits" data-v-e1b58338>Credits</a></li></ul></aside></div>',1),x_={class:"column is-10"},T_={class:"content"},k_={class:"example"},E_=At(()=>g("h3",{id:"basic-examples",class:"title is-3"},"Basic examples",-1)),A_={class:"example"},P_=At(()=>g("h3",{id:"available-properties",class:"title is-3"},"Available properties",-1)),I_={class:"example"},M_=At(()=>g("h3",{id:"setting-styles",class:"title is-3"},"Setting styles",-1)),L_={class:"example"},O_=At(()=>g("h3",{id:"using-slots",class:"title is-3"},"Using slots for custom views",-1)),R_={class:"example"},D_=At(()=>g("h3",{id:"using-options",class:"title is-3"},"Using peaks.js configuration options ",-1)),N_={class:"example"},F_=At(()=>g("h3",{id:"accessing-instance",class:"title is-3"}," Accessing the peaks.js instance ",-1)),H_=At(()=>g("h3",{id:"using-reactivity",class:"title is-3"},"Using reactivity",-1)),W_={class:"example"},G_=At(()=>g("h3",{id:"player-widget",class:"title is-3"},"A waveform player widget",-1)),B_={class:"example"},z_=At(()=>g("h3",{id:"credits",class:"title is-3"},"Credits",-1)),U_={class:"example"},V_=li('<footer class="footer" data-v-e1b58338><section class="section" data-v-e1b58338><div class="container has-text-centered" data-v-e1b58338><p data-v-e1b58338><a href="https://github.com/suterma/vue-peaks" data-v-e1b58338>vue-peaks</a> is created with love by <a href="https://marcelsuter.ch" data-v-e1b58338>Marcel Suter</a> for the <a href="http://replayer.app" data-v-e1b58338>Replayer</a> project. </p></div></section></footer>',1),X_=bt({__name:"App",setup(t){return(e,i)=>(me(),we(Ue,null,[y_,g("section",b_,[g("div",w_,[g("div",C_,[S_,g("div",x_,[g("div",T_,[g("article",k_,[$(l_)]),E_,g("article",A_,[$(yp)]),P_,g("article",I_,[$(v_)]),M_,g("article",L_,[$(Dd)]),O_,g("article",R_,[$(t_)]),D_,g("article",N_,[$(Ep)]),F_,g("article",null,[$(yg)]),H_,g("article",W_,[$(Gg)]),G_,g("article",B_,[$(ug)]),z_,g("article",U_,[$(u_)])])])])])]),V_],64))}});const Y_=hi(X_,[["__scopeId","data-v-e1b58338"]]);var Ws={exports:{}};function Gs(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){var i=t[e];typeof i=="object"&&!Object.isFrozen(i)&&Gs(i)}),t}Ws.exports=Gs;Ws.exports.default=Gs;class Qa{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function Ul(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Nt(t,...e){const i=Object.create(null);for(const n in t)i[n]=t[n];return e.forEach(function(n){for(const r in n)i[r]=n[r]}),i}const $_="</span>",eo=t=>!!t.scope||t.sublanguage&&t.language,j_=(t,{prefix:e})=>{if(t.includes(".")){const i=t.split(".");return[`${e}${i.shift()}`,...i.map((n,r)=>`${n}${"_".repeat(r+1)}`)].join(" ")}return`${e}${t}`};class K_{constructor(e,i){this.buffer="",this.classPrefix=i.classPrefix,e.walk(this)}addText(e){this.buffer+=Ul(e)}openNode(e){if(!eo(e))return;let i="";e.sublanguage?i=`language-${e.language}`:i=j_(e.scope,{prefix:this.classPrefix}),this.span(i)}closeNode(e){!eo(e)||(this.buffer+=$_)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const to=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class Bs{constructor(){this.rootNode=to(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const i=to({scope:e});this.add(i),this.stack.push(i)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,i){return typeof i=="string"?e.addText(i):i.children&&(e.openNode(i),i.children.forEach(n=>this._walk(e,n)),e.closeNode(i)),e}static _collapse(e){typeof e!="string"&&(!e.children||(e.children.every(i=>typeof i=="string")?e.children=[e.children.join("")]:e.children.forEach(i=>{Bs._collapse(i)})))}}class Z_ extends Bs{constructor(e){super(),this.options=e}addKeyword(e,i){e!==""&&(this.openNode(i),this.addText(e),this.closeNode())}addText(e){e!==""&&this.add(e)}addSublanguage(e,i){const n=e.root;n.sublanguage=!0,n.language=i,this.add(n)}toHTML(){return new K_(this,this.options).value()}finalize(){return!0}}function mn(t){return t?typeof t=="string"?t:t.source:null}function Vl(t){return vi("(?=",t,")")}function q_(t){return vi("(?:",t,")*")}function J_(t){return vi("(?:",t,")?")}function vi(...t){return t.map(i=>mn(i)).join("")}function Q_(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function zs(...t){const e=Q_(t);return"("+(e.capture?"":"?:")+t.map(n=>mn(n)).join("|")+")"}function Xl(t){return new RegExp(t.toString()+"|").exec("").length-1}function em(t,e){const i=t&&t.exec(e);return i&&i.index===0}const tm=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Us(t,{joinWith:e}){let i=0;return t.map(n=>{i+=1;const r=i;let s=mn(n),a="";for(;s.length>0;){const o=tm.exec(s);if(!o){a+=s;break}a+=s.substring(0,o.index),s=s.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?a+="\\"+String(Number(o[1])+r):(a+=o[0],o[0]==="("&&i++)}return a}).map(n=>`(${n})`).join(e)}const im=/\b\B/,Yl="[a-zA-Z]\\w*",Vs="[a-zA-Z_]\\w*",$l="\\b\\d+(\\.\\d+)?",jl="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Kl="\\b(0b[01]+)",nm="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",rm=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=vi(e,/.*\b/,t.binary,/\b.*/)),Nt({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(i,n)=>{i.index!==0&&n.ignoreMatch()}},t)},vn={begin:"\\\\[\\s\\S]",relevance:0},sm={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[vn]},am={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[vn]},om={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Rr=function(t,e,i={}){const n=Nt({scope:"comment",begin:t,end:e,contains:[]},i);n.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const r=zs("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return n.contains.push({begin:vi(/[ ]+/,"(",r,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),n},lm=Rr("//","$"),hm=Rr("/\\*","\\*/"),cm=Rr("#","$"),dm={scope:"number",begin:$l,relevance:0},um={scope:"number",begin:jl,relevance:0},fm={scope:"number",begin:Kl,relevance:0},pm={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[vn,{begin:/\[/,end:/\]/,relevance:0,contains:[vn]}]}]},gm={scope:"title",begin:Yl,relevance:0},_m={scope:"title",begin:Vs,relevance:0},mm={begin:"\\.\\s*"+Vs,relevance:0},vm=function(t){return Object.assign(t,{"on:begin":(e,i)=>{i.data._beginMatch=e[1]},"on:end":(e,i)=>{i.data._beginMatch!==e[1]&&i.ignoreMatch()}})};var Vn=Object.freeze({__proto__:null,MATCH_NOTHING_RE:im,IDENT_RE:Yl,UNDERSCORE_IDENT_RE:Vs,NUMBER_RE:$l,C_NUMBER_RE:jl,BINARY_NUMBER_RE:Kl,RE_STARTERS_RE:nm,SHEBANG:rm,BACKSLASH_ESCAPE:vn,APOS_STRING_MODE:sm,QUOTE_STRING_MODE:am,PHRASAL_WORDS_MODE:om,COMMENT:Rr,C_LINE_COMMENT_MODE:lm,C_BLOCK_COMMENT_MODE:hm,HASH_COMMENT_MODE:cm,NUMBER_MODE:dm,C_NUMBER_MODE:um,BINARY_NUMBER_MODE:fm,REGEXP_MODE:pm,TITLE_MODE:gm,UNDERSCORE_TITLE_MODE:_m,METHOD_GUARD:mm,END_SAME_AS_BEGIN:vm});function ym(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function bm(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function wm(t,e){!e||!t.beginKeywords||(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=ym,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function Cm(t,e){!Array.isArray(t.illegal)||(t.illegal=zs(...t.illegal))}function Sm(t,e){if(!!t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function xm(t,e){t.relevance===void 0&&(t.relevance=1)}const Tm=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const i=Object.assign({},t);Object.keys(t).forEach(n=>{delete t[n]}),t.keywords=i.keywords,t.begin=vi(i.beforeMatch,Vl(i.begin)),t.starts={relevance:0,contains:[Object.assign(i,{endsParent:!0})]},t.relevance=0,delete i.beforeMatch},km=["of","and","for","in","not","or","if","then","parent","list","value"],Em="keyword";function Zl(t,e,i=Em){const n=Object.create(null);return typeof t=="string"?r(i,t.split(" ")):Array.isArray(t)?r(i,t):Object.keys(t).forEach(function(s){Object.assign(n,Zl(t[s],e,s))}),n;function r(s,a){e&&(a=a.map(o=>o.toLowerCase())),a.forEach(function(o){const l=o.split("|");n[l[0]]=[s,Am(l[0],l[1])]})}}function Am(t,e){return e?Number(e):Pm(t)?0:1}function Pm(t){return km.includes(t.toLowerCase())}const io={},ri=t=>{console.error(t)},no=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Si=(t,e)=>{io[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),io[`${t}/${e}`]=!0)},dr=new Error;function ql(t,e,{key:i}){let n=0;const r=t[i],s={},a={};for(let o=1;o<=e.length;o++)a[o+n]=r[o],s[o+n]=!0,n+=Xl(e[o-1]);t[i]=a,t[i]._emit=s,t[i]._multi=!0}function Im(t){if(!!Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw ri("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),dr;if(typeof t.beginScope!="object"||t.beginScope===null)throw ri("beginScope must be object"),dr;ql(t,t.begin,{key:"beginScope"}),t.begin=Us(t.begin,{joinWith:""})}}function Mm(t){if(!!Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw ri("skip, excludeEnd, returnEnd not compatible with endScope: {}"),dr;if(typeof t.endScope!="object"||t.endScope===null)throw ri("endScope must be object"),dr;ql(t,t.end,{key:"endScope"}),t.end=Us(t.end,{joinWith:""})}}function Lm(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function Om(t){Lm(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),Im(t),Mm(t)}function Rm(t){function e(a,o){return new RegExp(mn(a),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(o?"g":""))}class i{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,o]),this.matchAt+=Xl(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(l=>l[1]);this.matcherRe=e(Us(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(o);if(!l)return null;const h=l.findIndex((d,f)=>f>0&&d!==void 0),c=this.matchIndexes[h];return l.splice(0,h),Object.assign(l,c)}}class n{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const l=new i;return this.rules.slice(o).forEach(([h,c])=>l.addRule(h,c)),l.compile(),this.multiRegexes[o]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,l){this.rules.push([o,l]),l.type==="begin"&&this.count++}exec(o){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let h=l.exec(o);if(this.resumingScanAtSamePosition()&&!(h&&h.index===this.lastIndex)){const c=this.getMatcher(0);c.lastIndex=this.lastIndex+1,h=c.exec(o)}return h&&(this.regexIndex+=h.position+1,this.regexIndex===this.count&&this.considerAll()),h}}function r(a){const o=new n;return a.contains.forEach(l=>o.addRule(l.begin,{rule:l,type:"begin"})),a.terminatorEnd&&o.addRule(a.terminatorEnd,{type:"end"}),a.illegal&&o.addRule(a.illegal,{type:"illegal"}),o}function s(a,o){const l=a;if(a.isCompiled)return l;[bm,Sm,Om,Tm].forEach(c=>c(a,o)),t.compilerExtensions.forEach(c=>c(a,o)),a.__beforeBegin=null,[wm,Cm,xm].forEach(c=>c(a,o)),a.isCompiled=!0;let h=null;return typeof a.keywords=="object"&&a.keywords.$pattern&&(a.keywords=Object.assign({},a.keywords),h=a.keywords.$pattern,delete a.keywords.$pattern),h=h||/\w+/,a.keywords&&(a.keywords=Zl(a.keywords,t.case_insensitive)),l.keywordPatternRe=e(h,!0),o&&(a.begin||(a.begin=/\B|\b/),l.beginRe=e(l.begin),!a.end&&!a.endsWithParent&&(a.end=/\B|\b/),a.end&&(l.endRe=e(l.end)),l.terminatorEnd=mn(l.end)||"",a.endsWithParent&&o.terminatorEnd&&(l.terminatorEnd+=(a.end?"|":"")+o.terminatorEnd)),a.illegal&&(l.illegalRe=e(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(c){return Dm(c==="self"?a:c)})),a.contains.forEach(function(c){s(c,l)}),a.starts&&s(a.starts,o),l.matcher=r(l),l}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=Nt(t.classNameAliases||{}),s(t)}function Jl(t){return t?t.endsWithParent||Jl(t.starts):!1}function Dm(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return Nt(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:Jl(t)?Nt(t,{starts:t.starts?Nt(t.starts):null}):Object.isFrozen(t)?Nt(t):t}var Nm="11.6.0";class Fm extends Error{constructor(e,i){super(e),this.name="HTMLInjectionError",this.html=i}}const $r=Ul,ro=Nt,so=Symbol("nomatch"),Hm=7,Wm=function(t){const e=Object.create(null),i=Object.create(null),n=[];let r=!0;const s="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:Z_};function l(A){return o.noHighlightRe.test(A)}function h(A){let R=A.className+" ";R+=A.parentNode?A.parentNode.className:"";const W=o.languageDetectRe.exec(R);if(W){const J=ae(W[1]);return J||(no(s.replace("{}",W[1])),no("Falling back to no-highlight mode for this block.",A)),J?W[1]:"no-highlight"}return R.split(/\s+/).find(J=>l(J)||ae(J))}function c(A,R,W){let J="",ce="";typeof R=="object"?(J=A,W=R.ignoreIllegals,ce=R.language):(Si("10.7.0","highlight(lang, code, ...args) has been deprecated."),Si("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ce=A,J=R),W===void 0&&(W=!0);const be={code:J,language:ce};Je("before:highlight",be);const Oe=be.result?be.result:d(be.language,be.code,W);return Oe.code=be.code,Je("after:highlight",Oe),Oe}function d(A,R,W,J){const ce=Object.create(null);function be(w,P){return w.keywords[P]}function Oe(){if(!m.keywords){L.addText(S);return}let w=0;m.keywordPatternRe.lastIndex=0;let P=m.keywordPatternRe.exec(S),H="";for(;P;){H+=S.substring(w,P.index);const V=p.case_insensitive?P[0].toLowerCase():P[0],Z=be(m,V);if(Z){const[te,Xe]=Z;if(L.addText(H),H="",ce[V]=(ce[V]||0)+1,ce[V]<=Hm&&(D+=Xe),te.startsWith("_"))H+=P[0];else{const Mt=p.classNameAliases[te]||te;L.addKeyword(P[0],Mt)}}else H+=P[0];w=m.keywordPatternRe.lastIndex,P=m.keywordPatternRe.exec(S)}H+=S.substring(w),L.addText(H)}function Ve(){if(S==="")return;let w=null;if(typeof m.subLanguage=="string"){if(!e[m.subLanguage]){L.addText(S);return}w=d(m.subLanguage,S,!0,O[m.subLanguage]),O[m.subLanguage]=w._top}else w=y(S,m.subLanguage.length?m.subLanguage:null);m.relevance>0&&(D+=w.relevance),L.addSublanguage(w._emitter,w.language)}function Re(){m.subLanguage!=null?Ve():Oe(),S=""}function dt(w,P){let H=1;const V=P.length-1;for(;H<=V;){if(!w._emit[H]){H++;continue}const Z=p.classNameAliases[w[H]]||w[H],te=P[H];Z?L.addKeyword(te,Z):(S=te,Oe(),S=""),H++}}function xn(w,P){return w.scope&&typeof w.scope=="string"&&L.openNode(p.classNameAliases[w.scope]||w.scope),w.beginScope&&(w.beginScope._wrap?(L.addKeyword(S,p.classNameAliases[w.beginScope._wrap]||w.beginScope._wrap),S=""):w.beginScope._multi&&(dt(w.beginScope,P),S="")),m=Object.create(w,{parent:{value:m}}),m}function Qe(w,P,H){let V=em(w.endRe,H);if(V){if(w["on:end"]){const Z=new Qa(w);w["on:end"](P,Z),Z.isMatchIgnored&&(V=!1)}if(V){for(;w.endsParent&&w.parent;)w=w.parent;return w}}if(w.endsWithParent)return Qe(w.parent,P,H)}function yi(w){return m.matcher.regexIndex===0?(S+=w[0],1):(G=!0,0)}function Tn(w){const P=w[0],H=w.rule,V=new Qa(H),Z=[H.__beforeBegin,H["on:begin"]];for(const te of Z)if(!!te&&(te(w,V),V.isMatchIgnored))return yi(P);return H.skip?S+=P:(H.excludeBegin&&(S+=P),Re(),!H.returnBegin&&!H.excludeBegin&&(S=P)),xn(H,w),H.returnBegin?0:P.length}function Pt(w){const P=w[0],H=R.substring(w.index),V=Qe(m,w,H);if(!V)return so;const Z=m;m.endScope&&m.endScope._wrap?(Re(),L.addKeyword(P,m.endScope._wrap)):m.endScope&&m.endScope._multi?(Re(),dt(m.endScope,w)):Z.skip?S+=P:(Z.returnEnd||Z.excludeEnd||(S+=P),Re(),Z.excludeEnd&&(S=P));do m.scope&&L.closeNode(),!m.skip&&!m.subLanguage&&(D+=m.relevance),m=m.parent;while(m!==V.parent);return V.starts&&xn(V.starts,w),Z.returnEnd?0:P.length}function zi(){const w=[];for(let P=m;P!==p;P=P.parent)P.scope&&w.unshift(P.scope);w.forEach(P=>L.openNode(P))}let It={};function u(w,P){const H=P&&P[0];if(S+=w,H==null)return Re(),0;if(It.type==="begin"&&P.type==="end"&&It.index===P.index&&H===""){if(S+=R.slice(P.index,P.index+1),!r){const V=new Error(`0 width match regex (${A})`);throw V.languageName=A,V.badRule=It.rule,V}return 1}if(It=P,P.type==="begin")return Tn(P);if(P.type==="illegal"&&!W){const V=new Error('Illegal lexeme "'+H+'" for mode "'+(m.scope||"<unnamed>")+'"');throw V.mode=m,V}else if(P.type==="end"){const V=Pt(P);if(V!==so)return V}if(P.type==="illegal"&&H==="")return 1;if(U>1e5&&U>P.index*3)throw new Error("potential infinite loop, way more iterations than matches");return S+=H,H.length}const p=ae(A);if(!p)throw ri(s.replace("{}",A)),new Error('Unknown language: "'+A+'"');const b=Rm(p);let T="",m=J||b;const O={},L=new o.__emitter(o);zi();let S="",D=0,E=0,U=0,G=!1;try{for(m.matcher.considerAll();;){U++,G?G=!1:m.matcher.considerAll(),m.matcher.lastIndex=E;const w=m.matcher.exec(R);if(!w)break;const P=R.substring(E,w.index),H=u(P,w);E=w.index+H}return u(R.substring(E)),L.closeAllNodes(),L.finalize(),T=L.toHTML(),{language:A,value:T,relevance:D,illegal:!1,_emitter:L,_top:m}}catch(w){if(w.message&&w.message.includes("Illegal"))return{language:A,value:$r(R),illegal:!0,relevance:0,_illegalBy:{message:w.message,index:E,context:R.slice(E-100,E+100),mode:w.mode,resultSoFar:T},_emitter:L};if(r)return{language:A,value:$r(R),illegal:!1,relevance:0,errorRaised:w,_emitter:L,_top:m};throw w}}function f(A){const R={value:$r(A),illegal:!1,relevance:0,_top:a,_emitter:new o.__emitter(o)};return R._emitter.addText(A),R}function y(A,R){R=R||o.languages||Object.keys(e);const W=f(A),J=R.filter(ae).filter(xe).map(Re=>d(Re,A,!1));J.unshift(W);const ce=J.sort((Re,dt)=>{if(Re.relevance!==dt.relevance)return dt.relevance-Re.relevance;if(Re.language&&dt.language){if(ae(Re.language).supersetOf===dt.language)return 1;if(ae(dt.language).supersetOf===Re.language)return-1}return 0}),[be,Oe]=ce,Ve=be;return Ve.secondBest=Oe,Ve}function C(A,R,W){const J=R&&i[R]||W;A.classList.add("hljs"),A.classList.add(`language-${J}`)}function I(A){let R=null;const W=h(A);if(l(W))return;if(Je("before:highlightElement",{el:A,language:W}),A.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(A)),o.throwUnescapedHTML))throw new Fm("One of your code blocks includes unescaped HTML.",A.innerHTML);R=A;const J=R.textContent,ce=W?c(J,{language:W,ignoreIllegals:!0}):y(J);A.innerHTML=ce.value,C(A,W,ce.language),A.result={language:ce.language,re:ce.relevance,relevance:ce.relevance},ce.secondBest&&(A.secondBest={language:ce.secondBest.language,relevance:ce.secondBest.relevance}),Je("after:highlightElement",{el:A,result:ce,text:J})}function _(A){o=ro(o,A)}const M=()=>{B(),Si("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function x(){B(),Si("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let F=!1;function B(){if(document.readyState==="loading"){F=!0;return}document.querySelectorAll(o.cssSelector).forEach(I)}function K(){F&&B()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",K,!1);function re(A,R){let W=null;try{W=R(t)}catch(J){if(ri("Language definition for '{}' could not be registered.".replace("{}",A)),r)ri(J);else throw J;W=a}W.name||(W.name=A),e[A]=W,W.rawDefinition=R.bind(null,t),W.aliases&&_e(W.aliases,{languageName:A})}function ge(A){delete e[A];for(const R of Object.keys(i))i[R]===A&&delete i[R]}function ee(){return Object.keys(e)}function ae(A){return A=(A||"").toLowerCase(),e[A]||e[i[A]]}function _e(A,{languageName:R}){typeof A=="string"&&(A=[A]),A.forEach(W=>{i[W.toLowerCase()]=R})}function xe(A){const R=ae(A);return R&&!R.disableAutodetect}function Le(A){A["before:highlightBlock"]&&!A["before:highlightElement"]&&(A["before:highlightElement"]=R=>{A["before:highlightBlock"](Object.assign({block:R.el},R))}),A["after:highlightBlock"]&&!A["after:highlightElement"]&&(A["after:highlightElement"]=R=>{A["after:highlightBlock"](Object.assign({block:R.el},R))})}function ke(A){Le(A),n.push(A)}function Je(A,R){const W=A;n.forEach(function(J){J[W]&&J[W](R)})}function ct(A){return Si("10.7.0","highlightBlock will be removed entirely in v12.0"),Si("10.7.0","Please use highlightElement now."),I(A)}Object.assign(t,{highlight:c,highlightAuto:y,highlightAll:B,highlightElement:I,highlightBlock:ct,configure:_,initHighlighting:M,initHighlightingOnLoad:x,registerLanguage:re,unregisterLanguage:ge,listLanguages:ee,getLanguage:ae,registerAliases:_e,autoDetection:xe,inherit:ro,addPlugin:ke}),t.debugMode=function(){r=!1},t.safeMode=function(){r=!0},t.versionString=Nm,t.regex={concat:vi,lookahead:Vl,either:zs,optional:J_,anyNumberOfTimes:q_};for(const A in Vn)typeof Vn[A]=="object"&&Ws.exports(Vn[A]);return Object.assign(t,Vn),t};var yn=Wm({}),Gm=yn;yn.HighlightJS=yn;yn.default=yn;const si=Gm,ur="[A-Za-z$_][0-9A-Za-z$_]*",Ql=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],eh=["true","false","null","undefined","NaN","Infinity"],th=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ih=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],nh=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],rh=["arguments","this","super","console","window","document","localStorage","module","global"],sh=[].concat(nh,th,ih);function Bm(t){const e=t.regex,i=(R,{after:W})=>{const J="</"+R[0].slice(1);return R.input.indexOf(J,W)!==-1},n=ur,r={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(R,W)=>{const J=R[0].length+R.index,ce=R.input[J];if(ce==="<"||ce===","){W.ignoreMatch();return}ce===">"&&(i(R,{after:J})||W.ignoreMatch());let be;if((be=R.input.substring(J).match(/^\s+extends\s+/))&&be.index===0){W.ignoreMatch();return}}},o={$pattern:ur,keyword:Ql,literal:eh,built_in:sh,"variable.language":rh},l="[0-9](_?[0-9])*",h=`\\.(${l})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${c})((${h})|\\.)?|(${h}))[eE][+-]?(${l})\\b`},{begin:`\\b(${c})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},f={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},y={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"xml"}},C={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"css"}},I={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,f]},_=t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),M={className:"comment",variants:[_,t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},x=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,y,C,I,d];f.contains=x.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(x)});const F=[].concat(M,f.contains),B=F.concat([{begin:/\(/,end:/\)/,keywords:o,contains:["self"].concat(F)}]),K={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:B},re={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,e.concat(n,"(",e.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},ge={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...th,...ih]}},ee={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},ae={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[K],illegal:/%/},_e={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function xe(R){return e.concat("(?!",R.join("|"),")")}const Le={match:e.concat(/\b/,xe([...nh,"super"]),n,e.lookahead(/\(/)),className:"title.function",relevance:0},ke={begin:e.concat(/\./,e.lookahead(e.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Je={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},K]},ct="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",A={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(ct)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[K]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:B,CLASS_REFERENCE:ge},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),ee,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,y,C,I,M,d,ge,{className:"attr",begin:n+e.lookahead(":"),relevance:0},A,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[M,t.REGEXP_MODE,{className:"function",begin:ct,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:B}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r.begin,end:r.end},{match:s},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},ae,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[K,t.inherit(t.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},ke,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[K]},Le,_e,re,Je,{match:/\$[(.]/}]}}function zm(t){const e=Bm(t),i=ur,n=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],r={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[e.exports.CLASS_REFERENCE]},s={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:n},contains:[e.exports.CLASS_REFERENCE]},a={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},o=["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"],l={$pattern:ur,keyword:Ql.concat(o),literal:eh,built_in:sh.concat(n),"variable.language":rh},h={className:"meta",begin:"@"+i},c=(f,y,C)=>{const I=f.contains.findIndex(_=>_.label===y);if(I===-1)throw new Error("can not find mode to replace");f.contains.splice(I,1,C)};Object.assign(e.keywords,l),e.exports.PARAMS_CONTAINS.push(h),e.contains=e.contains.concat([h,r,s]),c(e,"shebang",t.SHEBANG()),c(e,"use_strict",a);const d=e.contains.find(f=>f.label==="func.def");return d.relevance=0,Object.assign(e,{name:"TypeScript",aliases:["ts","tsx"]}),e}function ah(t){const e=t.regex,i=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),n=/[\p{L}0-9._:-]+/u,r={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},a=t.inherit(s,{begin:/\(/,end:/\)/}),o=t.inherit(t.APOS_STRING_MODE,{className:"string"}),l=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:n,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[r]},{begin:/'/,end:/'/,contains:[r]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,l,o,a,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,a,l,o]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},r,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(i,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:i,relevance:0,starts:h}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(i,/>/))),contains:[{className:"name",begin:i,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}const Um=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),Vm=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Xm=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],Ym=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],$m=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],jm=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function Km(t){const e=t.regex,i=Um(t),n={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},r="and or not only",s=/@-?\w[\w]*(-\w+)*/,a="[a-zA-Z-][a-zA-Z0-9_-]*",o=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[i.BLOCK_COMMENT,n,i.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+a,relevance:0},i.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+Ym.join("|")+")"},{begin:":(:)?("+$m.join("|")+")"}]},i.CSS_VARIABLE,{className:"attribute",begin:"\\b("+jm.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[i.BLOCK_COMMENT,i.HEXCOLOR,i.IMPORTANT,i.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},i.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:r,attribute:Xm.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,i.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+Vm.join("|")+")\\b"}]}}var ao=bt({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(t){var e=Kh(t.language);$n(function(){return t.language},function(r){e.value=r});var i=xi(function(){return t.autodetect||!e.value}),n=xi(function(){return!i.value&&!si.getLanguage(e.value)});return{className:xi(function(){return n.value?"":"hljs "+e.value}),highlightedCode:xi(function(){var r;if(n.value)return console.warn('The language "'+e.value+'" you specified could not be found.'),t.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(i.value){var s=si.highlightAuto(t.code);return e.value=(r=s.language)!==null&&r!==void 0?r:"",s.value}return(s=si.highlight(t.code,{language:e.value,ignoreIllegals:t.ignoreIllegals})).value})}},render:function(){return _a("pre",{},[_a("code",{class:this.className,innerHTML:this.highlightedCode})])}}),Zm={install:function(t){t.component("highlightjs",ao)},component:ao};si.registerLanguage("vue-typescript",zm);si.registerLanguage("vue-template",ah);si.registerLanguage("vue-sfc",ah);si.registerLanguage("css",Km);Ed(Y_).use(Zm).mount("#app");
//# sourceMappingURL=index.cc10fd28.js.map
