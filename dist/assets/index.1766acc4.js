(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();function zn(t,e){const i=Object.create(null),r=t.split(",");for(let n=0;n<r.length;n++)i[r[n]]=!0;return e?n=>!!i[n.toLowerCase()]:n=>!!i[n]}const hl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fl=zn(hl);function Ca(t){return!!t||t===""}function Bn(t){if(V(t)){const e={};for(let i=0;i<t.length;i++){const r=t[i],n=Ce(r)?cl(r):Bn(r);if(n)for(const s in n)e[s]=n[s]}return e}else{if(Ce(t))return t;if(Se(t))return t}}const dl=/;(?![^(]*\))/g,ul=/:(.+)/;function cl(t){const e={};return t.split(dl).forEach(i=>{if(i){const r=i.split(ul);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Nn(t){let e="";if(Ce(t))e=t;else if(V(t))for(let i=0;i<t.length;i++){const r=Nn(t[i]);r&&(e+=r+" ")}else if(Se(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const Sa=t=>Ce(t)?t:t==null?"":V(t)||Se(t)&&(t.toString===ka||!X(t.toString))?JSON.stringify(t,Ta,2):String(t),Ta=(t,e)=>e&&e.__v_isRef?Ta(t,e.value):li(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[r,n])=>(i[`${r} =>`]=n,i),{})}:xa(e)?{[`Set(${e.size})`]:[...e.values()]}:Se(e)&&!V(e)&&!Ea(e)?String(e):e,se={},oi=[],je=()=>{},pl=()=>!1,gl=/^on[^a-z]/,Lr=t=>gl.test(t),Vn=t=>t.startsWith("onUpdate:"),Ee=Object.assign,Un=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},_l=Object.prototype.hasOwnProperty,j=(t,e)=>_l.call(t,e),V=Array.isArray,li=t=>Dr(t)==="[object Map]",xa=t=>Dr(t)==="[object Set]",X=t=>typeof t=="function",Ce=t=>typeof t=="string",Xn=t=>typeof t=="symbol",Se=t=>t!==null&&typeof t=="object",Aa=t=>Se(t)&&X(t.then)&&X(t.catch),ka=Object.prototype.toString,Dr=t=>ka.call(t),ml=t=>Dr(t).slice(8,-1),Ea=t=>Dr(t)==="[object Object]",Yn=t=>Ce(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,vr=zn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Mr=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},vl=/-(\w)/g,ui=Mr(t=>t.replace(vl,(e,i)=>i?i.toUpperCase():"")),yl=/\B([A-Z])/g,gi=Mr(t=>t.replace(yl,"-$1").toLowerCase()),Pa=Mr(t=>t.charAt(0).toUpperCase()+t.slice(1)),en=Mr(t=>t?`on${Pa(t)}`:""),Vi=(t,e)=>!Object.is(t,e),tn=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},Sr=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},wl=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ws;const bl=()=>ws||(ws=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let tt;class Cl{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&tt&&(this.parent=tt,this.index=(tt.scopes||(tt.scopes=[])).push(this)-1)}run(e){if(this.active){const i=tt;try{return tt=this,e()}finally{tt=i}}}on(){tt=this}off(){tt=this.parent}stop(e){if(this.active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function Sl(t,e=tt){e&&e.active&&e.effects.push(t)}const Kn=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Ia=t=>(t.w&St)>0,La=t=>(t.n&St)>0,Tl=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=St},xl=t=>{const{deps:e}=t;if(e.length){let i=0;for(let r=0;r<e.length;r++){const n=e[r];Ia(n)&&!La(n)?n.delete(t):e[i++]=n,n.w&=~St,n.n&=~St}e.length=i}},yn=new WeakMap;let Ei=0,St=1;const wn=30;let Ke;const Ht=Symbol(""),bn=Symbol("");class Zn{constructor(e,i=null,r){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Sl(this,r)}run(){if(!this.active)return this.fn();let e=Ke,i=bt;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Ke,Ke=this,bt=!0,St=1<<++Ei,Ei<=wn?Tl(this):bs(this),this.fn()}finally{Ei<=wn&&xl(this),St=1<<--Ei,Ke=this.parent,bt=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ke===this?this.deferStop=!0:this.active&&(bs(this),this.onStop&&this.onStop(),this.active=!1)}}function bs(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let bt=!0;const Da=[];function _i(){Da.push(bt),bt=!1}function mi(){const t=Da.pop();bt=t===void 0?!0:t}function Ge(t,e,i){if(bt&&Ke){let r=yn.get(t);r||yn.set(t,r=new Map);let n=r.get(i);n||r.set(i,n=Kn()),Ma(n)}}function Ma(t,e){let i=!1;Ei<=wn?La(t)||(t.n|=St,i=!Ia(t)):i=!t.has(Ke),i&&(t.add(Ke),Ke.deps.push(t))}function dt(t,e,i,r,n,s){const a=yn.get(t);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(i==="length"&&V(t))a.forEach((l,h)=>{(h==="length"||h>=r)&&o.push(l)});else switch(i!==void 0&&o.push(a.get(i)),e){case"add":V(t)?Yn(i)&&o.push(a.get("length")):(o.push(a.get(Ht)),li(t)&&o.push(a.get(bn)));break;case"delete":V(t)||(o.push(a.get(Ht)),li(t)&&o.push(a.get(bn)));break;case"set":li(t)&&o.push(a.get(Ht));break}if(o.length===1)o[0]&&Cn(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);Cn(Kn(l))}}function Cn(t,e){const i=V(t)?t:[...t];for(const r of i)r.computed&&Cs(r);for(const r of i)r.computed||Cs(r)}function Cs(t,e){(t!==Ke||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Al=zn("__proto__,__v_isRef,__isVue"),Oa=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Xn)),kl=jn(),El=jn(!1,!0),Pl=jn(!0),Ss=Il();function Il(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const r=Q(this);for(let s=0,a=this.length;s<a;s++)Ge(r,"get",s+"");const n=r[e](...i);return n===-1||n===!1?r[e](...i.map(Q)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){_i();const r=Q(this)[e].apply(this,i);return mi(),r}}),t}function jn(t=!1,e=!1){return function(r,n,s){if(n==="__v_isReactive")return!t;if(n==="__v_isReadonly")return t;if(n==="__v_isShallow")return e;if(n==="__v_raw"&&s===(t?e?Yl:Ha:e?Ga:Wa).get(r))return r;const a=V(r);if(!t&&a&&j(Ss,n))return Reflect.get(Ss,n,s);const o=Reflect.get(r,n,s);return(Xn(n)?Oa.has(n):Al(n))||(t||Ge(r,"get",n),e)?o:ke(o)?a&&Yn(n)?o:o.value:Se(o)?t?za(o):Jn(o):o}}const Ll=Ra(),Dl=Ra(!0);function Ra(t=!1){return function(i,r,n,s){let a=i[r];if(Ui(a)&&ke(a)&&!ke(n))return!1;if(!t&&!Ui(n)&&(Sn(n)||(n=Q(n),a=Q(a)),!V(i)&&ke(a)&&!ke(n)))return a.value=n,!0;const o=V(i)&&Yn(r)?Number(r)<i.length:j(i,r),l=Reflect.set(i,r,n,s);return i===Q(s)&&(o?Vi(n,a)&&dt(i,"set",r,n):dt(i,"add",r,n)),l}}function Ml(t,e){const i=j(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&i&&dt(t,"delete",e,void 0),r}function Ol(t,e){const i=Reflect.has(t,e);return(!Xn(e)||!Oa.has(e))&&Ge(t,"has",e),i}function Rl(t){return Ge(t,"iterate",V(t)?"length":Ht),Reflect.ownKeys(t)}const Fa={get:kl,set:Ll,deleteProperty:Ml,has:Ol,ownKeys:Rl},Fl={get:Pl,set(t,e){return!0},deleteProperty(t,e){return!0}},Wl=Ee({},Fa,{get:El,set:Dl}),$n=t=>t,Or=t=>Reflect.getPrototypeOf(t);function tr(t,e,i=!1,r=!1){t=t.__v_raw;const n=Q(t),s=Q(e);i||(e!==s&&Ge(n,"get",e),Ge(n,"get",s));const{has:a}=Or(n),o=r?$n:i?es:Xi;if(a.call(n,e))return o(t.get(e));if(a.call(n,s))return o(t.get(s));t!==n&&t.get(e)}function ir(t,e=!1){const i=this.__v_raw,r=Q(i),n=Q(t);return e||(t!==n&&Ge(r,"has",t),Ge(r,"has",n)),t===n?i.has(t):i.has(t)||i.has(n)}function rr(t,e=!1){return t=t.__v_raw,!e&&Ge(Q(t),"iterate",Ht),Reflect.get(t,"size",t)}function Ts(t){t=Q(t);const e=Q(this);return Or(e).has.call(e,t)||(e.add(t),dt(e,"add",t,t)),this}function xs(t,e){e=Q(e);const i=Q(this),{has:r,get:n}=Or(i);let s=r.call(i,t);s||(t=Q(t),s=r.call(i,t));const a=n.call(i,t);return i.set(t,e),s?Vi(e,a)&&dt(i,"set",t,e):dt(i,"add",t,e),this}function As(t){const e=Q(this),{has:i,get:r}=Or(e);let n=i.call(e,t);n||(t=Q(t),n=i.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return n&&dt(e,"delete",t,void 0),s}function ks(){const t=Q(this),e=t.size!==0,i=t.clear();return e&&dt(t,"clear",void 0,void 0),i}function nr(t,e){return function(r,n){const s=this,a=s.__v_raw,o=Q(a),l=e?$n:t?es:Xi;return!t&&Ge(o,"iterate",Ht),a.forEach((h,f)=>r.call(n,l(h),l(f),s))}}function sr(t,e,i){return function(...r){const n=this.__v_raw,s=Q(n),a=li(s),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,h=n[t](...r),f=i?$n:e?es:Xi;return!e&&Ge(s,"iterate",l?bn:Ht),{next(){const{value:u,done:c}=h.next();return c?{value:u,done:c}:{value:o?[f(u[0]),f(u[1])]:f(u),done:c}},[Symbol.iterator](){return this}}}}function _t(t){return function(...e){return t==="delete"?!1:this}}function Gl(){const t={get(s){return tr(this,s)},get size(){return rr(this)},has:ir,add:Ts,set:xs,delete:As,clear:ks,forEach:nr(!1,!1)},e={get(s){return tr(this,s,!1,!0)},get size(){return rr(this)},has:ir,add:Ts,set:xs,delete:As,clear:ks,forEach:nr(!1,!0)},i={get(s){return tr(this,s,!0)},get size(){return rr(this,!0)},has(s){return ir.call(this,s,!0)},add:_t("add"),set:_t("set"),delete:_t("delete"),clear:_t("clear"),forEach:nr(!0,!1)},r={get(s){return tr(this,s,!0,!0)},get size(){return rr(this,!0)},has(s){return ir.call(this,s,!0)},add:_t("add"),set:_t("set"),delete:_t("delete"),clear:_t("clear"),forEach:nr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=sr(s,!1,!1),i[s]=sr(s,!0,!1),e[s]=sr(s,!1,!0),r[s]=sr(s,!0,!0)}),[t,i,e,r]}const[Hl,zl,Bl,Nl]=Gl();function qn(t,e){const i=e?t?Nl:Bl:t?zl:Hl;return(r,n,s)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(j(i,n)&&n in r?i:r,n,s)}const Vl={get:qn(!1,!1)},Ul={get:qn(!1,!0)},Xl={get:qn(!0,!1)},Wa=new WeakMap,Ga=new WeakMap,Ha=new WeakMap,Yl=new WeakMap;function Kl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zl(t){return t.__v_skip||!Object.isExtensible(t)?0:Kl(ml(t))}function Jn(t){return Ui(t)?t:Qn(t,!1,Fa,Vl,Wa)}function jl(t){return Qn(t,!1,Wl,Ul,Ga)}function za(t){return Qn(t,!0,Fl,Xl,Ha)}function Qn(t,e,i,r,n){if(!Se(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=n.get(t);if(s)return s;const a=Zl(t);if(a===0)return t;const o=new Proxy(t,a===2?r:i);return n.set(t,o),o}function hi(t){return Ui(t)?hi(t.__v_raw):!!(t&&t.__v_isReactive)}function Ui(t){return!!(t&&t.__v_isReadonly)}function Sn(t){return!!(t&&t.__v_isShallow)}function Ba(t){return hi(t)||Ui(t)}function Q(t){const e=t&&t.__v_raw;return e?Q(e):t}function Na(t){return Sr(t,"__v_skip",!0),t}const Xi=t=>Se(t)?Jn(t):t,es=t=>Se(t)?za(t):t;function Va(t){bt&&Ke&&(t=Q(t),Ma(t.dep||(t.dep=Kn())))}function Ua(t,e){t=Q(t),t.dep&&Cn(t.dep)}function ke(t){return!!(t&&t.__v_isRef===!0)}function $l(t){return Xa(t,!1)}function rn(t){return Xa(t,!0)}function Xa(t,e){return ke(t)?t:new ql(t,e)}class ql{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:Q(e),this._value=i?e:Xi(e)}get value(){return Va(this),this._value}set value(e){e=this.__v_isShallow?e:Q(e),Vi(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:Xi(e),Ua(this))}}function Jl(t){return ke(t)?t.value:t}const Ql={get:(t,e,i)=>Jl(Reflect.get(t,e,i)),set:(t,e,i,r)=>{const n=t[e];return ke(n)&&!ke(i)?(n.value=i,!0):Reflect.set(t,e,i,r)}};function Ya(t){return hi(t)?t:new Proxy(t,Ql)}class eh{constructor(e,i,r,n){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Zn(e,()=>{this._dirty||(this._dirty=!0,Ua(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=r}get value(){const e=Q(this);return Va(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function th(t,e,i=!1){let r,n;const s=X(t);return s?(r=t,n=je):(r=t.get,n=t.set),new eh(r,n,s||!n,i)}function Ct(t,e,i,r){let n;try{n=r?t(...r):t()}catch(s){Rr(s,e,i)}return n}function Ve(t,e,i,r){if(X(t)){const s=Ct(t,e,i,r);return s&&Aa(s)&&s.catch(a=>{Rr(a,e,i)}),s}const n=[];for(let s=0;s<t.length;s++)n.push(Ve(t[s],e,i,r));return n}function Rr(t,e,i,r=!0){const n=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,o=i;for(;s;){const h=s.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,a,o)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Ct(l,null,10,[t,a,o]);return}}ih(t,i,n,r)}function ih(t,e,i,r=!0){console.error(t)}let Tr=!1,Tn=!1;const Fe=[];let ft=0;const Oi=[];let Pi=null,ri=0;const Ri=[];let mt=null,ni=0;const Ka=Promise.resolve();let ts=null,xn=null;function rh(t){const e=ts||Ka;return t?e.then(this?t.bind(this):t):e}function nh(t){let e=ft+1,i=Fe.length;for(;e<i;){const r=e+i>>>1;Yi(Fe[r])<t?e=r+1:i=r}return e}function Za(t){(!Fe.length||!Fe.includes(t,Tr&&t.allowRecurse?ft+1:ft))&&t!==xn&&(t.id==null?Fe.push(t):Fe.splice(nh(t.id),0,t),ja())}function ja(){!Tr&&!Tn&&(Tn=!0,ts=Ka.then(Ja))}function sh(t){const e=Fe.indexOf(t);e>ft&&Fe.splice(e,1)}function $a(t,e,i,r){V(t)?i.push(...t):(!e||!e.includes(t,t.allowRecurse?r+1:r))&&i.push(t),ja()}function ah(t){$a(t,Pi,Oi,ri)}function oh(t){$a(t,mt,Ri,ni)}function Fr(t,e=null){if(Oi.length){for(xn=e,Pi=[...new Set(Oi)],Oi.length=0,ri=0;ri<Pi.length;ri++)Pi[ri]();Pi=null,ri=0,xn=null,Fr(t,e)}}function qa(t){if(Fr(),Ri.length){const e=[...new Set(Ri)];if(Ri.length=0,mt){mt.push(...e);return}for(mt=e,mt.sort((i,r)=>Yi(i)-Yi(r)),ni=0;ni<mt.length;ni++)mt[ni]();mt=null,ni=0}}const Yi=t=>t.id==null?1/0:t.id;function Ja(t){Tn=!1,Tr=!0,Fr(t),Fe.sort((i,r)=>Yi(i)-Yi(r));const e=je;try{for(ft=0;ft<Fe.length;ft++){const i=Fe[ft];i&&i.active!==!1&&Ct(i,null,14)}}finally{ft=0,Fe.length=0,qa(),Tr=!1,ts=null,(Fe.length||Oi.length||Ri.length)&&Ja(t)}}function lh(t,e,...i){if(t.isUnmounted)return;const r=t.vnode.props||se;let n=i;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in r){const f=`${a==="modelValue"?"model":a}Modifiers`,{number:u,trim:c}=r[f]||se;c&&(n=i.map(v=>v.trim())),u&&(n=i.map(wl))}let o,l=r[o=en(e)]||r[o=en(ui(e))];!l&&s&&(l=r[o=en(gi(e))]),l&&Ve(l,t,6,n);const h=r[o+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Ve(h,t,6,n)}}function Qa(t,e,i=!1){const r=e.emitsCache,n=r.get(t);if(n!==void 0)return n;const s=t.emits;let a={},o=!1;if(!X(t)){const l=h=>{const f=Qa(h,e,!0);f&&(o=!0,Ee(a,f))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!o?(r.set(t,null),null):(V(s)?s.forEach(l=>a[l]=null):Ee(a,s),r.set(t,a),a)}function Wr(t,e){return!t||!Lr(e)?!1:(e=e.slice(2).replace(/Once$/,""),j(t,e[0].toLowerCase()+e.slice(1))||j(t,gi(e))||j(t,e))}let Oe=null,Gr=null;function xr(t){const e=Oe;return Oe=t,Gr=t&&t.type.__scopeId||null,e}function eo(t){Gr=t}function to(){Gr=null}function Rt(t,e=Oe,i){if(!e||t._n)return t;const r=(...n)=>{r._d&&Ws(-1);const s=xr(e),a=t(...n);return xr(s),r._d&&Ws(1),a};return r._n=!0,r._c=!0,r._d=!0,r}function nn(t){const{type:e,vnode:i,proxy:r,withProxy:n,props:s,propsOptions:[a],slots:o,attrs:l,emit:h,render:f,renderCache:u,data:c,setupState:v,ctx:y,inheritAttrs:S}=t;let g,I;const x=xr(t);try{if(i.shapeFlag&4){const W=n||r;g=it(f.call(W,W,u,s,v,c,y)),I=l}else{const W=e;g=it(W.length>1?W(s,{attrs:l,slots:o,emit:h}):W(s,null)),I=e.props?l:hh(l)}}catch(W){Wi.length=0,Rr(W,t,1),g=we(nt)}let D=g;if(I&&S!==!1){const W=Object.keys(I),{shapeFlag:U}=D;W.length&&U&7&&(a&&W.some(Vn)&&(I=fh(I,a)),D=Tt(D,I))}return i.dirs&&(D=Tt(D),D.dirs=D.dirs?D.dirs.concat(i.dirs):i.dirs),i.transition&&(D.transition=i.transition),g=D,xr(x),g}const hh=t=>{let e;for(const i in t)(i==="class"||i==="style"||Lr(i))&&((e||(e={}))[i]=t[i]);return e},fh=(t,e)=>{const i={};for(const r in t)(!Vn(r)||!(r.slice(9)in e))&&(i[r]=t[r]);return i};function dh(t,e,i){const{props:r,children:n,component:s}=t,{props:a,children:o,patchFlag:l}=e,h=s.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?Es(r,a,h):!!a;if(l&8){const f=e.dynamicProps;for(let u=0;u<f.length;u++){const c=f[u];if(a[c]!==r[c]&&!Wr(h,c))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?Es(r,a,h):!0:!!a;return!1}function Es(t,e,i){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(e[s]!==t[s]&&!Wr(i,s))return!0}return!1}function uh({vnode:t,parent:e},i){for(;e&&e.subTree===t;)(t=e.vnode).el=i,e=e.parent}const ch=t=>t.__isSuspense;function ph(t,e){e&&e.pendingBranch?V(t)?e.effects.push(...t):e.effects.push(t):oh(t)}function gh(t,e){if(ye){let i=ye.provides;const r=ye.parent&&ye.parent.provides;r===i&&(i=ye.provides=Object.create(r)),i[t]=e}}function sn(t,e,i=!1){const r=ye||Oe;if(r){const n=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(n&&t in n)return n[t];if(arguments.length>1)return i&&X(e)?e.call(r.proxy):e}}const Ps={};function an(t,e,i){return io(t,e,i)}function io(t,e,{immediate:i,deep:r,flush:n,onTrack:s,onTrigger:a}=se){const o=ye;let l,h=!1,f=!1;if(ke(t)?(l=()=>t.value,h=Sn(t)):hi(t)?(l=()=>t,r=!0):V(t)?(f=!0,h=t.some(I=>hi(I)||Sn(I)),l=()=>t.map(I=>{if(ke(I))return I.value;if(hi(I))return si(I);if(X(I))return Ct(I,o,2)})):X(t)?e?l=()=>Ct(t,o,2):l=()=>{if(!(o&&o.isUnmounted))return u&&u(),Ve(t,o,3,[c])}:l=je,e&&r){const I=l;l=()=>si(I())}let u,c=I=>{u=g.onStop=()=>{Ct(I,o,4)}};if(Zi)return c=je,e?i&&Ve(e,o,3,[l(),f?[]:void 0,c]):l(),je;let v=f?[]:Ps;const y=()=>{if(!!g.active)if(e){const I=g.run();(r||h||(f?I.some((x,D)=>Vi(x,v[D])):Vi(I,v)))&&(u&&u(),Ve(e,o,3,[I,v===Ps?void 0:v,c]),v=I)}else g.run()};y.allowRecurse=!!e;let S;n==="sync"?S=y:n==="post"?S=()=>Me(y,o&&o.suspense):S=()=>ah(y);const g=new Zn(l,S);return e?i?y():v=g.run():n==="post"?Me(g.run.bind(g),o&&o.suspense):g.run(),()=>{g.stop(),o&&o.scope&&Un(o.scope.effects,g)}}function _h(t,e,i){const r=this.proxy,n=Ce(t)?t.includes(".")?ro(r,t):()=>r[t]:t.bind(r,r);let s;X(e)?s=e:(s=e.handler,i=e);const a=ye;ci(this);const o=io(n,s.bind(r),i);return a?ci(a):zt(),o}function ro(t,e){const i=e.split(".");return()=>{let r=t;for(let n=0;n<i.length&&r;n++)r=r[i[n]];return r}}function si(t,e){if(!Se(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ke(t))si(t.value,e);else if(V(t))for(let i=0;i<t.length;i++)si(t[i],e);else if(xa(t)||li(t))t.forEach(i=>{si(i,e)});else if(Ea(t))for(const i in t)si(t[i],e);return t}function mh(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return is(()=>{t.isMounted=!0}),oo(()=>{t.isUnmounting=!0}),t}const Be=[Function,Array],vh={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Be,onEnter:Be,onAfterEnter:Be,onEnterCancelled:Be,onBeforeLeave:Be,onLeave:Be,onAfterLeave:Be,onLeaveCancelled:Be,onBeforeAppear:Be,onAppear:Be,onAfterAppear:Be,onAppearCancelled:Be},setup(t,{slots:e}){const i=rf(),r=mh();let n;return()=>{const s=e.default&&so(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const S of s)if(S.type!==nt){a=S;break}}const o=Q(t),{mode:l}=o;if(r.isLeaving)return on(a);const h=Is(a);if(!h)return on(a);const f=An(h,o,r,i);kn(h,f);const u=i.subTree,c=u&&Is(u);let v=!1;const{getTransitionKey:y}=h.type;if(y){const S=y();n===void 0?n=S:S!==n&&(n=S,v=!0)}if(c&&c.type!==nt&&(!Wt(h,c)||v)){const S=An(c,o,r,i);if(kn(c,S),l==="out-in")return r.isLeaving=!0,S.afterLeave=()=>{r.isLeaving=!1,i.update()},on(a);l==="in-out"&&h.type!==nt&&(S.delayLeave=(g,I,x)=>{const D=no(r,c);D[String(c.key)]=c,g._leaveCb=()=>{I(),g._leaveCb=void 0,delete f.delayedLeave},f.delayedLeave=x})}return a}}},yh=vh;function no(t,e){const{leavingVNodes:i}=t;let r=i.get(e.type);return r||(r=Object.create(null),i.set(e.type,r)),r}function An(t,e,i,r){const{appear:n,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:u,onLeave:c,onAfterLeave:v,onLeaveCancelled:y,onBeforeAppear:S,onAppear:g,onAfterAppear:I,onAppearCancelled:x}=e,D=String(t.key),W=no(i,t),U=(M,Y)=>{M&&Ve(M,r,9,Y)},fe=(M,Y)=>{const Z=Y[1];U(M,Y),V(M)?M.every(de=>de.length<=1)&&Z():M.length<=1&&Z()},pe={mode:s,persisted:a,beforeEnter(M){let Y=o;if(!i.isMounted)if(n)Y=S||o;else return;M._leaveCb&&M._leaveCb(!0);const Z=W[D];Z&&Wt(t,Z)&&Z.el._leaveCb&&Z.el._leaveCb(),U(Y,[M])},enter(M){let Y=l,Z=h,de=f;if(!i.isMounted)if(n)Y=g||l,Z=I||h,de=x||f;else return;let _e=!1;const me=M._enterCb=Dt=>{_e||(_e=!0,Dt?U(de,[M]):U(Z,[M]),pe.delayedLeave&&pe.delayedLeave(),M._enterCb=void 0)};Y?fe(Y,[M,me]):me()},leave(M,Y){const Z=String(t.key);if(M._enterCb&&M._enterCb(!0),i.isUnmounting)return Y();U(u,[M]);let de=!1;const _e=M._leaveCb=me=>{de||(de=!0,Y(),me?U(y,[M]):U(v,[M]),M._leaveCb=void 0,W[Z]===t&&delete W[Z])};W[Z]=t,c?fe(c,[M,_e]):_e()},clone(M){return An(M,e,i,r)}};return pe}function on(t){if(zr(t))return t=Tt(t),t.children=null,t}function Is(t){return zr(t)?t.children?t.children[0]:void 0:t}function kn(t,e){t.shapeFlag&6&&t.component?kn(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function so(t,e=!1,i){let r=[],n=0;for(let s=0;s<t.length;s++){let a=t[s];const o=i==null?a.key:String(i)+String(a.key!=null?a.key:s);a.type===Le?(a.patchFlag&128&&n++,r=r.concat(so(a.children,e,o))):(e||a.type!==nt)&&r.push(o!=null?Tt(a,{key:o}):a)}if(n>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function Hr(t){return X(t)?{setup:t,name:t.name}:t}const Fi=t=>!!t.type.__asyncLoader,zr=t=>t.type.__isKeepAlive;function wh(t,e){ao(t,"a",e)}function bh(t,e){ao(t,"da",e)}function ao(t,e,i=ye){const r=t.__wdc||(t.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Br(e,r,i),i){let n=i.parent;for(;n&&n.parent;)zr(n.parent.vnode)&&Ch(r,e,i,n),n=n.parent}}function Ch(t,e,i,r){const n=Br(e,t,r,!0);lo(()=>{Un(r[e],n)},i)}function Br(t,e,i=ye,r=!1){if(i){const n=i[t]||(i[t]=[]),s=e.__weh||(e.__weh=(...a)=>{if(i.isUnmounted)return;_i(),ci(i);const o=Ve(e,i,t,a);return zt(),mi(),o});return r?n.unshift(s):n.push(s),s}}const ut=t=>(e,i=ye)=>(!Zi||t==="sp")&&Br(t,e,i),Sh=ut("bm"),is=ut("m"),Th=ut("bu"),xh=ut("u"),oo=ut("bum"),lo=ut("um"),Ah=ut("sp"),kh=ut("rtg"),Eh=ut("rtc");function Ph(t,e=ye){Br("ec",t,e)}function Mt(t,e,i,r){const n=t.dirs,s=e&&e.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(_i(),Ve(l,i,8,[t.el,o,t,e]),mi())}}const Ih=Symbol();function ln(t,e,i={},r,n){if(Oe.isCE||Oe.parent&&Fi(Oe.parent)&&Oe.parent.isCE)return we("slot",e==="default"?null:{name:e},r&&r());let s=t[e];s&&s._c&&(s._d=!1),kt();const a=s&&ho(s(i)),o=jh(Le,{key:i.key||`_${e}`},a||(r?r():[]),a&&t._===1?64:-2);return!n&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function ho(t){return t.some(e=>bo(e)?!(e.type===nt||e.type===Le&&!ho(e.children)):!0)?t:null}const En=t=>t?So(t)?as(t)||t.proxy:En(t.parent):null,Ar=Ee(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>En(t.parent),$root:t=>En(t.root),$emit:t=>t.emit,$options:t=>uo(t),$forceUpdate:t=>t.f||(t.f=()=>Za(t.update)),$nextTick:t=>t.n||(t.n=rh.bind(t.proxy)),$watch:t=>_h.bind(t)}),Lh={get({_:t},e){const{ctx:i,setupState:r,data:n,props:s,accessCache:a,type:o,appContext:l}=t;let h;if(e[0]!=="$"){const v=a[e];if(v!==void 0)switch(v){case 1:return r[e];case 2:return n[e];case 4:return i[e];case 3:return s[e]}else{if(r!==se&&j(r,e))return a[e]=1,r[e];if(n!==se&&j(n,e))return a[e]=2,n[e];if((h=t.propsOptions[0])&&j(h,e))return a[e]=3,s[e];if(i!==se&&j(i,e))return a[e]=4,i[e];Pn&&(a[e]=0)}}const f=Ar[e];let u,c;if(f)return e==="$attrs"&&Ge(t,"get",e),f(t);if((u=o.__cssModules)&&(u=u[e]))return u;if(i!==se&&j(i,e))return a[e]=4,i[e];if(c=l.config.globalProperties,j(c,e))return c[e]},set({_:t},e,i){const{data:r,setupState:n,ctx:s}=t;return n!==se&&j(n,e)?(n[e]=i,!0):r!==se&&j(r,e)?(r[e]=i,!0):j(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:r,appContext:n,propsOptions:s}},a){let o;return!!i[a]||t!==se&&j(t,a)||e!==se&&j(e,a)||(o=s[0])&&j(o,a)||j(r,a)||j(Ar,a)||j(n.config.globalProperties,a)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:j(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};let Pn=!0;function Dh(t){const e=uo(t),i=t.proxy,r=t.ctx;Pn=!1,e.beforeCreate&&Ls(e.beforeCreate,t,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:h,created:f,beforeMount:u,mounted:c,beforeUpdate:v,updated:y,activated:S,deactivated:g,beforeDestroy:I,beforeUnmount:x,destroyed:D,unmounted:W,render:U,renderTracked:fe,renderTriggered:pe,errorCaptured:M,serverPrefetch:Y,expose:Z,inheritAttrs:de,components:_e,directives:me,filters:Dt}=e;if(h&&Mh(h,r,null,t.appContext.config.unwrapInjectedRef),a)for(const ue in a){const ae=a[ue];X(ae)&&(r[ue]=ae.bind(i))}if(n){const ue=n.call(i,i);Se(ue)&&(t.data=Jn(ue))}if(Pn=!0,s)for(const ue in s){const ae=s[ue],ot=X(ae)?ae.bind(i,i):X(ae.get)?ae.get.bind(i,i):je,qr=!X(ae)&&X(ae.set)?ae.set.bind(i):je,Ci=hf({get:ot,set:qr});Object.defineProperty(r,ue,{enumerable:!0,configurable:!0,get:()=>Ci.value,set:qt=>Ci.value=qt})}if(o)for(const ue in o)fo(o[ue],r,i,ue);if(l){const ue=X(l)?l.call(i):l;Reflect.ownKeys(ue).forEach(ae=>{gh(ae,ue[ae])})}f&&Ls(f,t,"c");function Ae(ue,ae){V(ae)?ae.forEach(ot=>ue(ot.bind(i))):ae&&ue(ae.bind(i))}if(Ae(Sh,u),Ae(is,c),Ae(Th,v),Ae(xh,y),Ae(wh,S),Ae(bh,g),Ae(Ph,M),Ae(Eh,fe),Ae(kh,pe),Ae(oo,x),Ae(lo,W),Ae(Ah,Y),V(Z))if(Z.length){const ue=t.exposed||(t.exposed={});Z.forEach(ae=>{Object.defineProperty(ue,ae,{get:()=>i[ae],set:ot=>i[ae]=ot})})}else t.exposed||(t.exposed={});U&&t.render===je&&(t.render=U),de!=null&&(t.inheritAttrs=de),_e&&(t.components=_e),me&&(t.directives=me)}function Mh(t,e,i=je,r=!1){V(t)&&(t=In(t));for(const n in t){const s=t[n];let a;Se(s)?"default"in s?a=sn(s.from||n,s.default,!0):a=sn(s.from||n):a=sn(s),ke(a)&&r?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[n]=a}}function Ls(t,e,i){Ve(V(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,i)}function fo(t,e,i,r){const n=r.includes(".")?ro(i,r):()=>i[r];if(Ce(t)){const s=e[t];X(s)&&an(n,s)}else if(X(t))an(n,t.bind(i));else if(Se(t))if(V(t))t.forEach(s=>fo(s,e,i,r));else{const s=X(t.handler)?t.handler.bind(i):e[t.handler];X(s)&&an(n,s,t)}}function uo(t){const e=t.type,{mixins:i,extends:r}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let l;return o?l=o:!n.length&&!i&&!r?l=e:(l={},n.length&&n.forEach(h=>kr(l,h,a,!0)),kr(l,e,a)),s.set(e,l),l}function kr(t,e,i,r=!1){const{mixins:n,extends:s}=e;s&&kr(t,s,i,!0),n&&n.forEach(a=>kr(t,a,i,!0));for(const a in e)if(!(r&&a==="expose")){const o=Oh[a]||i&&i[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Oh={data:Ds,props:Ft,emits:Ft,methods:Ft,computed:Ft,beforeCreate:Ie,created:Ie,beforeMount:Ie,mounted:Ie,beforeUpdate:Ie,updated:Ie,beforeDestroy:Ie,beforeUnmount:Ie,destroyed:Ie,unmounted:Ie,activated:Ie,deactivated:Ie,errorCaptured:Ie,serverPrefetch:Ie,components:Ft,directives:Ft,watch:Fh,provide:Ds,inject:Rh};function Ds(t,e){return e?t?function(){return Ee(X(t)?t.call(this,this):t,X(e)?e.call(this,this):e)}:e:t}function Rh(t,e){return Ft(In(t),In(e))}function In(t){if(V(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Ie(t,e){return t?[...new Set([].concat(t,e))]:e}function Ft(t,e){return t?Ee(Ee(Object.create(null),t),e):e}function Fh(t,e){if(!t)return e;if(!e)return t;const i=Ee(Object.create(null),t);for(const r in e)i[r]=Ie(t[r],e[r]);return i}function Wh(t,e,i,r=!1){const n={},s={};Sr(s,Nr,1),t.propsDefaults=Object.create(null),co(t,e,n,s);for(const a in t.propsOptions[0])a in n||(n[a]=void 0);i?t.props=r?n:jl(n):t.type.props?t.props=n:t.props=s,t.attrs=s}function Gh(t,e,i,r){const{props:n,attrs:s,vnode:{patchFlag:a}}=t,o=Q(n),[l]=t.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const f=t.vnode.dynamicProps;for(let u=0;u<f.length;u++){let c=f[u];if(Wr(t.emitsOptions,c))continue;const v=e[c];if(l)if(j(s,c))v!==s[c]&&(s[c]=v,h=!0);else{const y=ui(c);n[y]=Ln(l,o,y,v,t,!1)}else v!==s[c]&&(s[c]=v,h=!0)}}}else{co(t,e,n,s)&&(h=!0);let f;for(const u in o)(!e||!j(e,u)&&((f=gi(u))===u||!j(e,f)))&&(l?i&&(i[u]!==void 0||i[f]!==void 0)&&(n[u]=Ln(l,o,u,void 0,t,!0)):delete n[u]);if(s!==o)for(const u in s)(!e||!j(e,u)&&!0)&&(delete s[u],h=!0)}h&&dt(t,"set","$attrs")}function co(t,e,i,r){const[n,s]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(vr(l))continue;const h=e[l];let f;n&&j(n,f=ui(l))?!s||!s.includes(f)?i[f]=h:(o||(o={}))[f]=h:Wr(t.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(s){const l=Q(i),h=o||se;for(let f=0;f<s.length;f++){const u=s[f];i[u]=Ln(n,l,u,h[u],t,!j(h,u))}}return a}function Ln(t,e,i,r,n,s){const a=t[i];if(a!=null){const o=j(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&X(l)){const{propsDefaults:h}=n;i in h?r=h[i]:(ci(n),r=h[i]=l.call(null,e),zt())}else r=l}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===gi(i))&&(r=!0))}return r}function po(t,e,i=!1){const r=e.propsCache,n=r.get(t);if(n)return n;const s=t.props,a={},o=[];let l=!1;if(!X(t)){const f=u=>{l=!0;const[c,v]=po(u,e,!0);Ee(a,c),v&&o.push(...v)};!i&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!s&&!l)return r.set(t,oi),oi;if(V(s))for(let f=0;f<s.length;f++){const u=ui(s[f]);Ms(u)&&(a[u]=se)}else if(s)for(const f in s){const u=ui(f);if(Ms(u)){const c=s[f],v=a[u]=V(c)||X(c)?{type:c}:c;if(v){const y=Fs(Boolean,v.type),S=Fs(String,v.type);v[0]=y>-1,v[1]=S<0||y<S,(y>-1||j(v,"default"))&&o.push(u)}}}const h=[a,o];return r.set(t,h),h}function Ms(t){return t[0]!=="$"}function Os(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Rs(t,e){return Os(t)===Os(e)}function Fs(t,e){return V(e)?e.findIndex(i=>Rs(i,t)):X(e)&&Rs(e,t)?0:-1}const go=t=>t[0]==="_"||t==="$stable",rs=t=>V(t)?t.map(it):[it(t)],Hh=(t,e,i)=>{if(e._n)return e;const r=Rt((...n)=>rs(e(...n)),i);return r._c=!1,r},_o=(t,e,i)=>{const r=t._ctx;for(const n in t){if(go(n))continue;const s=t[n];if(X(s))e[n]=Hh(n,s,r);else if(s!=null){const a=rs(s);e[n]=()=>a}}},mo=(t,e)=>{const i=rs(e);t.slots.default=()=>i},zh=(t,e)=>{if(t.vnode.shapeFlag&32){const i=e._;i?(t.slots=Q(e),Sr(e,"_",i)):_o(e,t.slots={})}else t.slots={},e&&mo(t,e);Sr(t.slots,Nr,1)},Bh=(t,e,i)=>{const{vnode:r,slots:n}=t;let s=!0,a=se;if(r.shapeFlag&32){const o=e._;o?i&&o===1?s=!1:(Ee(n,e),!i&&o===1&&delete n._):(s=!e.$stable,_o(e,n)),a=e}else e&&(mo(t,e),a={default:1});if(s)for(const o in n)!go(o)&&!(o in a)&&delete n[o]};function vo(){return{app:null,config:{isNativeTag:pl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Nh=0;function Vh(t,e){return function(r,n=null){X(r)||(r=Object.assign({},r)),n!=null&&!Se(n)&&(n=null);const s=vo(),a=new Set;let o=!1;const l=s.app={_uid:Nh++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:ff,get config(){return s.config},set config(h){},use(h,...f){return a.has(h)||(h&&X(h.install)?(a.add(h),h.install(l,...f)):X(h)&&(a.add(h),h(l,...f))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,f){return f?(s.components[h]=f,l):s.components[h]},directive(h,f){return f?(s.directives[h]=f,l):s.directives[h]},mount(h,f,u){if(!o){const c=we(r,n);return c.appContext=s,f&&e?e(c,h):t(c,h,u),o=!0,l._container=h,h.__vue_app__=l,as(c.component)||c.component.proxy}},unmount(){o&&(t(null,l._container),delete l._container.__vue_app__)},provide(h,f){return s.provides[h]=f,l}};return l}}function Dn(t,e,i,r,n=!1){if(V(t)){t.forEach((c,v)=>Dn(c,e&&(V(e)?e[v]:e),i,r,n));return}if(Fi(r)&&!n)return;const s=r.shapeFlag&4?as(r.component)||r.component.proxy:r.el,a=n?null:s,{i:o,r:l}=t,h=e&&e.r,f=o.refs===se?o.refs={}:o.refs,u=o.setupState;if(h!=null&&h!==l&&(Ce(h)?(f[h]=null,j(u,h)&&(u[h]=null)):ke(h)&&(h.value=null)),X(l))Ct(l,o,12,[a,f]);else{const c=Ce(l),v=ke(l);if(c||v){const y=()=>{if(t.f){const S=c?f[l]:l.value;n?V(S)&&Un(S,s):V(S)?S.includes(s)||S.push(s):c?(f[l]=[s],j(u,l)&&(u[l]=f[l])):(l.value=[s],t.k&&(f[t.k]=l.value))}else c?(f[l]=a,j(u,l)&&(u[l]=a)):v&&(l.value=a,t.k&&(f[t.k]=a))};a?(y.id=-1,Me(y,i)):y()}}}const Me=ph;function Uh(t){return Xh(t)}function Xh(t,e){const i=bl();i.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:h,setElementText:f,parentNode:u,nextSibling:c,setScopeId:v=je,cloneNode:y,insertStaticContent:S}=t,g=(d,p,m,C=null,b=null,E=null,L=!1,A=null,P=!!p.dynamicChildren)=>{if(d===p)return;d&&!Wt(d,p)&&(C=er(d),gt(d,b,E,!0),d=null),p.patchFlag===-2&&(P=!1,p.dynamicChildren=null);const{type:T,ref:G,shapeFlag:O}=p;switch(T){case ns:I(d,p,m,C);break;case nt:x(d,p,m,C);break;case hn:d==null&&D(p,m,C,L);break;case Le:me(d,p,m,C,b,E,L,A,P);break;default:O&1?fe(d,p,m,C,b,E,L,A,P):O&6?Dt(d,p,m,C,b,E,L,A,P):(O&64||O&128)&&T.process(d,p,m,C,b,E,L,A,P,Jt)}G!=null&&b&&Dn(G,d&&d.ref,E,p||d,!p)},I=(d,p,m,C)=>{if(d==null)r(p.el=o(p.children),m,C);else{const b=p.el=d.el;p.children!==d.children&&h(b,p.children)}},x=(d,p,m,C)=>{d==null?r(p.el=l(p.children||""),m,C):p.el=d.el},D=(d,p,m,C)=>{[d.el,d.anchor]=S(d.children,p,m,C,d.el,d.anchor)},W=({el:d,anchor:p},m,C)=>{let b;for(;d&&d!==p;)b=c(d),r(d,m,C),d=b;r(p,m,C)},U=({el:d,anchor:p})=>{let m;for(;d&&d!==p;)m=c(d),n(d),d=m;n(p)},fe=(d,p,m,C,b,E,L,A,P)=>{L=L||p.type==="svg",d==null?pe(p,m,C,b,E,L,A,P):Z(d,p,b,E,L,A,P)},pe=(d,p,m,C,b,E,L,A)=>{let P,T;const{type:G,props:O,shapeFlag:H,transition:B,patchFlag:q,dirs:ie}=d;if(d.el&&y!==void 0&&q===-1)P=d.el=y(d.el);else{if(P=d.el=a(d.type,E,O&&O.is,O),H&8?f(P,d.children):H&16&&Y(d.children,P,null,C,b,E&&G!=="foreignObject",L,A),ie&&Mt(d,null,C,"created"),O){for(const oe in O)oe!=="value"&&!vr(oe)&&s(P,oe,null,O[oe],E,d.children,C,b,lt);"value"in O&&s(P,"value",null,O.value),(T=O.onVnodeBeforeMount)&&et(T,C,d)}M(P,d,d.scopeId,L,C)}ie&&Mt(d,null,C,"beforeMount");const re=(!b||b&&!b.pendingBranch)&&B&&!B.persisted;re&&B.beforeEnter(P),r(P,p,m),((T=O&&O.onVnodeMounted)||re||ie)&&Me(()=>{T&&et(T,C,d),re&&B.enter(P),ie&&Mt(d,null,C,"mounted")},b)},M=(d,p,m,C,b)=>{if(m&&v(d,m),C)for(let E=0;E<C.length;E++)v(d,C[E]);if(b){let E=b.subTree;if(p===E){const L=b.vnode;M(d,L,L.scopeId,L.slotScopeIds,b.parent)}}},Y=(d,p,m,C,b,E,L,A,P=0)=>{for(let T=P;T<d.length;T++){const G=d[T]=A?yt(d[T]):it(d[T]);g(null,G,p,m,C,b,E,L,A)}},Z=(d,p,m,C,b,E,L)=>{const A=p.el=d.el;let{patchFlag:P,dynamicChildren:T,dirs:G}=p;P|=d.patchFlag&16;const O=d.props||se,H=p.props||se;let B;m&&Ot(m,!1),(B=H.onVnodeBeforeUpdate)&&et(B,m,p,d),G&&Mt(p,d,m,"beforeUpdate"),m&&Ot(m,!0);const q=b&&p.type!=="foreignObject";if(T?de(d.dynamicChildren,T,A,m,C,q,E):L||ot(d,p,A,null,m,C,q,E,!1),P>0){if(P&16)_e(A,p,O,H,m,C,b);else if(P&2&&O.class!==H.class&&s(A,"class",null,H.class,b),P&4&&s(A,"style",O.style,H.style,b),P&8){const ie=p.dynamicProps;for(let re=0;re<ie.length;re++){const oe=ie[re],Ye=O[oe],Qt=H[oe];(Qt!==Ye||oe==="value")&&s(A,oe,Ye,Qt,b,d.children,m,C,lt)}}P&1&&d.children!==p.children&&f(A,p.children)}else!L&&T==null&&_e(A,p,O,H,m,C,b);((B=H.onVnodeUpdated)||G)&&Me(()=>{B&&et(B,m,p,d),G&&Mt(p,d,m,"updated")},C)},de=(d,p,m,C,b,E,L)=>{for(let A=0;A<p.length;A++){const P=d[A],T=p[A],G=P.el&&(P.type===Le||!Wt(P,T)||P.shapeFlag&70)?u(P.el):m;g(P,T,G,null,C,b,E,L,!0)}},_e=(d,p,m,C,b,E,L)=>{if(m!==C){for(const A in C){if(vr(A))continue;const P=C[A],T=m[A];P!==T&&A!=="value"&&s(d,A,T,P,L,p.children,b,E,lt)}if(m!==se)for(const A in m)!vr(A)&&!(A in C)&&s(d,A,m[A],null,L,p.children,b,E,lt);"value"in C&&s(d,"value",m.value,C.value)}},me=(d,p,m,C,b,E,L,A,P)=>{const T=p.el=d?d.el:o(""),G=p.anchor=d?d.anchor:o("");let{patchFlag:O,dynamicChildren:H,slotScopeIds:B}=p;B&&(A=A?A.concat(B):B),d==null?(r(T,m,C),r(G,m,C),Y(p.children,m,G,b,E,L,A,P)):O>0&&O&64&&H&&d.dynamicChildren?(de(d.dynamicChildren,H,m,b,E,L,A),(p.key!=null||b&&p===b.subTree)&&yo(d,p,!0)):ot(d,p,m,G,b,E,L,A,P)},Dt=(d,p,m,C,b,E,L,A,P)=>{p.slotScopeIds=A,d==null?p.shapeFlag&512?b.ctx.activate(p,m,C,L,P):bi(p,m,C,b,E,L,P):Ae(d,p,P)},bi=(d,p,m,C,b,E,L)=>{const A=d.component=tf(d,C,b);if(zr(d)&&(A.ctx.renderer=Jt),nf(A),A.asyncDep){if(b&&b.registerDep(A,ue),!d.el){const P=A.subTree=we(nt);x(null,P,p,m)}return}ue(A,d,p,m,b,E,L)},Ae=(d,p,m)=>{const C=p.component=d.component;if(dh(d,p,m))if(C.asyncDep&&!C.asyncResolved){ae(C,p,m);return}else C.next=p,sh(C.update),C.update();else p.el=d.el,C.vnode=p},ue=(d,p,m,C,b,E,L)=>{const A=()=>{if(d.isMounted){let{next:G,bu:O,u:H,parent:B,vnode:q}=d,ie=G,re;Ot(d,!1),G?(G.el=q.el,ae(d,G,L)):G=q,O&&tn(O),(re=G.props&&G.props.onVnodeBeforeUpdate)&&et(re,B,G,q),Ot(d,!0);const oe=nn(d),Ye=d.subTree;d.subTree=oe,g(Ye,oe,u(Ye.el),er(Ye),d,b,E),G.el=oe.el,ie===null&&uh(d,oe.el),H&&Me(H,b),(re=G.props&&G.props.onVnodeUpdated)&&Me(()=>et(re,B,G,q),b)}else{let G;const{el:O,props:H}=p,{bm:B,m:q,parent:ie}=d,re=Fi(p);if(Ot(d,!1),B&&tn(B),!re&&(G=H&&H.onVnodeBeforeMount)&&et(G,ie,p),Ot(d,!0),O&&Qr){const oe=()=>{d.subTree=nn(d),Qr(O,d.subTree,d,b,null)};re?p.type.__asyncLoader().then(()=>!d.isUnmounted&&oe()):oe()}else{const oe=d.subTree=nn(d);g(null,oe,m,C,d,b,E),p.el=oe.el}if(q&&Me(q,b),!re&&(G=H&&H.onVnodeMounted)){const oe=p;Me(()=>et(G,ie,oe),b)}(p.shapeFlag&256||ie&&Fi(ie.vnode)&&ie.vnode.shapeFlag&256)&&d.a&&Me(d.a,b),d.isMounted=!0,p=m=C=null}},P=d.effect=new Zn(A,()=>Za(T),d.scope),T=d.update=()=>P.run();T.id=d.uid,Ot(d,!0),T()},ae=(d,p,m)=>{p.component=d;const C=d.vnode.props;d.vnode=p,d.next=null,Gh(d,p.props,C,m),Bh(d,p.children,m),_i(),Fr(void 0,d.update),mi()},ot=(d,p,m,C,b,E,L,A,P=!1)=>{const T=d&&d.children,G=d?d.shapeFlag:0,O=p.children,{patchFlag:H,shapeFlag:B}=p;if(H>0){if(H&128){Ci(T,O,m,C,b,E,L,A,P);return}else if(H&256){qr(T,O,m,C,b,E,L,A,P);return}}B&8?(G&16&&lt(T,b,E),O!==T&&f(m,O)):G&16?B&16?Ci(T,O,m,C,b,E,L,A,P):lt(T,b,E,!0):(G&8&&f(m,""),B&16&&Y(O,m,C,b,E,L,A,P))},qr=(d,p,m,C,b,E,L,A,P)=>{d=d||oi,p=p||oi;const T=d.length,G=p.length,O=Math.min(T,G);let H;for(H=0;H<O;H++){const B=p[H]=P?yt(p[H]):it(p[H]);g(d[H],B,m,null,b,E,L,A,P)}T>G?lt(d,b,E,!0,!1,O):Y(p,m,C,b,E,L,A,P,O)},Ci=(d,p,m,C,b,E,L,A,P)=>{let T=0;const G=p.length;let O=d.length-1,H=G-1;for(;T<=O&&T<=H;){const B=d[T],q=p[T]=P?yt(p[T]):it(p[T]);if(Wt(B,q))g(B,q,m,null,b,E,L,A,P);else break;T++}for(;T<=O&&T<=H;){const B=d[O],q=p[H]=P?yt(p[H]):it(p[H]);if(Wt(B,q))g(B,q,m,null,b,E,L,A,P);else break;O--,H--}if(T>O){if(T<=H){const B=H+1,q=B<G?p[B].el:C;for(;T<=H;)g(null,p[T]=P?yt(p[T]):it(p[T]),m,q,b,E,L,A,P),T++}}else if(T>H)for(;T<=O;)gt(d[T],b,E,!0),T++;else{const B=T,q=T,ie=new Map;for(T=q;T<=H;T++){const Re=p[T]=P?yt(p[T]):it(p[T]);Re.key!=null&&ie.set(Re.key,T)}let re,oe=0;const Ye=H-q+1;let Qt=!1,ms=0;const Si=new Array(Ye);for(T=0;T<Ye;T++)Si[T]=0;for(T=B;T<=O;T++){const Re=d[T];if(oe>=Ye){gt(Re,b,E,!0);continue}let Qe;if(Re.key!=null)Qe=ie.get(Re.key);else for(re=q;re<=H;re++)if(Si[re-q]===0&&Wt(Re,p[re])){Qe=re;break}Qe===void 0?gt(Re,b,E,!0):(Si[Qe-q]=T+1,Qe>=ms?ms=Qe:Qt=!0,g(Re,p[Qe],m,null,b,E,L,A,P),oe++)}const vs=Qt?Yh(Si):oi;for(re=vs.length-1,T=Ye-1;T>=0;T--){const Re=q+T,Qe=p[Re],ys=Re+1<G?p[Re+1].el:C;Si[T]===0?g(null,Qe,m,ys,b,E,L,A,P):Qt&&(re<0||T!==vs[re]?qt(Qe,m,ys,2):re--)}}},qt=(d,p,m,C,b=null)=>{const{el:E,type:L,transition:A,children:P,shapeFlag:T}=d;if(T&6){qt(d.component.subTree,p,m,C);return}if(T&128){d.suspense.move(p,m,C);return}if(T&64){L.move(d,p,m,Jt);return}if(L===Le){r(E,p,m);for(let O=0;O<P.length;O++)qt(P[O],p,m,C);r(d.anchor,p,m);return}if(L===hn){W(d,p,m);return}if(C!==2&&T&1&&A)if(C===0)A.beforeEnter(E),r(E,p,m),Me(()=>A.enter(E),b);else{const{leave:O,delayLeave:H,afterLeave:B}=A,q=()=>r(E,p,m),ie=()=>{O(E,()=>{q(),B&&B()})};H?H(E,q,ie):ie()}else r(E,p,m)},gt=(d,p,m,C=!1,b=!1)=>{const{type:E,props:L,ref:A,children:P,dynamicChildren:T,shapeFlag:G,patchFlag:O,dirs:H}=d;if(A!=null&&Dn(A,null,m,d,!0),G&256){p.ctx.deactivate(d);return}const B=G&1&&H,q=!Fi(d);let ie;if(q&&(ie=L&&L.onVnodeBeforeUnmount)&&et(ie,p,d),G&6)ll(d.component,m,C);else{if(G&128){d.suspense.unmount(m,C);return}B&&Mt(d,null,p,"beforeUnmount"),G&64?d.type.remove(d,p,m,b,Jt,C):T&&(E!==Le||O>0&&O&64)?lt(T,p,m,!1,!0):(E===Le&&O&384||!b&&G&16)&&lt(P,p,m),C&&gs(d)}(q&&(ie=L&&L.onVnodeUnmounted)||B)&&Me(()=>{ie&&et(ie,p,d),B&&Mt(d,null,p,"unmounted")},m)},gs=d=>{const{type:p,el:m,anchor:C,transition:b}=d;if(p===Le){ol(m,C);return}if(p===hn){U(d);return}const E=()=>{n(m),b&&!b.persisted&&b.afterLeave&&b.afterLeave()};if(d.shapeFlag&1&&b&&!b.persisted){const{leave:L,delayLeave:A}=b,P=()=>L(m,E);A?A(d.el,E,P):P()}else E()},ol=(d,p)=>{let m;for(;d!==p;)m=c(d),n(d),d=m;n(p)},ll=(d,p,m)=>{const{bum:C,scope:b,update:E,subTree:L,um:A}=d;C&&tn(C),b.stop(),E&&(E.active=!1,gt(L,d,p,m)),A&&Me(A,p),Me(()=>{d.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},lt=(d,p,m,C=!1,b=!1,E=0)=>{for(let L=E;L<d.length;L++)gt(d[L],p,m,C,b)},er=d=>d.shapeFlag&6?er(d.component.subTree):d.shapeFlag&128?d.suspense.next():c(d.anchor||d.el),_s=(d,p,m)=>{d==null?p._vnode&&gt(p._vnode,null,null,!0):g(p._vnode||null,d,p,null,null,null,m),qa(),p._vnode=d},Jt={p:g,um:gt,m:qt,r:gs,mt:bi,mc:Y,pc:ot,pbc:de,n:er,o:t};let Jr,Qr;return e&&([Jr,Qr]=e(Jt)),{render:_s,hydrate:Jr,createApp:Vh(_s,Jr)}}function Ot({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function yo(t,e,i=!1){const r=t.children,n=e.children;if(V(r)&&V(n))for(let s=0;s<r.length;s++){const a=r[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=yt(n[s]),o.el=a.el),i||yo(a,o))}}function Yh(t){const e=t.slice(),i=[0];let r,n,s,a,o;const l=t.length;for(r=0;r<l;r++){const h=t[r];if(h!==0){if(n=i[i.length-1],t[n]<h){e[r]=n,i.push(r);continue}for(s=0,a=i.length-1;s<a;)o=s+a>>1,t[i[o]]<h?s=o+1:a=o;h<t[i[s]]&&(s>0&&(e[r]=i[s-1]),i[s]=r)}}for(s=i.length,a=i[s-1];s-- >0;)i[s]=a,a=e[a];return i}const Kh=t=>t.__isTeleport,Le=Symbol(void 0),ns=Symbol(void 0),nt=Symbol(void 0),hn=Symbol(void 0),Wi=[];let Ze=null;function kt(t=!1){Wi.push(Ze=t?null:[])}function Zh(){Wi.pop(),Ze=Wi[Wi.length-1]||null}let Ki=1;function Ws(t){Ki+=t}function wo(t){return t.dynamicChildren=Ki>0?Ze||oi:null,Zh(),Ki>0&&Ze&&Ze.push(t),t}function Nt(t,e,i,r,n,s){return wo($(t,e,i,r,n,s,!0))}function jh(t,e,i,r,n){return wo(we(t,e,i,r,n,!0))}function bo(t){return t?t.__v_isVNode===!0:!1}function Wt(t,e){return t.type===e.type&&t.key===e.key}const Nr="__vInternal",Co=({key:t})=>t!=null?t:null,yr=({ref:t,ref_key:e,ref_for:i})=>t!=null?Ce(t)||ke(t)||X(t)?{i:Oe,r:t,k:e,f:!!i}:t:null;function $(t,e=null,i=null,r=0,n=null,s=t===Le?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Co(e),ref:e&&yr(e),scopeId:Gr,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null};return o?(ss(l,i),s&128&&t.normalize(l)):i&&(l.shapeFlag|=Ce(i)?8:16),Ki>0&&!a&&Ze&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ze.push(l),l}const we=$h;function $h(t,e=null,i=null,r=0,n=null,s=!1){if((!t||t===Ih)&&(t=nt),bo(t)){const o=Tt(t,e,!0);return i&&ss(o,i),Ki>0&&!s&&Ze&&(o.shapeFlag&6?Ze[Ze.indexOf(t)]=o:Ze.push(o)),o.patchFlag|=-2,o}if(lf(t)&&(t=t.__vccOpts),e){e=qh(e);let{class:o,style:l}=e;o&&!Ce(o)&&(e.class=Nn(o)),Se(l)&&(Ba(l)&&!V(l)&&(l=Ee({},l)),e.style=Bn(l))}const a=Ce(t)?1:ch(t)?128:Kh(t)?64:Se(t)?4:X(t)?2:0;return $(t,e,i,r,n,a,s,!0)}function qh(t){return t?Ba(t)||Nr in t?Ee({},t):t:null}function Tt(t,e,i=!1){const{props:r,ref:n,patchFlag:s,children:a}=t,o=e?Jh(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&Co(o),ref:e&&e.ref?i&&n?V(n)?n.concat(yr(e)):[n,yr(e)]:yr(e):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Le?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Tt(t.ssContent),ssFallback:t.ssFallback&&Tt(t.ssFallback),el:t.el,anchor:t.anchor}}function st(t=" ",e=0){return we(ns,null,t,e)}function it(t){return t==null||typeof t=="boolean"?we(nt):V(t)?we(Le,null,t.slice()):typeof t=="object"?yt(t):we(ns,null,String(t))}function yt(t){return t.el===null||t.memo?t:Tt(t)}function ss(t,e){let i=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(V(e))i=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),ss(t,n()),n._c&&(n._d=!0));return}else{i=32;const n=e._;!n&&!(Nr in e)?e._ctx=Oe:n===3&&Oe&&(Oe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else X(e)?(e={default:e,_ctx:Oe},i=32):(e=String(e),r&64?(i=16,e=[st(e)]):i=8);t.children=e,t.shapeFlag|=i}function Jh(...t){const e={};for(let i=0;i<t.length;i++){const r=t[i];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=Nn([e.class,r.class]));else if(n==="style")e.style=Bn([e.style,r.style]);else if(Lr(n)){const s=e[n],a=r[n];a&&s!==a&&!(V(s)&&s.includes(a))&&(e[n]=s?[].concat(s,a):a)}else n!==""&&(e[n]=r[n])}return e}function et(t,e,i,r=null){Ve(t,e,7,[i,r])}const Qh=vo();let ef=0;function tf(t,e,i){const r=t.type,n=(e?e.appContext:t.appContext)||Qh,s={uid:ef++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Cl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:po(r,n),emitsOptions:Qa(r,n),emit:null,emitted:null,propsDefaults:se,inheritAttrs:r.inheritAttrs,ctx:se,data:se,props:se,attrs:se,slots:se,refs:se,setupState:se,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=lh.bind(null,s),t.ce&&t.ce(s),s}let ye=null;const rf=()=>ye||Oe,ci=t=>{ye=t,t.scope.on()},zt=()=>{ye&&ye.scope.off(),ye=null};function So(t){return t.vnode.shapeFlag&4}let Zi=!1;function nf(t,e=!1){Zi=e;const{props:i,children:r}=t.vnode,n=So(t);Wh(t,i,n,e),zh(t,r);const s=n?sf(t,e):void 0;return Zi=!1,s}function sf(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=Na(new Proxy(t.ctx,Lh));const{setup:r}=i;if(r){const n=t.setupContext=r.length>1?of(t):null;ci(t),_i();const s=Ct(r,t,0,[t.props,n]);if(mi(),zt(),Aa(s)){if(s.then(zt,zt),e)return s.then(a=>{Gs(t,a,e)}).catch(a=>{Rr(a,t,0)});t.asyncDep=s}else Gs(t,s,e)}else To(t,e)}function Gs(t,e,i){X(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Se(e)&&(t.setupState=Ya(e)),To(t,i)}let Hs;function To(t,e,i){const r=t.type;if(!t.render){if(!e&&Hs&&!r.render){const n=r.template;if(n){const{isCustomElement:s,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=r,h=Ee(Ee({isCustomElement:s,delimiters:o},a),l);r.render=Hs(n,h)}}t.render=r.render||je}ci(t),_i(),Dh(t),mi(),zt()}function af(t){return new Proxy(t.attrs,{get(e,i){return Ge(t,"get","$attrs"),e[i]}})}function of(t){const e=r=>{t.exposed=r||{}};let i;return{get attrs(){return i||(i=af(t))},slots:t.slots,emit:t.emit,expose:e}}function as(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Ya(Na(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Ar)return Ar[i](t)}}))}function lf(t){return X(t)&&"__vccOpts"in t}const hf=(t,e)=>th(t,e,Zi),ff="3.2.37",df="http://www.w3.org/2000/svg",Gt=typeof document<"u"?document:null,zs=Gt&&Gt.createElement("template"),uf={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,r)=>{const n=e?Gt.createElementNS(df,t):Gt.createElement(t,i?{is:i}:void 0);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>Gt.createTextNode(t),createComment:t=>Gt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Gt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,i,r,n,s){const a=i?i.previousSibling:e.lastChild;if(n&&(n===s||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),i),!(n===s||!(n=n.nextSibling)););else{zs.innerHTML=r?`<svg>${t}</svg>`:t;const o=zs.content;if(r){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,i)}return[a?a.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function cf(t,e,i){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}function pf(t,e,i){const r=t.style,n=Ce(i);if(i&&!n){for(const s in i)Mn(r,s,i[s]);if(e&&!Ce(e))for(const s in e)i[s]==null&&Mn(r,s,"")}else{const s=r.display;n?e!==i&&(r.cssText=i):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const Bs=/\s*!important$/;function Mn(t,e,i){if(V(i))i.forEach(r=>Mn(t,e,r));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const r=gf(t,e);Bs.test(i)?t.setProperty(gi(r),i.replace(Bs,""),"important"):t[r]=i}}const Ns=["Webkit","Moz","ms"],fn={};function gf(t,e){const i=fn[e];if(i)return i;let r=ui(e);if(r!=="filter"&&r in t)return fn[e]=r;r=Pa(r);for(let n=0;n<Ns.length;n++){const s=Ns[n]+r;if(s in t)return fn[e]=s}return e}const Vs="http://www.w3.org/1999/xlink";function _f(t,e,i,r,n){if(r&&e.startsWith("xlink:"))i==null?t.removeAttributeNS(Vs,e.slice(6,e.length)):t.setAttributeNS(Vs,e,i);else{const s=fl(e);i==null||s&&!Ca(i)?t.removeAttribute(e):t.setAttribute(e,s?"":i)}}function mf(t,e,i,r,n,s,a){if(e==="innerHTML"||e==="textContent"){r&&a(r,n,s),t[e]=i==null?"":i;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=i;const l=i==null?"":i;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),i==null&&t.removeAttribute(e);return}let o=!1;if(i===""||i==null){const l=typeof t[e];l==="boolean"?i=Ca(i):i==null&&l==="string"?(i="",o=!0):l==="number"&&(i=0,o=!0)}try{t[e]=i}catch{}o&&t.removeAttribute(e)}const[xo,vf]=(()=>{let t=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const i=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(i&&Number(i[1])<=53)}return[t,e]})();let On=0;const yf=Promise.resolve(),wf=()=>{On=0},bf=()=>On||(yf.then(wf),On=xo());function Cf(t,e,i,r){t.addEventListener(e,i,r)}function Sf(t,e,i,r){t.removeEventListener(e,i,r)}function Tf(t,e,i,r,n=null){const s=t._vei||(t._vei={}),a=s[e];if(r&&a)a.value=r;else{const[o,l]=xf(e);if(r){const h=s[e]=Af(r,n);Cf(t,o,h,l)}else a&&(Sf(t,o,a,l),s[e]=void 0)}}const Us=/(?:Once|Passive|Capture)$/;function xf(t){let e;if(Us.test(t)){e={};let i;for(;i=t.match(Us);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[gi(t.slice(2)),e]}function Af(t,e){const i=r=>{const n=r.timeStamp||xo();(vf||n>=i.attached-1)&&Ve(kf(r,i.value),e,5,[r])};return i.value=t,i.attached=bf(),i}function kf(t,e){if(V(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const Xs=/^on[a-z]/,Ef=(t,e,i,r,n=!1,s,a,o,l)=>{e==="class"?cf(t,r,n):e==="style"?pf(t,i,r):Lr(e)?Vn(e)||Tf(t,e,i,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Pf(t,e,r,n))?mf(t,e,r,s,a,o,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),_f(t,e,r,n))};function Pf(t,e,i,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&Xs.test(e)&&X(i)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Xs.test(e)&&Ce(i)?!1:e in t}const If={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};yh.props;const Lf=Ee({patchProp:Ef},uf);let Ys;function Df(){return Ys||(Ys=Uh(Lf))}const Mf=(...t)=>{const e=Df().createApp(...t),{mount:i}=e;return e.mount=r=>{const n=Of(r);if(!n)return;const s=e._component;!X(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const a=i(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},e};function Of(t){return Ce(t)?document.querySelector(t):t}const Rf="/assets/peaks-logo.c68c18d4.svg",Ff=t=>(eo("data-v-d4e75228"),t=t(),to(),t),Wf={class:"greetings"},Gf={class:"green"},Hf=Ff(()=>$("h3",null,"A Vue wrapper around the bbc/peaks.js audio waveform UI component.",-1)),zf=Hr({__name:"HelloWorld",props:{msg:null},setup(t){return(e,i)=>(kt(),Nt("div",Wf,[$("h1",Gf,Sa(t.msg),1),Hf]))}});const $i=(t,e)=>{const i=t.__vccOpts||t;for(const[r,n]of e)i[r]=n;return i},Bf=$i(zf,[["__scopeId","data-v-d4e75228"]]);const Nf={},Vf={class:"item"},Uf={class:"details"};function Xf(t,e){return kt(),Nt("div",Vf,[$("i",null,[ln(t.$slots,"icon",{},void 0,!0)]),$("div",Uf,[$("h3",null,[ln(t.$slots,"heading",{},void 0,!0)]),ln(t.$slots,"default",{},void 0,!0)])])}const Ks=$i(Nf,[["render",Xf],["__scopeId","data-v-c757c72f"]]),Yf={},Kf={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"17",fill:"currentColor"},Zf=$("path",{d:"M11 2.253a1 1 0 1 0-2 0h2zm-2 13a1 1 0 1 0 2 0H9zm.447-12.167a1 1 0 1 0 1.107-1.666L9.447 3.086zM1 2.253L.447 1.42A1 1 0 0 0 0 2.253h1zm0 13H0a1 1 0 0 0 1.553.833L1 15.253zm8.447.833a1 1 0 1 0 1.107-1.666l-1.107 1.666zm0-14.666a1 1 0 1 0 1.107 1.666L9.447 1.42zM19 2.253h1a1 1 0 0 0-.447-.833L19 2.253zm0 13l-.553.833A1 1 0 0 0 20 15.253h-1zm-9.553-.833a1 1 0 1 0 1.107 1.666L9.447 14.42zM9 2.253v13h2v-13H9zm1.553-.833C9.203.523 7.42 0 5.5 0v2c1.572 0 2.961.431 3.947 1.086l1.107-1.666zM5.5 0C3.58 0 1.797.523.447 1.42l1.107 1.666C2.539 2.431 3.928 2 5.5 2V0zM0 2.253v13h2v-13H0zm1.553 13.833C2.539 15.431 3.928 15 5.5 15v-2c-1.92 0-3.703.523-5.053 1.42l1.107 1.666zM5.5 15c1.572 0 2.961.431 3.947 1.086l1.107-1.666C9.203 13.523 7.42 13 5.5 13v2zm5.053-11.914C11.539 2.431 12.928 2 14.5 2V0c-1.92 0-3.703.523-5.053 1.42l1.107 1.666zM14.5 2c1.573 0 2.961.431 3.947 1.086l1.107-1.666C18.203.523 16.421 0 14.5 0v2zm3.5.253v13h2v-13h-2zm1.553 12.167C18.203 13.523 16.421 13 14.5 13v2c1.573 0 2.961.431 3.947 1.086l1.107-1.666zM14.5 13c-1.92 0-3.703.523-5.053 1.42l1.107 1.666C11.539 15.431 12.928 15 14.5 15v-2z"},null,-1),jf=[Zf];function $f(t,e){return kt(),Nt("svg",Kf,jf)}const qf=$i(Yf,[["render",$f]]),Jf={},Qf={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"20",fill:"currentColor"},ed=$("path",{d:"M11.447 8.894a1 1 0 1 0-.894-1.789l.894 1.789zm-2.894-.789a1 1 0 1 0 .894 1.789l-.894-1.789zm0 1.789a1 1 0 1 0 .894-1.789l-.894 1.789zM7.447 7.106a1 1 0 1 0-.894 1.789l.894-1.789zM10 9a1 1 0 1 0-2 0h2zm-2 2.5a1 1 0 1 0 2 0H8zm9.447-5.606a1 1 0 1 0-.894-1.789l.894 1.789zm-2.894-.789a1 1 0 1 0 .894 1.789l-.894-1.789zm2 .789a1 1 0 1 0 .894-1.789l-.894 1.789zm-1.106-2.789a1 1 0 1 0-.894 1.789l.894-1.789zM18 5a1 1 0 1 0-2 0h2zm-2 2.5a1 1 0 1 0 2 0h-2zm-5.447-4.606a1 1 0 1 0 .894-1.789l-.894 1.789zM9 1l.447-.894a1 1 0 0 0-.894 0L9 1zm-2.447.106a1 1 0 1 0 .894 1.789l-.894-1.789zm-6 3a1 1 0 1 0 .894 1.789L.553 4.106zm2.894.789a1 1 0 1 0-.894-1.789l.894 1.789zm-2-.789a1 1 0 1 0-.894 1.789l.894-1.789zm1.106 2.789a1 1 0 1 0 .894-1.789l-.894 1.789zM2 5a1 1 0 1 0-2 0h2zM0 7.5a1 1 0 1 0 2 0H0zm8.553 12.394a1 1 0 1 0 .894-1.789l-.894 1.789zm-1.106-2.789a1 1 0 1 0-.894 1.789l.894-1.789zm1.106 1a1 1 0 1 0 .894 1.789l-.894-1.789zm2.894.789a1 1 0 1 0-.894-1.789l.894 1.789zM8 19a1 1 0 1 0 2 0H8zm2-2.5a1 1 0 1 0-2 0h2zm-7.447.394a1 1 0 1 0 .894-1.789l-.894 1.789zM1 15H0a1 1 0 0 0 .553.894L1 15zm1-2.5a1 1 0 1 0-2 0h2zm12.553 2.606a1 1 0 1 0 .894 1.789l-.894-1.789zM17 15l.447.894A1 1 0 0 0 18 15h-1zm1-2.5a1 1 0 1 0-2 0h2zm-7.447-5.394l-2 1 .894 1.789 2-1-.894-1.789zm-1.106 1l-2-1-.894 1.789 2 1 .894-1.789zM8 9v2.5h2V9H8zm8.553-4.894l-2 1 .894 1.789 2-1-.894-1.789zm.894 0l-2-1-.894 1.789 2 1 .894-1.789zM16 5v2.5h2V5h-2zm-4.553-3.894l-2-1-.894 1.789 2 1 .894-1.789zm-2.894-1l-2 1 .894 1.789 2-1L8.553.106zM1.447 5.894l2-1-.894-1.789-2 1 .894 1.789zm-.894 0l2 1 .894-1.789-2-1-.894 1.789zM0 5v2.5h2V5H0zm9.447 13.106l-2-1-.894 1.789 2 1 .894-1.789zm0 1.789l2-1-.894-1.789-2 1 .894 1.789zM10 19v-2.5H8V19h2zm-6.553-3.894l-2-1-.894 1.789 2 1 .894-1.789zM2 15v-2.5H0V15h2zm13.447 1.894l2-1-.894-1.789-2 1 .894 1.789zM18 15v-2.5h-2V15h2z"},null,-1),td=[ed];function id(t,e){return kt(),Nt("svg",Qf,td)}const rd=$i(Jf,[["render",id]]),nd=st("Documentation"),sd=$("p",null,[st(" Explore the below examples or see the "),$("a",{target:"_blank",href:"https://github.com/suterma/vue-peaks#vue-peaks"},"vue-peaks documentation on GitHub"),st(". ")],-1),ad=$("p",null,[st(" See the "),$("a",{target:"_blank",href:"https://waveform.prototyping.bbc.co.uk/"},"peaks.js documentation"),st(" for detailed information about the options and tools. ")],-1),od=st("Examples"),ld=st(" See the below examples to get an idea how to use the wrapper components. "),hd=Hr({__name:"TheWelcome",setup(t){return(e,i)=>(kt(),Nt(Le,null,[we(Ks,null,{icon:Rt(()=>[we(qf)]),heading:Rt(()=>[nd]),default:Rt(()=>[sd,ad]),_:1}),we(Ks,null,{icon:Rt(()=>[we(rd)]),heading:Rt(()=>[od]),default:Rt(()=>[ld]),_:1})],64))}});var fd=Math.PI/180;function dd(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const fi=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},z={_global:fi,version:"8.3.11",isBrowser:dd(),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle(t){return z.angleDeg?t*fd:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return z.DD.isDragging},isDragReady(){return!!z.DD.node},document:fi.document,_injectGlobal(t){fi.Konva=t}},Et=t=>{z[t.prototype.getClassName()]=t};z._injectGlobal(z);class wt{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new wt(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var i=this.m;return{x:i[0]*e.x+i[2]*e.y+i[4],y:i[1]*e.x+i[3]*e.y+i[5]}}translate(e,i){return this.m[4]+=this.m[0]*e+this.m[2]*i,this.m[5]+=this.m[1]*e+this.m[3]*i,this}scale(e,i){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=i,this.m[3]*=i,this}rotate(e){var i=Math.cos(e),r=Math.sin(e),n=this.m[0]*i+this.m[2]*r,s=this.m[1]*i+this.m[3]*r,a=this.m[0]*-r+this.m[2]*i,o=this.m[1]*-r+this.m[3]*i;return this.m[0]=n,this.m[1]=s,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,i){var r=this.m[0]+this.m[2]*i,n=this.m[1]+this.m[3]*i,s=this.m[2]+this.m[0]*e,a=this.m[3]+this.m[1]*e;return this.m[0]=r,this.m[1]=n,this.m[2]=s,this.m[3]=a,this}multiply(e){var i=this.m[0]*e.m[0]+this.m[2]*e.m[1],r=this.m[1]*e.m[0]+this.m[3]*e.m[1],n=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=i,this.m[1]=r,this.m[2]=n,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*e,r=-this.m[1]*e,n=-this.m[2]*e,s=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=r,this.m[2]=n,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}decompose(){var e=this.m[0],i=this.m[1],r=this.m[2],n=this.m[3],s=this.m[4],a=this.m[5],o=e*n-i*r;let l={x:s,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||i!=0){var h=Math.sqrt(e*e+i*i);l.rotation=i>0?Math.acos(e/h):-Math.acos(e/h),l.scaleX=h,l.scaleY=o/h,l.skewX=(e*r+i*n)/o,l.skewY=0}else if(r!=0||n!=0){var f=Math.sqrt(r*r+n*n);l.rotation=Math.PI/2-(n>0?Math.acos(-r/f):-Math.acos(r/f)),l.scaleX=o/f,l.scaleY=f,l.skewX=0,l.skewY=(e*r+i*n)/o}return l.rotation=_._getRotation(l.rotation),l}}var ud="[object Array]",cd="[object Number]",pd="[object String]",gd="[object Boolean]",_d=Math.PI/180,md=180/Math.PI,dn="#",vd="",yd="0",wd="Konva warning: ",Zs="Konva error: ",bd="rgb(",un={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Cd=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,ar=[];const Sd=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)},_={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===ud},_isNumber(t){return Object.prototype.toString.call(t)===cd&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===pd},_isBoolean(t){return Object.prototype.toString.call(t)===gd},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;var e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){ar.push(t),ar.length===1&&Sd(function(){const e=ar;ar=[],e.forEach(function(i){i()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var i=_.createImageElement();i.onload=function(){e(i)},i.src=t},_rgbToHex(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb(t){t=t.replace(dn,vd);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var t=(Math.random()*16777215<<0).toString(16);t.length<6;)t=yd+t;return dn+t},getRGB(t){var e;return t in un?(e=un[t],{r:e[0],g:e[1],b:e[2]}):t[0]===dn?this._hexToRgb(t.substring(1)):t.substr(0,4)===bd?(e=Cd.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",_._namedColorToRBA(t)||_._hex3ColorToRGBA(t)||_._hex6ColorToRGBA(t)||_._rgbColorToRGBA(t)||_._rgbaColorToRGBA(t)||_._hslColorToRGBA(t)},_namedColorToRBA(t){var e=un[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map((i,r)=>i.slice(-1)==="%"?r===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),r=Number(i[0])/360,n=Number(i[1])/100,s=Number(i[2])/100;let a,o,l;if(n===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?a=s*(1+n):a=s+n-s*n;const h=2*s-a,f=[0,0,0];for(let u=0;u<3;u++)o=r+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?l=h+(a-h)*6*o:2*o<1?l=a:3*o<2?l=h+(a-h)*(2/3-o)*6:l=h,f[u]=l*255;return{r:Math.round(f[0]),g:Math.round(f[1]),b:Math.round(f[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){var e={};for(var i in t)this._isPlainObject(t[i])?e[i]=this.cloneObject(t[i]):this._isArray(t[i])?e[i]=this.cloneArray(t[i]):e[i]=t[i];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*_d},radToDeg(t){return t*md},_degToRad(t){return _.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),_.degToRad(t)},_radToDeg(t){return _.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),_.radToDeg(t)},_getRotation(t){return z.angleDeg?_.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(Zs+t)},error(t){console.error(Zs+t)},warn(t){!z.showWarnings||console.warn(wd+t)},each(t,e){for(var i in t)e(i,t[i])},_inRange(t,e,i){return e<=t&&t<i},_getProjectionToSegment(t,e,i,r,n,s){var a,o,l,h=(t-i)*(t-i)+(e-r)*(e-r);if(h==0)a=t,o=e,l=(n-i)*(n-i)+(s-r)*(s-r);else{var f=((n-t)*(i-t)+(s-e)*(r-e))/h;f<0?(a=t,o=e,l=(t-n)*(t-n)+(e-s)*(e-s)):f>1?(a=i,o=r,l=(i-n)*(i-n)+(r-s)*(r-s)):(a=t+f*(i-t),o=e+f*(r-e),l=(a-n)*(a-n)+(o-s)*(o-s))}return[a,o,l]},_getProjectionToLine(t,e,i){var r=_.cloneObject(t),n=Number.MAX_VALUE;return e.forEach(function(s,a){if(!(!i&&a===e.length-1)){var o=e[(a+1)%e.length],l=_._getProjectionToSegment(s.x,s.y,o.x,o.y,t.x,t.y),h=l[0],f=l[1],u=l[2];u<n&&(r.x=h,r.y=f,n=u)}}),r},_prepareArrayForTween(t,e,i){var r,n=[],s=[];if(t.length>e.length){var a=e;e=t,t=a}for(r=0;r<t.length;r+=2)n.push({x:t[r],y:t[r+1]});for(r=0;r<e.length;r+=2)s.push({x:e[r],y:e[r+1]});var o=[];return s.forEach(function(l){var h=_._getProjectionToLine(l,n,i);o.push(h.x),o.push(h.y)}),o},_prepareToStringify(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var i in t)if(!!(t.hasOwnProperty(i)&&t[i]&&typeof t[i]=="object")){if(e=Object.getOwnPropertyDescriptor(t,i),t[i].visitedByCircularReferenceRemoval||_._isElement(t[i]))if(e.configurable)delete t[i];else return null;else if(_._prepareToStringify(t[i])===null)if(e.configurable)delete t[i];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var i in e)t[i]=e[i];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999}};function Pt(t){return _._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||_._isBoolean(t)?t:Object.prototype.toString.call(t)}function K(){if(z.isUnminified)return function(t,e){return _._isNumber(t)||_.warn(Pt(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function Td(t){if(z.isUnminified)return function(e,i){let r=_._isNumber(e),n=_._isArray(e)&&e.length==t;return!r&&!n&&_.warn(Pt(e)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function os(){if(z.isUnminified)return function(t,e){var i=_._isNumber(t),r=t==="auto";return i||r||_.warn(Pt(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function vi(){if(z.isUnminified)return function(t,e){return _._isString(t)||_.warn(Pt(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function Ao(){if(z.isUnminified)return function(t,e){const i=_._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return i||r||_.warn(Pt(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function xd(){if(z.isUnminified)return function(t,e){return _._isArray(t)?t.forEach(function(i){_._isNumber(i)||_.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):_.warn(Pt(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}}function ct(){if(z.isUnminified)return function(t,e){var i=t===!0||t===!1;return i||_.warn(Pt(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function Ad(t){if(z.isUnminified)return function(e,i){return _.isObject(e)||_.warn(Pt(e)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+t),e}}var Ti="get",xi="set";const w={addGetterSetter(t,e,i,r,n){w.addGetter(t,e,i),w.addSetter(t,e,r,n),w.addOverloadedGetterSetter(t,e)},addGetter(t,e,i){var r=Ti+_._capitalize(e);t.prototype[r]=t.prototype[r]||function(){var n=this.attrs[e];return n===void 0?i:n}},addSetter(t,e,i,r){var n=xi+_._capitalize(e);t.prototype[n]||w.overWriteSetter(t,e,i,r)},overWriteSetter(t,e,i,r){var n=xi+_._capitalize(e);t.prototype[n]=function(s){return i&&s!==void 0&&s!==null&&(s=i.call(this,s,e)),this._setAttr(e,s),r&&r.call(this),this}},addComponentsGetterSetter(t,e,i,r,n){var s=i.length,a=_._capitalize,o=Ti+a(e),l=xi+a(e),h,f;t.prototype[o]=function(){var c={};for(h=0;h<s;h++)f=i[h],c[f]=this.getAttr(e+a(f));return c};var u=Ad(i);t.prototype[l]=function(c){var v=this.attrs[e],y;r&&(c=r.call(this,c)),u&&u.call(this,c,e);for(y in c)!c.hasOwnProperty(y)||this._setAttr(e+a(y),c[y]);return this._fireChangeEvent(e,v,c),n&&n.call(this),this},w.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var i=_._capitalize(e),r=xi+i,n=Ti+i;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[n]()}},addDeprecatedGetterSetter(t,e,i,r){_.error("Adding deprecated "+e);var n=Ti+_._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[n]=function(){_.error(s);var a=this.attrs[e];return a===void 0?i:a},w.addSetter(t,e,r,function(){_.error(s)}),w.addOverloadedGetterSetter(t,e)},backCompat(t,e){_.each(e,function(i,r){var n=t.prototype[r],s=Ti+_._capitalize(i),a=xi+_._capitalize(i);function o(){n.apply(this,arguments),_.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}t.prototype[i]=o,t.prototype[s]=o,t.prototype[a]=o})},afterSetFilter(){this._filterUpToDate=!1}};function kd(t){var e=[],i=t.length,r=_,n,s;for(n=0;n<i;n++)s=t[n],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),e.push(s);return e}var js=",",Ed="(",Pd=")",Id="([",Ld="])",Dd=";",Md="()",Od="=",$s=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Rd=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Fd=100;class Vr{constructor(e){this.canvas=e,this._context=e._canvas.getContext("2d"),z.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,i){var r=this.traceArr,n=r.length,s="",a,o,l,h;for(a=0;a<n;a++)o=r[a],l=o.method,l?(h=o.args,s+=l,e?s+=Md:_._isArray(h[0])?s+=Id+h.join(js)+Ld:(i&&(h=h.map(f=>typeof f=="number"?Math.floor(f):f)),s+=Ed+h.join(js)+Pd)):(s+=o.property,e||(s+=Od+o.val)),s+=Dd;return s}clearTrace(){this.traceArr=[]}_trace(e){var i=this.traceArr,r;i.push(e),r=i.length,r>=Fd&&i.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var i=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(e){var i=e.getLineCap();i&&this.setAttr("lineCap",i)}_applyOpacity(e){var i=e.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(e){var i=e.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(e,i){this._context[e]=i}arc(e,i,r,n,s,a){this._context.arc(e,i,r,n,s,a)}arcTo(e,i,r,n,s){this._context.arcTo(e,i,r,n,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,i,r,n,s,a){this._context.bezierCurveTo(e,i,r,n,s,a)}clearRect(e,i,r,n){this._context.clearRect(e,i,r,n)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,i){var r=arguments;if(r.length===2)return this._context.createImageData(e,i);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,i,r,n){return this._context.createLinearGradient(e,i,r,n)}createPattern(e,i){return this._context.createPattern(e,i)}createRadialGradient(e,i,r,n,s,a){return this._context.createRadialGradient(e,i,r,n,s,a)}drawImage(e,i,r,n,s,a,o,l,h){var f=arguments,u=this._context;f.length===3?u.drawImage(e,i,r):f.length===5?u.drawImage(e,i,r,n,s):f.length===9&&u.drawImage(e,i,r,n,s,a,o,l,h)}ellipse(e,i,r,n,s,a,o,l){this._context.ellipse(e,i,r,n,s,a,o,l)}isPointInPath(e,i){return this._context.isPointInPath(e,i)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,i,r,n){this._context.fillRect(e,i,r,n)}strokeRect(e,i,r,n){this._context.strokeRect(e,i,r,n)}fillText(e,i,r,n){n?this._context.fillText(e,i,r,n):this._context.fillText(e,i,r)}measureText(e){return this._context.measureText(e)}getImageData(e,i,r,n){return this._context.getImageData(e,i,r,n)}lineTo(e,i){this._context.lineTo(e,i)}moveTo(e,i){this._context.moveTo(e,i)}rect(e,i,r,n){this._context.rect(e,i,r,n)}putImageData(e,i,r){this._context.putImageData(e,i,r)}quadraticCurveTo(e,i,r,n){this._context.quadraticCurveTo(e,i,r,n)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,i){this._context.scale(e,i)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,i,r,n,s,a){this._context.setTransform(e,i,r,n,s,a)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,i,r,n){this._context.strokeText(e,i,r,n)}transform(e,i,r,n,s,a){this._context.transform(e,i,r,n,s,a)}translate(e,i){this._context.translate(e,i)}_enableTrace(){var e=this,i=$s.length,r=this.setAttr,n,s,a=function(o){var l=e[o],h;e[o]=function(){return s=kd(Array.prototype.slice.call(arguments,0)),h=l.apply(e,arguments),e._trace({method:o,args:s}),h}};for(n=0;n<i;n++)a($s[n]);e.setAttr=function(){r.apply(e,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:o,val:l})}}_applyGlobalCompositeOperation(e){const i=e.attrs.globalCompositeOperation;var r=!i||i==="source-over";r||this.setAttr("globalCompositeOperation",i)}}Rd.forEach(function(t){Object.defineProperty(Vr.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class Wd extends Vr{_fillColor(e){var i=e.fill();this.setAttr("fillStyle",i),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var i=e._getLinearGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fillRadialGradient(e){var i=e._getRadialGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fill(e){var i=e.fill(),r=e.getFillPriority();if(i&&r==="color"){this._fillColor(e);return}var n=e.getFillPatternImage();if(n&&r==="pattern"){this._fillPattern(e);return}var s=e.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(e);return}var a=e.getFillRadialGradientColorStops();if(a&&r==="radial-gradient"){this._fillRadialGradient(e);return}i?this._fillColor(e):n?this._fillPattern(e):s?this._fillLinearGradient(e):a&&this._fillRadialGradient(e)}_strokeLinearGradient(e){var i=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),n=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(i.x,i.y,r.x,r.y);if(n){for(var a=0;a<n.length;a+=2)s.addColorStop(n[a],n[a+1]);this.setAttr("strokeStyle",s)}}_stroke(e){var i=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e),i&&e.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=e.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var i,r,n,s=(i=e.getShadowRGBA())!==null&&i!==void 0?i:"black",a=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,o=(n=e.getShadowOffset())!==null&&n!==void 0?n:{x:0,y:0},l=e.getAbsoluteScale(),h=this.canvas.getPixelRatio(),f=l.x*h,u=l.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(f),Math.abs(u))),this.setAttr("shadowOffsetX",o.x*f),this.setAttr("shadowOffsetY",o.y*u)}}class Gd extends Vr{_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){var i=e.getStrokeScaleEnabled();if(!i){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(e);var n=e.hitStrokeWidth(),s=n==="auto"?e.strokeWidth():n;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}}var or;function Hd(){if(or)return or;var t=_.createCanvasElement(),e=t.getContext("2d");return or=function(){var i=z._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/r}(),or}class Ur{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var i=e||{},r=i.pixelRatio||z.pixelRatio||Hd();this.pixelRatio=r,this._canvas=_.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var i=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var i=this.pixelRatio,r=this.getContext()._context;r.scale(i,i)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var i=this.pixelRatio,r=this.getContext()._context;r.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,i){this.setWidth(e||0),this.setHeight(i||0)}toDataURL(e,i){try{return this._canvas.toDataURL(e,i)}catch{try{return this._canvas.toDataURL()}catch(n){return _.error("Unable to get data URL. "+n.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}w.addGetterSetter(Ur,"pixelRatio",void 0,K());class di extends Ur{constructor(e={width:0,height:0}){super(e),this.context=new Wd(this),this.setSize(e.width,e.height)}}class ls extends Ur{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new Gd(this),this.setSize(e.width,e.height)}}const J={get isDragging(){var t=!1;return J._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return J._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const e=[];J._dragElements.forEach((i,r)=>{const{node:n}=i,s=n.getStage();s.setPointersPositions(t),i.pointerId===void 0&&(i.pointerId=_._getFirstPointerId(t));const a=s._changedPointerPositions.find(h=>h.id===i.pointerId);if(!!a){if(i.dragStatus!=="dragging"){var o=n.dragDistance(),l=Math.max(Math.abs(a.x-i.startPointerPos.x),Math.abs(a.y-i.startPointerPos.y));if(l<o||(n.startDrag({evt:t}),!n.isDragging()))return}n._setDragPosition(t,i),e.push(n)}}),e.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:t},!0)})},_endDragBefore(t){const e=[];J._dragElements.forEach(i=>{const{node:r}=i,n=r.getStage();if(t&&n.setPointersPositions(t),!n._changedPointerPositions.find(o=>o.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(J.justDragged=!0,z._mouseListenClick=!1,z._touchListenClick=!1,z._pointerListenClick=!1,i.dragStatus="stopped");const a=i.node.getLayer()||i.node instanceof z.Stage&&i.node;a&&e.indexOf(a)===-1&&e.push(a)}),e.forEach(i=>{i.draw()})},_endDragAfter(t){J._dragElements.forEach((e,i)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&J._dragElements.delete(i)})}};z.isBrowser&&(window.addEventListener("mouseup",J._endDragBefore,!0),window.addEventListener("touchend",J._endDragBefore,!0),window.addEventListener("mousemove",J._drag),window.addEventListener("touchmove",J._drag),window.addEventListener("mouseup",J._endDragAfter,!1),window.addEventListener("touchend",J._endDragAfter,!1));var wr="absoluteOpacity",lr="allEventListeners",ht="absoluteTransform",qs="absoluteScale",Ai="canvas",zd="Change",Bd="children",Nd="konva",Rn="listening",Js="mouseenter",Qs="mouseleave",ea="set",ta="Shape",br=" ",ia="stage",vt="transform",Vd="Stage",Fn="visible",Ud=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(br);let Xd=1;class R{constructor(e){this._id=Xd++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===vt||e===ht)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,i){var r=this._cache.get(e),n=e===vt||e===ht,s=r===void 0||n&&r.dirty===!0;return s&&(r=i.call(this),this._cache.set(e,r)),r}_calculate(e,i,r){if(!this._attachedDepsListeners.get(e)){const n=i.map(s=>s+"Change.konva").join(br);this.on(n,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(Ai)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===ht&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(Ai),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var i=e||{},r={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var n=Math.ceil(i.width||r.width),s=Math.ceil(i.height||r.height),a=i.pixelRatio,o=i.x===void 0?Math.floor(r.x):i.x,l=i.y===void 0?Math.floor(r.y):i.y,h=i.offset||0,f=i.drawBorder||!1,u=i.hitCanvasPixelRatio||1;if(!n||!s){_.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}n+=h*2+1,s+=h*2+1,o-=h,l-=h;var c=new di({pixelRatio:a,width:n,height:s}),v=new di({pixelRatio:a,width:0,height:0}),y=new ls({pixelRatio:u,width:n,height:s}),S=c.getContext(),g=y.getContext();return y.isCache=!0,c.isCache=!0,this._cache.delete(Ai),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(c.getContext()._context.imageSmoothingEnabled=!1,v.getContext()._context.imageSmoothingEnabled=!1),S.save(),g.save(),S.translate(-o,-l),g.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(wr),this._clearSelfAndDescendantCache(qs),this.drawScene(c,this),this.drawHit(y,this),this._isUnderCache=!1,S.restore(),g.restore(),f&&(S.save(),S.beginPath(),S.rect(0,0,n,s),S.closePath(),S.setAttr("strokeStyle","red"),S.setAttr("lineWidth",5),S.stroke(),S.restore()),this._cache.set(Ai,{scene:c,filter:v,hit:y,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Ai)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,i){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n,s,a,o,l=this.getAbsoluteTransform(i);return r.forEach(function(h){var f=l.point(h);n===void 0&&(n=a=f.x,s=o=f.y),n=Math.min(n,f.x),s=Math.min(s,f.y),a=Math.max(a,f.x),o=Math.max(o,f.y)}),{x:n,y:s,width:a-n,height:o-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();e.translate(i.x,i.y);var r=this._getCachedSceneCanvas(),n=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/n,r.height/n),e.restore()}_drawCachedHitCanvas(e){var i=this._getCanvasCache(),r=i.hit;e.save(),e.translate(i.x,i.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),i=this._getCanvasCache(),r=i.scene,n=i.filter,s=n.getContext(),a,o,l,h;if(e){if(!this._filterUpToDate){var f=r.pixelRatio;n.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(a=e.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/f,r.getHeight()/f),o=s.getImageData(0,0,n.getWidth(),n.getHeight()),l=0;l<a;l++){if(h=e[l],typeof h!="function"){_.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),s.putImageData(o,0,0)}}catch(u){_.error("Unable to apply filter. "+u.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return n}return r}on(e,i){if(this._cache&&this._cache.delete(lr),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(br),n=r.length,s,a,o,l,h;for(s=0;s<n;s++)a=r[s],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:i});return this}off(e,i){var r=(e||"").split(br),n=r.length,s,a,o,l,h,f;if(this._cache&&this._cache.delete(lr),!e)for(a in this.eventListeners)this._off(a);for(s=0;s<n;s++)if(o=r[s],l=o.split("."),h=l[0],f=l[1],h)this.eventListeners[h]&&this._off(h,f,i);else for(a in this.eventListeners)this._off(a,f,i);return this}dispatchEvent(e){var i={target:this,type:e.type,evt:e};return this.fire(e.type,i),this}addEventListener(e,i){return this.on(e,function(r){i.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,i,r){var n=this;this.on(e,function(s){for(var a=s.target.findAncestors(i,!0,n),o=0;o<a.length;o++)s=_.cloneObject(s),s.currentTarget=a[o],r.call(a[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),J._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ht),this._clearSelfAndDescendantCache(wr),this._clearSelfAndDescendantCache(qs),this._clearSelfAndDescendantCache(ia),this._clearSelfAndDescendantCache(Fn),this._clearSelfAndDescendantCache(Rn)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(e){var i="get"+_._capitalize(e);return _._isFunction(this[i])?this[i]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),i=[];e;)i.push(e),e=e.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var i,r;if(!e)return this;for(i in e)i!==Bd&&(r=ea+_._capitalize(i),_._isFunction(this[r])?this[r](e[i]):this._setAttr(i,e[i]))}),this}isListening(){return this._getCache(Rn,this._isListening)}_isListening(e){if(!this.listening())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(Fn,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,i=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),n=!1;J._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===r)&&(n=!0)});var s=!i&&!z.hitOnDragEnabled&&n;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),i=this,r=0,n,s,a,o;function l(h){for(n=[],s=h.length,a=0;a<s;a++)o=h[a],r++,o.nodeType!==ta&&(n=n.concat(o.getChildren().slice())),o._id===i._id&&(a=s);n.length>0&&n[0].getDepth()<=e&&l(n)}return i.nodeType!==Vd&&l(i.getStage().getChildren()),r}getDepth(){for(var e=0,i=this.parent;i;)e++,i=i.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(vt),this._clearSelfAndDescendantCache(ht)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(e){let i=!1,r=this.parent;for(;r;){if(r.isCached()){i=!0;break}r=r.parent}i&&!e&&(e=!0);var n=this.getAbsoluteTransform(e).getMatrix(),s=new wt,a=this.offset();return s.m=n.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(e){var i=this._clearTransform();this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,this._clearCache(vt);var r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(e.x,e.y),e={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(vt),this._clearSelfAndDescendantCache(ht),this}_setTransform(e){var i;for(i in e)this.attrs[i]=e[i]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var i=e.x,r=e.y,n=this.x(),s=this.y();return i!==void 0&&(n+=i),r!==void 0&&(s+=r),this.setPosition({x:n,y:s}),this}_eachAncestorReverse(e,i){var r=[],n=this.getParent(),s,a;if(!(i&&i._id===this._id)){for(r.unshift(this);n&&(!i||n._id!==i._id);)r.unshift(n),n=n.parent;for(s=r.length,a=0;a<s;a++)e(r[a])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return _.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return _.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return _.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return _.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return _.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&_.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(wr,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),i=this.getParent();return i&&!i._isUnderCache&&(e*=i.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},i=this.getAttrs(),r,n,s,a,o;e.attrs={};for(r in i)n=i[r],o=_.isObject(n)&&!_._isPlainObject(n)&&!_._isArray(n),!o&&(s=typeof this[r]=="function"&&this[r],delete i[r],a=s?s.call(this):null,i[r]=n,a!==n&&(e.attrs[r]=n));return e.className=this.getClassName(),_._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,i,r){var n=[];i&&this._isMatch(e)&&n.push(this);for(var s=this.parent;s;){if(s===r)return n;s._isMatch(e)&&n.push(s),s=s.parent}return n}isAncestorOf(e){return!1}findAncestor(e,i,r){return this.findAncestors(e,i,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var i=e.replace(/ /g,"").split(","),r=i.length,n,s;for(n=0;n<r;n++)if(s=i[n],_.isValidSelector(s)||(_.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),_.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),_.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(ia,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,i={},r){return i.target=i.target||this,r?this._fireAndBubble(e,i):this._fire(e,i),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(ht,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var i;if(e)return i=new wt,this._eachAncestorReverse(function(n){var s=n.transformsEnabled();s==="all"?i.multiply(n.getTransform()):s==="position"&&i.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},e),i;i=this._cache.get(ht)||new wt,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var r=this.transformsEnabled();if(r==="all")i.multiply(this.getTransform());else if(r==="position"){const n=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;i.translate(n-a,s-o)}return i.dirty=!1,i}getAbsoluteScale(e){for(var i=this;i;)i._isUnderCache&&(e=i),i=i.getParent();const n=this.getAbsoluteTransform(e).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(vt,this._getTransform)}_getTransform(){var e,i,r=this._cache.get(vt)||new wt;r.reset();var n=this.x(),s=this.y(),a=z.getAngle(this.rotation()),o=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,f=this.attrs.skewY||0,u=this.attrs.offsetX||0,c=this.attrs.offsetY||0;return(n!==0||s!==0)&&r.translate(n,s),a!==0&&r.rotate(a),(h!==0||f!==0)&&r.skew(h,f),(o!==1||l!==1)&&r.scale(o,l),(u!==0||c!==0)&&r.translate(-1*u,-1*c),r.dirty=!1,r}clone(e){var i=_.cloneObject(this.attrs),r,n,s,a,o;for(r in e)i[r]=e[r];var l=new this.constructor(i);for(r in this.eventListeners)for(n=this.eventListeners[r],s=n.length,a=0;a<s;a++)o=n[a],o.name.indexOf(Nd)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(o));return l}_toKonvaCanvas(e){e=e||{};var i=this.getClientRect(),r=this.getStage(),n=e.x!==void 0?e.x:Math.floor(i.x),s=e.y!==void 0?e.y:Math.floor(i.y),a=e.pixelRatio||1,o=new di({width:e.width||Math.ceil(i.width)||(r?r.width():0),height:e.height||Math.ceil(i.height)||(r?r.height():0),pixelRatio:a}),l=o.getContext();return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(n||s)&&l.translate(-1*n,-1*s),this.drawScene(o),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var i=e.mimeType||null,r=e.quality||null,n=this._toKonvaCanvas(e).toDataURL(i,r);return e.callback&&e.callback(n),n}toImage(e){return new Promise((i,r)=>{try{const n=e==null?void 0:e.callback;n&&delete e.callback,_._urlToImage(this.toDataURL(e),function(s){i(s),n==null||n(s)})}catch(n){r(n)}})}toBlob(e){return new Promise((i,r)=>{try{const n=e==null?void 0:e.callback;n&&delete e.callback,this.toCanvas(e).toBlob(s=>{i(s),n==null||n(s)})}catch(n){r(n)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():z.dragDistance}_off(e,i,r){var n=this.eventListeners[e],s,a,o;for(s=0;s<n.length;s++)if(a=n[s].name,o=n[s].handler,(a!=="konva"||i==="konva")&&(!i||a===i)&&(!r||r===o)){if(n.splice(s,1),n.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,i,r){this._fire(e+zd,{oldVal:i,newVal:r})}addName(e){if(!this.hasName(e)){var i=this.name(),r=i?i+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const i=this.name();if(!i)return!1;var r=(i||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var i=(this.name()||"").split(/\s/g),r=i.indexOf(e);return r!==-1&&(i.splice(r,1),this.name(i.join(" "))),this}setAttr(e,i){var r=this[ea+_._capitalize(e)];return _._isFunction(r)?r.call(this,i):this._setAttr(e,i),this}_requestDraw(){if(z.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,i){var r=this.attrs[e];r===i&&!_.isObject(i)||(i==null?delete this.attrs[e]:this.attrs[e]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,i),this._requestDraw())}_setComponentAttr(e,i,r){var n;r!==void 0&&(n=this.attrs[e],n||(this.attrs[e]=this.getAttr(e)),this.attrs[e][i]=r,this._fireChangeEvent(e,n,r))}_fireAndBubble(e,i,r){i&&this.nodeType===ta&&(i.target=this);var n=(e===Js||e===Qs)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!n){this._fire(e,i);var s=(e===Js||e===Qs)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,i,r):this._fireAndBubble.call(this.parent,e,i))}}_getProtoListeners(e){let i=this._cache.get(lr);if(!i){i={};let n=Object.getPrototypeOf(this);for(;n;){if(!n.eventListeners){n=Object.getPrototypeOf(n);continue}for(var r in n.eventListeners){const s=n.eventListeners[r],a=i[r]||[];i[r]=s.concat(a)}n=Object.getPrototypeOf(n)}this._cache.set(lr,i)}return i[e]}_fire(e,i){i=i||{},i.currentTarget=this,i.type=e;const r=this._getProtoListeners(e);if(r)for(var n=0;n<r.length;n++)r[n].handler.call(this,i);const s=this.eventListeners[e];if(s)for(var n=0;n<s.length;n++)s[n].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var i=e?e.pointerId:void 0,r=this.getStage(),n=this.getAbsolutePosition(),s=r._getPointerById(i)||r._changedPointerPositions[0]||n;J._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-n.x,y:s.y-n.y},dragStatus:"ready",pointerId:i})}startDrag(e,i=!0){J._dragElements.has(this._id)||this._createDragElement(e);const r=J._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},i)}_setDragPosition(e,i){const r=this.getStage()._getPointerById(i.pointerId);if(!!r){var n={x:r.x-i.offset.x,y:r.y-i.offset.y},s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,n,e);a?n=a:_.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==n.x||this._lastPos.y!==n.y)&&(this.setAbsolutePosition(n),this._requestDraw()),this._lastPos=n}}stopDrag(e){const i=J._dragElements.get(this._id);i&&(i.dragStatus="stopped"),J._endDragBefore(e),J._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=J._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var i=e.evt.button!==void 0,r=!i||z.dragButtons.indexOf(e.evt.button)>=0;if(!!r&&!this.isDragging()){var n=!1;J._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(n=!0)}),n||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const i=J._dragElements.get(this._id),r=i&&i.dragStatus==="dragging",n=i&&i.dragStatus==="ready";r?this.stopDrag():n&&J._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const i=this.getStage();if(!i)return!1;const r={x:-e.x,y:-e.y,width:i.width()+2*e.x,height:i.height()+2*e.y};return _.haveIntersection(r,this.getClientRect())}static create(e,i){return _._isString(e)&&(e=JSON.parse(e)),this._createNode(e,i)}static _createNode(e,i){var r=R.prototype.getClassName.call(e),n=e.children,s,a,o;i&&(e.attrs.container=i),z[r]||(_.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=z[r];if(s=new l(e.attrs),n)for(a=n.length,o=0;o<a;o++)s.add(R._createNode(n[o]));return s}}R.prototype.nodeType="Node";R.prototype._attrsAffectingSize=[];R.prototype.eventListeners={};R.prototype.on.call(R.prototype,Ud,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(vt),this._clearSelfAndDescendantCache(ht)});R.prototype.on.call(R.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Fn)});R.prototype.on.call(R.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Rn)});R.prototype.on.call(R.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(wr)});const ne=w.addGetterSetter;ne(R,"zIndex");ne(R,"absolutePosition");ne(R,"position");ne(R,"x",0,K());ne(R,"y",0,K());ne(R,"globalCompositeOperation","source-over",vi());ne(R,"opacity",1,K());ne(R,"name","",vi());ne(R,"id","",vi());ne(R,"rotation",0,K());w.addComponentsGetterSetter(R,"scale",["x","y"]);ne(R,"scaleX",1,K());ne(R,"scaleY",1,K());w.addComponentsGetterSetter(R,"skew",["x","y"]);ne(R,"skewX",0,K());ne(R,"skewY",0,K());w.addComponentsGetterSetter(R,"offset",["x","y"]);ne(R,"offsetX",0,K());ne(R,"offsetY",0,K());ne(R,"dragDistance",null,K());ne(R,"width",0,K());ne(R,"height",0,K());ne(R,"listening",!0,ct());ne(R,"preventDefault",!0,ct());ne(R,"filters",null,function(t){return this._filterUpToDate=!1,t});ne(R,"visible",!0,ct());ne(R,"transformsEnabled","all",vi());ne(R,"size");ne(R,"dragBoundFunc");ne(R,"draggable",!1,ct());w.backCompat(R,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});const ji=new Map,ko=z._global.PointerEvent!==void 0;function cn(t){return ji.get(t)}function hs(t){return{evt:t,pointerId:t.pointerId}}function Eo(t,e){return ji.get(t)===e}function Po(t,e){Gi(t),e.getStage()&&(ji.set(t,e),ko&&e._fire("gotpointercapture",hs(new PointerEvent("gotpointercapture"))))}function Gi(t,e){const i=ji.get(t);if(!i)return;const r=i.getStage();r&&r.content,ji.delete(t),ko&&i._fire("lostpointercapture",hs(new PointerEvent("lostpointercapture")))}var Io="hasShadow",Lo="shadowRGBA",Do="patternImage",Mo="linearGradient",Oo="radialGradient";let hr;function pn(){return hr||(hr=_.createCanvasElement().getContext("2d"),hr)}const Hi={};function Yd(t){t.fill()}function Kd(t){t.stroke()}function Zd(t){t.fill()}function jd(t){t.stroke()}function $d(){this._clearCache(Io)}function qd(){this._clearCache(Lo)}function Jd(){this._clearCache(Do)}function Qd(){this._clearCache(Mo)}function eu(){this._clearCache(Oo)}class k extends R{constructor(e){super(e);let i;for(;i=_.getRandomColor(),!(i&&!(i in Hi)););this.colorKey=i,Hi[i]=this}getContext(){return _.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return _.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(Io,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Do,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=pn();const i=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const r=new wt;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(z.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=r.getMatrix(),s=typeof DOMMatrix>"u"?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);i.setTransform(s)}return i}}_getLinearGradient(){return this._getCache(Mo,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var i=pn(),r=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),s=i.createLinearGradient(r.x,r.y,n.x,n.y),a=0;a<e.length;a+=2)s.addColorStop(e[a],e[a+1]);return s}}_getRadialGradient(){return this._getCache(Oo,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var i=pn(),r=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),s=i.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius()),a=0;a<e.length;a+=2)s.addColorStop(e[a],e[a+1]);return s}}getShadowRGBA(){return this._getCache(Lo,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=_.colorToRGBA(this.shadowColor());return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var i=this.getStage(),r=i.bufferHitCanvas,n;return r.getContext().clear(),this.drawHit(r,null,!0),n=r.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,n[3]>0}destroy(){return R.prototype.destroy.call(this),delete Hi[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var i;if(!this.getStage()||!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const n=e||this.hasFill(),s=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(n&&s&&a)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(n&&s&&o&&l)}setStrokeHitEnabled(e){_.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const i=e.skipTransform,r=e.relativeTo,n=this.getSelfRect(),a=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=n.width+a,l=n.height+a,h=!e.skipShadow&&this.hasShadow(),f=h?this.shadowOffsetX():0,u=h?this.shadowOffsetY():0,c=o+Math.abs(f),v=l+Math.abs(u),y=h&&this.shadowBlur()||0,S=c+y*2,g=v+y*2,I={width:S,height:g,x:-(a/2+y)+Math.min(f,0)+n.x,y:-(a/2+y)+Math.min(u,0)+n.y};return i?I:this._transformedRect(I,r)}drawScene(e,i){var r=this.getLayer(),n=e||r.getCanvas(),s=n.getContext(),a=this._getCanvasCache(),o=this.getSceneFunc(),l=this.hasShadow(),h,f,u,c=n.isCache,v=i===this;if(!this.isVisible()&&!v)return this;if(a){s.save();var y=this.getAbsoluteTransform(i).getMatrix();return s.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!o)return this;if(s.save(),this._useBufferCanvas()&&!c){h=this.getStage(),f=h.bufferCanvas,u=f.getContext(),u.clear(),u.save(),u._applyLineJoin(this);var S=this.getAbsoluteTransform(i).getMatrix();u.transform(S[0],S[1],S[2],S[3],S[4],S[5]),o.call(this,u,this),u.restore();var g=f.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(f._canvas,0,0,f.width/g,f.height/g)}else{if(s._applyLineJoin(this),!v){var S=this.getAbsoluteTransform(i).getMatrix();s.transform(S[0],S[1],S[2],S[3],S[4],S[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),o.call(this,s,this)}return s.restore(),this}drawHit(e,i,r=!1){if(!this.shouldDrawHit(i,r))return this;var n=this.getLayer(),s=e||n.hitCanvas,a=s&&s.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||_.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();var f=this.getAbsoluteTransform(i).getMatrix();return a.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),!(this===i)){var c=this.getAbsoluteTransform(i).getMatrix();a.transform(c[0],c[1],c[2],c[3],c[4],c[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(e=0){var i=this._getCanvasCache(),r=this._getCachedSceneCanvas(),n=i.hit,s=n.getContext(),a=n.getWidth(),o=n.getHeight(),l,h,f,u,c,v;s.clear(),s.drawImage(r._canvas,0,0,a,o);try{for(l=s.getImageData(0,0,a,o),h=l.data,f=h.length,u=_._hexToRgb(this.colorKey),c=0;c<f;c+=4)v=h[c+3],v>e?(h[c]=u.r,h[c+1]=u.g,h[c+2]=u.b,h[c+3]=255):h[c+3]=0;s.putImageData(l,0,0)}catch(y){_.error("Unable to draw hit graph from cached scene canvas. "+y.message)}return this}hasPointerCapture(e){return Eo(e,this)}setPointerCapture(e){Po(e,this)}releaseCapture(e){Gi(e)}}k.prototype._fillFunc=Yd;k.prototype._strokeFunc=Kd;k.prototype._fillFuncHit=Zd;k.prototype._strokeFuncHit=jd;k.prototype._centroid=!1;k.prototype.nodeType="Shape";Et(k);k.prototype.eventListeners={};k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",$d);k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",qd);k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",Jd);k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Qd);k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",eu);w.addGetterSetter(k,"stroke",void 0,Ao());w.addGetterSetter(k,"strokeWidth",2,K());w.addGetterSetter(k,"fillAfterStrokeEnabled",!1);w.addGetterSetter(k,"hitStrokeWidth","auto",os());w.addGetterSetter(k,"strokeHitEnabled",!0,ct());w.addGetterSetter(k,"perfectDrawEnabled",!0,ct());w.addGetterSetter(k,"shadowForStrokeEnabled",!0,ct());w.addGetterSetter(k,"lineJoin");w.addGetterSetter(k,"lineCap");w.addGetterSetter(k,"sceneFunc");w.addGetterSetter(k,"hitFunc");w.addGetterSetter(k,"dash");w.addGetterSetter(k,"dashOffset",0,K());w.addGetterSetter(k,"shadowColor",void 0,vi());w.addGetterSetter(k,"shadowBlur",0,K());w.addGetterSetter(k,"shadowOpacity",1,K());w.addComponentsGetterSetter(k,"shadowOffset",["x","y"]);w.addGetterSetter(k,"shadowOffsetX",0,K());w.addGetterSetter(k,"shadowOffsetY",0,K());w.addGetterSetter(k,"fillPatternImage");w.addGetterSetter(k,"fill",void 0,Ao());w.addGetterSetter(k,"fillPatternX",0,K());w.addGetterSetter(k,"fillPatternY",0,K());w.addGetterSetter(k,"fillLinearGradientColorStops");w.addGetterSetter(k,"strokeLinearGradientColorStops");w.addGetterSetter(k,"fillRadialGradientStartRadius",0);w.addGetterSetter(k,"fillRadialGradientEndRadius",0);w.addGetterSetter(k,"fillRadialGradientColorStops");w.addGetterSetter(k,"fillPatternRepeat","repeat");w.addGetterSetter(k,"fillEnabled",!0);w.addGetterSetter(k,"strokeEnabled",!0);w.addGetterSetter(k,"shadowEnabled",!0);w.addGetterSetter(k,"dashEnabled",!0);w.addGetterSetter(k,"strokeScaleEnabled",!0);w.addGetterSetter(k,"fillPriority","color");w.addComponentsGetterSetter(k,"fillPatternOffset",["x","y"]);w.addGetterSetter(k,"fillPatternOffsetX",0,K());w.addGetterSetter(k,"fillPatternOffsetY",0,K());w.addComponentsGetterSetter(k,"fillPatternScale",["x","y"]);w.addGetterSetter(k,"fillPatternScaleX",1,K());w.addGetterSetter(k,"fillPatternScaleY",1,K());w.addComponentsGetterSetter(k,"fillLinearGradientStartPoint",["x","y"]);w.addComponentsGetterSetter(k,"strokeLinearGradientStartPoint",["x","y"]);w.addGetterSetter(k,"fillLinearGradientStartPointX",0);w.addGetterSetter(k,"strokeLinearGradientStartPointX",0);w.addGetterSetter(k,"fillLinearGradientStartPointY",0);w.addGetterSetter(k,"strokeLinearGradientStartPointY",0);w.addComponentsGetterSetter(k,"fillLinearGradientEndPoint",["x","y"]);w.addComponentsGetterSetter(k,"strokeLinearGradientEndPoint",["x","y"]);w.addGetterSetter(k,"fillLinearGradientEndPointX",0);w.addGetterSetter(k,"strokeLinearGradientEndPointX",0);w.addGetterSetter(k,"fillLinearGradientEndPointY",0);w.addGetterSetter(k,"strokeLinearGradientEndPointY",0);w.addComponentsGetterSetter(k,"fillRadialGradientStartPoint",["x","y"]);w.addGetterSetter(k,"fillRadialGradientStartPointX",0);w.addGetterSetter(k,"fillRadialGradientStartPointY",0);w.addComponentsGetterSetter(k,"fillRadialGradientEndPoint",["x","y"]);w.addGetterSetter(k,"fillRadialGradientEndPointX",0);w.addGetterSetter(k,"fillRadialGradientEndPointY",0);w.addGetterSetter(k,"fillPatternRotation",0);w.backCompat(k,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});function Wn(t,e,i,r,n,s,a){var o=Math.sqrt(Math.pow(i-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(n-i,2)+Math.pow(s-r,2)),h=a*o/(o+l),f=a*l/(o+l),u=i-h*(n-t),c=r-h*(s-e),v=i+f*(n-t),y=r+f*(s-e);return[u,c,v,y]}function ra(t,e){var i=t.length,r=[],n,s;for(n=2;n<i-2;n+=2)s=Wn(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e),!isNaN(s[0])&&(r.push(s[0]),r.push(s[1]),r.push(t[n]),r.push(t[n+1]),r.push(s[2]),r.push(s[3]));return r}class at extends k{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var i=this.points(),r=i.length,n=this.tension(),s=this.closed(),a=this.bezier(),o,l,h;if(!!r){if(e.beginPath(),e.moveTo(i[0],i[1]),n!==0&&r>4){for(o=this.getTensionPoints(),l=o.length,h=s?0:4,s||e.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)e.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);s||e.quadraticCurveTo(o[l-2],o[l-1],i[r-2],i[r-1])}else if(a)for(h=2;h<r;)e.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<r;h+=2)e.lineTo(i[h],i[h+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():ra(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),i=e.length,r=this.tension(),n=Wn(e[i-2],e[i-1],e[0],e[1],e[2],e[3],r),s=Wn(e[i-4],e[i-3],e[i-2],e[i-1],e[0],e[1],r),a=ra(e,r),o=[n[2],n[3]].concat(a).concat([s[0],s[1],e[i-2],e[i-1],s[2],s[3],n[0],n[1],e[0],e[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var i=e[0],r=e[0],n=e[1],s=e[1],a,o,l=0;l<e.length/2;l++)a=e[l*2],o=e[l*2+1],i=Math.min(i,a),r=Math.max(r,a),n=Math.min(n,o),s=Math.max(s,o);return{x:i,y:n,width:r-i,height:s-n}}}at.prototype.className="Line";at.prototype._attrsAffectingSize=["points","bezier","tension"];Et(at);w.addGetterSetter(at,"closed",!1);w.addGetterSetter(at,"bezier",!1);w.addGetterSetter(at,"tension",0,K());w.addGetterSetter(at,"points",[],xd());class yi extends k{_sceneFunc(e){var i=this.cornerRadius(),r=this.width(),n=this.height();if(e.beginPath(),!i)e.rect(0,0,r,n);else{let s=0,a=0,o=0,l=0;typeof i=="number"?s=a=o=l=Math.min(i,r/2,n/2):(s=Math.min(i[0]||0,r/2,n/2),a=Math.min(i[1]||0,r/2,n/2),l=Math.min(i[2]||0,r/2,n/2),o=Math.min(i[3]||0,r/2,n/2)),e.moveTo(s,0),e.lineTo(r-a,0),e.arc(r-a,a,a,Math.PI*3/2,0,!1),e.lineTo(r,n-l),e.arc(r-l,n-l,l,0,Math.PI/2,!1),e.lineTo(o,n),e.arc(o,n-o,o,Math.PI/2,Math.PI,!1),e.lineTo(0,s),e.arc(s,s,s,Math.PI,Math.PI*3/2,!1)}e.closePath(),e.fillStrokeShape(this)}}yi.prototype.className="Rect";Et(yi);w.addGetterSetter(yi,"cornerRadius",0,Td(4));function tu(t){return Array.from(t)}var ei="auto",iu="center",ki="justify",ru="Change.konva",nu="2d",na="-",Ro="left",su="text",au="Text",ou="top",lu="bottom",sa="middle",Fo="normal",hu="px ",fr=" ",fu="right",du="word",uu="char",aa="none",gn="\u2026",Wo=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],cu=Wo.length;function pu(t){return t.split(",").map(e=>{e=e.trim();const i=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return i&&!r&&(e=`"${e}"`),e}).join(", ")}var dr;function _n(){return dr||(dr=_.createCanvasElement().getContext(nu),dr)}function gu(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function _u(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function mu(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class le extends k{constructor(e){super(mu(e)),this._partialTextX=0,this._partialTextY=0;for(var i=0;i<cu;i++)this.on(Wo[i]+ru,this._setTextData);this._setTextData()}_sceneFunc(e){var i=this.textArr,r=i.length;if(!!this.text()){var n=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,o=this.verticalAlign(),l=0,h=this.align(),f=this.getWidth(),u=this.letterSpacing(),c=this.fill(),v=this.textDecoration(),y=v.indexOf("underline")!==-1,S=v.indexOf("line-through")!==-1,g,I=0,I=a/2,x=0,D=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",sa),e.setAttr("textAlign",Ro),o===sa?l=(this.getHeight()-r*a-n*2)/2:o===lu&&(l=this.getHeight()-r*a-n*2),e.translate(n,l+n),g=0;g<r;g++){var x=0,D=0,W=i[g],U=W.text,fe=W.width,pe=W.lastInParagraph,M,Y,Z;if(e.save(),h===fu?x+=f-fe-n*2:h===iu&&(x+=(f-fe-n*2)/2),y&&(e.save(),e.beginPath(),e.moveTo(x,I+D+Math.round(s/2)),M=U.split(" ").length-1,Y=M===0,Z=h===ki&&pe&&!Y?f-n*2:fe,e.lineTo(x+Math.round(Z),I+D+Math.round(s/2)),e.lineWidth=s/15,e.strokeStyle=c,e.stroke(),e.restore()),S&&(e.save(),e.beginPath(),e.moveTo(x,I+D),M=U.split(" ").length-1,Y=M===0,Z=h===ki&&pe&&!Y?f-n*2:fe,e.lineTo(x+Math.round(Z),I+D),e.lineWidth=s/15,e.strokeStyle=c,e.stroke(),e.restore()),u!==0||h===ki){M=U.split(" ").length-1;for(var de=tu(U),_e=0;_e<de.length;_e++){var me=de[_e];me===" "&&!pe&&h===ki&&(x+=(f-n*2-fe)/M),this._partialTextX=x,this._partialTextY=I+D,this._partialText=me,e.fillStrokeShape(this),x+=this.measureSize(me).width+u}}else this._partialTextX=x,this._partialTextY=I+D,this._partialText=U,e.fillStrokeShape(this);e.restore(),r>1&&(I+=a)}}}_hitFunc(e){var i=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,i,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var i=_._isString(e)?e:e==null?"":e+"";return this._setAttr(su,i),this}getWidth(){var e=this.attrs.width===ei||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===ei||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return _.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var i=_n(),r=this.fontSize(),n;return i.save(),i.font=this._getContextFont(),n=i.measureText(e),i.restore(),{width:n.width,height:r}}_getContextFont(){return this.fontStyle()+fr+this.fontVariant()+fr+(this.fontSize()+hu)+pu(this.fontFamily())}_addTextLine(e){this.align()===ki&&(e=e.trim());var i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){var i=this.letterSpacing(),r=e.length;return _n().measureText(e).width+(r?i*(r-1):0)}_setTextData(){var e=this.text().split(`
`),i=+this.fontSize(),r=0,n=this.lineHeight()*i,s=this.attrs.width,a=this.attrs.height,o=s!==ei&&s!==void 0,l=a!==ei&&a!==void 0,h=this.padding(),f=s-h*2,u=a-h*2,c=0,v=this.wrap(),y=v!==aa,S=v!==uu&&y,g=this.ellipsis();this.textArr=[],_n().font=this._getContextFont();for(var I=g?this._getTextWidth(gn):0,x=0,D=e.length;x<D;++x){var W=e[x],U=this._getTextWidth(W);if(o&&U>f)for(;W.length>0;){for(var fe=0,pe=W.length,M="",Y=0;fe<pe;){var Z=fe+pe>>>1,de=W.slice(0,Z+1),_e=this._getTextWidth(de)+I;_e<=f?(fe=Z+1,M=de,Y=_e):pe=Z}if(M){if(S){var me,Dt=W[M.length],bi=Dt===fr||Dt===na;bi&&Y<=f?me=M.length:me=Math.max(M.lastIndexOf(fr),M.lastIndexOf(na))+1,me>0&&(fe=me,M=M.slice(0,fe),Y=this._getTextWidth(M))}M=M.trimRight(),this._addTextLine(M),r=Math.max(r,Y),c+=n;var Ae=this._shouldHandleEllipsis(c);if(Ae){this._tryToAddEllipsisToLastLine();break}if(W=W.slice(fe),W=W.trimLeft(),W.length>0&&(U=this._getTextWidth(W),U<=f)){this._addTextLine(W),c+=n,r=Math.max(r,U);break}}else break}else this._addTextLine(W),c+=n,r=Math.max(r,U),this._shouldHandleEllipsis(c)&&this._tryToAddEllipsisToLastLine();if(l&&c+n>u)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=i,this.textWidth=r}_shouldHandleEllipsis(e){var i=+this.fontSize(),r=this.lineHeight()*i,n=this.attrs.height,s=n!==ei&&n!==void 0,a=this.padding(),o=n-a*2,l=this.wrap(),h=l!==aa;return!h||s&&e+r>o}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,i=e!==ei&&e!==void 0,r=this.padding(),n=e-r*2,s=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(!(!a||!s)){if(i){var o=this._getTextWidth(a.text+gn)<n;o||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+gn)}}getStrokeScaleEnabled(){return!0}}le.prototype._fillFunc=gu;le.prototype._strokeFunc=_u;le.prototype.className=au;le.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Et(le);w.overWriteSetter(le,"width",os());w.overWriteSetter(le,"height",os());w.addGetterSetter(le,"fontFamily","Arial");w.addGetterSetter(le,"fontSize",12,K());w.addGetterSetter(le,"fontStyle",Fo);w.addGetterSetter(le,"fontVariant",Fo);w.addGetterSetter(le,"padding",0,K());w.addGetterSetter(le,"align",Ro);w.addGetterSetter(le,"verticalAlign",ou);w.addGetterSetter(le,"lineHeight",1,K());w.addGetterSetter(le,"wrap",du);w.addGetterSetter(le,"ellipsis",!1,ct());w.addGetterSetter(le,"letterSpacing",0,K());w.addGetterSetter(le,"text","",vi());w.addGetterSetter(le,"textDecoration","");class We extends R{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const i=this.children||[];var r=[];return i.forEach(function(n){e(n)&&r.push(n)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}var r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var i=this._generalFind(e,!0);return i.length>0?i[0]:void 0}_generalFind(e,i){var r=[];return this._descendants(n=>{const s=n._isMatch(e);return s&&r.push(n),!!(s&&i)}),r}_descendants(e){let i=!1;const r=this.getChildren();for(const n of r){if(i=e(n),i)return!0;if(!!n.hasChildren()&&(i=n._descendants(e),i))return!0}return!1}toObject(){var e=R.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(i=>{e.children.push(i.toObject())}),e}isAncestorOf(e){for(var i=e.getParent();i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(e){var i=R.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){i.add(r.clone())}),i}getAllIntersections(e){var i=[];return this.find("Shape").forEach(function(r){r.isVisible()&&r.intersects(e)&&i.push(r)}),i}_clearSelfAndDescendantCache(e){var i;super._clearSelfAndDescendantCache(e),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(i,r){i.index=r}),this._requestDraw()}drawScene(e,i){var r=this.getLayer(),n=e||r&&r.getCanvas(),s=n&&n.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=n&&n.isCache;if(!this.isVisible()&&!l)return this;if(o){s.save();var h=this.getAbsoluteTransform(i).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",n,i);return this}drawHit(e,i){if(!this.shouldDrawHit(i))return this;var r=this.getLayer(),n=e||r&&r.hitCanvas,s=n&&n.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){s.save();var l=this.getAbsoluteTransform(i).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",n,i);return this}_drawChildren(e,i,r){var n,s=i&&i.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h=a&&o||l;const f=r===this;if(h){s.save();var u=this.getAbsoluteTransform(r),c=u.getMatrix();if(s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),s.beginPath(),l)l.call(this,s,this);else{var v=this.clipX(),y=this.clipY();s.rect(v,y,a,o)}s.clip(),c=u.copy().invert().getMatrix(),s.transform(c[0],c[1],c[2],c[3],c[4],c[5])}var S=!f&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";S&&(s.save(),s._applyGlobalCompositeOperation(this)),(n=this.children)===null||n===void 0||n.forEach(function(g){g[e](i,r)}),S&&s.restore(),h&&s.restore()}getClientRect(e){var i;e=e||{};var r=e.skipTransform,n=e.relativeTo,s,a,o,l,h={x:1/0,y:1/0,width:0,height:0},f=this;(i=this.children)===null||i===void 0||i.forEach(function(S){if(!!S.visible()){var g=S.getClientRect({relativeTo:f,skipShadow:e.skipShadow,skipStroke:e.skipStroke});g.width===0&&g.height===0||(s===void 0?(s=g.x,a=g.y,o=g.x+g.width,l=g.y+g.height):(s=Math.min(s,g.x),a=Math.min(a,g.y),o=Math.max(o,g.x+g.width),l=Math.max(l,g.y+g.height)))}});for(var u=this.find("Shape"),c=!1,v=0;v<u.length;v++){var y=u[v];if(y._isVisible(this)){c=!0;break}}return c&&s!==void 0?h={x:s,y:a,width:o-s,height:l-a}:h={x:0,y:0,width:0,height:0},r?h:this._transformedRect(h,n)}}w.addComponentsGetterSetter(We,"clip",["x","y","width","height"]);w.addGetterSetter(We,"clipX",void 0,K());w.addGetterSetter(We,"clipY",void 0,K());w.addGetterSetter(We,"clipWidth",void 0,K());w.addGetterSetter(We,"clipHeight",void 0,K());w.addGetterSetter(We,"clipFunc");var vu="Stage",yu="string",oa="px",wu="mouseout",Go="mouseleave",Ho="mouseover",zo="mouseenter",Bo="mousemove",No="mousedown",Vo="mouseup",Ii="pointermove",Li="pointerdown",ai="pointerup",Di="pointercancel",bu="lostpointercapture",ur="pointerout",cr="pointerleave",pr="pointerover",gr="pointerenter",Gn="contextmenu",Uo="touchstart",Xo="touchend",Yo="touchmove",Ko="touchcancel",Hn="wheel",Cu=5,Su=[[zo,"_pointerenter"],[No,"_pointerdown"],[Bo,"_pointermove"],[Vo,"_pointerup"],[Go,"_pointerleave"],[Uo,"_pointerdown"],[Yo,"_pointermove"],[Xo,"_pointerup"],[Ko,"_pointercancel"],[Ho,"_pointerover"],[Hn,"_wheel"],[Gn,"_contextmenu"],[Li,"_pointerdown"],[Ii,"_pointermove"],[ai,"_pointerup"],[Di,"_pointercancel"],[bu,"_lostpointercapture"]];const mn={mouse:{[ur]:wu,[cr]:Go,[pr]:Ho,[gr]:zo,[Ii]:Bo,[Li]:No,[ai]:Vo,[Di]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[ur]:"touchout",[cr]:"touchleave",[pr]:"touchover",[gr]:"touchenter",[Ii]:Yo,[Li]:Uo,[ai]:Xo,[Di]:Ko,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[ur]:ur,[cr]:cr,[pr]:pr,[gr]:gr,[Ii]:Ii,[Li]:Li,[ai]:ai,[Di]:Di,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Mi=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",ti=t=>{const e=Mi(t);if(e==="pointer")return z.pointerEventsEnabled&&mn.pointer;if(e==="touch")return mn.touch;if(e==="mouse")return mn.mouse};function la(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&_.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const Tu="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Cr=[];class Xr extends We{constructor(e){super(la(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Cr.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{la(this.attrs)}),this._checkVisibility()}_validateAdd(e){const i=e.getType()==="Layer",r=e.getType()==="FastLayer";i||r||_.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===yu){if(e.charAt(0)==="."){var i=e.slice(1);e=document.getElementsByClassName(i)[0]}else{var r;e.charAt(0)!=="#"?r=e:r=e.slice(1),e=document.getElementById(r)}if(!e)throw"Can not find container in document with id "+r}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,i=e.length,r;for(r=0;r<i;r++)e[r].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),We.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&_._isInDocument(e)&&this.container().removeChild(e);var i=Cr.indexOf(this);return i>-1&&Cr.splice(i,1),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(_.warn(Tu),null)}_getPointerById(e){return this._pointerPositions.find(i=>i.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var i=new di({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),r=i.getContext()._context,n=this.children;return(e.x||e.y)&&r.translate(-1*e.x,-1*e.y),n.forEach(function(s){if(!!s.isVisible()){var a=s._toKonvaCanvas(e);r.drawImage(a._canvas,e.x,e.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}}),i}getIntersection(e){if(!e)return null;var i=this.children,r=i.length,n=r-1,s;for(s=n;s>=0;s--){const a=i[s].getIntersection(e);if(a)return a}return null}_resizeDOM(){var e=this.width(),i=this.height();this.content&&(this.content.style.width=e+oa,this.content.style.height=i+oa),this.bufferCanvas.setSize(e,i),this.bufferHitCanvas.setSize(e,i),this.children.forEach(r=>{r.setSize({width:e,height:i}),r.draw()})}add(e,...i){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);var n=this.children.length;return n>Cu&&_.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),z.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return Eo(e,this)}setPointerCapture(e){Po(e,this)}releaseCapture(e){Gi(e)}getLayers(){return this.children}_bindContentEvents(){!z.isBrowser||Su.forEach(([e,i])=>{this.content.addEventListener(e,r=>{this[i](r)})})}_pointerenter(e){this.setPointersPositions(e);const i=ti(e.type);this._fire(i.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const i=ti(e.type);this._fire(i.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let i=this[e+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(e){const i=ti(e.type),r=Mi(e.type);if(!!i){this.setPointersPositions(e);var n=this._getTargetShape(r),s=!J.isDragging||z.hitOnDragEnabled;n&&s?(n._fireAndBubble(i.pointerout,{evt:e}),n._fireAndBubble(i.pointerleave,{evt:e}),this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this[r+"targetShape"]=null):s&&(this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const i=ti(e.type),r=Mi(e.type);if(!!i){this.setPointersPositions(e);var n=!1;this._changedPointerPositions.forEach(s=>{var a=this.getIntersection(s);if(J.justDragged=!1,z["_"+r+"ListenClick"]=!0,!(a&&a.isListening()))return;z.capturePointerEventsEnabled&&a.setPointerCapture(s.id),this[r+"ClickStartShape"]=a,a._fireAndBubble(i.pointerdown,{evt:e,pointerId:s.id}),n=!0;const l=e.type.indexOf("touch")>=0;a.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),n||this._fire(i.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const i=ti(e.type),r=Mi(e.type);if(!i)return;J.isDragging&&J.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var n=!J.isDragging||z.hitOnDragEnabled;if(!n)return;var s={};let a=!1;var o=this._getTargetShape(r);this._changedPointerPositions.forEach(l=>{const h=cn(l.id)||this.getIntersection(l),f=l.id,u={evt:e,pointerId:f};var c=o!==h;if(c&&o&&(o._fireAndBubble(i.pointerout,Object.assign({},u),h),o._fireAndBubble(i.pointerleave,Object.assign({},u),h)),h){if(s[h._id])return;s[h._id]=!0}h&&h.isListening()?(a=!0,c&&(h._fireAndBubble(i.pointerover,Object.assign({},u),o),h._fireAndBubble(i.pointerenter,Object.assign({},u),o),this[r+"targetShape"]=h),h._fireAndBubble(i.pointermove,Object.assign({},u))):o&&(this._fire(i.pointerover,{evt:e,target:this,currentTarget:this,pointerId:f}),this[r+"targetShape"]=null)}),a||this._fire(i.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const i=ti(e.type),r=Mi(e.type);if(!i)return;this.setPointersPositions(e);const n=this[r+"ClickStartShape"],s=this[r+"ClickEndShape"];var a={};let o=!1;this._changedPointerPositions.forEach(l=>{const h=cn(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),a[h._id])return;a[h._id]=!0}const f=l.id,u={evt:e,pointerId:f};let c=!1;z["_"+r+"InDblClickWindow"]?(c=!0,clearTimeout(this[r+"DblTimeout"])):J.justDragged||(z["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){z["_"+r+"InDblClickWindow"]=!1},z.dblClickWindow),h&&h.isListening()?(o=!0,this[r+"ClickEndShape"]=h,h._fireAndBubble(i.pointerup,Object.assign({},u)),z["_"+r+"ListenClick"]&&n&&n===h&&(h._fireAndBubble(i.pointerclick,Object.assign({},u)),c&&s&&s===h&&h._fireAndBubble(i.pointerdblclick,Object.assign({},u)))):(this[r+"ClickEndShape"]=null,z["_"+r+"ListenClick"]&&this._fire(i.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:f}),c&&this._fire(i.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:f}))}),o||this._fire(i.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),z["_"+r+"ListenClick"]=!1,e.cancelable&&r!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(Gn,{evt:e}):this._fire(Gn,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(Hn,{evt:e}):this._fire(Hn,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const i=cn(e.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(ai,hs(e)),Gi(e.pointerId)}_lostpointercapture(e){Gi(e.pointerId)}setPointersPositions(e){var i=this._getContentPosition(),r=null,n=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})})):(r=(e.clientX-i.left)/i.scaleX,n=(e.clientY-i.top)/i.scaleY,this.pointerPos={x:r,y:n},this._pointerPositions=[{x:r,y:n,id:_._getFirstPointerId(e)}],this._changedPointerPositions=[{x:r,y:n,id:_._getFirstPointerId(e)}])}_setPointerPosition(e){_.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new di({width:this.width(),height:this.height()}),this.bufferHitCanvas=new ls({pixelRatio:1,width:this.width(),height:this.height()}),!!z.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return _.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}Xr.prototype.nodeType=vu;Et(Xr);w.addGetterSetter(Xr,"container");var xu="#",Au="beforeDraw",ku="draw",Zo=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Eu=Zo.length;class Vt extends We{constructor(e){super(e),this.canvas=new di,this.hitCanvas=new ls({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),e<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[e+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){R.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=R.prototype.moveUp.call(this);if(!e)return!1;var i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(R.prototype.moveDown.call(this)){var e=this.getStage();if(e){var i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(R.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return R.prototype.remove.call(this),e&&e.parentNode&&_._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:i}){return this.canvas.setSize(e,i),this.hitCanvas.setSize(e,i),this._setSmoothEnabled(),this}_validateAdd(e){var i=e.getType();i!=="Group"&&i!=="Shape"&&_.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),R.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){_.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){_.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,_.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var i=1,r=!1;;){for(let n=0;n<Eu;n++){const s=Zo[n],a=this._getIntersection({x:e.x+s.x*i,y:e.y+s.y*i}),o=a.shape;if(o)return o;if(r=!!a.antialiased,!a.antialiased)break}if(r)i+=1;else return null}}_getIntersection(e){const i=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*i),Math.round(e.y*i),1,1).data,n=r[3];if(n===255){const s=_._rgbToHex(r[0],r[1],r[2]),a=Hi[xu+s];return a?{shape:a}:{antialiased:!0}}else if(n>0)return{antialiased:!0};return{}}drawScene(e,i){var r=this.getLayer(),n=e||r&&r.getCanvas();return this._fire(Au,{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),We.prototype.drawScene.call(this,n,i),this._fire(ku,{node:this}),this}drawHit(e,i){var r=this.getLayer(),n=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),We.prototype.drawHit.call(this,n,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){_.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return _.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,i=!!this.hitCanvas._canvas.parentNode;i?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}}Vt.prototype.nodeType="Layer";Et(Vt);w.addGetterSetter(Vt,"imageSmoothingEnabled",!0);w.addGetterSetter(Vt,"clearBeforeDraw",!0);w.addGetterSetter(Vt,"hitGraphEnabled",!0,ct());class fs extends Vt{constructor(e){super(e),this.listening(!1),_.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}fs.prototype.nodeType="FastLayer";Et(fs);class ds extends We{_validateAdd(e){var i=e.getType();i!=="Group"&&i!=="Shape"&&_.throw("You may only add groups and shapes to groups.")}}ds.prototype.nodeType="Group";Et(ds);var vn=function(){return fi.performance&&fi.performance.now?function(){return fi.performance.now()}:function(){return new Date().getTime()}}();class Ne{constructor(e,i){this.id=Ne.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:vn(),frameRate:0},this.func=e,this.setLayers(i)}setLayers(e){var i=[];return e?e.length>0?i=e:i=[e]:i=[],this.layers=i,this}getLayers(){return this.layers}addLayer(e){var i=this.layers,r=i.length,n;for(n=0;n<r;n++)if(i[n]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=Ne,i=e.animations,r=i.length,n;for(n=0;n<r;n++)if(i[n].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=vn(),Ne._addAnimation(this),this}stop(){return Ne._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var i=e.id,r=this.animations,n=r.length,s;for(s=0;s<n;s++)if(r[s].id===i){this.animations.splice(s,1);break}}static _runFrames(){var e={},i=this.animations,r,n,s,a,o,l,h,f,u;for(a=0;a<i.length;a++)if(r=i[a],n=r.layers,s=r.func,r._updateFrameObject(vn()),l=n.length,s?u=s.call(r,r.frame)!==!1:u=!0,!!u)for(o=0;o<l;o++)h=n[o],h._id!==void 0&&(e[h._id]=h);for(f in e)!e.hasOwnProperty(f)||e[f].batchDraw()}static _animationLoop(){var e=Ne;e.animations.length?(e._runFrames(),_.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,_.requestAnimFrame(this._animationLoop))}}Ne.animations=[];Ne.animIdCounter=0;Ne.animRunning=!1;var Pu={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Iu=1,ha=2,fa=3,Lu=0,da=["fill","stroke","shadowColor"];class Du{constructor(e,i,r,n,s,a,o){this.prop=e,this.propFunc=i,this.begin=n,this._pos=n,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=s-this.begin,this.pause()}fire(e){var i=this[e];i&&i()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=ha,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=fa,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===ha?this.setTime(e):this.state===fa&&this.setTime(this.duration-e)}pause(){this.state=Iu,this.fire("onPause")}getTimer(){return new Date().getTime()}}class ce{constructor(e){var i=this,r=e.node,n=r._id,s,a=e.easing||zi.Linear,o=!!e.yoyo,l;typeof e.duration>"u"?s=.3:e.duration===0?s=.001:s=e.duration,this.node=r,this._id=Lu++;var h=r.getLayer()||(r instanceof z.Stage?r.getLayers():null);h||_.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Ne(function(){i.tween.onEnterFrame()},h),this.tween=new Du(l,function(f){i._tweenFunc(f)},a,0,1,s*1e3,o),this._addListeners(),ce.attrs[n]||(ce.attrs[n]={}),ce.attrs[n][this._id]||(ce.attrs[n][this._id]={}),ce.tweens[n]||(ce.tweens[n]={});for(l in e)Pu[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,i){var r=this.node,n=r._id,s,a,o,l,h,f,u,c;if(o=ce.tweens[n][e],o&&delete ce.attrs[n][o][e],s=r.getAttr(e),_._isArray(i))if(a=[],h=Math.max(i.length,s.length),e==="points"&&i.length!==s.length&&(i.length>s.length?(u=s,s=_._prepareArrayForTween(s,i,r.closed())):(f=i,i=_._prepareArrayForTween(i,s,r.closed()))),e.indexOf("fill")===0)for(l=0;l<h;l++)if(l%2===0)a.push(i[l]-s[l]);else{var v=_.colorToRGBA(s[l]);c=_.colorToRGBA(i[l]),s[l]=v,a.push({r:c.r-v.r,g:c.g-v.g,b:c.b-v.b,a:c.a-v.a})}else for(l=0;l<h;l++)a.push(i[l]-s[l]);else da.indexOf(e)!==-1?(s=_.colorToRGBA(s),c=_.colorToRGBA(i),a={r:c.r-s.r,g:c.g-s.g,b:c.b-s.b,a:c.a-s.a}):a=i-s;ce.attrs[n][this._id][e]={start:s,diff:a,end:i,trueEnd:f,trueStart:u},ce.tweens[n][e]=this._id}_tweenFunc(e){var i=this.node,r=ce.attrs[i._id][this._id],n,s,a,o,l,h,f,u;for(n in r){if(s=r[n],a=s.start,o=s.diff,u=s.end,_._isArray(a))if(l=[],f=Math.max(a.length,u.length),n.indexOf("fill")===0)for(h=0;h<f;h++)h%2===0?l.push((a[h]||0)+o[h]*e):l.push("rgba("+Math.round(a[h].r+o[h].r*e)+","+Math.round(a[h].g+o[h].g*e)+","+Math.round(a[h].b+o[h].b*e)+","+(a[h].a+o[h].a*e)+")");else for(h=0;h<f;h++)l.push((a[h]||0)+o[h]*e);else da.indexOf(n)!==-1?l="rgba("+Math.round(a.r+o.r*e)+","+Math.round(a.g+o.g*e)+","+Math.round(a.b+o.b*e)+","+(a.a+o.a*e)+")":l=a+o*e;i.setAttr(n,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,i=ce.attrs[e._id][this._id];i.points&&i.points.trueEnd&&e.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,i=ce.attrs[e._id][this._id];i.points&&i.points.trueStart&&e.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,i=this._id,r=ce.tweens[e],n;this.pause();for(n in r)delete ce.tweens[e][n];delete ce.attrs[e][i]}}ce.attrs={};ce.tweens={};R.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var i=new ce(t);i.play()};const zi={BackEaseIn(t,e,i,r){var n=1.70158;return i*(t/=r)*t*((n+1)*t-n)+e},BackEaseOut(t,e,i,r){var n=1.70158;return i*((t=t/r-1)*t*((n+1)*t+n)+1)+e},BackEaseInOut(t,e,i,r){var n=1.70158;return(t/=r/2)<1?i/2*(t*t*(((n*=1.525)+1)*t-n))+e:i/2*((t-=2)*t*(((n*=1.525)+1)*t+n)+2)+e},ElasticEaseIn(t,e,i,r,n,s){var a=0;return t===0?e:(t/=r)===1?e+i:(s||(s=r*.3),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),-(n*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/s))+e)},ElasticEaseOut(t,e,i,r,n,s){var a=0;return t===0?e:(t/=r)===1?e+i:(s||(s=r*.3),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/s)+i+e)},ElasticEaseInOut(t,e,i,r,n,s){var a=0;return t===0?e:(t/=r/2)===2?e+i:(s||(s=r*(.3*1.5)),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),t<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/s))+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/s)*.5+i+e)},BounceEaseOut(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,i,r){return i-zi.BounceEaseOut(r-t,0,i,r)+e},BounceEaseInOut(t,e,i,r){return t<r/2?zi.BounceEaseIn(t*2,0,i,r)*.5+e:zi.BounceEaseOut(t*2-r,0,i,r)*.5+i*.5+e},EaseIn(t,e,i,r){return i*(t/=r)*t+e},EaseOut(t,e,i,r){return-i*(t/=r)*(t-2)+e},EaseInOut(t,e,i,r){return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,i,r){return i*(t/=r)*t*t*t*t+e},StrongEaseOut(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,i,r){return i*t/r+e}},be=_._assign(z,{Util:_,Transform:wt,Node:R,Container:We,Stage:Xr,stages:Cr,Layer:Vt,FastLayer:fs,Group:ds,DD:J,Shape:k,shapes:Hi,Animation:Ne,Tween:ce,Easings:zi,Context:Vr,Canvas:Ur});function Ut(t,e){this._waveformData=t,this._channelIndex=e}Ut.prototype.min_sample=function(t){var e=(t*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._at(e)};Ut.prototype.max_sample=function(t){var e=(t*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._at(e)};Ut.prototype.set_min_sample=function(t,e){var i=(t*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._set_at(i,e)};Ut.prototype.set_max_sample=function(t,e){var i=(t*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._set_at(i,e)};Ut.prototype.min_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2)};Ut.prototype.max_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2+1)};var ii=127,_r=-128;function Mu(t,e){var i=Math.floor(t/e),r=t-i*e;return r>0&&i++,i}function Ou(t){var e=t.scale,i=t.amplitude_scale,r=t.split_channels,n=t.length,s=t.sample_rate,a=t.channels.map(function(U){return new Float32Array(U)}),o=r?a.length:1,l=o===1?1:2,h=l===1?20:24,f=Mu(n,e),u=h+f*2*o,c=new ArrayBuffer(u),v=new DataView(c),y=0,S=h,g,I,x=new Array(o),D=new Array(o);for(g=0;g<o;g++)x[g]=1/0,D[g]=-1/0;for(v.setInt32(0,l,!0),v.setUint32(4,1,!0),v.setInt32(8,s,!0),v.setInt32(12,e,!0),v.setInt32(16,f,!0),l===2&&v.setInt32(20,o,!0),I=0;I<n;I++){var W=0;if(o===1){for(g=0;g<a.length;++g)W+=a[g][I];W=Math.floor(ii*W*i/a.length),W<x[0]&&(x[0]=W,x[0]<_r&&(x[0]=_r)),W>D[0]&&(D[0]=W,D[0]>ii&&(D[0]=ii))}else for(g=0;g<o;++g)W=Math.floor(ii*a[g][I]*i),W<x[g]&&(x[g]=W,x[g]<_r&&(x[g]=_r)),W>D[g]&&(D[g]=W,D[g]>ii&&(D[g]=ii));if(++y===e){for(g=0;g<o;g++)v.setInt8(S++,x[g]),v.setInt8(S++,D[g]),x[g]=1/0,D[g]=-1/0;y=0}}if(y>0)for(g=0;g<o;g++)v.setInt8(S++,x[g]),v.setInt8(S++,D[g]);return c}function Bi(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bi=function(e){return typeof e}:Bi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bi(t)}function Ru(t){return t&&Bi(t)==="object"&&"sample_rate"in t&&"samples_per_pixel"in t&&"bits"in t&&"length"in t&&"data"in t}function Fu(t){var e=t&&Bi(t)==="object"&&"byteLength"in t;if(e){var i=new DataView(t),r=i.getInt32(0,!0);if(r!==1&&r!==2)throw new TypeError("WaveformData.create(): This waveform data version not supported")}return e}function Wu(t){var e=t.data,i=t.channels||1,r=24,n=t.bits===8?1:2,s=t.length*2*i;if(e.length!==s)throw new Error("WaveformData.create(): Length mismatch in JSON waveform data");var a=r+e.length*n,o=new ArrayBuffer(a),l=new DataView(o);l.setInt32(0,2,!0),l.setUint32(4,t.bits===8,!0),l.setInt32(8,t.sample_rate,!0),l.setInt32(12,t.samples_per_pixel,!0),l.setInt32(16,t.length,!0),l.setInt32(20,i,!0);var h=r,f;if(t.bits===8)for(f=0;f<e.length;f++)l.setInt8(h++,e[f],!0);else for(f=0;f<e.length;f++)l.setInt16(h,e[f],!0),h+=2;return o}function Gu(t,e){var i=atob(t);if(e){for(var r=new Uint8Array(i.length),n=0,s=i.length;n<s;++n)r[n]=i.charCodeAt(n);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return i}function Hu(t,e,i){var r=e===void 0?null:e,n=i===void 0?!1:i,s=Gu(t,n),a=s.indexOf(`
`,10)+1,o=s.substring(a)+(r?"//# sourceMappingURL="+r:""),l=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(l)}function zu(t,e,i){var r;return function(s){return r=r||Hu(t,e,i),new Worker(r,s)}}var Bu=zu("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogQXVkaW9CdWZmZXItYmFzZWQgV2F2ZWZvcm1EYXRhIGdlbmVyYXRvcgogICAqCiAgICogQWRhcHRlZCBmcm9tIEJsb2NrRmlsZTo6Q2FsY1N1bW1hcnkgaW4gQXVkYWNpdHksIHdpdGggcGVybWlzc2lvbi4KICAgKiBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9hdWRhY2l0eS9zb3VyY2UvYnJvd3NlL2F1ZGFjaXR5LXNyYy90cnVuay9zcmMvQmxvY2tGaWxlLmNwcAogICAqLwogIHZhciBJTlQ4X01BWCA9IDEyNzsKICB2YXIgSU5UOF9NSU4gPSAtMTI4OwoKICBmdW5jdGlvbiBjYWxjdWxhdGVXYXZlZm9ybURhdGFMZW5ndGgoYXVkaW9fc2FtcGxlX2NvdW50LCBzY2FsZSkgewogICAgdmFyIGRhdGFfbGVuZ3RoID0gTWF0aC5mbG9vcihhdWRpb19zYW1wbGVfY291bnQgLyBzY2FsZSk7CiAgICB2YXIgc2FtcGxlc19yZW1haW5pbmcgPSBhdWRpb19zYW1wbGVfY291bnQgLSBkYXRhX2xlbmd0aCAqIHNjYWxlOwoKICAgIGlmIChzYW1wbGVzX3JlbWFpbmluZyA+IDApIHsKICAgICAgZGF0YV9sZW5ndGgrKzsKICAgIH0KCiAgICByZXR1cm4gZGF0YV9sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBnZW5lcmF0ZVdhdmVmb3JtRGF0YShvcHRpb25zKSB7CiAgICB2YXIgc2NhbGUgPSBvcHRpb25zLnNjYWxlOwogICAgdmFyIGFtcGxpdHVkZV9zY2FsZSA9IG9wdGlvbnMuYW1wbGl0dWRlX3NjYWxlOwogICAgdmFyIHNwbGl0X2NoYW5uZWxzID0gb3B0aW9ucy5zcGxpdF9jaGFubmVsczsKICAgIHZhciBsZW5ndGggPSBvcHRpb25zLmxlbmd0aDsKICAgIHZhciBzYW1wbGVfcmF0ZSA9IG9wdGlvbnMuc2FtcGxlX3JhdGU7CiAgICB2YXIgY2hhbm5lbHMgPSBvcHRpb25zLmNoYW5uZWxzLm1hcChmdW5jdGlvbiAoY2hhbm5lbCkgewogICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShjaGFubmVsKTsKICAgIH0pOwogICAgdmFyIG91dHB1dF9jaGFubmVscyA9IHNwbGl0X2NoYW5uZWxzID8gY2hhbm5lbHMubGVuZ3RoIDogMTsKICAgIHZhciB2ZXJzaW9uID0gb3V0cHV0X2NoYW5uZWxzID09PSAxID8gMSA6IDI7CiAgICB2YXIgaGVhZGVyX3NpemUgPSB2ZXJzaW9uID09PSAxID8gMjAgOiAyNDsKICAgIHZhciBkYXRhX2xlbmd0aCA9IGNhbGN1bGF0ZVdhdmVmb3JtRGF0YUxlbmd0aChsZW5ndGgsIHNjYWxlKTsKICAgIHZhciB0b3RhbF9zaXplID0gaGVhZGVyX3NpemUgKyBkYXRhX2xlbmd0aCAqIDIgKiBvdXRwdXRfY2hhbm5lbHM7CiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRvdGFsX3NpemUpOwogICAgdmFyIGRhdGFfdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpOwogICAgdmFyIHNjYWxlX2NvdW50ZXIgPSAwOwogICAgdmFyIG9mZnNldCA9IGhlYWRlcl9zaXplOwogICAgdmFyIGNoYW5uZWwsIGk7CiAgICB2YXIgbWluX3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CiAgICB2YXIgbWF4X3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CgogICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICBtYXhfdmFsdWVbY2hhbm5lbF0gPSAtSW5maW5pdHk7CiAgICB9CgogICAgZGF0YV92aWV3LnNldEludDMyKDAsIHZlcnNpb24sIHRydWUpOyAvLyBWZXJzaW9uCgogICAgZGF0YV92aWV3LnNldFVpbnQzMig0LCAxLCB0cnVlKTsgLy8gSXMgOCBiaXQ/CgogICAgZGF0YV92aWV3LnNldEludDMyKDgsIHNhbXBsZV9yYXRlLCB0cnVlKTsgLy8gU2FtcGxlIHJhdGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTIsIHNjYWxlLCB0cnVlKTsgLy8gU2NhbGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTYsIGRhdGFfbGVuZ3RoLCB0cnVlKTsgLy8gTGVuZ3RoCgogICAgaWYgKHZlcnNpb24gPT09IDIpIHsKICAgICAgZGF0YV92aWV3LnNldEludDMyKDIwLCBvdXRwdXRfY2hhbm5lbHMsIHRydWUpOwogICAgfQoKICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgc2FtcGxlID0gMDsKCiAgICAgIGlmIChvdXRwdXRfY2hhbm5lbHMgPT09IDEpIHsKICAgICAgICBmb3IgKGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgY2hhbm5lbHMubGVuZ3RoOyArK2NoYW5uZWwpIHsKICAgICAgICAgIHNhbXBsZSArPSBjaGFubmVsc1tjaGFubmVsXVtpXTsKICAgICAgICB9CgogICAgICAgIHNhbXBsZSA9IE1hdGguZmxvb3IoSU5UOF9NQVggKiBzYW1wbGUgKiBhbXBsaXR1ZGVfc2NhbGUgLyBjaGFubmVscy5sZW5ndGgpOwoKICAgICAgICBpZiAoc2FtcGxlIDwgbWluX3ZhbHVlWzBdKSB7CiAgICAgICAgICBtaW5fdmFsdWVbMF0gPSBzYW1wbGU7CgogICAgICAgICAgaWYgKG1pbl92YWx1ZVswXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgIG1pbl92YWx1ZVswXSA9IElOVDhfTUlOOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHNhbXBsZSA+IG1heF92YWx1ZVswXSkgewogICAgICAgICAgbWF4X3ZhbHVlWzBdID0gc2FtcGxlOwoKICAgICAgICAgIGlmIChtYXhfdmFsdWVbMF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICBtYXhfdmFsdWVbMF0gPSBJTlQ4X01BWDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgKytjaGFubmVsKSB7CiAgICAgICAgICBzYW1wbGUgPSBNYXRoLmZsb29yKElOVDhfTUFYICogY2hhbm5lbHNbY2hhbm5lbF1baV0gKiBhbXBsaXR1ZGVfc2NhbGUpOwoKICAgICAgICAgIGlmIChzYW1wbGUgPCBtaW5fdmFsdWVbY2hhbm5lbF0pIHsKICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gc2FtcGxlOwoKICAgICAgICAgICAgaWYgKG1pbl92YWx1ZVtjaGFubmVsXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gSU5UOF9NSU47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2FtcGxlID4gbWF4X3ZhbHVlW2NoYW5uZWxdKSB7CiAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IHNhbXBsZTsKCiAgICAgICAgICAgIGlmIChtYXhfdmFsdWVbY2hhbm5lbF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IElOVDhfTUFYOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoKytzY2FsZV9jb3VudGVyID09PSBzY2FsZSkgewogICAgICAgIGZvciAoY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBvdXRwdXRfY2hhbm5lbHM7IGNoYW5uZWwrKykgewogICAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgICBkYXRhX3ZpZXcuc2V0SW50OChvZmZzZXQrKywgbWF4X3ZhbHVlW2NoYW5uZWxdKTsKICAgICAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICAgICAgbWF4X3ZhbHVlW2NoYW5uZWxdID0gLUluZmluaXR5OwogICAgICAgIH0KCiAgICAgICAgc2NhbGVfY291bnRlciA9IDA7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc2NhbGVfY291bnRlciA+IDApIHsKICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1heF92YWx1ZVtjaGFubmVsXSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnVmZmVyOwogIH0KCiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlKGV2dCkgewogICAgdmFyIGJ1ZmZlciA9IGdlbmVyYXRlV2F2ZWZvcm1EYXRhKGV2dC5kYXRhKTsgLy8gVHJhbnNmZXIgYnVmZmVyIHRvIHRoZSBjYWxsaW5nIHRocmVhZAoKICAgIHRoaXMucG9zdE1lc3NhZ2UoYnVmZmVyLCBbYnVmZmVyXSk7CiAgICB0aGlzLmNsb3NlKCk7CiAgfTsKCn0pKCk7Cgo=",null,!1);function Ue(t){if(Ru(t)&&(t=Wu(t)),Fu(t)){this._data=new DataView(t),this._offset=this._version()===2?24:20,this._channels=[];for(var e=0;e<this.channels;e++)this._channels[e]=new Ut(this,e)}else throw new TypeError("WaveformData.create(): Unknown data format")}var mr={scale:512,amplitude_scale:1,split_channels:!1,disable_worker:!1};function Nu(t){var e={scale:t.scale||mr.scale,amplitude_scale:t.amplitude_scale||mr.amplitude_scale,split_channels:t.split_channels||mr.split_channels,disable_worker:t.disable_worker||mr.disable_worker};return e}function Vu(t){for(var e=[],i=0;i<t.numberOfChannels;++i)e.push(t.getChannelData(i).buffer);return e}function jo(t,e,i){var r=Vu(t);if(e.disable_worker){var n=Ou({scale:e.scale,amplitude_scale:e.amplitude_scale,split_channels:e.split_channels,length:t.length,sample_rate:t.sampleRate,channels:r});i(null,new Ue(n),t)}else{var s=new Bu;s.onmessage=function(a){i(null,new Ue(a.data),t)},s.postMessage({scale:e.scale,amplitude_scale:e.amplitude_scale,split_channels:e.split_channels,length:t.length,sample_rate:t.sampleRate,channels:r},r)}}function Uu(t,e,i,r){function n(s){s||(s=new DOMException("EncodingError")),r(s)}t.decodeAudioData(e,function(s){jo(s,i,r)},n)}Ue.create=function(e){return new Ue(e)};Ue.createFromAudio=function(t,e){var i=Nu(t);if(t.audio_context&&t.array_buffer)return Uu(t.audio_context,t.array_buffer,i,e);if(t.audio_buffer)return jo(t.audio_buffer,i,e);throw new TypeError("WaveformData.createFromAudio(): Pass either an AudioContext and ArrayBuffer, or an AudioBuffer object")};Ue.prototype={resample:function(e){if(e.scale=typeof e.scale=="number"?e.scale:null,e.width=typeof e.width=="number"?e.width:null,e.width!=null&&e.width<=0)throw new RangeError("WaveformData.resample(): width should be a positive integer value");if(e.scale!=null&&e.scale<=0)throw new RangeError("WaveformData.resample(): scale should be a positive integer value");if(!e.scale&&!e.width)throw new Error("WaveformData.resample(): Missing scale or width option");var i=e.scale||Math.floor(this.duration*this.sample_rate/e.width),r=this.scale,n=this.length,s=n*this.scale,a=Math.ceil(s/i),o=24,l=this.bits===8?1:2,h=o+a*2*this.channels*l,f=new ArrayBuffer(h),u=new DataView(f);u.setInt32(0,2,!0),u.setUint32(4,this.bits===8,!0),u.setInt32(8,this.sample_rate,!0),u.setInt32(12,i,!0),u.setInt32(16,a,!0),u.setInt32(20,this.channels,!0);var c=new Ue(f),v=0,y=0,S=this.channels,g=new Array(S),I=new Array(S),x;for(x=0;x<S;++x)n>0?(g[x]=this.channel(x).min_sample(v),I[x]=this.channel(x).max_sample(v)):(g[x]=0,I[x]=0);var D=this.bits===8?-128:-32768,W=this.bits===8?127:32767;if(i<r)throw new Error("WaveformData.resample(): Zoom level "+i+" too low, minimum: "+r);var U,fe,pe,M,Y;function Z(de){return Math.floor(de*i)}for(;v<n;){for(;Math.floor(Z(y)/r)===v;){if(y>0)for(x=0;x<S;++x)c.channel(x).set_min_sample(y-1,g[x]),c.channel(x).set_max_sample(y-1,I[x]);if(Y=v,y++,U=Z(y),fe=Z(y-1),U!==fe)for(x=0;x<S;++x)g[x]=W,I[x]=D}for(U=Z(y),pe=Math.floor(U/r),pe>n&&(pe=n);v<pe;){for(x=0;x<S;++x)M=this.channel(x).min_sample(v),M<g[x]&&(g[x]=M),M=this.channel(x).max_sample(v),M>I[x]&&(I[x]=M);v++}}if(v!==Y)for(x=0;x<S;++x)c.channel(x).set_min_sample(y-1,g[x]),c.channel(x).set_max_sample(y-1,I[x]);return c},concat:function(){var e=this,i=Array.prototype.slice.call(arguments);i.forEach(function(n){if(e.channels!==n.channels||e.sample_rate!==n.sample_rate||e.bits!==n.bits||e.scale!==n.scale)throw new Error("WaveformData.concat(): Waveforms are incompatible")});var r=this._concatBuffers.apply(this,i);return Ue.create(r)},_concatBuffers:function(){var e=Array.prototype.slice.call(arguments),i=this._offset,r=i,n=0,s=[this].concat(e).map(function(y){return y._data.buffer}),a,o;for(a=0;a<s.length;a++){o=s[a];var l=new DataView(o).getInt32(16,!0);r+=o.byteLength-i,n+=l}var h=new ArrayBuffer(r),f=new DataView(s[0]),u=new DataView(h);for(a=0;a<i;a++)u.setUint8(a,f.getUint8(a));u.setInt32(16,n,!0);var c=0,v=new Uint8Array(h,i);for(a=0;a<s.length;a++)o=s[a],v.set(new Uint8Array(o,i),c),c+=o.byteLength-i;return h},_offsetValues:function(e,i,r){var n=[],s=this.channels;r+=e*s*2;for(var a=0;a<i;a++)n.push(this._at(a*s*2+r));return n},_version:function(){return this._data.getInt32(0,!0)},get length(){return this._data.getUint32(16,!0)},get bits(){var t=Boolean(this._data.getUint32(4,!0));return t?8:16},get duration(){return this.length*this.scale/this.sample_rate},get pixels_per_second(){return this.sample_rate/this.scale},get seconds_per_pixel(){return this.scale/this.sample_rate},get channels(){return this._version()===2?this._data.getInt32(20,!0):1},channel:function(e){if(e>=0&&e<this._channels.length)return this._channels[e];throw new RangeError("Invalid channel: "+e)},get sample_rate(){return this._data.getInt32(8,!0)},get scale(){return this._data.getInt32(12,!0)},_at:function(e){return this.bits===8?this._data.getInt8(this._offset+e):this._data.getInt16(this._offset+e*2,!0)},_set_at:function(e,i){return this.bits===8?this._data.setInt8(this._offset+e,i):this._data.setInt16(this._offset+e*2,i,!0)},at_time:function(e){return Math.floor(e*this.sample_rate/this.scale)},time:function(e){return e*this.scale/this.sample_rate},toJSON:function(){for(var e={version:2,channels:this.channels,sample_rate:this.sample_rate,samples_per_pixel:this.scale,bits:this.bits,length:this.length,data:[]},i=0;i<this.length;i++)for(var r=0;r<this.channels;r++)e.data.push(this.channel(r).min_sample(i)),e.data.push(this.channel(r).max_sample(i));return e},toArrayBuffer:function(){return this._data.buffer}};var $o={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,i="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(i=!1));function n(l,h,f){this.fn=l,this.context=h,this.once=f||!1}function s(l,h,f,u,c){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new n(f,u||l,c),y=i?i+h:h;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],v]:l._events[y].push(v):(l._events[y]=v,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new r:delete l._events[h]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],f,u;if(this._eventsCount===0)return h;for(u in f=this._events)e.call(f,u)&&h.push(i?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},o.prototype.listeners=function(h){var f=i?i+h:h,u=this._events[f];if(!u)return[];if(u.fn)return[u.fn];for(var c=0,v=u.length,y=new Array(v);c<v;c++)y[c]=u[c].fn;return y},o.prototype.listenerCount=function(h){var f=i?i+h:h,u=this._events[f];return u?u.fn?1:u.length:0},o.prototype.emit=function(h,f,u,c,v,y){var S=i?i+h:h;if(!this._events[S])return!1;var g=this._events[S],I=arguments.length,x,D;if(g.fn){switch(g.once&&this.removeListener(h,g.fn,void 0,!0),I){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,f),!0;case 3:return g.fn.call(g.context,f,u),!0;case 4:return g.fn.call(g.context,f,u,c),!0;case 5:return g.fn.call(g.context,f,u,c,v),!0;case 6:return g.fn.call(g.context,f,u,c,v,y),!0}for(D=1,x=new Array(I-1);D<I;D++)x[D-1]=arguments[D];g.fn.apply(g.context,x)}else{var W=g.length,U;for(D=0;D<W;D++)switch(g[D].once&&this.removeListener(h,g[D].fn,void 0,!0),I){case 1:g[D].fn.call(g[D].context);break;case 2:g[D].fn.call(g[D].context,f);break;case 3:g[D].fn.call(g[D].context,f,u);break;case 4:g[D].fn.call(g[D].context,f,u,c);break;default:if(!x)for(U=1,x=new Array(I-1);U<I;U++)x[U-1]=arguments[U];g[D].fn.apply(g[D].context,x)}}return!0},o.prototype.on=function(h,f,u){return s(this,h,f,u,!1)},o.prototype.once=function(h,f,u){return s(this,h,f,u,!0)},o.prototype.removeListener=function(h,f,u,c){var v=i?i+h:h;if(!this._events[v])return this;if(!f)return a(this,v),this;var y=this._events[v];if(y.fn)y.fn===f&&(!c||y.once)&&(!u||y.context===u)&&a(this,v);else{for(var S=0,g=[],I=y.length;S<I;S++)(y[S].fn!==f||c&&!y[S].once||u&&y[S].context!==u)&&g.push(y[S]);g.length?this._events[v]=g.length===1?g[0]:g:a(this,v)}return this},o.prototype.removeAllListeners=function(h){var f;return h?(f=i?i+h:h,this._events[f]&&a(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o})($o);var qo=$o.exports;function Ni(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ni=function(e){return typeof e}:Ni=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ni(t)}function ge(t,e,i){this.time=t,this.type=e,this.id=i}ge.POINT=0;ge.SEGMENT_START=1;ge.SEGMENT_END=2;ge.sorter=function(t,e){return t.time-e.time};function ua(t,e){for(t=t.toString();t.length<e;)t="0"+t;return t}function us(t,e){var i=[],r=Math.floor(t%1*Math.pow(10,e)),n=Math.floor(t),s=Math.floor(n/60),a=Math.floor(s/60);a>0&&i.push(a),i.push(s%60),i.push(n%60);for(var o=0;o<i.length;o++)i[o]=ua(i[o],2);return i=i.join(":"),e>0&&(i+="."+ua(r,e)),i}function Xu(t,e){if(e===0)return 0;var i=1;t<0&&(i=-1,t=-t);var r=Math.ceil(t);return i*((r+e-1)/e|0)*e}function Xt(t,e,i){return t<e?e:t>i?i:t}function te(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Yr(t,e){for(var i in e)te(e,i)&&(t[i]=e[i]);return t}function Yu(t){if(t.length===0)return!0;for(var e=t[0],i=1;i<t.length;i++){if(e>=t[i])return!1;e=t[i]}return!0}function Er(t){return typeof t=="number"}function Jo(t){return!(typeof t!="number"||t!==t||t===1/0||t===-1/0)}function xt(t){return typeof t=="number"&&Number.isFinite(t)}function pi(t){return t!==null&&Ni(t)==="object"&&!Array.isArray(t)}function Bt(t){return typeof t=="string"}function Ku(t){return Object.prototype.toString.call(t).includes("ArrayBuffer")}function rt(t){return t==null}function Zu(t){return typeof t=="function"}function Qo(t){return t===!0||t===!1}function ca(t){return t instanceof HTMLElement}function ju(t){return Array.isArray(t)}function Kr(t){return pi(t)&&te(t,"linearGradientStart")&&te(t,"linearGradientEnd")&&te(t,"linearGradientColorStops")&&Er(t.linearGradientStart)&&Er(t.linearGradientEnd)&&ju(t.linearGradientColorStops)&&t.linearGradientColorStops.length===2}var $u=/HeadlessChrome/.test(navigator.userAgent);function qu(){return $u||navigator.webdriver?!1:(typeof document>"u"?"undefined":Ni(document))==="object"&&"visibilityState"in document&&document.visibilityState==="visible"}var el=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Ju=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,At={forward:{},reverse:{}},cs=0,Zr=1,jr=2;At.forward[ge.POINT]=cs;At.forward[ge.SEGMENT_START]=Zr;At.forward[ge.SEGMENT_END]=jr;At.reverse[ge.POINT]=cs;At.reverse[ge.SEGMENT_START]=jr;At.reverse[ge.SEGMENT_END]=Zr;var $r={};$r[cs]="points.enter";$r[Zr]="segments.enter";$r[jr]="segments.exit";function Qu(t,e){switch(e.type){case ge.POINT:return t.points.getPoint(e.id);case ge.SEGMENT_START:case ge.SEGMENT_END:return t.segments.getSegment(e.id);default:throw new Error("getPointOrSegment: id not found?")}}function qe(t){this._cues=[],this._peaks=t,this._previousTime=-1,this._updateCues=this._updateCues.bind(this),this._onPlaying=this.onPlaying.bind(this),this._onSeeked=this.onSeeked.bind(this),this._onTimeUpdate=this.onTimeUpdate.bind(this),this._onAnimationFrame=this.onAnimationFrame.bind(this),this._rAFHandle=null,this._activeSegments={},this._attachEventHandlers()}qe.prototype._updateCues=function(){var t=this,e=t._peaks.points.getPoints(),i=t._peaks.segments.getSegments();t._cues.length=0,e.forEach(function(n){t._cues.push(new ge(n.time,ge.POINT,n.id))}),i.forEach(function(n){t._cues.push(new ge(n.startTime,ge.SEGMENT_START,n.id)),t._cues.push(new ge(n.endTime,ge.SEGMENT_END,n.id))}),t._cues.sort(ge.sorter);var r=t._peaks.player.getCurrentTime();t._updateActiveSegments(r)};qe.prototype._onUpdate=function(t,e){var i=t>e,r,n,s;i?(r=0,n=this._cues.length,s=1):(r=this._cues.length-1,n=-1,s=-1);for(var a=r;i?a<n:a>n;a+=s){var o=this._cues[a];if(i?o.time>e:o.time<e){if(i?o.time>t:o.time<t)break;var l=Qu(this._peaks,o),h=i?At.forward[o.type]:At.reverse[o.type];h===Zr?this._activeSegments[l.id]=l:h===jr&&delete this._activeSegments[l.id],this._peaks.emit($r[h],l)}}};qe.prototype.onTimeUpdate=function(t){qu()||(this._peaks.player.isPlaying()&&!this._peaks.player.isSeeking()&&this._onUpdate(t,this._previousTime),this._previousTime=t)};qe.prototype.onAnimationFrame=function(){var t=this._peaks.player.getCurrentTime();this._peaks.player.isSeeking()||this._onUpdate(t,this._previousTime),this._previousTime=t,this._peaks.player.isPlaying()&&(this._rAFHandle=el(this._onAnimationFrame))};qe.prototype.onPlaying=function(){this._previousTime=this._peaks.player.getCurrentTime(),this._rAFHandle=el(this._onAnimationFrame)};qe.prototype.onSeeked=function(t){this._previousTime=t,this._updateActiveSegments(t)};function ec(t){return function(i){return i.id===t}}qe.prototype._updateActiveSegments=function(t){var e=this,i=e._peaks.segments.getSegmentsAtTime(t);for(var r in e._activeSegments)if(te(e._activeSegments,r)){var n=i.find(ec(r));n||(e._peaks.emit("segments.exit",e._activeSegments[r]),delete e._activeSegments[r])}i.forEach(function(s){s.id in e._activeSegments||(e._activeSegments[s.id]=s,e._peaks.emit("segments.enter",s))})};var Pr=Array("points.update","points.dragmove","points.add","points.remove","points.remove_all","segments.update","segments.dragged","segments.add","segments.remove","segments.remove_all");qe.prototype._attachEventHandlers=function(){this._peaks.on("player.timeupdate",this._onTimeUpdate),this._peaks.on("player.playing",this._onPlaying),this._peaks.on("player.seeked",this._onSeeked);for(var t=0;t<Pr.length;t++)this._peaks.on(Pr[t],this._updateCues);this._updateCues()};qe.prototype._detachEventHandlers=function(){this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.seeked",this._onSeeked);for(var t=0;t<Pr.length;t++)this._peaks.off(Pr[t],this._updateCues)};qe.prototype.destroy=function(){this._rAFHandle&&(Ju(this._rAFHandle),this._rAFHandle=null),this._detachEventHandlers(),this._previousTime=-1};var tc=["peaks","id","time","labelText","color","editable"];function tl(t,e){if(!xt(t.time))throw new TypeError("peaks.points."+e+": time should be a numeric value");if(t.time<0)throw new RangeError("peaks.points."+e+": time should not be negative");if(rt(t.labelText))t.labelText="";else if(!Bt(t.labelText))throw new TypeError("peaks.points."+e+": labelText must be a string");if(!Qo(t.editable))throw new TypeError("peaks.points."+e+": editable must be true or false");if(t.color&&!Bt(t.color)&&!Kr(t.color))throw new TypeError("peaks.points."+e+": color must be a string or a valid linear gradient object")}function wi(t){tl(t,"add()"),this._peaks=t.peaks,this._id=t.id,this._time=t.time,this._labelText=t.labelText,this._color=t.color,this._editable=t.editable,this._setUserData(t)}wi.prototype._setUserData=function(t){for(var e in t)te(t,e)&&tc.indexOf(e)===-1&&(this[e]=t[e])};Object.defineProperties(wi.prototype,{id:{enumerable:!0,get:function(){return this._id}},time:{enumerable:!0,get:function(){return this._time}},labelText:{get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}});wi.prototype.update=function(t){var e={time:this.time,labelText:this.labelText,color:this.color,editable:this.editable};Yr(e,t),tl(e,"update()"),this._time=e.time,this._labelText=e.labelText,this._color=e.color,this._editable=e.editable,this._setUserData(t),this._peaks.emit("points.update",this)};wi.prototype.isVisible=function(t,e){return this.time>=t&&this.time<e};wi.prototype._setTime=function(t){this._time=t};function De(t){this._peaks=t,this._points=[],this._pointsById={},this._pointIdCounter=0}De.prototype._getNextPointId=function(){return"peaks.point."+this._pointIdCounter++};De.prototype._addPoint=function(t){this._points.push(t),this._pointsById[t.id]=t};De.prototype._createPoint=function(t){var e={peaks:this._peaks};return Yr(e,t),rt(e.id)&&(e.id=this._getNextPointId()),rt(e.labelText)&&(e.labelText=""),rt(e.editable)&&(e.editable=!1),new wi(e)};De.prototype.getPoints=function(){return this._points};De.prototype.getPoint=function(t){return this._pointsById[t]||null};De.prototype.find=function(t,e){return this._points.filter(function(i){return i.isVisible(t,e)})};De.prototype.add=function(){var t=this,e=Array.isArray(arguments[0]),i=e?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(r){var n=t._createPoint(r);if(te(t._pointsById,n.id))throw new Error("peaks.points.add(): duplicate id");return n}),i.forEach(function(r){t._addPoint(r)}),this._peaks.emit("points.add",i),e?i:i[0]};De.prototype._findPoint=function(t){for(var e=[],i=0,r=this._points.length;i<r;i++)t(this._points[i])&&e.push(i);return e};De.prototype._removeIndexes=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i]-e.length,n=this._points.splice(r,1)[0];delete this._pointsById[n.id],e.push(n)}return e};De.prototype._removePoints=function(t){var e=this._findPoint(t),i=this._removeIndexes(e);return this._peaks.emit("points.remove",i),i};De.prototype.remove=function(t){return this._removePoints(function(e){return e===t})};De.prototype.removeById=function(t){return this._removePoints(function(e){return e.id===t})};De.prototype.removeByTime=function(t){return this._removePoints(function(e){return e.time===t})};De.prototype.removeAll=function(){this._points=[],this._pointsById={},this._peaks.emit("points.remove_all")};var ic=["peaks","id","startTime","endTime","labelText","color","editable"];function il(t,e){if(!xt(t.startTime))throw new TypeError("peaks.segments."+e+": startTime should be a valid number");if(!xt(t.endTime))throw new TypeError("peaks.segments."+e+": endTime should be a valid number");if(t.startTime<0)throw new RangeError("peaks.segments."+e+": startTime should not be negative");if(t.endTime<0)throw new RangeError("peaks.segments."+e+": endTime should not be negative");if(t.endTime<t.startTime)throw new RangeError("peaks.segments."+e+": endTime should not be less than startTime");if(rt(t.labelText))t.labelText="";else if(!Bt(t.labelText))throw new TypeError("peaks.segments."+e+": labelText must be a string");if(!Qo(t.editable))throw new TypeError("peaks.segments."+e+": editable must be true or false");if(t.color&&!Bt(t.color)&&!Kr(t.color))throw new TypeError("peaks.segments."+e+": color must be a string or a valid linear gradient object")}function Yt(t){il(t,"add()"),this._peaks=t.peaks,this._id=t.id,this._startTime=t.startTime,this._endTime=t.endTime,this._labelText=t.labelText,this._color=t.color,this._editable=t.editable,this._setUserData(t)}Yt.prototype._setUserData=function(t){for(var e in t)te(t,e)&&ic.indexOf(e)===-1&&(this[e]=t[e])};Object.defineProperties(Yt.prototype,{id:{enumerable:!0,get:function(){return this._id}},startTime:{enumerable:!0,get:function(){return this._startTime}},endTime:{enumerable:!0,get:function(){return this._endTime}},labelText:{enumerable:!0,get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}});Yt.prototype.update=function(t){var e={startTime:this.startTime,endTime:this.endTime,labelText:this.labelText,color:this.color,editable:this.editable};Yr(e,t),il(e,"update()"),this._startTime=e.startTime,this._endTime=e.endTime,this._labelText=e.labelText,this._color=e.color,this._editable=e.editable,this._setUserData(t),this._peaks.emit("segments.update",this)};Yt.prototype.isVisible=function(t,e){return this.startTime<e&&t<this.endTime};Yt.prototype._setStartTime=function(t){this._startTime=t};Yt.prototype._setEndTime=function(t){this._endTime=t};function Te(t){this._peaks=t,this._segments=[],this._segmentsById={},this._segmentIdCounter=0,this._colorIndex=0}Te.prototype._getNextSegmentId=function(){return"peaks.segment."+this._segmentIdCounter++};var pa=["#001f3f","#0074d9","#7fdbff","#39cccc","#ffdc00","#ff851b","#ff4136","#85144b","#f012be","#b10dc9"];Te.prototype._getSegmentColor=function(){return this._peaks.options.randomizeSegmentColor?(++this._colorIndex===pa.length&&(this._colorIndex=0),pa[this._colorIndex]):this._peaks.options.segmentColor};Te.prototype._addSegment=function(t){this._segments.push(t),this._segmentsById[t.id]=t};Te.prototype._createSegment=function(t){if(!pi(t))throw new TypeError("peaks.segments.add(): expected a Segment object parameter");var e={peaks:this._peaks};return Yr(e,t),rt(e.id)&&(e.id=this._getNextSegmentId()),rt(e.color)&&(e.color=this._getSegmentColor()),rt(e.labelText)&&(e.labelText=""),rt(e.editable)&&(e.editable=!1),new Yt(e)};Te.prototype.getSegments=function(){return this._segments};Te.prototype.getSegment=function(t){return this._segmentsById[t]||null};Te.prototype.getSegmentsAtTime=function(t){return this._segments.filter(function(e){return t>=e.startTime&&t<e.endTime})};Te.prototype.find=function(t,e){return this._segments.filter(function(i){return i.isVisible(t,e)})};Te.prototype.add=function(){var t=this,e=Array.isArray(arguments[0]),i=e?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(r){var n=t._createSegment(r);if(te(t._segmentsById,n.id))throw new Error("peaks.segments.add(): duplicate id");return n}),i.forEach(function(r){t._addSegment(r)}),this._peaks.emit("segments.add",i),e?i:i[0]};Te.prototype._findSegment=function(t){for(var e=[],i=0,r=this._segments.length;i<r;i++)t(this._segments[i])&&e.push(i);return e};Te.prototype._removeIndexes=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i]-e.length,n=this._segments.splice(r,1)[0];delete this._segmentsById[n.id],e.push(n)}return e};Te.prototype._removeSegments=function(t){var e=this._findSegment(t),i=this._removeIndexes(e);return this._peaks.emit("segments.remove",i),i};Te.prototype.remove=function(t){return this._removeSegments(function(e){return e===t})};Te.prototype.removeById=function(t){return this._removeSegments(function(e){return e.id===t})};Te.prototype.removeByTime=function(t,e){e=typeof e=="number"?e:0;var i;return e>0?i=function(n){return n.startTime===t&&n.endTime===e}:i=function(n){return n.startTime===t},this._removeSegments(i)};Te.prototype.removeAll=function(){this._segments=[],this._segmentsById={},this._peaks.emit("segments.remove_all")};var rc=["OBJECT","TEXTAREA","INPUT","SELECT","OPTION"],rl=32,nl=9,sl=37,al=39,nc=[rl,nl,sl,al];function ps(t){this.eventEmitter=t,this._handleKeyEvent=this._handleKeyEvent.bind(this),document.addEventListener("keydown",this._handleKeyEvent),document.addEventListener("keypress",this._handleKeyEvent),document.addEventListener("keyup",this._handleKeyEvent)}ps.prototype._handleKeyEvent=function(e){if(rc.indexOf(e.target.nodeName)===-1){if(nc.indexOf(e.type)>-1&&e.preventDefault(),e.type==="keydown"||e.type==="keypress")switch(e.keyCode){case rl:this.eventEmitter.emit("keyboard.space");break;case nl:this.eventEmitter.emit("keyboard.tab");break}else if(e.type==="keyup")switch(e.keyCode){case sl:e.shiftKey?this.eventEmitter.emit("keyboard.shift_left"):this.eventEmitter.emit("keyboard.left");break;case al:e.shiftKey?this.eventEmitter.emit("keyboard.shift_right"):this.eventEmitter.emit("keyboard.right");break}}};ps.prototype.destroy=function(){document.removeEventListener("keydown",this._handleKeyEvent),document.removeEventListener("keypress",this._handleKeyEvent),document.removeEventListener("keyup",this._handleKeyEvent)};function Xe(t){this._mediaElement=t}Xe.prototype._addMediaListener=function(t,e){this._listeners.push({type:t,callback:e}),this._mediaElement.addEventListener(t,e)};Xe.prototype.init=function(t){var e=this;return e._eventEmitter=t,e._listeners=[],e._duration=e.getDuration(),e._addMediaListener("timeupdate",function(){e._eventEmitter.emit("player.timeupdate",e.getCurrentTime())}),e._addMediaListener("playing",function(){e._eventEmitter.emit("player.playing",e.getCurrentTime())}),e._addMediaListener("pause",function(){e._eventEmitter.emit("player.pause",e.getCurrentTime())}),e._addMediaListener("ended",function(){e._eventEmitter.emit("player.ended")}),e._addMediaListener("seeked",function(){e._eventEmitter.emit("player.seeked",e.getCurrentTime())}),e._addMediaListener("canplay",function(){e._eventEmitter.emit("player.canplay")}),e._addMediaListener("error",function(i){e._eventEmitter.emit("player.error",i.target.error)}),e._interval=null,new Promise(function(i,r){function n(s){e._mediaElement.removeEventListener("loadedmetadata",n),e._mediaElement.removeEventListener("error",n),s.type==="loadedmetadata"?i():r(s.target.error)}e._mediaElement.readyState===HTMLMediaElement.HAVE_NOTHING?(e._mediaElement.addEventListener("loadedmetadata",n),e._mediaElement.addEventListener("error",n),e._mediaElement.load()):i()})};Xe.prototype.destroy=function(){for(var t=0;t<this._listeners.length;t++){var e=this._listeners[t];this._mediaElement.removeEventListener(e.type,e.callback)}this._listeners.length=0,this._mediaElement=null};Xe.prototype.play=function(){return this._mediaElement.play()};Xe.prototype.pause=function(){this._mediaElement.pause()};Xe.prototype.isPlaying=function(){return!this._mediaElement.paused};Xe.prototype.isSeeking=function(){return this._mediaElement.seeking};Xe.prototype.getCurrentTime=function(){return this._mediaElement.currentTime};Xe.prototype.getDuration=function(){return this._mediaElement.duration};Xe.prototype.seek=function(t){this._mediaElement.currentTime=t};function qi(t,e){this._eventEmitter=t,this._mediaElement=e,this._playerCanPlayHandler=this._playerCanPlayHandler.bind(this),this._playerErrorHandler=this._playerErrorHandler.bind(this)}qi.prototype.setSource=function(t,e){var i=this;return i._options=t,i._callback=e,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),new Promise(function(r,n){i._resolve=r,i._reject=n,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),i._mediaElement.setAttribute("src",t.mediaUrl)})};qi.prototype._reset=function(){this._eventEmitter.removeListener("player.canplay",this._playerCanPlayHandler),this._eventEmitter.removeListener("player.error",this._playerErrorHandler)};qi.prototype._playerCanPlayHandler=function(){this._reset(),this._resolve()};qi.prototype._playerErrorHandler=function(t){this._reset(),this._reject(t)};Xe.prototype.setSource=function(t){if(!t.mediaUrl)return Promise.reject(new Error("peaks.setSource(): options must contain a mediaUrl when using mediaElement"));var e=new qi(this._eventEmitter,this._mediaElement);return e.setSource(t)};function sc(t){for(var e=[],i=t;i;)Object.getOwnPropertyNames(i).forEach(function(r){e.push(r)}),i=Object.getPrototypeOf(i);return e}function ac(t){var e=["init","destroy","play","pause","isPlaying","isSeeking","getCurrentTime","getDuration","seek"],i=sc(t);e.forEach(function(r){if(!i.includes(r))throw new TypeError("Peaks.init(): Player method "+r+" is undefined");if(typeof t[r]!="function")throw new TypeError("Peaks.init(): Player method "+r+" is not a function")})}function ze(t,e){this._peaks=t,this._playingSegment=!1,this._segment=null,this._loop=!1,this._playSegmentTimerCallback=this._playSegmentTimerCallback.bind(this),ac(e),this._adapter=e}ze.prototype.init=function(){return this._adapter.init(this._peaks)};ze.prototype.destroy=function(){this._adapter.destroy()};ze.prototype.play=function(){return this._adapter.play()};ze.prototype.pause=function(){this._adapter.pause()};ze.prototype.isPlaying=function(){return this._adapter.isPlaying()};ze.prototype.isSeeking=function(){return this._adapter.isSeeking()};ze.prototype.getCurrentTime=function(){return this._adapter.getCurrentTime()};ze.prototype.getDuration=function(){return this._adapter.getDuration()};ze.prototype.seek=function(t){if(!xt(t)){this._peaks._logger("peaks.player.seek(): parameter must be a valid time, in seconds");return}this._adapter.seek(t)};ze.prototype.playSegment=function(t,e){var i=this;return!t||!xt(t.startTime)||!xt(t.endTime)?Promise.reject(new Error("peaks.player.playSegment(): parameter must be a segment object")):(i._segment=t,i._loop=e,i.seek(t.startTime),i._peaks.once("player.playing",function(){i._playingSegment||(i._playingSegment=!0,window.requestAnimationFrame(i._playSegmentTimerCallback))}),i.play())};ze.prototype._playSegmentTimerCallback=function(){if(this.isPlaying()){if(this.getCurrentTime()>=this._segment.endTime)if(this._loop)this.seek(this._segment.startTime);else{this.pause(),this._peaks.emit("player.ended"),this._playingSegment=!1;return}}else{this._playingSegment=!1;return}window.requestAnimationFrame(this._playSegmentTimerCallback)};ze.prototype._setSource=function(t){return this._adapter.setSource(t)};function Ji(t){this._options=t}Ji.prototype.init=function(t){var e=10,i=20,r=-(e/2)+.5;this._options.view==="zoomview"&&(this._label=new le({x:2,y:0,text:this._options.point.labelText,textAlign:"left",fontFamily:this._options.fontFamily||"sans-serif",fontSize:this._options.fontSize||10,fontStyle:this._options.fontStyle||"normal",fill:"#000"})),this._options.draggable&&(this._handle=new yi({x:r,y:0,width:e,height:i,fill:this._options.color})),this._line=new at({x:0,y:0,stroke:this._options.color,strokeWidth:1}),this._handle&&(this._time=new le({x:-24,y:0,text:this._options.layer.formatTime(this._options.point.time),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._time.hide()),this._handle&&t.add(this._handle),t.add(this._line),this._label&&t.add(this._label),this._time&&t.add(this._time),this.fitToView(),this.bindEventHandlers(t)};Ji.prototype.bindEventHandlers=function(t){var e=this;e._handle&&(e._handle.on("mouseover touchstart",function(){e._time.setX(-24-e._time.getWidth()),e._time.show()}),e._handle.on("mouseout touchend",function(){e._time.hide()}),t.on("dragstart",function(){e._time.setX(-24-e._time.getWidth()),e._time.show()}),t.on("dragend",function(){e._time.hide()}))};Ji.prototype.fitToView=function(){var t=this._options.layer.getHeight();this._line.points([.5,0,.5,t]),this._label&&this._label.y(12),this._handle&&this._handle.y(t/2-10.5),this._time&&this._time.y(t/2-5)};Ji.prototype.timeUpdated=function(t){this._time&&this._time.setText(this._options.layer.formatTime(t))};function Qi(t){this._options=t}Qi.prototype.init=function(t){var e=10,i=20,r=-(e/2)+.5,n=this._options.startMarker?-24:24,s=this._options.startMarker?this._options.segment.startTime:this._options.segment.endTime;this._label=new le({x:n,y:0,text:this._options.layer.formatTime(s),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._label.hide(),this._handle=new yi({x:r,y:0,width:e,height:i,fill:this._options.color,stroke:this._options.color,strokeWidth:1}),this._line=new at({x:0,y:0,stroke:this._options.color,strokeWidth:1}),t.add(this._label),t.add(this._line),t.add(this._handle),this.fitToView(),this.bindEventHandlers(t)};Qi.prototype.bindEventHandlers=function(t){var e=this,i=e._options.startMarker?-24:24;e._options.draggable&&(t.on("dragstart",function(){e._options.startMarker&&e._label.setX(i-e._label.getWidth()),e._label.show()}),t.on("dragend",function(){e._label.hide()})),e._handle.on("mouseover touchstart",function(){e._options.startMarker&&e._label.setX(i-e._label.getWidth()),e._label.show()}),e._handle.on("mouseout touchend",function(){e._label.hide()})};Qi.prototype.fitToView=function(){var t=this._options.layer.getHeight();this._label.y(t/2-5),this._handle.y(t/2-10.5),this._line.points([.5,0,.5,t])};Qi.prototype.timeUpdated=function(t){this._label.setText(this._options.layer.formatTime(t))};function oc(t){return t.view==="zoomview"?new Qi(t):null}function lc(t){return new le({x:12,y:12,text:t.segment.labelText,textAlign:"center",fontFamily:t.fontFamily||"sans-serif",fontSize:t.fontSize||12,fontStyle:t.fontStyle||"normal",fill:"#000"})}function hc(t){return new Ji(t)}function It(t,e,i){this._view=t,this._offset=e,this._color=i,this._layer=new be.Layer({listening:!1}),this._highlightRect=null,this._startTime=null,this._endTime=null}It.prototype.addToStage=function(t){t.add(this._layer)};It.prototype.showHighlight=function(t,e){this._highlightRect||this._createHighlightRect(t,e),this._update(t,e)};It.prototype._update=function(t,e){this._startTime=t,this._endTime=e;var i=this._view.timeToPixels(t),r=this._view.timeToPixels(e);this._highlightRect.setAttrs({x:i,width:r-i})};It.prototype._createHighlightRect=function(t,e){this._startTime=t,this._endTime=e;var i=this._view.timeToPixels(t),r=this._view.timeToPixels(e);this._highlightRect=new yi({x:i,y:0,width:r-i,stroke:this._color,strokeWidth:1,height:0,fill:this._color,opacity:.3,cornerRadius:2}),this.fitToView(),this._layer.add(this._highlightRect)};It.prototype.removeHighlight=function(){this._highlightRect&&(this._highlightRect.destroy(),this._highlightRect=null)};It.prototype.updateHighlight=function(){this._highlightRect&&this._update(this._startTime,this._endTime)};It.prototype.fitToView=function(){if(this._highlightRect){var t=this._view.getHeight(),e=Xt(this._offset,0,Math.floor(t/2));this._highlightRect.setAttrs({y:e,height:t-e*2})}};function fc(t){for(;t.parent!==null;){if(t.parent instanceof be.Layer)return t;t=t.parent}return null}function Kt(t,e){this._stage=t,this._handlers=e,this._dragging=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseUp=this._mouseUp.bind(this),this._mouseMove=this._mouseMove.bind(this),this._stage.on("mousedown",this._mouseDown),this._stage.on("touchstart",this._mouseDown),this._lastMouseClientX=null}Kt.prototype._mouseDown=function(t){if(!(t.type==="mousedown"&&t.evt.button!==0)){var e=fc(t.target);if(!(e&&e.attrs.draggable)){if(this._lastMouseClientX=Math.floor(t.type==="touchstart"?t.evt.touches[0].clientX:t.evt.clientX),this._handlers.onMouseDown){var i=this._getMousePosX(this._lastMouseClientX);this._handlers.onMouseDown(i)}window.addEventListener("mousemove",this._mouseMove,!1),window.addEventListener("touchmove",this._mouseMove,!1),window.addEventListener("mouseup",this._mouseUp,!1),window.addEventListener("touchend",this._mouseUp,!1),window.addEventListener("blur",this._mouseUp,!1)}}};Kt.prototype._mouseMove=function(t){var e=Math.floor(t.type==="touchmove"?t.changedTouches[0].clientX:t.clientX);if(e!==this._lastMouseClientX&&(this._lastMouseClientX=e,this._dragging=!0,this._handlers.onMouseMove)){var i=this._getMousePosX(e);this._handlers.onMouseMove(i)}};Kt.prototype._mouseUp=function(t){var e;if(t.type==="touchend"?(e=Math.floor(t.changedTouches[0].clientX),t.cancelable&&t.preventDefault()):e=Math.floor(t.clientX),this._handlers.onMouseUp){var i=this._getMousePosX(e);this._handlers.onMouseUp(i)}window.removeEventListener("mousemove",this._mouseMove,!1),window.removeEventListener("touchmove",this._mouseMove,!1),window.removeEventListener("mouseup",this._mouseUp,!1),window.removeEventListener("touchend",this._mouseUp,!1),window.removeEventListener("blur",this._mouseUp,!1),this._dragging=!1};Kt.prototype._getMousePosX=function(t){var e=this._stage.getContainer().getBoundingClientRect();return t-e.left};Kt.prototype.isDragging=function(){return this._dragging};function Pe(t){this._player=t.player,this._view=t.view,this._playheadPixel=0,this._playheadLineAnimation=null,this._playheadVisible=!1,this._playheadColor=t.playheadColor,this._playheadTextColor=t.playheadTextColor,this._playheadFontFamily=t.playheadFontFamily,this._playheadFontSize=t.playheadFontSize,this._playheadFontStyle=t.playheadFontStyle,this._playheadLayer=new be.Layer,this._createPlayhead(this._playheadColor),t.showPlayheadTime&&this._createPlayheadText(this._playheadTextColor),this.fitToView(),this.zoomLevelChanged()}Pe.prototype.addToStage=function(t){t.add(this._playheadLayer)};Pe.prototype.zoomLevelChanged=function(){var t=this._view.timeToPixels(1),e;this._useAnimation=t>=5,this._useAnimation?this._player.isPlaying()&&!this._playheadLineAnimation&&this._start():this._playheadLineAnimation&&(e=this._player.getCurrentTime(),this.stop(e))};Pe.prototype.fitToView=function(){var t=this._view.getHeight();this._playheadLine.points([.5,0,.5,t]),this._playheadText&&this._playheadText.y(12)};Pe.prototype._createPlayhead=function(t){this._playheadLine=new at({stroke:t,strokeWidth:1}),this._playheadGroup=new be.Group({x:0,y:0}),this._playheadGroup.add(this._playheadLine),this._playheadLayer.add(this._playheadGroup)};Pe.prototype._createPlayheadText=function(t){var e=this._player.getCurrentTime(),i=this._view.formatTime(e);this._playheadText=new le({x:2,y:0,text:i,fontSize:this._playheadFontSize,fontFamily:this._playheadFontFamily,fontStyle:this._playheadFontStyle,fill:t,align:"right"}),this._playheadGroup.add(this._playheadText)};Pe.prototype.updatePlayheadTime=function(t){this._syncPlayhead(t),this._player.isPlaying()&&this._start()};Pe.prototype._syncPlayhead=function(t){var e=this._view.timeToPixels(t),i=this._view.getFrameOffset(),r=this._view.getWidth(),n=e>=i&&e<=i+r;if(this._playheadPixel=e,n){var s=this._playheadPixel-i;if(this._playheadVisible||(this._playheadVisible=!0,this._playheadGroup.show()),this._playheadGroup.setX(s),this._playheadText){var a=this._view.formatTime(t),o=this._playheadText.getTextWidth();this._playheadText.setText(a),o+s>r-2?this._playheadText.setX(-o-2):o+s<r&&this._playheadText.setX(2)}}else this._playheadVisible&&(this._playheadVisible=!1,this._playheadGroup.hide());this._view.playheadPosChanged&&this._view.playheadPosChanged(t)};Pe.prototype._start=function(){var t=this;if(t._playheadLineAnimation&&(t._playheadLineAnimation.stop(),t._playheadLineAnimation=null),!!t._useAnimation){var e=null;t._playheadLineAnimation=new Ne(function(){var i=t._player.getCurrentTime(),r=t._view.timeToPixels(i);r!==e&&(t._syncPlayhead(i),e=r)},t._playheadLayer),t._playheadLineAnimation.start()}};Pe.prototype.stop=function(t){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null),this._syncPlayhead(t)};Pe.prototype.getPlayheadOffset=function(){return this._playheadPixel-this._view.getFrameOffset()};Pe.prototype.getPlayheadPixel=function(){return this._playheadPixel};Pe.prototype.showPlayheadTime=function(t){t?this._playheadText||(this._createPlayheadText(this._playheadTextColor),this.fitToView()):this._playheadText&&(this._playheadText.remove(),this._playheadText.destroy(),this._playheadText=null)};Pe.prototype.updatePlayheadText=function(){if(this._playheadText){var t=this._player.getCurrentTime(),e=this._view.formatTime(t);this._playheadText.setText(e)}};Pe.prototype.destroy=function(){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null)};function Je(t){this._point=t.point,this._marker=t.marker,this._draggable=t.draggable,this._onClick=t.onClick,this._onDblClick=t.onDblClick,this._onDragStart=t.onDragStart,this._onDragMove=t.onDragMove,this._onDragEnd=t.onDragEnd,this._onMouseEnter=t.onMouseEnter,this._onMouseLeave=t.onMouseLeave,this._onContextMenu=t.onContextMenu,this._dragBoundFunc=this._dragBoundFunc.bind(this),this._group=new be.Group({draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}Je.prototype._bindDefaultEventHandlers=function(){var t=this;t._group.on("dragstart",function(e){t._onDragStart(e,t._point)}),t._group.on("dragmove",function(e){t._onDragMove(e,t._point)}),t._group.on("dragend",function(e){t._onDragEnd(e,t._point)}),t._group.on("click",function(e){t._onClick(e,t._point)}),t._group.on("dblclick",function(e){t._onDblClick(e,t._point)}),t._group.on("mouseenter",function(e){t._onMouseEnter(e,t._point)}),t._group.on("mouseleave",function(e){t._onMouseLeave(e,t._point)}),t._group.on("contextmenu",function(e){t._onContextMenu(e,t._point)})};Je.prototype._dragBoundFunc=function(t){return{x:t.x,y:this._group.getAbsolutePosition().y}};Je.prototype.addToLayer=function(t){t.add(this._group)};Je.prototype.fitToView=function(){this._marker.fitToView()};Je.prototype.getPoint=function(){return this._point};Je.prototype.getX=function(){return this._group.getX()};Je.prototype.getWidth=function(){return this._group.getWidth()};Je.prototype.setX=function(t){this._group.setX(t)};Je.prototype.timeUpdated=function(t){this._marker.timeUpdated&&this._marker.timeUpdated(t)};Je.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};var dc="sans-serif",uc=10,cc="normal";function ee(t,e,i){this._peaks=t,this._view=e,this._allowEditing=i,this._pointMarkers={},this._layer=new be.Layer,this._onPointsDrag=this._onPointsDrag.bind(this),this._onPointHandleClick=this._onPointHandleClick.bind(this),this._onPointHandleDblClick=this._onPointHandleDblClick.bind(this),this._onPointHandleDragStart=this._onPointHandleDragStart.bind(this),this._onPointHandleDragMove=this._onPointHandleDragMove.bind(this),this._onPointHandleDragEnd=this._onPointHandleDragEnd.bind(this),this._onPointHandleMouseEnter=this._onPointHandleMouseEnter.bind(this),this._onPointHandleMouseLeave=this._onPointHandleMouseLeave.bind(this),this._onPointHandleContextMenu=this._onPointHandleContextMenu.bind(this),this._onPointsUpdate=this._onPointsUpdate.bind(this),this._onPointsAdd=this._onPointsAdd.bind(this),this._onPointsRemove=this._onPointsRemove.bind(this),this._onPointsRemoveAll=this._onPointsRemoveAll.bind(this),this._peaks.on("points.update",this._onPointsUpdate),this._peaks.on("points.add",this._onPointsAdd),this._peaks.on("points.remove",this._onPointsRemove),this._peaks.on("points.remove_all",this._onPointsRemoveAll),this._peaks.on("points.dragstart",this._onPointsDrag),this._peaks.on("points.dragmove",this._onPointsDrag),this._peaks.on("points.dragend",this._onPointsDrag)}ee.prototype.addToStage=function(t){t.add(this._layer)};ee.prototype.enableEditing=function(t){this._allowEditing=t};ee.prototype.formatTime=function(t){return this._view.formatTime(t)};ee.prototype._onPointsUpdate=function(t){var e=this._view.getStartTime(),i=this._view.getEndTime();this._removePoint(t),t.isVisible(e,i)&&this._addPointMarker(t),this.updatePoints(e,i)};ee.prototype._onPointsAdd=function(t){var e=this,i=e._view.getStartTime(),r=e._view.getEndTime();t.forEach(function(n){n.isVisible(i,r)&&e._addPointMarker(n)}),e.updatePoints(i,r)};ee.prototype._onPointsRemove=function(t){var e=this;t.forEach(function(i){e._removePoint(i)})};ee.prototype._onPointsRemoveAll=function(){this._layer.removeChildren(),this._pointMarkers={}};ee.prototype._onPointsDrag=function(t){this._updatePoint(t.point)};ee.prototype._createPointMarker=function(t){var e=this._allowEditing&&t.editable,i=this._peaks.options.createPointMarker({point:t,draggable:e,color:t.color?t.color:this._peaks.options.pointMarkerColor,fontFamily:this._peaks.options.fontFamily||dc,fontSize:this._peaks.options.fontSize||uc,fontStyle:this._peaks.options.fontStyle||cc,layer:this,view:this._view.getName()});return new Je({point:t,draggable:e,marker:i,onClick:this._onPointHandleClick,onDblClick:this._onPointHandleDblClick,onDragStart:this._onPointHandleDragStart,onDragMove:this._onPointHandleDragMove,onDragEnd:this._onPointHandleDragEnd,onMouseEnter:this._onPointHandleMouseEnter,onMouseLeave:this._onPointHandleMouseLeave,onContextMenu:this._onPointHandleContextMenu})};ee.prototype.getHeight=function(){return this._view.getHeight()};ee.prototype._addPointMarker=function(t){var e=this._createPointMarker(t);return this._pointMarkers[t.id]=e,e.addToLayer(this._layer),e};ee.prototype._onPointHandleDragMove=function(t,e){var i=this._pointMarkers[e.id],r=i.getX();if(r>=0&&r<this._view.getWidth()){var n=r+i.getWidth();e._setTime(this._view.pixelOffsetToTime(n)),i.timeUpdated(e.time)}this._peaks.emit("points.dragmove",{point:e,evt:t.evt})};ee.prototype._onPointHandleMouseEnter=function(t,e){this._peaks.emit("points.mouseenter",{point:e,evt:t.evt})};ee.prototype._onPointHandleMouseLeave=function(t,e){this._peaks.emit("points.mouseleave",{point:e,evt:t.evt})};ee.prototype._onPointHandleClick=function(t,e){this._peaks.emit("points.click",{point:e,evt:t.evt})};ee.prototype._onPointHandleDblClick=function(t,e){this._peaks.emit("points.dblclick",{point:e,evt:t.evt})};ee.prototype._onPointHandleDragStart=function(t,e){this._peaks.emit("points.dragstart",{point:e,evt:t.evt})};ee.prototype._onPointHandleDragEnd=function(t,e){this._peaks.emit("points.dragend",{point:e,evt:t.evt})};ee.prototype._onPointHandleContextMenu=function(t,e){this._peaks.emit("points.contextmenu",{point:e,evt:t.evt})};ee.prototype.updatePoints=function(t,e){var i=this._peaks.points.find(t,e);i.forEach(this._updatePoint.bind(this)),this._removeInvisiblePoints(t,e)};ee.prototype._updatePoint=function(t){var e=this._findOrAddPointMarker(t),i=this._view.timeToPixels(t.time),r=i-this._view.getFrameOffset();e.setX(r)};ee.prototype._findOrAddPointMarker=function(t){var e=this._pointMarkers[t.id];return e||(e=this._addPointMarker(t)),e};ee.prototype._removeInvisiblePoints=function(t,e){var i=0;for(var r in this._pointMarkers)if(te(this._pointMarkers,r)){var n=this._pointMarkers[r].getPoint();n.isVisible(t,e)||(this._removePoint(n),i++)}return i};ee.prototype._removePoint=function(t){var e=this._pointMarkers[t.id];e&&(e.destroy(),delete this._pointMarkers[t.id])};ee.prototype.setVisible=function(t){this._layer.setVisible(t)};ee.prototype.destroy=function(){this._peaks.off("points.update",this._onPointsUpdate),this._peaks.off("points.add",this._onPointsAdd),this._peaks.off("points.remove",this._onPointsRemove),this._peaks.off("points.remove_all",this._onPointsRemoveAll),this._peaks.off("points.dragstart",this._onPointsDrag),this._peaks.off("points.dragmove",this._onPointsDrag),this._peaks.off("points.dragend",this._onPointsDrag)};ee.prototype.fitToView=function(){for(var t in this._pointMarkers)if(te(this._pointMarkers,t)){var e=this._pointMarkers[t];e.fitToView()}};ee.prototype.draw=function(){this._layer.draw()};function He(t){this._segment=t.segment,this._marker=t.marker,this._segmentShape=t.segmentShape,this._draggable=t.draggable,this._startMarker=t.startMarker,this._onDrag=t.onDrag,this._onDragStart=t.onDragStart,this._onDragEnd=t.onDragEnd,this._dragBoundFunc=this._dragBoundFunc.bind(this),this._group=new be.Group({draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}He.prototype._bindDefaultEventHandlers=function(){var t=this;t._draggable&&(t._group.on("dragmove",function(e){t._onDrag(e,t)}),t._group.on("dragstart",function(e){t._onDragStart(e,t)}),t._group.on("dragend",function(e){t._onDragEnd(e,t)}))};He.prototype._dragBoundFunc=function(t){var e,i;return this._startMarker?(e=this._segmentShape.getEndMarker(),i=e.getX()-e.getWidth(),t.x>i&&(t.x=i)):(e=this._segmentShape.getStartMarker(),i=e.getX()+e.getWidth(),t.x<i&&(t.x=i)),{x:t.x,y:this._group.getAbsolutePosition().y}};He.prototype.addToLayer=function(t){t.add(this._group)};He.prototype.fitToView=function(){this._marker.fitToView()};He.prototype.getSegment=function(){return this._segment};He.prototype.getX=function(){return this._group.getX()};He.prototype.getWidth=function(){return this._group.getWidth()};He.prototype.isStartMarker=function(){return this._startMarker};He.prototype.setX=function(t){this._group.setX(t)};He.prototype.timeUpdated=function(t){this._marker.timeUpdated&&this._marker.timeUpdated(t)};He.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};function ve(t){this._color=t.color;var e={};if(Bt(t.color))e.fill=t.color;else if(Kr(t.color)){var i=t.view._height*(t.color.linearGradientStart/100),r=t.view._height*(t.color.linearGradientEnd/100);e.fillLinearGradientStartPointY=i,e.fillLinearGradientEndPointY=r,e.fillLinearGradientColorStops=[0,t.color.linearGradientColorStops[0],1,t.color.linearGradientColorStops[1]]}else throw new TypeError("Unknown type for color property");this._shape=new be.Shape(e),this._view=t.view,this._segment=t.segment,this._shape.sceneFunc(this._sceneFunc.bind(this)),this._shape.hitFunc(this._waveformShapeHitFunc.bind(this))}ve.prototype.setSegment=function(t){this._segment=t};ve.prototype.setWaveformColor=function(t){if(Bt(t))this._shape.fill(t),this._shape.fillLinearGradientStartPointY(null),this._shape.fillLinearGradientEndPointY(null),this._shape.fillLinearGradientColorStops(null);else if(Kr(t)){this._shape.fill(null);var e=this._view._height*(t.linearGradientStart/100),i=this._view._height*(t.linearGradientEnd/100);this._shape.fillLinearGradientStartPointY(e),this._shape.fillLinearGradientEndPointY(i),this._shape.fillLinearGradientColorStops([0,t.linearGradientColorStops[0],1,t.linearGradientColorStops[1]])}else throw new TypeError("Unknown type for color property")};ve.prototype.fitToView=function(){this.setWaveformColor(this._color)};ve.prototype._sceneFunc=function(t){var e=this._view.getFrameOffset(),i=this._view.getWidth(),r=this._view.getHeight();this._drawWaveform(t,this._view.getWaveformData(),e,this._segment?this._view.timeToPixels(this._segment.startTime):e,this._segment?this._view.timeToPixels(this._segment.endTime):e+i,i,r)};ve.prototype._drawWaveform=function(t,e,i,r,n,s,a){r<i&&(r=i);var o=i+s;n>o&&(n=o),n>e.length-1&&(n=e.length-1);for(var l=e.channels,h=0,f=Math.floor(a/l),u=0;u<l;u++)u===l-1&&(f=a-(l-1)*f),this._drawChannel(t,e.channel(u),i,r,n,h,f),h+=f};ve.prototype._drawChannel=function(t,e,i,r,n,s,a){var o,l,h=this._view.getAmplitudeScale(),f,u;for(t.beginPath(),o=r;o<=n;o++)l=e.min_sample(o),f=o-i+.5,u=s+ve.scaleY(l,a,h)+.5,t.lineTo(f,u);for(o=n;o>=r;o--)l=e.max_sample(o),f=o-i+.5,u=s+ve.scaleY(l,a,h)+1,t.lineTo(f,u);t.closePath(),t.fillShape(this._shape)};ve.prototype._waveformShapeHitFunc=function(t){if(!!this._segment){var e=this._view.getFrameOffset(),i=this._view.getWidth(),r=this._view.getHeight(),n=this._view.timeToPixels(this._segment.startTime),s=this._view.timeToPixels(this._segment.endTime),a=10,o=r-2*a;o<0&&(o=0);var l=n-e,h=s-n;l<0&&(h-=-l,l=0),l+h>i&&(h-=l+h-i),t.beginPath(),t.rect(l,a,h,o),t.closePath(),t.fillStrokeShape(this._shape)}};ve.prototype.addToLayer=function(t){t.add(this._shape)};ve.prototype.destroy=function(){this._shape.destroy(),this._shape=null};ve.prototype.on=function(t,e){this._shape.on(t,e)};ve.scaleY=function(t,e,i){var r=-(e-1)*(t*i+128)/255+(e-1);return Xt(Math.floor(r),0,e-1)};var ga="sans-serif",_a=10,ma="normal";function xe(t,e,i,r){this._segment=t,this._peaks=e,this._layer=i,this._view=r,this._label=null,this._startMarker=null,this._endMarker=null,this._color=t.color,this._waveformShape=new ve({color:t.color,view:r,segment:t}),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onClick=this._onClick.bind(this),this._onDblClick=this._onDblClick.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._waveformShape.on("mouseenter",this._onMouseEnter),this._waveformShape.on("mouseleave",this._onMouseLeave),this._waveformShape.on("click",this._onClick),this._waveformShape.on("dblclick",this._onDblClick),this._waveformShape.on("contextmenu",this._onContextMenu),this._onSegmentHandleDrag=this._onSegmentHandleDrag.bind(this),this._onSegmentHandleDragStart=this._onSegmentHandleDragStart.bind(this),this._onSegmentHandleDragEnd=this._onSegmentHandleDragEnd.bind(this),this._label=this._peaks.options.createSegmentLabel({segment:t,view:this._view.getName(),layer:this._layer,fontFamily:this._peaks.options.fontFamily,fontSize:this._peaks.options.fontSize,fontStyle:this._peaks.options.fontStyle}),this._label&&this._label.hide(),this._createMarkers()}xe.prototype.updatePosition=function(){var t=this._view.timeToPixels(this._segment.startTime),e=this._view.timeToPixels(this._segment.endTime),i=this._view.getFrameOffset(),r=t-i,n=e-i,s=this.getStartMarker();s&&s.setX(r-s.getWidth()),s=this.getEndMarker(),s&&s.setX(n)};xe.prototype.getSegment=function(){return this._segment};xe.prototype.getStartMarker=function(){return this._startMarker};xe.prototype.getEndMarker=function(){return this._endMarker};xe.prototype.addToLayer=function(t){this._waveformShape.addToLayer(t),this._label&&t.add(this._label),this._startMarker&&this._startMarker.addToLayer(t),this._endMarker&&this._endMarker.addToLayer(t)};xe.prototype._createMarkers=function(){var t=this._layer.isEditingEnabled()&&this._segment.editable;if(!!t){var e=this._peaks.options.createSegmentMarker({segment:this._segment,draggable:t,startMarker:!0,color:this._peaks.options.segmentStartMarkerColor,fontFamily:this._peaks.options.fontFamily||ga,fontSize:this._peaks.options.fontSize||_a,fontStyle:this._peaks.options.fontStyle||ma,layer:this._layer,view:this._view.getName()});e&&(this._startMarker=new He({segment:this._segment,segmentShape:this,draggable:t,startMarker:!0,marker:e,onDrag:this._onSegmentHandleDrag,onDragStart:this._onSegmentHandleDragStart,onDragEnd:this._onSegmentHandleDragEnd}));var i=this._peaks.options.createSegmentMarker({segment:this._segment,draggable:t,startMarker:!1,color:this._peaks.options.segmentEndMarkerColor,fontFamily:this._peaks.options.fontFamily||ga,fontSize:this._peaks.options.fontSize||_a,fontStyle:this._peaks.options.fontStyle||ma,layer:this._layer,view:this._view.getName()});i&&(this._endMarker=new He({segment:this._segment,segmentShape:this,draggable:t,startMarker:!1,marker:i,onDrag:this._onSegmentHandleDrag,onDragStart:this._onSegmentHandleDragStart,onDragEnd:this._onSegmentHandleDragEnd}))}};xe.prototype._onMouseEnter=function(t){this._label&&(this._label.moveToTop(),this._label.show()),this._peaks.emit("segments.mouseenter",{segment:this._segment,evt:t.evt})};xe.prototype._onMouseLeave=function(t){this._label&&this._label.hide(),this._peaks.emit("segments.mouseleave",{segment:this._segment,evt:t.evt})};xe.prototype._onClick=function(t){this._peaks.emit("segments.click",{segment:this._segment,evt:t.evt})};xe.prototype._onDblClick=function(t){this._peaks.emit("segments.dblclick",{segment:this._segment,evt:t.evt})};xe.prototype._onContextMenu=function(t){this._peaks.emit("segments.contextmenu",{segment:this._segment,evt:t.evt})};xe.prototype._onSegmentHandleDrag=function(t,e){var i=this._view.getWidth(),r=e.isStartMarker(),n=this._startMarker.getX(),s=this._endMarker.getX();if(r&&n>=0){var a=n+this._startMarker.getWidth();this._segment._setStartTime(this._view.pixelOffsetToTime(a)),e.timeUpdated(this._segment.startTime)}if(!r&&s<i){var o=s;this._segment._setEndTime(this._view.pixelOffsetToTime(o)),e.timeUpdated(this._segment.endTime)}this._peaks.emit("segments.dragged",{segment:this._segment,startMarker:r,evt:t.evt})};xe.prototype._onSegmentHandleDragStart=function(t,e){var i=e.isStartMarker();this._peaks.emit("segments.dragstart",{segment:this._segment,startMarker:i,evt:t.evt})};xe.prototype._onSegmentHandleDragEnd=function(t,e){var i=e.isStartMarker();this._peaks.emit("segments.dragend",{segment:this._segment,startMarker:i,evt:t.evt})};xe.prototype.fitToView=function(){this._startMarker&&this._startMarker.fitToView(),this._endMarker&&this._endMarker.fitToView(),this._waveformShape.setWaveformColor(this._color)};xe.prototype.destroy=function(){this._waveformShape.destroy(),this._label&&this._label.destroy(),this._startMarker&&this._startMarker.destroy(),this._endMarker&&this._endMarker.destroy()};function he(t,e,i){this._peaks=t,this._view=e,this._allowEditing=i,this._segmentShapes={},this._layer=new be.Layer,this._onSegmentsUpdate=this._onSegmentsUpdate.bind(this),this._onSegmentsAdd=this._onSegmentsAdd.bind(this),this._onSegmentsRemove=this._onSegmentsRemove.bind(this),this._onSegmentsRemoveAll=this._onSegmentsRemoveAll.bind(this),this._onSegmentsDragged=this._onSegmentsDragged.bind(this),this._peaks.on("segments.update",this._onSegmentsUpdate),this._peaks.on("segments.add",this._onSegmentsAdd),this._peaks.on("segments.remove",this._onSegmentsRemove),this._peaks.on("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.on("segments.dragged",this._onSegmentsDragged)}he.prototype.addToStage=function(t){t.add(this._layer)};he.prototype.enableEditing=function(t){this._allowEditing=t};he.prototype.isEditingEnabled=function(){return this._allowEditing};he.prototype.formatTime=function(t){return this._view.formatTime(t)};he.prototype._onSegmentsUpdate=function(t){var e=!1,i=this._segmentShapes[t.id],r=this._view.getStartTime(),n=this._view.getEndTime();i&&(this._removeSegment(t),e=!0),t.isVisible(r,n)&&(this._addSegmentShape(t),e=!0),e&&this.updateSegments(r,n)};he.prototype._onSegmentsAdd=function(t){var e=this,i=e._view.getStartTime(),r=e._view.getEndTime();t.forEach(function(n){n.isVisible(i,r)&&e._addSegmentShape(n)}),e.updateSegments(i,r)};he.prototype._onSegmentsRemove=function(t){var e=this;t.forEach(function(i){e._removeSegment(i)})};he.prototype._onSegmentsRemoveAll=function(){this._layer.removeChildren(),this._segmentShapes={}};he.prototype._onSegmentsDragged=function(t){this._updateSegment(t.segment)};he.prototype._createSegmentShape=function(t){return new xe(t,this._peaks,this,this._view)};he.prototype._addSegmentShape=function(t){var e=this._createSegmentShape(t);return e.addToLayer(this._layer),this._segmentShapes[t.id]=e,e};he.prototype.updateSegments=function(t,e){var i=this._peaks.segments.find(t,e),r=i.length;i.forEach(this._updateSegment.bind(this)),r+=this._removeInvisibleSegments(t,e),r>0&&this._layer.draw()};he.prototype._updateSegment=function(t){var e=this._findOrAddSegmentShape(t);e.updatePosition()};he.prototype._findOrAddSegmentShape=function(t){var e=this._segmentShapes[t.id];return e||(e=this._addSegmentShape(t)),e};he.prototype._removeInvisibleSegments=function(t,e){var i=0;for(var r in this._segmentShapes)if(te(this._segmentShapes,r)){var n=this._segmentShapes[r].getSegment();n.isVisible(t,e)||(this._removeSegment(n),i++)}return i};he.prototype._removeSegment=function(t){var e=this._segmentShapes[t.id];e&&(e.destroy(),delete this._segmentShapes[t.id])};he.prototype.setVisible=function(t){this._layer.setVisible(t)};he.prototype.destroy=function(){this._peaks.off("segments.update",this._onSegmentsUpdate),this._peaks.off("segments.add",this._onSegmentsAdd),this._peaks.off("segments.remove",this._onSegmentsRemove),this._peaks.off("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.off("segments.dragged",this._onSegmentsDragged)};he.prototype.fitToView=function(){for(var t in this._segmentShapes)if(te(this._segmentShapes,t)){var e=this._segmentShapes[t];e.fitToView()}};he.prototype.draw=function(){this._layer.draw()};he.prototype.getHeight=function(){return this._layer.getHeight()};function Lt(t,e){var i=this;i._axisGridlineColor=e.axisGridlineColor,i._axisLabelColor=e.axisLabelColor,i._showAxisLabels=e.showAxisLabels,e.formatAxisTime?i._formatAxisTime=e.formatAxisTime:i._formatAxisTime=function(r){return us(r,0)},i._axisLabelFont=Lt._buildFontString(e.fontFamily,e.fontSize,e.fontStyle),i._axisShape=new be.Shape({sceneFunc:function(n){i._drawAxis(n,t)}})}Lt._buildFontString=function(t,e,i){return e||(e=11),t||(t="sans-serif"),i||(i="normal"),i+" "+e+"px "+t};Lt.prototype.addToLayer=function(t){t.add(this._axisShape)};Lt.prototype.showAxisLabels=function(t){this._showAxisLabels=t};Lt.prototype._getAxisLabelScale=function(t){for(var e=1,i=[1,2,5,10,20,30],r=60,n=0,s;;){s=e*i[n];var a=t.timeToPixels(s);if(a<r)++n===i.length&&(e*=60,n=0);else break}return s};Lt.prototype._drawAxis=function(t,e){var i=e.getStartTime(),r=10,n=this._getAxisLabelScale(e),s=Xu(i,n),a=s-i,o=e.timeToPixels(a);t.setAttr("strokeStyle",this._axisGridlineColor),t.setAttr("lineWidth",1),t.setAttr("font",this._axisLabelFont),t.setAttr("fillStyle",this._axisLabelColor),t.setAttr("textAlign","left"),t.setAttr("textBaseline","bottom");for(var l=s,h,f=e.getWidth(),u=e.getHeight();h=o+e.timeToPixels(l-s),!(h>=f);){if(t.beginPath(),t.moveTo(h+.5,0),t.lineTo(h+.5,0+r),t.moveTo(h+.5,u),t.lineTo(h+.5,u-r),t.stroke(),this._showAxisLabels){var c=this._formatAxisTime(l),v=t.measureText(c).width,y=h-v/2,S=u-1-r;y>=0&&t.fillText(c,y,S)}l+=n}};function N(t,e,i){var r=this;if(r._originalWaveformData=t,r._container=e,r._peaks=i,r._options=i.options,r._viewOptions=i.options.overview,r._onTimeUpdate=r._onTimeUpdate.bind(this),r._onPlaying=r._onPlaying.bind(this),r._onPause=r._onPause.bind(this),r._onZoomviewDisplaying=r._onZoomviewDisplaying.bind(this),r._onWindowResize=r._onWindowResize.bind(this),i.on("player.timeupdate",r._onTimeUpdate),i.on("player.playing",r._onPlaying),i.on("player.pause",r._onPause),i.on("zoomview.displaying",r._onZoomviewDisplaying),i.on("window_resize",r._onWindowResize),r._amplitudeScale=1,r._timeLabelPrecision=r._viewOptions.timeLabelPrecision,r._enableSeek=!0,r._viewOptions.formatPlayheadTime?r._formatPlayheadTime=r._viewOptions.formatPlayheadTime:r._formatPlayheadTime=function(s){return us(s,r._timeLabelPrecision)},r._width=e.clientWidth,r._height=e.clientHeight,r._data=t,r._width!==0)try{r._data=t.resample({width:r._width})}catch{}be.showWarnings=!1,r._resizeTimeoutId=null,r._stage=new be.Stage({container:e,width:r._width,height:r._height}),r._waveformLayer=new be.Layer({listening:!1}),r._waveformColor=r._viewOptions.waveformColor,r._playedWaveformColor=r._viewOptions.playedWaveformColor,r._createWaveform(),r._segmentsLayer=new he(i,r,!1),r._segmentsLayer.addToStage(r._stage),r._pointsLayer=new ee(i,r,!1),r._pointsLayer.addToStage(r._stage),r._highlightLayer=new It(r,r._viewOptions.highlightOffset,r._viewOptions.highlightColor),r._highlightLayer.addToStage(r._stage),r._createAxisLabels(),r._playheadLayer=new Pe({player:r._peaks.player,view:r,showPlayheadTime:r._viewOptions.showPlayheadTime,playheadColor:r._viewOptions.playheadColor,playheadTextColor:r._viewOptions.playheadTextColor,playheadFontFamily:r._viewOptions.fontFamily,playheadFontSize:r._viewOptions.fontSize,playheadFontStyle:r._viewOptions.fontStyle}),r._playheadLayer.addToStage(r._stage);var n=r._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(n),r._createMouseDragHandler(),r._onClick=r._onClick.bind(this),r._onDblClick=r._onDblClick.bind(this),r._onContextMenu=r._onContextMenu.bind(this),r._stage.on("click",r._onClick),r._stage.on("dblclick",r._onDblClick),r._stage.on("contextmenu",r._onContextMenu)}N.prototype._createMouseDragHandler=function(){var t=this;t._mouseDragHandler=new Kt(t._stage,{onMouseDown:function(i){this._seek(i)},onMouseMove:function(i){this._seek(i)},_seek:function(i){if(!!t._enableSeek){i=Xt(i,0,t._width);var r=t.pixelsToTime(i),n=t._getDuration();r>n&&(r=n),t._playheadLayer.updatePlayheadTime(r),t._peaks.player.seek(r)}}})};N.prototype.enableSeek=function(t){this._enableSeek=t};N.prototype._onClick=function(t){this._clickHandler(t,"overview.click")};N.prototype._onDblClick=function(t){this._clickHandler(t,"overview.dblclick")};N.prototype._onContextMenu=function(t){this._clickHandler(t,"overview.contextmenu")};N.prototype._clickHandler=function(t,e){var i=t.evt.layerX,r=this.pixelsToTime(i);this._peaks.emit(e,{time:r,evt:t.evt})};N.prototype.getName=function(){return"overview"};N.prototype._onTimeUpdate=function(t){this._playheadLayer.updatePlayheadTime(t)};N.prototype._onPlaying=function(t){this._playheadLayer.updatePlayheadTime(t)};N.prototype._onPause=function(t){this._playheadLayer.stop(t)};N.prototype._onZoomviewDisplaying=function(t,e){this.showHighlight(t,e)};N.prototype.showHighlight=function(t,e){this._highlightLayer.showHighlight(t,e)};N.prototype._onWindowResize=function(){var t=this;t._resizeTimeoutId&&(clearTimeout(t._resizeTimeoutId),t._resizeTimeoutId=null),t._container.clientWidth!==0&&(t._width=t._container.clientWidth,t._stage.setWidth(t._width),t._resizeTimeoutId=setTimeout(function(){t._width=t._container.clientWidth,t._data=t._originalWaveformData.resample({width:t._width}),t._stage.setWidth(t._width),t._updateWaveform()},500))};N.prototype.setWaveformData=function(t){this._originalWaveformData=t,this._width!==0?this._data=t.resample({width:this._width}):this._data=t,this._updateWaveform()};N.prototype.playheadPosChanged=function(t){this._playedWaveformShape&&(this._playedSegment.endTime=t,this._unplayedSegment.startTime=t,this._waveformLayer.draw())};N.prototype.timeToPixels=function(t){return Math.floor(t*this._data.sample_rate/this._data.scale)};N.prototype.pixelsToTime=function(t){return t*this._data.scale/this._data.sample_rate};N.prototype.pixelOffsetToTime=N.prototype.pixelsToTime;N.prototype.getFrameOffset=function(){return 0};N.prototype.getStartTime=function(){return 0};N.prototype.getEndTime=function(){return this._getDuration()};N.prototype.getWidth=function(){return this._width};N.prototype.getHeight=function(){return this._height};N.prototype._getDuration=function(){return this._peaks.player.getDuration()};N.prototype.setAmplitudeScale=function(t){if(!Er(t)||!Jo(t))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=t,this._waveformLayer.draw(),this._segmentsLayer.draw()};N.prototype.getAmplitudeScale=function(){return this._amplitudeScale};N.prototype.getWaveformData=function(){return this._data};N.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new ve({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var t=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:t},this._unplayedSegment={startTime:t,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new ve({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};N.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};N.prototype._createWaveform=function(){this._createWaveformShapes(),this._stage.add(this._waveformLayer)};N.prototype._createAxisLabels=function(){this._axisLayer=new be.Layer({listening:!1}),this._axis=new Lt(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};N.prototype.removeHighlightRect=function(){this._highlightLayer.removeHighlight()};N.prototype._updateWaveform=function(){this._waveformLayer.draw(),this._axisLayer.draw();var t=this._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(t),this._highlightLayer.updateHighlight();var e=0,i=this.pixelsToTime(this._width);this._pointsLayer.updatePoints(e,i),this._segmentsLayer.updateSegments(e,i)};N.prototype.setWaveformColor=function(t){this._waveformColor=t,this._waveformShape.setWaveformColor(t)};N.prototype.setPlayedWaveformColor=function(t){this._playedWaveformColor=t,t?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(t)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};N.prototype.showPlayheadTime=function(t){this._playheadLayer.showPlayheadTime(t)};N.prototype.setTimeLabelPrecision=function(t){this._timeLabelPrecision=t,this._playheadLayer.updatePlayheadText()};N.prototype.formatTime=function(t){return this._formatPlayheadTime(t)};N.prototype.showAxisLabels=function(t){this._axis.showAxisLabels(t),this._axisLayer.draw()};N.prototype.enableMarkerEditing=function(t){this._segmentsLayer.enableEditing(t),this._pointsLayer.enableEditing(t)};N.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var t=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.setWidth(this._width);try{this._data=this._originalWaveformData.resample({width:this._width}),t=!0}catch{}}this._height=this._container.clientHeight,this._stage.setHeight(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer.fitToView(),this._pointsLayer.fitToView(),this._highlightLayer.fitToView(),t&&this._updateWaveform(),this._stage.draw()}};N.prototype.destroy=function(){this._resizeTimeoutId&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=null),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("zoomview.displaying",this._onZoomviewDisplaying),this._peaks.off("window_resize",this._onWindowResize),this._playheadLayer.destroy(),this._segmentsLayer.destroy(),this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function F(t,e,i){var r=this;r._container=e,r._peaks=i,r._options=i.options,r._viewOptions=r._options.zoomview,r._enableWaveformCache=r._options.waveformCache,r._originalWaveformData=t,r._initWaveformCache(),r._onTimeUpdate=r._onTimeUpdate.bind(r),r._onPlaying=r._onPlaying.bind(r),r._onPause=r._onPause.bind(r),r._onWindowResize=r._onWindowResize.bind(r),r._onKeyboardLeft=r._onKeyboardLeft.bind(r),r._onKeyboardRight=r._onKeyboardRight.bind(r),r._onKeyboardShiftLeft=r._onKeyboardShiftLeft.bind(r),r._onKeyboardShiftRight=r._onKeyboardShiftRight.bind(r),r._peaks.on("player.timeupdate",r._onTimeUpdate),r._peaks.on("player.playing",r._onPlaying),r._peaks.on("player.pause",r._onPause),r._peaks.on("window_resize",r._onWindowResize),r._peaks.on("keyboard.left",r._onKeyboardLeft),r._peaks.on("keyboard.right",r._onKeyboardRight),r._peaks.on("keyboard.shift_left",r._onKeyboardShiftLeft),r._peaks.on("keyboard.shift_right",r._onKeyboardShiftRight),r._enableAutoScroll=!0,r._amplitudeScale=1,r._timeLabelPrecision=r._viewOptions.timeLabelPrecision,r._enableSeek=!0,r._viewOptions.formatPlayheadTime?r._formatPlayheadTime=r._viewOptions.formatPlayheadTime:r._formatPlayheadTime=function(a){return us(a,r._timeLabelPrecision)},r._playheadClickTolerance=r._viewOptions.playheadClickTolerance,r._data=null,r._pixelLength=0;var n=i.zoom.getZoomLevel();r._zoomLevelAuto=!1,r._zoomLevelSeconds=null,r._resizeTimeoutId=null,r._resampleData({scale:n}),r._width=e.clientWidth,r._height=e.clientHeight,r._frameOffset=0,r._stage=new be.Stage({container:e,width:r._width,height:r._height}),r._waveformLayer=new be.Layer({listening:!1}),r._waveformColor=r._viewOptions.waveformColor,r._playedWaveformColor=r._viewOptions.playedWaveformColor,r._createWaveform(),r._segmentsLayer=new he(i,r,!0),r._segmentsLayer.addToStage(r._stage),r._pointsLayer=new ee(i,r,!0),r._pointsLayer.addToStage(r._stage),r._createAxisLabels(),r._playheadLayer=new Pe({player:r._peaks.player,view:r,showPlayheadTime:r._viewOptions.showPlayheadTime,playheadColor:r._viewOptions.playheadColor,playheadTextColor:r._viewOptions.playheadTextColor,playheadFontFamily:r._viewOptions.fontFamily,playheadFontSize:r._viewOptions.fontSize,playheadFontStyle:r._viewOptions.fontStyle}),r._playheadLayer.addToStage(r._stage);var s=r._peaks.player.getCurrentTime();r._syncPlayhead(s),r._createMouseDragHandler(),r._onWheel=r._onWheel.bind(r),r._onWheelCaptureVerticalScroll=r._onWheelCaptureVerticalScroll.bind(r),r.setWheelMode(r._viewOptions.wheelMode),r._onClick=r._onClick.bind(this),r._onDblClick=r._onDblClick.bind(this),r._onContextMenu=r._onContextMenu.bind(this),r._stage.on("click",r._onClick),r._stage.on("dblclick",r._onDblClick),r._stage.on("contextmenu",r._onContextMenu)}F.prototype._initWaveformCache=function(){this._enableWaveformCache&&(this._waveformData=new Map,this._waveformData.set(this._originalWaveformData.scale,this._originalWaveformData),this._waveformScales=[this._originalWaveformData.scale])};F.prototype._createMouseDragHandler=function(){var t=this;t._mouseDragHandler=new Kt(t._stage,{onMouseDown:function(i){this._seeking=!1;var r=t._playheadLayer.getPlayheadOffset();t._enableSeek&&Math.abs(i-r)<=t._playheadClickTolerance&&(this._seeking=!0),this._seeking?this._seek(i):(this.initialFrameOffset=t._frameOffset,this.mouseDownX=i)},onMouseMove:function(i){if(this._seeking)this._seek(i);else{var r=this.mouseDownX-i,n=this.initialFrameOffset+r;n!==this.initialFrameOffset&&t._updateWaveform(n)}},onMouseUp:function(){if(!this._seeking&&t._enableSeek&&!t._mouseDragHandler.isDragging()){var i=t.pixelOffsetToTime(this.mouseDownX),r=t._getDuration();i>r&&(i=r),t._playheadLayer.updatePlayheadTime(i),t._peaks.player.seek(i)}},_seek:function(i){i=Xt(i,0,t._width);var r=t.pixelsToTime(i+t._frameOffset),n=t._getDuration();r>n&&(r=n),t._playheadLayer.updatePlayheadTime(r),t._peaks.player.seek(r)}})};F.prototype.enableSeek=function(t){this._enableSeek=t};F.prototype._onClick=function(t){this._clickHandler(t,"zoomview.click")};F.prototype._onDblClick=function(t){this._clickHandler(t,"zoomview.dblclick")};F.prototype._onContextMenu=function(t){this._clickHandler(t,"zoomview.contextmenu")};F.prototype._clickHandler=function(t,e){var i=t.evt.layerX,r=this.pixelOffsetToTime(i);this._peaks.emit(e,{time:r,evt:t.evt})};F.prototype.setWheelMode=function(t,e){if(e||(e={}),t!==this._wheelMode||e.captureVerticalScroll!==this._captureVerticalScroll)switch(this._stage.off("wheel"),this._wheelMode=t,this._captureVerticalScroll=e.captureVerticalScroll,t){case"scroll":e.captureVerticalScroll?this._stage.on("wheel",this._onWheelCaptureVerticalScroll):this._stage.on("wheel",this._onWheel);break}};F.prototype._onWheel=function(t){var e=t.evt,i;if(e.shiftKey)if(e.deltaY!==0)i=e.deltaY;else if(e.deltaX!==0)i=e.deltaX;else return;else{if(Math.abs(e.deltaX)<Math.abs(e.deltaY))return;i=e.deltaX}e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._width),e.preventDefault();var r=Xt(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this._updateWaveform(r)};F.prototype._onWheelCaptureVerticalScroll=function(t){var e=t.evt,i=Math.abs(e.deltaX)<Math.abs(e.deltaY)?e.deltaY:e.deltaX;e.preventDefault();var r=Xt(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this._updateWaveform(r)};F.prototype.getName=function(){return"zoomview"};F.prototype._onTimeUpdate=function(t){this._mouseDragHandler.isDragging()||this._syncPlayhead(t)};F.prototype._onPlaying=function(t){this._playheadLayer.updatePlayheadTime(t)};F.prototype._onPause=function(t){this._playheadLayer.stop(t)};F.prototype._onWindowResize=function(){var t=this,e=t._container.clientWidth;t._zoomLevelAuto?(t._resizeTimeoutId&&(clearTimeout(t._resizeTimeoutId),t._resizeTimeoutId=null),e!==0&&(t._width=e,t._stage.width(e),t._resizeTimeoutId=setTimeout(function(){t._width=e,t._data=t._originalWaveformData.resample(e),t._stage.width(e),t._updateWaveform(t._frameOffset)},500))):(t._width=e,t._stage.width(e),t._updateWaveform(t._frameOffset))};F.prototype._onKeyboardLeft=function(){this._keyboardScroll(-1,!1)};F.prototype._onKeyboardRight=function(){this._keyboardScroll(1,!1)};F.prototype._onKeyboardShiftLeft=function(){this._keyboardScroll(-1,!0)};F.prototype._onKeyboardShiftRight=function(){this._keyboardScroll(1,!0)};F.prototype._keyboardScroll=function(t,e){var i;e?i=t*this._width:i=t*this.timeToPixels(this._options.nudgeIncrement),this.scrollWaveform({pixels:i})};F.prototype.setWaveformData=function(t){this._originalWaveformData=t,this._initWaveformCache()};F.prototype.playheadPosChanged=function(t){this._playedWaveformShape&&(this._playedSegment.endTime=t,this._unplayedSegment.startTime=t,this._drawWaveformLayer())};F.prototype._syncPlayhead=function(t){if(this._playheadLayer.updatePlayheadTime(t),this._enableAutoScroll){var e=this.timeToPixels(t),i=this._frameOffset+this._width-100;(e>=i||e<this._frameOffset)&&(this._frameOffset=e-100,this._frameOffset<0&&(this._frameOffset=0),this._updateWaveform(this._frameOffset))}};F.prototype._getScale=function(t){return t*this._data.sample_rate/this._width};function pc(t){return te(t,"scale")&&t.scale==="auto"||te(t,"seconds")&&t.seconds==="auto"}F.prototype.setZoom=function(t){var e;if(pc(t)){var i=this._peaks.player.getDuration();if(!xt(i))return!1;this._zoomLevelAuto=!0,this._zoomLevelSeconds=null,e=this._getScale(i)}else{if(te(t,"scale"))this._zoomLevelSeconds=null,e=t.scale;else if(te(t,"seconds")){if(!xt(t.seconds))return!1;this._zoomLevelSeconds=t.seconds,e=this._getScale(t.seconds)}this._zoomLevelAuto=!1}e<this._originalWaveformData.scale&&(this._peaks._logger("peaks.zoomview.setZoom(): zoom level must be at least "+this._originalWaveformData.scale),e=this._originalWaveformData.scale);var r=this._peaks.player.getCurrentTime(),n,s=this._playheadLayer.getPlayheadOffset();s>=0&&s<this._width?n=r:(s=Math.floor(this._width/2),n=this.pixelOffsetToTime(s));var a=this._scale;this._resampleData({scale:e});var o=this.timeToPixels(n);return this._frameOffset=o-s,this._updateWaveform(this._frameOffset),this._playheadLayer.zoomLevelChanged(),this._playheadLayer.updatePlayheadTime(r),this._peaks.emit("zoom.update",e,a),!0};F.prototype._resampleData=function(t){var e=t.scale;if(this._enableWaveformCache){if(!this._waveformData.has(e)){for(var i=this._originalWaveformData,r=0;r<this._waveformScales.length&&this._waveformScales[r]<e;r++)i=this._waveformData.get(this._waveformScales[r]);this._waveformData.set(e,i.resample(t)),this._waveformScales.push(e),this._waveformScales.sort(function(n,s){return n-s})}this._data=this._waveformData.get(e)}else this._data=this._originalWaveformData.resample(t);this._scale=this._data.scale,this._pixelLength=this._data.length};F.prototype.getStartTime=function(){return this.pixelOffsetToTime(0)};F.prototype.getEndTime=function(){return this.pixelOffsetToTime(this._width)};F.prototype.setStartTime=function(t){t<0&&(t=0),this._zoomLevelAuto&&(t=0),this._updateWaveform(this.timeToPixels(t))};F.prototype.timeToPixels=function(t){return Math.floor(t*this._data.sample_rate/this._data.scale)};F.prototype.pixelsToTime=function(t){return t*this._data.scale/this._data.sample_rate};F.prototype.pixelOffsetToTime=function(t){var e=this._frameOffset+t;return e*this._data.scale/this._data.sample_rate};F.prototype.getFrameOffset=function(){return this._frameOffset};F.prototype.getWidth=function(){return this._width};F.prototype.getHeight=function(){return this._height};F.prototype._getDuration=function(){return this._peaks.player.getDuration()};F.prototype.setAmplitudeScale=function(t){if(!Er(t)||!Jo(t))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=t,this._drawWaveformLayer(),this._segmentsLayer.draw()};F.prototype.getAmplitudeScale=function(){return this._amplitudeScale};F.prototype.getWaveformData=function(){return this._data};F.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new ve({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var t=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:t},this._unplayedSegment={startTime:t,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new ve({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};F.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};F.prototype._createWaveform=function(){this._createWaveformShapes(),this._stage.add(this._waveformLayer),this._peaks.emit("zoomview.displaying",0,this.getEndTime())};F.prototype._createAxisLabels=function(){this._axisLayer=new be.Layer({listening:!1}),this._axis=new Lt(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};F.prototype.scrollWaveform=function(t){var e;if(te(t,"pixels"))e=Math.floor(t.pixels);else if(te(t,"seconds"))e=this.timeToPixels(t.seconds);else throw new TypeError("view.scrollWaveform(): Missing umber of pixels or seconds");this._updateWaveform(this._frameOffset+e)};F.prototype._updateWaveform=function(t){var e;this._pixelLength<this._width?(t=0,e=this._width):e=this._pixelLength-this._width,t=Xt(t,0,e),this._frameOffset=t;var i=this._playheadLayer.getPlayheadPixel();this._playheadLayer.updatePlayheadTime(this.pixelsToTime(i)),this._drawWaveformLayer(),this._axisLayer.draw();var r=this.getStartTime(),n=this.getEndTime();this._pointsLayer.updatePoints(r,n),this._segmentsLayer.updateSegments(r,n),this._peaks.emit("zoomview.displaying",r,n)};F.prototype._drawWaveformLayer=function(){this._waveformLayer.draw()};F.prototype.setWaveformColor=function(t){this._waveformColor=t,this._waveformShape.setWaveformColor(t)};F.prototype.setPlayedWaveformColor=function(t){this._playedWaveformColor=t,t?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(t)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};F.prototype.showPlayheadTime=function(t){this._playheadLayer.showPlayheadTime(t)};F.prototype.setTimeLabelPrecision=function(t){this._timeLabelPrecision=t,this._playheadLayer.updatePlayheadText()};F.prototype.formatTime=function(t){return this._formatPlayheadTime(t)};F.prototype.showAxisLabels=function(t){this._axis.showAxisLabels(t),this._axisLayer.draw()};F.prototype.enableAutoScroll=function(t){this._enableAutoScroll=t};F.prototype.enableMarkerEditing=function(t){this._segmentsLayer.enableEditing(t),this._pointsLayer.enableEditing(t)};F.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var t=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.width(this._width);var e=!1,i;if(this._zoomLevelAuto?(e=!0,i={width:this._width}):this._zoomLevelSeconds!==null&&(e=!0,i={scale:this._getScale(this._zoomLevelSeconds)}),e)try{this._resampleData(i),t=!0}catch{}}this._height=this._container.clientHeight,this._stage.height(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer.fitToView(),this._pointsLayer.fitToView(),t&&this._updateWaveform(this._frameOffset),this._stage.draw()}};F.prototype.destroy=function(){this._resizeTimeoutId&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=null),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("window_resize",this._onWindowResize),this._peaks.off("keyboard.left",this._onKeyboardLeft),this._peaks.off("keyboard.right",this._onKeyboardRight),this._peaks.off("keyboard.shift_left",this._onKeyboardShiftLeft),this._peaks.off("keyboard.shift_right",this._onKeyboardShiftRight),this._playheadLayer.destroy(),this._segmentsLayer.destroy(),this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function Zt(t){this._peaks=t,this._overview=null,this._zoomview=null}Zt.prototype.createOverview=function(t){if(this._overview)return this._overview;var e=this._peaks.getWaveformData();return this._overview=new N(e,t,this._peaks),this._zoomview&&this._overview.showHighlight(this._zoomview.getStartTime(),this._zoomview.getEndTime()),this._overview};Zt.prototype.createZoomview=function(t){if(this._zoomview)return this._zoomview;var e=this._peaks.getWaveformData();return this._zoomview=new F(e,t,this._peaks),this._zoomview};Zt.prototype.destroyOverview=function(){!this._overview||!this._zoomview||(this._overview.destroy(),this._overview=null)};Zt.prototype.destroyZoomview=function(){!this._zoomview||!this._overview||(this._zoomview.destroy(),this._zoomview=null,this._overview.removeHighlightRect())};Zt.prototype.destroy=function(){this._overview&&(this._overview.destroy(),this._overview=null),this._zoomview&&(this._zoomview.destroy(),this._zoomview=null)};Zt.prototype.getView=function(t){if(rt(t))return this._overview&&this._zoomview?null:this._overview?this._overview:this._zoomview?this._zoomview:null;switch(t){case"overview":return this._overview;case"zoomview":return this._zoomview;default:return null}};function jt(t,e){this._peaks=t,this._zoomLevels=e,this._zoomLevelIndex=0}jt.prototype.setZoomLevels=function(t){this._zoomLevels=t,this.setZoom(0,!0)};jt.prototype.zoomIn=function(){this.setZoom(this._zoomLevelIndex-1)};jt.prototype.zoomOut=function(){this.setZoom(this._zoomLevelIndex+1)};jt.prototype.setZoom=function(t,e){if(t>=this._zoomLevels.length&&(t=this._zoomLevels.length-1),t<0&&(t=0),!(!e&&t===this._zoomLevelIndex)){this._zoomLevelIndex=t;var i=this._peaks.views.getView("zoomview");!i||i.setZoom({scale:this._zoomLevels[t]})}};jt.prototype.getZoom=function(){return this._zoomLevelIndex};jt.prototype.getZoomLevel=function(){return this._zoomLevels[this._zoomLevelIndex]};var va="withCredentials"in new XMLHttpRequest;function pt(t){this._peaks=t}pt.prototype.init=function(t,e){if(t.dataUri&&(t.webAudio||t.audioContext)||t.waveformData&&(t.webAudio||t.audioContext)||t.dataUri&&t.waveformData){e(new TypeError("Peaks.init(): You may only pass one source (webAudio, dataUri, or waveformData) to render waveform data."));return}if(t.audioContext&&(this._peaks._logger("Peaks.init(): The audioContext option is deprecated, please pass a webAudio object instead"),t.webAudio={audioContext:t.audioContext}),t.dataUri)return this._getRemoteWaveformData(t,e);if(t.waveformData)return this._buildWaveformFromLocalData(t,e);if(t.webAudio)return t.webAudio.audioBuffer?this._buildWaveformDataFromAudioBuffer(t,e):this._buildWaveformDataUsingWebAudio(t,e);e(new Error("Peaks.init(): You must pass an audioContext, or dataUri, or waveformData to render waveform data"))};pt.prototype._getRemoteWaveformData=function(t,e){var i=this,r=null,n=null,s;if(pi(t.dataUri))r=t.dataUri;else if(Bt(t.dataUri))r={},r[t.dataUriDefaultFormat||"json"]=t.dataUri;else{e(new TypeError("Peaks.init(): The dataUri option must be an object"));return}if(["ArrayBuffer","JSON"].some(function(o){if(window[o])return n=o.toLowerCase(),s=r[n],Boolean(s)}),!s){e(new Error("Peaks.init(): Unable to determine a compatible dataUri format for this browser"));return}var a=i._createXHR(s,n,t.withCredentials,function(o){if(this.readyState===4){if(this.status!==200){e(new Error("Unable to fetch remote data. HTTP status "+this.status));return}var l=Ue.create(o.target.response);if(l.channels!==1&&l.channels!==2){e(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(l.bits!==8){e(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}e(null,l)}},function(){e(new Error("XHR Failed"))});a.send()};pt.prototype._buildWaveformFromLocalData=function(t,e){var i=null,r=null;if(pi(t.waveformData))i=t.waveformData;else{e(new Error("Peaks.init(): The waveformData option must be an object"));return}if(pi(i.json)?r=i.json:Ku(i.arraybuffer)&&(r=i.arraybuffer),!r){e(new Error("Peaks.init(): Unable to determine a compatible waveformData format"));return}try{var n=Ue.create(r);if(n.channels!==1&&n.channels!==2){e(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(n.bits!==8){e(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}e(null,n)}catch(s){e(s)}};pt.prototype._buildWaveformDataUsingWebAudio=function(t,e){var i=this,r=window.AudioContext||window.webkitAudioContext;if(!(t.webAudio.audioContext instanceof r)){e(new TypeError("Peaks.init(): The webAudio.audioContext option must be a valid AudioContext"));return}var n=t.webAudio;n.scale!==t.zoomLevels[0]&&(n.scale=t.zoomLevels[0]);var s=i._peaks.options.mediaElement.currentSrc;s?i._requestAudioAndBuildWaveformData(s,n,t.withCredentials,e):i._peaks.once("player.canplay",function(){i._requestAudioAndBuildWaveformData(i._peaks.options.mediaElement.currentSrc,n,t.withCredentials,e)})};pt.prototype._buildWaveformDataFromAudioBuffer=function(t,e){var i=t.webAudio;i.scale!==t.zoomLevels[0]&&(i.scale=t.zoomLevels[0]);var r={audio_buffer:i.audioBuffer,split_channels:i.multiChannel,scale:i.scale};Ue.createFromAudio(r,e)};pt.prototype._requestAudioAndBuildWaveformData=function(t,e,i,r){var n=this;if(!t){n._peaks._logger("Peaks.init(): The mediaElement src is invalid");return}var s=n._createXHR(t,"arraybuffer",i,function(a){if(this.readyState===4){if(this.status!==200){r(new Error("Unable to fetch remote data. HTTP status "+this.status));return}var o={audio_context:e.audioContext,array_buffer:a.target.response,split_channels:e.multiChannel,scale:e.scale};Ue.createFromAudio(o,r)}},function(){r(new Error("XHR Failed"))});s.send()};pt.prototype._createXHR=function(t,e,i,r,n){var s=new XMLHttpRequest;if(s.open("GET",t,!0),va)try{s.responseType=e}catch{}return s.onload=r,s.onerror=n,va&&i&&(s.withCredentials=!0),s};function $e(){return qo.call(this),this.options={zoomLevels:[512,1024,2048,4096],waveformCache:!0,mediaElement:null,mediaUrl:null,dataUri:null,dataUriDefaultFormat:"json",withCredentials:!1,waveformData:null,webAudio:null,nudgeIncrement:1,segmentStartMarkerColor:"#aaaaaa",segmentEndMarkerColor:"#aaaaaa",randomizeSegmentColor:!0,segmentColor:"#ff851b",pointMarkerColor:"#39cccc",createSegmentMarker:oc,createSegmentLabel:lc,createPointMarker:hc,logger:console.error.bind(console)},this}$e.prototype=Object.create(qo.prototype);var Ir={playheadColor:"#111111",playheadTextColor:"#aaaaaa",axisGridlineColor:"#cccccc",showAxisLabels:!0,axisLabelColor:"#aaaaaa",fontFamily:"sans-serif",fontSize:11,fontStyle:"normal",timeLabelPrecision:2},ya={playheadClickTolerance:3,waveformColor:"rgba(0, 225, 128, 1)",wheelMode:"none"},wa={waveformColor:"rgba(0, 0, 0, 0.2)",highlightColor:"#aaaaaa",highlightOffset:11};function gc(t){var e={};t.containers&&t.containers.overview&&(e.container=t.containers.overview),t.overviewWaveformColor&&(e.waveformColor=t.overviewWaveformColor),t.overviewHighlightOffset&&(e.highlightOffset=t.overviewHighlightOffset),t.overviewHighlightColor&&(e.highlightColor=t.overviewHighlightColor),t.overview&&t.overview.showPlayheadTime&&(e.showPlayheadTime=t.overview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","highlightColor","highlightOffset"];return i.forEach(function(r){t.overview&&te(t.overview,r)?e[r]=t.overview[r]:te(t,r)?e[r]=t[r]:te(wa,r)?e[r]=wa[r]:te(Ir,r)&&(e[r]=Ir[r])}),e}function _c(t){var e={};t.containers&&t.containers.zoomview&&(e.container=t.containers.zoomview),t.zoomWaveformColor&&(e.waveformColor=t.zoomWaveformColor),t.showPlayheadTime?e.showPlayheadTime=t.showPlayheadTime:t.zoomview&&t.zoomview.showPlayheadTime&&(e.showPlayheadTime=t.zoomview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","playheadClickTolerance","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","wheelMode"];return i.forEach(function(r){t.zoomview&&te(t.zoomview,r)?e[r]=t.zoomview[r]:te(t,r)?e[r]=t[r]:te(ya,r)?e[r]=ya[r]:te(Ir,r)&&(e[r]=Ir[r])}),e}function mc(t,e){for(var i in e)te(e,i)&&te(t,i)&&(t[i]=e[i]);return t}$e.init=function(t,e){var i=new $e,r=i._setOptions(t);if(r){e(r);return}var n=i.options.zoomview.container,s=i.options.overview.container;if(!ca(n)&&!ca(s)){e(new TypeError("Peaks.init(): The zoomview and/or overview container options must be valid HTML elements"));return}if(n&&n.clientWidth<=0){e(new TypeError("Peaks.init(): Please ensure that the zoomview container is visible and has non-zero width"));return}if(s&&s.clientWidth<=0){e(new TypeError("Peaks.init(): Please ensure that the overview container is visible and has non-zero width"));return}t.keyboard&&(i._keyboardHandler=new ps(i));var a=t.player?t.player:new Xe(i.options.mediaElement);i.player=new ze(i,a),i.segments=new Te(i),i.points=new De(i),i.zoom=new jt(i,i.options.zoomLevels),i.views=new Zt(i);var o=new pt(i);a.init(i).then(function(){o.init(i.options,function(l,h){if(l){e&&e(l);return}i._waveformData=h,s&&i.views.createOverview(s),n&&i.views.createZoomview(n),i._addWindowResizeHandler(),t.segments&&i.segments.add(t.segments),t.points&&i.points.add(t.points),t.emitCueEvents&&(i._cueEmitter=new qe(i)),setTimeout(function(){i.emit("peaks.ready")},0),e(null,i)})}).catch(function(l){e&&e(l)})};$e.prototype._setOptions=function(t){if(!pi(t))return new TypeError("Peaks.init(): The options parameter should be an object");if(!t.player){if(!t.mediaElement)return new Error("Peaks.init(): Missing mediaElement option");if(!(t.mediaElement instanceof HTMLMediaElement))return new TypeError("Peaks.init(): The mediaElement option should be an HTMLMediaElement")}if(t.container)return new Error("Peaks.init(): The container option has been removed, please use containers instead");if(t.logger&&!Zu(t.logger))return new TypeError("Peaks.init(): The logger option should be a function");if(t.segments&&!Array.isArray(t.segments))return new TypeError("Peaks.init(): options.segments must be an array of segment objects");if(t.points&&!Array.isArray(t.points))return new TypeError("Peaks.init(): options.points must be an array of point objects");if(mc(this.options,t),this.options.overview=gc(t),this.options.zoomview=_c(t),Array.isArray(this.options.zoomLevels)){if(this.options.zoomLevels.length===0)return new Error("Peaks.init(): The zoomLevels array must not be empty");if(!Yu(this.options.zoomLevels))return new Error("Peaks.init(): The zoomLevels array must be sorted in ascending order")}else return new TypeError("Peaks.init(): The zoomLevels option should be an array");this._logger=this.options.logger};$e.prototype.setSource=function(t,e){var i=this;this.player._setSource(t).then(function(){t.zoomLevels||(t.zoomLevels=i.options.zoomLevels);var r=new pt(i);r.init(t,function(n,s){if(n){e(n);return}i._waveformData=s,["overview","zoomview"].forEach(function(a){var o=i.views.getView(a);o&&o.setWaveformData(s)}),i.zoom.setZoomLevels(t.zoomLevels),e()})}).catch(function(r){e(r)})};$e.prototype.getWaveformData=function(){return this._waveformData};$e.prototype._addWindowResizeHandler=function(){this._onResize=this._onResize.bind(this),window.addEventListener("resize",this._onResize)};$e.prototype._onResize=function(){this.emit("window_resize")};$e.prototype._removeWindowResizeHandler=function(){window.removeEventListener("resize",this._onResize)};$e.prototype.destroy=function(){this._removeWindowResizeHandler(),this._keyboardHandler&&this._keyboardHandler.destroy(),this.views&&this.views.destroy(),this.player&&this.player.destroy(),this._cueEmitter&&this._cueEmitter.destroy()};const vc=["id"],yc=["id"],wc=["id"],bc=["src"],Cc=st("\xA0 "),Sc=st("\xA0 "),ba=Hr({__name:"AudioPeaks",props:{src:null,id:null},setup(t){const e=t,i=rn(void 0),r=rn(null),n=rn(null),s=$l(void 0);is(()=>{a()});function a(){var f;const h={containers:{overview:document.getElementById("overview-container-"+e.id),zoomview:document.getElementById("zoomview-container-"+e.id)},mediaElement:(f=document.getElementById("audio-"+e.id))!=null?f:null,webAudio:{audioContext:new AudioContext},zoomLevels:[256,512,1024,2048,4096]};$e.init(h,function(u,c){console.log(u,c),i.value=c,s.value=c==null?void 0:c.zoom.getZoom()})}function o(){var h,f;(h=i.value)==null||h.zoom.zoomIn(),s.value=(f=i.value)==null?void 0:f.zoom.getZoom()}function l(){var h,f;(h=i.value)==null||h.zoom.zoomOut(),s.value=(f=i.value)==null?void 0:f.zoom.getZoom()}return(h,f)=>(kt(),Nt(Le,null,[$("div",{id:"overview-container-"+e.id,style:{width:"100%",height:"250px"},ref:"overview"},null,8,vc),$("div",{id:"zoomview-container-"+e.id,style:{width:"100%",height:"250px"},ref:"zoomview"},null,8,yc),$("audio",{id:"audio-"+e.id,style:{width:"100%"},controls:""},[$("source",{src:t.src},null,8,bc)],8,wc),$("div",null,[$("button",{ref_key:"zoomInButton",ref:r,onClick:f[0]||(f[0]=u=>o())}," Zoom in",512),Cc,$("button",{ref_key:"zoomOutButton",ref:n,onClick:f[1]||(f[1]=u=>l())}," Zoom out",512),Sc,$("span",null,"Zoom level: "+Sa(s.value),1)])],64))}}),$t=t=>(eo("data-v-f44c554a"),t=t(),to(),t),Tc=$t(()=>$("img",{alt:"Vue logo",class:"logo",src:Rf,width:"125",height:"125"},null,-1)),xc={class:"wrapper"},Ac=$t(()=>$("h1",null,"A basic example",-1)),kc=$t(()=>$("pre",null,`<AudioPeaks src="lidija_roos-not_for_sale.mp3" />\r
      `,-1)),Ec=$t(()=>$("p",null," By default, the [AudioPeaks Vue component](https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaks.vue) template has a new audio element, with the given source URL, both panes (overview and zoom) are rendered, and their size is 100% width and 250px height. A new audio context is created and used. ",-1)),Pc=$t(()=>$("h1",null,"Another example",-1)),Ic=$t(()=>$("pre",null,`<AudioPeaks src="lidija_roos-decisions.ogg" id="someIdentifier" />\r
      `,-1)),Lc=$t(()=>$("p",null," When using more than one component (more than one Peaks.js) instance in the same HTML document, a unique id must be set. This id is applied to the panes and the the audio element, with a prefix. ",-1)),Dc=Hr({__name:"App",setup(t){return(e,i)=>(kt(),Nt(Le,null,[$("header",null,[Tc,$("div",xc,[we(Bf,{msg:"vue-peaks"})])]),$("main",null,[we(hd)]),$("section",null,[$("article",null,[Ac,kc,Ec,we(ba,{src:"lidija_roos-not_for_sale.mp3"})]),$("article",null,[Pc,Ic,Lc,we(ba,{src:"lidija_roos-decisions.ogg",id:"someIdentifier"})])])],64))}});const Mc=$i(Dc,[["__scopeId","data-v-f44c554a"]]);Mf(Mc).mount("#app");
