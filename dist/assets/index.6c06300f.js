(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function dr(t,e){const i=Object.create(null),n=t.split(",");for(let s=0;s<n.length;s++)i[n[s]]=!0;return e?s=>!!i[s.toLowerCase()]:s=>!!i[s]}const oh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lh=dr(oh);function oo(t){return!!t||t===""}function ur(t){if(j(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],s=Pe(n)?dh(n):ur(n);if(s)for(const r in s)e[r]=s[r]}return e}else{if(Pe(t))return t;if(fe(t))return t}}const hh=/;(?![^(]*\))/g,ch=/:(.+)/;function dh(t){const e={};return t.split(hh).forEach(i=>{if(i){const n=i.split(ch);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function fr(t){let e="";if(Pe(t))e=t;else if(j(t))for(let i=0;i<t.length;i++){const n=fr(t[i]);n&&(e+=n+" ")}else if(fe(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}function uh(t,e){if(t.length!==e.length)return!1;let i=!0;for(let n=0;i&&n<t.length;n++)i=fs(t[n],e[n]);return i}function fs(t,e){if(t===e)return!0;let i=jr(t),n=jr(e);if(i||n)return i&&n?t.getTime()===e.getTime():!1;if(i=hn(t),n=hn(e),i||n)return t===e;if(i=j(t),n=j(e),i||n)return i&&n?uh(t,e):!1;if(i=fe(t),n=fe(e),i||n){if(!i||!n)return!1;const s=Object.keys(t).length,r=Object.keys(e).length;if(s!==r)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!fs(t[a],e[a]))return!1}}return String(t)===String(e)}function fh(t,e){return t.findIndex(i=>fs(i,e))}const pr=t=>Pe(t)?t:t==null?"":j(t)||fe(t)&&(t.toString===co||!Q(t.toString))?JSON.stringify(t,lo,2):String(t),lo=(t,e)=>e&&e.__v_isRef?lo(t,e.value):Ei(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,s])=>(i[`${n} =>`]=s,i),{})}:gs(e)?{[`Set(${e.size})`]:[...e.values()]}:fe(e)&&!j(e)&&!uo(e)?String(e):e,de={},xi=[],rt=()=>{},ph=()=>!1,gh=/^on[^a-z]/,ps=t=>gh.test(t),gr=t=>t.startsWith("onUpdate:"),We=Object.assign,_r=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},_h=Object.prototype.hasOwnProperty,ne=(t,e)=>_h.call(t,e),j=Array.isArray,Ei=t=>bn(t)==="[object Map]",gs=t=>bn(t)==="[object Set]",jr=t=>bn(t)==="[object Date]",Q=t=>typeof t=="function",Pe=t=>typeof t=="string",hn=t=>typeof t=="symbol",fe=t=>t!==null&&typeof t=="object",ho=t=>fe(t)&&Q(t.then)&&Q(t.catch),co=Object.prototype.toString,bn=t=>co.call(t),mh=t=>bn(t).slice(8,-1),uo=t=>bn(t)==="[object Object]",mr=t=>Pe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Xn=dr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_s=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},vh=/-(\w)/g,yt=_s(t=>t.replace(vh,(e,i)=>i?i.toUpperCase():"")),yh=/\B([A-Z])/g,Ni=_s(t=>t.replace(yh,"-$1").toLowerCase()),ms=_s(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ds=_s(t=>t?`on${ms(t)}`:""),cn=(t,e)=>!Object.is(t,e),Yn=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},Qn=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},es=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Kr;const bh=()=>Kr||(Kr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let pt;class wh{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&pt&&(this.parent=pt,this.index=(pt.scopes||(pt.scopes=[])).push(this)-1)}run(e){if(this.active){const i=pt;try{return pt=this,e()}finally{pt=i}}}on(){pt=this}off(){pt=this.parent}stop(e){if(this.active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.active=!1}}}function Ch(t,e=pt){e&&e.active&&e.effects.push(t)}const vr=t=>{const e=new Set(t);return e.w=0,e.n=0,e},fo=t=>(t.w&Bt)>0,po=t=>(t.n&Bt)>0,Sh=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Bt},Th=t=>{const{deps:e}=t;if(e.length){let i=0;for(let n=0;n<e.length;n++){const s=e[n];fo(s)&&!po(s)?s.delete(t):e[i++]=s,s.w&=~Bt,s.n&=~Bt}e.length=i}},js=new WeakMap;let Ki=0,Bt=1;const Ks=30;let nt;const ni=Symbol(""),Zs=Symbol("");class yr{constructor(e,i=null,n){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Ch(this,n)}run(){if(!this.active)return this.fn();let e=nt,i=Ft;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=nt,nt=this,Ft=!0,Bt=1<<++Ki,Ki<=Ks?Sh(this):Zr(this),this.fn()}finally{Ki<=Ks&&Th(this),Bt=1<<--Ki,nt=this.parent,Ft=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){nt===this?this.deferStop=!0:this.active&&(Zr(this),this.onStop&&this.onStop(),this.active=!1)}}function Zr(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let Ft=!0;const go=[];function Hi(){go.push(Ft),Ft=!1}function Fi(){const t=go.pop();Ft=t===void 0?!0:t}function Ke(t,e,i){if(Ft&&nt){let n=js.get(t);n||js.set(t,n=new Map);let s=n.get(i);s||n.set(i,s=vr()),_o(s)}}function _o(t,e){let i=!1;Ki<=Ks?po(t)||(t.n|=Bt,i=!fo(t)):i=!t.has(nt),i&&(t.add(nt),nt.deps.push(t))}function Tt(t,e,i,n,s,r){const a=js.get(t);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(i==="length"&&j(t))a.forEach((l,h)=>{(h==="length"||h>=n)&&o.push(l)});else switch(i!==void 0&&o.push(a.get(i)),e){case"add":j(t)?mr(i)&&o.push(a.get("length")):(o.push(a.get(ni)),Ei(t)&&o.push(a.get(Zs)));break;case"delete":j(t)||(o.push(a.get(ni)),Ei(t)&&o.push(a.get(Zs)));break;case"set":Ei(t)&&o.push(a.get(ni));break}if(o.length===1)o[0]&&qs(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);qs(vr(l))}}function qs(t,e){const i=j(t)?t:[...t];for(const n of i)n.computed&&qr(n);for(const n of i)n.computed||qr(n)}function qr(t,e){(t!==nt||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const kh=dr("__proto__,__v_isRef,__isVue"),mo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(hn)),xh=br(),Eh=br(!1,!0),Ah=br(!0),Jr=Ph();function Ph(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const n=le(this);for(let r=0,a=this.length;r<a;r++)Ke(n,"get",r+"");const s=n[e](...i);return s===-1||s===!1?n[e](...i.map(le)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){Hi();const n=le(this)[e].apply(this,i);return Fi(),n}}),t}function br(t=!1,e=!1){return function(n,s,r){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&r===(t?e?Xh:Co:e?wo:bo).get(n))return n;const a=j(n);if(!t&&a&&ne(Jr,s))return Reflect.get(Jr,s,r);const o=Reflect.get(n,s,r);return(hn(s)?mo.has(s):kh(s))||(t||Ke(n,"get",s),e)?o:Ne(o)?a&&mr(s)?o:o.value:fe(o)?t?So(o):li(o):o}}const Ih=vo(),Mh=vo(!0);function vo(t=!1){return function(i,n,s,r){let a=i[n];if(Li(a)&&Ne(a)&&!Ne(s))return!1;if(!t&&(!ts(s)&&!Li(s)&&(a=le(a),s=le(s)),!j(i)&&Ne(a)&&!Ne(s)))return a.value=s,!0;const o=j(i)&&mr(n)?Number(n)<i.length:ne(i,n),l=Reflect.set(i,n,s,r);return i===le(r)&&(o?cn(s,a)&&Tt(i,"set",n,s):Tt(i,"add",n,s)),l}}function Lh(t,e){const i=ne(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&i&&Tt(t,"delete",e,void 0),n}function Rh(t,e){const i=Reflect.has(t,e);return(!hn(e)||!mo.has(e))&&Ke(t,"has",e),i}function Oh(t){return Ke(t,"iterate",j(t)?"length":ni),Reflect.ownKeys(t)}const yo={get:xh,set:Ih,deleteProperty:Lh,has:Rh,ownKeys:Oh},Dh={get:Ah,set(t,e){return!0},deleteProperty(t,e){return!0}},Nh=We({},yo,{get:Eh,set:Mh}),wr=t=>t,vs=t=>Reflect.getPrototypeOf(t);function xn(t,e,i=!1,n=!1){t=t.__v_raw;const s=le(t),r=le(e);i||(e!==r&&Ke(s,"get",e),Ke(s,"get",r));const{has:a}=vs(s),o=n?wr:i?Tr:dn;if(a.call(s,e))return o(t.get(e));if(a.call(s,r))return o(t.get(r));t!==s&&t.get(e)}function En(t,e=!1){const i=this.__v_raw,n=le(i),s=le(t);return e||(t!==s&&Ke(n,"has",t),Ke(n,"has",s)),t===s?i.has(t):i.has(t)||i.has(s)}function An(t,e=!1){return t=t.__v_raw,!e&&Ke(le(t),"iterate",ni),Reflect.get(t,"size",t)}function Qr(t){t=le(t);const e=le(this);return vs(e).has.call(e,t)||(e.add(t),Tt(e,"add",t,t)),this}function ea(t,e){e=le(e);const i=le(this),{has:n,get:s}=vs(i);let r=n.call(i,t);r||(t=le(t),r=n.call(i,t));const a=s.call(i,t);return i.set(t,e),r?cn(e,a)&&Tt(i,"set",t,e):Tt(i,"add",t,e),this}function ta(t){const e=le(this),{has:i,get:n}=vs(e);let s=i.call(e,t);s||(t=le(t),s=i.call(e,t)),n&&n.call(e,t);const r=e.delete(t);return s&&Tt(e,"delete",t,void 0),r}function ia(){const t=le(this),e=t.size!==0,i=t.clear();return e&&Tt(t,"clear",void 0,void 0),i}function Pn(t,e){return function(n,s){const r=this,a=r.__v_raw,o=le(a),l=e?wr:t?Tr:dn;return!t&&Ke(o,"iterate",ni),a.forEach((h,c)=>n.call(s,l(h),l(c),r))}}function In(t,e,i){return function(...n){const s=this.__v_raw,r=le(s),a=Ei(r),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,h=s[t](...n),c=i?wr:e?Tr:dn;return!e&&Ke(r,"iterate",l?Zs:ni),{next(){const{value:d,done:f}=h.next();return f?{value:d,done:f}:{value:o?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Rt(t){return function(...e){return t==="delete"?!1:this}}function Hh(){const t={get(r){return xn(this,r)},get size(){return An(this)},has:En,add:Qr,set:ea,delete:ta,clear:ia,forEach:Pn(!1,!1)},e={get(r){return xn(this,r,!1,!0)},get size(){return An(this)},has:En,add:Qr,set:ea,delete:ta,clear:ia,forEach:Pn(!1,!0)},i={get(r){return xn(this,r,!0)},get size(){return An(this,!0)},has(r){return En.call(this,r,!0)},add:Rt("add"),set:Rt("set"),delete:Rt("delete"),clear:Rt("clear"),forEach:Pn(!0,!1)},n={get(r){return xn(this,r,!0,!0)},get size(){return An(this,!0)},has(r){return En.call(this,r,!0)},add:Rt("add"),set:Rt("set"),delete:Rt("delete"),clear:Rt("clear"),forEach:Pn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=In(r,!1,!1),i[r]=In(r,!0,!1),e[r]=In(r,!1,!0),n[r]=In(r,!0,!0)}),[t,i,e,n]}const[Fh,Gh,Wh,Bh]=Hh();function Cr(t,e){const i=e?t?Bh:Wh:t?Gh:Fh;return(n,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(ne(i,s)&&s in n?i:n,s,r)}const zh={get:Cr(!1,!1)},Uh={get:Cr(!1,!0)},Vh={get:Cr(!0,!1)},bo=new WeakMap,wo=new WeakMap,Co=new WeakMap,Xh=new WeakMap;function Yh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $h(t){return t.__v_skip||!Object.isExtensible(t)?0:Yh(mh(t))}function li(t){return Li(t)?t:Sr(t,!1,yo,zh,bo)}function jh(t){return Sr(t,!1,Nh,Uh,wo)}function So(t){return Sr(t,!0,Dh,Vh,Co)}function Sr(t,e,i,n,s){if(!fe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const a=$h(t);if(a===0)return t;const o=new Proxy(t,a===2?n:i);return s.set(t,o),o}function Ai(t){return Li(t)?Ai(t.__v_raw):!!(t&&t.__v_isReactive)}function Li(t){return!!(t&&t.__v_isReadonly)}function ts(t){return!!(t&&t.__v_isShallow)}function To(t){return Ai(t)||Li(t)}function le(t){const e=t&&t.__v_raw;return e?le(e):t}function ko(t){return Qn(t,"__v_skip",!0),t}const dn=t=>fe(t)?li(t):t,Tr=t=>fe(t)?So(t):t;function xo(t){Ft&&nt&&(t=le(t),_o(t.dep||(t.dep=vr())))}function Eo(t,e){t=le(t),t.dep&&qs(t.dep)}function Ne(t){return!!(t&&t.__v_isRef===!0)}function Kh(t){return Ao(t,!1)}function gt(t){return Ao(t,!0)}function Ao(t,e){return Ne(t)?t:new Zh(t,e)}class Zh{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:le(e),this._value=i?e:dn(e)}get value(){return xo(this),this._value}set value(e){const i=this.__v_isShallow||ts(e)||Li(e);e=i?e:le(e),cn(e,this._rawValue)&&(this._rawValue=e,this._value=i?e:dn(e),Eo(this))}}function Po(t){return Ne(t)?t.value:t}const qh={get:(t,e,i)=>Po(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const s=t[e];return Ne(s)&&!Ne(i)?(s.value=i,!0):Reflect.set(t,e,i,n)}};function Io(t){return Ai(t)?t:new Proxy(t,qh)}var Mo;class Jh{constructor(e,i,n,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[Mo]=!1,this._dirty=!0,this.effect=new yr(e,()=>{this._dirty||(this._dirty=!0,Eo(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const e=le(this);return xo(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}Mo="__v_isReadonly";function Qh(t,e,i=!1){let n,s;const r=Q(t);return r?(n=t,s=rt):(n=t.get,s=t.set),new Jh(n,s,r||!s,i)}function Gt(t,e,i,n){let s;try{s=n?t(...n):t()}catch(r){ys(r,e,i)}return s}function at(t,e,i,n){if(Q(t)){const r=Gt(t,e,i,n);return r&&ho(r)&&r.catch(a=>{ys(a,e,i)}),r}const s=[];for(let r=0;r<t.length;r++)s.push(at(t[r],e,i,n));return s}function ys(t,e,i,n=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const a=e.proxy,o=i;for(;r;){const h=r.ec;if(h){for(let c=0;c<h.length;c++)if(h[c](t,a,o)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){Gt(l,null,10,[t,a,o]);return}}ec(t,i,s,n)}function ec(t,e,i,n=!0){console.error(t)}let un=!1,Js=!1;const De=[];let mt=0;const Pi=[];let St=null,Qt=0;const Lo=Promise.resolve();let kr=null;function tc(t){const e=kr||Lo;return t?e.then(this?t.bind(this):t):e}function ic(t){let e=mt+1,i=De.length;for(;e<i;){const n=e+i>>>1;fn(De[n])<t?e=n+1:i=n}return e}function xr(t){(!De.length||!De.includes(t,un&&t.allowRecurse?mt+1:mt))&&(t.id==null?De.push(t):De.splice(ic(t.id),0,t),Ro())}function Ro(){!un&&!Js&&(Js=!0,kr=Lo.then(Do))}function nc(t){const e=De.indexOf(t);e>mt&&De.splice(e,1)}function sc(t){j(t)?Pi.push(...t):(!St||!St.includes(t,t.allowRecurse?Qt+1:Qt))&&Pi.push(t),Ro()}function na(t,e=un?mt+1:0){for(;e<De.length;e++){const i=De[e];i&&i.pre&&(De.splice(e,1),e--,i())}}function Oo(t){if(Pi.length){const e=[...new Set(Pi)];if(Pi.length=0,St){St.push(...e);return}for(St=e,St.sort((i,n)=>fn(i)-fn(n)),Qt=0;Qt<St.length;Qt++)St[Qt]();St=null,Qt=0}}const fn=t=>t.id==null?1/0:t.id,rc=(t,e)=>{const i=fn(t)-fn(e);if(i===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function Do(t){Js=!1,un=!0,De.sort(rc);const e=rt;try{for(mt=0;mt<De.length;mt++){const i=De[mt];i&&i.active!==!1&&Gt(i,null,14)}}finally{mt=0,De.length=0,Oo(),un=!1,kr=null,(De.length||Pi.length)&&Do()}}function ac(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||de;let s=i;const r=e.startsWith("update:"),a=r&&e.slice(7);if(a&&a in n){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:d,trim:f}=n[c]||de;f&&(s=i.map(y=>y.trim())),d&&(s=i.map(es))}let o,l=n[o=Ds(e)]||n[o=Ds(yt(e))];!l&&r&&(l=n[o=Ds(Ni(e))]),l&&at(l,t,6,s);const h=n[o+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,at(h,t,6,s)}}function No(t,e,i=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const r=t.emits;let a={},o=!1;if(!Q(t)){const l=h=>{const c=No(h,e,!0);c&&(o=!0,We(a,c))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!o?(fe(t)&&n.set(t,null),null):(j(r)?r.forEach(l=>a[l]=null):We(a,r),fe(t)&&n.set(t,a),a)}function bs(t,e){return!t||!ps(e)?!1:(e=e.slice(2).replace(/Once$/,""),ne(t,e[0].toLowerCase()+e.slice(1))||ne(t,Ni(e))||ne(t,e))}let Ge=null,ws=null;function is(t){const e=Ge;return Ge=t,ws=t&&t.type.__scopeId||null,e}function Ho(t){ws=t}function Fo(){ws=null}function $e(t,e=Ge,i){if(!e||t._n)return t;const n=(...s)=>{n._d&&fa(-1);const r=is(e),a=t(...s);return is(r),n._d&&fa(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function Ns(t){const{type:e,vnode:i,proxy:n,withProxy:s,props:r,propsOptions:[a],slots:o,attrs:l,emit:h,render:c,renderCache:d,data:f,setupState:y,ctx:C,inheritAttrs:I}=t;let _,M;const T=is(t);try{if(i.shapeFlag&4){const B=s||n;_=_t(c.call(B,B,d,r,y,f,C)),M=l}else{const B=e;_=_t(B.length>1?B(r,{attrs:l,slots:o,emit:h}):B(r,null)),M=e.props?l:oc(l)}}catch(B){tn.length=0,ys(B,t,1),_=$(zt)}let H=_;if(M&&I!==!1){const B=Object.keys(M),{shapeFlag:K}=H;B.length&&K&7&&(a&&B.some(gr)&&(M=lc(M,a)),H=Ri(H,M))}return i.dirs&&(H=Ri(H),H.dirs=H.dirs?H.dirs.concat(i.dirs):i.dirs),i.transition&&(H.transition=i.transition),_=H,is(T),_}const oc=t=>{let e;for(const i in t)(i==="class"||i==="style"||ps(i))&&((e||(e={}))[i]=t[i]);return e},lc=(t,e)=>{const i={};for(const n in t)(!gr(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function hc(t,e,i){const{props:n,children:s,component:r}=t,{props:a,children:o,patchFlag:l}=e,h=r.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?sa(n,a,h):!!a;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(a[f]!==n[f]&&!bs(h,f))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?sa(n,a,h):!0:!!a;return!1}function sa(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(e[r]!==t[r]&&!bs(i,r))return!0}return!1}function cc({vnode:t,parent:e},i){for(;e&&e.subTree===t;)(t=e.vnode).el=i,e=e.parent}const dc=t=>t.__isSuspense;function uc(t,e){e&&e.pendingBranch?j(t)?e.effects.push(...t):e.effects.push(t):sc(t)}function fc(t,e){if(Ee){let i=Ee.provides;const n=Ee.parent&&Ee.parent.provides;n===i&&(i=Ee.provides=Object.create(n)),i[t]=e}}function Hs(t,e,i=!1){const n=Ee||Ge;if(n){const s=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return i&&Q(e)?e.call(n.proxy):e}}const ra={};function $n(t,e,i){return Go(t,e,i)}function Go(t,e,{immediate:i,deep:n,flush:s,onTrack:r,onTrigger:a}=de){const o=Ee;let l,h=!1,c=!1;if(Ne(t)?(l=()=>t.value,h=ts(t)):Ai(t)?(l=()=>t,n=!0):j(t)?(c=!0,h=t.some(M=>Ai(M)||ts(M)),l=()=>t.map(M=>{if(Ne(M))return M.value;if(Ai(M))return ii(M);if(Q(M))return Gt(M,o,2)})):Q(t)?e?l=()=>Gt(t,o,2):l=()=>{if(!(o&&o.isUnmounted))return d&&d(),at(t,o,3,[f])}:l=rt,e&&n){const M=l;l=()=>ii(M())}let d,f=M=>{d=_.onStop=()=>{Gt(M,o,4)}};if(gn)return f=rt,e?i&&at(e,o,3,[l(),c?[]:void 0,f]):l(),rt;let y=c?[]:ra;const C=()=>{if(!!_.active)if(e){const M=_.run();(n||h||(c?M.some((T,H)=>cn(T,y[H])):cn(M,y)))&&(d&&d(),at(e,o,3,[M,y===ra?void 0:y,f]),y=M)}else _.run()};C.allowRecurse=!!e;let I;s==="sync"?I=C:s==="post"?I=()=>ze(C,o&&o.suspense):(C.pre=!0,o&&(C.id=o.uid),I=()=>xr(C));const _=new yr(l,I);return e?i?C():y=_.run():s==="post"?ze(_.run.bind(_),o&&o.suspense):_.run(),()=>{_.stop(),o&&o.scope&&_r(o.scope.effects,_)}}function pc(t,e,i){const n=this.proxy,s=Pe(t)?t.includes(".")?Wo(n,t):()=>n[t]:t.bind(n,n);let r;Q(e)?r=e:(r=e.handler,i=e);const a=Ee;Oi(this);const o=Go(s,r.bind(n),i);return a?Oi(a):si(),o}function Wo(t,e){const i=e.split(".");return()=>{let n=t;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}function ii(t,e){if(!fe(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Ne(t))ii(t.value,e);else if(j(t))for(let i=0;i<t.length;i++)ii(t[i],e);else if(gs(t)||Ei(t))t.forEach(i=>{ii(i,e)});else if(uo(t))for(const i in t)ii(t[i],e);return t}function bt(t){return Q(t)?{setup:t,name:t.name}:t}const en=t=>!!t.type.__asyncLoader,Bo=t=>t.type.__isKeepAlive;function gc(t,e){zo(t,"a",e)}function _c(t,e){zo(t,"da",e)}function zo(t,e,i=Ee){const n=t.__wdc||(t.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Cs(e,n,i),i){let s=i.parent;for(;s&&s.parent;)Bo(s.parent.vnode)&&mc(n,e,i,s),s=s.parent}}function mc(t,e,i,n){const s=Cs(e,t,n,!0);Xo(()=>{_r(n[e],s)},i)}function Cs(t,e,i=Ee,n=!1){if(i){const s=i[t]||(i[t]=[]),r=e.__weh||(e.__weh=(...a)=>{if(i.isUnmounted)return;Hi(),Oi(i);const o=at(e,i,t,a);return si(),Fi(),o});return n?s.unshift(r):s.push(r),r}}const kt=t=>(e,i=Ee)=>(!gn||t==="sp")&&Cs(t,e,i),vc=kt("bm"),Uo=kt("m"),yc=kt("bu"),bc=kt("u"),Vo=kt("bum"),Xo=kt("um"),wc=kt("sp"),Cc=kt("rtg"),Sc=kt("rtc");function Tc(t,e=Ee){Cs("ec",t,e)}function Yo(t,e){const i=Ge;if(i===null)return t;const n=ks(i)||i.proxy,s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[a,o,l,h=de]=e[r];Q(a)&&(a={mounted:a,updated:a}),a.deep&&ii(o),s.push({dir:a,instance:n,value:o,oldValue:void 0,arg:l,modifiers:h})}return t}function Zt(t,e,i,n){const s=t.dirs,r=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];r&&(o.oldValue=r[a].value);let l=o.dir[n];l&&(Hi(),at(l,i,8,[t.el,o,t,e]),Fi())}}const $o="components";function xt(t,e){return xc($o,t,!0,e)||t}const kc=Symbol();function xc(t,e,i=!0,n=!1){const s=Ge||Ee;if(s){const r=s.type;if(t===$o){const o=td(r,!1);if(o&&(o===e||o===yt(e)||o===ms(yt(e))))return r}const a=aa(s[t]||r[t],e)||aa(s.appContext[t],e);return!a&&n?r:a}}function aa(t,e){return t&&(t[e]||t[yt(e)]||t[ms(yt(e))])}function Mn(t,e,i={},n,s){if(Ge.isCE||Ge.parent&&en(Ge.parent)&&Ge.parent.isCE)return $("slot",e==="default"?null:{name:e},n&&n());let r=t[e];r&&r._c&&(r._d=!1),me();const a=r&&jo(r(i)),o=Ss(Ue,{key:i.key||a&&a.key||`_${e}`},a||(n?n():[]),a&&t._===1?64:-2);return!s&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),r&&r._c&&(r._d=!0),o}function jo(t){return t.some(e=>rs(e)?!(e.type===zt||e.type===Ue&&!jo(e.children)):!0)?t:null}const Qs=t=>t?rl(t)?ks(t)||t.proxy:Qs(t.parent):null,ns=We(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Qs(t.parent),$root:t=>Qs(t.root),$emit:t=>t.emit,$options:t=>Er(t),$forceUpdate:t=>t.f||(t.f=()=>xr(t.update)),$nextTick:t=>t.n||(t.n=tc.bind(t.proxy)),$watch:t=>pc.bind(t)}),Ec={get({_:t},e){const{ctx:i,setupState:n,data:s,props:r,accessCache:a,type:o,appContext:l}=t;let h;if(e[0]!=="$"){const y=a[e];if(y!==void 0)switch(y){case 1:return n[e];case 2:return s[e];case 4:return i[e];case 3:return r[e]}else{if(n!==de&&ne(n,e))return a[e]=1,n[e];if(s!==de&&ne(s,e))return a[e]=2,s[e];if((h=t.propsOptions[0])&&ne(h,e))return a[e]=3,r[e];if(i!==de&&ne(i,e))return a[e]=4,i[e];er&&(a[e]=0)}}const c=ns[e];let d,f;if(c)return e==="$attrs"&&Ke(t,"get",e),c(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(i!==de&&ne(i,e))return a[e]=4,i[e];if(f=l.config.globalProperties,ne(f,e))return f[e]},set({_:t},e,i){const{data:n,setupState:s,ctx:r}=t;return s!==de&&ne(s,e)?(s[e]=i,!0):n!==de&&ne(n,e)?(n[e]=i,!0):ne(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:s,propsOptions:r}},a){let o;return!!i[a]||t!==de&&ne(t,a)||e!==de&&ne(e,a)||(o=r[0])&&ne(o,a)||ne(n,a)||ne(ns,a)||ne(s.config.globalProperties,a)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:ne(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};let er=!0;function Ac(t){const e=Er(t),i=t.proxy,n=t.ctx;er=!1,e.beforeCreate&&oa(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:a,watch:o,provide:l,inject:h,created:c,beforeMount:d,mounted:f,beforeUpdate:y,updated:C,activated:I,deactivated:_,beforeDestroy:M,beforeUnmount:T,destroyed:H,unmounted:B,render:K,renderTracked:se,renderTriggered:ge,errorCaptured:ee,serverPrefetch:ae,expose:_e,inheritAttrs:Te,components:Le,directives:xe,filters:Je}=e;if(h&&Pc(h,n,null,t.appContext.config.unwrapInjectedRef),a)for(const O in a){const G=a[O];Q(G)&&(n[O]=G.bind(i))}if(s){const O=s.call(i,i);fe(O)&&(t.data=li(O))}if(er=!0,r)for(const O in r){const G=r[O],J=Q(G)?G.bind(i,i):Q(G.get)?G.get.bind(i,i):rt,ce=!Q(G)&&Q(G.set)?G.set.bind(i):rt,we=Ti({get:J,set:ce});Object.defineProperty(n,O,{enumerable:!0,configurable:!0,get:()=>we.value,set:Re=>we.value=Re})}if(o)for(const O in o)Ko(o[O],n,i,O);if(l){const O=Q(l)?l.call(i):l;Reflect.ownKeys(O).forEach(G=>{fc(G,O[G])})}c&&oa(c,t,"c");function A(O,G){j(G)?G.forEach(J=>O(J.bind(i))):G&&O(G.bind(i))}if(A(vc,d),A(Uo,f),A(yc,y),A(bc,C),A(gc,I),A(_c,_),A(Tc,ee),A(Sc,se),A(Cc,ge),A(Vo,T),A(Xo,B),A(wc,ae),j(_e))if(_e.length){const O=t.exposed||(t.exposed={});_e.forEach(G=>{Object.defineProperty(O,G,{get:()=>i[G],set:J=>i[G]=J})})}else t.exposed||(t.exposed={});K&&t.render===rt&&(t.render=K),Te!=null&&(t.inheritAttrs=Te),Le&&(t.components=Le),xe&&(t.directives=xe)}function Pc(t,e,i=rt,n=!1){j(t)&&(t=tr(t));for(const s in t){const r=t[s];let a;fe(r)?"default"in r?a=Hs(r.from||s,r.default,!0):a=Hs(r.from||s):a=Hs(r),Ne(a)&&n?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[s]=a}}function oa(t,e,i){at(j(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function Ko(t,e,i,n){const s=n.includes(".")?Wo(i,n):()=>i[n];if(Pe(t)){const r=e[t];Q(r)&&$n(s,r)}else if(Q(t))$n(s,t.bind(i));else if(fe(t))if(j(t))t.forEach(r=>Ko(r,e,i,n));else{const r=Q(t.handler)?t.handler.bind(i):e[t.handler];Q(r)&&$n(s,r,t)}}function Er(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:a}}=t.appContext,o=r.get(e);let l;return o?l=o:!s.length&&!i&&!n?l=e:(l={},s.length&&s.forEach(h=>ss(l,h,a,!0)),ss(l,e,a)),fe(e)&&r.set(e,l),l}function ss(t,e,i,n=!1){const{mixins:s,extends:r}=e;r&&ss(t,r,i,!0),s&&s.forEach(a=>ss(t,a,i,!0));for(const a in e)if(!(n&&a==="expose")){const o=Ic[a]||i&&i[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Ic={data:la,props:Jt,emits:Jt,methods:Jt,computed:Jt,beforeCreate:Fe,created:Fe,beforeMount:Fe,mounted:Fe,beforeUpdate:Fe,updated:Fe,beforeDestroy:Fe,beforeUnmount:Fe,destroyed:Fe,unmounted:Fe,activated:Fe,deactivated:Fe,errorCaptured:Fe,serverPrefetch:Fe,components:Jt,directives:Jt,watch:Lc,provide:la,inject:Mc};function la(t,e){return e?t?function(){return We(Q(t)?t.call(this,this):t,Q(e)?e.call(this,this):e)}:e:t}function Mc(t,e){return Jt(tr(t),tr(e))}function tr(t){if(j(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Fe(t,e){return t?[...new Set([].concat(t,e))]:e}function Jt(t,e){return t?We(We(Object.create(null),t),e):e}function Lc(t,e){if(!t)return e;if(!e)return t;const i=We(Object.create(null),t);for(const n in e)i[n]=Fe(t[n],e[n]);return i}function Rc(t,e,i,n=!1){const s={},r={};Qn(r,Ts,1),t.propsDefaults=Object.create(null),Zo(t,e,s,r);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);i?t.props=n?s:jh(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function Oc(t,e,i,n){const{props:s,attrs:r,vnode:{patchFlag:a}}=t,o=le(s),[l]=t.propsOptions;let h=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(bs(t.emitsOptions,f))continue;const y=e[f];if(l)if(ne(r,f))y!==r[f]&&(r[f]=y,h=!0);else{const C=yt(f);s[C]=ir(l,o,C,y,t,!1)}else y!==r[f]&&(r[f]=y,h=!0)}}}else{Zo(t,e,s,r)&&(h=!0);let c;for(const d in o)(!e||!ne(e,d)&&((c=Ni(d))===d||!ne(e,c)))&&(l?i&&(i[d]!==void 0||i[c]!==void 0)&&(s[d]=ir(l,o,d,void 0,t,!0)):delete s[d]);if(r!==o)for(const d in r)(!e||!ne(e,d)&&!0)&&(delete r[d],h=!0)}h&&Tt(t,"set","$attrs")}function Zo(t,e,i,n){const[s,r]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Xn(l))continue;const h=e[l];let c;s&&ne(s,c=yt(l))?!r||!r.includes(c)?i[c]=h:(o||(o={}))[c]=h:bs(t.emitsOptions,l)||(!(l in n)||h!==n[l])&&(n[l]=h,a=!0)}if(r){const l=le(i),h=o||de;for(let c=0;c<r.length;c++){const d=r[c];i[d]=ir(s,l,d,h[d],t,!ne(h,d))}}return a}function ir(t,e,i,n,s,r){const a=t[i];if(a!=null){const o=ne(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&Q(l)){const{propsDefaults:h}=s;i in h?n=h[i]:(Oi(s),n=h[i]=l.call(null,e),si())}else n=l}a[0]&&(r&&!o?n=!1:a[1]&&(n===""||n===Ni(i))&&(n=!0))}return n}function qo(t,e,i=!1){const n=e.propsCache,s=n.get(t);if(s)return s;const r=t.props,a={},o=[];let l=!1;if(!Q(t)){const c=d=>{l=!0;const[f,y]=qo(d,e,!0);We(a,f),y&&o.push(...y)};!i&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!r&&!l)return fe(t)&&n.set(t,xi),xi;if(j(r))for(let c=0;c<r.length;c++){const d=yt(r[c]);ha(d)&&(a[d]=de)}else if(r)for(const c in r){const d=yt(c);if(ha(d)){const f=r[c],y=a[d]=j(f)||Q(f)?{type:f}:f;if(y){const C=ua(Boolean,y.type),I=ua(String,y.type);y[0]=C>-1,y[1]=I<0||C<I,(C>-1||ne(y,"default"))&&o.push(d)}}}const h=[a,o];return fe(t)&&n.set(t,h),h}function ha(t){return t[0]!=="$"}function ca(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function da(t,e){return ca(t)===ca(e)}function ua(t,e){return j(e)?e.findIndex(i=>da(i,t)):Q(e)&&da(e,t)?0:-1}const Jo=t=>t[0]==="_"||t==="$stable",Ar=t=>j(t)?t.map(_t):[_t(t)],Dc=(t,e,i)=>{if(e._n)return e;const n=$e((...s)=>Ar(e(...s)),i);return n._c=!1,n},Qo=(t,e,i)=>{const n=t._ctx;for(const s in t){if(Jo(s))continue;const r=t[s];if(Q(r))e[s]=Dc(s,r,n);else if(r!=null){const a=Ar(r);e[s]=()=>a}}},el=(t,e)=>{const i=Ar(e);t.slots.default=()=>i},Nc=(t,e)=>{if(t.vnode.shapeFlag&32){const i=e._;i?(t.slots=le(e),Qn(e,"_",i)):Qo(e,t.slots={})}else t.slots={},e&&el(t,e);Qn(t.slots,Ts,1)},Hc=(t,e,i)=>{const{vnode:n,slots:s}=t;let r=!0,a=de;if(n.shapeFlag&32){const o=e._;o?i&&o===1?r=!1:(We(s,e),!i&&o===1&&delete s._):(r=!e.$stable,Qo(e,s)),a=e}else e&&(el(t,e),a={default:1});if(r)for(const o in s)!Jo(o)&&!(o in a)&&delete s[o]};function tl(){return{app:null,config:{isNativeTag:ph,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Fc=0;function Gc(t,e){return function(n,s=null){Q(n)||(n=Object.assign({},n)),s!=null&&!fe(s)&&(s=null);const r=tl(),a=new Set;let o=!1;const l=r.app={_uid:Fc++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:nd,get config(){return r.config},set config(h){},use(h,...c){return a.has(h)||(h&&Q(h.install)?(a.add(h),h.install(l,...c)):Q(h)&&(a.add(h),h(l,...c))),l},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),l},component(h,c){return c?(r.components[h]=c,l):r.components[h]},directive(h,c){return c?(r.directives[h]=c,l):r.directives[h]},mount(h,c,d){if(!o){const f=$(n,s);return f.appContext=r,c&&e?e(f,h):t(f,h,d),o=!0,l._container=h,h.__vue_app__=l,ks(f.component)||f.component.proxy}},unmount(){o&&(t(null,l._container),delete l._container.__vue_app__)},provide(h,c){return r.provides[h]=c,l}};return l}}function nr(t,e,i,n,s=!1){if(j(t)){t.forEach((f,y)=>nr(f,e&&(j(e)?e[y]:e),i,n,s));return}if(en(n)&&!s)return;const r=n.shapeFlag&4?ks(n.component)||n.component.proxy:n.el,a=s?null:r,{i:o,r:l}=t,h=e&&e.r,c=o.refs===de?o.refs={}:o.refs,d=o.setupState;if(h!=null&&h!==l&&(Pe(h)?(c[h]=null,ne(d,h)&&(d[h]=null)):Ne(h)&&(h.value=null)),Q(l))Gt(l,o,12,[a,c]);else{const f=Pe(l),y=Ne(l);if(f||y){const C=()=>{if(t.f){const I=f?c[l]:l.value;s?j(I)&&_r(I,r):j(I)?I.includes(r)||I.push(r):f?(c[l]=[r],ne(d,l)&&(d[l]=c[l])):(l.value=[r],t.k&&(c[t.k]=l.value))}else f?(c[l]=a,ne(d,l)&&(d[l]=a)):y&&(l.value=a,t.k&&(c[t.k]=a))};a?(C.id=-1,ze(C,i)):C()}}}const ze=uc;function Wc(t){return Bc(t)}function Bc(t,e){const i=bh();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:a,createText:o,createComment:l,setText:h,setElementText:c,parentNode:d,nextSibling:f,setScopeId:y=rt,cloneNode:C,insertStaticContent:I}=t,_=(u,p,b,k=null,m=null,R=null,L=!1,S=null,D=!!p.dynamicChildren)=>{if(u===p)return;u&&!Vi(u,p)&&(k=yi(u),Ve(u,m,R,!0),u=null),p.patchFlag===-2&&(D=!1,p.dynamicChildren=null);const{type:E,ref:U,shapeFlag:W}=p;switch(E){case Pr:M(u,p,b,k);break;case zt:T(u,p,b,k);break;case jn:u==null&&H(p,b,k,L);break;case Ue:xe(u,p,b,k,m,R,L,S,D);break;default:W&1?se(u,p,b,k,m,R,L,S,D):W&6?Je(u,p,b,k,m,R,L,S,D):(W&64||W&128)&&E.process(u,p,b,k,m,R,L,S,D,It)}U!=null&&m&&nr(U,u&&u.ref,R,p||u,!p)},M=(u,p,b,k)=>{if(u==null)n(p.el=o(p.children),b,k);else{const m=p.el=u.el;p.children!==u.children&&h(m,p.children)}},T=(u,p,b,k)=>{u==null?n(p.el=l(p.children||""),b,k):p.el=u.el},H=(u,p,b,k)=>{[u.el,u.anchor]=I(u.children,p,b,k,u.el,u.anchor)},B=({el:u,anchor:p},b,k)=>{let m;for(;u&&u!==p;)m=f(u),n(u,b,k),u=m;n(p,b,k)},K=({el:u,anchor:p})=>{let b;for(;u&&u!==p;)b=f(u),s(u),u=b;s(p)},se=(u,p,b,k,m,R,L,S,D)=>{L=L||p.type==="svg",u==null?ge(p,b,k,m,R,L,S,D):_e(u,p,m,R,L,S,D)},ge=(u,p,b,k,m,R,L,S)=>{let D,E;const{type:U,props:W,shapeFlag:w,transition:P,patchFlag:F,dirs:V}=u;if(u.el&&C!==void 0&&F===-1)D=u.el=C(u.el);else{if(D=u.el=a(u.type,R,W&&W.is,W),w&8?c(D,u.children):w&16&&ae(u.children,D,null,k,m,R&&U!=="foreignObject",L,S),V&&Zt(u,null,k,"created"),W){for(const te in W)te!=="value"&&!Xn(te)&&r(D,te,null,W[te],R,u.children,k,m,Qe);"value"in W&&r(D,"value",null,W.value),(E=W.onVnodeBeforeMount)&&ft(E,k,u)}ee(D,u,u.scopeId,L,k)}V&&Zt(u,null,k,"beforeMount");const Z=(!m||m&&!m.pendingBranch)&&P&&!P.persisted;Z&&P.beforeEnter(D),n(D,p,b),((E=W&&W.onVnodeMounted)||Z||V)&&ze(()=>{E&&ft(E,k,u),Z&&P.enter(D),V&&Zt(u,null,k,"mounted")},m)},ee=(u,p,b,k,m)=>{if(b&&y(u,b),k)for(let R=0;R<k.length;R++)y(u,k[R]);if(m){let R=m.subTree;if(p===R){const L=m.vnode;ee(u,L,L.scopeId,L.slotScopeIds,m.parent)}}},ae=(u,p,b,k,m,R,L,S,D=0)=>{for(let E=D;E<u.length;E++){const U=u[E]=S?Dt(u[E]):_t(u[E]);_(null,U,p,b,k,m,R,L,S)}},_e=(u,p,b,k,m,R,L)=>{const S=p.el=u.el;let{patchFlag:D,dynamicChildren:E,dirs:U}=p;D|=u.patchFlag&16;const W=u.props||de,w=p.props||de;let P;b&&qt(b,!1),(P=w.onVnodeBeforeUpdate)&&ft(P,b,p,u),U&&Zt(p,u,b,"beforeUpdate"),b&&qt(b,!0);const F=m&&p.type!=="foreignObject";if(E?Te(u.dynamicChildren,E,S,b,k,F,R):L||J(u,p,S,null,b,k,F,R,!1),D>0){if(D&16)Le(S,p,W,w,b,k,m);else if(D&2&&W.class!==w.class&&r(S,"class",null,w.class,m),D&4&&r(S,"style",W.style,w.style,m),D&8){const V=p.dynamicProps;for(let Z=0;Z<V.length;Z++){const te=V[Z],Xe=W[te],Lt=w[te];(Lt!==Xe||te==="value")&&r(S,te,Xe,Lt,m,u.children,b,k,Qe)}}D&1&&u.children!==p.children&&c(S,p.children)}else!L&&E==null&&Le(S,p,W,w,b,k,m);((P=w.onVnodeUpdated)||U)&&ze(()=>{P&&ft(P,b,p,u),U&&Zt(p,u,b,"updated")},k)},Te=(u,p,b,k,m,R,L)=>{for(let S=0;S<p.length;S++){const D=u[S],E=p[S],U=D.el&&(D.type===Ue||!Vi(D,E)||D.shapeFlag&70)?d(D.el):b;_(D,E,U,null,k,m,R,L,!0)}},Le=(u,p,b,k,m,R,L)=>{if(b!==k){for(const S in k){if(Xn(S))continue;const D=k[S],E=b[S];D!==E&&S!=="value"&&r(u,S,E,D,L,p.children,m,R,Qe)}if(b!==de)for(const S in b)!Xn(S)&&!(S in k)&&r(u,S,b[S],null,L,p.children,m,R,Qe);"value"in k&&r(u,"value",b.value,k.value)}},xe=(u,p,b,k,m,R,L,S,D)=>{const E=p.el=u?u.el:o(""),U=p.anchor=u?u.anchor:o("");let{patchFlag:W,dynamicChildren:w,slotScopeIds:P}=p;P&&(S=S?S.concat(P):P),u==null?(n(E,b,k),n(U,b,k),ae(p.children,b,U,m,R,L,S,D)):W>0&&W&64&&w&&u.dynamicChildren?(Te(u.dynamicChildren,w,b,m,R,L,S),(p.key!=null||m&&p===m.subTree)&&il(u,p,!0)):J(u,p,b,U,m,R,L,S,D)},Je=(u,p,b,k,m,R,L,S,D)=>{p.slotScopeIds=S,u==null?p.shapeFlag&512?m.ctx.activate(p,b,k,L,D):ct(p,b,k,m,R,L,D):A(u,p,D)},ct=(u,p,b,k,m,R,L)=>{const S=u.component=Zc(u,k,m);if(Bo(u)&&(S.ctx.renderer=It),qc(S),S.asyncDep){if(m&&m.registerDep(S,O),!u.el){const D=S.subTree=$(zt);T(null,D,p,b)}return}O(S,u,p,b,m,R,L)},A=(u,p,b)=>{const k=p.component=u.component;if(hc(u,p,b))if(k.asyncDep&&!k.asyncResolved){G(k,p,b);return}else k.next=p,nc(k.update),k.update();else p.el=u.el,k.vnode=p},O=(u,p,b,k,m,R,L)=>{const S=()=>{if(u.isMounted){let{next:U,bu:W,u:w,parent:P,vnode:F}=u,V=U,Z;qt(u,!1),U?(U.el=F.el,G(u,U,L)):U=F,W&&Yn(W),(Z=U.props&&U.props.onVnodeBeforeUpdate)&&ft(Z,P,U,F),qt(u,!0);const te=Ns(u),Xe=u.subTree;u.subTree=te,_(Xe,te,d(Xe.el),yi(Xe),u,m,R),U.el=te.el,V===null&&cc(u,te.el),w&&ze(w,m),(Z=U.props&&U.props.onVnodeUpdated)&&ze(()=>ft(Z,P,U,F),m)}else{let U;const{el:W,props:w}=p,{bm:P,m:F,parent:V}=u,Z=en(p);if(qt(u,!1),P&&Yn(P),!Z&&(U=w&&w.onVnodeBeforeMount)&&ft(U,V,p),qt(u,!0),W&&Mt){const te=()=>{u.subTree=Ns(u),Mt(W,u.subTree,u,m,null)};Z?p.type.__asyncLoader().then(()=>!u.isUnmounted&&te()):te()}else{const te=u.subTree=Ns(u);_(null,te,b,k,u,m,R),p.el=te.el}if(F&&ze(F,m),!Z&&(U=w&&w.onVnodeMounted)){const te=p;ze(()=>ft(U,V,te),m)}(p.shapeFlag&256||V&&en(V.vnode)&&V.vnode.shapeFlag&256)&&u.a&&ze(u.a,m),u.isMounted=!0,p=b=k=null}},D=u.effect=new yr(S,()=>xr(E),u.scope),E=u.update=()=>D.run();E.id=u.uid,qt(u,!0),E()},G=(u,p,b)=>{p.component=u;const k=u.vnode.props;u.vnode=p,u.next=null,Oc(u,p.props,k,b),Hc(u,p.children,b),Hi(),na(),Fi()},J=(u,p,b,k,m,R,L,S,D=!1)=>{const E=u&&u.children,U=u?u.shapeFlag:0,W=p.children,{patchFlag:w,shapeFlag:P}=p;if(w>0){if(w&128){we(E,W,b,k,m,R,L,S,D);return}else if(w&256){ce(E,W,b,k,m,R,L,S,D);return}}P&8?(U&16&&Qe(E,m,R),W!==E&&c(b,W)):U&16?P&16?we(E,W,b,k,m,R,L,S,D):Qe(E,m,R,!0):(U&8&&c(b,""),P&16&&ae(W,b,k,m,R,L,S,D))},ce=(u,p,b,k,m,R,L,S,D)=>{u=u||xi,p=p||xi;const E=u.length,U=p.length,W=Math.min(E,U);let w;for(w=0;w<W;w++){const P=p[w]=D?Dt(p[w]):_t(p[w]);_(u[w],P,b,null,m,R,L,S,D)}E>U?Qe(u,m,R,!0,!1,W):ae(p,b,k,m,R,L,S,D,W)},we=(u,p,b,k,m,R,L,S,D)=>{let E=0;const U=p.length;let W=u.length-1,w=U-1;for(;E<=W&&E<=w;){const P=u[E],F=p[E]=D?Dt(p[E]):_t(p[E]);if(Vi(P,F))_(P,F,b,null,m,R,L,S,D);else break;E++}for(;E<=W&&E<=w;){const P=u[W],F=p[w]=D?Dt(p[w]):_t(p[w]);if(Vi(P,F))_(P,F,b,null,m,R,L,S,D);else break;W--,w--}if(E>W){if(E<=w){const P=w+1,F=P<U?p[P].el:k;for(;E<=w;)_(null,p[E]=D?Dt(p[E]):_t(p[E]),b,F,m,R,L,S,D),E++}}else if(E>w)for(;E<=W;)Ve(u[E],m,R,!0),E++;else{const P=E,F=E,V=new Map;for(E=F;E<=w;E++){const Ye=p[E]=D?Dt(p[E]):_t(p[E]);Ye.key!=null&&V.set(Ye.key,E)}let Z,te=0;const Xe=w-F+1;let Lt=!1,Xr=0;const Ui=new Array(Xe);for(E=0;E<Xe;E++)Ui[E]=0;for(E=P;E<=W;E++){const Ye=u[E];if(te>=Xe){Ve(Ye,m,R,!0);continue}let ut;if(Ye.key!=null)ut=V.get(Ye.key);else for(Z=F;Z<=w;Z++)if(Ui[Z-F]===0&&Vi(Ye,p[Z])){ut=Z;break}ut===void 0?Ve(Ye,m,R,!0):(Ui[ut-F]=E+1,ut>=Xr?Xr=ut:Lt=!0,_(Ye,p[ut],b,null,m,R,L,S,D),te++)}const Yr=Lt?zc(Ui):xi;for(Z=Yr.length-1,E=Xe-1;E>=0;E--){const Ye=F+E,ut=p[Ye],$r=Ye+1<U?p[Ye+1].el:k;Ui[E]===0?_(null,ut,b,$r,m,R,L,S,D):Lt&&(Z<0||E!==Yr[Z]?Re(ut,b,$r,2):Z--)}}},Re=(u,p,b,k,m=null)=>{const{el:R,type:L,transition:S,children:D,shapeFlag:E}=u;if(E&6){Re(u.component.subTree,p,b,k);return}if(E&128){u.suspense.move(p,b,k);return}if(E&64){L.move(u,p,b,It);return}if(L===Ue){n(R,p,b);for(let W=0;W<D.length;W++)Re(D[W],p,b,k);n(u.anchor,p,b);return}if(L===jn){B(u,p,b);return}if(k!==2&&E&1&&S)if(k===0)S.beforeEnter(R),n(R,p,b),ze(()=>S.enter(R),m);else{const{leave:W,delayLeave:w,afterLeave:P}=S,F=()=>n(R,p,b),V=()=>{W(R,()=>{F(),P&&P()})};w?w(R,F,V):V()}else n(R,p,b)},Ve=(u,p,b,k=!1,m=!1)=>{const{type:R,props:L,ref:S,children:D,dynamicChildren:E,shapeFlag:U,patchFlag:W,dirs:w}=u;if(S!=null&&nr(S,null,b,u,!0),U&256){p.ctx.deactivate(u);return}const P=U&1&&w,F=!en(u);let V;if(F&&(V=L&&L.onVnodeBeforeUnmount)&&ft(V,p,u),U&6)Tn(u.component,b,k);else{if(U&128){u.suspense.unmount(b,k);return}P&&Zt(u,null,p,"beforeUnmount"),U&64?u.type.remove(u,p,b,m,It,k):E&&(R!==Ue||W>0&&W&64)?Qe(E,p,b,!1,!0):(R===Ue&&W&384||!m&&U&16)&&Qe(D,p,b),k&&Oe(u)}(F&&(V=L&&L.onVnodeUnmounted)||P)&&ze(()=>{V&&ft(V,p,u),P&&Zt(u,null,p,"unmounted")},b)},Oe=u=>{const{type:p,el:b,anchor:k,transition:m}=u;if(p===Ue){dt(b,k);return}if(p===jn){K(u);return}const R=()=>{s(b),m&&!m.persisted&&m.afterLeave&&m.afterLeave()};if(u.shapeFlag&1&&m&&!m.persisted){const{leave:L,delayLeave:S}=m,D=()=>L(b,R);S?S(u.el,R,D):D()}else R()},dt=(u,p)=>{let b;for(;u!==p;)b=f(u),s(u),u=b;s(p)},Tn=(u,p,b)=>{const{bum:k,scope:m,update:R,subTree:L,um:S}=u;k&&Yn(k),m.stop(),R&&(R.active=!1,Ve(L,u,p,b)),S&&ze(S,p),ze(()=>{u.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&u.asyncDep&&!u.asyncResolved&&u.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Qe=(u,p,b,k=!1,m=!1,R=0)=>{for(let L=R;L<u.length;L++)Ve(u[L],p,b,k,m)},yi=u=>u.shapeFlag&6?yi(u.component.subTree):u.shapeFlag&128?u.suspense.next():f(u.anchor||u.el),kn=(u,p,b)=>{u==null?p._vnode&&Ve(p._vnode,null,null,!0):_(p._vnode||null,u,p,null,null,null,b),na(),Oo(),p._vnode=u},It={p:_,um:Ve,m:Re,r:Oe,mt:ct,mc:ae,pc:J,pbc:Te,n:yi,o:t};let zi,Mt;return e&&([zi,Mt]=e(It)),{render:kn,hydrate:zi,createApp:Gc(kn,zi)}}function qt({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function il(t,e,i=!1){const n=t.children,s=e.children;if(j(n)&&j(s))for(let r=0;r<n.length;r++){const a=n[r];let o=s[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[r]=Dt(s[r]),o.el=a.el),i||il(a,o))}}function zc(t){const e=t.slice(),i=[0];let n,s,r,a,o;const l=t.length;for(n=0;n<l;n++){const h=t[n];if(h!==0){if(s=i[i.length-1],t[s]<h){e[n]=s,i.push(n);continue}for(r=0,a=i.length-1;r<a;)o=r+a>>1,t[i[o]]<h?r=o+1:a=o;h<t[i[r]]&&(r>0&&(e[n]=i[r-1]),i[r]=n)}}for(r=i.length,a=i[r-1];r-- >0;)i[r]=a,a=e[a];return i}const Uc=t=>t.__isTeleport,Ue=Symbol(void 0),Pr=Symbol(void 0),zt=Symbol(void 0),jn=Symbol(void 0),tn=[];let st=null;function me(t=!1){tn.push(st=t?null:[])}function Vc(){tn.pop(),st=tn[tn.length-1]||null}let pn=1;function fa(t){pn+=t}function nl(t){return t.dynamicChildren=pn>0?st||xi:null,Vc(),pn>0&&st&&st.push(t),t}function Ce(t,e,i,n,s,r){return nl(g(t,e,i,n,s,r,!0))}function Ss(t,e,i,n,s){return nl($(t,e,i,n,s,!0))}function rs(t){return t?t.__v_isVNode===!0:!1}function Vi(t,e){return t.type===e.type&&t.key===e.key}const Ts="__vInternal",sl=({key:t})=>t!=null?t:null,Kn=({ref:t,ref_key:e,ref_for:i})=>t!=null?Pe(t)||Ne(t)||Q(t)?{i:Ge,r:t,k:e,f:!!i}:t:null;function g(t,e=null,i=null,n=0,s=null,r=t===Ue?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&sl(e),ref:e&&Kn(e),scopeId:ws,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null};return o?(Ir(l,i),r&128&&t.normalize(l)):i&&(l.shapeFlag|=Pe(i)?8:16),pn>0&&!a&&st&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&st.push(l),l}const $=Xc;function Xc(t,e=null,i=null,n=0,s=null,r=!1){if((!t||t===kc)&&(t=zt),rs(t)){const o=Ri(t,e,!0);return i&&Ir(o,i),pn>0&&!r&&st&&(o.shapeFlag&6?st[st.indexOf(t)]=o:st.push(o)),o.patchFlag|=-2,o}if(id(t)&&(t=t.__vccOpts),e){e=Yc(e);let{class:o,style:l}=e;o&&!Pe(o)&&(e.class=fr(o)),fe(l)&&(To(l)&&!j(l)&&(l=We({},l)),e.style=ur(l))}const a=Pe(t)?1:dc(t)?128:Uc(t)?64:fe(t)?4:Q(t)?2:0;return g(t,e,i,n,s,a,r,!0)}function Yc(t){return t?To(t)||Ts in t?We({},t):t:null}function Ri(t,e,i=!1){const{props:n,ref:s,patchFlag:r,children:a}=t,o=e?$c(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&sl(o),ref:e&&e.ref?i&&s?j(s)?s.concat(Kn(e)):[s,Kn(e)]:Kn(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ue?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ri(t.ssContent),ssFallback:t.ssFallback&&Ri(t.ssFallback),el:t.el,anchor:t.anchor}}function ye(t=" ",e=0){return $(Pr,null,t,e)}function Xt(t,e){const i=$(jn,null,t);return i.staticCount=e,i}function nn(t="",e=!1){return e?(me(),Ss(zt,null,t)):$(zt,null,t)}function _t(t){return t==null||typeof t=="boolean"?$(zt):j(t)?$(Ue,null,t.slice()):typeof t=="object"?Dt(t):$(Pr,null,String(t))}function Dt(t){return t.el===null||t.memo?t:Ri(t)}function Ir(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(j(e))i=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),Ir(t,s()),s._c&&(s._d=!0));return}else{i=32;const s=e._;!s&&!(Ts in e)?e._ctx=Ge:s===3&&Ge&&(Ge.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Q(e)?(e={default:e,_ctx:Ge},i=32):(e=String(e),n&64?(i=16,e=[ye(e)]):i=8);t.children=e,t.shapeFlag|=i}function $c(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=fr([e.class,n.class]));else if(s==="style")e.style=ur([e.style,n.style]);else if(ps(s)){const r=e[s],a=n[s];a&&r!==a&&!(j(r)&&r.includes(a))&&(e[s]=r?[].concat(r,a):a)}else s!==""&&(e[s]=n[s])}return e}function ft(t,e,i,n=null){at(t,e,7,[i,n])}const jc=tl();let Kc=0;function Zc(t,e,i){const n=t.type,s=(e?e.appContext:t.appContext)||jc,r={uid:Kc++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new wh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qo(n,s),emitsOptions:No(n,s),emit:null,emitted:null,propsDefaults:de,inheritAttrs:n.inheritAttrs,ctx:de,data:de,props:de,attrs:de,slots:de,refs:de,setupState:de,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=ac.bind(null,r),t.ce&&t.ce(r),r}let Ee=null;const Oi=t=>{Ee=t,t.scope.on()},si=()=>{Ee&&Ee.scope.off(),Ee=null};function rl(t){return t.vnode.shapeFlag&4}let gn=!1;function qc(t,e=!1){gn=e;const{props:i,children:n}=t.vnode,s=rl(t);Rc(t,i,s,e),Nc(t,n);const r=s?Jc(t,e):void 0;return gn=!1,r}function Jc(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=ko(new Proxy(t.ctx,Ec));const{setup:n}=i;if(n){const s=t.setupContext=n.length>1?ed(t):null;Oi(t),Hi();const r=Gt(n,t,0,[t.props,s]);if(Fi(),si(),ho(r)){if(r.then(si,si),e)return r.then(a=>{pa(t,a,e)}).catch(a=>{ys(a,t,0)});t.asyncDep=r}else pa(t,r,e)}else al(t,e)}function pa(t,e,i){Q(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:fe(e)&&(t.setupState=Io(e)),al(t,i)}let ga;function al(t,e,i){const n=t.type;if(!t.render){if(!e&&ga&&!n.render){const s=n.template||Er(t).template;if(s){const{isCustomElement:r,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,h=We(We({isCustomElement:r,delimiters:o},a),l);n.render=ga(s,h)}}t.render=n.render||rt}Oi(t),Hi(),Ac(t),Fi(),si()}function Qc(t){return new Proxy(t.attrs,{get(e,i){return Ke(t,"get","$attrs"),e[i]}})}function ed(t){const e=n=>{t.exposed=n||{}};let i;return{get attrs(){return i||(i=Qc(t))},slots:t.slots,emit:t.emit,expose:e}}function ks(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Io(ko(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in ns)return ns[i](t)}}))}function td(t,e=!0){return Q(t)?t.displayName||t.name:t.name||e&&t.__name}function id(t){return Q(t)&&"__vccOpts"in t}const Ti=(t,e)=>Qh(t,e,gn);function _a(t,e,i){const n=arguments.length;return n===2?fe(e)&&!j(e)?rs(e)?$(t,null,[e]):$(t,e):$(t,null,e):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&rs(i)&&(i=[i]),$(t,e,i))}const nd="3.2.39",sd="http://www.w3.org/2000/svg",ei=typeof document<"u"?document:null,ma=ei&&ei.createElement("template"),rd={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const s=e?ei.createElementNS(sd,t):ei.createElement(t,i?{is:i}:void 0);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>ei.createTextNode(t),createComment:t=>ei.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ei.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,i,n,s,r){const a=i?i.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{ma.innerHTML=n?`<svg>${t}</svg>`:t;const o=ma.content;if(n){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,i)}return[a?a.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function ad(t,e,i){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}function od(t,e,i){const n=t.style,s=Pe(i);if(i&&!s){for(const r in i)sr(n,r,i[r]);if(e&&!Pe(e))for(const r in e)i[r]==null&&sr(n,r,"")}else{const r=n.display;s?e!==i&&(n.cssText=i):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=r)}}const va=/\s*!important$/;function sr(t,e,i){if(j(i))i.forEach(n=>sr(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=ld(t,e);va.test(i)?t.setProperty(Ni(n),i.replace(va,""),"important"):t[n]=i}}const ya=["Webkit","Moz","ms"],Fs={};function ld(t,e){const i=Fs[e];if(i)return i;let n=yt(e);if(n!=="filter"&&n in t)return Fs[e]=n;n=ms(n);for(let s=0;s<ya.length;s++){const r=ya[s]+n;if(r in t)return Fs[e]=r}return e}const ba="http://www.w3.org/1999/xlink";function hd(t,e,i,n,s){if(n&&e.startsWith("xlink:"))i==null?t.removeAttributeNS(ba,e.slice(6,e.length)):t.setAttributeNS(ba,e,i);else{const r=lh(e);i==null||r&&!oo(i)?t.removeAttribute(e):t.setAttribute(e,r?"":i)}}function cd(t,e,i,n,s,r,a){if(e==="innerHTML"||e==="textContent"){n&&a(n,s,r),t[e]=i==null?"":i;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=i;const l=i==null?"":i;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),i==null&&t.removeAttribute(e);return}let o=!1;if(i===""||i==null){const l=typeof t[e];l==="boolean"?i=oo(i):i==null&&l==="string"?(i="",o=!0):l==="number"&&(i=0,o=!0)}try{t[e]=i}catch{}o&&t.removeAttribute(e)}const[ol,dd]=(()=>{let t=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const i=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(i&&Number(i[1])<=53)}return[t,e]})();let rr=0;const ud=Promise.resolve(),fd=()=>{rr=0},pd=()=>rr||(ud.then(fd),rr=ol());function ti(t,e,i,n){t.addEventListener(e,i,n)}function gd(t,e,i,n){t.removeEventListener(e,i,n)}function _d(t,e,i,n,s=null){const r=t._vei||(t._vei={}),a=r[e];if(n&&a)a.value=n;else{const[o,l]=md(e);if(n){const h=r[e]=vd(n,s);ti(t,o,h,l)}else a&&(gd(t,o,a,l),r[e]=void 0)}}const wa=/(?:Once|Passive|Capture)$/;function md(t){let e;if(wa.test(t)){e={};let n;for(;n=t.match(wa);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ni(t.slice(2)),e]}function vd(t,e){const i=n=>{const s=n.timeStamp||ol();(dd||s>=i.attached-1)&&at(yd(n,i.value),e,5,[n])};return i.value=t,i.attached=pd(),i}function yd(t,e){if(j(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const Ca=/^on[a-z]/,bd=(t,e,i,n,s=!1,r,a,o,l)=>{e==="class"?ad(t,n,s):e==="style"?od(t,i,n):ps(e)?gr(e)||_d(t,e,i,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):wd(t,e,n,s))?cd(t,e,n,r,a,o,l):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),hd(t,e,n,s))};function wd(t,e,i,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&Ca.test(e)&&Q(i)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Ca.test(e)&&Pe(i)?!1:e in t}const as=t=>{const e=t.props["onUpdate:modelValue"]||!1;return j(e)?i=>Yn(e,i):e};function Cd(t){t.target.composing=!0}function Sa(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Sd={created(t,{modifiers:{lazy:e,trim:i,number:n}},s){t._assign=as(s);const r=n||s.props&&s.props.type==="number";ti(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;i&&(o=o.trim()),r&&(o=es(o)),t._assign(o)}),i&&ti(t,"change",()=>{t.value=t.value.trim()}),e||(ti(t,"compositionstart",Cd),ti(t,"compositionend",Sa),ti(t,"change",Sa))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:i,trim:n,number:s}},r){if(t._assign=as(r),t.composing||document.activeElement===t&&t.type!=="range"&&(i||n&&t.value.trim()===e||(s||t.type==="number")&&es(t.value)===e))return;const a=e==null?"":e;t.value!==a&&(t.value=a)}},Td={deep:!0,created(t,{value:e,modifiers:{number:i}},n){const s=gs(e);ti(t,"change",()=>{const r=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>i?es(os(a)):os(a));t._assign(t.multiple?s?new Set(r):r:r[0])}),t._assign=as(n)},mounted(t,{value:e}){Ta(t,e)},beforeUpdate(t,e,i){t._assign=as(i)},updated(t,{value:e}){Ta(t,e)}};function Ta(t,e){const i=t.multiple;if(!(i&&!j(e)&&!gs(e))){for(let n=0,s=t.options.length;n<s;n++){const r=t.options[n],a=os(r);if(i)j(e)?r.selected=fh(e,a)>-1:r.selected=e.has(a);else if(fs(os(r),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function os(t){return"_value"in t?t._value:t.value}const kd=We({patchProp:bd},rd);let ka;function xd(){return ka||(ka=Wc(kd))}const Ed=(...t)=>{const e=xd().createApp(...t),{mount:i}=e;return e.mount=n=>{const s=Ad(n);if(!s)return;const r=e._component;!Q(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const a=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function Ad(t){return Pe(t)?document.querySelector(t):t}const Pd="/vue-peaks/assets/peaks-logo.72e98b64.svg",hi=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i},Id={},Md={class:"columns"},Ld=g("div",{class:"column"},[g("p",null,[ye(" Each pane (overview, zoomview, audio, controls) has "),g("b",null," a dedicated CSS class"),ye(" which you can use to select for your styles. Note however, that you can not style the waveforms themselves this way. ")]),g("p",null," The following selectors are available: ")],-1),Rd={class:"column"};function Od(t,e){const i=xt("highlightjs");return me(),Ce("div",Md,[Ld,g("div",Rd,[$(i,{language:"css",code:`div.peaks-overview { 
    /* The div with the overview waveform */ }
div.peaks-zoomview { 
    /* The div with the zoom waveform */ }
div.peaks-controls { 
    /* The div with the zoom controls */ }
audio.peaks-audio { 
    /* The audio control, when provided by vue-peaks 
       (in the 'simple' mode) */ }`})])])}const Dd=hi(Id,[["render",Od]]);var Nd=Math.PI/180;function Hd(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Ii=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Y={_global:Ii,version:"8.3.12",isBrowser:Hd(),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle(t){return Y.angleDeg?t*Nd:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Y.DD.isDragging},isDragReady(){return!!Y.DD.node},document:Ii.document,_injectGlobal(t){Ii.Konva=t}},Yt=t=>{Y[t.prototype.getClassName()]=t};Y._injectGlobal(Y);class Nt{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Nt(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var i=this.m;return{x:i[0]*e.x+i[2]*e.y+i[4],y:i[1]*e.x+i[3]*e.y+i[5]}}translate(e,i){return this.m[4]+=this.m[0]*e+this.m[2]*i,this.m[5]+=this.m[1]*e+this.m[3]*i,this}scale(e,i){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=i,this.m[3]*=i,this}rotate(e){var i=Math.cos(e),n=Math.sin(e),s=this.m[0]*i+this.m[2]*n,r=this.m[1]*i+this.m[3]*n,a=this.m[0]*-n+this.m[2]*i,o=this.m[1]*-n+this.m[3]*i;return this.m[0]=s,this.m[1]=r,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,i){var n=this.m[0]+this.m[2]*i,s=this.m[1]+this.m[3]*i,r=this.m[2]+this.m[0]*e,a=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=s,this.m[2]=r,this.m[3]=a,this}multiply(e){var i=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],s=this.m[0]*e.m[2]+this.m[2]*e.m[3],r=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=i,this.m[1]=n,this.m[2]=s,this.m[3]=r,this.m[4]=a,this.m[5]=o,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*e,n=-this.m[1]*e,s=-this.m[2]*e,r=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=n,this.m[2]=s,this.m[3]=r,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}decompose(){var e=this.m[0],i=this.m[1],n=this.m[2],s=this.m[3],r=this.m[4],a=this.m[5],o=e*s-i*n;let l={x:r,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||i!=0){var h=Math.sqrt(e*e+i*i);l.rotation=i>0?Math.acos(e/h):-Math.acos(e/h),l.scaleX=h,l.scaleY=o/h,l.skewX=(e*n+i*s)/o,l.skewY=0}else if(n!=0||s!=0){var c=Math.sqrt(n*n+s*s);l.rotation=Math.PI/2-(s>0?Math.acos(-n/c):-Math.acos(n/c)),l.scaleX=o/c,l.scaleY=c,l.skewX=0,l.skewY=(e*n+i*s)/o}return l.rotation=v._getRotation(l.rotation),l}}var Fd="[object Array]",Gd="[object Number]",Wd="[object String]",Bd="[object Boolean]",zd=Math.PI/180,Ud=180/Math.PI,Gs="#",Vd="",Xd="0",Yd="Konva warning: ",xa="Konva error: ",$d="rgb(",Ws={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},jd=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Ln=[];const Kd=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)},v={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===Fd},_isNumber(t){return Object.prototype.toString.call(t)===Gd&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===Wd},_isBoolean(t){return Object.prototype.toString.call(t)===Bd},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;var e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){Ln.push(t),Ln.length===1&&Kd(function(){const e=Ln;Ln=[],e.forEach(function(i){i()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var i=v.createImageElement();i.onload=function(){e(i)},i.src=t},_rgbToHex(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb(t){t=t.replace(Gs,Vd);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var t=(Math.random()*16777215<<0).toString(16);t.length<6;)t=Xd+t;return Gs+t},getRGB(t){var e;return t in Ws?(e=Ws[t],{r:e[0],g:e[1],b:e[2]}):t[0]===Gs?this._hexToRgb(t.substring(1)):t.substr(0,4)===$d?(e=jd.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",v._namedColorToRBA(t)||v._hex3ColorToRGBA(t)||v._hex6ColorToRGBA(t)||v._rgbColorToRGBA(t)||v._rgbaColorToRGBA(t)||v._hslColorToRGBA(t)},_namedColorToRBA(t){var e=Ws[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map((i,n)=>i.slice(-1)==="%"?n===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),n=Number(i[0])/360,s=Number(i[1])/100,r=Number(i[2])/100;let a,o,l;if(s===0)return l=r*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};r<.5?a=r*(1+s):a=r+s-r*s;const h=2*r-a,c=[0,0,0];for(let d=0;d<3;d++)o=n+1/3*-(d-1),o<0&&o++,o>1&&o--,6*o<1?l=h+(a-h)*6*o:2*o<1?l=a:3*o<2?l=h+(a-h)*(2/3-o)*6:l=h,c[d]=l*255;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){var e={};for(var i in t)this._isPlainObject(t[i])?e[i]=this.cloneObject(t[i]):this._isArray(t[i])?e[i]=this.cloneArray(t[i]):e[i]=t[i];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*zd},radToDeg(t){return t*Ud},_degToRad(t){return v.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),v.degToRad(t)},_radToDeg(t){return v.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),v.radToDeg(t)},_getRotation(t){return Y.angleDeg?v.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(xa+t)},error(t){console.error(xa+t)},warn(t){!Y.showWarnings||console.warn(Yd+t)},each(t,e){for(var i in t)e(i,t[i])},_inRange(t,e,i){return e<=t&&t<i},_getProjectionToSegment(t,e,i,n,s,r){var a,o,l,h=(t-i)*(t-i)+(e-n)*(e-n);if(h==0)a=t,o=e,l=(s-i)*(s-i)+(r-n)*(r-n);else{var c=((s-t)*(i-t)+(r-e)*(n-e))/h;c<0?(a=t,o=e,l=(t-s)*(t-s)+(e-r)*(e-r)):c>1?(a=i,o=n,l=(i-s)*(i-s)+(n-r)*(n-r)):(a=t+c*(i-t),o=e+c*(n-e),l=(a-s)*(a-s)+(o-r)*(o-r))}return[a,o,l]},_getProjectionToLine(t,e,i){var n=v.cloneObject(t),s=Number.MAX_VALUE;return e.forEach(function(r,a){if(!(!i&&a===e.length-1)){var o=e[(a+1)%e.length],l=v._getProjectionToSegment(r.x,r.y,o.x,o.y,t.x,t.y),h=l[0],c=l[1],d=l[2];d<s&&(n.x=h,n.y=c,s=d)}}),n},_prepareArrayForTween(t,e,i){var n,s=[],r=[];if(t.length>e.length){var a=e;e=t,t=a}for(n=0;n<t.length;n+=2)s.push({x:t[n],y:t[n+1]});for(n=0;n<e.length;n+=2)r.push({x:e[n],y:e[n+1]});var o=[];return r.forEach(function(l){var h=v._getProjectionToLine(l,s,i);o.push(h.x),o.push(h.y)}),o},_prepareToStringify(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var i in t)if(!!(t.hasOwnProperty(i)&&t[i]&&typeof t[i]=="object")){if(e=Object.getOwnPropertyDescriptor(t,i),t[i].visitedByCircularReferenceRemoval||v._isElement(t[i]))if(e.configurable)delete t[i];else return null;else if(v._prepareToStringify(t[i])===null)if(e.configurable)delete t[i];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var i in e)t[i]=e[i];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999}};function $t(t){return v._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||v._isBoolean(t)?t:Object.prototype.toString.call(t)}function ie(){if(Y.isUnminified)return function(t,e){return v._isNumber(t)||v.warn($t(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function Zd(t){if(Y.isUnminified)return function(e,i){let n=v._isNumber(e),s=v._isArray(e)&&e.length==t;return!n&&!s&&v.warn($t(e)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function Mr(){if(Y.isUnminified)return function(t,e){var i=v._isNumber(t),n=t==="auto";return i||n||v.warn($t(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function Gi(){if(Y.isUnminified)return function(t,e){return v._isString(t)||v.warn($t(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function ll(){if(Y.isUnminified)return function(t,e){const i=v._isString(t),n=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return i||n||v.warn($t(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function qd(){if(Y.isUnminified)return function(t,e){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&t instanceof i||(v._isArray(t)?t.forEach(function(n){v._isNumber(n)||v.warn('"'+e+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):v.warn($t(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function Et(){if(Y.isUnminified)return function(t,e){var i=t===!0||t===!1;return i||v.warn($t(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function Jd(t){if(Y.isUnminified)return function(e,i){return e==null||v.isObject(e)||v.warn($t(e)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+t),e}}var Xi="get",Yi="set";const x={addGetterSetter(t,e,i,n,s){x.addGetter(t,e,i),x.addSetter(t,e,n,s),x.addOverloadedGetterSetter(t,e)},addGetter(t,e,i){var n=Xi+v._capitalize(e);t.prototype[n]=t.prototype[n]||function(){var s=this.attrs[e];return s===void 0?i:s}},addSetter(t,e,i,n){var s=Yi+v._capitalize(e);t.prototype[s]||x.overWriteSetter(t,e,i,n)},overWriteSetter(t,e,i,n){var s=Yi+v._capitalize(e);t.prototype[s]=function(r){return i&&r!==void 0&&r!==null&&(r=i.call(this,r,e)),this._setAttr(e,r),n&&n.call(this),this}},addComponentsGetterSetter(t,e,i,n,s){var r=i.length,a=v._capitalize,o=Xi+a(e),l=Yi+a(e),h,c;t.prototype[o]=function(){var f={};for(h=0;h<r;h++)c=i[h],f[c]=this.getAttr(e+a(c));return f};var d=Jd(i);t.prototype[l]=function(f){var y=this.attrs[e],C;n&&(f=n.call(this,f)),d&&d.call(this,f,e);for(C in f)!f.hasOwnProperty(C)||this._setAttr(e+a(C),f[C]);return f||i.forEach(I=>{this._setAttr(e+a(I),void 0)}),this._fireChangeEvent(e,y,f),s&&s.call(this),this},x.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var i=v._capitalize(e),n=Yi+i,s=Xi+i;t.prototype[e]=function(){return arguments.length?(this[n](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(t,e,i,n){v.error("Adding deprecated "+e);var s=Xi+v._capitalize(e),r=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[s]=function(){v.error(r);var a=this.attrs[e];return a===void 0?i:a},x.addSetter(t,e,n,function(){v.error(r)}),x.addOverloadedGetterSetter(t,e)},backCompat(t,e){v.each(e,function(i,n){var s=t.prototype[n],r=Xi+v._capitalize(i),a=Yi+v._capitalize(i);function o(){s.apply(this,arguments),v.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[i]=o,t.prototype[r]=o,t.prototype[a]=o})},afterSetFilter(){this._filterUpToDate=!1}};function Qd(t){var e=[],i=t.length,n=v,s,r;for(s=0;s<i;s++)r=t[s],n._isNumber(r)?r=Math.round(r*1e3)/1e3:n._isString(r)||(r=r+""),e.push(r);return e}var Ea=",",eu="(",tu=")",iu="([",nu="])",su=";",ru="()",au="=",Aa=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],ou=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const lu=100;class xs{constructor(e){this.canvas=e,this._context=e._canvas.getContext("2d"),Y.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,i){var n=this.traceArr,s=n.length,r="",a,o,l,h;for(a=0;a<s;a++)o=n[a],l=o.method,l?(h=o.args,r+=l,e?r+=ru:v._isArray(h[0])?r+=iu+h.join(Ea)+nu:(i&&(h=h.map(c=>typeof c=="number"?Math.floor(c):c)),r+=eu+h.join(Ea)+tu)):(r+=o.property,e||(r+=au+o.val)),r+=su;return r}clearTrace(){this.traceArr=[]}_trace(e){var i=this.traceArr,n;i.push(e),n=i.length,n>=lu&&i.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var i=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(e){var i=e.getLineCap();i&&this.setAttr("lineCap",i)}_applyOpacity(e){var i=e.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(e){var i=e.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(e,i){this._context[e]=i}arc(e,i,n,s,r,a){this._context.arc(e,i,n,s,r,a)}arcTo(e,i,n,s,r){this._context.arcTo(e,i,n,s,r)}beginPath(){this._context.beginPath()}bezierCurveTo(e,i,n,s,r,a){this._context.bezierCurveTo(e,i,n,s,r,a)}clearRect(e,i,n,s){this._context.clearRect(e,i,n,s)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,i){var n=arguments;if(n.length===2)return this._context.createImageData(e,i);if(n.length===1)return this._context.createImageData(e)}createLinearGradient(e,i,n,s){return this._context.createLinearGradient(e,i,n,s)}createPattern(e,i){return this._context.createPattern(e,i)}createRadialGradient(e,i,n,s,r,a){return this._context.createRadialGradient(e,i,n,s,r,a)}drawImage(e,i,n,s,r,a,o,l,h){var c=arguments,d=this._context;c.length===3?d.drawImage(e,i,n):c.length===5?d.drawImage(e,i,n,s,r):c.length===9&&d.drawImage(e,i,n,s,r,a,o,l,h)}ellipse(e,i,n,s,r,a,o,l){this._context.ellipse(e,i,n,s,r,a,o,l)}isPointInPath(e,i){return this._context.isPointInPath(e,i)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,i,n,s){this._context.fillRect(e,i,n,s)}strokeRect(e,i,n,s){this._context.strokeRect(e,i,n,s)}fillText(e,i,n,s){s?this._context.fillText(e,i,n,s):this._context.fillText(e,i,n)}measureText(e){return this._context.measureText(e)}getImageData(e,i,n,s){return this._context.getImageData(e,i,n,s)}lineTo(e,i){this._context.lineTo(e,i)}moveTo(e,i){this._context.moveTo(e,i)}rect(e,i,n,s){this._context.rect(e,i,n,s)}putImageData(e,i,n){this._context.putImageData(e,i,n)}quadraticCurveTo(e,i,n,s){this._context.quadraticCurveTo(e,i,n,s)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,i){this._context.scale(e,i)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,i,n,s,r,a){this._context.setTransform(e,i,n,s,r,a)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,i,n,s){this._context.strokeText(e,i,n,s)}transform(e,i,n,s,r,a){this._context.transform(e,i,n,s,r,a)}translate(e,i){this._context.translate(e,i)}_enableTrace(){var e=this,i=Aa.length,n=this.setAttr,s,r,a=function(o){var l=e[o],h;e[o]=function(){return r=Qd(Array.prototype.slice.call(arguments,0)),h=l.apply(e,arguments),e._trace({method:o,args:r}),h}};for(s=0;s<i;s++)a(Aa[s]);e.setAttr=function(){n.apply(e,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:o,val:l})}}_applyGlobalCompositeOperation(e){const i=e.attrs.globalCompositeOperation;var n=!i||i==="source-over";n||this.setAttr("globalCompositeOperation",i)}}ou.forEach(function(t){Object.defineProperty(xs.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class hu extends xs{_fillColor(e){var i=e.fill();this.setAttr("fillStyle",i),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var i=e._getLinearGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fillRadialGradient(e){var i=e._getRadialGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fill(e){var i=e.fill(),n=e.getFillPriority();if(i&&n==="color"){this._fillColor(e);return}var s=e.getFillPatternImage();if(s&&n==="pattern"){this._fillPattern(e);return}var r=e.getFillLinearGradientColorStops();if(r&&n==="linear-gradient"){this._fillLinearGradient(e);return}var a=e.getFillRadialGradientColorStops();if(a&&n==="radial-gradient"){this._fillRadialGradient(e);return}i?this._fillColor(e):s?this._fillPattern(e):r?this._fillLinearGradient(e):a&&this._fillRadialGradient(e)}_strokeLinearGradient(e){var i=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),s=e.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(i.x,i.y,n.x,n.y);if(s){for(var a=0;a<s.length;a+=2)r.addColorStop(s[a],s[a+1]);this.setAttr("strokeStyle",r)}}_stroke(e){var i=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();var s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),i&&e.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var r=e.getStrokeLinearGradientColorStops();r?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var i,n,s,r=(i=e.getShadowRGBA())!==null&&i!==void 0?i:"black",a=(n=e.getShadowBlur())!==null&&n!==void 0?n:5,o=(s=e.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},l=e.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=l.x*h,d=l.y*h;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",a*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*d)}}class cu extends xs{_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){var i=e.getStrokeScaleEnabled();if(!i){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var s=e.hitStrokeWidth(),r=s==="auto"?e.strokeWidth():s;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}}var Rn;function du(){if(Rn)return Rn;var t=v.createCanvasElement(),e=t.getContext("2d");return Rn=function(){var i=Y._global.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/n}(),Rn}class Es{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var i=e||{},n=i.pixelRatio||Y.pixelRatio||du();this.pixelRatio=n,this._canvas=v.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var i=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var i=this.pixelRatio,n=this.getContext()._context;n.scale(i,i)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var i=this.pixelRatio,n=this.getContext()._context;n.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,i){this.setWidth(e||0),this.setHeight(i||0)}toDataURL(e,i){try{return this._canvas.toDataURL(e,i)}catch{try{return this._canvas.toDataURL()}catch(s){return v.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}x.addGetterSetter(Es,"pixelRatio",void 0,ie());class Mi extends Es{constructor(e={width:0,height:0}){super(e),this.context=new hu(this),this.setSize(e.width,e.height)}}class Lr extends Es{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new cu(this),this.setSize(e.width,e.height)}}const re={get isDragging(){var t=!1;return re._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return re._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const e=[];re._dragElements.forEach((i,n)=>{const{node:s}=i,r=s.getStage();r.setPointersPositions(t),i.pointerId===void 0&&(i.pointerId=v._getFirstPointerId(t));const a=r._changedPointerPositions.find(h=>h.id===i.pointerId);if(!!a){if(i.dragStatus!=="dragging"){var o=s.dragDistance(),l=Math.max(Math.abs(a.x-i.startPointerPos.x),Math.abs(a.y-i.startPointerPos.y));if(l<o||(s.startDrag({evt:t}),!s.isDragging()))return}s._setDragPosition(t,i),e.push(s)}}),e.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:t},!0)})},_endDragBefore(t){const e=[];re._dragElements.forEach(i=>{const{node:n}=i,s=n.getStage();if(t&&s.setPointersPositions(t),!s._changedPointerPositions.find(o=>o.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(re.justDragged=!0,Y._mouseListenClick=!1,Y._touchListenClick=!1,Y._pointerListenClick=!1,i.dragStatus="stopped");const a=i.node.getLayer()||i.node instanceof Y.Stage&&i.node;a&&e.indexOf(a)===-1&&e.push(a)}),e.forEach(i=>{i.draw()})},_endDragAfter(t){re._dragElements.forEach((e,i)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&re._dragElements.delete(i)})}};Y.isBrowser&&(window.addEventListener("mouseup",re._endDragBefore,!0),window.addEventListener("touchend",re._endDragBefore,!0),window.addEventListener("mousemove",re._drag),window.addEventListener("touchmove",re._drag),window.addEventListener("mouseup",re._endDragAfter,!1),window.addEventListener("touchend",re._endDragAfter,!1));var Zn="absoluteOpacity",On="allEventListeners",Ct="absoluteTransform",Pa="absoluteScale",$i="canvas",uu="Change",fu="children",pu="konva",ar="listening",Ia="mouseenter",Ma="mouseleave",La="set",Ra="Shape",qn=" ",Oa="stage",Ot="transform",gu="Stage",or="visible",_u=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(qn);let mu=1;class z{constructor(e){this._id=mu++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Ot||e===Ct)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,i){var n=this._cache.get(e),s=e===Ot||e===Ct,r=n===void 0||s&&n.dirty===!0;return r&&(n=i.call(this),this._cache.set(e,n)),n}_calculate(e,i,n){if(!this._attachedDepsListeners.get(e)){const s=i.map(r=>r+"Change.konva").join(qn);this.on(s,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get($i)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Ct&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete($i),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var i=e||{},n={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var s=Math.ceil(i.width||n.width),r=Math.ceil(i.height||n.height),a=i.pixelRatio,o=i.x===void 0?Math.floor(n.x):i.x,l=i.y===void 0?Math.floor(n.y):i.y,h=i.offset||0,c=i.drawBorder||!1,d=i.hitCanvasPixelRatio||1;if(!s||!r){v.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}s+=h*2+1,r+=h*2+1,o-=h,l-=h;var f=new Mi({pixelRatio:a,width:s,height:r}),y=new Mi({pixelRatio:a,width:0,height:0}),C=new Lr({pixelRatio:d,width:s,height:r}),I=f.getContext(),_=C.getContext();return C.isCache=!0,f.isCache=!0,this._cache.delete($i),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(f.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1),I.save(),_.save(),I.translate(-o,-l),_.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Zn),this._clearSelfAndDescendantCache(Pa),this.drawScene(f,this),this.drawHit(C,this),this._isUnderCache=!1,I.restore(),_.restore(),c&&(I.save(),I.beginPath(),I.rect(0,0,s,r),I.closePath(),I.setAttr("strokeStyle","red"),I.setAttr("lineWidth",5),I.stroke(),I.restore()),this._cache.set($i,{scene:f,filter:y,hit:C,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has($i)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,i){var n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s,r,a,o,l=this.getAbsoluteTransform(i);return n.forEach(function(h){var c=l.point(h);s===void 0&&(s=a=c.x,r=o=c.y),s=Math.min(s,c.x),r=Math.min(r,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),{x:s,y:r,width:a-s,height:o-r}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();e.translate(i.x,i.y);var n=this._getCachedSceneCanvas(),s=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/s,n.height/s),e.restore()}_drawCachedHitCanvas(e){var i=this._getCanvasCache(),n=i.hit;e.save(),e.translate(i.x,i.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),i=this._getCanvasCache(),n=i.scene,s=i.filter,r=s.getContext(),a,o,l,h;if(e){if(!this._filterUpToDate){var c=n.pixelRatio;s.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio);try{for(a=e.length,r.clear(),r.drawImage(n._canvas,0,0,n.getWidth()/c,n.getHeight()/c),o=r.getImageData(0,0,s.getWidth(),s.getHeight()),l=0;l<a;l++){if(h=e[l],typeof h!="function"){v.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),r.putImageData(o,0,0)}}catch(d){v.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return n}on(e,i){if(this._cache&&this._cache.delete(On),arguments.length===3)return this._delegate.apply(this,arguments);var n=e.split(qn),s=n.length,r,a,o,l,h;for(r=0;r<s;r++)a=n[r],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:i});return this}off(e,i){var n=(e||"").split(qn),s=n.length,r,a,o,l,h,c;if(this._cache&&this._cache.delete(On),!e)for(a in this.eventListeners)this._off(a);for(r=0;r<s;r++)if(o=n[r],l=o.split("."),h=l[0],c=l[1],h)this.eventListeners[h]&&this._off(h,c,i);else for(a in this.eventListeners)this._off(a,c,i);return this}dispatchEvent(e){var i={target:this,type:e.type,evt:e};return this.fire(e.type,i),this}addEventListener(e,i){return this.on(e,function(n){i.call(this,n.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,i,n){var s=this;this.on(e,function(r){for(var a=r.target.findAncestors(i,!0,s),o=0;o<a.length;o++)r=v.cloneObject(r),r.currentTarget=a[o],n.call(a[o],r)})}remove(){return this.isDragging()&&this.stopDrag(),re._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Ct),this._clearSelfAndDescendantCache(Zn),this._clearSelfAndDescendantCache(Pa),this._clearSelfAndDescendantCache(Oa),this._clearSelfAndDescendantCache(or),this._clearSelfAndDescendantCache(ar)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(e){var i="get"+v._capitalize(e);return v._isFunction(this[i])?this[i]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),i=[];e;)i.push(e),e=e.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var i,n;if(!e)return this;for(i in e)i!==fu&&(n=La+v._capitalize(i),v._isFunction(this[n])?this[n](e[i]):this._setAttr(i,e[i]))}),this}isListening(){return this._getCache(ar,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(or,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,i=!1){if(e)return this._isVisible(e)&&this._isListening(e);var n=this.getLayer(),s=!1;re._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===n)&&(s=!0)});var r=!i&&!Y.hitOnDragEnabled&&s;return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),i=this,n=0,s,r,a,o;function l(h){for(s=[],r=h.length,a=0;a<r;a++)o=h[a],n++,o.nodeType!==Ra&&(s=s.concat(o.getChildren().slice())),o._id===i._id&&(a=r);s.length>0&&s[0].getDepth()<=e&&l(s)}return i.nodeType!==gu&&l(i.getStage().getChildren()),n}getDepth(){for(var e=0,i=this.parent;i;)e++,i=i.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Ot),this._clearSelfAndDescendantCache(Ct)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(e){let i=!1,n=this.parent;for(;n;){if(n.isCached()){i=!0;break}n=n.parent}i&&!e&&(e=!0);var s=this.getAbsoluteTransform(e).getMatrix(),r=new Nt,a=this.offset();return r.m=s.slice(),r.translate(a.x,a.y),r.getTranslation()}setAbsolutePosition(e){var i=this._clearTransform();this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,this._clearCache(Ot);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(e.x,e.y),e={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(Ot),this._clearSelfAndDescendantCache(Ct),this}_setTransform(e){var i;for(i in e)this.attrs[i]=e[i]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var i=e.x,n=e.y,s=this.x(),r=this.y();return i!==void 0&&(s+=i),n!==void 0&&(r+=n),this.setPosition({x:s,y:r}),this}_eachAncestorReverse(e,i){var n=[],s=this.getParent(),r,a;if(!(i&&i._id===this._id)){for(n.unshift(this);s&&(!i||s._id!==i._id);)n.unshift(s),s=s.parent;for(r=n.length,a=0;a<r;a++)e(n[a])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return v.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return v.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return v.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return v.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return v.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&v.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Zn,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),i=this.getParent();return i&&!i._isUnderCache&&(e*=i.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},i=this.getAttrs(),n,s,r,a,o;e.attrs={};for(n in i)s=i[n],o=v.isObject(s)&&!v._isPlainObject(s)&&!v._isArray(s),!o&&(r=typeof this[n]=="function"&&this[n],delete i[n],a=r?r.call(this):null,i[n]=s,a!==s&&(e.attrs[n]=s));return e.className=this.getClassName(),v._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,i,n){var s=[];i&&this._isMatch(e)&&s.push(this);for(var r=this.parent;r;){if(r===n)return s;r._isMatch(e)&&s.push(r),r=r.parent}return s}isAncestorOf(e){return!1}findAncestor(e,i,n){return this.findAncestors(e,i,n)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var i=e.replace(/ /g,"").split(","),n=i.length,s,r;for(s=0;s<n;s++)if(r=i[s],v.isValidSelector(r)||(v.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),v.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),v.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(Oa,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,i={},n){return i.target=i.target||this,n?this._fireAndBubble(e,i):this._fire(e,i),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Ct,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var i;if(e)return i=new Nt,this._eachAncestorReverse(function(s){var r=s.transformsEnabled();r==="all"?i.multiply(s.getTransform()):r==="position"&&i.translate(s.x()-s.offsetX(),s.y()-s.offsetY())},e),i;i=this._cache.get(Ct)||new Nt,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var n=this.transformsEnabled();if(n==="all")i.multiply(this.getTransform());else if(n==="position"){const s=this.attrs.x||0,r=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;i.translate(s-a,r-o)}return i.dirty=!1,i}getAbsoluteScale(e){for(var i=this;i;)i._isUnderCache&&(e=i),i=i.getParent();const s=this.getAbsoluteTransform(e).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Ot,this._getTransform)}_getTransform(){var e,i,n=this._cache.get(Ot)||new Nt;n.reset();var s=this.x(),r=this.y(),a=Y.getAngle(this.rotation()),o=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,d=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return(s!==0||r!==0)&&n.translate(s,r),a!==0&&n.rotate(a),(h!==0||c!==0)&&n.skew(h,c),(o!==1||l!==1)&&n.scale(o,l),(d!==0||f!==0)&&n.translate(-1*d,-1*f),n.dirty=!1,n}clone(e){var i=v.cloneObject(this.attrs),n,s,r,a,o;for(n in e)i[n]=e[n];var l=new this.constructor(i);for(n in this.eventListeners)for(s=this.eventListeners[n],r=s.length,a=0;a<r;a++)o=s[a],o.name.indexOf(pu)<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(o));return l}_toKonvaCanvas(e){e=e||{};var i=this.getClientRect(),n=this.getStage(),s=e.x!==void 0?e.x:Math.floor(i.x),r=e.y!==void 0?e.y:Math.floor(i.y),a=e.pixelRatio||1,o=new Mi({width:e.width||Math.ceil(i.width)||(n?n.width():0),height:e.height||Math.ceil(i.height)||(n?n.height():0),pixelRatio:a}),l=o.getContext();return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(s||r)&&l.translate(-1*s,-1*r),this.drawScene(o),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var i=e.mimeType||null,n=e.quality||null,s=this._toKonvaCanvas(e).toDataURL(i,n);return e.callback&&e.callback(s),s}toImage(e){return new Promise((i,n)=>{try{const s=e==null?void 0:e.callback;s&&delete e.callback,v._urlToImage(this.toDataURL(e),function(r){i(r),s==null||s(r)})}catch(s){n(s)}})}toBlob(e){return new Promise((i,n)=>{try{const s=e==null?void 0:e.callback;s&&delete e.callback,this.toCanvas(e).toBlob(r=>{i(r),s==null||s(r)})}catch(s){n(s)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Y.dragDistance}_off(e,i,n){var s=this.eventListeners[e],r,a,o;for(r=0;r<s.length;r++)if(a=s[r].name,o=s[r].handler,(a!=="konva"||i==="konva")&&(!i||a===i)&&(!n||n===o)){if(s.splice(r,1),s.length===0){delete this.eventListeners[e];break}r--}}_fireChangeEvent(e,i,n){this._fire(e+uu,{oldVal:i,newVal:n})}addName(e){if(!this.hasName(e)){var i=this.name(),n=i?i+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const i=this.name();if(!i)return!1;var n=(i||"").split(/\s/g);return n.indexOf(e)!==-1}removeName(e){var i=(this.name()||"").split(/\s/g),n=i.indexOf(e);return n!==-1&&(i.splice(n,1),this.name(i.join(" "))),this}setAttr(e,i){var n=this[La+v._capitalize(e)];return v._isFunction(n)?n.call(this,i):this._setAttr(e,i),this}_requestDraw(){if(Y.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,i){var n=this.attrs[e];n===i&&!v.isObject(i)||(i==null?delete this.attrs[e]:this.attrs[e]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,i),this._requestDraw())}_setComponentAttr(e,i,n){var s;n!==void 0&&(s=this.attrs[e],s||(this.attrs[e]=this.getAttr(e)),this.attrs[e][i]=n,this._fireChangeEvent(e,s,n))}_fireAndBubble(e,i,n){i&&this.nodeType===Ra&&(i.target=this);var s=(e===Ia||e===Ma)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n);if(!s){this._fire(e,i);var r=(e===Ia||e===Ma)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,i,n):this._fireAndBubble.call(this.parent,e,i))}}_getProtoListeners(e){let i=this._cache.get(On);if(!i){i={};let s=Object.getPrototypeOf(this);for(;s;){if(!s.eventListeners){s=Object.getPrototypeOf(s);continue}for(var n in s.eventListeners){const r=s.eventListeners[n],a=i[n]||[];i[n]=r.concat(a)}s=Object.getPrototypeOf(s)}this._cache.set(On,i)}return i[e]}_fire(e,i){i=i||{},i.currentTarget=this,i.type=e;const n=this._getProtoListeners(e);if(n)for(var s=0;s<n.length;s++)n[s].handler.call(this,i);const r=this.eventListeners[e];if(r)for(var s=0;s<r.length;s++)r[s].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var i=e?e.pointerId:void 0,n=this.getStage(),s=this.getAbsolutePosition(),r=n._getPointerById(i)||n._changedPointerPositions[0]||s;re._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-s.x,y:r.y-s.y},dragStatus:"ready",pointerId:i})}startDrag(e,i=!0){re._dragElements.has(this._id)||this._createDragElement(e);const n=re._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},i)}_setDragPosition(e,i){const n=this.getStage()._getPointerById(i.pointerId);if(!!n){var s={x:n.x-i.offset.x,y:n.y-i.offset.y},r=this.dragBoundFunc();if(r!==void 0){const a=r.call(this,s,e);a?s=a:v.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}}stopDrag(e){const i=re._dragElements.get(this._id);i&&(i.dragStatus="stopped"),re._endDragBefore(e),re._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=re._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var i=e.evt.button!==void 0,n=!i||Y.dragButtons.indexOf(e.evt.button)>=0;if(!!n&&!this.isDragging()){var s=!1;re._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(s=!0)}),s||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const i=re._dragElements.get(this._id),n=i&&i.dragStatus==="dragging",s=i&&i.dragStatus==="ready";n?this.stopDrag():s&&re._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const i=this.getStage();if(!i)return!1;const n={x:-e.x,y:-e.y,width:i.width()+2*e.x,height:i.height()+2*e.y};return v.haveIntersection(n,this.getClientRect())}static create(e,i){return v._isString(e)&&(e=JSON.parse(e)),this._createNode(e,i)}static _createNode(e,i){var n=z.prototype.getClassName.call(e),s=e.children,r,a,o;i&&(e.attrs.container=i),Y[n]||(v.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const l=Y[n];if(r=new l(e.attrs),s)for(a=s.length,o=0;o<a;o++)r.add(z._createNode(s[o]));return r}}z.prototype.nodeType="Node";z.prototype._attrsAffectingSize=[];z.prototype.eventListeners={};z.prototype.on.call(z.prototype,_u,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Ot),this._clearSelfAndDescendantCache(Ct)});z.prototype.on.call(z.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(or)});z.prototype.on.call(z.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(ar)});z.prototype.on.call(z.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Zn)});const ue=x.addGetterSetter;ue(z,"zIndex");ue(z,"absolutePosition");ue(z,"position");ue(z,"x",0,ie());ue(z,"y",0,ie());ue(z,"globalCompositeOperation","source-over",Gi());ue(z,"opacity",1,ie());ue(z,"name","",Gi());ue(z,"id","",Gi());ue(z,"rotation",0,ie());x.addComponentsGetterSetter(z,"scale",["x","y"]);ue(z,"scaleX",1,ie());ue(z,"scaleY",1,ie());x.addComponentsGetterSetter(z,"skew",["x","y"]);ue(z,"skewX",0,ie());ue(z,"skewY",0,ie());x.addComponentsGetterSetter(z,"offset",["x","y"]);ue(z,"offsetX",0,ie());ue(z,"offsetY",0,ie());ue(z,"dragDistance",null,ie());ue(z,"width",0,ie());ue(z,"height",0,ie());ue(z,"listening",!0,Et());ue(z,"preventDefault",!0,Et());ue(z,"filters",null,function(t){return this._filterUpToDate=!1,t});ue(z,"visible",!0,Et());ue(z,"transformsEnabled","all",Gi());ue(z,"size");ue(z,"dragBoundFunc");ue(z,"draggable",!1,Et());x.backCompat(z,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});const _n=new Map,hl=Y._global.PointerEvent!==void 0;function Bs(t){return _n.get(t)}function Rr(t){return{evt:t,pointerId:t.pointerId}}function cl(t,e){return _n.get(t)===e}function dl(t,e){sn(t),e.getStage()&&(_n.set(t,e),hl&&e._fire("gotpointercapture",Rr(new PointerEvent("gotpointercapture"))))}function sn(t,e){const i=_n.get(t);if(!i)return;const n=i.getStage();n&&n.content,_n.delete(t),hl&&i._fire("lostpointercapture",Rr(new PointerEvent("lostpointercapture")))}var ul="hasShadow",fl="shadowRGBA",pl="patternImage",gl="linearGradient",_l="radialGradient";let Dn;function zs(){return Dn||(Dn=v.createCanvasElement().getContext("2d"),Dn)}const rn={};function vu(t){t.fill()}function yu(t){t.stroke()}function bu(t){t.fill()}function wu(t){t.stroke()}function Cu(){this._clearCache(ul)}function Su(){this._clearCache(fl)}function Tu(){this._clearCache(pl)}function ku(){this._clearCache(gl)}function xu(){this._clearCache(_l)}class N extends z{constructor(e){super(e);let i;for(;i=v.getRandomColor(),!(i&&!(i in rn)););this.colorKey=i,rn[i]=this}getContext(){return v.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return v.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(ul,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(pl,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=zs();const i=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const n=new Nt;n.translate(this.fillPatternX(),this.fillPatternY()),n.rotate(Y.getAngle(this.fillPatternRotation())),n.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),n.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=n.getMatrix(),r=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);i.setTransform(r)}return i}}_getLinearGradient(){return this._getCache(gl,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var i=zs(),n=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),r=i.createLinearGradient(n.x,n.y,s.x,s.y),a=0;a<e.length;a+=2)r.addColorStop(e[a],e[a+1]);return r}}_getRadialGradient(){return this._getCache(_l,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var i=zs(),n=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),r=i.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius()),a=0;a<e.length;a+=2)r.addColorStop(e[a],e[a+1]);return r}}getShadowRGBA(){return this._getCache(fl,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=v.colorToRGBA(this.shadowColor());return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var i=this.getStage(),n=i.bufferHitCanvas,s;return n.getContext().clear(),this.drawHit(n,null,!0),s=n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,s[3]>0}destroy(){return z.prototype.destroy.call(this),delete rn[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var i;if(!this.getStage()||!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const s=e||this.hasFill(),r=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(s&&r&&a)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(s&&r&&o&&l)}setStrokeHitEnabled(e){v.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const i=e.skipTransform,n=e.relativeTo,s=this.getSelfRect(),a=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=s.width+a,l=s.height+a,h=!e.skipShadow&&this.hasShadow(),c=h?this.shadowOffsetX():0,d=h?this.shadowOffsetY():0,f=o+Math.abs(c),y=l+Math.abs(d),C=h&&this.shadowBlur()||0,I=f+C*2,_=y+C*2,M={width:I,height:_,x:-(a/2+C)+Math.min(c,0)+s.x,y:-(a/2+C)+Math.min(d,0)+s.y};return i?M:this._transformedRect(M,n)}drawScene(e,i){var n=this.getLayer(),s=e||n.getCanvas(),r=s.getContext(),a=this._getCanvasCache(),o=this.getSceneFunc(),l=this.hasShadow(),h,c,d,f=s.isCache,y=i===this;if(!this.isVisible()&&!y)return this;if(a){r.save();var C=this.getAbsoluteTransform(i).getMatrix();return r.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._drawCachedSceneCanvas(r),r.restore(),this}if(!o)return this;if(r.save(),this._useBufferCanvas()&&!f){h=this.getStage(),c=h.bufferCanvas,d=c.getContext(),d.clear(),d.save(),d._applyLineJoin(this);var I=this.getAbsoluteTransform(i).getMatrix();d.transform(I[0],I[1],I[2],I[3],I[4],I[5]),o.call(this,d,this),d.restore();var _=c.pixelRatio;l&&r._applyShadow(this),r._applyOpacity(this),r._applyGlobalCompositeOperation(this),r.drawImage(c._canvas,0,0,c.width/_,c.height/_)}else{if(r._applyLineJoin(this),!y){var I=this.getAbsoluteTransform(i).getMatrix();r.transform(I[0],I[1],I[2],I[3],I[4],I[5]),r._applyOpacity(this),r._applyGlobalCompositeOperation(this)}l&&r._applyShadow(this),o.call(this,r,this)}return r.restore(),this}drawHit(e,i,n=!1){if(!this.shouldDrawHit(i,n))return this;var s=this.getLayer(),r=e||s.hitCanvas,a=r&&r.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||v.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();var c=this.getAbsoluteTransform(i).getMatrix();return a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),!(this===i)){var f=this.getAbsoluteTransform(i).getMatrix();a.transform(f[0],f[1],f[2],f[3],f[4],f[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(e=0){var i=this._getCanvasCache(),n=this._getCachedSceneCanvas(),s=i.hit,r=s.getContext(),a=s.getWidth(),o=s.getHeight(),l,h,c,d,f,y;r.clear(),r.drawImage(n._canvas,0,0,a,o);try{for(l=r.getImageData(0,0,a,o),h=l.data,c=h.length,d=v._hexToRgb(this.colorKey),f=0;f<c;f+=4)y=h[f+3],y>e?(h[f]=d.r,h[f+1]=d.g,h[f+2]=d.b,h[f+3]=255):h[f+3]=0;r.putImageData(l,0,0)}catch(C){v.error("Unable to draw hit graph from cached scene canvas. "+C.message)}return this}hasPointerCapture(e){return cl(e,this)}setPointerCapture(e){dl(e,this)}releaseCapture(e){sn(e)}}N.prototype._fillFunc=vu;N.prototype._strokeFunc=yu;N.prototype._fillFuncHit=bu;N.prototype._strokeFuncHit=wu;N.prototype._centroid=!1;N.prototype.nodeType="Shape";Yt(N);N.prototype.eventListeners={};N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Cu);N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Su);N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",Tu);N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",ku);N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",xu);x.addGetterSetter(N,"stroke",void 0,ll());x.addGetterSetter(N,"strokeWidth",2,ie());x.addGetterSetter(N,"fillAfterStrokeEnabled",!1);x.addGetterSetter(N,"hitStrokeWidth","auto",Mr());x.addGetterSetter(N,"strokeHitEnabled",!0,Et());x.addGetterSetter(N,"perfectDrawEnabled",!0,Et());x.addGetterSetter(N,"shadowForStrokeEnabled",!0,Et());x.addGetterSetter(N,"lineJoin");x.addGetterSetter(N,"lineCap");x.addGetterSetter(N,"sceneFunc");x.addGetterSetter(N,"hitFunc");x.addGetterSetter(N,"dash");x.addGetterSetter(N,"dashOffset",0,ie());x.addGetterSetter(N,"shadowColor",void 0,Gi());x.addGetterSetter(N,"shadowBlur",0,ie());x.addGetterSetter(N,"shadowOpacity",1,ie());x.addComponentsGetterSetter(N,"shadowOffset",["x","y"]);x.addGetterSetter(N,"shadowOffsetX",0,ie());x.addGetterSetter(N,"shadowOffsetY",0,ie());x.addGetterSetter(N,"fillPatternImage");x.addGetterSetter(N,"fill",void 0,ll());x.addGetterSetter(N,"fillPatternX",0,ie());x.addGetterSetter(N,"fillPatternY",0,ie());x.addGetterSetter(N,"fillLinearGradientColorStops");x.addGetterSetter(N,"strokeLinearGradientColorStops");x.addGetterSetter(N,"fillRadialGradientStartRadius",0);x.addGetterSetter(N,"fillRadialGradientEndRadius",0);x.addGetterSetter(N,"fillRadialGradientColorStops");x.addGetterSetter(N,"fillPatternRepeat","repeat");x.addGetterSetter(N,"fillEnabled",!0);x.addGetterSetter(N,"strokeEnabled",!0);x.addGetterSetter(N,"shadowEnabled",!0);x.addGetterSetter(N,"dashEnabled",!0);x.addGetterSetter(N,"strokeScaleEnabled",!0);x.addGetterSetter(N,"fillPriority","color");x.addComponentsGetterSetter(N,"fillPatternOffset",["x","y"]);x.addGetterSetter(N,"fillPatternOffsetX",0,ie());x.addGetterSetter(N,"fillPatternOffsetY",0,ie());x.addComponentsGetterSetter(N,"fillPatternScale",["x","y"]);x.addGetterSetter(N,"fillPatternScaleX",1,ie());x.addGetterSetter(N,"fillPatternScaleY",1,ie());x.addComponentsGetterSetter(N,"fillLinearGradientStartPoint",["x","y"]);x.addComponentsGetterSetter(N,"strokeLinearGradientStartPoint",["x","y"]);x.addGetterSetter(N,"fillLinearGradientStartPointX",0);x.addGetterSetter(N,"strokeLinearGradientStartPointX",0);x.addGetterSetter(N,"fillLinearGradientStartPointY",0);x.addGetterSetter(N,"strokeLinearGradientStartPointY",0);x.addComponentsGetterSetter(N,"fillLinearGradientEndPoint",["x","y"]);x.addComponentsGetterSetter(N,"strokeLinearGradientEndPoint",["x","y"]);x.addGetterSetter(N,"fillLinearGradientEndPointX",0);x.addGetterSetter(N,"strokeLinearGradientEndPointX",0);x.addGetterSetter(N,"fillLinearGradientEndPointY",0);x.addGetterSetter(N,"strokeLinearGradientEndPointY",0);x.addComponentsGetterSetter(N,"fillRadialGradientStartPoint",["x","y"]);x.addGetterSetter(N,"fillRadialGradientStartPointX",0);x.addGetterSetter(N,"fillRadialGradientStartPointY",0);x.addComponentsGetterSetter(N,"fillRadialGradientEndPoint",["x","y"]);x.addGetterSetter(N,"fillRadialGradientEndPointX",0);x.addGetterSetter(N,"fillRadialGradientEndPointY",0);x.addGetterSetter(N,"fillPatternRotation",0);x.backCompat(N,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});function lr(t,e,i,n,s,r,a){var o=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),l=Math.sqrt(Math.pow(s-i,2)+Math.pow(r-n,2)),h=a*o/(o+l),c=a*l/(o+l),d=i-h*(s-t),f=n-h*(r-e),y=i+c*(s-t),C=n+c*(r-e);return[d,f,y,C]}function Da(t,e){var i=t.length,n=[],s,r;for(s=2;s<i-2;s+=2)r=lr(t[s-2],t[s-1],t[s],t[s+1],t[s+2],t[s+3],e),!isNaN(r[0])&&(n.push(r[0]),n.push(r[1]),n.push(t[s]),n.push(t[s+1]),n.push(r[2]),n.push(r[3]));return n}class wt extends N{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var i=this.points(),n=i.length,s=this.tension(),r=this.closed(),a=this.bezier(),o,l,h;if(!!n){if(e.beginPath(),e.moveTo(i[0],i[1]),s!==0&&n>4){for(o=this.getTensionPoints(),l=o.length,h=r?0:4,r||e.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)e.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);r||e.quadraticCurveTo(o[l-2],o[l-1],i[n-2],i[n-1])}else if(a)for(h=2;h<n;)e.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<n;h+=2)e.lineTo(i[h],i[h+1]);r?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Da(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),i=e.length,n=this.tension(),s=lr(e[i-2],e[i-1],e[0],e[1],e[2],e[3],n),r=lr(e[i-4],e[i-3],e[i-2],e[i-1],e[0],e[1],n),a=Da(e,n),o=[s[2],s[3]].concat(a).concat([r[0],r[1],e[i-2],e[i-1],r[2],r[3],s[0],s[1],e[0],e[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var i=e[0],n=e[0],s=e[1],r=e[1],a,o,l=0;l<e.length/2;l++)a=e[l*2],o=e[l*2+1],i=Math.min(i,a),n=Math.max(n,a),s=Math.min(s,o),r=Math.max(r,o);return{x:i,y:s,width:n-i,height:r-s}}}wt.prototype.className="Line";wt.prototype._attrsAffectingSize=["points","bezier","tension"];Yt(wt);x.addGetterSetter(wt,"closed",!1);x.addGetterSetter(wt,"bezier",!1);x.addGetterSetter(wt,"tension",0,ie());x.addGetterSetter(wt,"points",[],qd());class Wi extends N{_sceneFunc(e){var i=this.cornerRadius(),n=this.width(),s=this.height();if(e.beginPath(),!i)e.rect(0,0,n,s);else{let r=0,a=0,o=0,l=0;typeof i=="number"?r=a=o=l=Math.min(i,n/2,s/2):(r=Math.min(i[0]||0,n/2,s/2),a=Math.min(i[1]||0,n/2,s/2),l=Math.min(i[2]||0,n/2,s/2),o=Math.min(i[3]||0,n/2,s/2)),e.moveTo(r,0),e.lineTo(n-a,0),e.arc(n-a,a,a,Math.PI*3/2,0,!1),e.lineTo(n,s-l),e.arc(n-l,s-l,l,0,Math.PI/2,!1),e.lineTo(o,s),e.arc(o,s-o,o,Math.PI/2,Math.PI,!1),e.lineTo(0,r),e.arc(r,r,r,Math.PI,Math.PI*3/2,!1)}e.closePath(),e.fillStrokeShape(this)}}Wi.prototype.className="Rect";Yt(Wi);x.addGetterSetter(Wi,"cornerRadius",0,Zd(4));function Eu(t){return Array.from(t)}var bi="auto",Au="center",ji="justify",Pu="Change.konva",Iu="2d",Na="-",ml="left",Mu="text",Lu="Text",Ru="top",Ou="bottom",Ha="middle",vl="normal",Du="px ",Nn=" ",Nu="right",Hu="word",Fu="char",Fa="none",Us="\u2026",yl=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Gu=yl.length;function Wu(t){return t.split(",").map(e=>{e=e.trim();const i=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return i&&!n&&(e=`"${e}"`),e}).join(", ")}var Hn;function Vs(){return Hn||(Hn=v.createCanvasElement().getContext(Iu),Hn)}function Bu(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function zu(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Uu(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class pe extends N{constructor(e){super(Uu(e)),this._partialTextX=0,this._partialTextY=0;for(var i=0;i<Gu;i++)this.on(yl[i]+Pu,this._setTextData);this._setTextData()}_sceneFunc(e){var i=this.textArr,n=i.length;if(!!this.text()){var s=this.padding(),r=this.fontSize(),a=this.lineHeight()*r,o=this.verticalAlign(),l=0,h=this.align(),c=this.getWidth(),d=this.letterSpacing(),f=this.fill(),y=this.textDecoration(),C=y.indexOf("underline")!==-1,I=y.indexOf("line-through")!==-1,_,M=0,M=a/2,T=0,H=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",Ha),e.setAttr("textAlign",ml),o===Ha?l=(this.getHeight()-n*a-s*2)/2:o===Ou&&(l=this.getHeight()-n*a-s*2),e.translate(s,l+s),_=0;_<n;_++){var T=0,H=0,B=i[_],K=B.text,se=B.width,ge=B.lastInParagraph,ee,ae,_e;if(e.save(),h===Nu?T+=c-se-s*2:h===Au&&(T+=(c-se-s*2)/2),C&&(e.save(),e.beginPath(),e.moveTo(T,M+H+Math.round(r/2)),ee=K.split(" ").length-1,ae=ee===0,_e=h===ji&&ge&&!ae?c-s*2:se,e.lineTo(T+Math.round(_e),M+H+Math.round(r/2)),e.lineWidth=r/15,e.strokeStyle=f,e.stroke(),e.restore()),I&&(e.save(),e.beginPath(),e.moveTo(T,M+H),ee=K.split(" ").length-1,ae=ee===0,_e=h===ji&&ge&&!ae?c-s*2:se,e.lineTo(T+Math.round(_e),M+H),e.lineWidth=r/15,e.strokeStyle=f,e.stroke(),e.restore()),d!==0||h===ji){ee=K.split(" ").length-1;for(var Te=Eu(K),Le=0;Le<Te.length;Le++){var xe=Te[Le];xe===" "&&!ge&&h===ji&&(T+=(c-s*2-se)/ee),this._partialTextX=T,this._partialTextY=M+H,this._partialText=xe,e.fillStrokeShape(this),T+=this.measureSize(xe).width+d}}else this._partialTextX=T,this._partialTextY=M+H,this._partialText=K,e.fillStrokeShape(this);e.restore(),n>1&&(M+=a)}}}_hitFunc(e){var i=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,i,n),e.closePath(),e.fillStrokeShape(this)}setText(e){var i=v._isString(e)?e:e==null?"":e+"";return this._setAttr(Mu,i),this}getWidth(){var e=this.attrs.width===bi||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===bi||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return v.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var i=Vs(),n=this.fontSize(),s;return i.save(),i.font=this._getContextFont(),s=i.measureText(e),i.restore(),{width:s.width,height:n}}_getContextFont(){return this.fontStyle()+Nn+this.fontVariant()+Nn+(this.fontSize()+Du)+Wu(this.fontFamily())}_addTextLine(e){this.align()===ji&&(e=e.trim());var i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){var i=this.letterSpacing(),n=e.length;return Vs().measureText(e).width+(n?i*(n-1):0)}_setTextData(){var e=this.text().split(`
`),i=+this.fontSize(),n=0,s=this.lineHeight()*i,r=this.attrs.width,a=this.attrs.height,o=r!==bi&&r!==void 0,l=a!==bi&&a!==void 0,h=this.padding(),c=r-h*2,d=a-h*2,f=0,y=this.wrap(),C=y!==Fa,I=y!==Fu&&C,_=this.ellipsis();this.textArr=[],Vs().font=this._getContextFont();for(var M=_?this._getTextWidth(Us):0,T=0,H=e.length;T<H;++T){var B=e[T],K=this._getTextWidth(B);if(o&&K>c)for(;B.length>0;){for(var se=0,ge=B.length,ee="",ae=0;se<ge;){var _e=se+ge>>>1,Te=B.slice(0,_e+1),Le=this._getTextWidth(Te)+M;Le<=c?(se=_e+1,ee=Te,ae=Le):ge=_e}if(ee){if(I){var xe,Je=B[ee.length],ct=Je===Nn||Je===Na;ct&&ae<=c?xe=ee.length:xe=Math.max(ee.lastIndexOf(Nn),ee.lastIndexOf(Na))+1,xe>0&&(se=xe,ee=ee.slice(0,se),ae=this._getTextWidth(ee))}ee=ee.trimRight(),this._addTextLine(ee),n=Math.max(n,ae),f+=s;var A=this._shouldHandleEllipsis(f);if(A){this._tryToAddEllipsisToLastLine();break}if(B=B.slice(se),B=B.trimLeft(),B.length>0&&(K=this._getTextWidth(B),K<=c)){this._addTextLine(B),f+=s,n=Math.max(n,K);break}}else break}else this._addTextLine(B),f+=s,n=Math.max(n,K),this._shouldHandleEllipsis(f)&&T<H-1&&this._tryToAddEllipsisToLastLine();if(l&&f+s>d)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=i,this.textWidth=n}_shouldHandleEllipsis(e){var i=+this.fontSize(),n=this.lineHeight()*i,s=this.attrs.height,r=s!==bi&&s!==void 0,a=this.padding(),o=s-a*2,l=this.wrap(),h=l!==Fa;return!h||r&&e+n>o}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,i=e!==bi&&e!==void 0,n=this.padding(),s=e-n*2,r=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(!(!a||!r)){if(i){var o=this._getTextWidth(a.text+Us)<s;o||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+Us)}}getStrokeScaleEnabled(){return!0}}pe.prototype._fillFunc=Bu;pe.prototype._strokeFunc=zu;pe.prototype.className=Lu;pe.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Yt(pe);x.overWriteSetter(pe,"width",Mr());x.overWriteSetter(pe,"height",Mr());x.addGetterSetter(pe,"fontFamily","Arial");x.addGetterSetter(pe,"fontSize",12,ie());x.addGetterSetter(pe,"fontStyle",vl);x.addGetterSetter(pe,"fontVariant",vl);x.addGetterSetter(pe,"padding",0,ie());x.addGetterSetter(pe,"align",ml);x.addGetterSetter(pe,"verticalAlign",Ru);x.addGetterSetter(pe,"lineHeight",1,ie());x.addGetterSetter(pe,"wrap",Hu);x.addGetterSetter(pe,"ellipsis",!1,Et());x.addGetterSetter(pe,"letterSpacing",0,ie());x.addGetterSetter(pe,"text","",Gi());x.addGetterSetter(pe,"textDecoration","");class je extends z{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const i=this.children||[];var n=[];return i.forEach(function(s){e(s)&&n.push(s)}),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}var n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var i=this._generalFind(e,!0);return i.length>0?i[0]:void 0}_generalFind(e,i){var n=[];return this._descendants(s=>{const r=s._isMatch(e);return r&&n.push(s),!!(r&&i)}),n}_descendants(e){let i=!1;const n=this.getChildren();for(const s of n){if(i=e(s),i)return!0;if(!!s.hasChildren()&&(i=s._descendants(e),i))return!0}return!1}toObject(){var e=z.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(i=>{e.children.push(i.toObject())}),e}isAncestorOf(e){for(var i=e.getParent();i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(e){var i=z.prototype.clone.call(this,e);return this.getChildren().forEach(function(n){i.add(n.clone())}),i}getAllIntersections(e){var i=[];return this.find("Shape").forEach(function(n){n.isVisible()&&n.intersects(e)&&i.push(n)}),i}_clearSelfAndDescendantCache(e){var i;super._clearSelfAndDescendantCache(e),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(n){n._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(i,n){i.index=n}),this._requestDraw()}drawScene(e,i){var n=this.getLayer(),s=e||n&&n.getCanvas(),r=s&&s.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=s&&s.isCache;if(!this.isVisible()&&!l)return this;if(o){r.save();var h=this.getAbsoluteTransform(i).getMatrix();r.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(r),r.restore()}else this._drawChildren("drawScene",s,i);return this}drawHit(e,i){if(!this.shouldDrawHit(i))return this;var n=this.getLayer(),s=e||n&&n.hitCanvas,r=s&&s.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){r.save();var l=this.getAbsoluteTransform(i).getMatrix();r.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",s,i);return this}_drawChildren(e,i,n){var s,r=i&&i.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h=a&&o||l;const c=n===this;if(h){r.save();var d=this.getAbsoluteTransform(n),f=d.getMatrix();if(r.transform(f[0],f[1],f[2],f[3],f[4],f[5]),r.beginPath(),l)l.call(this,r,this);else{var y=this.clipX(),C=this.clipY();r.rect(y,C,a,o)}r.clip(),f=d.copy().invert().getMatrix(),r.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var I=!c&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";I&&(r.save(),r._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(_){_[e](i,n)}),I&&r.restore(),h&&r.restore()}getClientRect(e){var i;e=e||{};var n=e.skipTransform,s=e.relativeTo,r,a,o,l,h={x:1/0,y:1/0,width:0,height:0},c=this;(i=this.children)===null||i===void 0||i.forEach(function(I){if(!!I.visible()){var _=I.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});_.width===0&&_.height===0||(r===void 0?(r=_.x,a=_.y,o=_.x+_.width,l=_.y+_.height):(r=Math.min(r,_.x),a=Math.min(a,_.y),o=Math.max(o,_.x+_.width),l=Math.max(l,_.y+_.height)))}});for(var d=this.find("Shape"),f=!1,y=0;y<d.length;y++){var C=d[y];if(C._isVisible(this)){f=!0;break}}return f&&r!==void 0?h={x:r,y:a,width:o-r,height:l-a}:h={x:0,y:0,width:0,height:0},n?h:this._transformedRect(h,s)}}x.addComponentsGetterSetter(je,"clip",["x","y","width","height"]);x.addGetterSetter(je,"clipX",void 0,ie());x.addGetterSetter(je,"clipY",void 0,ie());x.addGetterSetter(je,"clipWidth",void 0,ie());x.addGetterSetter(je,"clipHeight",void 0,ie());x.addGetterSetter(je,"clipFunc");var Vu="Stage",Xu="string",Ga="px",Yu="mouseout",bl="mouseleave",wl="mouseover",Cl="mouseenter",Sl="mousemove",Tl="mousedown",kl="mouseup",Zi="pointermove",qi="pointerdown",ki="pointerup",Ji="pointercancel",$u="lostpointercapture",Fn="pointerout",Gn="pointerleave",Wn="pointerover",Bn="pointerenter",hr="contextmenu",xl="touchstart",El="touchend",Al="touchmove",Pl="touchcancel",cr="wheel",ju=5,Ku=[[Cl,"_pointerenter"],[Tl,"_pointerdown"],[Sl,"_pointermove"],[kl,"_pointerup"],[bl,"_pointerleave"],[xl,"_pointerdown"],[Al,"_pointermove"],[El,"_pointerup"],[Pl,"_pointercancel"],[wl,"_pointerover"],[cr,"_wheel"],[hr,"_contextmenu"],[qi,"_pointerdown"],[Zi,"_pointermove"],[ki,"_pointerup"],[Ji,"_pointercancel"],[$u,"_lostpointercapture"]];const Xs={mouse:{[Fn]:Yu,[Gn]:bl,[Wn]:wl,[Bn]:Cl,[Zi]:Sl,[qi]:Tl,[ki]:kl,[Ji]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Fn]:"touchout",[Gn]:"touchleave",[Wn]:"touchover",[Bn]:"touchenter",[Zi]:Al,[qi]:xl,[ki]:El,[Ji]:Pl,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Fn]:Fn,[Gn]:Gn,[Wn]:Wn,[Bn]:Bn,[Zi]:Zi,[qi]:qi,[ki]:ki,[Ji]:Ji,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Qi=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",wi=t=>{const e=Qi(t);if(e==="pointer")return Y.pointerEventsEnabled&&Xs.pointer;if(e==="touch")return Xs.touch;if(e==="mouse")return Xs.mouse};function Wa(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&v.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const Zu="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Jn=[];class As extends je{constructor(e){super(Wa(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Jn.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Wa(this.attrs)}),this._checkVisibility()}_validateAdd(e){const i=e.getType()==="Layer",n=e.getType()==="FastLayer";i||n||v.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===Xu){if(e.charAt(0)==="."){var i=e.slice(1);e=document.getElementsByClassName(i)[0]}else{var n;e.charAt(0)!=="#"?n=e:n=e.slice(1),e=document.getElementById(n)}if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,i=e.length,n;for(n=0;n<i;n++)e[n].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),je.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&v._isInDocument(e)&&this.container().removeChild(e);var i=Jn.indexOf(this);return i>-1&&Jn.splice(i,1),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(v.warn(Zu),null)}_getPointerById(e){return this._pointerPositions.find(i=>i.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var i=new Mi({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=i.getContext()._context,s=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),s.forEach(function(r){if(!!r.isVisible()){var a=r._toKonvaCanvas(e);n.drawImage(a._canvas,e.x,e.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}}),i}getIntersection(e){if(!e)return null;var i=this.children,n=i.length,s=n-1,r;for(r=s;r>=0;r--){const a=i[r].getIntersection(e);if(a)return a}return null}_resizeDOM(){var e=this.width(),i=this.height();this.content&&(this.content.style.width=e+Ga,this.content.style.height=i+Ga),this.bufferCanvas.setSize(e,i),this.bufferHitCanvas.setSize(e,i),this.children.forEach(n=>{n.setSize({width:e,height:i}),n.draw()})}add(e,...i){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(e);var s=this.children.length;return s>ju&&v.warn("The stage has "+s+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),Y.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return cl(e,this)}setPointerCapture(e){dl(e,this)}releaseCapture(e){sn(e)}getLayers(){return this.children}_bindContentEvents(){!Y.isBrowser||Ku.forEach(([e,i])=>{this.content.addEventListener(e,n=>{this[i](n)})})}_pointerenter(e){this.setPointersPositions(e);const i=wi(e.type);this._fire(i.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const i=wi(e.type);this._fire(i.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let i=this[e+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(e){const i=wi(e.type),n=Qi(e.type);if(!!i){this.setPointersPositions(e);var s=this._getTargetShape(n),r=!re.isDragging||Y.hitOnDragEnabled;s&&r?(s._fireAndBubble(i.pointerout,{evt:e}),s._fireAndBubble(i.pointerleave,{evt:e}),this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):r&&(this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const i=wi(e.type),n=Qi(e.type);if(!!i){this.setPointersPositions(e);var s=!1;this._changedPointerPositions.forEach(r=>{var a=this.getIntersection(r);if(re.justDragged=!1,Y["_"+n+"ListenClick"]=!0,!(a&&a.isListening()))return;Y.capturePointerEventsEnabled&&a.setPointerCapture(r.id),this[n+"ClickStartShape"]=a,a._fireAndBubble(i.pointerdown,{evt:e,pointerId:r.id}),s=!0;const l=e.type.indexOf("touch")>=0;a.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),s||this._fire(i.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const i=wi(e.type),n=Qi(e.type);if(!i)return;re.isDragging&&re.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var s=!re.isDragging||Y.hitOnDragEnabled;if(!s)return;var r={};let a=!1;var o=this._getTargetShape(n);this._changedPointerPositions.forEach(l=>{const h=Bs(l.id)||this.getIntersection(l),c=l.id,d={evt:e,pointerId:c};var f=o!==h;if(f&&o&&(o._fireAndBubble(i.pointerout,Object.assign({},d),h),o._fireAndBubble(i.pointerleave,Object.assign({},d),h)),h){if(r[h._id])return;r[h._id]=!0}h&&h.isListening()?(a=!0,f&&(h._fireAndBubble(i.pointerover,Object.assign({},d),o),h._fireAndBubble(i.pointerenter,Object.assign({},d),o),this[n+"targetShape"]=h),h._fireAndBubble(i.pointermove,Object.assign({},d))):o&&(this._fire(i.pointerover,{evt:e,target:this,currentTarget:this,pointerId:c}),this[n+"targetShape"]=null)}),a||this._fire(i.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const i=wi(e.type),n=Qi(e.type);if(!i)return;this.setPointersPositions(e);const s=this[n+"ClickStartShape"],r=this[n+"ClickEndShape"];var a={};let o=!1;this._changedPointerPositions.forEach(l=>{const h=Bs(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),a[h._id])return;a[h._id]=!0}const c=l.id,d={evt:e,pointerId:c};let f=!1;Y["_"+n+"InDblClickWindow"]?(f=!0,clearTimeout(this[n+"DblTimeout"])):re.justDragged||(Y["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){Y["_"+n+"InDblClickWindow"]=!1},Y.dblClickWindow),h&&h.isListening()?(o=!0,this[n+"ClickEndShape"]=h,h._fireAndBubble(i.pointerup,Object.assign({},d)),Y["_"+n+"ListenClick"]&&s&&s===h&&(h._fireAndBubble(i.pointerclick,Object.assign({},d)),f&&r&&r===h&&h._fireAndBubble(i.pointerdblclick,Object.assign({},d)))):(this[n+"ClickEndShape"]=null,Y["_"+n+"ListenClick"]&&this._fire(i.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:c}),f&&this._fire(i.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:c}))}),o||this._fire(i.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Y["_"+n+"ListenClick"]=!1,e.cancelable&&n!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(hr,{evt:e}):this._fire(hr,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(cr,{evt:e}):this._fire(cr,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const i=Bs(e.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(ki,Rr(e)),sn(e.pointerId)}_lostpointercapture(e){sn(e.pointerId)}setPointersPositions(e){var i=this._getContentPosition(),n=null,s=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,r=>{this._pointerPositions.push({id:r.identifier,x:(r.clientX-i.left)/i.scaleX,y:(r.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,r=>{this._changedPointerPositions.push({id:r.identifier,x:(r.clientX-i.left)/i.scaleX,y:(r.clientY-i.top)/i.scaleY})})):(n=(e.clientX-i.left)/i.scaleX,s=(e.clientY-i.top)/i.scaleY,this.pointerPos={x:n,y:s},this._pointerPositions=[{x:n,y:s,id:v._getFirstPointerId(e)}],this._changedPointerPositions=[{x:n,y:s,id:v._getFirstPointerId(e)}])}_setPointerPosition(e){v.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Mi({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Lr({pixelRatio:1,width:this.width(),height:this.height()}),!!Y.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return v.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}As.prototype.nodeType=Vu;Yt(As);x.addGetterSetter(As,"container");var qu="#",Ju="beforeDraw",Qu="draw",Il=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],ef=Il.length;class ci extends je{constructor(e){super(e),this.canvas=new Mi,this.hitCanvas=new Lr({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),e<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[e+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){z.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=z.prototype.moveUp.call(this);if(!e)return!1;var i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(z.prototype.moveDown.call(this)){var e=this.getStage();if(e){var i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(z.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return z.prototype.remove.call(this),e&&e.parentNode&&v._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:i}){return this.canvas.setSize(e,i),this.hitCanvas.setSize(e,i),this._setSmoothEnabled(),this}_validateAdd(e){var i=e.getType();i!=="Group"&&i!=="Shape"&&v.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),z.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){v.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){v.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,v.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var i=1,n=!1;;){for(let s=0;s<ef;s++){const r=Il[s],a=this._getIntersection({x:e.x+r.x*i,y:e.y+r.y*i}),o=a.shape;if(o)return o;if(n=!!a.antialiased,!a.antialiased)break}if(n)i+=1;else return null}}_getIntersection(e){const i=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*i),Math.round(e.y*i),1,1).data,s=n[3];if(s===255){const r=v._rgbToHex(n[0],n[1],n[2]),a=rn[qu+r];return a?{shape:a}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(e,i){var n=this.getLayer(),s=e||n&&n.getCanvas();return this._fire(Ju,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),je.prototype.drawScene.call(this,s,i),this._fire(Qu,{node:this}),this}drawHit(e,i){var n=this.getLayer(),s=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),je.prototype.drawHit.call(this,s,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){v.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return v.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,i=!!this.hitCanvas._canvas.parentNode;i?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}}ci.prototype.nodeType="Layer";Yt(ci);x.addGetterSetter(ci,"imageSmoothingEnabled",!0);x.addGetterSetter(ci,"clearBeforeDraw",!0);x.addGetterSetter(ci,"hitGraphEnabled",!0,Et());class Or extends ci{constructor(e){super(e),this.listening(!1),v.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Or.prototype.nodeType="FastLayer";Yt(Or);class Dr extends je{_validateAdd(e){var i=e.getType();i!=="Group"&&i!=="Shape"&&v.throw("You may only add groups and shapes to groups.")}}Dr.prototype.nodeType="Group";Yt(Dr);var Ys=function(){return Ii.performance&&Ii.performance.now?function(){return Ii.performance.now()}:function(){return new Date().getTime()}}();class et{constructor(e,i){this.id=et.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Ys(),frameRate:0},this.func=e,this.setLayers(i)}setLayers(e){var i=[];return e?e.length>0?i=e:i=[e]:i=[],this.layers=i,this}getLayers(){return this.layers}addLayer(e){var i=this.layers,n=i.length,s;for(s=0;s<n;s++)if(i[s]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=et,i=e.animations,n=i.length,s;for(s=0;s<n;s++)if(i[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Ys(),et._addAnimation(this),this}stop(){return et._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var i=e.id,n=this.animations,s=n.length,r;for(r=0;r<s;r++)if(n[r].id===i){this.animations.splice(r,1);break}}static _runFrames(){var e={},i=this.animations,n,s,r,a,o,l,h,c,d;for(a=0;a<i.length;a++)if(n=i[a],s=n.layers,r=n.func,n._updateFrameObject(Ys()),l=s.length,r?d=r.call(n,n.frame)!==!1:d=!0,!!d)for(o=0;o<l;o++)h=s[o],h._id!==void 0&&(e[h._id]=h);for(c in e)!e.hasOwnProperty(c)||e[c].batchDraw()}static _animationLoop(){var e=et;e.animations.length?(e._runFrames(),v.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,v.requestAnimFrame(this._animationLoop))}}et.animations=[];et.animIdCounter=0;et.animRunning=!1;var tf={node:1,duration:1,easing:1,onFinish:1,yoyo:1},nf=1,Ba=2,za=3,sf=0,Ua=["fill","stroke","shadowColor"];class rf{constructor(e,i,n,s,r,a,o){this.prop=e,this.propFunc=i,this.begin=s,this._pos=s,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=r-this.begin,this.pause()}fire(e){var i=this[e];i&&i()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=Ba,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=za,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===Ba?this.setTime(e):this.state===za&&this.setTime(this.duration-e)}pause(){this.state=nf,this.fire("onPause")}getTimer(){return new Date().getTime()}}class be{constructor(e){var i=this,n=e.node,s=n._id,r,a=e.easing||an.Linear,o=!!e.yoyo,l;typeof e.duration>"u"?r=.3:e.duration===0?r=.001:r=e.duration,this.node=n,this._id=sf++;var h=n.getLayer()||(n instanceof Y.Stage?n.getLayers():null);h||v.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new et(function(){i.tween.onEnterFrame()},h),this.tween=new rf(l,function(c){i._tweenFunc(c)},a,0,1,r*1e3,o),this._addListeners(),be.attrs[s]||(be.attrs[s]={}),be.attrs[s][this._id]||(be.attrs[s][this._id]={}),be.tweens[s]||(be.tweens[s]={});for(l in e)tf[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,i){var n=this.node,s=n._id,r,a,o,l,h,c,d,f;if(o=be.tweens[s][e],o&&delete be.attrs[s][o][e],r=n.getAttr(e),v._isArray(i))if(a=[],h=Math.max(i.length,r.length),e==="points"&&i.length!==r.length&&(i.length>r.length?(d=r,r=v._prepareArrayForTween(r,i,n.closed())):(c=i,i=v._prepareArrayForTween(i,r,n.closed()))),e.indexOf("fill")===0)for(l=0;l<h;l++)if(l%2===0)a.push(i[l]-r[l]);else{var y=v.colorToRGBA(r[l]);f=v.colorToRGBA(i[l]),r[l]=y,a.push({r:f.r-y.r,g:f.g-y.g,b:f.b-y.b,a:f.a-y.a})}else for(l=0;l<h;l++)a.push(i[l]-r[l]);else Ua.indexOf(e)!==-1?(r=v.colorToRGBA(r),f=v.colorToRGBA(i),a={r:f.r-r.r,g:f.g-r.g,b:f.b-r.b,a:f.a-r.a}):a=i-r;be.attrs[s][this._id][e]={start:r,diff:a,end:i,trueEnd:c,trueStart:d},be.tweens[s][e]=this._id}_tweenFunc(e){var i=this.node,n=be.attrs[i._id][this._id],s,r,a,o,l,h,c,d;for(s in n){if(r=n[s],a=r.start,o=r.diff,d=r.end,v._isArray(a))if(l=[],c=Math.max(a.length,d.length),s.indexOf("fill")===0)for(h=0;h<c;h++)h%2===0?l.push((a[h]||0)+o[h]*e):l.push("rgba("+Math.round(a[h].r+o[h].r*e)+","+Math.round(a[h].g+o[h].g*e)+","+Math.round(a[h].b+o[h].b*e)+","+(a[h].a+o[h].a*e)+")");else for(h=0;h<c;h++)l.push((a[h]||0)+o[h]*e);else Ua.indexOf(s)!==-1?l="rgba("+Math.round(a.r+o.r*e)+","+Math.round(a.g+o.g*e)+","+Math.round(a.b+o.b*e)+","+(a.a+o.a*e)+")":l=a+o*e;i.setAttr(s,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,i=be.attrs[e._id][this._id];i.points&&i.points.trueEnd&&e.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,i=be.attrs[e._id][this._id];i.points&&i.points.trueStart&&e.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,i=this._id,n=be.tweens[e],s;this.pause();for(s in n)delete be.tweens[e][s];delete be.attrs[e][i]}}be.attrs={};be.tweens={};z.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var i=new be(t);i.play()};const an={BackEaseIn(t,e,i,n){var s=1.70158;return i*(t/=n)*t*((s+1)*t-s)+e},BackEaseOut(t,e,i,n){var s=1.70158;return i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},BackEaseInOut(t,e,i,n){var s=1.70158;return(t/=n/2)<1?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},ElasticEaseIn(t,e,i,n,s,r){var a=0;return t===0?e:(t/=n)===1?e+i:(r||(r=n*.3),!s||s<Math.abs(i)?(s=i,a=r/4):a=r/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/r))+e)},ElasticEaseOut(t,e,i,n,s,r){var a=0;return t===0?e:(t/=n)===1?e+i:(r||(r=n*.3),!s||s<Math.abs(i)?(s=i,a=r/4):a=r/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/r)+i+e)},ElasticEaseInOut(t,e,i,n,s,r){var a=0;return t===0?e:(t/=n/2)===2?e+i:(r||(r=n*(.3*1.5)),!s||s<Math.abs(i)?(s=i,a=r/4):a=r/(2*Math.PI)*Math.asin(i/s),t<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/r))+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/r)*.5+i+e)},BounceEaseOut(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,i,n){return i-an.BounceEaseOut(n-t,0,i,n)+e},BounceEaseInOut(t,e,i,n){return t<n/2?an.BounceEaseIn(t*2,0,i,n)*.5+e:an.BounceEaseOut(t*2-n,0,i,n)*.5+i*.5+e},EaseIn(t,e,i,n){return i*(t/=n)*t+e},EaseOut(t,e,i,n){return-i*(t/=n)*(t-2)+e},EaseInOut(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,i,n){return i*(t/=n)*t*t*t*t+e},StrongEaseOut(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,i,n){return i*t/n+e}},Ae=v._assign(Y,{Util:v,Transform:Nt,Node:z,Container:je,Stage:As,stages:Jn,Layer:ci,FastLayer:Or,Group:Dr,DD:re,Shape:N,shapes:rn,Animation:et,Tween:be,Easings:an,Context:xs,Canvas:Es});function di(t,e){this._waveformData=t,this._channelIndex=e}di.prototype.min_sample=function(t){var e=(t*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._at(e)};di.prototype.max_sample=function(t){var e=(t*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._at(e)};di.prototype.set_min_sample=function(t,e){var i=(t*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._set_at(i,e)};di.prototype.set_max_sample=function(t,e){var i=(t*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._set_at(i,e)};di.prototype.min_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2)};di.prototype.max_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2+1)};var Ci=127,zn=-128;function af(t,e){var i=Math.floor(t/e),n=t-i*e;return n>0&&i++,i}function of(t){var e=t.scale,i=t.amplitude_scale,n=t.split_channels,s=t.length,r=t.sample_rate,a=t.channels.map(function(K){return new Float32Array(K)}),o=n?a.length:1,l=o===1?1:2,h=l===1?20:24,c=af(s,e),d=h+c*2*o,f=new ArrayBuffer(d),y=new DataView(f),C=0,I=h,_,M,T=new Array(o),H=new Array(o);for(_=0;_<o;_++)T[_]=1/0,H[_]=-1/0;for(y.setInt32(0,l,!0),y.setUint32(4,1,!0),y.setInt32(8,r,!0),y.setInt32(12,e,!0),y.setInt32(16,c,!0),l===2&&y.setInt32(20,o,!0),M=0;M<s;M++){var B=0;if(o===1){for(_=0;_<a.length;++_)B+=a[_][M];B=Math.floor(Ci*B*i/a.length),B<T[0]&&(T[0]=B,T[0]<zn&&(T[0]=zn)),B>H[0]&&(H[0]=B,H[0]>Ci&&(H[0]=Ci))}else for(_=0;_<o;++_)B=Math.floor(Ci*a[_][M]*i),B<T[_]&&(T[_]=B,T[_]<zn&&(T[_]=zn)),B>H[_]&&(H[_]=B,H[_]>Ci&&(H[_]=Ci));if(++C===e){for(_=0;_<o;_++)y.setInt8(I++,T[_]),y.setInt8(I++,H[_]),T[_]=1/0,H[_]=-1/0;C=0}}if(C>0)for(_=0;_<o;_++)y.setInt8(I++,T[_]),y.setInt8(I++,H[_]);return f}function on(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?on=function(e){return typeof e}:on=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(t)}function lf(t){return t&&on(t)==="object"&&"sample_rate"in t&&"samples_per_pixel"in t&&"bits"in t&&"length"in t&&"data"in t}function hf(t){var e=t&&on(t)==="object"&&"byteLength"in t;if(e){var i=new DataView(t),n=i.getInt32(0,!0);if(n!==1&&n!==2)throw new TypeError("WaveformData.create(): This waveform data version not supported")}return e}function cf(t){var e=t.data,i=t.channels||1,n=24,s=t.bits===8?1:2,r=t.length*2*i;if(e.length!==r)throw new Error("WaveformData.create(): Length mismatch in JSON waveform data");var a=n+e.length*s,o=new ArrayBuffer(a),l=new DataView(o);l.setInt32(0,2,!0),l.setUint32(4,t.bits===8,!0),l.setInt32(8,t.sample_rate,!0),l.setInt32(12,t.samples_per_pixel,!0),l.setInt32(16,t.length,!0),l.setInt32(20,i,!0);var h=n,c;if(t.bits===8)for(c=0;c<e.length;c++)l.setInt8(h++,e[c],!0);else for(c=0;c<e.length;c++)l.setInt16(h,e[c],!0),h+=2;return o}function df(t,e){var i=atob(t);if(e){for(var n=new Uint8Array(i.length),s=0,r=i.length;s<r;++s)n[s]=i.charCodeAt(s);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}function uf(t,e,i){var n=e===void 0?null:e,s=i===void 0?!1:i,r=df(t,s),a=r.indexOf(`
`,10)+1,o=r.substring(a)+(n?"//# sourceMappingURL="+n:""),l=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(l)}function ff(t,e,i){var n;return function(r){return n=n||uf(t,e,i),new Worker(n,r)}}var pf=ff("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogQXVkaW9CdWZmZXItYmFzZWQgV2F2ZWZvcm1EYXRhIGdlbmVyYXRvcgogICAqCiAgICogQWRhcHRlZCBmcm9tIEJsb2NrRmlsZTo6Q2FsY1N1bW1hcnkgaW4gQXVkYWNpdHksIHdpdGggcGVybWlzc2lvbi4KICAgKiBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9hdWRhY2l0eS9zb3VyY2UvYnJvd3NlL2F1ZGFjaXR5LXNyYy90cnVuay9zcmMvQmxvY2tGaWxlLmNwcAogICAqLwogIHZhciBJTlQ4X01BWCA9IDEyNzsKICB2YXIgSU5UOF9NSU4gPSAtMTI4OwoKICBmdW5jdGlvbiBjYWxjdWxhdGVXYXZlZm9ybURhdGFMZW5ndGgoYXVkaW9fc2FtcGxlX2NvdW50LCBzY2FsZSkgewogICAgdmFyIGRhdGFfbGVuZ3RoID0gTWF0aC5mbG9vcihhdWRpb19zYW1wbGVfY291bnQgLyBzY2FsZSk7CiAgICB2YXIgc2FtcGxlc19yZW1haW5pbmcgPSBhdWRpb19zYW1wbGVfY291bnQgLSBkYXRhX2xlbmd0aCAqIHNjYWxlOwoKICAgIGlmIChzYW1wbGVzX3JlbWFpbmluZyA+IDApIHsKICAgICAgZGF0YV9sZW5ndGgrKzsKICAgIH0KCiAgICByZXR1cm4gZGF0YV9sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBnZW5lcmF0ZVdhdmVmb3JtRGF0YShvcHRpb25zKSB7CiAgICB2YXIgc2NhbGUgPSBvcHRpb25zLnNjYWxlOwogICAgdmFyIGFtcGxpdHVkZV9zY2FsZSA9IG9wdGlvbnMuYW1wbGl0dWRlX3NjYWxlOwogICAgdmFyIHNwbGl0X2NoYW5uZWxzID0gb3B0aW9ucy5zcGxpdF9jaGFubmVsczsKICAgIHZhciBsZW5ndGggPSBvcHRpb25zLmxlbmd0aDsKICAgIHZhciBzYW1wbGVfcmF0ZSA9IG9wdGlvbnMuc2FtcGxlX3JhdGU7CiAgICB2YXIgY2hhbm5lbHMgPSBvcHRpb25zLmNoYW5uZWxzLm1hcChmdW5jdGlvbiAoY2hhbm5lbCkgewogICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShjaGFubmVsKTsKICAgIH0pOwogICAgdmFyIG91dHB1dF9jaGFubmVscyA9IHNwbGl0X2NoYW5uZWxzID8gY2hhbm5lbHMubGVuZ3RoIDogMTsKICAgIHZhciB2ZXJzaW9uID0gb3V0cHV0X2NoYW5uZWxzID09PSAxID8gMSA6IDI7CiAgICB2YXIgaGVhZGVyX3NpemUgPSB2ZXJzaW9uID09PSAxID8gMjAgOiAyNDsKICAgIHZhciBkYXRhX2xlbmd0aCA9IGNhbGN1bGF0ZVdhdmVmb3JtRGF0YUxlbmd0aChsZW5ndGgsIHNjYWxlKTsKICAgIHZhciB0b3RhbF9zaXplID0gaGVhZGVyX3NpemUgKyBkYXRhX2xlbmd0aCAqIDIgKiBvdXRwdXRfY2hhbm5lbHM7CiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRvdGFsX3NpemUpOwogICAgdmFyIGRhdGFfdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpOwogICAgdmFyIHNjYWxlX2NvdW50ZXIgPSAwOwogICAgdmFyIG9mZnNldCA9IGhlYWRlcl9zaXplOwogICAgdmFyIGNoYW5uZWwsIGk7CiAgICB2YXIgbWluX3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CiAgICB2YXIgbWF4X3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CgogICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICBtYXhfdmFsdWVbY2hhbm5lbF0gPSAtSW5maW5pdHk7CiAgICB9CgogICAgZGF0YV92aWV3LnNldEludDMyKDAsIHZlcnNpb24sIHRydWUpOyAvLyBWZXJzaW9uCgogICAgZGF0YV92aWV3LnNldFVpbnQzMig0LCAxLCB0cnVlKTsgLy8gSXMgOCBiaXQ/CgogICAgZGF0YV92aWV3LnNldEludDMyKDgsIHNhbXBsZV9yYXRlLCB0cnVlKTsgLy8gU2FtcGxlIHJhdGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTIsIHNjYWxlLCB0cnVlKTsgLy8gU2NhbGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTYsIGRhdGFfbGVuZ3RoLCB0cnVlKTsgLy8gTGVuZ3RoCgogICAgaWYgKHZlcnNpb24gPT09IDIpIHsKICAgICAgZGF0YV92aWV3LnNldEludDMyKDIwLCBvdXRwdXRfY2hhbm5lbHMsIHRydWUpOwogICAgfQoKICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgc2FtcGxlID0gMDsKCiAgICAgIGlmIChvdXRwdXRfY2hhbm5lbHMgPT09IDEpIHsKICAgICAgICBmb3IgKGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgY2hhbm5lbHMubGVuZ3RoOyArK2NoYW5uZWwpIHsKICAgICAgICAgIHNhbXBsZSArPSBjaGFubmVsc1tjaGFubmVsXVtpXTsKICAgICAgICB9CgogICAgICAgIHNhbXBsZSA9IE1hdGguZmxvb3IoSU5UOF9NQVggKiBzYW1wbGUgKiBhbXBsaXR1ZGVfc2NhbGUgLyBjaGFubmVscy5sZW5ndGgpOwoKICAgICAgICBpZiAoc2FtcGxlIDwgbWluX3ZhbHVlWzBdKSB7CiAgICAgICAgICBtaW5fdmFsdWVbMF0gPSBzYW1wbGU7CgogICAgICAgICAgaWYgKG1pbl92YWx1ZVswXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgIG1pbl92YWx1ZVswXSA9IElOVDhfTUlOOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHNhbXBsZSA+IG1heF92YWx1ZVswXSkgewogICAgICAgICAgbWF4X3ZhbHVlWzBdID0gc2FtcGxlOwoKICAgICAgICAgIGlmIChtYXhfdmFsdWVbMF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICBtYXhfdmFsdWVbMF0gPSBJTlQ4X01BWDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgKytjaGFubmVsKSB7CiAgICAgICAgICBzYW1wbGUgPSBNYXRoLmZsb29yKElOVDhfTUFYICogY2hhbm5lbHNbY2hhbm5lbF1baV0gKiBhbXBsaXR1ZGVfc2NhbGUpOwoKICAgICAgICAgIGlmIChzYW1wbGUgPCBtaW5fdmFsdWVbY2hhbm5lbF0pIHsKICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gc2FtcGxlOwoKICAgICAgICAgICAgaWYgKG1pbl92YWx1ZVtjaGFubmVsXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gSU5UOF9NSU47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2FtcGxlID4gbWF4X3ZhbHVlW2NoYW5uZWxdKSB7CiAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IHNhbXBsZTsKCiAgICAgICAgICAgIGlmIChtYXhfdmFsdWVbY2hhbm5lbF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IElOVDhfTUFYOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoKytzY2FsZV9jb3VudGVyID09PSBzY2FsZSkgewogICAgICAgIGZvciAoY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBvdXRwdXRfY2hhbm5lbHM7IGNoYW5uZWwrKykgewogICAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgICBkYXRhX3ZpZXcuc2V0SW50OChvZmZzZXQrKywgbWF4X3ZhbHVlW2NoYW5uZWxdKTsKICAgICAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICAgICAgbWF4X3ZhbHVlW2NoYW5uZWxdID0gLUluZmluaXR5OwogICAgICAgIH0KCiAgICAgICAgc2NhbGVfY291bnRlciA9IDA7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc2NhbGVfY291bnRlciA+IDApIHsKICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1heF92YWx1ZVtjaGFubmVsXSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnVmZmVyOwogIH0KCiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlKGV2dCkgewogICAgdmFyIGJ1ZmZlciA9IGdlbmVyYXRlV2F2ZWZvcm1EYXRhKGV2dC5kYXRhKTsgLy8gVHJhbnNmZXIgYnVmZmVyIHRvIHRoZSBjYWxsaW5nIHRocmVhZAoKICAgIHRoaXMucG9zdE1lc3NhZ2UoYnVmZmVyLCBbYnVmZmVyXSk7CiAgICB0aGlzLmNsb3NlKCk7CiAgfTsKCn0pKCk7Cgo=",null,!1);function tt(t){if(lf(t)&&(t=cf(t)),hf(t)){this._data=new DataView(t),this._offset=this._version()===2?24:20,this._channels=[];for(var e=0;e<this.channels;e++)this._channels[e]=new di(this,e)}else throw new TypeError("WaveformData.create(): Unknown data format")}var Un={scale:512,amplitude_scale:1,split_channels:!1,disable_worker:!1};function gf(t){var e={scale:t.scale||Un.scale,amplitude_scale:t.amplitude_scale||Un.amplitude_scale,split_channels:t.split_channels||Un.split_channels,disable_worker:t.disable_worker||Un.disable_worker};return e}function _f(t){for(var e=[],i=0;i<t.numberOfChannels;++i)e.push(t.getChannelData(i).buffer);return e}function Ml(t,e,i){var n=_f(t);if(e.disable_worker){var s=of({scale:e.scale,amplitude_scale:e.amplitude_scale,split_channels:e.split_channels,length:t.length,sample_rate:t.sampleRate,channels:n});i(null,new tt(s),t)}else{var r=new pf;r.onmessage=function(a){i(null,new tt(a.data),t)},r.postMessage({scale:e.scale,amplitude_scale:e.amplitude_scale,split_channels:e.split_channels,length:t.length,sample_rate:t.sampleRate,channels:n},n)}}function mf(t,e,i,n){function s(r){r||(r=new DOMException("EncodingError")),n(r)}t.decodeAudioData(e,function(r){Ml(r,i,n)},s)}tt.create=function(e){return new tt(e)};tt.createFromAudio=function(t,e){var i=gf(t);if(t.audio_context&&t.array_buffer)return mf(t.audio_context,t.array_buffer,i,e);if(t.audio_buffer)return Ml(t.audio_buffer,i,e);throw new TypeError("WaveformData.createFromAudio(): Pass either an AudioContext and ArrayBuffer, or an AudioBuffer object")};tt.prototype={resample:function(e){if(e.scale=typeof e.scale=="number"?e.scale:null,e.width=typeof e.width=="number"?e.width:null,e.width!=null&&e.width<=0)throw new RangeError("WaveformData.resample(): width should be a positive integer value");if(e.scale!=null&&e.scale<=0)throw new RangeError("WaveformData.resample(): scale should be a positive integer value");if(!e.scale&&!e.width)throw new Error("WaveformData.resample(): Missing scale or width option");var i=e.scale||Math.floor(this.duration*this.sample_rate/e.width),n=this.scale,s=this.length,r=s*this.scale,a=Math.ceil(r/i),o=24,l=this.bits===8?1:2,h=o+a*2*this.channels*l,c=new ArrayBuffer(h),d=new DataView(c);d.setInt32(0,2,!0),d.setUint32(4,this.bits===8,!0),d.setInt32(8,this.sample_rate,!0),d.setInt32(12,i,!0),d.setInt32(16,a,!0),d.setInt32(20,this.channels,!0);var f=new tt(c),y=0,C=0,I=this.channels,_=new Array(I),M=new Array(I),T;for(T=0;T<I;++T)s>0?(_[T]=this.channel(T).min_sample(y),M[T]=this.channel(T).max_sample(y)):(_[T]=0,M[T]=0);var H=this.bits===8?-128:-32768,B=this.bits===8?127:32767;if(i<n)throw new Error("WaveformData.resample(): Zoom level "+i+" too low, minimum: "+n);var K,se,ge,ee,ae;function _e(Te){return Math.floor(Te*i)}for(;y<s;){for(;Math.floor(_e(C)/n)===y;){if(C>0)for(T=0;T<I;++T)f.channel(T).set_min_sample(C-1,_[T]),f.channel(T).set_max_sample(C-1,M[T]);if(ae=y,C++,K=_e(C),se=_e(C-1),K!==se)for(T=0;T<I;++T)_[T]=B,M[T]=H}for(K=_e(C),ge=Math.floor(K/n),ge>s&&(ge=s);y<ge;){for(T=0;T<I;++T)ee=this.channel(T).min_sample(y),ee<_[T]&&(_[T]=ee),ee=this.channel(T).max_sample(y),ee>M[T]&&(M[T]=ee);y++}}if(y!==ae)for(T=0;T<I;++T)f.channel(T).set_min_sample(C-1,_[T]),f.channel(T).set_max_sample(C-1,M[T]);return f},concat:function(){var e=this,i=Array.prototype.slice.call(arguments);i.forEach(function(s){if(e.channels!==s.channels||e.sample_rate!==s.sample_rate||e.bits!==s.bits||e.scale!==s.scale)throw new Error("WaveformData.concat(): Waveforms are incompatible")});var n=this._concatBuffers.apply(this,i);return tt.create(n)},_concatBuffers:function(){var e=Array.prototype.slice.call(arguments),i=this._offset,n=i,s=0,r=[this].concat(e).map(function(C){return C._data.buffer}),a,o;for(a=0;a<r.length;a++){o=r[a];var l=new DataView(o).getInt32(16,!0);n+=o.byteLength-i,s+=l}var h=new ArrayBuffer(n),c=new DataView(r[0]),d=new DataView(h);for(a=0;a<i;a++)d.setUint8(a,c.getUint8(a));d.setInt32(16,s,!0);var f=0,y=new Uint8Array(h,i);for(a=0;a<r.length;a++)o=r[a],y.set(new Uint8Array(o,i),f),f+=o.byteLength-i;return h},_offsetValues:function(e,i,n){var s=[],r=this.channels;n+=e*r*2;for(var a=0;a<i;a++)s.push(this._at(a*r*2+n));return s},_version:function(){return this._data.getInt32(0,!0)},get length(){return this._data.getUint32(16,!0)},get bits(){var t=Boolean(this._data.getUint32(4,!0));return t?8:16},get duration(){return this.length*this.scale/this.sample_rate},get pixels_per_second(){return this.sample_rate/this.scale},get seconds_per_pixel(){return this.scale/this.sample_rate},get channels(){return this._version()===2?this._data.getInt32(20,!0):1},channel:function(e){if(e>=0&&e<this._channels.length)return this._channels[e];throw new RangeError("Invalid channel: "+e)},get sample_rate(){return this._data.getInt32(8,!0)},get scale(){return this._data.getInt32(12,!0)},_at:function(e){return this.bits===8?this._data.getInt8(this._offset+e):this._data.getInt16(this._offset+e*2,!0)},_set_at:function(e,i){return this.bits===8?this._data.setInt8(this._offset+e,i):this._data.setInt16(this._offset+e*2,i,!0)},at_time:function(e){return Math.floor(e*this.sample_rate/this.scale)},time:function(e){return e*this.scale/this.sample_rate},toJSON:function(){for(var e={version:2,channels:this.channels,sample_rate:this.sample_rate,samples_per_pixel:this.scale,bits:this.bits,length:this.length,data:[]},i=0;i<this.length;i++)for(var n=0;n<this.channels;n++)e.data.push(this.channel(n).min_sample(i)),e.data.push(this.channel(n).max_sample(i));return e},toArrayBuffer:function(){return this._data.buffer}};var Ll={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function s(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function r(l,h,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var y=new s(c,d||l,f),C=i?i+h:h;return l._events[C]?l._events[C].fn?l._events[C]=[l._events[C],y]:l._events[C].push(y):(l._events[C]=y,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new n:delete l._events[h]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],c,d;if(this._eventsCount===0)return h;for(d in c=this._events)e.call(c,d)&&h.push(i?d.slice(1):d);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},o.prototype.listeners=function(h){var c=i?i+h:h,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,y=d.length,C=new Array(y);f<y;f++)C[f]=d[f].fn;return C},o.prototype.listenerCount=function(h){var c=i?i+h:h,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(h,c,d,f,y,C){var I=i?i+h:h;if(!this._events[I])return!1;var _=this._events[I],M=arguments.length,T,H;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),M){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,c),!0;case 3:return _.fn.call(_.context,c,d),!0;case 4:return _.fn.call(_.context,c,d,f),!0;case 5:return _.fn.call(_.context,c,d,f,y),!0;case 6:return _.fn.call(_.context,c,d,f,y,C),!0}for(H=1,T=new Array(M-1);H<M;H++)T[H-1]=arguments[H];_.fn.apply(_.context,T)}else{var B=_.length,K;for(H=0;H<B;H++)switch(_[H].once&&this.removeListener(h,_[H].fn,void 0,!0),M){case 1:_[H].fn.call(_[H].context);break;case 2:_[H].fn.call(_[H].context,c);break;case 3:_[H].fn.call(_[H].context,c,d);break;case 4:_[H].fn.call(_[H].context,c,d,f);break;default:if(!T)for(K=1,T=new Array(M-1);K<M;K++)T[K-1]=arguments[K];_[H].fn.apply(_[H].context,T)}}return!0},o.prototype.on=function(h,c,d){return r(this,h,c,d,!1)},o.prototype.once=function(h,c,d){return r(this,h,c,d,!0)},o.prototype.removeListener=function(h,c,d,f){var y=i?i+h:h;if(!this._events[y])return this;if(!c)return a(this,y),this;var C=this._events[y];if(C.fn)C.fn===c&&(!f||C.once)&&(!d||C.context===d)&&a(this,y);else{for(var I=0,_=[],M=C.length;I<M;I++)(C[I].fn!==c||f&&!C[I].once||d&&C[I].context!==d)&&_.push(C[I]);_.length?this._events[y]=_.length===1?_[0]:_:a(this,y)}return this},o.prototype.removeAllListeners=function(h){var c;return h?(c=i?i+h:h,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o})(Ll);var Rl=Ll.exports;function ln(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ln=function(e){return typeof e}:ln=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(t)}function Se(t,e,i){this.time=t,this.type=e,this.id=i}Se.POINT=0;Se.SEGMENT_START=1;Se.SEGMENT_END=2;Se.sorter=function(t,e){return t.time-e.time};function Va(t,e){for(t=t.toString();t.length<e;)t="0"+t;return t}function Nr(t,e){var i=[],n=Math.floor(t%1*Math.pow(10,e)),s=Math.floor(t),r=Math.floor(s/60),a=Math.floor(r/60);a>0&&i.push(a),i.push(r%60),i.push(s%60);for(var o=0;o<i.length;o++)i[o]=Va(i[o],2);return i=i.join(":"),e>0&&(i+="."+Va(n,e)),i}function vf(t,e){if(e===0)return 0;var i=1;t<0&&(i=-1,t=-t);var n=Math.ceil(t);return i*((n+e-1)/e|0)*e}function ui(t,e,i){return t<e?e:t>i?i:t}function oe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ps(t,e){for(var i in e)oe(e,i)&&(t[i]=e[i]);return t}function yf(t){if(t.length===0)return!0;for(var e=t[0],i=1;i<t.length;i++){if(e>=t[i])return!1;e=t[i]}return!0}function ls(t){return typeof t=="number"}function Ol(t){return!(typeof t!="number"||t!==t||t===1/0||t===-1/0)}function Ut(t){return typeof t=="number"&&Number.isFinite(t)}function Di(t){return t!==null&&ln(t)==="object"&&!Array.isArray(t)}function oi(t){return typeof t=="string"}function bf(t){return Object.prototype.toString.call(t).includes("ArrayBuffer")}function vt(t){return t==null}function wf(t){return typeof t=="function"}function Dl(t){return t===!0||t===!1}function Xa(t){return t instanceof HTMLElement}function Cf(t){return Array.isArray(t)}function Is(t){return Di(t)&&oe(t,"linearGradientStart")&&oe(t,"linearGradientEnd")&&oe(t,"linearGradientColorStops")&&ls(t.linearGradientStart)&&ls(t.linearGradientEnd)&&Cf(t.linearGradientColorStops)&&t.linearGradientColorStops.length===2}var Sf=/HeadlessChrome/.test(navigator.userAgent);function Tf(){return Sf||navigator.webdriver?!1:(typeof document>"u"?"undefined":ln(document))==="object"&&"visibilityState"in document&&document.visibilityState==="visible"}var Nl=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,kf=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,Vt={forward:{},reverse:{}},Hr=0,Ms=1,Ls=2;Vt.forward[Se.POINT]=Hr;Vt.forward[Se.SEGMENT_START]=Ms;Vt.forward[Se.SEGMENT_END]=Ls;Vt.reverse[Se.POINT]=Hr;Vt.reverse[Se.SEGMENT_START]=Ls;Vt.reverse[Se.SEGMENT_END]=Ms;var Rs={};Rs[Hr]="points.enter";Rs[Ms]="segments.enter";Rs[Ls]="segments.exit";function xf(t,e){switch(e.type){case Se.POINT:return t.points.getPoint(e.id);case Se.SEGMENT_START:case Se.SEGMENT_END:return t.segments.getSegment(e.id);default:throw new Error("getPointOrSegment: id not found?")}}function lt(t){this._cues=[],this._peaks=t,this._previousTime=-1,this._updateCues=this._updateCues.bind(this),this._onPlaying=this.onPlaying.bind(this),this._onSeeked=this.onSeeked.bind(this),this._onTimeUpdate=this.onTimeUpdate.bind(this),this._onAnimationFrame=this.onAnimationFrame.bind(this),this._rAFHandle=null,this._activeSegments={},this._attachEventHandlers()}lt.prototype._updateCues=function(){var t=this,e=t._peaks.points.getPoints(),i=t._peaks.segments.getSegments();t._cues.length=0,e.forEach(function(s){t._cues.push(new Se(s.time,Se.POINT,s.id))}),i.forEach(function(s){t._cues.push(new Se(s.startTime,Se.SEGMENT_START,s.id)),t._cues.push(new Se(s.endTime,Se.SEGMENT_END,s.id))}),t._cues.sort(Se.sorter);var n=t._peaks.player.getCurrentTime();t._updateActiveSegments(n)};lt.prototype._onUpdate=function(t,e){var i=t>e,n,s,r;i?(n=0,s=this._cues.length,r=1):(n=this._cues.length-1,s=-1,r=-1);for(var a=n;i?a<s:a>s;a+=r){var o=this._cues[a];if(i?o.time>e:o.time<e){if(i?o.time>t:o.time<t)break;var l=xf(this._peaks,o),h=i?Vt.forward[o.type]:Vt.reverse[o.type];h===Ms?this._activeSegments[l.id]=l:h===Ls&&delete this._activeSegments[l.id],this._peaks.emit(Rs[h],l)}}};lt.prototype.onTimeUpdate=function(t){Tf()||(this._peaks.player.isPlaying()&&!this._peaks.player.isSeeking()&&this._onUpdate(t,this._previousTime),this._previousTime=t)};lt.prototype.onAnimationFrame=function(){var t=this._peaks.player.getCurrentTime();this._peaks.player.isSeeking()||this._onUpdate(t,this._previousTime),this._previousTime=t,this._peaks.player.isPlaying()&&(this._rAFHandle=Nl(this._onAnimationFrame))};lt.prototype.onPlaying=function(){this._previousTime=this._peaks.player.getCurrentTime(),this._rAFHandle=Nl(this._onAnimationFrame)};lt.prototype.onSeeked=function(t){this._previousTime=t,this._updateActiveSegments(t)};function Ef(t){return function(i){return i.id===t}}lt.prototype._updateActiveSegments=function(t){var e=this,i=e._peaks.segments.getSegmentsAtTime(t);for(var n in e._activeSegments)if(oe(e._activeSegments,n)){var s=i.find(Ef(n));s||(e._peaks.emit("segments.exit",e._activeSegments[n]),delete e._activeSegments[n])}i.forEach(function(r){r.id in e._activeSegments||(e._activeSegments[r.id]=r,e._peaks.emit("segments.enter",r))})};var hs=Array("points.update","points.dragmove","points.add","points.remove","points.remove_all","segments.update","segments.dragged","segments.add","segments.remove","segments.remove_all");lt.prototype._attachEventHandlers=function(){this._peaks.on("player.timeupdate",this._onTimeUpdate),this._peaks.on("player.playing",this._onPlaying),this._peaks.on("player.seeked",this._onSeeked);for(var t=0;t<hs.length;t++)this._peaks.on(hs[t],this._updateCues);this._updateCues()};lt.prototype._detachEventHandlers=function(){this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.seeked",this._onSeeked);for(var t=0;t<hs.length;t++)this._peaks.off(hs[t],this._updateCues)};lt.prototype.destroy=function(){this._rAFHandle&&(kf(this._rAFHandle),this._rAFHandle=null),this._detachEventHandlers(),this._previousTime=-1};var Af=["peaks","id","time","labelText","color","editable"];function Hl(t,e){if(!Ut(t.time))throw new TypeError("peaks.points."+e+": time should be a numeric value");if(t.time<0)throw new RangeError("peaks.points."+e+": time should not be negative");if(vt(t.labelText))t.labelText="";else if(!oi(t.labelText))throw new TypeError("peaks.points."+e+": labelText must be a string");if(!Dl(t.editable))throw new TypeError("peaks.points."+e+": editable must be true or false");if(t.color&&!oi(t.color)&&!Is(t.color))throw new TypeError("peaks.points."+e+": color must be a string or a valid linear gradient object")}function Bi(t){Hl(t,"add()"),this._peaks=t.peaks,this._id=t.id,this._time=t.time,this._labelText=t.labelText,this._color=t.color,this._editable=t.editable,this._setUserData(t)}Bi.prototype._setUserData=function(t){for(var e in t)oe(t,e)&&Af.indexOf(e)===-1&&(this[e]=t[e])};Object.defineProperties(Bi.prototype,{id:{enumerable:!0,get:function(){return this._id}},time:{enumerable:!0,get:function(){return this._time}},labelText:{get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}});Bi.prototype.update=function(t){var e={time:this.time,labelText:this.labelText,color:this.color,editable:this.editable};Ps(e,t),Hl(e,"update()"),this._time=e.time,this._labelText=e.labelText,this._color=e.color,this._editable=e.editable,this._setUserData(t),this._peaks.emit("points.update",this)};Bi.prototype.isVisible=function(t,e){return this.time>=t&&this.time<e};Bi.prototype._setTime=function(t){this._time=t};function Be(t){this._peaks=t,this._points=[],this._pointsById={},this._pointIdCounter=0}Be.prototype._getNextPointId=function(){return"peaks.point."+this._pointIdCounter++};Be.prototype._addPoint=function(t){this._points.push(t),this._pointsById[t.id]=t};Be.prototype._createPoint=function(t){var e={peaks:this._peaks};return Ps(e,t),vt(e.id)&&(e.id=this._getNextPointId()),vt(e.labelText)&&(e.labelText=""),vt(e.editable)&&(e.editable=!1),new Bi(e)};Be.prototype.getPoints=function(){return this._points};Be.prototype.getPoint=function(t){return this._pointsById[t]||null};Be.prototype.find=function(t,e){return this._points.filter(function(i){return i.isVisible(t,e)})};Be.prototype.add=function(){var t=this,e=Array.isArray(arguments[0]),i=e?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(n){var s=t._createPoint(n);if(oe(t._pointsById,s.id))throw new Error("peaks.points.add(): duplicate id");return s}),i.forEach(function(n){t._addPoint(n)}),this._peaks.emit("points.add",i),e?i:i[0]};Be.prototype._findPoint=function(t){for(var e=[],i=0,n=this._points.length;i<n;i++)t(this._points[i])&&e.push(i);return e};Be.prototype._removeIndexes=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i]-e.length,s=this._points.splice(n,1)[0];delete this._pointsById[s.id],e.push(s)}return e};Be.prototype._removePoints=function(t){var e=this._findPoint(t),i=this._removeIndexes(e);return this._peaks.emit("points.remove",i),i};Be.prototype.remove=function(t){return this._removePoints(function(e){return e===t})};Be.prototype.removeById=function(t){return this._removePoints(function(e){return e.id===t})};Be.prototype.removeByTime=function(t){return this._removePoints(function(e){return e.time===t})};Be.prototype.removeAll=function(){this._points=[],this._pointsById={},this._peaks.emit("points.remove_all")};var Pf=["peaks","id","startTime","endTime","labelText","color","editable"];function Fl(t,e){if(!Ut(t.startTime))throw new TypeError("peaks.segments."+e+": startTime should be a valid number");if(!Ut(t.endTime))throw new TypeError("peaks.segments."+e+": endTime should be a valid number");if(t.startTime<0)throw new RangeError("peaks.segments."+e+": startTime should not be negative");if(t.endTime<0)throw new RangeError("peaks.segments."+e+": endTime should not be negative");if(t.endTime<t.startTime)throw new RangeError("peaks.segments."+e+": endTime should not be less than startTime");if(vt(t.labelText))t.labelText="";else if(!oi(t.labelText))throw new TypeError("peaks.segments."+e+": labelText must be a string");if(!Dl(t.editable))throw new TypeError("peaks.segments."+e+": editable must be true or false");if(t.color&&!oi(t.color)&&!Is(t.color))throw new TypeError("peaks.segments."+e+": color must be a string or a valid linear gradient object")}function fi(t){Fl(t,"add()"),this._peaks=t.peaks,this._id=t.id,this._startTime=t.startTime,this._endTime=t.endTime,this._labelText=t.labelText,this._color=t.color,this._editable=t.editable,this._setUserData(t)}fi.prototype._setUserData=function(t){for(var e in t)oe(t,e)&&Pf.indexOf(e)===-1&&(this[e]=t[e])};Object.defineProperties(fi.prototype,{id:{enumerable:!0,get:function(){return this._id}},startTime:{enumerable:!0,get:function(){return this._startTime}},endTime:{enumerable:!0,get:function(){return this._endTime}},labelText:{enumerable:!0,get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}});fi.prototype.update=function(t){var e={startTime:this.startTime,endTime:this.endTime,labelText:this.labelText,color:this.color,editable:this.editable};Ps(e,t),Fl(e,"update()"),this._startTime=e.startTime,this._endTime=e.endTime,this._labelText=e.labelText,this._color=e.color,this._editable=e.editable,this._setUserData(t),this._peaks.emit("segments.update",this)};fi.prototype.isVisible=function(t,e){return this.startTime<e&&t<this.endTime};fi.prototype._setStartTime=function(t){this._startTime=t};fi.prototype._setEndTime=function(t){this._endTime=t};function Ie(t){this._peaks=t,this._segments=[],this._segmentsById={},this._segmentIdCounter=0,this._colorIndex=0}Ie.prototype._getNextSegmentId=function(){return"peaks.segment."+this._segmentIdCounter++};var Ya=["#001f3f","#0074d9","#7fdbff","#39cccc","#ffdc00","#ff851b","#ff4136","#85144b","#f012be","#b10dc9"];Ie.prototype._getSegmentColor=function(){return this._peaks.options.randomizeSegmentColor?(++this._colorIndex===Ya.length&&(this._colorIndex=0),Ya[this._colorIndex]):this._peaks.options.segmentColor};Ie.prototype._addSegment=function(t){this._segments.push(t),this._segmentsById[t.id]=t};Ie.prototype._createSegment=function(t){if(!Di(t))throw new TypeError("peaks.segments.add(): expected a Segment object parameter");var e={peaks:this._peaks};return Ps(e,t),vt(e.id)&&(e.id=this._getNextSegmentId()),vt(e.color)&&(e.color=this._getSegmentColor()),vt(e.labelText)&&(e.labelText=""),vt(e.editable)&&(e.editable=!1),new fi(e)};Ie.prototype.getSegments=function(){return this._segments};Ie.prototype.getSegment=function(t){return this._segmentsById[t]||null};Ie.prototype.getSegmentsAtTime=function(t){return this._segments.filter(function(e){return t>=e.startTime&&t<e.endTime})};Ie.prototype.find=function(t,e){return this._segments.filter(function(i){return i.isVisible(t,e)})};Ie.prototype.add=function(){var t=this,e=Array.isArray(arguments[0]),i=e?arguments[0]:Array.prototype.slice.call(arguments);return i=i.map(function(n){var s=t._createSegment(n);if(oe(t._segmentsById,s.id))throw new Error("peaks.segments.add(): duplicate id");return s}),i.forEach(function(n){t._addSegment(n)}),this._peaks.emit("segments.add",i),e?i:i[0]};Ie.prototype._findSegment=function(t){for(var e=[],i=0,n=this._segments.length;i<n;i++)t(this._segments[i])&&e.push(i);return e};Ie.prototype._removeIndexes=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i]-e.length,s=this._segments.splice(n,1)[0];delete this._segmentsById[s.id],e.push(s)}return e};Ie.prototype._removeSegments=function(t){var e=this._findSegment(t),i=this._removeIndexes(e);return this._peaks.emit("segments.remove",i),i};Ie.prototype.remove=function(t){return this._removeSegments(function(e){return e===t})};Ie.prototype.removeById=function(t){return this._removeSegments(function(e){return e.id===t})};Ie.prototype.removeByTime=function(t,e){e=typeof e=="number"?e:0;var i;return e>0?i=function(s){return s.startTime===t&&s.endTime===e}:i=function(s){return s.startTime===t},this._removeSegments(i)};Ie.prototype.removeAll=function(){this._segments=[],this._segmentsById={},this._peaks.emit("segments.remove_all")};var If=["OBJECT","TEXTAREA","INPUT","SELECT","OPTION"],Gl=32,Wl=9,Bl=37,zl=39,Mf=[Gl,Wl,Bl,zl];function Fr(t){this.eventEmitter=t,this._handleKeyEvent=this._handleKeyEvent.bind(this),document.addEventListener("keydown",this._handleKeyEvent),document.addEventListener("keypress",this._handleKeyEvent),document.addEventListener("keyup",this._handleKeyEvent)}Fr.prototype._handleKeyEvent=function(e){if(If.indexOf(e.target.nodeName)===-1){if(Mf.indexOf(e.type)>-1&&e.preventDefault(),e.type==="keydown"||e.type==="keypress")switch(e.keyCode){case Gl:this.eventEmitter.emit("keyboard.space");break;case Wl:this.eventEmitter.emit("keyboard.tab");break}else if(e.type==="keyup")switch(e.keyCode){case Bl:e.shiftKey?this.eventEmitter.emit("keyboard.shift_left"):this.eventEmitter.emit("keyboard.left");break;case zl:e.shiftKey?this.eventEmitter.emit("keyboard.shift_right"):this.eventEmitter.emit("keyboard.right");break}}};Fr.prototype.destroy=function(){document.removeEventListener("keydown",this._handleKeyEvent),document.removeEventListener("keypress",this._handleKeyEvent),document.removeEventListener("keyup",this._handleKeyEvent)};function it(t){this._mediaElement=t}it.prototype._addMediaListener=function(t,e){this._listeners.push({type:t,callback:e}),this._mediaElement.addEventListener(t,e)};it.prototype.init=function(t){var e=this;return e._eventEmitter=t,e._listeners=[],e._duration=e.getDuration(),e._addMediaListener("timeupdate",function(){e._eventEmitter.emit("player.timeupdate",e.getCurrentTime())}),e._addMediaListener("playing",function(){e._eventEmitter.emit("player.playing",e.getCurrentTime())}),e._addMediaListener("pause",function(){e._eventEmitter.emit("player.pause",e.getCurrentTime())}),e._addMediaListener("ended",function(){e._eventEmitter.emit("player.ended")}),e._addMediaListener("seeked",function(){e._eventEmitter.emit("player.seeked",e.getCurrentTime())}),e._addMediaListener("canplay",function(){e._eventEmitter.emit("player.canplay")}),e._addMediaListener("error",function(i){e._eventEmitter.emit("player.error",i.target.error)}),e._interval=null,new Promise(function(i,n){function s(r){e._mediaElement.removeEventListener("loadedmetadata",s),e._mediaElement.removeEventListener("error",s),r.type==="loadedmetadata"?i():n(r.target.error)}e._mediaElement.readyState===HTMLMediaElement.HAVE_NOTHING?(e._mediaElement.addEventListener("loadedmetadata",s),e._mediaElement.addEventListener("error",s),e._mediaElement.load()):i()})};it.prototype.destroy=function(){for(var t=0;t<this._listeners.length;t++){var e=this._listeners[t];this._mediaElement.removeEventListener(e.type,e.callback)}this._listeners.length=0,this._mediaElement=null};it.prototype.play=function(){return this._mediaElement.play()};it.prototype.pause=function(){this._mediaElement.pause()};it.prototype.isPlaying=function(){return!this._mediaElement.paused};it.prototype.isSeeking=function(){return this._mediaElement.seeking};it.prototype.getCurrentTime=function(){return this._mediaElement.currentTime};it.prototype.getDuration=function(){return this._mediaElement.duration};it.prototype.seek=function(t){this._mediaElement.currentTime=t};function wn(t,e){this._eventEmitter=t,this._mediaElement=e,this._playerCanPlayHandler=this._playerCanPlayHandler.bind(this),this._playerErrorHandler=this._playerErrorHandler.bind(this)}wn.prototype.setSource=function(t,e){var i=this;return i._options=t,i._callback=e,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),new Promise(function(n,s){i._resolve=n,i._reject=s,i._eventEmitter.on("player.canplay",i._playerCanPlayHandler),i._eventEmitter.on("player.error",i._playerErrorHandler),i._mediaElement.setAttribute("src",t.mediaUrl)})};wn.prototype._reset=function(){this._eventEmitter.removeListener("player.canplay",this._playerCanPlayHandler),this._eventEmitter.removeListener("player.error",this._playerErrorHandler)};wn.prototype._playerCanPlayHandler=function(){this._reset(),this._resolve()};wn.prototype._playerErrorHandler=function(t){this._reset(),this._reject(t)};it.prototype.setSource=function(t){if(!t.mediaUrl)return Promise.reject(new Error("peaks.setSource(): options must contain a mediaUrl when using mediaElement"));var e=new wn(this._eventEmitter,this._mediaElement);return e.setSource(t)};function Lf(t){for(var e=[],i=t;i;)Object.getOwnPropertyNames(i).forEach(function(n){e.push(n)}),i=Object.getPrototypeOf(i);return e}function Rf(t){var e=["init","destroy","play","pause","isPlaying","isSeeking","getCurrentTime","getDuration","seek"],i=Lf(t);e.forEach(function(n){if(!i.includes(n))throw new TypeError("Peaks.init(): Player method "+n+" is undefined");if(typeof t[n]!="function")throw new TypeError("Peaks.init(): Player method "+n+" is not a function")})}function qe(t,e){this._peaks=t,this._playingSegment=!1,this._segment=null,this._loop=!1,this._playSegmentTimerCallback=this._playSegmentTimerCallback.bind(this),Rf(e),this._adapter=e}qe.prototype.init=function(){return this._adapter.init(this._peaks)};qe.prototype.destroy=function(){this._adapter.destroy()};qe.prototype.play=function(){return this._adapter.play()};qe.prototype.pause=function(){this._adapter.pause()};qe.prototype.isPlaying=function(){return this._adapter.isPlaying()};qe.prototype.isSeeking=function(){return this._adapter.isSeeking()};qe.prototype.getCurrentTime=function(){return this._adapter.getCurrentTime()};qe.prototype.getDuration=function(){return this._adapter.getDuration()};qe.prototype.seek=function(t){if(!Ut(t)){this._peaks._logger("peaks.player.seek(): parameter must be a valid time, in seconds");return}this._adapter.seek(t)};qe.prototype.playSegment=function(t,e){var i=this;return!t||!Ut(t.startTime)||!Ut(t.endTime)?Promise.reject(new Error("peaks.player.playSegment(): parameter must be a segment object")):(i._segment=t,i._loop=e,i.seek(t.startTime),i._peaks.once("player.playing",function(){i._playingSegment||(i._playingSegment=!0,window.requestAnimationFrame(i._playSegmentTimerCallback))}),i.play())};qe.prototype._playSegmentTimerCallback=function(){if(this.isPlaying()){if(this.getCurrentTime()>=this._segment.endTime)if(this._loop)this.seek(this._segment.startTime);else{this.pause(),this._peaks.emit("player.ended"),this._playingSegment=!1;return}}else{this._playingSegment=!1;return}window.requestAnimationFrame(this._playSegmentTimerCallback)};qe.prototype._setSource=function(t){return this._adapter.setSource(t)};function Cn(t){this._options=t}Cn.prototype.init=function(t){var e=10,i=20,n=-(e/2)+.5;this._options.view==="zoomview"&&(this._label=new pe({x:2,y:0,text:this._options.point.labelText,textAlign:"left",fontFamily:this._options.fontFamily||"sans-serif",fontSize:this._options.fontSize||10,fontStyle:this._options.fontStyle||"normal",fill:"#000"})),this._options.draggable&&(this._handle=new Wi({x:n,y:0,width:e,height:i,fill:this._options.color})),this._line=new wt({x:0,y:0,stroke:this._options.color,strokeWidth:1}),this._handle&&(this._time=new pe({x:-24,y:0,text:this._options.layer.formatTime(this._options.point.time),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._time.hide()),this._handle&&t.add(this._handle),t.add(this._line),this._label&&t.add(this._label),this._time&&t.add(this._time),this.fitToView(),this.bindEventHandlers(t)};Cn.prototype.bindEventHandlers=function(t){var e=this;e._handle&&(e._handle.on("mouseover touchstart",function(){e._time.setX(-24-e._time.getWidth()),e._time.show()}),e._handle.on("mouseout touchend",function(){e._time.hide()}),t.on("dragstart",function(){e._time.setX(-24-e._time.getWidth()),e._time.show()}),t.on("dragend",function(){e._time.hide()}))};Cn.prototype.fitToView=function(){var t=this._options.layer.getHeight();this._line.points([.5,0,.5,t]),this._label&&this._label.y(12),this._handle&&this._handle.y(t/2-10.5),this._time&&this._time.y(t/2-5)};Cn.prototype.timeUpdated=function(t){this._time&&this._time.setText(this._options.layer.formatTime(t))};function Sn(t){this._options=t}Sn.prototype.init=function(t){var e=10,i=20,n=-(e/2)+.5,s=this._options.startMarker?-24:24,r=this._options.startMarker?this._options.segment.startTime:this._options.segment.endTime;this._label=new pe({x:s,y:0,text:this._options.layer.formatTime(r),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._label.hide(),this._handle=new Wi({x:n,y:0,width:e,height:i,fill:this._options.color,stroke:this._options.color,strokeWidth:1}),this._line=new wt({x:0,y:0,stroke:this._options.color,strokeWidth:1}),t.add(this._label),t.add(this._line),t.add(this._handle),this.fitToView(),this.bindEventHandlers(t)};Sn.prototype.bindEventHandlers=function(t){var e=this,i=e._options.startMarker?-24:24;e._options.draggable&&(t.on("dragstart",function(){e._options.startMarker&&e._label.setX(i-e._label.getWidth()),e._label.show()}),t.on("dragend",function(){e._label.hide()})),e._handle.on("mouseover touchstart",function(){e._options.startMarker&&e._label.setX(i-e._label.getWidth()),e._label.show()}),e._handle.on("mouseout touchend",function(){e._label.hide()})};Sn.prototype.fitToView=function(){var t=this._options.layer.getHeight();this._label.y(t/2-5),this._handle.y(t/2-10.5),this._line.points([.5,0,.5,t])};Sn.prototype.timeUpdated=function(t){this._label.setText(this._options.layer.formatTime(t))};function Of(t){return t.view==="zoomview"?new Sn(t):null}function Df(t){return new pe({x:12,y:12,text:t.segment.labelText,textAlign:"center",fontFamily:t.fontFamily||"sans-serif",fontSize:t.fontSize||12,fontStyle:t.fontStyle||"normal",fill:"#000"})}function Nf(t){return new Cn(t)}function jt(t,e,i){this._view=t,this._offset=e,this._color=i,this._layer=new Ae.Layer({listening:!1}),this._highlightRect=null,this._startTime=null,this._endTime=null}jt.prototype.addToStage=function(t){t.add(this._layer)};jt.prototype.showHighlight=function(t,e){this._highlightRect||this._createHighlightRect(t,e),this._update(t,e)};jt.prototype._update=function(t,e){this._startTime=t,this._endTime=e;var i=this._view.timeToPixels(t),n=this._view.timeToPixels(e);this._highlightRect.setAttrs({x:i,width:n-i})};jt.prototype._createHighlightRect=function(t,e){this._startTime=t,this._endTime=e;var i=this._view.timeToPixels(t),n=this._view.timeToPixels(e);this._highlightRect=new Wi({x:i,y:0,width:n-i,stroke:this._color,strokeWidth:1,height:0,fill:this._color,opacity:.3,cornerRadius:2}),this.fitToView(),this._layer.add(this._highlightRect)};jt.prototype.removeHighlight=function(){this._highlightRect&&(this._highlightRect.destroy(),this._highlightRect=null)};jt.prototype.updateHighlight=function(){this._highlightRect&&this._update(this._startTime,this._endTime)};jt.prototype.fitToView=function(){if(this._highlightRect){var t=this._view.getHeight(),e=ui(this._offset,0,Math.floor(t/2));this._highlightRect.setAttrs({y:e,height:t-e*2})}};function Hf(t){for(;t.parent!==null;){if(t.parent instanceof Ae.Layer)return t;t=t.parent}return null}function pi(t,e){this._stage=t,this._handlers=e,this._dragging=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseUp=this._mouseUp.bind(this),this._mouseMove=this._mouseMove.bind(this),this._stage.on("mousedown",this._mouseDown),this._stage.on("touchstart",this._mouseDown),this._lastMouseClientX=null}pi.prototype._mouseDown=function(t){if(!(t.type==="mousedown"&&t.evt.button!==0)){var e=Hf(t.target);if(!(e&&e.attrs.draggable)){if(this._lastMouseClientX=Math.floor(t.type==="touchstart"?t.evt.touches[0].clientX:t.evt.clientX),this._handlers.onMouseDown){var i=this._getMousePosX(this._lastMouseClientX);this._handlers.onMouseDown(i)}window.addEventListener("mousemove",this._mouseMove,!1),window.addEventListener("touchmove",this._mouseMove,!1),window.addEventListener("mouseup",this._mouseUp,!1),window.addEventListener("touchend",this._mouseUp,!1),window.addEventListener("blur",this._mouseUp,!1)}}};pi.prototype._mouseMove=function(t){var e=Math.floor(t.type==="touchmove"?t.changedTouches[0].clientX:t.clientX);if(e!==this._lastMouseClientX&&(this._lastMouseClientX=e,this._dragging=!0,this._handlers.onMouseMove)){var i=this._getMousePosX(e);this._handlers.onMouseMove(i)}};pi.prototype._mouseUp=function(t){var e;if(t.type==="touchend"?(e=Math.floor(t.changedTouches[0].clientX),t.cancelable&&t.preventDefault()):e=Math.floor(t.clientX),this._handlers.onMouseUp){var i=this._getMousePosX(e);this._handlers.onMouseUp(i)}window.removeEventListener("mousemove",this._mouseMove,!1),window.removeEventListener("touchmove",this._mouseMove,!1),window.removeEventListener("mouseup",this._mouseUp,!1),window.removeEventListener("touchend",this._mouseUp,!1),window.removeEventListener("blur",this._mouseUp,!1),this._dragging=!1};pi.prototype._getMousePosX=function(t){var e=this._stage.getContainer().getBoundingClientRect();return t-e.left};pi.prototype.isDragging=function(){return this._dragging};function He(t){this._player=t.player,this._view=t.view,this._playheadPixel=0,this._playheadLineAnimation=null,this._playheadVisible=!1,this._playheadColor=t.playheadColor,this._playheadTextColor=t.playheadTextColor,this._playheadFontFamily=t.playheadFontFamily,this._playheadFontSize=t.playheadFontSize,this._playheadFontStyle=t.playheadFontStyle,this._playheadLayer=new Ae.Layer,this._createPlayhead(this._playheadColor),t.showPlayheadTime&&this._createPlayheadText(this._playheadTextColor),this.fitToView(),this.zoomLevelChanged()}He.prototype.addToStage=function(t){t.add(this._playheadLayer)};He.prototype.zoomLevelChanged=function(){var t=this._view.timeToPixels(1),e;this._useAnimation=t>=5,this._useAnimation?this._player.isPlaying()&&!this._playheadLineAnimation&&this._start():this._playheadLineAnimation&&(e=this._player.getCurrentTime(),this.stop(e))};He.prototype.fitToView=function(){var t=this._view.getHeight();this._playheadLine.points([.5,0,.5,t]),this._playheadText&&this._playheadText.y(12)};He.prototype._createPlayhead=function(t){this._playheadLine=new wt({stroke:t,strokeWidth:1}),this._playheadGroup=new Ae.Group({x:0,y:0}),this._playheadGroup.add(this._playheadLine),this._playheadLayer.add(this._playheadGroup)};He.prototype._createPlayheadText=function(t){var e=this._player.getCurrentTime(),i=this._view.formatTime(e);this._playheadText=new pe({x:2,y:0,text:i,fontSize:this._playheadFontSize,fontFamily:this._playheadFontFamily,fontStyle:this._playheadFontStyle,fill:t,align:"right"}),this._playheadGroup.add(this._playheadText)};He.prototype.updatePlayheadTime=function(t){this._syncPlayhead(t),this._player.isPlaying()&&this._start()};He.prototype._syncPlayhead=function(t){var e=this._view.timeToPixels(t),i=this._view.getFrameOffset(),n=this._view.getWidth(),s=e>=i&&e<=i+n;if(this._playheadPixel=e,s){var r=this._playheadPixel-i;if(this._playheadVisible||(this._playheadVisible=!0,this._playheadGroup.show()),this._playheadGroup.setX(r),this._playheadText){var a=this._view.formatTime(t),o=this._playheadText.getTextWidth();this._playheadText.setText(a),o+r>n-2?this._playheadText.setX(-o-2):o+r<n&&this._playheadText.setX(2)}}else this._playheadVisible&&(this._playheadVisible=!1,this._playheadGroup.hide());this._view.playheadPosChanged&&this._view.playheadPosChanged(t)};He.prototype._start=function(){var t=this;if(t._playheadLineAnimation&&(t._playheadLineAnimation.stop(),t._playheadLineAnimation=null),!!t._useAnimation){var e=null;t._playheadLineAnimation=new et(function(){var i=t._player.getCurrentTime(),n=t._view.timeToPixels(i);n!==e&&(t._syncPlayhead(i),e=n)},t._playheadLayer),t._playheadLineAnimation.start()}};He.prototype.stop=function(t){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null),this._syncPlayhead(t)};He.prototype.getPlayheadOffset=function(){return this._playheadPixel-this._view.getFrameOffset()};He.prototype.getPlayheadPixel=function(){return this._playheadPixel};He.prototype.showPlayheadTime=function(t){t?this._playheadText||(this._createPlayheadText(this._playheadTextColor),this.fitToView()):this._playheadText&&(this._playheadText.remove(),this._playheadText.destroy(),this._playheadText=null)};He.prototype.updatePlayheadText=function(){if(this._playheadText){var t=this._player.getCurrentTime(),e=this._view.formatTime(t);this._playheadText.setText(e)}};He.prototype.destroy=function(){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null)};function ht(t){this._point=t.point,this._marker=t.marker,this._draggable=t.draggable,this._onClick=t.onClick,this._onDblClick=t.onDblClick,this._onDragStart=t.onDragStart,this._onDragMove=t.onDragMove,this._onDragEnd=t.onDragEnd,this._onMouseEnter=t.onMouseEnter,this._onMouseLeave=t.onMouseLeave,this._onContextMenu=t.onContextMenu,this._dragBoundFunc=this._dragBoundFunc.bind(this),this._group=new Ae.Group({draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}ht.prototype._bindDefaultEventHandlers=function(){var t=this;t._group.on("dragstart",function(e){t._onDragStart(e,t._point)}),t._group.on("dragmove",function(e){t._onDragMove(e,t._point)}),t._group.on("dragend",function(e){t._onDragEnd(e,t._point)}),t._group.on("click",function(e){t._onClick(e,t._point)}),t._group.on("dblclick",function(e){t._onDblClick(e,t._point)}),t._group.on("mouseenter",function(e){t._onMouseEnter(e,t._point)}),t._group.on("mouseleave",function(e){t._onMouseLeave(e,t._point)}),t._group.on("contextmenu",function(e){t._onContextMenu(e,t._point)})};ht.prototype._dragBoundFunc=function(t){return{x:t.x,y:this._group.getAbsolutePosition().y}};ht.prototype.addToLayer=function(t){t.add(this._group)};ht.prototype.fitToView=function(){this._marker.fitToView()};ht.prototype.getPoint=function(){return this._point};ht.prototype.getX=function(){return this._group.getX()};ht.prototype.getWidth=function(){return this._group.getWidth()};ht.prototype.setX=function(t){this._group.setX(t)};ht.prototype.timeUpdated=function(t){this._marker.timeUpdated&&this._marker.timeUpdated(t)};ht.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};var Ff="sans-serif",Gf=10,Wf="normal";function he(t,e,i){this._peaks=t,this._view=e,this._allowEditing=i,this._pointMarkers={},this._layer=new Ae.Layer,this._onPointsDrag=this._onPointsDrag.bind(this),this._onPointHandleClick=this._onPointHandleClick.bind(this),this._onPointHandleDblClick=this._onPointHandleDblClick.bind(this),this._onPointHandleDragStart=this._onPointHandleDragStart.bind(this),this._onPointHandleDragMove=this._onPointHandleDragMove.bind(this),this._onPointHandleDragEnd=this._onPointHandleDragEnd.bind(this),this._onPointHandleMouseEnter=this._onPointHandleMouseEnter.bind(this),this._onPointHandleMouseLeave=this._onPointHandleMouseLeave.bind(this),this._onPointHandleContextMenu=this._onPointHandleContextMenu.bind(this),this._onPointsUpdate=this._onPointsUpdate.bind(this),this._onPointsAdd=this._onPointsAdd.bind(this),this._onPointsRemove=this._onPointsRemove.bind(this),this._onPointsRemoveAll=this._onPointsRemoveAll.bind(this),this._peaks.on("points.update",this._onPointsUpdate),this._peaks.on("points.add",this._onPointsAdd),this._peaks.on("points.remove",this._onPointsRemove),this._peaks.on("points.remove_all",this._onPointsRemoveAll),this._peaks.on("points.dragstart",this._onPointsDrag),this._peaks.on("points.dragmove",this._onPointsDrag),this._peaks.on("points.dragend",this._onPointsDrag)}he.prototype.addToStage=function(t){t.add(this._layer)};he.prototype.enableEditing=function(t){this._allowEditing=t};he.prototype.formatTime=function(t){return this._view.formatTime(t)};he.prototype._onPointsUpdate=function(t){var e=this._view.getStartTime(),i=this._view.getEndTime();this._removePoint(t),t.isVisible(e,i)&&this._addPointMarker(t),this.updatePoints(e,i)};he.prototype._onPointsAdd=function(t){var e=this,i=e._view.getStartTime(),n=e._view.getEndTime();t.forEach(function(s){s.isVisible(i,n)&&e._addPointMarker(s)}),e.updatePoints(i,n)};he.prototype._onPointsRemove=function(t){var e=this;t.forEach(function(i){e._removePoint(i)})};he.prototype._onPointsRemoveAll=function(){this._layer.removeChildren(),this._pointMarkers={}};he.prototype._onPointsDrag=function(t){this._updatePoint(t.point)};he.prototype._createPointMarker=function(t){var e=this._allowEditing&&t.editable,i=this._peaks.options.createPointMarker({point:t,draggable:e,color:t.color?t.color:this._peaks.options.pointMarkerColor,fontFamily:this._peaks.options.fontFamily||Ff,fontSize:this._peaks.options.fontSize||Gf,fontStyle:this._peaks.options.fontStyle||Wf,layer:this,view:this._view.getName()});return new ht({point:t,draggable:e,marker:i,onClick:this._onPointHandleClick,onDblClick:this._onPointHandleDblClick,onDragStart:this._onPointHandleDragStart,onDragMove:this._onPointHandleDragMove,onDragEnd:this._onPointHandleDragEnd,onMouseEnter:this._onPointHandleMouseEnter,onMouseLeave:this._onPointHandleMouseLeave,onContextMenu:this._onPointHandleContextMenu})};he.prototype.getHeight=function(){return this._view.getHeight()};he.prototype._addPointMarker=function(t){var e=this._createPointMarker(t);return this._pointMarkers[t.id]=e,e.addToLayer(this._layer),e};he.prototype._onPointHandleDragMove=function(t,e){var i=this._pointMarkers[e.id],n=i.getX();if(n>=0&&n<this._view.getWidth()){var s=n+i.getWidth();e._setTime(this._view.pixelOffsetToTime(s)),i.timeUpdated(e.time)}this._peaks.emit("points.dragmove",{point:e,evt:t.evt})};he.prototype._onPointHandleMouseEnter=function(t,e){this._peaks.emit("points.mouseenter",{point:e,evt:t.evt})};he.prototype._onPointHandleMouseLeave=function(t,e){this._peaks.emit("points.mouseleave",{point:e,evt:t.evt})};he.prototype._onPointHandleClick=function(t,e){this._peaks.emit("points.click",{point:e,evt:t.evt})};he.prototype._onPointHandleDblClick=function(t,e){this._peaks.emit("points.dblclick",{point:e,evt:t.evt})};he.prototype._onPointHandleDragStart=function(t,e){this._peaks.emit("points.dragstart",{point:e,evt:t.evt})};he.prototype._onPointHandleDragEnd=function(t,e){this._peaks.emit("points.dragend",{point:e,evt:t.evt})};he.prototype._onPointHandleContextMenu=function(t,e){this._peaks.emit("points.contextmenu",{point:e,evt:t.evt})};he.prototype.updatePoints=function(t,e){var i=this._peaks.points.find(t,e);i.forEach(this._updatePoint.bind(this)),this._removeInvisiblePoints(t,e)};he.prototype._updatePoint=function(t){var e=this._findOrAddPointMarker(t),i=this._view.timeToPixels(t.time),n=i-this._view.getFrameOffset();e.setX(n)};he.prototype._findOrAddPointMarker=function(t){var e=this._pointMarkers[t.id];return e||(e=this._addPointMarker(t)),e};he.prototype._removeInvisiblePoints=function(t,e){var i=0;for(var n in this._pointMarkers)if(oe(this._pointMarkers,n)){var s=this._pointMarkers[n].getPoint();s.isVisible(t,e)||(this._removePoint(s),i++)}return i};he.prototype._removePoint=function(t){var e=this._pointMarkers[t.id];e&&(e.destroy(),delete this._pointMarkers[t.id])};he.prototype.setVisible=function(t){this._layer.setVisible(t)};he.prototype.destroy=function(){this._peaks.off("points.update",this._onPointsUpdate),this._peaks.off("points.add",this._onPointsAdd),this._peaks.off("points.remove",this._onPointsRemove),this._peaks.off("points.remove_all",this._onPointsRemoveAll),this._peaks.off("points.dragstart",this._onPointsDrag),this._peaks.off("points.dragmove",this._onPointsDrag),this._peaks.off("points.dragend",this._onPointsDrag)};he.prototype.fitToView=function(){for(var t in this._pointMarkers)if(oe(this._pointMarkers,t)){var e=this._pointMarkers[t];e.fitToView()}};he.prototype.draw=function(){this._layer.draw()};function Ze(t){this._segment=t.segment,this._marker=t.marker,this._segmentShape=t.segmentShape,this._draggable=t.draggable,this._startMarker=t.startMarker,this._onDrag=t.onDrag,this._onDragStart=t.onDragStart,this._onDragEnd=t.onDragEnd,this._dragBoundFunc=this._dragBoundFunc.bind(this),this._group=new Ae.Group({draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}Ze.prototype._bindDefaultEventHandlers=function(){var t=this;t._draggable&&(t._group.on("dragmove",function(e){t._onDrag(e,t)}),t._group.on("dragstart",function(e){t._onDragStart(e,t)}),t._group.on("dragend",function(e){t._onDragEnd(e,t)}))};Ze.prototype._dragBoundFunc=function(t){var e,i;return this._startMarker?(e=this._segmentShape.getEndMarker(),i=e.getX()-e.getWidth(),t.x>i&&(t.x=i)):(e=this._segmentShape.getStartMarker(),i=e.getX()+e.getWidth(),t.x<i&&(t.x=i)),{x:t.x,y:this._group.getAbsolutePosition().y}};Ze.prototype.addToLayer=function(t){t.add(this._group)};Ze.prototype.fitToView=function(){this._marker.fitToView()};Ze.prototype.getSegment=function(){return this._segment};Ze.prototype.getX=function(){return this._group.getX()};Ze.prototype.getWidth=function(){return this._group.getWidth()};Ze.prototype.isStartMarker=function(){return this._startMarker};Ze.prototype.setX=function(t){this._group.setX(t)};Ze.prototype.timeUpdated=function(t){this._marker.timeUpdated&&this._marker.timeUpdated(t)};Ze.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()};function ke(t){this._color=t.color;var e={};if(oi(t.color))e.fill=t.color;else if(Is(t.color)){var i=t.view._height*(t.color.linearGradientStart/100),n=t.view._height*(t.color.linearGradientEnd/100);e.fillLinearGradientStartPointY=i,e.fillLinearGradientEndPointY=n,e.fillLinearGradientColorStops=[0,t.color.linearGradientColorStops[0],1,t.color.linearGradientColorStops[1]]}else throw new TypeError("Unknown type for color property");this._shape=new Ae.Shape(e),this._view=t.view,this._segment=t.segment,this._shape.sceneFunc(this._sceneFunc.bind(this)),this._shape.hitFunc(this._waveformShapeHitFunc.bind(this))}ke.prototype.setSegment=function(t){this._segment=t};ke.prototype.setWaveformColor=function(t){if(oi(t))this._shape.fill(t),this._shape.fillLinearGradientStartPointY(null),this._shape.fillLinearGradientEndPointY(null),this._shape.fillLinearGradientColorStops(null);else if(Is(t)){this._shape.fill(null);var e=this._view._height*(t.linearGradientStart/100),i=this._view._height*(t.linearGradientEnd/100);this._shape.fillLinearGradientStartPointY(e),this._shape.fillLinearGradientEndPointY(i),this._shape.fillLinearGradientColorStops([0,t.linearGradientColorStops[0],1,t.linearGradientColorStops[1]])}else throw new TypeError("Unknown type for color property")};ke.prototype.fitToView=function(){this.setWaveformColor(this._color)};ke.prototype._sceneFunc=function(t){var e=this._view.getFrameOffset(),i=this._view.getWidth(),n=this._view.getHeight();this._drawWaveform(t,this._view.getWaveformData(),e,this._segment?this._view.timeToPixels(this._segment.startTime):e,this._segment?this._view.timeToPixels(this._segment.endTime):e+i,i,n)};ke.prototype._drawWaveform=function(t,e,i,n,s,r,a){n<i&&(n=i);var o=i+r;s>o&&(s=o),s>e.length-1&&(s=e.length-1);for(var l=e.channels,h=0,c=Math.floor(a/l),d=0;d<l;d++)d===l-1&&(c=a-(l-1)*c),this._drawChannel(t,e.channel(d),i,n,s,h,c),h+=c};ke.prototype._drawChannel=function(t,e,i,n,s,r,a){var o,l,h=this._view.getAmplitudeScale(),c,d;for(t.beginPath(),o=n;o<=s;o++)l=e.min_sample(o),c=o-i+.5,d=r+ke.scaleY(l,a,h)+.5,t.lineTo(c,d);for(o=s;o>=n;o--)l=e.max_sample(o),c=o-i+.5,d=r+ke.scaleY(l,a,h)+1,t.lineTo(c,d);t.closePath(),t.fillShape(this._shape)};ke.prototype._waveformShapeHitFunc=function(t){if(!!this._segment){var e=this._view.getFrameOffset(),i=this._view.getWidth(),n=this._view.getHeight(),s=this._view.timeToPixels(this._segment.startTime),r=this._view.timeToPixels(this._segment.endTime),a=10,o=n-2*a;o<0&&(o=0);var l=s-e,h=r-s;l<0&&(h-=-l,l=0),l+h>i&&(h-=l+h-i),t.beginPath(),t.rect(l,a,h,o),t.closePath(),t.fillStrokeShape(this._shape)}};ke.prototype.addToLayer=function(t){t.add(this._shape)};ke.prototype.destroy=function(){this._shape.destroy(),this._shape=null};ke.prototype.on=function(t,e){this._shape.on(t,e)};ke.scaleY=function(t,e,i){var n=-(e-1)*(t*i+128)/255+(e-1);return ui(Math.floor(n),0,e-1)};var $a="sans-serif",ja=10,Ka="normal";function Me(t,e,i,n){this._segment=t,this._peaks=e,this._layer=i,this._view=n,this._label=null,this._startMarker=null,this._endMarker=null,this._color=t.color,this._waveformShape=new ke({color:t.color,view:n,segment:t}),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onClick=this._onClick.bind(this),this._onDblClick=this._onDblClick.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._waveformShape.on("mouseenter",this._onMouseEnter),this._waveformShape.on("mouseleave",this._onMouseLeave),this._waveformShape.on("click",this._onClick),this._waveformShape.on("dblclick",this._onDblClick),this._waveformShape.on("contextmenu",this._onContextMenu),this._onSegmentHandleDrag=this._onSegmentHandleDrag.bind(this),this._onSegmentHandleDragStart=this._onSegmentHandleDragStart.bind(this),this._onSegmentHandleDragEnd=this._onSegmentHandleDragEnd.bind(this),this._label=this._peaks.options.createSegmentLabel({segment:t,view:this._view.getName(),layer:this._layer,fontFamily:this._peaks.options.fontFamily,fontSize:this._peaks.options.fontSize,fontStyle:this._peaks.options.fontStyle}),this._label&&this._label.hide(),this._createMarkers()}Me.prototype.updatePosition=function(){var t=this._view.timeToPixels(this._segment.startTime),e=this._view.timeToPixels(this._segment.endTime),i=this._view.getFrameOffset(),n=t-i,s=e-i,r=this.getStartMarker();r&&r.setX(n-r.getWidth()),r=this.getEndMarker(),r&&r.setX(s)};Me.prototype.getSegment=function(){return this._segment};Me.prototype.getStartMarker=function(){return this._startMarker};Me.prototype.getEndMarker=function(){return this._endMarker};Me.prototype.addToLayer=function(t){this._waveformShape.addToLayer(t),this._label&&t.add(this._label),this._startMarker&&this._startMarker.addToLayer(t),this._endMarker&&this._endMarker.addToLayer(t)};Me.prototype._createMarkers=function(){var t=this._layer.isEditingEnabled()&&this._segment.editable;if(!!t){var e=this._peaks.options.createSegmentMarker({segment:this._segment,draggable:t,startMarker:!0,color:this._peaks.options.segmentStartMarkerColor,fontFamily:this._peaks.options.fontFamily||$a,fontSize:this._peaks.options.fontSize||ja,fontStyle:this._peaks.options.fontStyle||Ka,layer:this._layer,view:this._view.getName()});e&&(this._startMarker=new Ze({segment:this._segment,segmentShape:this,draggable:t,startMarker:!0,marker:e,onDrag:this._onSegmentHandleDrag,onDragStart:this._onSegmentHandleDragStart,onDragEnd:this._onSegmentHandleDragEnd}));var i=this._peaks.options.createSegmentMarker({segment:this._segment,draggable:t,startMarker:!1,color:this._peaks.options.segmentEndMarkerColor,fontFamily:this._peaks.options.fontFamily||$a,fontSize:this._peaks.options.fontSize||ja,fontStyle:this._peaks.options.fontStyle||Ka,layer:this._layer,view:this._view.getName()});i&&(this._endMarker=new Ze({segment:this._segment,segmentShape:this,draggable:t,startMarker:!1,marker:i,onDrag:this._onSegmentHandleDrag,onDragStart:this._onSegmentHandleDragStart,onDragEnd:this._onSegmentHandleDragEnd}))}};Me.prototype._onMouseEnter=function(t){this._label&&(this._label.moveToTop(),this._label.show()),this._peaks.emit("segments.mouseenter",{segment:this._segment,evt:t.evt})};Me.prototype._onMouseLeave=function(t){this._label&&this._label.hide(),this._peaks.emit("segments.mouseleave",{segment:this._segment,evt:t.evt})};Me.prototype._onClick=function(t){this._peaks.emit("segments.click",{segment:this._segment,evt:t.evt})};Me.prototype._onDblClick=function(t){this._peaks.emit("segments.dblclick",{segment:this._segment,evt:t.evt})};Me.prototype._onContextMenu=function(t){this._peaks.emit("segments.contextmenu",{segment:this._segment,evt:t.evt})};Me.prototype._onSegmentHandleDrag=function(t,e){var i=this._view.getWidth(),n=e.isStartMarker(),s=this._startMarker.getX(),r=this._endMarker.getX();if(n&&s>=0){var a=s+this._startMarker.getWidth();this._segment._setStartTime(this._view.pixelOffsetToTime(a)),e.timeUpdated(this._segment.startTime)}if(!n&&r<i){var o=r;this._segment._setEndTime(this._view.pixelOffsetToTime(o)),e.timeUpdated(this._segment.endTime)}this._peaks.emit("segments.dragged",{segment:this._segment,startMarker:n,evt:t.evt})};Me.prototype._onSegmentHandleDragStart=function(t,e){var i=e.isStartMarker();this._peaks.emit("segments.dragstart",{segment:this._segment,startMarker:i,evt:t.evt})};Me.prototype._onSegmentHandleDragEnd=function(t,e){var i=e.isStartMarker();this._peaks.emit("segments.dragend",{segment:this._segment,startMarker:i,evt:t.evt})};Me.prototype.fitToView=function(){this._startMarker&&this._startMarker.fitToView(),this._endMarker&&this._endMarker.fitToView(),this._waveformShape.setWaveformColor(this._color)};Me.prototype.destroy=function(){this._waveformShape.destroy(),this._label&&this._label.destroy(),this._startMarker&&this._startMarker.destroy(),this._endMarker&&this._endMarker.destroy()};function ve(t,e,i){this._peaks=t,this._view=e,this._allowEditing=i,this._segmentShapes={},this._layer=new Ae.Layer,this._onSegmentsUpdate=this._onSegmentsUpdate.bind(this),this._onSegmentsAdd=this._onSegmentsAdd.bind(this),this._onSegmentsRemove=this._onSegmentsRemove.bind(this),this._onSegmentsRemoveAll=this._onSegmentsRemoveAll.bind(this),this._onSegmentsDragged=this._onSegmentsDragged.bind(this),this._peaks.on("segments.update",this._onSegmentsUpdate),this._peaks.on("segments.add",this._onSegmentsAdd),this._peaks.on("segments.remove",this._onSegmentsRemove),this._peaks.on("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.on("segments.dragged",this._onSegmentsDragged)}ve.prototype.addToStage=function(t){t.add(this._layer)};ve.prototype.enableEditing=function(t){this._allowEditing=t};ve.prototype.isEditingEnabled=function(){return this._allowEditing};ve.prototype.formatTime=function(t){return this._view.formatTime(t)};ve.prototype._onSegmentsUpdate=function(t){var e=!1,i=this._segmentShapes[t.id],n=this._view.getStartTime(),s=this._view.getEndTime();i&&(this._removeSegment(t),e=!0),t.isVisible(n,s)&&(this._addSegmentShape(t),e=!0),e&&this.updateSegments(n,s)};ve.prototype._onSegmentsAdd=function(t){var e=this,i=e._view.getStartTime(),n=e._view.getEndTime();t.forEach(function(s){s.isVisible(i,n)&&e._addSegmentShape(s)}),e.updateSegments(i,n)};ve.prototype._onSegmentsRemove=function(t){var e=this;t.forEach(function(i){e._removeSegment(i)})};ve.prototype._onSegmentsRemoveAll=function(){this._layer.removeChildren(),this._segmentShapes={}};ve.prototype._onSegmentsDragged=function(t){this._updateSegment(t.segment)};ve.prototype._createSegmentShape=function(t){return new Me(t,this._peaks,this,this._view)};ve.prototype._addSegmentShape=function(t){var e=this._createSegmentShape(t);return e.addToLayer(this._layer),this._segmentShapes[t.id]=e,e};ve.prototype.updateSegments=function(t,e){var i=this._peaks.segments.find(t,e),n=i.length;i.forEach(this._updateSegment.bind(this)),n+=this._removeInvisibleSegments(t,e),n>0&&this._layer.draw()};ve.prototype._updateSegment=function(t){var e=this._findOrAddSegmentShape(t);e.updatePosition()};ve.prototype._findOrAddSegmentShape=function(t){var e=this._segmentShapes[t.id];return e||(e=this._addSegmentShape(t)),e};ve.prototype._removeInvisibleSegments=function(t,e){var i=0;for(var n in this._segmentShapes)if(oe(this._segmentShapes,n)){var s=this._segmentShapes[n].getSegment();s.isVisible(t,e)||(this._removeSegment(s),i++)}return i};ve.prototype._removeSegment=function(t){var e=this._segmentShapes[t.id];e&&(e.destroy(),delete this._segmentShapes[t.id])};ve.prototype.setVisible=function(t){this._layer.setVisible(t)};ve.prototype.destroy=function(){this._peaks.off("segments.update",this._onSegmentsUpdate),this._peaks.off("segments.add",this._onSegmentsAdd),this._peaks.off("segments.remove",this._onSegmentsRemove),this._peaks.off("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.off("segments.dragged",this._onSegmentsDragged)};ve.prototype.fitToView=function(){for(var t in this._segmentShapes)if(oe(this._segmentShapes,t)){var e=this._segmentShapes[t];e.fitToView()}};ve.prototype.draw=function(){this._layer.draw()};ve.prototype.getHeight=function(){return this._layer.getHeight()};function Kt(t,e){var i=this;i._axisGridlineColor=e.axisGridlineColor,i._axisLabelColor=e.axisLabelColor,i._showAxisLabels=e.showAxisLabels,e.formatAxisTime?i._formatAxisTime=e.formatAxisTime:i._formatAxisTime=function(n){return Nr(n,0)},i._axisLabelFont=Kt._buildFontString(e.fontFamily,e.fontSize,e.fontStyle),i._axisShape=new Ae.Shape({sceneFunc:function(s){i._drawAxis(s,t)}})}Kt._buildFontString=function(t,e,i){return e||(e=11),t||(t="sans-serif"),i||(i="normal"),i+" "+e+"px "+t};Kt.prototype.addToLayer=function(t){t.add(this._axisShape)};Kt.prototype.showAxisLabels=function(t){this._showAxisLabels=t};Kt.prototype._getAxisLabelScale=function(t){for(var e=1,i=[1,2,5,10,20,30],n=60,s=0,r;;){r=e*i[s];var a=t.timeToPixels(r);if(a<n)++s===i.length&&(e*=60,s=0);else break}return r};Kt.prototype._drawAxis=function(t,e){var i=e.getStartTime(),n=10,s=this._getAxisLabelScale(e),r=vf(i,s),a=r-i,o=e.timeToPixels(a);t.setAttr("strokeStyle",this._axisGridlineColor),t.setAttr("lineWidth",1),t.setAttr("font",this._axisLabelFont),t.setAttr("fillStyle",this._axisLabelColor),t.setAttr("textAlign","left"),t.setAttr("textBaseline","bottom");for(var l=r,h,c=e.getWidth(),d=e.getHeight();h=o+e.timeToPixels(l-r),!(h>=c);){if(t.beginPath(),t.moveTo(h+.5,0),t.lineTo(h+.5,0+n),t.moveTo(h+.5,d),t.lineTo(h+.5,d-n),t.stroke(),this._showAxisLabels){var f=this._formatAxisTime(l),y=t.measureText(f).width,C=h-y/2,I=d-1-n;C>=0&&t.fillText(f,C,I)}l+=s}};function q(t,e,i){var n=this;if(n._originalWaveformData=t,n._container=e,n._peaks=i,n._options=i.options,n._viewOptions=i.options.overview,n._onTimeUpdate=n._onTimeUpdate.bind(this),n._onPlaying=n._onPlaying.bind(this),n._onPause=n._onPause.bind(this),n._onZoomviewDisplaying=n._onZoomviewDisplaying.bind(this),n._onWindowResize=n._onWindowResize.bind(this),i.on("player.timeupdate",n._onTimeUpdate),i.on("player.playing",n._onPlaying),i.on("player.pause",n._onPause),i.on("zoomview.displaying",n._onZoomviewDisplaying),i.on("window_resize",n._onWindowResize),n._amplitudeScale=1,n._timeLabelPrecision=n._viewOptions.timeLabelPrecision,n._enableSeek=!0,n._viewOptions.formatPlayheadTime?n._formatPlayheadTime=n._viewOptions.formatPlayheadTime:n._formatPlayheadTime=function(r){return Nr(r,n._timeLabelPrecision)},n._width=e.clientWidth,n._height=e.clientHeight,n._data=t,n._width!==0)try{n._data=t.resample({width:n._width})}catch{}Ae.showWarnings=!1,n._resizeTimeoutId=null,n._stage=new Ae.Stage({container:e,width:n._width,height:n._height}),n._waveformLayer=new Ae.Layer({listening:!1}),n._waveformColor=n._viewOptions.waveformColor,n._playedWaveformColor=n._viewOptions.playedWaveformColor,n._createWaveform(),n._segmentsLayer=new ve(i,n,!1),n._segmentsLayer.addToStage(n._stage),n._pointsLayer=new he(i,n,!1),n._pointsLayer.addToStage(n._stage),n._highlightLayer=new jt(n,n._viewOptions.highlightOffset,n._viewOptions.highlightColor),n._highlightLayer.addToStage(n._stage),n._createAxisLabels(),n._playheadLayer=new He({player:n._peaks.player,view:n,showPlayheadTime:n._viewOptions.showPlayheadTime,playheadColor:n._viewOptions.playheadColor,playheadTextColor:n._viewOptions.playheadTextColor,playheadFontFamily:n._viewOptions.fontFamily,playheadFontSize:n._viewOptions.fontSize,playheadFontStyle:n._viewOptions.fontStyle}),n._playheadLayer.addToStage(n._stage);var s=n._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(s),n._createMouseDragHandler(),n._onClick=n._onClick.bind(this),n._onDblClick=n._onDblClick.bind(this),n._onContextMenu=n._onContextMenu.bind(this),n._stage.on("click",n._onClick),n._stage.on("dblclick",n._onDblClick),n._stage.on("contextmenu",n._onContextMenu)}q.prototype._createMouseDragHandler=function(){var t=this;t._mouseDragHandler=new pi(t._stage,{onMouseDown:function(i){this._seek(i)},onMouseMove:function(i){this._seek(i)},_seek:function(i){if(!!t._enableSeek){i=ui(i,0,t._width);var n=t.pixelsToTime(i),s=t._getDuration();n>s&&(n=s),t._playheadLayer.updatePlayheadTime(n),t._peaks.player.seek(n)}}})};q.prototype.enableSeek=function(t){this._enableSeek=t};q.prototype._onClick=function(t){this._clickHandler(t,"overview.click")};q.prototype._onDblClick=function(t){this._clickHandler(t,"overview.dblclick")};q.prototype._onContextMenu=function(t){this._clickHandler(t,"overview.contextmenu")};q.prototype._clickHandler=function(t,e){var i=t.evt.layerX,n=this.pixelsToTime(i);this._peaks.emit(e,{time:n,evt:t.evt})};q.prototype.getName=function(){return"overview"};q.prototype._onTimeUpdate=function(t){this._playheadLayer.updatePlayheadTime(t)};q.prototype._onPlaying=function(t){this._playheadLayer.updatePlayheadTime(t)};q.prototype._onPause=function(t){this._playheadLayer.stop(t)};q.prototype._onZoomviewDisplaying=function(t,e){this.showHighlight(t,e)};q.prototype.showHighlight=function(t,e){this._highlightLayer.showHighlight(t,e)};q.prototype._onWindowResize=function(){var t=this;t._resizeTimeoutId&&(clearTimeout(t._resizeTimeoutId),t._resizeTimeoutId=null),t._container.clientWidth!==0&&(t._width=t._container.clientWidth,t._stage.setWidth(t._width),t._resizeTimeoutId=setTimeout(function(){t._width=t._container.clientWidth,t._data=t._originalWaveformData.resample({width:t._width}),t._stage.setWidth(t._width),t._updateWaveform()},500))};q.prototype.setWaveformData=function(t){this._originalWaveformData=t,this._width!==0?this._data=t.resample({width:this._width}):this._data=t,this._updateWaveform()};q.prototype.playheadPosChanged=function(t){this._playedWaveformShape&&(this._playedSegment.endTime=t,this._unplayedSegment.startTime=t,this._waveformLayer.draw())};q.prototype.timeToPixels=function(t){return Math.floor(t*this._data.sample_rate/this._data.scale)};q.prototype.pixelsToTime=function(t){return t*this._data.scale/this._data.sample_rate};q.prototype.pixelOffsetToTime=q.prototype.pixelsToTime;q.prototype.getFrameOffset=function(){return 0};q.prototype.getStartTime=function(){return 0};q.prototype.getEndTime=function(){return this._getDuration()};q.prototype.getWidth=function(){return this._width};q.prototype.getHeight=function(){return this._height};q.prototype._getDuration=function(){return this._peaks.player.getDuration()};q.prototype.setAmplitudeScale=function(t){if(!ls(t)||!Ol(t))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=t,this._waveformLayer.draw(),this._segmentsLayer.draw()};q.prototype.getAmplitudeScale=function(){return this._amplitudeScale};q.prototype.getWaveformData=function(){return this._data};q.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new ke({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var t=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:t},this._unplayedSegment={startTime:t,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new ke({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};q.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};q.prototype._createWaveform=function(){this._createWaveformShapes(),this._stage.add(this._waveformLayer)};q.prototype._createAxisLabels=function(){this._axisLayer=new Ae.Layer({listening:!1}),this._axis=new Kt(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};q.prototype.removeHighlightRect=function(){this._highlightLayer.removeHighlight()};q.prototype._updateWaveform=function(){this._waveformLayer.draw(),this._axisLayer.draw();var t=this._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(t),this._highlightLayer.updateHighlight();var e=0,i=this.pixelsToTime(this._width);this._pointsLayer.updatePoints(e,i),this._segmentsLayer.updateSegments(e,i)};q.prototype.setWaveformColor=function(t){this._waveformColor=t,this._waveformShape.setWaveformColor(t)};q.prototype.setPlayedWaveformColor=function(t){this._playedWaveformColor=t,t?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(t)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};q.prototype.showPlayheadTime=function(t){this._playheadLayer.showPlayheadTime(t)};q.prototype.setTimeLabelPrecision=function(t){this._timeLabelPrecision=t,this._playheadLayer.updatePlayheadText()};q.prototype.formatTime=function(t){return this._formatPlayheadTime(t)};q.prototype.showAxisLabels=function(t){this._axis.showAxisLabels(t),this._axisLayer.draw()};q.prototype.enableMarkerEditing=function(t){this._segmentsLayer.enableEditing(t),this._pointsLayer.enableEditing(t)};q.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var t=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.setWidth(this._width);try{this._data=this._originalWaveformData.resample({width:this._width}),t=!0}catch{}}this._height=this._container.clientHeight,this._stage.setHeight(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer.fitToView(),this._pointsLayer.fitToView(),this._highlightLayer.fitToView(),t&&this._updateWaveform(),this._stage.draw()}};q.prototype.destroy=function(){this._resizeTimeoutId&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=null),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("zoomview.displaying",this._onZoomviewDisplaying),this._peaks.off("window_resize",this._onWindowResize),this._playheadLayer.destroy(),this._segmentsLayer.destroy(),this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function X(t,e,i){var n=this;n._container=e,n._peaks=i,n._options=i.options,n._viewOptions=n._options.zoomview,n._enableWaveformCache=n._options.waveformCache,n._originalWaveformData=t,n._initWaveformCache(),n._onTimeUpdate=n._onTimeUpdate.bind(n),n._onPlaying=n._onPlaying.bind(n),n._onPause=n._onPause.bind(n),n._onWindowResize=n._onWindowResize.bind(n),n._onKeyboardLeft=n._onKeyboardLeft.bind(n),n._onKeyboardRight=n._onKeyboardRight.bind(n),n._onKeyboardShiftLeft=n._onKeyboardShiftLeft.bind(n),n._onKeyboardShiftRight=n._onKeyboardShiftRight.bind(n),n._peaks.on("player.timeupdate",n._onTimeUpdate),n._peaks.on("player.playing",n._onPlaying),n._peaks.on("player.pause",n._onPause),n._peaks.on("window_resize",n._onWindowResize),n._peaks.on("keyboard.left",n._onKeyboardLeft),n._peaks.on("keyboard.right",n._onKeyboardRight),n._peaks.on("keyboard.shift_left",n._onKeyboardShiftLeft),n._peaks.on("keyboard.shift_right",n._onKeyboardShiftRight),n._enableAutoScroll=!0,n._amplitudeScale=1,n._timeLabelPrecision=n._viewOptions.timeLabelPrecision,n._enableSeek=!0,n._viewOptions.formatPlayheadTime?n._formatPlayheadTime=n._viewOptions.formatPlayheadTime:n._formatPlayheadTime=function(a){return Nr(a,n._timeLabelPrecision)},n._playheadClickTolerance=n._viewOptions.playheadClickTolerance,n._data=null,n._pixelLength=0;var s=i.zoom.getZoomLevel();n._zoomLevelAuto=!1,n._zoomLevelSeconds=null,n._resizeTimeoutId=null,n._resampleData({scale:s}),n._width=e.clientWidth,n._height=e.clientHeight,n._frameOffset=0,n._stage=new Ae.Stage({container:e,width:n._width,height:n._height}),n._waveformLayer=new Ae.Layer({listening:!1}),n._waveformColor=n._viewOptions.waveformColor,n._playedWaveformColor=n._viewOptions.playedWaveformColor,n._createWaveform(),n._segmentsLayer=new ve(i,n,!0),n._segmentsLayer.addToStage(n._stage),n._pointsLayer=new he(i,n,!0),n._pointsLayer.addToStage(n._stage),n._createAxisLabels(),n._playheadLayer=new He({player:n._peaks.player,view:n,showPlayheadTime:n._viewOptions.showPlayheadTime,playheadColor:n._viewOptions.playheadColor,playheadTextColor:n._viewOptions.playheadTextColor,playheadFontFamily:n._viewOptions.fontFamily,playheadFontSize:n._viewOptions.fontSize,playheadFontStyle:n._viewOptions.fontStyle}),n._playheadLayer.addToStage(n._stage);var r=n._peaks.player.getCurrentTime();n._syncPlayhead(r),n._createMouseDragHandler(),n._onWheel=n._onWheel.bind(n),n._onWheelCaptureVerticalScroll=n._onWheelCaptureVerticalScroll.bind(n),n.setWheelMode(n._viewOptions.wheelMode),n._onClick=n._onClick.bind(this),n._onDblClick=n._onDblClick.bind(this),n._onContextMenu=n._onContextMenu.bind(this),n._stage.on("click",n._onClick),n._stage.on("dblclick",n._onDblClick),n._stage.on("contextmenu",n._onContextMenu)}X.prototype._initWaveformCache=function(){this._enableWaveformCache&&(this._waveformData=new Map,this._waveformData.set(this._originalWaveformData.scale,this._originalWaveformData),this._waveformScales=[this._originalWaveformData.scale])};X.prototype._createMouseDragHandler=function(){var t=this;t._mouseDragHandler=new pi(t._stage,{onMouseDown:function(i){this._seeking=!1;var n=t._playheadLayer.getPlayheadOffset();t._enableSeek&&Math.abs(i-n)<=t._playheadClickTolerance&&(this._seeking=!0),this._seeking?this._seek(i):(this.initialFrameOffset=t._frameOffset,this.mouseDownX=i)},onMouseMove:function(i){if(this._seeking)this._seek(i);else{var n=this.mouseDownX-i,s=this.initialFrameOffset+n;s!==this.initialFrameOffset&&t._updateWaveform(s)}},onMouseUp:function(){if(!this._seeking&&t._enableSeek&&!t._mouseDragHandler.isDragging()){var i=t.pixelOffsetToTime(this.mouseDownX),n=t._getDuration();i>n&&(i=n),t._playheadLayer.updatePlayheadTime(i),t._peaks.player.seek(i)}},_seek:function(i){i=ui(i,0,t._width);var n=t.pixelsToTime(i+t._frameOffset),s=t._getDuration();n>s&&(n=s),t._playheadLayer.updatePlayheadTime(n),t._peaks.player.seek(n)}})};X.prototype.enableSeek=function(t){this._enableSeek=t};X.prototype._onClick=function(t){this._clickHandler(t,"zoomview.click")};X.prototype._onDblClick=function(t){this._clickHandler(t,"zoomview.dblclick")};X.prototype._onContextMenu=function(t){this._clickHandler(t,"zoomview.contextmenu")};X.prototype._clickHandler=function(t,e){var i=t.evt.layerX,n=this.pixelOffsetToTime(i);this._peaks.emit(e,{time:n,evt:t.evt})};X.prototype.setWheelMode=function(t,e){if(e||(e={}),t!==this._wheelMode||e.captureVerticalScroll!==this._captureVerticalScroll)switch(this._stage.off("wheel"),this._wheelMode=t,this._captureVerticalScroll=e.captureVerticalScroll,t){case"scroll":e.captureVerticalScroll?this._stage.on("wheel",this._onWheelCaptureVerticalScroll):this._stage.on("wheel",this._onWheel);break}};X.prototype._onWheel=function(t){var e=t.evt,i;if(e.shiftKey)if(e.deltaY!==0)i=e.deltaY;else if(e.deltaX!==0)i=e.deltaX;else return;else{if(Math.abs(e.deltaX)<Math.abs(e.deltaY))return;i=e.deltaX}e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._width),e.preventDefault();var n=ui(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this._updateWaveform(n)};X.prototype._onWheelCaptureVerticalScroll=function(t){var e=t.evt,i=Math.abs(e.deltaX)<Math.abs(e.deltaY)?e.deltaY:e.deltaX;e.preventDefault();var n=ui(this._frameOffset+Math.floor(i),0,this._pixelLength-this._width);this._updateWaveform(n)};X.prototype.getName=function(){return"zoomview"};X.prototype._onTimeUpdate=function(t){this._mouseDragHandler.isDragging()||this._syncPlayhead(t)};X.prototype._onPlaying=function(t){this._playheadLayer.updatePlayheadTime(t)};X.prototype._onPause=function(t){this._playheadLayer.stop(t)};X.prototype._onWindowResize=function(){var t=this,e=t._container.clientWidth;t._zoomLevelAuto?(t._resizeTimeoutId&&(clearTimeout(t._resizeTimeoutId),t._resizeTimeoutId=null),e!==0&&(t._width=e,t._stage.width(e),t._resizeTimeoutId=setTimeout(function(){t._width=e,t._data=t._originalWaveformData.resample(e),t._stage.width(e),t._updateWaveform(t._frameOffset)},500))):(t._width=e,t._stage.width(e),t._updateWaveform(t._frameOffset))};X.prototype._onKeyboardLeft=function(){this._keyboardScroll(-1,!1)};X.prototype._onKeyboardRight=function(){this._keyboardScroll(1,!1)};X.prototype._onKeyboardShiftLeft=function(){this._keyboardScroll(-1,!0)};X.prototype._onKeyboardShiftRight=function(){this._keyboardScroll(1,!0)};X.prototype._keyboardScroll=function(t,e){var i;e?i=t*this._width:i=t*this.timeToPixels(this._options.nudgeIncrement),this.scrollWaveform({pixels:i})};X.prototype.setWaveformData=function(t){this._originalWaveformData=t,this._initWaveformCache()};X.prototype.playheadPosChanged=function(t){this._playedWaveformShape&&(this._playedSegment.endTime=t,this._unplayedSegment.startTime=t,this._drawWaveformLayer())};X.prototype._syncPlayhead=function(t){if(this._playheadLayer.updatePlayheadTime(t),this._enableAutoScroll){var e=this.timeToPixels(t),i=this._frameOffset+this._width-100;(e>=i||e<this._frameOffset)&&(this._frameOffset=e-100,this._frameOffset<0&&(this._frameOffset=0),this._updateWaveform(this._frameOffset))}};X.prototype._getScale=function(t){return t*this._data.sample_rate/this._width};function Bf(t){return oe(t,"scale")&&t.scale==="auto"||oe(t,"seconds")&&t.seconds==="auto"}X.prototype.setZoom=function(t){var e;if(Bf(t)){var i=this._peaks.player.getDuration();if(!Ut(i))return!1;this._zoomLevelAuto=!0,this._zoomLevelSeconds=null,e=this._getScale(i)}else{if(oe(t,"scale"))this._zoomLevelSeconds=null,e=t.scale;else if(oe(t,"seconds")){if(!Ut(t.seconds))return!1;this._zoomLevelSeconds=t.seconds,e=this._getScale(t.seconds)}this._zoomLevelAuto=!1}e<this._originalWaveformData.scale&&(this._peaks._logger("peaks.zoomview.setZoom(): zoom level must be at least "+this._originalWaveformData.scale),e=this._originalWaveformData.scale);var n=this._peaks.player.getCurrentTime(),s,r=this._playheadLayer.getPlayheadOffset();r>=0&&r<this._width?s=n:(r=Math.floor(this._width/2),s=this.pixelOffsetToTime(r));var a=this._scale;this._resampleData({scale:e});var o=this.timeToPixels(s);return this._frameOffset=o-r,this._updateWaveform(this._frameOffset),this._playheadLayer.zoomLevelChanged(),this._playheadLayer.updatePlayheadTime(n),this._peaks.emit("zoom.update",e,a),!0};X.prototype._resampleData=function(t){var e=t.scale;if(this._enableWaveformCache){if(!this._waveformData.has(e)){for(var i=this._originalWaveformData,n=0;n<this._waveformScales.length&&this._waveformScales[n]<e;n++)i=this._waveformData.get(this._waveformScales[n]);this._waveformData.set(e,i.resample(t)),this._waveformScales.push(e),this._waveformScales.sort(function(s,r){return s-r})}this._data=this._waveformData.get(e)}else this._data=this._originalWaveformData.resample(t);this._scale=this._data.scale,this._pixelLength=this._data.length};X.prototype.getStartTime=function(){return this.pixelOffsetToTime(0)};X.prototype.getEndTime=function(){return this.pixelOffsetToTime(this._width)};X.prototype.setStartTime=function(t){t<0&&(t=0),this._zoomLevelAuto&&(t=0),this._updateWaveform(this.timeToPixels(t))};X.prototype.timeToPixels=function(t){return Math.floor(t*this._data.sample_rate/this._data.scale)};X.prototype.pixelsToTime=function(t){return t*this._data.scale/this._data.sample_rate};X.prototype.pixelOffsetToTime=function(t){var e=this._frameOffset+t;return e*this._data.scale/this._data.sample_rate};X.prototype.getFrameOffset=function(){return this._frameOffset};X.prototype.getWidth=function(){return this._width};X.prototype.getHeight=function(){return this._height};X.prototype._getDuration=function(){return this._peaks.player.getDuration()};X.prototype.setAmplitudeScale=function(t){if(!ls(t)||!Ol(t))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=t,this._drawWaveformLayer(),this._segmentsLayer.draw()};X.prototype.getAmplitudeScale=function(){return this._amplitudeScale};X.prototype.getWaveformData=function(){return this._data};X.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new ke({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var t=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:t},this._unplayedSegment={startTime:t,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new ke({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}};X.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null};X.prototype._createWaveform=function(){this._createWaveformShapes(),this._stage.add(this._waveformLayer),this._peaks.emit("zoomview.displaying",0,this.getEndTime())};X.prototype._createAxisLabels=function(){this._axisLayer=new Ae.Layer({listening:!1}),this._axis=new Kt(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)};X.prototype.scrollWaveform=function(t){var e;if(oe(t,"pixels"))e=Math.floor(t.pixels);else if(oe(t,"seconds"))e=this.timeToPixels(t.seconds);else throw new TypeError("view.scrollWaveform(): Missing umber of pixels or seconds");this._updateWaveform(this._frameOffset+e)};X.prototype._updateWaveform=function(t){var e;this._pixelLength<this._width?(t=0,e=this._width):e=this._pixelLength-this._width,t=ui(t,0,e),this._frameOffset=t;var i=this._playheadLayer.getPlayheadPixel();this._playheadLayer.updatePlayheadTime(this.pixelsToTime(i)),this._drawWaveformLayer(),this._axisLayer.draw();var n=this.getStartTime(),s=this.getEndTime();this._pointsLayer.updatePoints(n,s),this._segmentsLayer.updateSegments(n,s),this._peaks.emit("zoomview.displaying",n,s)};X.prototype._drawWaveformLayer=function(){this._waveformLayer.draw()};X.prototype.setWaveformColor=function(t){this._waveformColor=t,this._waveformShape.setWaveformColor(t)};X.prototype.setPlayedWaveformColor=function(t){this._playedWaveformColor=t,t?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(t)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()};X.prototype.showPlayheadTime=function(t){this._playheadLayer.showPlayheadTime(t)};X.prototype.setTimeLabelPrecision=function(t){this._timeLabelPrecision=t,this._playheadLayer.updatePlayheadText()};X.prototype.formatTime=function(t){return this._formatPlayheadTime(t)};X.prototype.showAxisLabels=function(t){this._axis.showAxisLabels(t),this._axisLayer.draw()};X.prototype.enableAutoScroll=function(t){this._enableAutoScroll=t};X.prototype.enableMarkerEditing=function(t){this._segmentsLayer.enableEditing(t),this._pointsLayer.enableEditing(t)};X.prototype.fitToContainer=function(){if(!(this._container.clientWidth===0&&this._container.clientHeight===0)){var t=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.width(this._width);var e=!1,i;if(this._zoomLevelAuto?(e=!0,i={width:this._width}):this._zoomLevelSeconds!==null&&(e=!0,i={scale:this._getScale(this._zoomLevelSeconds)}),e)try{this._resampleData(i),t=!0}catch{}}this._height=this._container.clientHeight,this._stage.height(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer.fitToView(),this._pointsLayer.fitToView(),t&&this._updateWaveform(this._frameOffset),this._stage.draw()}};X.prototype.destroy=function(){this._resizeTimeoutId&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=null),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("window_resize",this._onWindowResize),this._peaks.off("keyboard.left",this._onKeyboardLeft),this._peaks.off("keyboard.right",this._onKeyboardRight),this._peaks.off("keyboard.shift_left",this._onKeyboardShiftLeft),this._peaks.off("keyboard.shift_right",this._onKeyboardShiftRight),this._playheadLayer.destroy(),this._segmentsLayer.destroy(),this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)};function gi(t){this._peaks=t,this._overview=null,this._zoomview=null}gi.prototype.createOverview=function(t){if(this._overview)return this._overview;var e=this._peaks.getWaveformData();return this._overview=new q(e,t,this._peaks),this._zoomview&&this._overview.showHighlight(this._zoomview.getStartTime(),this._zoomview.getEndTime()),this._overview};gi.prototype.createZoomview=function(t){if(this._zoomview)return this._zoomview;var e=this._peaks.getWaveformData();return this._zoomview=new X(e,t,this._peaks),this._zoomview};gi.prototype.destroyOverview=function(){!this._overview||!this._zoomview||(this._overview.destroy(),this._overview=null)};gi.prototype.destroyZoomview=function(){!this._zoomview||!this._overview||(this._zoomview.destroy(),this._zoomview=null,this._overview.removeHighlightRect())};gi.prototype.destroy=function(){this._overview&&(this._overview.destroy(),this._overview=null),this._zoomview&&(this._zoomview.destroy(),this._zoomview=null)};gi.prototype.getView=function(t){if(vt(t))return this._overview&&this._zoomview?null:this._overview?this._overview:this._zoomview?this._zoomview:null;switch(t){case"overview":return this._overview;case"zoomview":return this._zoomview;default:return null}};function _i(t,e){this._peaks=t,this._zoomLevels=e,this._zoomLevelIndex=0}_i.prototype.setZoomLevels=function(t){this._zoomLevels=t,this.setZoom(0,!0)};_i.prototype.zoomIn=function(){this.setZoom(this._zoomLevelIndex-1)};_i.prototype.zoomOut=function(){this.setZoom(this._zoomLevelIndex+1)};_i.prototype.setZoom=function(t,e){if(t>=this._zoomLevels.length&&(t=this._zoomLevels.length-1),t<0&&(t=0),!(!e&&t===this._zoomLevelIndex)){this._zoomLevelIndex=t;var i=this._peaks.views.getView("zoomview");!i||i.setZoom({scale:this._zoomLevels[t]})}};_i.prototype.getZoom=function(){return this._zoomLevelIndex};_i.prototype.getZoomLevel=function(){return this._zoomLevels[this._zoomLevelIndex]};var Za="withCredentials"in new XMLHttpRequest;function At(t){this._peaks=t}At.prototype.init=function(t,e){if(t.dataUri&&(t.webAudio||t.audioContext)||t.waveformData&&(t.webAudio||t.audioContext)||t.dataUri&&t.waveformData){e(new TypeError("Peaks.init(): You may only pass one source (webAudio, dataUri, or waveformData) to render waveform data."));return}if(t.audioContext&&(this._peaks._logger("Peaks.init(): The audioContext option is deprecated, please pass a webAudio object instead"),t.webAudio={audioContext:t.audioContext}),t.dataUri)return this._getRemoteWaveformData(t,e);if(t.waveformData)return this._buildWaveformFromLocalData(t,e);if(t.webAudio)return t.webAudio.audioBuffer?this._buildWaveformDataFromAudioBuffer(t,e):this._buildWaveformDataUsingWebAudio(t,e);e(new Error("Peaks.init(): You must pass an audioContext, or dataUri, or waveformData to render waveform data"))};At.prototype._getRemoteWaveformData=function(t,e){var i=this,n=null,s=null,r;if(Di(t.dataUri))n=t.dataUri;else if(oi(t.dataUri))n={},n[t.dataUriDefaultFormat||"json"]=t.dataUri;else{e(new TypeError("Peaks.init(): The dataUri option must be an object"));return}if(["ArrayBuffer","JSON"].some(function(o){if(window[o])return s=o.toLowerCase(),r=n[s],Boolean(r)}),!r){e(new Error("Peaks.init(): Unable to determine a compatible dataUri format for this browser"));return}var a=i._createXHR(r,s,t.withCredentials,function(o){if(this.readyState===4){if(this.status!==200){e(new Error("Unable to fetch remote data. HTTP status "+this.status));return}var l=tt.create(o.target.response);if(l.channels!==1&&l.channels!==2){e(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(l.bits!==8){e(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}e(null,l)}},function(){e(new Error("XHR Failed"))});a.send()};At.prototype._buildWaveformFromLocalData=function(t,e){var i=null,n=null;if(Di(t.waveformData))i=t.waveformData;else{e(new Error("Peaks.init(): The waveformData option must be an object"));return}if(Di(i.json)?n=i.json:bf(i.arraybuffer)&&(n=i.arraybuffer),!n){e(new Error("Peaks.init(): Unable to determine a compatible waveformData format"));return}try{var s=tt.create(n);if(s.channels!==1&&s.channels!==2){e(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));return}else if(s.bits!==8){e(new Error("Peaks.init(): 16-bit waveform data is not supported"));return}e(null,s)}catch(r){e(r)}};At.prototype._buildWaveformDataUsingWebAudio=function(t,e){var i=this,n=window.AudioContext||window.webkitAudioContext;if(!(t.webAudio.audioContext instanceof n)){e(new TypeError("Peaks.init(): The webAudio.audioContext option must be a valid AudioContext"));return}var s=t.webAudio;s.scale!==t.zoomLevels[0]&&(s.scale=t.zoomLevels[0]);var r=i._peaks.options.mediaElement.currentSrc;r?i._requestAudioAndBuildWaveformData(r,s,t.withCredentials,e):i._peaks.once("player.canplay",function(){i._requestAudioAndBuildWaveformData(i._peaks.options.mediaElement.currentSrc,s,t.withCredentials,e)})};At.prototype._buildWaveformDataFromAudioBuffer=function(t,e){var i=t.webAudio;i.scale!==t.zoomLevels[0]&&(i.scale=t.zoomLevels[0]);var n={audio_buffer:i.audioBuffer,split_channels:i.multiChannel,scale:i.scale};tt.createFromAudio(n,e)};At.prototype._requestAudioAndBuildWaveformData=function(t,e,i,n){var s=this;if(!t){s._peaks._logger("Peaks.init(): The mediaElement src is invalid");return}var r=s._createXHR(t,"arraybuffer",i,function(a){if(this.readyState===4){if(this.status!==200){n(new Error("Unable to fetch remote data. HTTP status "+this.status));return}var o={audio_context:e.audioContext,array_buffer:a.target.response,split_channels:e.multiChannel,scale:e.scale};tt.createFromAudio(o,n)}},function(){n(new Error("XHR Failed"))});r.send()};At.prototype._createXHR=function(t,e,i,n,s){var r=new XMLHttpRequest;if(r.open("GET",t,!0),Za)try{r.responseType=e}catch{}return r.onload=n,r.onerror=s,Za&&i&&(r.withCredentials=!0),r};function ot(){return Rl.call(this),this.options={zoomLevels:[512,1024,2048,4096],waveformCache:!0,mediaElement:null,mediaUrl:null,dataUri:null,dataUriDefaultFormat:"json",withCredentials:!1,waveformData:null,webAudio:null,nudgeIncrement:1,segmentStartMarkerColor:"#aaaaaa",segmentEndMarkerColor:"#aaaaaa",randomizeSegmentColor:!0,segmentColor:"#ff851b",pointMarkerColor:"#39cccc",createSegmentMarker:Of,createSegmentLabel:Df,createPointMarker:Nf,logger:console.error.bind(console)},this}ot.prototype=Object.create(Rl.prototype);var cs={playheadColor:"#111111",playheadTextColor:"#aaaaaa",axisGridlineColor:"#cccccc",showAxisLabels:!0,axisLabelColor:"#aaaaaa",fontFamily:"sans-serif",fontSize:11,fontStyle:"normal",timeLabelPrecision:2},qa={playheadClickTolerance:3,waveformColor:"rgba(0, 225, 128, 1)",wheelMode:"none"},Ja={waveformColor:"rgba(0, 0, 0, 0.2)",highlightColor:"#aaaaaa",highlightOffset:11};function zf(t){var e={};t.containers&&t.containers.overview&&(e.container=t.containers.overview),t.overviewWaveformColor&&(e.waveformColor=t.overviewWaveformColor),t.overviewHighlightOffset&&(e.highlightOffset=t.overviewHighlightOffset),t.overviewHighlightColor&&(e.highlightColor=t.overviewHighlightColor),t.overview&&t.overview.showPlayheadTime&&(e.showPlayheadTime=t.overview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","highlightColor","highlightOffset"];return i.forEach(function(n){t.overview&&oe(t.overview,n)?e[n]=t.overview[n]:oe(t,n)?e[n]=t[n]:oe(e,n)||(oe(Ja,n)?e[n]=Ja[n]:oe(cs,n)&&(e[n]=cs[n]))}),e}function Uf(t){var e={};t.containers&&t.containers.zoomview&&(e.container=t.containers.zoomview),t.zoomWaveformColor&&(e.waveformColor=t.zoomWaveformColor),t.showPlayheadTime?e.showPlayheadTime=t.showPlayheadTime:t.zoomview&&t.zoomview.showPlayheadTime&&(e.showPlayheadTime=t.zoomview.showPlayheadTime);var i=["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","formatPlayheadTime","playheadClickTolerance","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","wheelMode"];return i.forEach(function(n){t.zoomview&&oe(t.zoomview,n)?e[n]=t.zoomview[n]:oe(t,n)?e[n]=t[n]:oe(e,n)||(oe(qa,n)?e[n]=qa[n]:oe(cs,n)&&(e[n]=cs[n]))}),e}function Vf(t,e){for(var i in e)oe(e,i)&&oe(t,i)&&(t[i]=e[i]);return t}ot.init=function(t,e){var i=new ot,n=i._setOptions(t);if(n){e(n);return}var s=i.options.zoomview.container,r=i.options.overview.container;if(!Xa(s)&&!Xa(r)){e(new TypeError("Peaks.init(): The zoomview and/or overview container options must be valid HTML elements"));return}if(s&&(s.clientWidth<=0||s.clientHeight<=0)){e(new Error("Peaks.init(): Please ensure that the zoomview container is visible and has non-zero width and height"));return}if(r&&(r.clientWidth<=0||r.clientHeight<=0)){e(new Error("Peaks.init(): Please ensure that the overview container is visible and has non-zero width and height"));return}t.keyboard&&(i._keyboardHandler=new Fr(i));var a=t.player?t.player:new it(i.options.mediaElement);i.player=new qe(i,a),i.segments=new Ie(i),i.points=new Be(i),i.zoom=new _i(i,i.options.zoomLevels),i.views=new gi(i);var o=new At(i);a.init(i).then(function(){o.init(i.options,function(l,h){if(l){e&&e(l);return}i._waveformData=h,r&&i.views.createOverview(r),s&&i.views.createZoomview(s),i._addWindowResizeHandler(),t.segments&&i.segments.add(t.segments),t.points&&i.points.add(t.points),t.emitCueEvents&&(i._cueEmitter=new lt(i)),setTimeout(function(){i.emit("peaks.ready")},0),e(null,i)})}).catch(function(l){e&&e(l)})};ot.prototype._setOptions=function(t){if(!Di(t))return new TypeError("Peaks.init(): The options parameter should be an object");if(!t.player){if(!t.mediaElement)return new Error("Peaks.init(): Missing mediaElement option");if(!(t.mediaElement instanceof HTMLMediaElement))return new TypeError("Peaks.init(): The mediaElement option should be an HTMLMediaElement")}if(t.container)return new Error("Peaks.init(): The container option has been removed, please use containers instead");if(t.logger&&!wf(t.logger))return new TypeError("Peaks.init(): The logger option should be a function");if(t.segments&&!Array.isArray(t.segments))return new TypeError("Peaks.init(): options.segments must be an array of segment objects");if(t.points&&!Array.isArray(t.points))return new TypeError("Peaks.init(): options.points must be an array of point objects");if(Vf(this.options,t),this.options.overview=zf(t),this.options.zoomview=Uf(t),Array.isArray(this.options.zoomLevels)){if(this.options.zoomLevels.length===0)return new Error("Peaks.init(): The zoomLevels array must not be empty");if(!yf(this.options.zoomLevels))return new Error("Peaks.init(): The zoomLevels array must be sorted in ascending order")}else return new TypeError("Peaks.init(): The zoomLevels option should be an array");this._logger=this.options.logger};ot.prototype.setSource=function(t,e){var i=this;this.player._setSource(t).then(function(){t.zoomLevels||(t.zoomLevels=i.options.zoomLevels);var n=new At(i);n.init(t,function(s,r){if(s){e(s);return}i._waveformData=r,["overview","zoomview"].forEach(function(a){var o=i.views.getView(a);o&&o.setWaveformData(r)}),i.zoom.setZoomLevels(t.zoomLevels),e()})}).catch(function(n){e(n)})};ot.prototype.getWaveformData=function(){return this._waveformData};ot.prototype._addWindowResizeHandler=function(){this._onResize=this._onResize.bind(this),window.addEventListener("resize",this._onResize)};ot.prototype._onResize=function(){this.emit("window_resize")};ot.prototype._removeWindowResizeHandler=function(){window.removeEventListener("resize",this._onResize)};ot.prototype.destroy=function(){this._removeWindowResizeHandler(),this._keyboardHandler&&this._keyboardHandler.destroy(),this.views&&this.views.destroy(),this.player&&this.player.destroy(),this._cueEmitter&&this._cueEmitter.destroy()};const Xf=["src"],Yf={class:"peaks-controls"},$f=ye("\xA0 "),jf=ye("\xA0 "),Kf=bt({__name:"AudioPeaks",props:{src:null,zoomviewElementId:null,zoomviewElement:null,overviewElementId:null,overviewElement:null,mediaElementId:null,mediaElement:null,options:null},emits:["error"],setup(t,{expose:e,emit:i}){const n=t,s=gt(void 0),r=gt(null),a=gt(null),o=gt(null),l=gt(null),h=gt(null),c=gt(null),d=gt(void 0);e({peaksInstance:s}),Uo(()=>{f()}),Vo(()=>{y()});function f(){console.debug("AudioPeaks::createPeaksInstance:options:",n.options);const M=C(n.overviewElement,n.overviewElementId,r,a,"div"),T=C(n.zoomviewElement,n.zoomviewElementId,o,l,"div"),H=C(n.mediaElement,n.mediaElementId,h,c,"audio");n.options&&(n.options.containers={overview:M,zoomview:T},n.options.mediaElement=H);const B=n.options?n.options:{containers:{overview:M,zoomview:T},mediaElement:H,webAudio:{audioContext:new AudioContext},zoomLevels:[256,512,1024,2048,4096]};ot.init(B,function(K,se){K&&(console.error(K),i("error",K)),s.value=se,d.value=se==null?void 0:se.zoom.getZoom()})}function y(){var M;(M=s.value)==null||M.destroy()}function C(M,T,H,B,K){if(M)return console.debug("AudioPeaks::Found elm: ",M),M;if(T)return console.debug("AudioPeaks::Found element by id: ",T),document.getElementById(""+T);const se=H.value;if(se)return console.debug("AudioPeaks::Found element by Ref: ",se),se;const ge=B.value;if(ge){const ee=ge.getElementsByTagName(K)[0];if(ee)return console.debug("AudioPeaks::Found element by first in slot: ",ee),ee}}function I(){var M,T;(M=s.value)==null||M.zoom.zoomIn(),d.value=(T=s.value)==null?void 0:T.zoom.getZoom()}function _(){var M,T;(M=s.value)==null||M.zoom.zoomOut(),d.value=(T=s.value)==null?void 0:T.zoom.getZoom()}return(M,T)=>(me(),Ce("div",null,[g("div",{ref_key:"overviewSlot",ref:a},[!n.overviewElementId&&!n.overviewElement?Mn(M.$slots,"overview",{key:0},()=>[g("div",{class:"peaks-overview",ref_key:"overview",ref:r},null,512)],!0):nn("",!0)],512),g("div",{ref_key:"zoomviewSlot",ref:l},[!n.zoomviewElementId&&!n.zoomviewElement?Mn(M.$slots,"zoomview",{key:0},()=>[g("div",{class:"peaks-zoomview",ref_key:"zoomview",ref:o},null,512)],!0):nn("",!0)],512),g("div",{ref_key:"audioSlot",ref:c},[!n.mediaElementId&&!n.mediaElement?Mn(M.$slots,"default",{key:0},()=>[g("audio",{class:"peaks-audio",ref_key:"audio",ref:h,controls:""},[g("source",{src:t.src},null,8,Xf)],512)],!0):nn("",!0)],512),Mn(M.$slots,"controls",{},()=>[g("div",Yf,[g("button",{onClick:T[0]||(T[0]=H=>I())},"Zoom in"),$f,g("button",{onClick:T[1]||(T[1]=H=>_())},"Zoom out"),jf,g("span",null,"Zoom level: "+pr(Po(d)),1)])],!0)]))}});const ri=hi(Kf,[["__scopeId","data-v-c5d5d264"]]),Zf=g("p",null,[ye("vue-peaks provides three modes of operation: "),g("ul",null,[g("li",null,[g("b",null,"Simple mode"),ye(": just set the media URL, and all views are automatically rendered by default")]),g("li",null,[g("b",null,"Slot mode"),ye(": the media element and additional views are provided using named slots")]),g("li",null,[g("b",null,"External mode"),ye(": the media element and additional views are referenced by id or HTML element references ")])])],-1),qf=g("h4",{class:"title is-4"},'Just using a media source URL ("simple" mode)',-1),Jf={class:"columns is-desktop"},Qf={class:"column"},ep=g("p",null,[ye(" By default, the "),g("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaks.vue"},"AudioPeaks Vue component"),ye(" template has a new audio element, with the given source URL, and both view panes (overview and zoom, which are rendered with a default size) and a controls pane. A new audio context is created and used to compute the waveform. ")],-1),tp={class:"column"},ip={class:"box"},np=g("h4",{class:"title is-4"},'Providing a media element ("slot" mode)',-1),sp={class:"columns is-desktop"},rp=g("div",{class:"column"},[g("p",null," To provide your own media element, just place it inside the AudioPeaks element (a.k.a. the slot). Vue-peaks will use the first audio element in the slot. A new audio context is created and used to compute the waveform. ")],-1),ap={class:"column"},op={class:"column is-narrow"},lp={class:"box"},hp=g("span",{class:"tag is-danger is-large is-multiline"},"You can also add additional HTML content.",-1),cp=g("audio",{controls:"",style:{width:"100%"}},[g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),dp=g("h4",{class:"title is-4"},'Using a specified media element ("external" mode)',-1),up={class:"columns is-desktop"},fp=g("div",{class:"column"},[g("p",null," If you already have an existing media element, you can reference it by it's (unique) id, or as an HTMLMediaElement object. A new audio context is created and used to compute the waveform. "),g("p",null," There are also properties available for overview area and the zoom view area. ")],-1),pp={class:"column"},gp={class:"column is-narrow"},_p={class:"box"},mp=g("audio",{controls:"",id:"externalMediaElement"},[g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),vp=g("div",null,[g("span",{class:"tag is-danger is-large"}," Using the external media element above.")],-1),yp=bt({__name:"ExampleWithTheBasics",setup(t){return(e,i)=>{const n=xt("highlightjs");return me(),Ce(Ue,null,[Zf,qf,g("div",Jf,[g("div",Qf,[ep,$(n,{language:"vue-typescript",code:"import AudioPeaks from 'vue-peaks/src/components/AudioPeaks.vue';"}),$(n,{language:"vue-template",code:"<AudioPeaks src='https://domain/file.mp3' />"})]),g("div",tp,[g("div",ip,[$(ri,{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})])])]),np,g("div",sp,[rp,g("div",ap,[$(n,{language:"vue-template",code:`<AudioPeaks>
  <span>You can also add additional HTML content.</span>
  <audio controls style='width: 100%;'>
    <source src='https://domain/file.mp3' />
  </audio>
</AudioPeaks>`})]),g("div",op,[g("div",lp,[$(ri,null,{default:$e(()=>[hp,cp]),_:1})])])]),dp,g("div",up,[fp,g("div",pp,[$(n,{language:"vue-template",code:`<audio controls id='externalMediaElement'>
  <source src='https://domain/file.mp3' />
</audio>
<div><span class='tag is-danger is-large'>
    Using the external media element above.</span></div>
<AudioPeaks mediaElementId='externalMediaElement'>
</AudioPeaks>`})]),g("div",gp,[g("div",_p,[mp,vp,$(ri,{mediaElementId:"externalMediaElement"})])])])],64)}}}),bp={class:"columns is-desktop"},wp=Xt('<div class="column"><p> To fully customize the appearance and behavior, the Peaks.js <a href="https://github.com/bbc/peaks.js#Configuration">configuration options</a> can be provided. </p><p> Note, that you should omit the the <span class="code">containers.overview</span>, <span class="code">containers.zoomview</span> and <span class="code">mediaElement</span> options, since these are set internally, depending on the view mode (explained with the basic examples). </p><p>The options allow you for example to <ul><li>customize the waveform styles</li><li>define scrolling behavior</li><li>use precomputed waveform data</li></ul></p></div>',1),Cp={class:"column"},Sp={class:"column"},Tp={class:"box"},kp=g("audio",{controls:""},[g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"})],-1),xp=g("template",null,null,-1),Ep=bt({__name:"ExampleUsingPeaksOptions",setup(t){const e={overview:{waveformColor:"#3298dc",playedWaveformColor:"#238cd1",highlightColor:"hsl(206, 70%, 96%)",highlightOffset:0,axisGridlineColor:"hsl(0, 0%, 29%)",axisLabelColor:"hsl(0, 0%, 29%)",showPlayheadTime:!1},zoomview:{waveformColor:"#f1b70e",playedWaveformColor:"#d9a50d",axisGridlineColor:"hsl(0, 0%, 29%)",axisLabelColor:"hsl(0, 0%, 29%)",playheadTextColor:"#e43725",showPlayheadTime:!0},webAudio:{audioContext:new AudioContext},zoomLevels:[256],playheadColor:"#e43725"};return(i,n)=>{const s=xt("highlightjs");return me(),Ce("div",bp,[wp,g("div",Cp,[$(s,{language:"vue-typescript",code:`/** The configuration options 
* @remarks The colors are taken from a Bulma color scheme.
*/
const options: PeaksOptions = {
  overview: {
    /* container is handled separately by AudioPeaks */
    waveformColor: 'hsl(204, 86%, 53%)',
    playedWaveformColor: 'hsl(204, 71%, 39%)',
    highlightColor: 'hsl(206, 70%, 96%)',
    highlightOffset: 0,
    axisGridlineColor: 'hsl(0, 0%, 29%)',
    axisLabelColor: 'hsl(0, 0%, 29%)',
  },
  zoomview: {
    /* container is handled separately by AudioPeaks */
    waveformColor: 'hsl(48, 71%, 48%)',
    playedWaveformColor: 'hsl(48, 53%, 31%)',
    axisGridlineColor: 'hsl(0, 0%, 29%)',
    axisLabelColor: 'hsl(0, 0%, 29%)',
  },
  /* mediaElement is handled separately by AudioPeaks */
  webAudio: { audioContext: new AudioContext() },
  zoomLevels: [256],
  playheadColor: 'hsl(348, 100%, 61%)'
}`}),$(s,{language:"vue-template",code:`<AudioPeaks :options='options'>
  <audio controls>
    <source src='https://domain/file.mp3' />
  </audio>
  <template #controls><template />
    <!-- Using an empty template on a slot 
         prevents the default content -->
  </template>
</AudioPeaks>`})]),g("div",Sp,[g("div",Tp,[$(ri,{options:e},{controls:$e(()=>[xp]),default:$e(()=>[kp]),_:1})])])])}}}),mi=t=>(Ho("data-v-b3ef7b4c"),t=t(),Fo(),t),Ap={class:"widget"},Pp=["disabled"],Ip={key:0,style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Mp=mi(()=>g("path",{fill:"currentColor",d:"M14,19H18V5H14M6,19H10V5H6V19Z"},null,-1)),Lp=[Mp],Rp={key:1,style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Op=mi(()=>g("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"},null,-1)),Dp=[Op],Np=["disabled"],Hp={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Fp=mi(()=>g("path",{fill:"currentColor",d:"M14.55 20C15 20.76 15.5 21.44 15.91 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V10.22C19.5 10.08 19 10 18.5 10C18.33 10 18.17 10 18 10.03V4H13V12L10.5 9.75L8 12V4H6V20H14.55M22 15.5C22 18.1 18.5 22 18.5 22S15 18.1 15 15.5C15 13.6 16.6 12 18.5 12S22 13.6 22 15.5M19.7 15.6C19.7 15 19.1 14.4 18.5 14.4S17.3 14.9 17.3 15.6C17.3 16.2 17.8 16.8 18.5 16.8S19.8 16.2 19.7 15.6Z"},null,-1)),Gp=[Fp],Wp=["disabled"],Bp={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},zp=mi(()=>g("path",{fill:"currentColor",d:"M13.09 20C13.21 20.72 13.46 21.39 13.81 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V13.09C19.67 13.04 19.34 13 19 13C18.66 13 18.33 13.04 18 13.09V4H13V12L10.5 9.75L8 12V4H6V20H13.09M17 16V22L22 19L17 16Z"},null,-1)),Up=[zp],Vp=mi(()=>g("template",null,null,-1)),Xp=["src"],Yp=mi(()=>g("template",null,null,-1)),$p={class:"item peaks-overview",id:"widgetOverview"},jp=["title"],Kp={class:"spin",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Zp=mi(()=>g("path",{fill:"currentColor",d:"M12 19C13.1 19 14 19.9 14 21S13.1 23 12 23 10 22.1 10 21 10.9 19 12 19M12 1C13.1 1 14 1.9 14 3S13.1 5 12 5 10 4.1 10 3 10.9 1 12 1M6 16C7.1 16 8 16.9 8 18S7.1 20 6 20 4 19.1 4 18 4.9 16 6 16M3 10C4.1 10 5 10.9 5 12S4.1 14 3 14 1 13.1 1 12 1.9 10 3 10M6 4C7.1 4 8 4.9 8 6S7.1 8 6 8 4 7.1 4 6 4.9 4 6 4M18 16C19.1 16 20 16.9 20 18S19.1 20 18 20 16 19.1 16 18 16.9 16 18 16M21 10C22.1 10 23 10.9 23 12S22.1 14 21 14 19 13.1 19 12 19.9 10 21 10M18 4C19.1 4 20 4.9 20 6S19.1 8 18 8 16 7.1 16 6 16.9 4 18 4Z"},null,-1)),qp=[Zp],Jp={key:1},Qp={key:2,class:"has-text-danger"},eg=bt({__name:"AudioPeaksWidget",props:{src:null},setup(t){const e=t,i=gt(),n=Ti(()=>{var c;return(c=i.value)==null?void 0:c.peaksInstance}),s=gt(null),r=li({isPlaying:!1,canPlay:!1,bookmark:0,lastErrorMessage:""}),a={overview:{waveformColor:"#2ecc71",playedWaveformColor:"#29b765",showAxisLabels:!1,axisGridlineColor:"hsl(0, 0%, 100%)",playheadTextColor:"#e43725",showPlayheadTime:!0},showPlayheadTime:!0,webAudio:{audioContext:new AudioContext},playheadColor:"#e43725"};function o(){var c,d;r.isPlaying=!r.isPlaying,r.isPlaying?(c=s.value)==null||c.play():(d=s.value)==null||d.pause()}function l(){var d,f;const c=(d=n.value)==null?void 0:d.player.getCurrentTime();c&&((f=n.value)==null||f.points.add({time:c,editable:!0,labelText:"Bookmark",color:"#000000"}),r.bookmark=c)}function h(){var c;(c=n.value)==null||c.player.seek(r.bookmark)}return(c,d)=>(me(),Ce("div",Ap,[g("button",{class:"item",onClick:d[0]||(d[0]=f=>o()),disabled:!r.canPlay},[r.isPlaying?(me(),Ce("svg",Ip,Lp)):(me(),Ce("svg",Rp,Dp))],8,Pp),g("button",{class:"item",onClick:d[1]||(d[1]=f=>l()),disabled:!r.canPlay,title:"set bookmark"},[(me(),Ce("svg",Hp,Gp))],8,Np),g("button",{class:"item",onClick:d[2]||(d[2]=f=>h()),disabled:!r.bookmark,title:"seek bookmark"},[(me(),Ce("svg",Bp,Up))],8,Wp),$(ri,{overviewElementId:"widgetOverview",ref_key:"audioPeaks",ref:i,options:a,onError:d[4]||(d[4]=f=>r.lastErrorMessage=f.message)},{zoomview:$e(()=>[Vp]),default:$e(()=>[g("audio",{ref_key:"audio",ref:s,onCanplay:d[3]||(d[3]=()=>{r.canPlay=!0})},[g("source",{src:e.src},null,8,Xp)],544)]),controls:$e(()=>[Yp]),_:1},512),g("div",$p,[e.src?(me(),Ce("div",{key:0,title:`Loading and rendering from ${e.src}`},[(me(),Ce("svg",Kp,qp))],8,jp)):(me(),Ce("span",Jp,"no media available")),r.lastErrorMessage?(me(),Ce("span",Qp,pr(r.lastErrorMessage),1)):nn("",!0)])]))}});const tg=hi(eg,[["__scopeId","data-v-b3ef7b4c"]]),ig={class:"columns"},ng=g("div",{class:"column"},[g("p",null," This is a showcase for a simple snippets player. The player is available with vue-peaks as ready-made component, which you can use as-is or adapt it to your needs. ")],-1),sg={class:"column"},rg={class:"column"},ag={class:"box"},og={class:"field"},lg={class:"control"},hg={class:"columns"},cg={class:"column"},dg=g("p",null,[ye("For your reference, here's the complete Widget SFC (as available from "),g("a",{href:"https://github.com/suterma/vue-peaks/blob/main/src/components/AudioPeaksWidget.vue"},"GitHub"),ye(")")],-1),ug=bt({__name:"DemoWidget",setup(t){const e=li({url:""});return(i,n)=>{const s=xt("highlightjs");return me(),Ce(Ue,null,[g("div",ig,[ng,g("div",sg,[$(s,{language:"vue-typescript",code:`import AudioPeaksWidget 
from 'vue-peaks/src/components/AudioPeaksWidget.vue';
const state = reactive({ url: '' });`}),$(s,{language:"vue-template",code:`<input type='url' 
       v-model='state.url' 
       placeholder='Paste an URL to a media file' />
<!-- The :key property makes sure that the component 
     is re-rendered on every URL change, causing
     a re-render of the waveform -->       
<AudioPeaksWidget :src='state.url' 
                  :key='state.url'>
</AudioPeaksWidget>`})]),g("div",rg,[g("div",ag,[g("div",og,[g("div",lg,[Yo(g("input",{class:"input",type:"url","onUpdate:modelValue":n[0]||(n[0]=r=>e.url=r),placeholder:"Paste an URL to a media file"},null,512),[[Sd,e.url]])])]),(me(),Ss(tg,{src:e.url,key:e.url},null,8,["src"]))])])]),g("div",hg,[g("div",cg,[dg,$(s,{language:"vue-sfc",code:`<script setup lang='ts'>
import type { PeaksOptions } from 'peaks.js';
import { computed, reactive, shallowRef } from 'vue';
import AudioPeaks from './AudioPeaks.vue';

/** Reference to the AudioPeaks component */
const audioPeaks = shallowRef<InstanceType<typeof AudioPeaks>>()

/** Accessor to the peaks instance from the AudioPeaks component
 * @remarks Allows access to the peaks.js instance to call various functions on the API.
 */
const peaksInstance = computed(() => audioPeaks.value?.peaksInstance);
const audio = shallowRef<HTMLAudioElement | null>(null);
const state = reactive({ isPlaying: false, canPlay: false, bookmark: 0, lastErrorMessage: '' });

const props = defineProps<{
  /** The media source URL
   */
  src?: string;
}>();

/** The configuration options
 */
const options: PeaksOptions = {
  overview: {
    /* The container div is provided and handled internally by AudioPeaks */
    waveformColor: '#2ecc71',
    playedWaveformColor: '#29b765',
    showAxisLabels: false,
    axisGridlineColor: 'hsl(0, 0%, 100%)',
    playheadTextColor: '#e43725',
    showPlayheadTime: true
  },
  showPlayheadTime: true,
  /* The widget does not use a zoom area */

  /* The mediaElement is provided and handled internally by AudioPeaks */
  webAudio: { audioContext: new AudioContext() },
  playheadColor: '#e43725',
};



/** Toggles playback
 * @devdoc Directly uses the audio element instead of the peaks.js player API 
 * to allow control even when the waveform is not yet ready.
 */
function togglePlayback() {
  state.isPlaying = !state.isPlaying;
  if (state.isPlaying) {
    audio.value?.play();
  } else {
    audio.value?.pause();
  }
}

/** Sets a bookmark at the current position
 */
function setBookmark() {
  const currentTime = peaksInstance.value?.player.getCurrentTime();
  if (currentTime) {
    peaksInstance.value?.points.add({
      time: currentTime,
      editable: true,
      labelText: 'Bookmark',
      color: '#000000'
    });
    state.bookmark = currentTime;
  }
}

/** Seeks to the stored bookmark
 */
function seekBookmark() {
  peaksInstance.value?.player.seek(state.bookmark);
}
<\/script>
<template>
  <div class='widget'>
    <button class='item' @click='togglePlayback()' :disabled='!state.canPlay'>
      <!-- pause icon -->
      <svg v-if='state.isPlaying' style='width: 24px; height: 24px' viewBox='0 0 24 24'>
        <path fill='currentColor' d='M14,19H18V5H14M6,19H10V5H6V19Z' />
      </svg>
      <!-- play icon -->
      <svg v-else style='width: 24px; height: 24px' viewBox='0 0 24 24'>
        <path fill='currentColor' d='M8,5.14V19.14L19,12.14L8,5.14Z' />
      </svg>
    </button>
    <button class='item' @click='setBookmark()' :disabled='!state.canPlay' title='set bookmark'>
      <!-- bookmark icon -->
      <svg style='width: 24px; height: 24px' viewBox='0 0 24 24'>
        <path fill='currentColor'
          d='M14.55 20C15 20.76 15.5 21.44 15.91 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V10.22C19.5 10.08 19 10 18.5 10C18.33 10 18.17 10 18 10.03V4H13V12L10.5 9.75L8 12V4H6V20H14.55M22 15.5C22 18.1 18.5 22 18.5 22S15 18.1 15 15.5C15 13.6 16.6 12 18.5 12S22 13.6 22 15.5M19.7 15.6C19.7 15 19.1 14.4 18.5 14.4S17.3 14.9 17.3 15.6C17.3 16.2 17.8 16.8 18.5 16.8S19.8 16.2 19.7 15.6Z' />
      </svg>
    </button>
    <button class='item' @click='seekBookmark()' :disabled='!state.bookmark' title='seek bookmark'>
      <!-- bookmark seek icon -->
      <svg style='width: 24px; height: 24px' viewBox='0 0 24 24'>
        <path fill='currentColor'
          d='M13.09 20C13.21 20.72 13.46 21.39 13.81 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H18C19.11 2 20 2.9 20 4V13.09C19.67 13.04 19.34 13 19 13C18.66 13 18.33 13.04 18 13.09V4H13V12L10.5 9.75L8 12V4H6V20H13.09M17 16V22L22 19L17 16Z' />
      </svg>
    </button>
    <AudioPeaks overviewElementId='widgetOverview' ref='audioPeaks' :options='options'
      @error='(err) => state.lastErrorMessage = err.message'>
      <template #zoomview>
        <template />
      </template>
      <template #default>
        <audio ref='audio' @canplay='
          () => {
            state.canPlay = true;
          }
        '>
          <source :src='props.src' />
        </audio>
      </template>
      <template #controls>
        <template />
      </template>
    </AudioPeaks>
    <div class='item peaks-overview' id='widgetOverview'>
      <div v-if='props.src' :title='\`Loading and rendering from \${props.src}\`'>
        <!-- spinner icon -->
        <svg class='spin' style='width: 24px; height: 24px' viewBox='0 0 24 24'>
          <path fill='currentColor'
            d='M12 19C13.1 19 14 19.9 14 21S13.1 23 12 23 10 22.1 10 21 10.9 19 12 19M12 1C13.1 1 14 1.9 14 3S13.1 5 12 5 10 4.1 10 3 10.9 1 12 1M6 16C7.1 16 8 16.9 8 18S7.1 20 6 20 4 19.1 4 18 4.9 16 6 16M3 10C4.1 10 5 10.9 5 12S4.1 14 3 14 1 13.1 1 12 1.9 10 3 10M6 4C7.1 4 8 4.9 8 6S7.1 8 6 8 4 7.1 4 6 4.9 4 6 4M18 16C19.1 16 20 16.9 20 18S19.1 20 18 20 16 19.1 16 18 16.9 16 18 16M21 10C22.1 10 23 10.9 23 12S22.1 14 21 14 19 13.1 19 12 19.9 10 21 10M18 4C19.1 4 20 4.9 20 6S19.1 8 18 8 16 7.1 16 6 16.9 4 18 4Z' />
        </svg>
      </div>
      <span v-else>no media available</span>
      <span v-if='state.lastErrorMessage' class='has-text-danger'>{{state.lastErrorMessage}}</span>
    </div>
  </div>
</template>
<style scoped>
.widget {
  height: 48px;
  align-items: center;
  display: flex;
  flex-wrap: nowrap;
  justify-content: flex-start;
}

.item {
  height: 48px;
  display: flex;
  justify-content: center;
  align-items: center;
  border: 1px solid var(--color-border);
  background: var(--color-background);
  border-radius: 8px;
  cursor: pointer;
  padding-left: 1em;
  padding-right: 1em;
  text-align: center;
}

/** The overview item should use all available space, including in the item itself */
.item.peaks-overview {
  flex-grow: 1;
  padding-left: 0;
  padding-right: 0;
}

.widget .item:not(:last-child) {
  border-bottom-right-radius: 0;
  border-top-right-radius: 0;
  margin-right: -1px;
}

.widget .item:not(:first-child) {
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(359deg);
  }
}

.spin {
  animation: spin 6s linear infinite;
}
</style>`})])])],64)}}}),fg={class:"columns"},pg={class:"column"},gg=g("p",null,[ye("You might need to access the peaks.js instance to call various functions on their extensive "),g("a",{href:"https://github.com/bbc/peaks.js#api>"},"API"),ye(".")],-1),_g=g("p",null," In the hosting component, get a reference to the AudioPeaks child component and, for convenience, a directly computed property to the actual peaks.js instance: ",-1),mg=g("p",null," Now you can access the instance and it's methods by using the reference, like in this example: ",-1),vg=g("p",null," Remember, that the instance is available only after the child has been mounted and peaks.js has been initialized. ",-1),yg=bt({__name:"AccessingThePeaksInstance",setup(t){return li({url:""}),(e,i)=>{const n=xt("highlightjs");return me(),Ce("div",fg,[g("div",pg,[gg,_g,g("p",null,[$(n,{language:"vue-typescript",code:`/** Reference to the AudioPeaks component */
const audioPeaks = shallowRef<InstanceType<typeof AudioPeaks>>()

/** Accessor to the peaks instance from the AudioPeaks component
 * @remarks Allows access to the peaks.js instance 
 * to call various functions on the API.
 */
const peaksInstance = computed(() => audioPeaks.value?.peaksInstance);`})]),mg,g("p",null,[$(n,{language:"vue-typescript",code:`/** Sets a bookmark at the current position
 */
function setBookmark() {
  const currentTime = peaksInstance.value?.player.getCurrentTime();
  if (currentTime) {
    peaksInstance.value?.points.add({
      time: currentTime
    });
    state.bookmark = currentTime;
  }
}`})]),vg])])}}}),bg={class:"columns is-desktop"},wg=Xt('<div class="column"><p> AudioPeaks currently does not support reactivity for the options. Still, you can use Vue&#39;s reactivity on the component itself. You can for example: </p><p><ul><li>Conditionally render the component (by using Vue&#39;s built-in <span class="code">v-if</span> directive). This also releases memory used. </li><li>Replace the media source by setting the <span class="code">src</span> attribute of the audio element. When you also set the <span class="code">:key</span> property to a new value, the component re-renders. <br>This is called the key-changing technique, and is required to trigger an update of the waveform.</li></ul></p></div>',1),Cg={class:"column is-narrow"},Sg={class:"box"},Tg={class:"field"},kg=g("label",{class:"label is-multiline"},"Create and destroy an AudioPeaks instance:",-1),xg={class:"control"},Eg={class:"field"},Ag=g("label",{class:"label is-multiline"},"Change the media URL (triggers re-rendering).",-1),Pg={class:"control"},Ig={class:"select is-danger"},Mg=g("option",{value:""},"-select option-",-1),Lg=g("option",{value:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"},"An MP3 music file ",-1),Rg=g("option",{value:"https://suterma.github.io/vue-peaks/lidija_roos-decisions.ogg"},"An OGG music file ",-1),Og=g("option",{value:"https://twit.cachefly.net/audio/sn/sn0886/sn0886.mp3"},"Security Now! Podcast, Episode #886 (112 min, 55.5MB, MP3)",-1),Dg=[Mg,Lg,Rg,Og],Ng=["src"],Hg=g("template",null,null,-1),Fg=g("template",null,null,-1),Gg={class:"column"},Wg=bt({__name:"ExampleUsingReactivity",setup(t){const e=li({isRendered:!0,mediaSource:""});function i(){const n=e.isRendered;console.log("CurrentState",n),e.isRendered=!n}return(n,s)=>{const r=xt("highlightjs");return me(),Ce("div",bg,[wg,g("div",Cg,[g("div",Sg,[g("div",Tg,[kg,g("div",xg,[g("button",{onClick:s[0]||(s[0]=a=>i()),class:"button is-danger"},[g("span",null,pr(e.isRendered?"Destroy":"Render"),1)])])]),g("div",Eg,[Ag,g("div",Pg,[g("div",Ig,[Yo(g("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>e.mediaSource=a),class:"highlight"},Dg,512),[[Td,e.mediaSource]])])])]),e.isRendered?(me(),Ss(ri,{key:e.mediaSource},{zoomview:$e(()=>[Hg]),controls:$e(()=>[Fg]),default:$e(()=>[g("audio",{controls:"",src:e.mediaSource},null,8,Ng)]),_:1})):nn("",!0)])]),g("div",Gg,[$(r,{language:"vue-template",code:`<div class='field'>
  <label class='label'>Example button to create
    and destroy an AudioPeaks instance:</label>
  <div class='control'>
    <button @click='toggleRendering()' class='button  is-danger'>
      <span>{{ state.isRendered ? 'Destroy' : 'Render' }}</span>
    </button>
  </div>
</div>
<div class='field'>
  <label class='label'>Example menu to change the media URL,
    with automatic re-rendering of the
    component.</label>
  <div class='control'>
    <div class='select is-danger'>
      <select v-model='state.mediaSource' class='highlight'>
        <option value=''>-select option-</option>
        <option value='https://example.com/file1.mp3'>
          An MP3 music file
        </option>
        <option value='https://example.com/file2.ogg'>
          An OGG music file
        </option>
        <option value='https://example.com/file3.mp3'>
          Podcast
        </option>
      </select>
    </div>
  </div>
</div>
<AudioPeaks v-if='state.isRendered' :key='state.mediaSource'>
  <audio controls :src='state.mediaSource'></audio>
  <template #zoomview>
    <template />
  </template>
  <template #controls>
    <template />
  </template>
</AudioPeaks>`})])])}}}),Bg={class:"columns is-desktop"},zg=Xt('<div class="column"><p> To provide your own layout, you can also use the <a href="https://vuejs.org/guide/components/slots.html#named-slots">named slots</a>: <li><span class="code">#overview</span></li><li><span class="code">#zoomview</span></li><li><span class="code">#audio</span> (default)</li><li><span class="code">#controls</span></li></p><p>This allows you for example to <ul><li>layout elements differently</li><li>not render (instead of just not show) elements</li><li>have a completely custom media element</li></ul> You can use any of the media element modes with named slots. Use <span class="code">$refs</span> to access the relevant HTML elements.</p><p>You can use a different mode for each slot, thus mixing the &quot;slot&quot; mode with the &quot;external&quot; mode in the same component.</p></div>',1),Ug={class:"column"},Vg={class:"column is-narrow",style:{"max-width":"400px"}},Xg={class:"box"},Yg=g("div",{style:{height:"50px"}},null,-1),$g=g("span",{class:"tag is-danger is-large"}," Some slot content here.",-1),jg=g("span",{class:"tag is-danger is-large is-multiline"}," In this example, the audio control is not shown, but some custom buttons instead:",-1),Kg={ref:"audio"},Zg=g("source",{src:"https://suterma.github.io/vue-peaks/lidija_roos-not_for_sale.mp3"},null,-1),qg=[Zg],Jg=ye("\xA0 "),Qg=g("template",null,null,-1),e_=g("span",{class:"tag is-danger is-large is-multiline"}," No zoom controls are shown, by providing an empty template to the named controls slot.",-1),t_=bt({__name:"ExampleUsingSlots",setup(t){return(e,i)=>{const n=xt("highlightjs");return me(),Ce("div",Bg,[zg,g("div",Ug,[$(n,{language:"vue-template",code:`<AudioPeaks>
  <template #overview>
    <div style='height: 50px;'></div>
    <span class='tag is-danger is-large'>
      Some slot content here.</span>
  </template>
  <template #default>
    <span class='tag is-danger is-large is-multiline'>
      In this example, the audio control is not shown,
      but some custom
      buttons instead:</span>
    <audio ref='audio'>
      <source src='https://domain/file.mp3' />
    </audio>
    <button @click='($refs.audio as HTMLAudioElement).play()'>
      Play
    </button>\xA0
    <button @click='($refs.audio as HTMLAudioElement).pause()'>
      Pause
    </button>
  </template>
  <template #controls>
    <template />
  </template>
</AudioPeaks>
<span class='tag is-danger is-large is-multiline'>
  No zoom controls are shown, by providing an empty template
  to the named controls slot.</span>`})]),g("div",Vg,[g("div",Xg,[$(ri,null,{overview:$e(()=>[Yg,$g]),default:$e(()=>[jg,g("audio",Kg,qg,512),g("button",{onClick:i[0]||(i[0]=s=>e.$refs.audio.play())}," Play "),Jg,g("button",{onClick:i[1]||(i[1]=s=>e.$refs.audio.pause())}," Pause ")]),controls:$e(()=>[Qg]),_:1}),e_])])])}}}),i_={},n_={class:"columns"},s_=Xt('<div class="column"><p> vue-peaks aims to simplify the use of <a target="_blank" href="https://github.com/bbc/peaks.js/">peaks.js</a> in a <a target="_blank" href=" https://vuejs.org/">Vue3</a> environment. It provides a <a target="_blank" href="    https://vuejs.org/guide/scaling-up/sfc.html">Single File Component (SFC)</a>, <span class="code">AudioPeaks</span>. </p><p> Explore the below examples or see the <a target="_blank" href="https://github.com/suterma/vue-peaks#vue-peaks">vue-peaks GitHub repository</a>. </p></div>',1),r_={class:"column"},a_=g("p",null,[ye(" Installing vue-peaks also installs "),g("a",{target:"_blank",href:"https://github.com/bbc/peaks.js/"},"peaks.js"),ye(" as a dependency. However, peaks.js uses "),g("a",{target:"_blank",href:"https://konvajs.org/"},"Konva"),ye(" and "),g("a",{target:"_blank",href:"https://github.com/bbc/waveform-data.js"},"waveform-data"),ye(" as peer dependencies, so you must also install those modules. ")],-1);function o_(t,e){const i=xt("highlightjs");return me(),Ce("div",n_,[s_,g("div",r_,[g("p",null,[$(i,{language:"bash",code:`npm install vue-peaks
# peer dependencies of peaks.js
npm install konva
npm install waveform-data`})]),a_])])}const l_=hi(i_,[["render",o_]]),h_={},c_=Xt('<p>This project uses</p><ul><li><a href="https://github.com/bbc/peaks.js/" target="_blank">peaks.js</a>, a client-side JavaScript component to display and interact with audio waveforms in the browser. (Released under the LGPL-3.0 license, by the British Broadcasting Corporation and contributors) </li><li><a href="https://vuejs.org/" target="_blank">Vue.js</a>, the progressive JavaScript framework. (Released under the MIT License, Copyright \xA9 2014-2021 Evan You) </li><li><a href="https://bulma.io/" target="_blank">Bulma</a>, the modern CSS framework that just works. (Released under the MIT License, by Jeremy Thomas) </li><li><a href="https://jenil.github.io/bulmaswatch/" target="_blank">Bulmaswatch</a>, free themes for Bulma. (Released under the MIT License, by Jenil Gogari) </li><li><a href="https://materialdesignicons.com/" target="_blank">Material Design Icons</a>, the original. Following Google&#39;s Material Design guidelines for system icons. (Icons released under the Apache 2.0 License, by pictogrammers.com) </li><li><a href="https://jestjs.io/" target="_blank"> Jest</a>, a delightful JavaScript Testing Framework. (Released under the MIT License, by Facebook) </li><li> Music from the Album &quot;Not For Sale&quot; by Lidija Roos (Released to the public, by Lidija Roos) </li><li><a href="https://github.com/highlightjs/vue-plugin" target="_blank">@highlightjs/vue-plugin</a>, provides a highlightjs component for use in your Vue.js 3 applications. (Released under the BSD-3-Clause license, by the highlight.js team) </li><li><a href="https://github.com/microsoft/rushstack/tree/main/eslint/eslint-patch" target="_blank">@rushstack/eslint-patch</a>, a patch that improves how ESLint loads plugins when working in a monorepo with a reusable toolchain. (Released under the MIT License, by Microsoft)</li><li><a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank">@types/jsdom, @types/node</a>, the repository for high quality TypeScript type definitions. (Released under the MIT License, by various contributors)</li><li><a href="https://github.com/vitejs/vite" target="_blank">vite, vitest, @vitejs/plugin-vue</a>, next Generation Frontend Tooling. (Released under the MIT License, by the vite team) </li><li><a href="https://github.com/eslint/eslint" target="_blank">eslint</a>, a tool for identifying and reporting on patterns found in ECMAScript/JavaScript code. (Released under the MIT License, by the eslint team) </li><li><a href="https://github.com/jsdom/jsdom" target="_blank">jsdom</a>, a pure-JavaScript implementation of many web standards. (Released under the MIT License, by the jsdom team) </li><li><a href="https://github.com/mysticatea/npm-run-all" target="_blank">npm-run-all</a>, a CLI tool to run multiple npm-scripts in parallel or sequential. (Released under the MIT License, by Toru Nagashima) </li><li><a href="https://github.com/prettier/prettier" target="_blank">prettier</a>, an opinionated Code Formatter. (Released under the MIT License, by the prettier team) </li><li><a href="https://github.com/Microsoft/TypeScript" target="_blank">typescript</a>, a language for application-scale JavaScript. (Released under the Apache-2.0 license, by Microsoft) </li><li><a href="https://github.com/johnsoncodehk/volar" target="_blank">vue-tsc</a>, high-performance tooling for Vue. (Released under the MIT License, by Johnson Chu) </li></ul><p>Initial code is taken from</p><ul><li><a href="https://github.com/candeogi/peaks-vue-demo" target="_blank">peaks-vue-demo</a>, by Giovanni Candeo (MIT-licensed) </li><li><a href="https://github.com/thom4parisot/vue-waveform-template" target="_blank">vue-waveform-template</a>, by Thomas Parisot (MIT-licensed) </li></ul>',4);function d_(t,e){return c_}const u_=hi(h_,[["render",d_]]),f_={},p_={class:"columns"},g_=g("div",{class:"column"},[g("p",null,[ye(" Vue-peaks offers it's own properties for customization. Plus you can configure the underlying peaks.js instance via the options property (of type "),g("span",{class:"code"},"PeaksOptions"),ye("). ")])],-1),__={class:"column"};function m_(t,e){const i=xt("highlightjs");return me(),Ce("div",p_,[g_,g("div",__,[$(i,{language:"vue-typescript",code:`const props = defineProps<{
  /** The audio source URL (for the 'simple' mode)
   * @remarks This URL is to be used internally with the default media slot
   * (no slot template or external media element id is expected)
   */
  src?: string;
  /** The unique identifier of an external zoomview element to use.
   * @remarks Allows the use of an external zoomview element.
   * (no slot template is expected or used for the zoomview)
   */
  zoomviewElementId?: string;
  /** The zoomview element to use.
   * @remarks Allows the use of an external zoomview element.
   * (no slot template is expected or used for the zoomview)
   */
  zoomviewElement?: HTMLDivElement;
  /** The unique identifier of an external overview element to use.
   * @remarks Allows the use of an external overview element.
   * (no slot template is expected or used for the overview)
   */
  overviewElementId?: string;
  /** The overview element to use.
   * @remarks Allows the use of an external overview element.
   * (no slot template is expected or used for the overview)
   */
  overviewElement?: HTMLDivElement;
  /** The unique identifier of an external media element to use. 
   * (for the 'external' mode)
   * @remarks Allows the use of an external media element.
   * (no slot template or audio source URL is expected)
   */
  mediaElementId?: string;
  /** The external media element to use. (for the 'external' mode)
   * @remarks Allows the use of an external media element.
   * (no slot template or audio source URL is expected)
   */
  mediaElement?: HTMLMediaElement;
  /** The peaks options to use.
   * @remarks The element references to the overview, zoomview and media element
   * should not be provided, because these are handled internally by AudioPeaks.
   * This removes the burden of management of the Vue ref lifecycle from the user.
   * @devdoc Refs to HTML elements can only be accessed after mount.
   * See https://vuejs.org/guide/essentials/template-refs.html#accessing-the-refs
   */
  options?: PeaksOptions;
}>();`})])])}const v_=hi(f_,[["render",m_]]),Pt=t=>(Ho("data-v-e1b58338"),t=t(),Fo(),t),y_=Xt('<section class="hero is-light" data-v-e1b58338><div class="hero-body has-text-centered" data-v-e1b58338><img alt="Vue logo" class="logo" src="'+Pd+'" width="125" height="125" data-v-e1b58338><h1 class="title is-1" data-v-e1b58338>vue-peaks</h1><h2 class="subtitle is-3" data-v-e1b58338> A lightweight Vue wrapper around the <a target="_blank" href="https://github.com/bbc/peaks.js/" data-v-e1b58338>bbc/peaks.js</a> audio waveform UI component. </h2></div></section>',1),b_={class:"section"},w_={class:"no-container"},C_={class:"columns"},S_=Xt('<div class="column is-2" data-v-e1b58338><aside class="is-medium menu" data-v-e1b58338><p class="menu-label" data-v-e1b58338> Topics </p><ul class="menu-list" data-v-e1b58338><li data-v-e1b58338><a href="#basic-examples" data-v-e1b58338> Basic examples</a></li><li data-v-e1b58338><a href="#available-properties" data-v-e1b58338> Properties</a></li><li data-v-e1b58338><a href="#setting-styles" data-v-e1b58338>Setting styles</a></li><li data-v-e1b58338><a href="#using-slots" data-v-e1b58338>Using slots</a></li><li data-v-e1b58338><a href="#using-options" data-v-e1b58338>Options</a></li><li data-v-e1b58338><a href="#accessing-instance" data-v-e1b58338>Accessing the instance</a></li><li data-v-e1b58338><a href="#using-reactivity" data-v-e1b58338>Using reactivity</a></li><li data-v-e1b58338><a href="#player-widget" data-v-e1b58338>A widget</a></li><li data-v-e1b58338><a href="#credits" data-v-e1b58338>Credits</a></li></ul></aside></div>',1),T_={class:"column is-10"},k_={class:"content"},x_={class:"example"},E_=Pt(()=>g("h3",{id:"basic-examples",class:"title is-3"},"Basic examples",-1)),A_={class:"example"},P_=Pt(()=>g("h3",{id:"available-properties",class:"title is-3"},"Available properties",-1)),I_={class:"example"},M_=Pt(()=>g("h3",{id:"setting-styles",class:"title is-3"},"Setting styles",-1)),L_={class:"example"},R_=Pt(()=>g("h3",{id:"using-slots",class:"title is-3"},"Using slots for custom views",-1)),O_={class:"example"},D_=Pt(()=>g("h3",{id:"using-options",class:"title is-3"},"Using peaks.js configuration options ",-1)),N_={class:"example"},H_=Pt(()=>g("h3",{id:"accessing-instance",class:"title is-3"}," Accessing the peaks.js instance ",-1)),F_=Pt(()=>g("h3",{id:"using-reactivity",class:"title is-3"},"Using reactivity",-1)),G_={class:"example"},W_=Pt(()=>g("h3",{id:"player-widget",class:"title is-3"},"A waveform player widget",-1)),B_={class:"example"},z_=Pt(()=>g("h3",{id:"credits",class:"title is-3"},"Credits",-1)),U_={class:"example"},V_=Xt('<footer class="footer" data-v-e1b58338><section class="section" data-v-e1b58338><div class="container has-text-centered" data-v-e1b58338><p data-v-e1b58338><a href="https://github.com/suterma/vue-peaks" data-v-e1b58338>vue-peaks</a> is created with love by <a href="https://marcelsuter.ch" data-v-e1b58338>Marcel Suter</a> for the <a href="http://replayer.app" data-v-e1b58338>Replayer</a> project. </p></div></section></footer>',1),X_=bt({__name:"App",setup(t){return(e,i)=>(me(),Ce(Ue,null,[y_,g("section",b_,[g("div",w_,[g("div",C_,[S_,g("div",T_,[g("div",k_,[g("article",x_,[$(l_)]),E_,g("article",A_,[$(yp)]),P_,g("article",I_,[$(v_)]),M_,g("article",L_,[$(Dd)]),R_,g("article",O_,[$(t_)]),D_,g("article",N_,[$(Ep)]),H_,g("article",null,[$(yg)]),F_,g("article",G_,[$(Wg)]),W_,g("article",B_,[$(ug)]),z_,g("article",U_,[$(u_)])])])])])]),V_],64))}});const Y_=hi(X_,[["__scopeId","data-v-e1b58338"]]);var Gr={exports:{}};function Wr(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){var i=t[e];typeof i=="object"&&!Object.isFrozen(i)&&Wr(i)}),t}Gr.exports=Wr;Gr.exports.default=Wr;class Qa{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function Ul(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Ht(t,...e){const i=Object.create(null);for(const n in t)i[n]=t[n];return e.forEach(function(n){for(const s in n)i[s]=n[s]}),i}const $_="</span>",eo=t=>!!t.scope||t.sublanguage&&t.language,j_=(t,{prefix:e})=>{if(t.includes(".")){const i=t.split(".");return[`${e}${i.shift()}`,...i.map((n,s)=>`${n}${"_".repeat(s+1)}`)].join(" ")}return`${e}${t}`};class K_{constructor(e,i){this.buffer="",this.classPrefix=i.classPrefix,e.walk(this)}addText(e){this.buffer+=Ul(e)}openNode(e){if(!eo(e))return;let i="";e.sublanguage?i=`language-${e.language}`:i=j_(e.scope,{prefix:this.classPrefix}),this.span(i)}closeNode(e){!eo(e)||(this.buffer+=$_)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const to=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class Br{constructor(){this.rootNode=to(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const i=to({scope:e});this.add(i),this.stack.push(i)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,i){return typeof i=="string"?e.addText(i):i.children&&(e.openNode(i),i.children.forEach(n=>this._walk(e,n)),e.closeNode(i)),e}static _collapse(e){typeof e!="string"&&(!e.children||(e.children.every(i=>typeof i=="string")?e.children=[e.children.join("")]:e.children.forEach(i=>{Br._collapse(i)})))}}class Z_ extends Br{constructor(e){super(),this.options=e}addKeyword(e,i){e!==""&&(this.openNode(i),this.addText(e),this.closeNode())}addText(e){e!==""&&this.add(e)}addSublanguage(e,i){const n=e.root;n.sublanguage=!0,n.language=i,this.add(n)}toHTML(){return new K_(this,this.options).value()}finalize(){return!0}}function mn(t){return t?typeof t=="string"?t:t.source:null}function Vl(t){return vi("(?=",t,")")}function q_(t){return vi("(?:",t,")*")}function J_(t){return vi("(?:",t,")?")}function vi(...t){return t.map(i=>mn(i)).join("")}function Q_(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function zr(...t){const e=Q_(t);return"("+(e.capture?"":"?:")+t.map(n=>mn(n)).join("|")+")"}function Xl(t){return new RegExp(t.toString()+"|").exec("").length-1}function em(t,e){const i=t&&t.exec(e);return i&&i.index===0}const tm=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Ur(t,{joinWith:e}){let i=0;return t.map(n=>{i+=1;const s=i;let r=mn(n),a="";for(;r.length>0;){const o=tm.exec(r);if(!o){a+=r;break}a+=r.substring(0,o.index),r=r.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?a+="\\"+String(Number(o[1])+s):(a+=o[0],o[0]==="("&&i++)}return a}).map(n=>`(${n})`).join(e)}const im=/\b\B/,Yl="[a-zA-Z]\\w*",Vr="[a-zA-Z_]\\w*",$l="\\b\\d+(\\.\\d+)?",jl="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Kl="\\b(0b[01]+)",nm="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",sm=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=vi(e,/.*\b/,t.binary,/\b.*/)),Ht({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(i,n)=>{i.index!==0&&n.ignoreMatch()}},t)},vn={begin:"\\\\[\\s\\S]",relevance:0},rm={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[vn]},am={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[vn]},om={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Os=function(t,e,i={}){const n=Ht({scope:"comment",begin:t,end:e,contains:[]},i);n.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=zr("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return n.contains.push({begin:vi(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),n},lm=Os("//","$"),hm=Os("/\\*","\\*/"),cm=Os("#","$"),dm={scope:"number",begin:$l,relevance:0},um={scope:"number",begin:jl,relevance:0},fm={scope:"number",begin:Kl,relevance:0},pm={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[vn,{begin:/\[/,end:/\]/,relevance:0,contains:[vn]}]}]},gm={scope:"title",begin:Yl,relevance:0},_m={scope:"title",begin:Vr,relevance:0},mm={begin:"\\.\\s*"+Vr,relevance:0},vm=function(t){return Object.assign(t,{"on:begin":(e,i)=>{i.data._beginMatch=e[1]},"on:end":(e,i)=>{i.data._beginMatch!==e[1]&&i.ignoreMatch()}})};var Vn=Object.freeze({__proto__:null,MATCH_NOTHING_RE:im,IDENT_RE:Yl,UNDERSCORE_IDENT_RE:Vr,NUMBER_RE:$l,C_NUMBER_RE:jl,BINARY_NUMBER_RE:Kl,RE_STARTERS_RE:nm,SHEBANG:sm,BACKSLASH_ESCAPE:vn,APOS_STRING_MODE:rm,QUOTE_STRING_MODE:am,PHRASAL_WORDS_MODE:om,COMMENT:Os,C_LINE_COMMENT_MODE:lm,C_BLOCK_COMMENT_MODE:hm,HASH_COMMENT_MODE:cm,NUMBER_MODE:dm,C_NUMBER_MODE:um,BINARY_NUMBER_MODE:fm,REGEXP_MODE:pm,TITLE_MODE:gm,UNDERSCORE_TITLE_MODE:_m,METHOD_GUARD:mm,END_SAME_AS_BEGIN:vm});function ym(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function bm(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function wm(t,e){!e||!t.beginKeywords||(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=ym,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function Cm(t,e){!Array.isArray(t.illegal)||(t.illegal=zr(...t.illegal))}function Sm(t,e){if(!!t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function Tm(t,e){t.relevance===void 0&&(t.relevance=1)}const km=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const i=Object.assign({},t);Object.keys(t).forEach(n=>{delete t[n]}),t.keywords=i.keywords,t.begin=vi(i.beforeMatch,Vl(i.begin)),t.starts={relevance:0,contains:[Object.assign(i,{endsParent:!0})]},t.relevance=0,delete i.beforeMatch},xm=["of","and","for","in","not","or","if","then","parent","list","value"],Em="keyword";function Zl(t,e,i=Em){const n=Object.create(null);return typeof t=="string"?s(i,t.split(" ")):Array.isArray(t)?s(i,t):Object.keys(t).forEach(function(r){Object.assign(n,Zl(t[r],e,r))}),n;function s(r,a){e&&(a=a.map(o=>o.toLowerCase())),a.forEach(function(o){const l=o.split("|");n[l[0]]=[r,Am(l[0],l[1])]})}}function Am(t,e){return e?Number(e):Pm(t)?0:1}function Pm(t){return xm.includes(t.toLowerCase())}const io={},ai=t=>{console.error(t)},no=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Si=(t,e)=>{io[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),io[`${t}/${e}`]=!0)},ds=new Error;function ql(t,e,{key:i}){let n=0;const s=t[i],r={},a={};for(let o=1;o<=e.length;o++)a[o+n]=s[o],r[o+n]=!0,n+=Xl(e[o-1]);t[i]=a,t[i]._emit=r,t[i]._multi=!0}function Im(t){if(!!Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw ai("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ds;if(typeof t.beginScope!="object"||t.beginScope===null)throw ai("beginScope must be object"),ds;ql(t,t.begin,{key:"beginScope"}),t.begin=Ur(t.begin,{joinWith:""})}}function Mm(t){if(!!Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw ai("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ds;if(typeof t.endScope!="object"||t.endScope===null)throw ai("endScope must be object"),ds;ql(t,t.end,{key:"endScope"}),t.end=Ur(t.end,{joinWith:""})}}function Lm(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function Rm(t){Lm(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),Im(t),Mm(t)}function Om(t){function e(a,o){return new RegExp(mn(a),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(o?"g":""))}class i{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,o]),this.matchAt+=Xl(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(l=>l[1]);this.matcherRe=e(Ur(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(o);if(!l)return null;const h=l.findIndex((d,f)=>f>0&&d!==void 0),c=this.matchIndexes[h];return l.splice(0,h),Object.assign(l,c)}}class n{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const l=new i;return this.rules.slice(o).forEach(([h,c])=>l.addRule(h,c)),l.compile(),this.multiRegexes[o]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,l){this.rules.push([o,l]),l.type==="begin"&&this.count++}exec(o){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let h=l.exec(o);if(this.resumingScanAtSamePosition()&&!(h&&h.index===this.lastIndex)){const c=this.getMatcher(0);c.lastIndex=this.lastIndex+1,h=c.exec(o)}return h&&(this.regexIndex+=h.position+1,this.regexIndex===this.count&&this.considerAll()),h}}function s(a){const o=new n;return a.contains.forEach(l=>o.addRule(l.begin,{rule:l,type:"begin"})),a.terminatorEnd&&o.addRule(a.terminatorEnd,{type:"end"}),a.illegal&&o.addRule(a.illegal,{type:"illegal"}),o}function r(a,o){const l=a;if(a.isCompiled)return l;[bm,Sm,Rm,km].forEach(c=>c(a,o)),t.compilerExtensions.forEach(c=>c(a,o)),a.__beforeBegin=null,[wm,Cm,Tm].forEach(c=>c(a,o)),a.isCompiled=!0;let h=null;return typeof a.keywords=="object"&&a.keywords.$pattern&&(a.keywords=Object.assign({},a.keywords),h=a.keywords.$pattern,delete a.keywords.$pattern),h=h||/\w+/,a.keywords&&(a.keywords=Zl(a.keywords,t.case_insensitive)),l.keywordPatternRe=e(h,!0),o&&(a.begin||(a.begin=/\B|\b/),l.beginRe=e(l.begin),!a.end&&!a.endsWithParent&&(a.end=/\B|\b/),a.end&&(l.endRe=e(l.end)),l.terminatorEnd=mn(l.end)||"",a.endsWithParent&&o.terminatorEnd&&(l.terminatorEnd+=(a.end?"|":"")+o.terminatorEnd)),a.illegal&&(l.illegalRe=e(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(c){return Dm(c==="self"?a:c)})),a.contains.forEach(function(c){r(c,l)}),a.starts&&r(a.starts,o),l.matcher=s(l),l}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=Ht(t.classNameAliases||{}),r(t)}function Jl(t){return t?t.endsWithParent||Jl(t.starts):!1}function Dm(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return Ht(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:Jl(t)?Ht(t,{starts:t.starts?Ht(t.starts):null}):Object.isFrozen(t)?Ht(t):t}var Nm="11.6.0";class Hm extends Error{constructor(e,i){super(e),this.name="HTMLInjectionError",this.html=i}}const $s=Ul,so=Ht,ro=Symbol("nomatch"),Fm=7,Gm=function(t){const e=Object.create(null),i=Object.create(null),n=[];let s=!0;const r="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:Z_};function l(A){return o.noHighlightRe.test(A)}function h(A){let O=A.className+" ";O+=A.parentNode?A.parentNode.className:"";const G=o.languageDetectRe.exec(O);if(G){const J=ae(G[1]);return J||(no(r.replace("{}",G[1])),no("Falling back to no-highlight mode for this block.",A)),J?G[1]:"no-highlight"}return O.split(/\s+/).find(J=>l(J)||ae(J))}function c(A,O,G){let J="",ce="";typeof O=="object"?(J=A,G=O.ignoreIllegals,ce=O.language):(Si("10.7.0","highlight(lang, code, ...args) has been deprecated."),Si("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ce=A,J=O),G===void 0&&(G=!0);const we={code:J,language:ce};Je("before:highlight",we);const Re=we.result?we.result:d(we.language,we.code,G);return Re.code=we.code,Je("after:highlight",Re),Re}function d(A,O,G,J){const ce=Object.create(null);function we(w,P){return w.keywords[P]}function Re(){if(!m.keywords){L.addText(S);return}let w=0;m.keywordPatternRe.lastIndex=0;let P=m.keywordPatternRe.exec(S),F="";for(;P;){F+=S.substring(w,P.index);const V=p.case_insensitive?P[0].toLowerCase():P[0],Z=we(m,V);if(Z){const[te,Xe]=Z;if(L.addText(F),F="",ce[V]=(ce[V]||0)+1,ce[V]<=Fm&&(D+=Xe),te.startsWith("_"))F+=P[0];else{const Lt=p.classNameAliases[te]||te;L.addKeyword(P[0],Lt)}}else F+=P[0];w=m.keywordPatternRe.lastIndex,P=m.keywordPatternRe.exec(S)}F+=S.substring(w),L.addText(F)}function Ve(){if(S==="")return;let w=null;if(typeof m.subLanguage=="string"){if(!e[m.subLanguage]){L.addText(S);return}w=d(m.subLanguage,S,!0,R[m.subLanguage]),R[m.subLanguage]=w._top}else w=y(S,m.subLanguage.length?m.subLanguage:null);m.relevance>0&&(D+=w.relevance),L.addSublanguage(w._emitter,w.language)}function Oe(){m.subLanguage!=null?Ve():Re(),S=""}function dt(w,P){let F=1;const V=P.length-1;for(;F<=V;){if(!w._emit[F]){F++;continue}const Z=p.classNameAliases[w[F]]||w[F],te=P[F];Z?L.addKeyword(te,Z):(S=te,Re(),S=""),F++}}function Tn(w,P){return w.scope&&typeof w.scope=="string"&&L.openNode(p.classNameAliases[w.scope]||w.scope),w.beginScope&&(w.beginScope._wrap?(L.addKeyword(S,p.classNameAliases[w.beginScope._wrap]||w.beginScope._wrap),S=""):w.beginScope._multi&&(dt(w.beginScope,P),S="")),m=Object.create(w,{parent:{value:m}}),m}function Qe(w,P,F){let V=em(w.endRe,F);if(V){if(w["on:end"]){const Z=new Qa(w);w["on:end"](P,Z),Z.isMatchIgnored&&(V=!1)}if(V){for(;w.endsParent&&w.parent;)w=w.parent;return w}}if(w.endsWithParent)return Qe(w.parent,P,F)}function yi(w){return m.matcher.regexIndex===0?(S+=w[0],1):(W=!0,0)}function kn(w){const P=w[0],F=w.rule,V=new Qa(F),Z=[F.__beforeBegin,F["on:begin"]];for(const te of Z)if(!!te&&(te(w,V),V.isMatchIgnored))return yi(P);return F.skip?S+=P:(F.excludeBegin&&(S+=P),Oe(),!F.returnBegin&&!F.excludeBegin&&(S=P)),Tn(F,w),F.returnBegin?0:P.length}function It(w){const P=w[0],F=O.substring(w.index),V=Qe(m,w,F);if(!V)return ro;const Z=m;m.endScope&&m.endScope._wrap?(Oe(),L.addKeyword(P,m.endScope._wrap)):m.endScope&&m.endScope._multi?(Oe(),dt(m.endScope,w)):Z.skip?S+=P:(Z.returnEnd||Z.excludeEnd||(S+=P),Oe(),Z.excludeEnd&&(S=P));do m.scope&&L.closeNode(),!m.skip&&!m.subLanguage&&(D+=m.relevance),m=m.parent;while(m!==V.parent);return V.starts&&Tn(V.starts,w),Z.returnEnd?0:P.length}function zi(){const w=[];for(let P=m;P!==p;P=P.parent)P.scope&&w.unshift(P.scope);w.forEach(P=>L.openNode(P))}let Mt={};function u(w,P){const F=P&&P[0];if(S+=w,F==null)return Oe(),0;if(Mt.type==="begin"&&P.type==="end"&&Mt.index===P.index&&F===""){if(S+=O.slice(P.index,P.index+1),!s){const V=new Error(`0 width match regex (${A})`);throw V.languageName=A,V.badRule=Mt.rule,V}return 1}if(Mt=P,P.type==="begin")return kn(P);if(P.type==="illegal"&&!G){const V=new Error('Illegal lexeme "'+F+'" for mode "'+(m.scope||"<unnamed>")+'"');throw V.mode=m,V}else if(P.type==="end"){const V=It(P);if(V!==ro)return V}if(P.type==="illegal"&&F==="")return 1;if(U>1e5&&U>P.index*3)throw new Error("potential infinite loop, way more iterations than matches");return S+=F,F.length}const p=ae(A);if(!p)throw ai(r.replace("{}",A)),new Error('Unknown language: "'+A+'"');const b=Om(p);let k="",m=J||b;const R={},L=new o.__emitter(o);zi();let S="",D=0,E=0,U=0,W=!1;try{for(m.matcher.considerAll();;){U++,W?W=!1:m.matcher.considerAll(),m.matcher.lastIndex=E;const w=m.matcher.exec(O);if(!w)break;const P=O.substring(E,w.index),F=u(P,w);E=w.index+F}return u(O.substring(E)),L.closeAllNodes(),L.finalize(),k=L.toHTML(),{language:A,value:k,relevance:D,illegal:!1,_emitter:L,_top:m}}catch(w){if(w.message&&w.message.includes("Illegal"))return{language:A,value:$s(O),illegal:!0,relevance:0,_illegalBy:{message:w.message,index:E,context:O.slice(E-100,E+100),mode:w.mode,resultSoFar:k},_emitter:L};if(s)return{language:A,value:$s(O),illegal:!1,relevance:0,errorRaised:w,_emitter:L,_top:m};throw w}}function f(A){const O={value:$s(A),illegal:!1,relevance:0,_top:a,_emitter:new o.__emitter(o)};return O._emitter.addText(A),O}function y(A,O){O=O||o.languages||Object.keys(e);const G=f(A),J=O.filter(ae).filter(Te).map(Oe=>d(Oe,A,!1));J.unshift(G);const ce=J.sort((Oe,dt)=>{if(Oe.relevance!==dt.relevance)return dt.relevance-Oe.relevance;if(Oe.language&&dt.language){if(ae(Oe.language).supersetOf===dt.language)return 1;if(ae(dt.language).supersetOf===Oe.language)return-1}return 0}),[we,Re]=ce,Ve=we;return Ve.secondBest=Re,Ve}function C(A,O,G){const J=O&&i[O]||G;A.classList.add("hljs"),A.classList.add(`language-${J}`)}function I(A){let O=null;const G=h(A);if(l(G))return;if(Je("before:highlightElement",{el:A,language:G}),A.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(A)),o.throwUnescapedHTML))throw new Hm("One of your code blocks includes unescaped HTML.",A.innerHTML);O=A;const J=O.textContent,ce=G?c(J,{language:G,ignoreIllegals:!0}):y(J);A.innerHTML=ce.value,C(A,G,ce.language),A.result={language:ce.language,re:ce.relevance,relevance:ce.relevance},ce.secondBest&&(A.secondBest={language:ce.secondBest.language,relevance:ce.secondBest.relevance}),Je("after:highlightElement",{el:A,result:ce,text:J})}function _(A){o=so(o,A)}const M=()=>{B(),Si("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function T(){B(),Si("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let H=!1;function B(){if(document.readyState==="loading"){H=!0;return}document.querySelectorAll(o.cssSelector).forEach(I)}function K(){H&&B()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",K,!1);function se(A,O){let G=null;try{G=O(t)}catch(J){if(ai("Language definition for '{}' could not be registered.".replace("{}",A)),s)ai(J);else throw J;G=a}G.name||(G.name=A),e[A]=G,G.rawDefinition=O.bind(null,t),G.aliases&&_e(G.aliases,{languageName:A})}function ge(A){delete e[A];for(const O of Object.keys(i))i[O]===A&&delete i[O]}function ee(){return Object.keys(e)}function ae(A){return A=(A||"").toLowerCase(),e[A]||e[i[A]]}function _e(A,{languageName:O}){typeof A=="string"&&(A=[A]),A.forEach(G=>{i[G.toLowerCase()]=O})}function Te(A){const O=ae(A);return O&&!O.disableAutodetect}function Le(A){A["before:highlightBlock"]&&!A["before:highlightElement"]&&(A["before:highlightElement"]=O=>{A["before:highlightBlock"](Object.assign({block:O.el},O))}),A["after:highlightBlock"]&&!A["after:highlightElement"]&&(A["after:highlightElement"]=O=>{A["after:highlightBlock"](Object.assign({block:O.el},O))})}function xe(A){Le(A),n.push(A)}function Je(A,O){const G=A;n.forEach(function(J){J[G]&&J[G](O)})}function ct(A){return Si("10.7.0","highlightBlock will be removed entirely in v12.0"),Si("10.7.0","Please use highlightElement now."),I(A)}Object.assign(t,{highlight:c,highlightAuto:y,highlightAll:B,highlightElement:I,highlightBlock:ct,configure:_,initHighlighting:M,initHighlightingOnLoad:T,registerLanguage:se,unregisterLanguage:ge,listLanguages:ee,getLanguage:ae,registerAliases:_e,autoDetection:Te,inherit:so,addPlugin:xe}),t.debugMode=function(){s=!1},t.safeMode=function(){s=!0},t.versionString=Nm,t.regex={concat:vi,lookahead:Vl,either:zr,optional:J_,anyNumberOfTimes:q_};for(const A in Vn)typeof Vn[A]=="object"&&Gr.exports(Vn[A]);return Object.assign(t,Vn),t};var yn=Gm({}),Wm=yn;yn.HighlightJS=yn;yn.default=yn;const Wt=Wm,us="[A-Za-z$_][0-9A-Za-z$_]*",Ql=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],eh=["true","false","null","undefined","NaN","Infinity"],th=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ih=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],nh=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],sh=["arguments","this","super","console","window","document","localStorage","module","global"],rh=[].concat(nh,th,ih);function Bm(t){const e=t.regex,i=(O,{after:G})=>{const J="</"+O[0].slice(1);return O.input.indexOf(J,G)!==-1},n=us,s={begin:"<>",end:"</>"},r=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(O,G)=>{const J=O[0].length+O.index,ce=O.input[J];if(ce==="<"||ce===","){G.ignoreMatch();return}ce===">"&&(i(O,{after:J})||G.ignoreMatch());let we;if((we=O.input.substring(J).match(/^\s+extends\s+/))&&we.index===0){G.ignoreMatch();return}}},o={$pattern:us,keyword:Ql,literal:eh,built_in:rh,"variable.language":sh},l="[0-9](_?[0-9])*",h=`\\.(${l})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${c})((${h})|\\.)?|(${h}))[eE][+-]?(${l})\\b`},{begin:`\\b(${c})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},f={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},y={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"xml"}},C={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"css"}},I={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,f]},_=t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),M={className:"comment",variants:[_,t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},T=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,y,C,I,d];f.contains=T.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(T)});const H=[].concat(M,f.contains),B=H.concat([{begin:/\(/,end:/\)/,keywords:o,contains:["self"].concat(H)}]),K={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:B},se={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,e.concat(n,"(",e.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},ge={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...th,...ih]}},ee={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},ae={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[K],illegal:/%/},_e={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function Te(O){return e.concat("(?!",O.join("|"),")")}const Le={match:e.concat(/\b/,Te([...nh,"super"]),n,e.lookahead(/\(/)),className:"title.function",relevance:0},xe={begin:e.concat(/\./,e.lookahead(e.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Je={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},K]},ct="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",A={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(ct)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[K]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:B,CLASS_REFERENCE:ge},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),ee,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,y,C,I,M,d,ge,{className:"attr",begin:n+e.lookahead(":"),relevance:0},A,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[M,t.REGEXP_MODE,{className:"function",begin:ct,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:B}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:r},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},ae,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[K,t.inherit(t.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},xe,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[K]},Le,_e,se,Je,{match:/\$[(.]/}]}}function zm(t){const e=Bm(t),i=us,n=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[e.exports.CLASS_REFERENCE]},r={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:n},contains:[e.exports.CLASS_REFERENCE]},a={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},o=["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"],l={$pattern:us,keyword:Ql.concat(o),literal:eh,built_in:rh.concat(n),"variable.language":sh},h={className:"meta",begin:"@"+i},c=(f,y,C)=>{const I=f.contains.findIndex(_=>_.label===y);if(I===-1)throw new Error("can not find mode to replace");f.contains.splice(I,1,C)};Object.assign(e.keywords,l),e.exports.PARAMS_CONTAINS.push(h),e.contains=e.contains.concat([h,s,r]),c(e,"shebang",t.SHEBANG()),c(e,"use_strict",a);const d=e.contains.find(f=>f.label==="func.def");return d.relevance=0,Object.assign(e,{name:"TypeScript",aliases:["ts","tsx"]}),e}function ah(t){const e=t.regex,i=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),n=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},r={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},a=t.inherit(r,{begin:/\(/,end:/\)/}),o=t.inherit(t.APOS_STRING_MODE,{className:"string"}),l=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:n,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[r,l,o,a,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[r,a,l,o]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(i,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:i,relevance:0,starts:h}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(i,/>/))),contains:[{className:"name",begin:i,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function Um(t){const e=t.regex,i={},n={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[i]}]};Object.assign(i,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},n]});const s={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},r={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,i,s]};s.contains.push(a);const o={className:"",begin:/\\"/},l={className:"string",begin:/'/,end:/'/},h={begin:/\$\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,i]},c=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],d=t.SHEBANG({binary:`(${c.join("|")})`,relevance:10}),f={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},y=["if","then","else","elif","fi","for","while","in","do","done","case","esac","function"],C=["true","false"],I={match:/(\/[a-z._-]+)+/},_=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],M=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias"],T=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],H=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:y,literal:C,built_in:[..._,...M,"set","shopt",...T,...H]},contains:[d,t.SHEBANG(),f,h,t.HASH_COMMENT_MODE,r,I,a,o,l,i]}}const Vm=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),Xm=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Ym=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],$m=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],jm=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],Km=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function Zm(t){const e=t.regex,i=Vm(t),n={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",r=/@-?\w[\w]*(-\w+)*/,a="[a-zA-Z-][a-zA-Z0-9_-]*",o=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[i.BLOCK_COMMENT,n,i.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+a,relevance:0},i.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+$m.join("|")+")"},{begin:":(:)?("+jm.join("|")+")"}]},i.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Km.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[i.BLOCK_COMMENT,i.HEXCOLOR,i.IMPORTANT,i.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},i.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:r},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:Ym.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,i.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+Xm.join("|")+")\\b"}]}}var ao=bt({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(t){var e=Kh(t.language);$n(function(){return t.language},function(s){e.value=s});var i=Ti(function(){return t.autodetect||!e.value}),n=Ti(function(){return!i.value&&!Wt.getLanguage(e.value)});return{className:Ti(function(){return n.value?"":"hljs "+e.value}),highlightedCode:Ti(function(){var s;if(n.value)return console.warn('The language "'+e.value+'" you specified could not be found.'),t.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(i.value){var r=Wt.highlightAuto(t.code);return e.value=(s=r.language)!==null&&s!==void 0?s:"",r.value}return(r=Wt.highlight(t.code,{language:e.value,ignoreIllegals:t.ignoreIllegals})).value})}},render:function(){return _a("pre",{},[_a("code",{class:this.className,innerHTML:this.highlightedCode})])}}),qm={install:function(t){t.component("highlightjs",ao)},component:ao};Wt.registerLanguage("vue-typescript",zm);Wt.registerLanguage("vue-template",ah);Wt.registerLanguage("vue-sfc",ah);Wt.registerLanguage("bash",Um);Wt.registerLanguage("css",Zm);Ed(Y_).use(qm).mount("#app");
//# sourceMappingURL=index.6c06300f.js.map
